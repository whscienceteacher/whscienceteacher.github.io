// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

var __create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(t,s)=>function(){return s||(0,t[__getOwnPropNames(t)[0]])((s={exports:{}}).exports,s),s.exports},__copyProps=(t,s,i,e)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let n of __getOwnPropNames(s))__hasOwnProp.call(t,n)||n===i||__defProp(t,n,{get:()=>s[n],enumerable:!(e=__getOwnPropDesc(s,n))||e.enumerable});return t},__toESM=(t,s,i)=>(i=null!=t?__create(__getProtoOf(t)):{},__copyProps(!s&&t&&t.i?i:__defProp(i,"default",{value:t,enumerable:!0}),t)),require_c3runtime=__commonJS({"file-map:scripts/c3runtime.js"(exports,module){{let e=function(t){ARRAY_TYPE=t},n=function(t){return t*degree},h=function(t,s){return Math.abs(t-s)<=EPSILON*Math.max(1,Math.abs(t),Math.abs(s))},u=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},p=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},m=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},g=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},y=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},w=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},S=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},b=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*r-n*e;return h?(h=1/h,t[0]=r*h,t[1]=-e*h,t[2]=-n*h,t[3]=i*h,t):null},v=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},M=function(t){return t[0]*t[3]-t[2]*t[1]},x=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+r*a,t[1]=n*o+h*a,t[2]=e*l+r*u,t[3]=n*l+h*u,t},G=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=n*a+h*o,t[2]=e*-o+r*a,t[3]=n*-o+h*a,t},T=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=n*o,t[2]=r*a,t[3]=h*a,t},C=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},I=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},_=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},E=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},R=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},P=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},A=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},O=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},D=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},F=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},L=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},k=function(){var t=new ARRAY_TYPE(6);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},N=function(t){var s=new ARRAY_TYPE(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},$=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},B=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},W=function(t,s,i,e,n,r){var h=new ARRAY_TYPE(6);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h[4]=n,h[5]=r,h},j=function(t,s,i,e,n,r,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t},V=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=i*r-e*n;return a?(a=1/a,t[0]=r*a,t[1]=-e*a,t[2]=-n*a,t[3]=i*a,t[4]=(n*o-r*h)*a,t[5]=(e*h-i*o)*a,t):null},H=function(t){return t[0]*t[3]-t[1]*t[2]},U=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+r*u,t[1]=n*l+h*u,t[2]=e*c+r*f,t[3]=n*c+h*f,t[4]=e*d+r*p+o,t[5]=n*d+h*p+a,t},q=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+r*l,t[1]=n*u+h*l,t[2]=e*-l+r*u,t[3]=n*-l+h*u,t[4]=o,t[5]=a,t},z=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=n*l,t[2]=r*u,t[3]=h*u,t[4]=o,t[5]=a,t},J=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=e*l+r*u+o,t[5]=n*l+h*u+a,t},Y=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},X=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},K=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Z=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Q=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},tt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},st=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},it=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},et=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},nt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},rt=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=s[0],l=s[1],u=s[2],c=s[3],f=s[4],d=s[5];return Math.abs(i-a)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(a))&&Math.abs(e-l)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(n-u)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-c)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(h-f)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(o-d)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(d))},ht=function(){var t=new ARRAY_TYPE(9);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},ot=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},at=function(t){var s=new ARRAY_TYPE(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},ut=function(t,s,i,e,n,r,h,o,a){var l=new ARRAY_TYPE(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=n,l[5]=r,l[6]=h,l[7]=o,l[8]=a,l},ct=function(t,s,i,e,n,r,h,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t},ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},dt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=n}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},pt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*h-o*l,f=-u*r+o*a,d=l*r-h*a,p=i*c+e*f+n*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+n*l)*p,t[2]=(o*e-n*h)*p,t[3]=f*p,t[4]=(u*i-n*a)*p,t[5]=(-o*i+n*r)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(h*i-e*r)*p,t):null},mt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=h*u-o*l,t[1]=n*l-e*u,t[2]=e*o-n*h,t[3]=o*a-r*u,t[4]=i*u-n*a,t[5]=n*r-i*o,t[6]=r*l-h*a,t[7]=e*a-i*l,t[8]=i*h-e*r,t},gt=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8];return s*(l*r-h*a)+i*(-l*n+h*o)+e*(a*n-r*o)},yt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],b=i[8];return t[0]=f*e+d*h+p*l,t[1]=f*n+d*o+p*u,t[2]=f*r+d*a+p*c,t[3]=m*e+g*h+y*l,t[4]=m*n+g*o+y*u,t[5]=m*r+g*a+y*c,t[6]=w*e+S*h+b*l,t[7]=w*n+S*o+b*u,t[8]=w*r+S*a+b*c,t},wt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=f*e+d*h+l,t[7]=f*n+d*o+u,t[8]=f*r+d*a+c,t},St=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*h,t[1]=d*n+f*o,t[2]=d*r+f*a,t[3]=d*h-f*e,t[4]=d*o-f*n,t[5]=d*a-f*r,t[6]=l,t[7]=u,t[8]=c,t},bt=function(t,s,i){var e=i[0],n=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=n*s[3],t[4]=n*s[4],t[5]=n*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Mt=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},xt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Gt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Tt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Ct=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,C=u*y-d*p,I=c*g-f*m,_=c*y-d*m,E=f*y-d*g,R=w*E-S*_+b*I+v*C-M*T+x*G;return R?(R=1/R,t[0]=(o*E-a*_+l*I)*R,t[1]=(a*C-h*E-l*T)*R,t[2]=(h*_-o*C+l*G)*R,t[3]=(n*_-e*E-r*I)*R,t[4]=(i*E-n*C+r*T)*R,t[5]=(e*C-i*_-r*G)*R,t[6]=(m*x-g*M+y*v)*R,t[7]=(g*b-p*x-y*S)*R,t[8]=(p*M-m*b+y*w)*R,t):null},It=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},_t=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Et=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Rt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},Pt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},At=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Ot=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Dt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Ft=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=s[0],f=s[1],d=s[2],p=s[3],m=s[4],g=s[5],y=s[6],w=s[7],S=s[8];return Math.abs(i-c)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(e-f)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(n-d)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(h-m)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(m))&&Math.abs(o-g)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(S))},Lt=function(){var t=new ARRAY_TYPE(16);return ARRAY_TYPE!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},kt=function(t){var s=new ARRAY_TYPE(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},$t=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m){var g=new ARRAY_TYPE(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=n,g[5]=r,g[6]=h,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},Bt=function(t,s,i,e,n,r,h,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},Wt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},jt=function(t,s){if(t===s){var i=s[1],e=s[2],n=s[3],r=s[6],h=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=n,t[13]=h,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},Vt=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,C=u*y-d*p,I=c*g-f*m,_=c*y-d*m,E=f*y-d*g,R=w*E-S*_+b*I+v*C-M*T+x*G;return R?(R=1/R,t[0]=(o*E-a*_+l*I)*R,t[1]=(n*_-e*E-r*I)*R,t[2]=(m*x-g*M+y*v)*R,t[3]=(f*M-c*x-d*v)*R,t[4]=(a*C-h*E-l*T)*R,t[5]=(i*E-n*C+r*T)*R,t[6]=(g*b-p*x-y*S)*R,t[7]=(u*x-f*b+d*S)*R,t[8]=(h*_-o*C+l*G)*R,t[9]=(e*C-i*_-r*G)*R,t[10]=(p*M-m*b+y*w)*R,t[11]=(c*b-u*M-d*w)*R,t[12]=(o*T-h*I-a*G)*R,t[13]=(i*I-e*T+n*G)*R,t[14]=(m*S-p*v-g*w)*R,t[15]=(u*v-c*S+f*w)*R,t):null},Ht=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*h,S=i*a-n*h,b=i*l-r*h,v=e*a-n*o,M=e*l-r*o,x=n*l-r*a,G=u*m-c*p,T=u*g-f*p,C=u*y-d*p,I=c*g-f*m,_=c*y-d*m,E=f*y-d*g;return t[0]=o*E-a*_+l*I,t[1]=n*_-e*E-r*I,t[2]=m*x-g*M+y*v,t[3]=f*M-c*x-d*v,t[4]=a*C-h*E-l*T,t[5]=i*E-n*C+r*T,t[6]=g*b-p*x-y*S,t[7]=u*x-f*b+d*S,t[8]=h*_-o*C+l*G,t[9]=e*C-i*_-r*G,t[10]=p*M-m*b+y*w,t[11]=c*b-u*M-d*w,t[12]=o*T-h*I-a*G,t[13]=i*I-e*T+n*G,t[14]=m*S-p*v-g*w,t[15]=u*v-c*S+f*w,t},Ut=function(t){var s=t[0],i=t[1],e=t[2],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*h-i*r,y=s*o-e*r,w=i*o-e*h,S=l*p-u*d,b=l*m-c*d,v=u*m-c*p;return a*(s*v-i*b+e*S)-n*(r*v-h*b+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},qt=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],b=i[1],v=i[2],M=i[3];return t[0]=S*e+b*o+v*c+M*m,t[1]=S*n+b*a+v*f+M*g,t[2]=S*r+b*l+v*d+M*y,t[3]=S*h+b*u+v*p+M*w,S=i[4],b=i[5],v=i[6],M=i[7],t[4]=S*e+b*o+v*c+M*m,t[5]=S*n+b*a+v*f+M*g,t[6]=S*r+b*l+v*d+M*y,t[7]=S*h+b*u+v*p+M*w,S=i[8],b=i[9],v=i[10],M=i[11],t[8]=S*e+b*o+v*c+M*m,t[9]=S*n+b*a+v*f+M*g,t[10]=S*r+b*l+v*d+M*y,t[11]=S*h+b*u+v*p+M*w,S=i[12],b=i[13],v=i[14],M=i[15],t[12]=S*e+b*o+v*c+M*m,t[13]=S*n+b*a+v*f+M*g,t[14]=S*r+b*l+v*d+M*y,t[15]=S*h+b*u+v*p+M*w,t},zt=function(t,s,i){var e,n,r,h,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],n=s[1],r=s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=n*m+a*g+f*y+s[13],t[14]=r*m+l*g+d*y+s[14],t[15]=h*m+u*g+p*y+s[15]),t},Jt=function(t,s,i){var e=i[0],n=i[1],r=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*n,t[5]=s[5]*n,t[6]=s[6]*n,t[7]=s[7]*n,t[8]=s[8]*r,t[9]=s[9]*r,t[10]=s[10]*r,t[11]=s[11]*r,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},Yt=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,G,T,C,I,_=e[0],E=e[1],R=e[2],P=Math.hypot(_,E,R);return P<EPSILON?null:(_*=P=1/P,E*=P,R*=P,n=Math.sin(i),h=1-(r=Math.cos(i)),o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],f=s[5],d=s[6],p=s[7],m=s[8],g=s[9],y=s[10],w=s[11],S=_*_*h+r,b=E*_*h+R*n,v=R*_*h-E*n,M=_*E*h-R*n,x=E*E*h+r,G=R*E*h+_*n,T=_*R*h+E*n,C=E*R*h-_*n,I=R*R*h+r,t[0]=o*S+c*b+m*v,t[1]=a*S+f*b+g*v,t[2]=l*S+d*b+y*v,t[3]=u*S+p*b+w*v,t[4]=o*M+c*x+m*G,t[5]=a*M+f*x+g*G,t[6]=l*M+d*x+y*G,t[7]=u*M+p*x+w*G,t[8]=o*T+c*C+m*I,t[9]=a*T+f*C+g*I,t[10]=l*T+d*C+y*I,t[11]=u*T+p*C+w*I,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},Xt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[4],h=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=r*n+l*e,t[5]=h*n+u*e,t[6]=o*n+c*e,t[7]=a*n+f*e,t[8]=l*n-r*e,t[9]=u*n-h*e,t[10]=c*n-o*e,t[11]=f*n-a*e,t},Kt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n-l*e,t[1]=h*n-u*e,t[2]=o*n-c*e,t[3]=a*n-f*e,t[8]=r*e+l*n,t[9]=h*e+u*n,t[10]=o*e+c*n,t[11]=a*e+f*n,t},Zt=function(t,s,i){var e=Math.sin(i),n=Math.cos(i),r=s[0],h=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=r*n+l*e,t[1]=h*n+u*e,t[2]=o*n+c*e,t[3]=a*n+f*e,t[4]=l*n-r*e,t[5]=u*n-h*e,t[6]=c*n-o*e,t[7]=f*n-a*e,t},Qt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ts=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ss=function(t,s,i){var e,n,r,h=i[0],o=i[1],a=i[2],l=Math.hypot(h,o,a);return l<EPSILON?null:(h*=l=1/l,o*=l,a*=l,e=Math.sin(s),r=1-(n=Math.cos(s)),t[0]=h*h*r+n,t[1]=o*h*r+a*e,t[2]=a*h*r-o*e,t[3]=0,t[4]=h*o*r-a*e,t[5]=o*o*r+n,t[6]=a*o*r+h*e,t[7]=0,t[8]=h*a*r+o*e,t[9]=o*a*r-h*e,t[10]=a*a*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},is=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},es=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},rs=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=e+e,a=n+n,l=r+r,u=e*o,c=e*a,f=e*l,d=n*a,p=n*l,m=r*l,g=h*o,y=h*a,w=h*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},hs=function(t,s){var i=new ARRAY_TYPE(3),e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+n*n+r*r+h*h;return c>0?(i[0]=2*(o*h+u*e+a*r-l*n)/c,i[1]=2*(a*h+u*n+l*e-o*r)/c,i[2]=2*(l*h+u*r+o*n-a*e)/c):(i[0]=2*(o*h+u*e+a*r-l*n),i[1]=2*(a*h+u*n+l*e-o*r),i[2]=2*(l*h+u*r+o*n-a*e)),rs(t,s,i),t},os=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},as=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[4],h=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,n),t[1]=Math.hypot(r,h,o),t[2]=Math.hypot(a,l,u),t},ls=function(t,s){var i=new ARRAY_TYPE(3);as(i,s);var e=1/i[0],n=1/i[1],r=1/i[2],h=s[0]*e,o=s[1]*n,a=s[2]*r,l=s[4]*e,u=s[5]*n,c=s[6]*r,f=s[8]*e,d=s[9]*n,p=s[10]*r,m=h+u+p,g=0;return m>0?(g=2*Math.sqrt(m+1),t[3]=.25*g,t[0]=(c-d)/g,t[1]=(f-a)/g,t[2]=(o-l)/g):h>u&&h>p?(g=2*Math.sqrt(1+h-u-p),t[3]=(c-d)/g,t[0]=.25*g,t[1]=(o+l)/g,t[2]=(f+a)/g):u>p?(g=2*Math.sqrt(1+u-h-p),t[3]=(f-a)/g,t[0]=(o+l)/g,t[1]=.25*g,t[2]=(c+d)/g):(g=2*Math.sqrt(1+p-h-u),t[3]=(o-l)/g,t[0]=(f+a)/g,t[1]=(c+d)/g,t[2]=.25*g),t},us=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var n=e[0],r=e[1],h=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(n,r,h),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=n*d,y=r*p,w=h*m,S=o*d,b=a*p,v=l*m,M=u*d,x=c*p,G=f*m,T=g+b+G,C=0;return T>0?(C=2*Math.sqrt(T+1),t[3]=.25*C,t[0]=(v-x)/C,t[1]=(M-w)/C,t[2]=(y-S)/C):g>b&&g>G?(C=2*Math.sqrt(1+g-b-G),t[3]=(v-x)/C,t[0]=.25*C,t[1]=(y+S)/C,t[2]=(M+w)/C):b>G?(C=2*Math.sqrt(1+b-g-G),t[3]=(M-w)/C,t[0]=(y+S)/C,t[1]=.25*C,t[2]=(v+x)/C):(C=2*Math.sqrt(1+G-g-b),t[3]=(y-S)/C,t[0]=(M+w)/C,t[1]=(v+x)/C,t[2]=.25*C),t},cs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3],a=n+n,l=r+r,u=h+h,c=n*a,f=n*l,d=n*u,p=r*l,m=r*u,g=h*u,y=o*a,w=o*l,S=o*u,b=e[0],v=e[1],M=e[2];return t[0]=(1-(p+g))*b,t[1]=(f+S)*b,t[2]=(d-w)*b,t[3]=0,t[4]=(f-S)*v,t[5]=(1-(c+g))*v,t[6]=(m+y)*v,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},fs=function(t,s,i,e,n){var r=s[0],h=s[1],o=s[2],a=s[3],l=r+r,u=h+h,c=o+o,f=r*l,d=r*u,p=r*c,m=h*u,g=h*c,y=o*c,w=a*l,S=a*u,b=a*c,v=e[0],M=e[1],x=e[2],G=n[0],T=n[1],C=n[2],I=(1-(m+y))*v,_=(d+b)*v,E=(p-S)*v,R=(d-b)*M,P=(1-(f+y))*M,A=(g+w)*M,O=(p+S)*x,D=(g-w)*x,F=(1-(f+m))*x;return t[0]=I,t[1]=_,t[2]=E,t[3]=0,t[4]=R,t[5]=P,t[6]=A,t[7]=0,t[8]=O,t[9]=D,t[10]=F,t[11]=0,t[12]=i[0]+G-(I*G+R*T+O*C),t[13]=i[1]+T-(_*G+P*T+D*C),t[14]=i[2]+C-(E*G+A*T+F*C),t[15]=1,t},ds=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i+i,o=e+e,a=n+n,l=i*h,u=e*h,c=e*o,f=n*h,d=n*o,p=n*a,m=r*h,g=r*o,y=r*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ps=function(t,s,i,e,n,r,h){var o=1/(i-s),a=1/(n-e),l=1/(r-h);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(n+e)*a,t[10]=(h+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=h*r*2*l,t[15]=0,t},ms=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=(n+e)*h,t[14]=2*n*e*h}else t[10]=-1,t[14]=-2*e;return t},gs=function(t,s,i,e,n){var r=1/Math.tan(s/2);if(t[0]=r/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=n&&n!==1/0){var h=1/(e-n);t[10]=n*h,t[14]=n*e*h}else t[10]=-1,t[14]=-e;return t},ys=function(t,s,i,e){var n=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),h=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(h+o),l=2/(n+r);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(h-o)*a*.5,t[9]=(n-r)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},ws=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=(h+r)*l,t[15]=1,t},Ss=function(t,s,i,e,n,r,h){var o=1/(s-i),a=1/(e-n),l=1/(r-h);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(n+e)*a,t[14]=r*l,t[15]=1,t},bs=function(t,s,i,e){var n,r,h,o,a,l,u,c,f,d,p=s[0],m=s[1],g=s[2],y=e[0],w=e[1],S=e[2],b=i[0],v=i[1],M=i[2];return Math.abs(p-b)<EPSILON&&Math.abs(m-v)<EPSILON&&Math.abs(g-M)<EPSILON?Wt(t):(u=p-b,c=m-v,f=g-M,n=w*(f*=d=1/Math.hypot(u,c,f))-S*(c*=d),r=S*(u*=d)-y*f,h=y*c-w*u,(d=Math.hypot(n,r,h))?(n*=d=1/d,r*=d,h*=d):(n=0,r=0,h=0),o=c*h-f*r,a=f*n-u*h,l=u*r-c*n,(d=Math.hypot(o,a,l))?(o*=d=1/d,a*=d,l*=d):(o=0,a=0,l=0),t[0]=n,t[1]=o,t[2]=u,t[3]=0,t[4]=r,t[5]=a,t[6]=c,t[7]=0,t[8]=h,t[9]=l,t[10]=f,t[11]=0,t[12]=-(n*p+r*m+h*g),t[13]=-(o*p+a*m+l*g),t[14]=-(u*p+c*m+f*g),t[15]=1,t)},vs=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=e[0],a=e[1],l=e[2],u=n-i[0],c=r-i[1],f=h-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=n,t[13]=r,t[14]=h,t[15]=1,t},Ms=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},xs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Gs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ts=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Cs=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Is=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},_s=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Es=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],y=t[15],w=s[0],S=s[1],b=s[2],v=s[3],M=s[4],x=s[5],G=s[6],T=s[7],C=s[8],I=s[9],_=s[10],E=s[11],R=s[12],P=s[13],A=s[14],O=s[15];return Math.abs(i-w)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(w))&&Math.abs(e-S)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(n-b)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-v)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(h-M)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(M))&&Math.abs(o-x)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(a-G)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(G))&&Math.abs(l-T)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-C)<=EPSILON*Math.max(1,Math.abs(u),Math.abs(C))&&Math.abs(c-I)<=EPSILON*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-_)<=EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(d-E)<=EPSILON*Math.max(1,Math.abs(d),Math.abs(E))&&Math.abs(p-R)<=EPSILON*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-P)<=EPSILON*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-A)<=EPSILON*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(y-O)<=EPSILON*Math.max(1,Math.abs(y),Math.abs(O))},Rs=function(){var t=new ARRAY_TYPE(3);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Ps=function(t){var s=new ARRAY_TYPE(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},As=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},Os=function(t,s,i){var e=new ARRAY_TYPE(3);return e[0]=t,e[1]=s,e[2]=i,e},Ds=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Fs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Ls=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ns=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},$s=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Bs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Ws=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},js=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Vs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Hs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},Us=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},qs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},zs=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return Math.hypot(i,e,n)},Js=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2];return i*i+e*e+n*n},Ys=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},Xs=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},Ks=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},Zs=function(t,s){var i=s[0],e=s[1],n=s[2],r=i*i+e*e+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=s[0]*r,t[1]=s[1]*r,t[2]=s[2]*r,t},Qs=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ti=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2];return t[0]=n*a-r*o,t[1]=r*h-e*a,t[2]=e*o-n*h,t},si=function(t,s,i,e){var n=s[0],r=s[1],h=s[2];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t},ii=function(t,s,i,e){var n=Math.acos(Math.min(Math.max(Qs(s,i),-1),1)),r=Math.sin(n),h=Math.sin((1-e)*n)/r,o=Math.sin(e*n)/r;return t[0]=h*s[0]+o*i[0],t[1]=h*s[1]+o*i[1],t[2]=h*s[2]+o*i[2],t},ei=function(t,s,i,e,n,r){var h=r*r,o=h*(2*r-3)+1,a=h*(r-2)+r,l=h*(r-1),u=h*(3-2*r);return t[0]=s[0]*o+i[0]*a+e[0]*l+n[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+n[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+n[2]*u,t},ni=function(t,s,i,e,n,r){var h=1-r,o=h*h,a=r*r,l=o*h,u=3*r*o,c=3*a*h,f=a*r;return t[0]=s[0]*l+i[0]*u+e[0]*c+n[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+n[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+n[2]*f,t},ri=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI,e=2*RANDOM()-1,n=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=e*s,t},hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[3]*e+i[7]*n+i[11]*r+i[15];return h=h||1,t[0]=(i[0]*e+i[4]*n+i[8]*r+i[12])/h,t[1]=(i[1]*e+i[5]*n+i[9]*r+i[13])/h,t[2]=(i[2]*e+i[6]*n+i[10]*r+i[14])/h,t},oi=function(t,s,i){var e=s[0],n=s[1],r=s[2];return t[0]=e*i[0]+n*i[3]+r*i[6],t[1]=e*i[1]+n*i[4]+r*i[7],t[2]=e*i[2]+n*i[5]+r*i[8],t},ai=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=n*l-r*a,c=r*o-e*l,f=e*a-n*o,d=n*f-r*c,p=r*u-e*f,m=e*c-n*u,g=2*h;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},li=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0],r[1]=n[1]*Math.cos(e)-n[2]*Math.sin(e),r[2]=n[1]*Math.sin(e)+n[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ui=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[2]*Math.sin(e)+n[0]*Math.cos(e),r[1]=n[1],r[2]=n[2]*Math.cos(e)-n[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},ci=function(t,s,i,e){var n=[],r=[];return n[0]=s[0]-i[0],n[1]=s[1]-i[1],n[2]=s[2]-i[2],r[0]=n[0]*Math.cos(e)-n[1]*Math.sin(e),r[1]=n[0]*Math.sin(e)+n[1]*Math.cos(e),r[2]=n[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},fi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2],a=Math.sqrt((i*i+e*e+n*n)*(r*r+h*h+o*o)),l=a&&Qs(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},di=function(t){return t[0]=0,t[1]=0,t[2]=0,t},pi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},gi=function(t,s){var i=t[0],e=t[1],n=t[2],r=s[0],h=s[1],o=s[2];return Math.abs(i-r)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-h)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(n-o)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(o))},yi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},wi=function(t){var s=new ARRAY_TYPE(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Si=function(t,s,i,e){var n=new ARRAY_TYPE(4);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n},bi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},vi=function(t,s,i,e,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t},Mi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},xi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Gi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ti=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ci=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ii=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},_i=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Ei=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ai=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Oi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return Math.hypot(i,e,n,r)},Di=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],n=s[2]-t[2],r=s[3]-t[3];return i*i+e*e+n*n+r*r},Fi=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return Math.hypot(s,i,e,n)},Li=function(t){var s=t[0],i=t[1],e=t[2],n=t[3];return s*s+i*i+e*e+n*n},ki=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},$i=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r;return h>0&&(h=1/Math.sqrt(h)),t[0]=i*h,t[1]=e*h,t[2]=n*h,t[3]=r*h,t},Bi=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var n=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],h=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*h-d*r,t[2]=u*a-c*h+d*n,t[3]=-u*o+c*r-f*n,t},ji=function(t,s,i,e){var n=s[0],r=s[1],h=s[2],o=s[3];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t[2]=h+e*(i[2]-h),t[3]=o+e*(i[3]-o),t},Vi=function(t,s){var i,e,n,r,h,o;s=s||1;do{h=(i=2*RANDOM()-1)*i+(e=2*RANDOM()-1)*e}while(h>=1);do{o=(n=2*RANDOM()-1)*n+(r=2*RANDOM()-1)*r}while(o>=1);var a=Math.sqrt((1-h)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*n*a,t[3]=s*r*a,t},Hi=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3];return t[0]=i[0]*e+i[4]*n+i[8]*r+i[12]*h,t[1]=i[1]*e+i[5]*n+i[9]*r+i[13]*h,t[2]=i[2]*e+i[6]*n+i[10]*r+i[14]*h,t[3]=i[3]*e+i[7]*n+i[11]*r+i[15]*h,t},Ui=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*r-a*n,c=l*n+a*e-h*r,f=l*r+h*n-o*e,d=-h*e-o*n-a*r;return t[0]=u*l+d*-h+c*-a-f*-o,t[1]=c*l+d*-o+f*-h-u*-a,t[2]=f*l+d*-a+u*-o-c*-h,t[3]=s[3],t},qi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},zi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Ji=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Yi=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=s[0],o=s[1],a=s[2],l=s[3];return Math.abs(i-h)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-o)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(n-a)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-l)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},Xi=function(){var t=new ARRAY_TYPE(4);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},Zi=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return e>EPSILON?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){var i=dot$2(t,s);return Math.acos(2*i*i-1)},se=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,t},ie=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=n*a+r*o,t[2]=r*a-n*o,t[3]=h*a-e*o,t},ee=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-r*o,t[1]=n*a+h*o,t[2]=r*a+e*o,t[3]=h*a-n*o,t},ne=function(t,s,i){i*=.5;var e=s[0],n=s[1],r=s[2],h=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=n*a-e*o,t[2]=r*a+h*o,t[3]=h*a-r*o,t},re=function(t,s){var i=s[0],e=s[1],n=s[2];return t[0]=i,t[1]=e,t[2]=n,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-n*n)),t},he=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=Math.exp(r),a=h>0?o*Math.sin(h)/h:0;return t[0]=i*a,t[1]=e*a,t[2]=n*a,t[3]=o*Math.cos(h),t},oe=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=Math.sqrt(i*i+e*e+n*n),o=h>0?Math.atan2(h,r)/h:0;return t[0]=i*o,t[1]=e*o,t[2]=n*o,t[3]=.5*Math.log(i*i+e*e+n*n+r*r),t},ae=function(t,s,i){return oe(t,s),scale$2(t,t,i),he(t,t),t},le=function(t,s,i,e){var n,r,h,o,a,l=s[0],u=s[1],c=s[2],f=s[3],d=i[0],p=i[1],m=i[2],g=i[3];return(r=l*d+u*p+c*m+f*g)<0&&(r=-r,d=-d,p=-p,m=-m,g=-g),1-r>EPSILON?(n=Math.acos(r),h=Math.sin(n),o=Math.sin((1-e)*n)/h,a=Math.sin(e*n)/h):(o=1-e,a=e),t[0]=o*l+a*d,t[1]=o*u+a*p,t[2]=o*c+a*m,t[3]=o*f+a*g,t},ue=function(t){var s=RANDOM(),i=RANDOM(),e=RANDOM(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*e),t[3]=r*Math.cos(2*Math.PI*e),t},ce=function(t,s){var i=s[0],e=s[1],n=s[2],r=s[3],h=i*i+e*e+n*n+r*r,o=h?1/h:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-n*o,t[3]=r*o,t},fe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},de=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var n=0;s[4]>s[0]&&(n=1),s[8]>s[3*n+n]&&(n=2);var r=(n+1)%3,h=(n+2)%3;i=Math.sqrt(s[3*n+n]-s[3*r+r]-s[3*h+h]+1),t[n]=.5*i,i=.5/i,t[3]=(s[3*r+h]-s[3*h+r])*i,t[r]=(s[3*r+n]+s[3*n+r])*i,t[h]=(s[3*h+n]+s[3*n+h])*i}return t},pe=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ANGLE_ORDER,r=Math.PI/360;s*=r,e*=r,i*=r;var h=Math.sin(s),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(n){case"xyz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"xzy":t[0]=h*l*c-o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c+h*a*u;break;case"yxz":t[0]=h*l*c+o*a*u,t[1]=o*a*c-h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;case"yzx":t[0]=h*l*c+o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c-h*a*u;break;case"zxy":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u+h*a*c,t[3]=o*l*c-h*a*u;break;case"zyx":t[0]=h*l*c-o*a*u,t[1]=o*a*c+h*l*u,t[2]=o*l*u-h*a*c,t[3]=o*l*c+h*a*u;break;default:throw new Error("Unknown angle order "+n)}return t},me=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ge=function(t,s){return Math.abs(Bi(t,s))>=1-EPSILON},ye=function(){var t=new ARRAY_TYPE(8);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},we=function(t){var s=new ARRAY_TYPE(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},Se=function(t,s,i,e,n,r,h,o){var a=new ARRAY_TYPE(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=n,a[5]=r,a[6]=h,a[7]=o,a},be=function(t,s,i,e,n,r,h){var o=new ARRAY_TYPE(8);o[0]=t,o[1]=s,o[2]=i,o[3]=e;var a=.5*n,l=.5*r,u=.5*h;return o[4]=a*e+l*i-u*s,o[5]=l*e+u*t-a*i,o[6]=u*e+a*s-l*t,o[7]=-a*t-l*s-u*i,o},ve=function(t,s,i){var e=.5*i[0],n=.5*i[1],r=.5*i[2],h=s[0],o=s[1],a=s[2],l=s[3];return t[0]=h,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+n*a-r*o,t[5]=n*l+r*h-e*a,t[6]=r*l+e*o-n*h,t[7]=-e*h-n*o-r*a,t},Me=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},xe=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ge=function(t,s){var i=Xi();ls(i,s);var e=new ARRAY_TYPE(3);return os(e,s),ve(t,i,e),t},Te=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Ce=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Ie=function(t,s,i,e,n,r,h,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=n,t[4]=r,t[5]=h,t[6]=o,t[7]=a,t},_e=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Ee=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Re=function(t,s){var i=s[4],e=s[5],n=s[6],r=s[7],h=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+r*h+e*a-n*o),t[1]=2*(e*l+r*o+n*h-i*a),t[2]=2*(n*l+r*a+i*o-e*h),t},Pe=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=h*o+n*l-r*a+u,t[5]=h*a+r*o-e*l+c,t[6]=h*l+e*a-n*o+f,t[7]=-e*o-n*a-r*l+d,t},Ae=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ie(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Oe=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ee(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},De=function(t,s,i){var e=-s[0],n=-s[1],r=-s[2],h=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*h+u*e+a*r-l*n,f=a*h+u*n+l*e-o*r,d=l*h+u*r+o*n-a*e,p=u*h-o*e-a*n-l*r;return ne(t,s,i),e=t[0],n=t[1],r=t[2],h=t[3],t[4]=c*h+p*e+f*r-d*n,t[5]=f*h+p*n+d*e-c*r,t[6]=d*h+p*r+c*n-f*e,t[7]=p*h-c*e-f*n-d*r,t},Fe=function(t,s,i){var e=i[0],n=i[1],r=i[2],h=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*h+u*e+a*r-l*n,t[1]=a*h+u*n+l*e-o*r,t[2]=l*h+u*r+o*n-a*e,t[3]=u*h-o*e-a*n-l*r,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*h+u*e+a*r-l*n,t[5]=a*h+u*n+l*e-o*r,t[6]=l*h+u*r+o*n-a*e,t[7]=u*h-o*e-a*n-l*r,t},Le=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+h*o+n*l-r*a,t[1]=n*u+h*a+r*o-e*l,t[2]=r*u+h*l+e*a-n*o,t[3]=h*u-e*o-n*a-r*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+h*o+n*l-r*a,t[5]=n*u+h*a+r*o-e*l,t[6]=r*u+h*l+e*a-n*o,t[7]=h*u-e*o-n*a-r*l,t},ke=function(t,s,i,e){if(Math.abs(e)<EPSILON)return Te(t,s);var n=Math.hypot(i[0],i[1],i[2]);e*=.5;var r=Math.sin(e),h=r*i[0]/n,o=r*i[1]/n,a=r*i[2]/n,l=Math.cos(e),u=s[0],c=s[1],f=s[2],d=s[3];t[0]=u*l+d*h+c*a-f*o,t[1]=c*l+d*o+f*h-u*a,t[2]=f*l+d*a+u*o-c*h,t[3]=d*l-u*h-c*o-f*a;var p=s[4],m=s[5],g=s[6],y=s[7];return t[4]=p*l+y*h+m*a-g*o,t[5]=m*l+y*o+g*h-p*a,t[6]=g*l+y*a+p*o-m*h,t[7]=y*l-p*h-m*o-g*a,t},Ne=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},$e=function(t,s,i){var e=s[0],n=s[1],r=s[2],h=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+h*m+n*y-r*g,t[1]=n*w+h*g+r*m-e*y,t[2]=r*w+h*y+e*g-n*m,t[3]=h*w-e*m-n*g-r*y,t[4]=e*u+h*o+n*l-r*a+c*w+p*m+f*y-d*g,t[5]=n*u+h*a+r*o-e*l+f*w+p*g+d*m-c*y,t[6]=r*u+h*l+e*a-n*o+d*w+p*y+c*g-f*m,t[7]=h*u-e*o-n*a-r*l+p*w-c*m-f*g-d*y,t},Be=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},We=function(t,s,i,e){var n=1-e;return dot$1(s,i)<0&&(e=-e),t[0]=s[0]*n+i[0]*e,t[1]=s[1]*n+i[1]*e,t[2]=s[2]*n+i[2]*e,t[3]=s[3]*n+i[3]*e,t[4]=s[4]*n+i[4]*e,t[5]=s[5]*n+i[5]*e,t[6]=s[6]*n+i[6]*e,t[7]=s[7]*n+i[7]*e,t},je=function(t,s){var i=squaredLength$1(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Ve=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},He=function(t,s){var i=squaredLength$1(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,n=s[1]/i,r=s[2]/i,h=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+n*a+r*l+h*u;t[0]=e,t[1]=n,t[2]=r,t[3]=h,t[4]=(o-e*c)/i,t[5]=(a-n*c)/i,t[6]=(l-r*c)/i,t[7]=(u-h*c)/i}return t},Ue=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},qe=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},ze=function(t,s){var i=t[0],e=t[1],n=t[2],r=t[3],h=t[4],o=t[5],a=t[6],l=t[7],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7];return Math.abs(i-u)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(n-f)<=EPSILON*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(r-d)<=EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(h-p)<=EPSILON*Math.max(1,Math.abs(h),Math.abs(p))&&Math.abs(o-m)<=EPSILON*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=EPSILON*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=EPSILON*Math.max(1,Math.abs(l),Math.abs(y))},Je=function(){var t=new ARRAY_TYPE(2);return ARRAY_TYPE!=Float32Array&&(t[0]=0,t[1]=0),t},Ye=function(t){var s=new ARRAY_TYPE(2);return s[0]=t[0],s[1]=t[1],s},Xe=function(t,s){var i=new ARRAY_TYPE(2);return i[0]=t,i[1]=s,i},Ke=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ze=function(t,s,i){return t[0]=s,t[1]=i,t},Qe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},tn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},en=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},nn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},rn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},hn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},on=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},an=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},un=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},cn=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},fn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},dn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},pn=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},mn=function(t){var s=t[0],i=t[1];return s*s+i*i},gn=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},yn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},wn=function(t,s){var i=s[0],e=s[1],n=i*i+e*e;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t},Sn=function(t,s){return t[0]*s[0]+t[1]*s[1]},bn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},vn=function(t,s,i,e){var n=s[0],r=s[1];return t[0]=n+e*(i[0]-n),t[1]=r+e*(i[1]-r),t},Mn=function(t,s){s=s||1;var i=2*RANDOM()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},xn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n,t[1]=i[1]*e+i[3]*n,t},Gn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t},Tn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[3]*n+i[6],t[1]=i[1]*e+i[4]*n+i[7],t},Cn=function(t,s,i){var e=s[0],n=s[1];return t[0]=i[0]*e+i[4]*n+i[12],t[1]=i[1]*e+i[5]*n+i[13],t},In=function(t,s,i,e){var n=s[0]-i[0],r=s[1]-i[1],h=Math.sin(e),o=Math.cos(e);return t[0]=n*o-r*h+i[0],t[1]=n*h+r*o+i[1],t},_n=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1],h=Math.sqrt((i*i+e*e)*(n*n+r*r)),o=h&&(i*n+e*r)/h;return Math.acos(Math.min(Math.max(o,-1),1))},En=function(t){return t[0]=0,t[1]=0,t},Rn=function(t){return"vec2("+t[0]+", "+t[1]+")"},Pn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},An=function(t,s){var i=t[0],e=t[1],n=s[0],r=s[1];return Math.abs(i-n)<=EPSILON*Math.max(1,Math.abs(i),Math.abs(n))&&Math.abs(e-r)<=EPSILON*Math.max(1,Math.abs(e),Math.abs(r))};setMatrixArrayType=e,toRadian=n,equals$9=h,create$8=u,clone$8=p,copy$8=m,identity$5=g,fromValues$8=y,set$8=w,transpose$2=S,invert$5=b,adjoint$2=v,determinant$3=M,multiply$8=x,rotate$4=G,scale$8=T,fromRotation$4=C,fromScaling$3=I,str$8=_,frob$3=E,LDU=R,add$8=P,subtract$6=A,exactEquals$8=O,equals$8=D,multiplyScalar$3=F,multiplyScalarAndAdd$3=L,create$7=k,clone$7=N,copy$7=$,identity$4=B,fromValues$7=W,set$7=j,invert$4=V,determinant$2=H,multiply$7=U,rotate$3=q,scale$7=z,translate$3=J,fromRotation$3=Y,fromScaling$2=X,fromTranslation$3=K,str$7=Z,frob$2=Q,add$7=tt,subtract$5=st,multiplyScalar$2=it,multiplyScalarAndAdd$2=et,exactEquals$7=nt,equals$7=rt,create$6=ht,fromMat4$1=ot,clone$6=at,copy$6=lt,fromValues$6=ut,set$6=ct,identity$3=ft,transpose$1=dt,invert$3=pt,adjoint$1=mt,determinant$1=gt,multiply$6=yt,translate$2=wt,rotate$2=St,scale$6=bt,fromTranslation$2=vt,fromRotation$2=Mt,fromScaling$1=xt,fromMat2d=Gt,fromQuat$1=Tt,normalFromMat4=Ct,projection=It,str$6=_t,frob$1=Et,add$6=Rt,subtract$4=Pt,multiplyScalar$1=At,multiplyScalarAndAdd$1=Ot,exactEquals$6=Dt,equals$6=Ft,create$5=Lt,clone$5=kt,copy$5=Nt,fromValues$5=$t,set$5=Bt,identity$2=Wt,transpose=jt,invert$2=Vt,adjoint=Ht,determinant=Ut,multiply$5=qt,translate$1=zt,scale$5=Jt,rotate$1=Yt,rotateX$3=Xt,rotateY$3=Kt,rotateZ$3=Zt,fromTranslation$1=Qt,fromScaling=ts,fromRotation$1=ss,fromXRotation=is,fromYRotation=es,fromZRotation=ns,fromRotationTranslation$1=rs,fromQuat2=hs,getTranslation$1=os,getScaling=as,getRotation=ls,decompose=us,fromRotationTranslationScale=cs,fromRotationTranslationScaleOrigin=fs,fromQuat=ds,frustum=ps,perspectiveNO=ms,perspectiveZO=gs,perspectiveFromFieldOfView=ys,orthoNO=ws,orthoZO=Ss,lookAt=bs,targetTo=vs,str$5=Ms,frob=xs,add$5=Gs,subtract$3=Ts,multiplyScalar=Cs,multiplyScalarAndAdd=Is,exactEquals$5=_s,equals$5=Es,create$4=Rs,clone$4=Ps,length$4=As,fromValues$4=Os,copy$4=Ds,set$4=Fs,add$4=Ls,subtract$2=ks,multiply$4=Ns,divide$2=$s,ceil$2=Bs,floor$2=Ws,min$2=js,max$2=Vs,round$2=Hs,scale$4=Us,scaleAndAdd$2=qs,distance$2=zs,squaredDistance$2=Js,squaredLength$4=Ys,negate$2=Xs,inverse$2=Ks,normalize$4=Zs,dot$4=Qs,cross$2=ti,lerp$4=si,slerp$1=ii,hermite=ei,bezier=ni,random$3=ri,transformMat4$2=hi,transformMat3$1=oi,transformQuat$1=ai,rotateX$2=li,rotateY$2=ui,rotateZ$2=ci,angle$1=fi,zero$2=di,str$4=pi,exactEquals$4=mi,equals$4=gi,create$3=yi,clone$3=wi,fromValues$3=Si,copy$3=bi,set$3=vi,add$3=Mi,subtract$1=xi,multiply$3=Gi,divide$1=Ti,ceil$1=Ci,floor$1=Ii,min$1=_i,max$1=Ei,round$1=Ri,scale$3=Pi,scaleAndAdd$1=Ai,distance$1=Oi,squaredDistance$1=Di,length$3=Fi,squaredLength$3=Li,negate$1=ki,inverse$1=Ni,normalize$3=$i,dot$3=Bi,cross$1=Wi,lerp$3=ji,random$2=Vi,transformMat4$1=Hi,transformQuat=Ui,zero$1=qi,str$3=zi,exactEquals$3=Ji,equals$3=Yi,create$2=Xi,identity$1=Ki,setAxisAngle=Zi,getAxisAngle=Qi,getAngle=te,multiply$2=se,rotateX$1=ie,rotateY$1=ee,rotateZ$1=ne,calculateW=re,exp=he,ln=oe,pow=ae,slerp=le,random$1=ue,invert$1=ce,conjugate$1=fe,fromMat3=de,fromEuler=pe,str$2=me,equals$2=ge,create$1=ye,clone$1=we,fromValues$1=Se,fromRotationTranslationValues=be,fromRotationTranslation=ve,fromTranslation=Me,fromRotation=xe,fromMat4=Ge,copy$1=Te,identity=Ce,set$1=Ie,getDual=_e,setDual=Ee,getTranslation=Re,translate=Pe,rotateX=Ae,rotateY=Oe,rotateZ=De,rotateByQuatAppend=Fe,rotateByQuatPrepend=Le,rotateAroundAxis=ke,add$1=Ne,multiply$1=$e,scale$1=Be,lerp$1=We,invert=je,conjugate=Ve,normalize$1=He,str$1=Ue,exactEquals$1=qe,equals$1=ze,create=Je,clone=Ye,fromValues=Xe,copy=Ke,set=Ze,add=Qe,subtract=tn,multiply=sn,divide=en,ceil=nn,floor=rn,min=hn,max=on,round=an,scale=un,scaleAndAdd=cn,distance=fn,squaredDistance=dn,length=pn,squaredLength=mn,negate=gn,inverse=yn,normalize=wn,dot=Sn,cross=bn,lerp=vn,random=Mn,transformMat2=xn,transformMat2d=Gn,transformMat3=Tn,transformMat4=Cn,rotate=In,angle=_n,zero=En,str=Rn,exactEquals=Pn,equals=An,EPSILON=1e-6,ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,RANDOM=Math.random,ANGLE_ORDER="zyx",degree=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),common={__proto__:null,EPSILON:EPSILON,get h(){return ARRAY_TYPE},o:RANDOM,l:ANGLE_ORDER,u:e,m:n,equals:h},mul$8=x,sub$6=A,mat2=Object.freeze({__proto__:null,create:u,clone:p,S:m,identity:g,v:y,set:w,M:S,G:b,T:v,C:M,multiply:x,rotate:G,scale:T,I:C,_:I,R:_,P:E,A:R,add:P,O:A,D:O,equals:D,F:F,L:L,mul:mul$8,sub:sub$6}),mul$7=U,sub$5=st,mat2d=Object.freeze({__proto__:null,create:k,clone:N,S:$,identity:B,v:W,set:j,G:V,C:H,multiply:U,rotate:q,scale:z,translate:J,I:Y,_:X,N:K,R:Z,P:Q,add:tt,O:st,F:it,L:et,D:nt,equals:rt,mul:mul$7,sub:sub$5}),mul$6=yt,sub$4=Pt,mat3=Object.freeze({__proto__:null,create:ht,$:ot,clone:at,S:lt,v:ut,set:ct,identity:ft,M:dt,G:pt,T:mt,C:gt,multiply:yt,translate:wt,rotate:St,scale:bt,N:vt,I:Mt,_:xt,B:Gt,W:Tt,j:Ct,V:It,R:_t,P:Et,add:Rt,O:Pt,F:At,L:Ot,D:Dt,equals:Ft,mul:mul$6,sub:sub$4}),perspective=ms,ortho=ws,mul$5=qt,sub$3=Ts,mat4=Object.freeze({__proto__:null,create:Lt,clone:kt,S:Nt,v:$t,set:Bt,identity:Wt,M:jt,G:Vt,T:Ht,C:Ut,multiply:qt,translate:zt,scale:Jt,rotate:Yt,H:Xt,U:Kt,J:Zt,N:Qt,_:ts,I:ss,Y:is,X:es,K:ns,Z:rs,tt:hs,st:os,it:as,et:ls,nt:us,rt:cs,ht:fs,W:ds,ot:ps,lt:ms,perspective:perspective,ut:gs,ct:ys,ft:ws,dt:ortho,gt:Ss,yt:bs,wt:vs,R:Ms,P:xs,add:Gs,O:Ts,F:Cs,L:Is,D:_s,equals:Es,mul:mul$5,sub:sub$3}),sub$2=ks,mul$4=Ns,div$2=$s,dist$2=zs,sqrDist$2=Js,len$4=As,sqrLen$4=Ys,t=Rs(),forEach$2=function(s,i,e,n,r,h){var o,a;for(i||(i=3),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},vec3=Object.freeze({__proto__:null,create:Rs,clone:Ps,length:As,v:Os,S:Ds,set:Fs,add:Ls,O:ks,multiply:Ns,St:$s,ceil:Bs,floor:Ws,min:js,max:Vs,round:Hs,scale:Us,bt:qs,vt:zs,Mt:Js,xt:Ys,Gt:Xs,inverse:Ks,normalize:Zs,Tt:Qs,Ct:ti,It:si,_t:ii,Et:ei,Rt:ni,random:ri,Pt:hi,At:oi,Ot:ai,H:li,U:ui,J:ci,angle:fi,Dt:di,R:pi,D:mi,equals:gi,sub:sub$2,mul:mul$4,div:div$2,Ft:dist$2,Lt:sqrDist$2,kt:len$4,Nt:sqrLen$4,forEach:forEach$2}),sub$1=xi,mul$3=Gi,div$1=Ti,dist$1=Oi,sqrDist$1=Di,len$3=Fi,sqrLen$3=Li,forEach$1=function(){var t=yi();return function(s,i,e,n,r,h){var o,a;for(i||(i=4),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],r(t,t,h),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),vec4=Object.freeze({__proto__:null,create:yi,clone:wi,v:Si,S:bi,set:vi,add:Mi,O:xi,multiply:Gi,St:Ti,ceil:Ci,floor:Ii,min:_i,max:Ei,round:Ri,scale:Pi,bt:Ai,vt:Oi,Mt:Di,length:Fi,xt:Li,Gt:ki,inverse:Ni,normalize:$i,Tt:Bi,Ct:Wi,It:ji,random:Vi,Pt:Hi,Ot:Ui,Dt:qi,R:zi,D:Ji,equals:Yi,sub:sub$1,mul:mul$3,div:div$1,Ft:dist$1,Lt:sqrDist$1,kt:len$3,Nt:sqrLen$3,forEach:forEach$1}),clone$2=wi,fromValues$2=Si,copy$2=bi,set$2=vi,add$2=Mi,mul$2=se,scale$2=Pi,dot$2=Bi,lerp$2=ji,length$2=Fi,len$2=length$2,squaredLength$2=Li,sqrLen$2=squaredLength$2,normalize$2=$i,exactEquals$2=Ji,rotationTo=function(){var t=Rs(),s=Os(1,0,0),i=Os(0,1,0);return function(e,n,r){var h=Qs(n,r);return h<-.999999?(ti(t,s,n),len$4(t)<1e-6&&ti(t,i,n),Zs(t,t),Zi(e,t,Math.PI),e):h>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ti(t,n,r),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+h,normalize$2(e,e))}}(),sqlerp=function(){var t=Xi(),s=Xi();return function(i,e,n,r,h,o){return le(t,e,h,o),le(s,n,r,o),le(i,t,s,2*o*(1-o)),i}}(),setAxes=function(){var t=ht();return function(s,i,e,n){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=n[0],t[4]=n[1],t[7]=n[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],normalize$2(s,de(s,t))}}(),quat=Object.freeze({__proto__:null,create:Xi,identity:Ki,$t:Zi,Bt:Qi,Wt:te,multiply:se,H:ie,U:ee,J:ne,jt:re,exp:he,Vt:oe,pow:ae,_t:le,random:ue,G:ce,Ht:fe,Ut:de,qt:pe,R:me,clone:clone$2,v:fromValues$2,S:copy$2,set:set$2,add:add$2,mul:mul$2,scale:scale$2,Tt:dot$2,It:lerp$2,length:length$2,kt:len$2,xt:squaredLength$2,Nt:sqrLen$2,normalize:normalize$2,D:exactEquals$2,equals:ge,zt:rotationTo,Jt:sqlerp,Yt:setAxes}),getReal=copy$2,setReal=copy$2,mul$1=$e,dot$1=dot$2,length$1=length$2,len$1=length$1,squaredLength$1=squaredLength$2,sqrLen$1=squaredLength$1,quat2=Object.freeze({__proto__:null,create:ye,clone:we,v:Se,Xt:be,Z:ve,N:Me,I:xe,$:Ge,S:Te,identity:Ce,set:Ie,Kt:getReal,Zt:_e,Qt:setReal,ts:Ee,st:Re,translate:Pe,H:Ae,U:Oe,J:De,ss:Fe,es:Le,ns:ke,add:Ne,multiply:$e,mul:mul$1,scale:Be,Tt:dot$1,It:We,G:je,Ht:Ve,length:length$1,kt:len$1,xt:squaredLength$1,Nt:sqrLen$1,normalize:He,R:Ue,D:qe,equals:ze}),len=pn,sub=tn,mul=sn,div=en,dist=fn,sqrDist=dn,sqrLen=mn,forEach=function(){var t=Je();return function(s,i,e,n,r,h){var o,a;for(i||(i=2),e||(e=0),a=n?Math.min(n*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],r(t,t,h),s[o]=t[0],s[o+1]=t[1];return s}}(),vec2=Object.freeze({__proto__:null,create:Je,clone:Ye,v:Xe,S:Ke,set:Ze,add:Qe,O:tn,multiply:sn,St:en,ceil:nn,floor:rn,min:hn,max:on,round:an,scale:un,bt:cn,vt:fn,Mt:dn,length:pn,xt:mn,Gt:gn,inverse:yn,normalize:wn,Tt:Sn,Ct:bn,It:vn,random:Mn,rs:xn,hs:Gn,At:Tn,Pt:Cn,rotate:In,angle:_n,Dt:En,R:Rn,D:Pn,equals:An,kt:len,sub:sub,mul:mul,div:div,Ft:dist,Lt:sqrDist,Nt:sqrLen,forEach:forEach}),globalThis.ls=common,globalThis.ls.us=mat2,globalThis.ls.cs=mat2d,globalThis.ls.fs=mat3,globalThis.ls.ds=mat4,globalThis.ls.ps=quat,globalThis.ls.gs=quat2,globalThis.ls.ys=vec2,globalThis.ls.ws=vec3,globalThis.ls.Ss=vec4}var t,EPSILON,ARRAY_TYPE,RANDOM,ANGLE_ORDER,degree,common,mul$8,sub$6,mat2,mul$7,sub$5,mat2d,mul$6,sub$4,mat3,perspective,ortho,mul$5,sub$3,mat4,sub$2,mul$4,div$2,dist$2,sqrDist$2,len$4,sqrLen$4,forEach$2,vec3,sub$1,mul$3,div$1,dist$1,sqrDist$1,len$3,sqrLen$3,forEach$1,vec4,clone$2,fromValues$2,copy$2,set$2,add$2,mul$2,scale$2,dot$2,lerp$2,length$2,len$2,squaredLength$2,sqrLen$2,normalize$2,exactEquals$2,rotationTo,sqlerp,setAxes,quat,getReal,setReal,mul$1,dot$1,length$1,len$1,squaredLength$1,sqrLen$1,quat2,len,sub,mul,div,dist,sqrDist,sqrLen,forEach,vec2,setMatrixArrayType,toRadian,equals$9,create$8,clone$8,copy$8,identity$5,fromValues$8,set$8,transpose$2,invert$5,adjoint$2,determinant$3,multiply$8,rotate$4,scale$8,fromRotation$4,fromScaling$3,str$8,frob$3,LDU,add$8,subtract$6,exactEquals$8,equals$8,multiplyScalar$3,multiplyScalarAndAdd$3,create$7,clone$7,copy$7,identity$4,fromValues$7,set$7,invert$4,determinant$2,multiply$7,rotate$3,scale$7,translate$3,fromRotation$3,fromScaling$2,fromTranslation$3,str$7,frob$2,add$7,subtract$5,multiplyScalar$2,multiplyScalarAndAdd$2,exactEquals$7,equals$7,create$6,fromMat4$1,clone$6,copy$6,fromValues$6,set$6,identity$3,transpose$1,invert$3,adjoint$1,determinant$1,multiply$6,translate$2,rotate$2,scale$6,fromTranslation$2,fromRotation$2,fromScaling$1,fromMat2d,fromQuat$1,normalFromMat4,projection,str$6,frob$1,add$6,subtract$4,multiplyScalar$1,multiplyScalarAndAdd$1,exactEquals$6,equals$6,create$5,clone$5,copy$5,fromValues$5,set$5,identity$2,transpose,invert$2,adjoint,determinant,multiply$5,translate$1,scale$5,rotate$1,rotateX$3,rotateY$3,rotateZ$3,fromTranslation$1,fromScaling,fromRotation$1,fromXRotation,fromYRotation,fromZRotation,fromRotationTranslation$1,fromQuat2,getTranslation$1,getScaling,getRotation,decompose,fromRotationTranslationScale,fromRotationTranslationScaleOrigin,fromQuat,frustum,perspectiveNO,perspectiveZO,perspectiveFromFieldOfView,orthoNO,orthoZO,lookAt,targetTo,str$5,frob,add$5,subtract$3,multiplyScalar,multiplyScalarAndAdd,exactEquals$5,equals$5,create$4,clone$4,length$4,fromValues$4,copy$4,set$4,add$4,subtract$2,multiply$4,divide$2,ceil$2,floor$2,min$2,max$2,round$2,scale$4,scaleAndAdd$2,distance$2,squaredDistance$2,squaredLength$4,negate$2,inverse$2,normalize$4,dot$4,cross$2,lerp$4,slerp$1,hermite,bezier,random$3,transformMat4$2,transformMat3$1,transformQuat$1,rotateX$2,rotateY$2,rotateZ$2,angle$1,zero$2,str$4,exactEquals$4,equals$4,create$3,clone$3,fromValues$3,copy$3,set$3,add$3,subtract$1,multiply$3,divide$1,ceil$1,floor$1,min$1,max$1,round$1,scale$3,scaleAndAdd$1,distance$1,squaredDistance$1,length$3,squaredLength$3,negate$1,inverse$1,normalize$3,dot$3,cross$1,lerp$3,random$2,transformMat4$1,transformQuat,zero$1,str$3,exactEquals$3,equals$3,create$2,identity$1,setAxisAngle,getAxisAngle,getAngle,multiply$2,rotateX$1,rotateY$1,rotateZ$1,calculateW,exp,ln,pow,slerp,random$1,invert$1,conjugate$1,fromMat3,fromEuler,str$2,equals$2,create$1,clone$1,fromValues$1,fromRotationTranslationValues,fromRotationTranslation,fromTranslation,fromRotation,fromMat4,copy$1,identity,set$1,getDual,setDual,getTranslation,translate,rotateX,rotateY,rotateZ,rotateByQuatAppend,rotateByQuatPrepend,rotateAroundAxis,add$1,multiply$1,scale$1,lerp$1,invert,conjugate,normalize$1,str$1,exactEquals$1,equals$1,create,clone,fromValues,copy,set,add,subtract,multiply,divide,ceil,floor,min,max,round,scale,scaleAndAdd,distance,squaredDistance,length,squaredLength,negate,inverse,normalize,dot,cross,lerp,random,transformMat2,transformMat2d,transformMat3,transformMat4,rotate,angle,zero,str,exactEquals,equals,tmpPoint1,tmpPoint2,tmpLine1,tmpLine2,lineInt,lineSegmentsIntersect,triangleArea,isLeft,isLeftOn,isRight,isRightOn,collinear,sqdist,polygonAt,polygonClear,polygonAppend,polygonMakeCCW,polygonReverse,polygonIsReflex,polygonCanSee,polygonCanSee2,polygonCopy,polygonGetCutEdges,polygonDecomp,polygonSlice,polygonIsSimple,getIntersectionPoint,polygonQuickDecomp,polygonRemoveCollinearPoints,polygonRemoveDuplicatePoints,scalar_eq,points_eq,ReadBrandList,RunTest,GetWindowsNTVersionName,s,a,c,i,l,f,d,r,a,o,arrayFlat,assertFail,isValidTypeChange,logDefendedObjectWarning,CheckDefendedObjectsUsedCorrectly,getObjectPropertySet,VerifyObjectPropertiesConsistent,isNegativeZero,padTwoDigits,hueToRGB,RequireStringOrNumber,SetNewCallback,DoAsyncifiedWork,DoNextAsyncifiedJob,ClearTimeCache,CheckActiveIdleTimeouts,lookupHtmlEntity,bbToHtmlReplacerFunc,IsWordBreakWhiteSpace,IsOpeningCJKPunctiationChar,IsContinuingCJKPunctuationChar,WordBreakTrimEnd,IsNewline,PlaneFromPoints,IsInFrontOfPlane,IsPointInFrontOfPlane,interpolateQuad,GetFormatSpecifiers,fillOrStrokeRect,ptToPx,getOffsetParam,CheckPendingPolls,SortZOrderList,GetDispatcher,MakeIWorldInstanceClass,GetDispatcher,GetTimelineState,GetTimelineState,GetTweenState,getActual,GetTypeFromFileExtension,AddScript,SortByInstLastCachedZIndex,SortByInstLastCachedZIndex,SortByInstZElevation,vec3EqualsXYZ,MaybePrepareLayerDraw,SortSolArray,IsSolArrayIdentical,NoActions,WrapIndex,GetExpressionFunc,EvalParams,EvalParams,GetInst,GetWorldInfo,GetInst_SDKv2,GetWorldInfo_SDKv2,GetObjectClass,GetLayer,CollMemory_Add,CollMemory_Remove,CollMemory_RemoveInstance,CollMemory_Get,DoOverlapCondition,FinishCollisionConditionPicking,FinishCollisionCondition,PickByUID_Normal,PickByUID_Inverted,GetNextParamMap,ValidateInternalAPIToken,ForEachOrdered_SortInstances,SortZOrderList,SortInstancesByValue,GetTouchSdkInstance,GetKeyboardSdkInstance,StringFromCharCode,GetMouseSdkInstance,IsExpressionType,unaryminus,bothNumbers,add,subtract,multiply,divide,mod,pow,and,or;{let On=function(t,s,i){i=i||0;var e,n,r,h,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],n=t[0][0]-t[1][0],r=e*t[0][0]+n*t[0][1],h=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=h*s[0][0]+o*s[0][1],rr(l=e*o-h*n,0,i)||(u[0]=(o*r-n*a)/l,u[1]=(e*a-h*r)/l),u},Dn=function(t,s,i,e){var n=s[0]-t[0],r=s[1]-t[1],h=e[0]-i[0],o=e[1]-i[1];if(h*r-o*n==0)return!1;var a=(n*(i[1]-t[1])+r*(t[0]-i[0]))/(h*r-o*n),l=(h*(t[1]-i[1])+o*(i[0]-t[0]))/(o*n-h*r);return a>=0&&a<=1&&l>=0&&l<=1},Fn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Ln=function(t,s,i){return Fn(t,s,i)>0},kn=function(t,s,i){return Fn(t,s,i)>=0},Nn=function(t,s,i){return Fn(t,s,i)<0},$n=function(t,s,i){return Fn(t,s,i)<=0},Bn=function(t,s,i,e){if(e){var n=tmpPoint1,r=tmpPoint2;n[0]=s[0]-t[0],n[1]=s[1]-t[1],r[0]=i[0]-s[0],r[1]=i[1]-s[1];var h=n[0]*r[0]+n[1]*r[1],o=Math.sqrt(n[0]*n[0]+n[1]*n[1]),a=Math.sqrt(r[0]*r[0]+r[1]*r[1]);return Math.acos(h/(o*a))<e}return 0===Fn(t,s,i)},Wn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},jn=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},Vn=function(t){t.length=0},Hn=function(t,s,i,e){for(var n=i;n<e;n++)t.push(s[n])},Un=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Ln(jn(t,s-1),jn(t,s),jn(t,s+1))&&(qn(t),!0)},qn=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},zn=function(t,s){return Nn(jn(t,s-1),jn(t,s),jn(t,s+1))},Jn=function(t,s,i){var e,n,r=tmpLine1,h=tmpLine2;if(kn(jn(t,s+1),jn(t,s),jn(t,i))&&$n(jn(t,s-1),jn(t,s),jn(t,i)))return!1;n=Wn(jn(t,s),jn(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&kn(jn(t,s),jn(t,i),jn(t,o+1))&&$n(jn(t,s),jn(t,i),jn(t,o))&&(r[0]=jn(t,s),r[1]=jn(t,i),h[0]=jn(t,o),h[1]=jn(t,o+1),e=On(r,h),Wn(jn(t,s),e)<n))return!1;return!0},Yn=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&Dn(jn(t,s),jn(t,i),jn(t,e),jn(t,e+1)))return!1;return!0},Xn=function(t,s,i,e){var n=e||[];if(Vn(n),s<i)for(var r=s;r<=i;r++)n.push(t[r]);else{for(r=0;r<=i;r++)n.push(t[r]);for(r=s;r<t.length;r++)n.push(t[r])}return n},Kn=function(t){for(var s=[],i=[],e=[],n=[],r=Number.MAX_VALUE,h=0;h<t.length;++h)if(zn(t,h))for(var o=0;o<t.length;++o)if(Jn(t,h,o)){i=Kn(Xn(t,h,o,n)),e=Kn(Xn(t,o,h,n));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<r&&(s=i,r=i.length,s.push([jn(t,h),jn(t,o)]))}return s},Zn=function(t){var s=Kn(t);return s.length>0?Qn(t,s):[t]},Qn=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var n=s[e],r=0;r<i.length;r++){var h=Qn(i[r],n);if(h){i.splice(r,1),i.push(h[0],h[1]);break}}return i}return n=s,e=t.indexOf(n[0]),r=t.indexOf(n[1]),-1!==e&&-1!==r&&[Xn(t,e,r),Xn(t,r,e)]},tr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if(Dn(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if(Dn(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},sr=function(t,s,i,e,n){n=n||0;var r=s[1]-t[1],h=t[0]-s[0],o=r*t[0]+h*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=r*l-a*h;return rr(c,0,n)?[0,0]:[(l*o-h*u)/c,(r*u-a*o)/c]},ir=function(t,s,i,e,n,r,h){r=r||100,h=h||0,n=n||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(b.length<3)return s;if(++h>r)return console.warn("quickDecomp: max level ("+r+") reached."),s;for(var v=0;v<t.length;++v)if(zn(S,v)){i.push(S[v]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Ln(jn(S,v-1),jn(S,v),jn(S,M))&&$n(jn(S,v-1),jn(S,v),jn(S,M-1))&&(l=sr(jn(S,v-1),jn(S,v),jn(S,M),jn(S,M-1)),Nn(jn(S,v+1),jn(S,v),l)&&(f=Wn(S[v],l))<c&&(c=f,a=l,m=M)),Ln(jn(S,v+1),jn(S,v),jn(S,M+1))&&$n(jn(S,v+1),jn(S,v),jn(S,M))&&(l=sr(jn(S,v+1),jn(S,v),jn(S,M),jn(S,M+1)),Ln(jn(S,v-1),jn(S,v),l)&&(f=Wn(S[v],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(Hn(y,S,v,p+1),y.push(l),w.push(l),0!==m&&Hn(w,S,m,S.length),Hn(w,S,0,v+1)):(0!==v&&Hn(y,S,v,S.length),Hn(y,S,0,p+1),y.push(l),w.push(l),Hn(w,S,m,v+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)kn(jn(S,v-1),jn(S,v),jn(S,M))&&$n(jn(S,v+1),jn(S,v),jn(S,M))&&(f=Wn(jn(S,v),jn(S,M)))<d&&Yn(S,v,M)&&(d=f,g=M%t.length);v<g?(Hn(y,S,v,g+1),0!==g&&Hn(w,S,g,b.length),Hn(w,S,0,v+1)):(0!==v&&Hn(y,S,v,b.length),Hn(y,S,0,g+1),Hn(w,S,g,v+1))}return y.length<w.length?(ir(y,s,i,e,n,r,h),ir(w,s,i,e,n,r,h)):(ir(w,s,i,e,n,r,h),ir(y,s,i,e,n,r,h)),s}return s.push(t),s},er=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)Bn(jn(t,e-1),jn(t,e),jn(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},nr=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],n=i-1;n>=0;--n)hr(e,t[n],s)&&t.splice(i,1)},rr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},hr=function(t,s,i){return rr(t[0],s[0],i)&&rr(t[1],s[1],i)};lineInt=On,lineSegmentsIntersect=Dn,triangleArea=Fn,isLeft=Ln,isLeftOn=kn,isRight=Nn,isRightOn=$n,collinear=Bn,sqdist=Wn,polygonAt=jn,polygonClear=Vn,polygonAppend=Hn,polygonMakeCCW=Un,polygonReverse=qn,polygonIsReflex=zn,polygonCanSee=Jn,polygonCanSee2=Yn,polygonCopy=Xn,polygonGetCutEdges=Kn,polygonDecomp=Zn,polygonSlice=Qn,polygonIsSimple=tr,getIntersectionPoint=sr,polygonQuickDecomp=ir,polygonRemoveCollinearPoints=er,polygonRemoveDuplicatePoints=nr,scalar_eq=rr,points_eq=hr,tmpPoint1=[],tmpPoint2=[],tmpLine1=[],tmpLine2=[],self.bs={vs:Zn,Ms:ir,xs:tr,Gs:er,Ts:nr,Cs:Un}}{let ar=!1,lr=!1,ur="dev";const cr=Symbol("Construct internal API token");let fr=14;const dr=self.Is=class{constructor(){throw TypeError("static class can't be instantiated")}static _s(){if(fr<=0)throw new Error("cannot obtain internal API token");return--fr,cr}static Es(){ar=!0}static Rs(){return ar}static Ps(){lr=!0}static As(){return lr}static Os(t){ur=t}static Ds(){return ur}static Fs(){return"final"===ur}};dr.Ls=!1,dr.ks=!1,dr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ns={}}{const pr=self.Is;pr.$s=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Hs(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Us(t){return this.Ws.has(t)}qs(t){const s=this.Ws.get(t);return void 0===s?null:s}zs(){history.replaceState("",document.title,location.pathname+location.search)}Js(t){this.Bs=t,this.Ws.clear(),this.js()}},pr.Ys=new pr.$s(location.search),pr.Xs=new pr.$s(location.hash),pr.Ys.Us("perf")&&(pr.Ks=!0),"dev"!==pr.Ys.qs("mode")&&pr.Os("final")}{let mr=function(t){const s=parseFloat(t);return wr.get(s)||(s>=13?"11":"NT "+t)};GetWindowsNTVersionName=mr;const gr=self.Is,yr="(unknown)";gr.Zs={Qs:yr,ti:yr,si:yr,ii:yr,ei:NaN,ni:yr,ri:"browser",hi:!0,oi:!1,ai:!1,li:!1,ci:async()=>{}};const wr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Sr=navigator.userAgent,br=navigator.userAgentData;if(br&&br.brands.length>0){let Mr=function(t){let s="",i="",e="",n="";for(const r of t){const t=xr.get(r.brand);!s&&t&&(s=t,i=r.version);const h=Gr.get(r.brand);!e&&h&&(e=h,n=r.version)}s||"Chromium"!==e||(gr.Zs.si="Chromium",gr.Zs.ii=n),gr.Zs.si=s||yr,gr.Zs.ii=i||yr,gr.Zs.ni=e||yr};ReadBrandList=Mr,gr.Zs.Qs=br.platform,gr.Zs.oi=br.mobile,gr.Zs.hi=!gr.Zs.oi;const xr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Gr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);Mr(br.brands);let Tr=!1;gr.Zs.ci=async()=>{if(!Tr)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);Mr(t.fullVersionList),"Windows"===gr.Zs.Qs?gr.Zs.ti=mr(t.platformVersion):gr.Zs.ti=t.platformVersion,Tr=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Cr=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Sr);if(i){s(i);break}}};RunTest=Cr,Cr(/windows\s+nt\s+([\d\.]+)/i,(t=>{gr.Zs.Qs="Windows";const s=t[1];gr.Zs.ti=mr(s)})),Cr(/mac\s+os\s+x\s+([\d\._]+)/i,(t=>{gr.Zs.Qs="macOS",gr.Zs.ti=t[1].replace(/_/g,".")})),Cr(/CrOS/,(()=>{gr.Zs.Qs="Chrome OS"})),Cr(/linux|openbsd|freebsd|netbsd/i,(()=>{gr.Zs.Qs="Linux"})),Cr(/android/i,(()=>{gr.Zs.Qs="Android"})),Cr(/android\s+([\d\.]+)/i,(t=>{gr.Zs.Qs="Android",gr.Zs.ti=t[1]})),gr.Zs.Qs===yr&&(Cr(/(iphone|ipod|ipad)/i,(t=>{gr.Zs.Qs="iOS"})),Cr([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],(t=>{gr.Zs.Qs="iOS",gr.Zs.ti=t[1].replace(/_/g,".")})));const Ir=/chrome\//i.test(Sr),_r=/chromium\//i.test(Sr),Er=/edg\//i.test(Sr),Rr=/OPR\//.test(Sr),Pr=/nwjs/i.test(Sr),Ar=/safari\//i.test(Sr),Or=/webkit/i.test(Sr);Er||Rr||Cr(/chrome\/([\d\.]+)/i,(t=>{gr.Zs.si="Chrome",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"})),Cr(/edg\/([\d\.]+)/i,(t=>{gr.Zs.si="Edge",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"})),Cr(/OPR\/([\d\.]+)/,(t=>{gr.Zs.si="Opera",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"})),Cr(/chromium\/([\d\.]+)/i,(t=>{gr.Zs.si="Chromium",gr.Zs.ii=t[1],gr.Zs.ni="Chromium"})),Cr(/nwjs\/[0-9.]+/i,(t=>{gr.Zs.si="NW.js",gr.Zs.ii=t[1],gr.Zs.ni="Chromium",gr.Zs.ri="nwjs"})),Cr(/firefox\/([\d\.]+)/i,(t=>{gr.Zs.si="Firefox",gr.Zs.ii=t[1],gr.Zs.ni="Gecko"})),!Ar||Ir||_r||Er||Rr||Pr||(gr.Zs.si="Safari",gr.Zs.ni="WebKit",Cr(/version\/([\d\.]+)/i,(t=>{gr.Zs.ii=t[1]})),Cr(/crios\/([\d\.]+)/i,(t=>{gr.Zs.si="Chrome for iOS",gr.Zs.ii=t[1]})),Cr(/fxios\/([\d\.]+)/i,(t=>{gr.Zs.si="Firefox for iOS",gr.Zs.ii=t[1]})),Cr(/edgios\/([\d\.]+)/i,(t=>{gr.Zs.si="Edge for iOS",gr.Zs.ii=t[1]}))),gr.Zs.ni===yr&&Or&&(gr.Zs.ni="WebKit"),"Android"===gr.Zs.Qs&&"Safari"===gr.Zs.si&&(gr.Zs.si="Stock");const Dr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(gr.Zs.Qs)||"nwjs"===gr.Zs.ri;gr.Zs.hi=Dr,gr.Zs.oi=!Dr}"Chrome"===gr.Zs.si&&"browser"===gr.Zs.ri&&/wv\)/.test(Sr)&&(gr.Zs.ri="webview"),"nwjs"!==gr.Zs.ri&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(gr.Zs.ri="webapp"),gr.Zs.ei=parseFloat(gr.Zs.ii);const vr="macOS"===gr.Zs.Qs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2;vr&&(gr.Zs.Qs="iOS",gr.Zs.ti=gr.Zs.ii,gr.Zs.hi=!1,gr.Zs.oi=!0,gr.Zs.li=!0),gr.Zs.ai="macOS"===gr.Zs.Qs||"iOS"===gr.Zs.Qs}{let Fr=function(t){return new Promise(((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)}))},Lr=function(t){return new Promise(((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)}))},kr=function(t,s){return zr(t,s)},Nr=function(t,s){return zr(t,s,!0)},$r=function(t){Br(t);let s=Hr.get(t);return s instanceof Promise||(s=Jr(t),Hr.set(t,s),s.catch((s=>Hr.delete(t)))),s},Br=function(t){if("string"!=typeof t)throw new TypeError("expected string")},Wr=function(t,s){const i=t.objectStore(Vr).openCursor();return new Promise((t=>{const e=[];i.onsuccess=i=>{const n=i.target.result;if(n){switch(s){case"entries":e.push([n.key,n.value]);break;case"keys":e.push(n.key);break;case"values":e.push(n.value)}n.continue()}else t(e)}}))};s=Fr,a=Lr,c=kr,i=Nr,l=$r,f=Br,d=Wr;const jr=2,Vr="keyvaluepairs",Hr=new Map,Ur="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,qr="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function zr(t,s,i=!1,e=!0){const n=await $r(t);try{return s(n.transaction([Vr],i?"readwrite":"readonly"))}catch(n){if(e&&"InvalidStateError"===n.name)return Hr.delete(t),zr(t,s,i,!1);throw n}}async function Jr(t){Br(t);const s=indexedDB.open(t,jr);return s.addEventListener("upgradeneeded",(s=>{try{s.target.result.createObjectStore(Vr)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}})),Fr(s)}class Yr{constructor(t){Br(t),this.name=t}async ready(){await $r(this.name)}set(t,s){return Br(t),Nr(this.name,(async i=>{const e=Fr(i.objectStore(Vr).put(s,t)),n=Lr(i);await Promise.all([n,e])}))}get(t){return Br(t),kr(this.name,(async s=>{const i=Fr(s.objectStore(Vr).get(t)),e=Lr(s),[n,r]=await Promise.all([e,i]);return r}))}delete(t){return Br(t),Nr(this.name,(async s=>{const i=Fr(s.objectStore(Vr).delete(t)),e=Lr(s);await Promise.all([e,i])}))}clear(){return Nr(this.name,(async t=>{const s=Fr(t.objectStore(Vr).clear()),i=Lr(t);await Promise.all([i,s])}))}keys(){return kr(this.name,(async t=>{let s;s=qr?Fr(t.objectStore(Vr).getAllKeys()):Wr(t,"keys");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}values(){return kr(this.name,(async t=>{let s;s=Ur?Fr(t.objectStore(Vr).getAll()):Wr(t,"values");const i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}entries(){return kr(this.name,(async t=>{const s=Wr(t,"entries"),i=Lr(t),[e,n]=await Promise.all([i,s]);return n}))}}self.fi=Yr}{let Xr=function(t){throw new Error(`"${t}" is not implemented`)},Kr=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},Zr=function(t){return"object"==typeof t?new Promise((s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)})):Promise.resolve(t)};r=Xr,a=Kr,o=Zr;const Qr=self.fi,th=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class sh{constructor(t){this.di=t,this.pi=!this.di,this.pi||"undefined"!=typeof indexedDB||(this.pi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.mi=new Map}gi(t){if(!this.pi)for(const s of th)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.pi=!0;break}}async yi(t){const s=this.mi.get(t),i=await Zr(s);return void 0===i?null:i}async wi(t,s){s=await Zr(s),this.mi.set(t,s)}Si(t){this.mi.delete(t)}bi(){this.mi.clear()}Mi(){return Array.from(this.mi.keys())}xi(){return this.pi}Gi(){return this.mi}Ti(t){this.mi=t}async getItem(t,s){if(Kr(s),this.pi)return await this.yi(t);let i;try{i=await this.di.get(t)}catch(s){return this.gi(s),this.pi?await this.yi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(Kr(i),void 0===s&&(s=null),this.pi)await this.wi(t,s);else try{await this.di.set(t,s)}catch(i){if(this.gi(i),!this.pi)throw i;await this.wi(t,s)}}async removeItem(t,s){if(Kr(s),this.pi)this.Si(t);else try{await this.di.delete(t)}catch(s){this.gi(s),this.pi?this.Si(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(Kr(t),this.pi)this.bi();else try{await this.di.clear()}catch(t){this.gi(t),this.pi?this.bi():console.error("Error clearing storage: ",t)}}async keys(t){if(Kr(t),this.pi)return this.Mi();let s=[];try{s=await this.di.keys()}catch(t){if(this.gi(t),this.pi)return this.Mi();console.error("Error getting storage keys: ",t)}return s}ready(t){return Kr(t),this.pi?Promise.resolve(!0):this.di.ready()}Ci(t){if(t.Ii)return new sh(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new Qr(s);return new sh(i)}}length(t){Xr("localforage.length()")}key(t,s){Xr("localforage.key()")}iterate(t,s){Xr("localforage.iterate()")}_i(t){Xr("localforage.setDriver()")}config(t){Xr("localforage.config()")}Ei(t){Xr("localforage.defineDriver()")}Ri(){Xr("localforage.driver()")}supports(t){Xr("localforage.supports()")}dropInstance(){Xr("localforage.dropInstance()")}}self.localforage=new sh(new Qr("localforage"))}{const ih=self.Is;if(ih.Pi={},ih.Pi.Ai=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),ih.Pi.Oi="undefined"!=typeof HTMLDialogElement,ih.Pi.Di=!!self.requestIdleCallback,ih.Pi.ImageBitmap=!!self.createImageBitmap,ih.Pi.ImageBitmapOptions=!1,ih.Pi.Fi=!1,ih.Pi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then((()=>{ih.Pi.ImageBitmapOptions=!0})).catch((()=>{ih.Pi.ImageBitmapOptions=!1}))}catch(eh){ih.Pi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then((t=>{ih.Pi.Fi=10===t.width&&10===t.height})).catch((()=>{ih.Pi.Fi=!1}))}catch(nh){ih.Pi.Fi=!1}}if(ih.Pi.Li=!(!navigator.clipboard||!navigator.clipboard.readText),ih.Pi.ki=!(!navigator.permissions||!navigator.permissions.query),ih.Pi.Ni=!1,ih.Pi.ki){const rh={name:"clipboard-read"};navigator.permissions.query(rh).then((()=>{ih.Pi.Ni=!0})).catch((()=>{ih.Pi.Ni=!1}))}ih.Pi.$i=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),ih.Pi.Bi="undefined"!=typeof Proxy,ih.Pi.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,ih.Pi.ji="function"==typeof fetch,ih.Pi.Vi=!!(self.isSecureContext&&"Opera"!==ih.Zs.si&&navigator.storage&&navigator.storage.persist),ih.Pi.Hi=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),ih.Pi.Ui=(()=>{if("undefined"==typeof document)return!1;if("iOS"===ih.Zs.Qs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),ih.Pi.ImageDecoder=void 0!==self.ImageDecoder,ih.Pi.zi=!!self.VideoEncoder,ih.Pi.Ji=!!self.showOpenFilePicker,ih.Pi.Yi=!!self.queryLocalFonts,ih.Pi.UserActivation=!!navigator.userActivation,ih.Pi.Xi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise((s=>t.toBlob(s,"image/webp",1)))),ih.Pi.Xi=i&&"image/webp"===i.type}catch(t){ih.Pi.Xi=!1}})()}{const hh=self.Is;if(!String.prototype.trimStart){const oh=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(oh,"")}}if(!String.prototype.trimEnd){const ah=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(ah,"")}}if(String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(hh.Ki(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),!Array.prototype.flat){let lh=function(t,s){return t.reduce(((t,i)=>s>0&&Array.isArray(i)?(Array.prototype.push.apply(t,lh(i,s-1)),t):(t.push(i),t)),[])};arrayFlat=lh,Array.prototype.flat=function(t=1){return lh(this,t)}}Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise(((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota(((s,i)=>t({usage:s,quota:i})),s)))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let uh=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+ch.Zi();console.error(s)};assertFail=uh;const ch=self.Is;self.assert=function(t,s){t||uh(s)}}{const fh=self.Is,dh=self.Ns;fh.Qi=function(t){return"number"==typeof t},fh.te=function(t){return fh.Qi(t)&&isFinite(t)},fh.se=function(t){if(!fh.Qi(t))throw new TypeError("expected number")},fh.ie=function(t){fh.ee(t)},fh.ne=function(t,s,i){if(!fh.Qi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},fh.re=function(...t){for(let s of t);},fh.he=function(t){if(!fh.te(t))throw new TypeError("expected finite number")},fh.oe=function(t){fh.ee(t)},fh.ae=function(...t){for(let s of t);},fh.le=function(t){return"string"==typeof t},fh.ue=function(t){if(!fh.le(t))throw new TypeError("expected string")},fh.ce=function(t){fh.ee(t)},fh.fe=function(...t){for(let s of t);},fh.de=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},fh.pe=function(t){if(!fh.de(t))throw new TypeError("expected simple object")},fh.me=function(t){if(!fh.ee(t)&&!fh.de(t))throw new TypeError("expected simple object")},fh.ge=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},fh.ye=function(t){if(!fh.ge(t))throw new TypeError("expected object")},fh.we=function(t){fh.ee(t)},fh.Se=function(...t){for(let s of t);},fh.be=function(t){return fh.ve(t,Blob)&&"string"==typeof t.name},fh.Me=function(t){if(!fh.be(t))throw new TypeError("expected file")},fh.xe=function(t){fh.ee(t)},fh.Ge=function(t){return Array.isArray(t)},fh.Te=function(t){if(!fh.Ge(t))throw new TypeError("expected array")},fh.Ce=function(t){fh.ee(t)},fh.Ie=function(...t){for(let s of t);},fh._e=function(t){return!(!fh.Ge(t)||t.length&&!fh.Ge(t[0]))},fh.Ee=function(t){if(!fh._e(t))throw new TypeError("expected 2d array");for(let s of t)if(!fh.Ge(s))throw new TypeError("expected 2d array")},fh.Re=function(t){fh.ee(t)},fh.Pe=function(t){return"function"==typeof t},fh.Ae=function(t,s){if(!fh.Pe(t))throw new TypeError("expected function");if(!fh.ee(s)&&t!==s)throw new TypeError("expected same function reference")},fh.Oe=function(t){fh.ee(t)},fh.De=function(...t){for(let s of t);},fh.Fe=function(t,...s){if(!fh.Pe(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!fh.ee(i)&&t===i)return;throw new TypeError("expected same function reference")},fh.Le=function(...t){if(!fh.ee(t))for(let s of t);},fh.ke=function(t,s){return t instanceof s},fh.Ne=function(t,...s){for(let i of s)if(fh.ke(t,i))return!0;return!1},fh.$e=function(t,s){if(!fh.ke(t,s))throw new TypeError("unexpected type")},fh.Be=function(t,s){fh.ee(t)},fh.We=function(t,...s){for(let t of s);},fh.je=function(t,...s){if(!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.Ve=function(t,...s){if(!fh.ee(t)&&!fh.Ne(t,...s))throw new TypeError("unexpected type")},fh.He=function(t,s){for(let i of t)if(!fh.ke(i,s))return!1;return!0},fh.Ue=function(t){for(let s of t)if(!fh.te(s))return!1;return!0},fh.qe=function(t,s){for(let s of t);},fh.ze=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Je=function(t,s){if(!fh.ee(t))for(let s of t);},fh.Ye=function(t,...s){for(let s of t);},fh.Xe=function(t,...s){if(!fh.ee(t))for(let s of t);},fh.Ke=function(t,s){return!(fh.ee(t)||!fh.le(t.nodeName))&&(!s||fh.Ze(t.nodeName,s))},fh.Qe=function(t,s){if(fh.ee(t)||!fh.le(t.nodeName))throw new TypeError("expected DOM node");if(s&&!fh.Ze(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},fh.tn=function(t,s){fh.ee(t)},fh.sn=function(t,s){return!(fh.ee(t)||!fh.le(t.tagName))&&(!s||fh.Ze(t.tagName,s))},fh.en=function(t,s){if(fh.ee(t)||!fh.le(t.tagName))throw new TypeError("expected HTML element");if(s&&!fh.Ze(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},fh.nn=function(t,s){fh.ee(t)},fh.rn=function(t){return fh.sn(t,"img")||fh.sn(t,"canvas")||fh.sn(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},fh.hn=function(t){if(!fh.rn(t))throw new TypeError("expected drawable")},fh.an=function(t){fh.ee(t)},fh.ln=function(t){return t instanceof ImageData||fh.rn(t)},fh.un=function(t){if(!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.cn=function(t){if(!fh.ee(t)&&!fh.ln(t))throw new TypeError("expected drawable or image data")},fh.fn=function(t){return"string"==typeof t||fh.dn&&t instanceof fh.dn||t instanceof fh.pn},fh.mn=function(t){if(!fh.fn(t))throw new TypeError("expected string-like")},fh.gn=function(t){fh.ee(t)},fh.yn=function(...t){for(let s of t);},fh.wn=function(){throw new Error("must be overridden")},fh.Sn=function(){throw new Error("not yet implemented")},fh.bn=function(t){return t.constructor===function*(){}.constructor},fh.vn=function(t){if(!fh.bn(t))throw new Error("expected generator function")},fh.Mn=function(t){return"function"===t[Symbol.iterator]},fh.xn=function(t){if(!fh.Mn(t))throw new Error("expected iterable")},fh.Gn=function(t){return!fh.ee(t)},fh.ee=function(t){return null==t},fh.Tn=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},fh.Cn=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const ph=Object.getPrototypeOf(Uint8Array);fh.In=function(t){return fh.ke(t,ph)},fh._n=function(t){},fh.En=function(t){fh.Rn(t,ph)},fh.Pn=function(t,...s){if(!fh.An(t,...s))throw new TypeError("unexpected type")},fh.An=function(t,...s){for(const i of s)if(fh.ve(t,i))return!0;return!1},fh.Rn=function(t,s){if(!fh.ve(t,s))throw new TypeError("unexpected type")},fh.ve=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},dh.se=fh.se,dh.ie=fh.ie,dh.he=fh.he,dh.oe=fh.oe,dh.ue=fh.ue,dh.ce=fh.ce,dh.ye=fh.ye,dh.we=fh.we,dh.Te=fh.Te,dh.Ce=fh.Ce,dh.Ae=fh.Ae,dh.Oe=fh.Oe,dh.$e=fh.$e,dh.Be=fh.Be,dh.ee=fh.ee}{let mh=function(t,s){let i=bh.getType(t),e=bh.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},gh=function(t){console.warn("[Defence] "+t+" @",bh.Zi())},yh=function(){if(_h=-1,xh.size>0||Gh.size>0){let t=[...new Set([...xh.keys()].map((t=>bh.getName(t))))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),xh.clear(),Gh.clear()}},wh=function(t){let s=new Set;for(let i in t)s.add(i);return s},Sh=function(t,s){let i=wh(s),e=Eh.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);bh.On(s,[...i]),s.length&&console.warn(`[Defence] '${bh.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else Eh.set(t,i)};isValidTypeChange=mh,logDefendedObjectWarning=gh,CheckDefendedObjectsUsedCorrectly=yh,getObjectPropertySet=wh,VerifyObjectPropertiesConsistent=Sh;const bh=self.Is,vh=new Map;let Mh;bh.Dn=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},bh.Fn=function(t,...s){vh.has(t)||vh.set(t,-1),-1===vh.get(t)&&vh.set(t,requestAnimationFrame((()=>{console.log(`%c${t}`,"font-weight: bold",...s),vh.set(t,-1)})))},bh.Ln=function(t){performance.mark(t),Mh||(Mh=new Map),Mh.has(t)||Mh.set(t,{kn:0,total:0,Nn:0,$n:1,toString:function(){return`${t} :: current => ${this.kn.toPrecision(3)} :: average => ${this.Nn.toPrecision(3)} :: calls => ${this.$n}`}})},bh.Bn=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Mh.get(t);i.kn=s.duration,i.total+=i.kn,i.Nn=i.total/i.$n,console.log(i.toString()),i.$n++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},bh.Zi=function(){return(new Error).stack},bh.Wn=function(){},bh.cast=function(t,s){return t&&t instanceof s?t:null},bh.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":bh.Qi(t)?"<number>":bh.le(t)?"<string>":bh.Ge(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":bh.Pe(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},bh.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},bh.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let xh=new Map,Gh=new Map,Th=new WeakMap,Ch=new WeakMap;bh.jn={};const Ih=new Set(["then","splice"]);bh.jn.get=function(t,s){return s in t||"symbol"==typeof s||Ih.has(s)||gh(`Accessed missing property '${s}' from defended object '${bh.getName(t)}', returning undefined`),Ch.has(t)&&"symbol"!=typeof s&&!Ih.has(s)&&gh(`Accessed property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Ch.get(t)})\nCall stack at access: `),t[s]},bh.jn.set=function(t,s,i){return s in t||xh.has(t)||gh(`Set non-existent property '${s}' to '${i}' on defended object '${bh.getName(t)}'`),mh(t[s],i)||xh.has(t)||gh(`Set '${bh.getType(t[s])}' property '${s}' to type '${bh.getType(i)}' on defended object '${bh.getName(t)}'`),Ch.has(t)&&gh(`Set property '${s}' on a released object '${bh.getName(t)}'\nObject was originally released at: ${Ch.get(t)})\nCall stack at access: `),t[s]=i,!0},bh.jn.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${bh.getName(t)}'`)},bh.jn.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${bh.getName(t)}'`)},bh.jn.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${bh.getName(t)}'`)};let _h=-1;bh.Vn=class{constructor(){if(!bh.ks||!bh.Pi.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,bh.jn);return xh.set(s,i),Gh.set(i,s),Th.set(i,s),-1===_h&&(_h=requestAnimationFrame(yh)),i}},bh.Hn=function(t){if(bh.ks&&bh.Pi.Bi&&t instanceof bh.Vn){if(!Gh.has(t))return t;let s=Gh.get(t);return Gh.delete(t),xh.delete(s),t}return bh.Ls?Object.seal(t):t},bh.Un=function(t,...s){let i;try{i=new t(...s)}catch(t){throw Gh.clear(),xh.clear(),t}return bh.ks&&Sh(t,i),bh.Hn(i)},bh.qn=function(t){let s=Th.get(t);s&&Ch.set(s,bh.Zi())},bh.zn=function(t){let s=Th.get(t);return!!s&&!!Ch.get(s)};let Eh=new Map;bh.Jn=class{constructor(t){this.Yn="",t&&this.start(t)}start(t){bh.Ks&&(this.Yn=t,performance.mark(this.Yn+"-Start"))}end(){bh.Ks&&(performance.mark(this.Yn+"-End"),performance.measure(this.Yn,this.Yn+"-Start",this.Yn+"-End"))}next(t){bh.Ks&&(this.end(),this.Yn=t,performance.mark(this.Yn+"-Start"))}}}{let Rh=function(t){return 0===t&&1/t<0};isNegativeZero=Rh;const Ph=self.Is,Ah=2*Math.PI,Oh=Math.PI/180,Dh=180/Math.PI;Ph.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const n=i-(s-t)%e;return n===i?0:n}return s+(t-s)%e},Ph.Xn=function(t,s,i,e,n){const r=i-s;return 0===r&&0===e?t:(t-s)*(n-e)/r+e},Ph.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},Ph.Kn=function(t,s,i){return t<s?s:t>i?i:t},Ph.Zn=function(t){return(t%=Ah)<0&&(t+=Ah),t},Ph.Qn=function(t){return t*Oh},Ph.tr=function(t){return t*Dh},Ph.sr=function(t,s){return Math.sqrt(t*t+s*s)},Ph.ir=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Ph.er=function(t,s,i,e){return Ph.sr(i-t,e-s)},Ph.nr=function(t,s,i,e){const n=i-t,r=e-s;return n*n+r*r},Ph.rr=function(t,s,i,e){return Math.atan2(e-s,i-t)},Ph.hr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),n=i*Math.sin(s)+e*Math.cos(s);return n>=1?0:n<=-1?Math.PI:Math.acos(n)},Ph.ar=function(t,s,i){let e=Math.sin(t),n=Math.cos(t),r=Math.sin(s),h=Math.cos(s);return Math.acos(e*r+n*h)>i?n*r-e*h>0?Ph.Zn(t+i):Ph.Zn(t-i):Ph.Zn(s)},Ph.lr=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Ph.ur=function(t,s,i,e=0){let n=Ph.hr(t,s);const r=Ah*e;return Ph.lr(s,t)?Ph.Zn(t+(n+r)*i):Ph.Zn(t-(n+r)*i)},Ph.cr=function(t,s,i,e=0){const n=Ph.hr(t,s),r=Ah*e;return Ph.lr(s,t)?Ph.Zn(t+(n+r)*i):Ph.Zn(t+(Ah-n+r)*i)},Ph.dr=function(t,s,i,e=0){const n=Ph.hr(t,s),r=Ah*e;return Ph.lr(s,t)?Ph.Zn(t-(-Ah+n-r)*i):Ph.Zn(t-(n+r)*i)},Ph.pr=function(t,s){const i=Ph.hr(t,s);return Ph.lr(t,s)?Ph.Zn(s-i):Ph.Zn(s+i)},Ph.It=function(t,s,i){return t+i*(s-t)},Ph.mr=function(t,s,i){return t===s?0:(i-t)/(s-t)},Ph.gr=function(t,s,i,e,n){return Ph.It(e,n,Ph.mr(t,s,i))},Ph.yr=function(t,s,i,e){return Ph.It(Ph.It(t,s,e),Ph.It(s,i,e),e)},Ph.wr=function(t,s,i,e,n){return Ph.It(Ph.yr(t,s,i,n),Ph.yr(s,i,e,n),n)},Ph.Sr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Ph.br=function(t){return t>0&&!(t-1&t)},Ph.vr=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Ph.Mr=function(t,s){return Math.round(t*s)/s},Ph.Gr=function(t,s){return Math.floor(t*s)/s},Ph.Tr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Ph.Cr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Ph.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Ph.Ir=function(t,s,i){return Ph.Kn(t,0,255)|Ph.Kn(s,0,255)<<8|Ph.Kn(i,0,255)<<16};const Fh=1024,Lh=1023,kh=16384,Nh=8191,$h=-8192;Ph._r=function(t,s,i,e){return(t=Ph.Kn(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Ph.Kn(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Ph.Kn(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Ph.Kn(Math.floor(1023*e),0,1023)))},Ph.Er=function(t,s,i){return Ph._r(t,s,i,1)},Ph.Rr=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Ph.Pr=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Ph.Ar=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Ph.Or=function(t){return Rh(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Ph.Dr=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Bh=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Ph.Fr=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Bh){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Ph.Dr(t,s);return[t/i,s/i]},Ph.Lr=function(t,s,i,e,n,r,h,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(n,h),c=Math.max(n,h);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||f>m)return!1;const g=n-t+h-i,y=r-s+o-e,w=i-t,S=e-s,b=h-n,v=o-r,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},Ph.kr=function(t,s,i,e,n,r,h,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||n>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||h>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const G=w*y-S*g;return Math.abs(G)<=M},Ph.Nr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=n.$r(),u=n.Br(),c=n.Wr(),f=n.jr(),d=n.Vr(),p=n.Hr(),m=n.Ur(),g=n.qr();return Ph.kr(t,s,i,e,r,h,o,a,l,u,c,f)||Ph.kr(t,s,i,e,r,h,o,a,c,f,d,p)||Ph.kr(t,s,i,e,r,h,o,a,d,p,m,g)||Ph.kr(t,s,i,e,r,h,o,a,m,g,l,u)},Ph.zr=function(t,s,i,e,n){const r=Math.min(t,i),h=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=n.length-4;l<=u;l+=2)if(Ph.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[l+2],n[l+3]))return!0;return Ph.kr(t,s,i,e,r,h,o,a,n[l],n[l+1],n[0],n[1])};const Wh=2,jh=1e-6;Ph.Jr=function(t,s,i,e,n,r,h,o){const a=i-t,l=o-r,u=a*l-(e-s)*(h-n);if(0===u)return 2;const c=((s-e)*(h-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(h-t)+(n-h)*(o-s))/u:2},Ph.Yr=function(t,s,i,e,n,r,h,o,a){const l=(h-n)*a,u=(o-r)*a;return Ph.Jr(t,s,i,e,n-l,r-u,h+l,o+u)},Ph.Xr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return b>=0&&v>=0&&b+v<=1},Ph.Kr=function(t,s,i,e,n,r,h,o){const a=n-i,l=r-e,u=h-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S;return[1-b-v,b,v]},Ph.Zr=function(t,s,i,e,n,r,h,o,a,l,u,c){return[t*e+s*h+i*l,t*n+s*o+i*u,t*r+s*a+i*c]}}{const Vh=self.Is;let Hh=null,Uh="";if("undefined"!=typeof document){Hh=document;const Kh=document.querySelector("base");Uh=Kh&&Kh.hasAttribute("href")?Kh.getAttribute("href"):"",Uh&&(Uh.startsWith("/")&&(Uh=Uh.substr(1)),Uh.endsWith("/")||(Uh+="/"))}Vh.Qr=function(){return Uh},Vh.th=function(){if(!Hh)return"";const t=Hh.location;return Vh.sh(t.origin+t.pathname)+Uh},Vh.sh=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},Vh.ih=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},Vh.eh=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},Vh.nh=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},Vh.rh=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},Vh.hh=function(t){return t.replace(/\\/g,"/")},Vh.oh=function(t,s){return s===(t?Vh.eh(t).slice(1):"")},Vh.ah=function(t,s){let i,e;return Vh.be(t)&&(i=Vh.rh(t.name)),Vh.le(t)&&(i=Vh.rh(t)),Vh.be(s)&&(e=Vh.rh(s.name)),Vh.le(s)&&(e=Vh.rh(s)),i===e},Vh.uh=function(t){t=Vh.hh(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,n="",r=t,h="";i>0&&(n=t.slice(0,i),r=t.slice(i)),e=r;const o=r.lastIndexOf(".");return o>0&&(h=r.slice(o),e=r.slice(0,-h.length)),{dir:n,fh:r,name:e,root:s,ext:h,dh:s+n+r}},Vh.ph=function(t,s){return new Promise(((i,e)=>{self.setTimeout(i,t,s)}))},Vh.mh=function(t){try{t()}catch(t){Vh.Ls&&console.warn("Swallowed exception: ",t)}},Vh.gh=function(){},Vh.Ze=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},Vh.yh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},Vh.wh=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},Vh.Sh=function(t,s){t.length=s},Vh.bh=function(t){t&&0!==t.length&&Vh.Sh(t,0)},Vh.Mh=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];Vh.Sh(i,0)}Vh.Sh(t,0)}},Vh.xh=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let n=e;n<s;++n)t.push(i)},Vh.Gh=function(t,s,i){s|=0;const e=t.length;s<e?Vh.Sh(t,s):s>e&&Vh.xh(t,s,i)},Vh.Th=function(t,s){Vh.bh(t),Vh.On(t,s)},Vh.On=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},Vh.Ch=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];Vh.Sh(t,i)},Vh.Ih=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},Vh._h=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},Vh.Eh=function(t,s){let i=[],e=0;for(let n=0,r=t.length;n<r;++n){let r=t[n];s(r)?i.push(r):(t[e]=r,++e)}return Vh.Sh(t,e),i},Vh.Rh=function(t,s){const i=t.length;let e=0;for(let i=0,n=t.length;i<n;++i){let n=t[i];s.has(n)||(t[e++]=n)}return Vh.Sh(t,e),i-e},Vh.Ph=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},Vh.Ah=function(t,s){if(!Vh.Ph(t,s))throw new RangeError("array index out of bounds")},Vh.Oh=function(t){return t.slice()},Vh.Dh=function(t,s){let i=[];for(let e of t)if(Vh.ge(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else Vh.Ge(e)?i.push(Vh.Dh(e,s)):i.push(e);return i},Vh.Fh=function(t){let s=[];for(let i of t)s.push(i.slice());return s},Vh.Lh=function(t,s=" "){return t?t.split(s).map((t=>t.trim())).filter((t=>!!t)):[]},Vh.kh=function(t,s,i){const e=new Set;for(const n of t.values())s(n)&&(i?e.add(i(n)):e.add(n));return e},Vh.Nh=function(t,s){return t.union?t.union(s):new Set([...t,...s])},Vh.$h=function(t,s){for(const i of s)t.add(i);return t},Vh.Bh=function(t){for(let s of t)return s;return null},Vh.xor=function(t,s){return!t!=!s},Vh.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},Vh.Wh=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},Vh.jh=function(t,s){return t.length?new Promise(((i,e)=>{const n=[];let r=0,h=!1;for(let o=0,a=t.length;o<a;++o)n.push(void 0),t[o].then((e=>{h||(n[o]=e,++r,r===t.length?i(n):s(r,t.length))})).catch((t=>{h=!0,e(t)}))})):Promise.resolve([])};let qh=[];Vh.Vh=function(t){qh.push(t)},Vh.Hh=function(){let t=0;for(let s of qh)t+=s();return Math.floor(t)};let zh=1;const Jh=new Map,Yh=new MessageChannel;Yh.port2.onmessage=function(t){const s=t.data,i=Jh.get(s);Jh.delete(s),i&&i(performance.now())},Vh.Uh=function(t){const s=zh++;return Jh.set(s,t),Yh.port1.postMessage(s),s},Vh.qh=function(t){Jh.delete(t)},Vh.zh=Vh.Uh,Vh.Jh=function(){return new Promise((t=>Vh.zh(t)))};const Xh=new Set;Vh.Yh=function(t){const s=self.requestAnimationFrame((async i=>{await Vh.Jh(),Xh.has(s)&&(Xh.delete(s),t(i))}));return Xh.add(s),s},Vh.Xh=function(t){Xh.has(t)&&(self.cancelAnimationFrame(t),Xh.delete(t))}}{const Zh=self.Is;Zh.Kh=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},Zh.Zh=function(t){return!Zh.Kh(t)},Zh.Qh=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},Zh.so=function(t,s){return fetch(t,s).then((t=>(Zh.Qh(t),t)))},Zh.io=function(t){return Zh.so(t).then((t=>t.text()))},Zh.eo=function(t){return Zh.so(t).then((t=>t.json()))},Zh.no=function(t){return Zh.so(t).then((t=>t.blob()))},Zh.ro=function(t){return Zh.so(t).then((t=>t.arrayBuffer()))},Zh.ho=function(t){return new Promise(((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t}))},Zh.oo=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)}))},Zh.ao=function(t){return"function"==typeof t.text?t.text():new Promise(((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)}))},Zh.lo=function(t){return Zh.ao(t).then((t=>JSON.parse(t)))},Zh.uo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await Zh.ho(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},Zh.co=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},Zh.fo=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=Zh.Kn(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise((e=>t.toBlob(e,s,i)));throw new Error("could not convert canvas to blob")},Zh.do=function(t,s,i){const e=Zh.co(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),Zh.fo(e,s,i)},Zh.po=function(t,s,i){if(Zh.Pi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then((t=>Zh.do(t,s,i)));if(Zh.Pi.ImageBitmap)return createImageBitmap(t).then((t=>Zh.do(t,s,i)));{const e=Zh.co(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),Zh.fo(e,s,i)}},Zh.mo=function(t,s){t.clear();for(const i of s)t.add(i)},Zh.yo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},Zh.wo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},Zh.So=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map((s=>t(s)))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map((s=>[s[0],t(s[1])]))};{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.bo=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map((s=>t(s))));if("map"===s._c3type_)return new Map(s.data.map((s=>[s[0],t(s[1])])));{const i=Object.create(null);for(const[e,n]of Object.entries(s))i[e]=t(n);return i}}return s},Zh.vo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const n of t)"-"===n?e>0&&(i=!0):i?(s+=n.toUpperCase(),i=!1):s+=n,++e;return s},Zh.Mo=function(t){return"object"==typeof t&&"function"==typeof t.next},Zh.xo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let Qh=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},to=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};padTwoDigits=Qh,hueToRGB=to;const so=self.Is,io=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,eo=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;so.Go=class{constructor(t,s,i,e){this.To=NaN,this.Co=NaN,this.Io=NaN,this._o=NaN,this.To=0,this.Co=0,this.Io=0,this._o=0,t instanceof so.Go?this.set(t):this.Eo(t||0,s||0,i||0,e||0)}Ro(t,s,i){return this.To=+t,this.Co=+s,this.Io=+i,this.Kn(),this}Eo(t,s,i,e){return this.To=+t,this.Co=+s,this.Io=+i,this._o=+e,this.Kn(),this}set(t){return this.To=t.To,this.Co=t.Co,this.Io=t.Io,this._o=t._o,this}S(t){return this.set(t)}add(t){this.To+=t.To,this.Co+=t.Co,this.Io+=t.Io,this._o+=t._o,this.Kn()}Po(t,s,i,e=0){this.To+=+t,this.Co+=+s,this.Io+=+i,this._o+=+e,this.Kn()}Ao(t){this.Oo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Do(Math.max(this.Co,t.Co)-Math.min(this.Co,t.Co)),this.Fo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Lo(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Kn()}ko(t){this.To=t.To,this.Co=t.Co,this.Io=t.Io}Oo(t){this.To=so.Kn(+t,0,1)}No(){return this.To}Do(t){this.Co=so.Kn(+t,0,1)}$o(){return this.Co}Fo(t){this.Io=so.Kn(+t,0,1)}Bo(){return this.Io}Lo(t){this._o=so.Kn(+t,0,1)}Wo(){return this._o}clone(){return so.Un(so.Go,this.To,this.Co,this.Io,this._o)}toArray(){return[this.To,this.Co,this.Io,this._o]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.To,t[s++]=this.Co,t[s++]=this.Io,t[s]=this._o}Ho(t,s){t[s++]=this.To,t[s++]=this.Co,t[s]=this.Io}equals(t){return this.To===t.To&&this.Co===t.Co&&this.Io===t.Io&&this._o===t._o}Uo(t){return this.To===t.To&&this.Co===t.Co&&this.Io===t.Io}qo(t,s,i){return this.To===t&&this.Co===s&&this.Io===i}zo(t,s,i,e){return this.To===t&&this.Co===s&&this.Io===i&&this._o===e}Jo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Co)&&t[s+2]===Math.fround(this.Io)&&t[s+3]===Math.fround(this._o)}Yo(t,s){return t[s]===Math.fround(this.To)&&t[s+1]===Math.fround(this.Co)&&t[s+2]===Math.fround(this.Io)}multiply(t){this.To*=t.To,this.Co*=t.Co,this.Io*=t.Io,this._o*=t._o}Xo(t){this.To*=t,this.Co*=t,this.Io*=t,this._o*=t}Ko(){return this.To*=this._o,this.Co*=this._o,this.Io*=this._o,this}Zo(){return this.To/=this._o,this.Co/=this._o,this.Io/=this._o,this}Kn(){return this.To=so.Kn(this.To,0,1),this.Co=so.Kn(this.Co,0,1),this.Io=so.Kn(this.Io,0,1),this._o=so.Kn(this._o,0,1),this}Qo(t){this.To=so.Rr(t),this.Co=so.Pr(t),this.Io=so.Ar(t),this._o=so.Or(t)}ta(t,s,i){return`rgb(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(so.te(t)?t:this.No())}%, ${100*(so.te(s)?s:this.$o())}%, ${100*(so.te(i)?i:this.Bo())}%, ${so.te(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.No()),s=Math.round(255*this.$o()),i=Math.round(255*this.Bo());return"#"+Qh(t.toString(16))+Qh(s.toString(16))+Qh(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Oo(s),isFinite(i)&&this.Do(i),isFinite(e)&&this.Fo(e),this.Lo(1),!0}na(){return`${Math.round(255*this.No())}, ${Math.round(255*this.$o())}, ${Math.round(255*this.Bo())}`}ra(){return[Math.round(255*this.No()),Math.round(255*this.$o()),Math.round(255*this.Bo())]}ha(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),this.Lo(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),this.Lo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,n=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),isFinite(r)&&this.Lo(r),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,n=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Oo(i),isFinite(e)&&this.Do(e),isFinite(n)&&this.Fo(n),isFinite(r)&&this.Lo(r),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ha(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ha(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.To,this.Co,this.Io,this._o]}fa(t,s,i,e){let n,r,h;if(t%=360,s=so.Kn(s,0,100),i=so.Kn(i,0,100),e=so.Kn(e,0,1),t/=360,i/=100,0==(s/=100))n=r=h=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;n=to(o,e,t+1/3),r=to(o,e,t),h=to(o,e,t-1/3)}return this.Oo(n),this.Do(r),this.Fo(h),this.Lo(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=io.exec(s),e=eo.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.To,s=this.Co,i=this.Io,e=this._o;return`hsla(${so.Go.pa(t,s,i)}, ${so.Go.ma(t,s,i)}%, ${so.Go.ga(t,s,i)}%, ${e})`}ya(){const t=this.To,s=this.Co,i=this.Io;return[so.Go.pa(t,s,i),so.Go.ma(t,s,i),so.Go.ga(t,s,i),this._o]}wa(t){Array.isArray(t)&&(t.length<3||(this.To=t[0],this.Co=t[1],this.Io=t[2],t.length>=4?this._o=t[3]:this._o=1))}set r(t){this.Oo(t)}get r(){return this.No()}set g(t){this.Do(t)}get g(){return this.$o()}set b(t){this.Fo(t)}get b(){return this.Bo()}set a(t){this.Lo(t)}get a(){return this.Wo()}Sa(t,s){switch(t){case 0:this.Oo(s);break;case 1:this.Do(s);break;case 2:this.Fo(s);break;case 3:this.Lo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.No();case 1:return this.$o();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static va(t,s){let i,e;if(Array.isArray(t))i=new so.Go,i.wa(t);else{if(!(t instanceof so.Go))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new so.Go,e.wa(s);else{if(!(s instanceof so.Go))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return so.Kn(Math.max(t,s)-Math.min(t,s),0,1)}static xa(t,s){const i=new so.Go;return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i.Lo(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static Ga(t,s){const i=new so.Go(0,0,0,1);return i.Oo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Do(Math.max(t.Co,s.Co)-Math.min(t.Co,s.Co)),i.Fo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static pa(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;let r=0;switch(e){case t:r=(s-i)/(e-n)+(s<i?6:0);break;case s:r=(i-t)/(e-n)+2;break;case i:r=(t-s)/(e-n)+4}return Math.round(r/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),n=Math.min(t,s,i);if(e===n)return 0;const r=e-n,h=(e+n)/2>.5?r/(2-e-n):r/(e+n);return Math.round(100*h)}static ga(t,s,i){const e=Math.max(t,s,i),n=(e+Math.min(t,s,i))/2;return e?Math.round(100*n):0}},so.Go.Ta=Object.freeze(so.Un(so.Go,1,1,1,1)),so.Go.Ca=Object.freeze(so.Un(so.Go,0,0,0,1)),so.Go.Ia=Object.freeze(so.Un(so.Go,0,0,0,0))}{const no=self.Is;no._a=class{constructor(t,s){this.Ea=0,this.Ra=0,t instanceof no._a?this.S(t):this.set(t||0,s||0)}set(t,s){this.Ea=+t,this.Ra=+s}S(t){this.Ea=t.Ea,this.Ra=t.Ra}equals(t){return this.Ea===t.Ea&&this.Ra===t.Ra}Pa(t,s){return this.Ea===t&&this.Ra===s}Jo(t,s){return t[s]===Math.fround(this.Ea)&&t[s+1]===Math.fround(this.Ra)}Aa(t){this.Ea=+t}Oa(){return this.Ea}Da(t){this.Ra=+t}Fa(){return this.Ra}toArray(){return[this.Ea,this.Ra]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Ea,t[s]=this.Ra}offset(t,s){this.Ea+=+t,this.Ra+=+s}scale(t,s){this.Ea*=t,this.Ra*=s}St(t,s){this.Ea/=t,this.Ra/=s}round(){this.Ea=Math.round(this.Ea),this.Ra=Math.round(this.Ra)}floor(){this.Ea=Math.floor(this.Ea),this.Ra=Math.floor(this.Ra)}ceil(){this.Ea=Math.ceil(this.Ea),this.Ra=Math.ceil(this.Ra)}angle(){return no.rr(0,0,this.Ea,this.Ra)}La(){return this.Ea*this.Ea+this.Ra*this.Ra}length(){return no.sr(this.Ea,this.Ra)}ka(t,s){const i=this.Ea*s-this.Ra*t;this.Ra=this.Ra*s+this.Ea*t,this.Ea=i}rotate(t){0!==t&&this.ka(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Ea&&i===this.Ra||(this.Ea-=s,this.Ra-=i,this.ka(Math.sin(t),Math.cos(t)),this.Ea+=+s,this.Ra+=+i)}move(t,s){0!==s&&(this.Ea+=Math.cos(t)*s,this.Ra+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ea/=t,this.Ra/=t)}Kn(t,s){this.Ea=no.Kn(this.Ea,t,s),this.Ra=no.Kn(this.Ra,t,s)}Tt(t){return this.Ea*t.Ea+this.Ra*t.Ra}reverse(){this.Ea=-this.Ea,this.Ra=-this.Ra}$a(){let t=this.Ea;return this.Ea=this.Ra,this.Ra=-t,this}}}{const ro=self.Is;ro.Rect=class{constructor(t,s,i,e){this.Ba=NaN,this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ba=0,this.Wa=0,this.ja=0,this.Va=0,t instanceof ro.Rect?this.S(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Ba=+t,this.Wa=+s,this.ja=+i,this.Va=+e}Ha(t,s,i,e){t=+t,s=+s,this.Ba=t,this.Wa=s,this.ja=t+ +i,this.Va=s+ +e}S(t){this.Ba=+t.Ba,this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va}clone(){return new ro.Rect(this.Ba,this.Wa,this.ja,this.Va)}static Ua(t,s){const i=new ro.Rect;return i.qa(Math.min(t.Ba,s.Ba)),i.za(Math.min(t.Wa,s.Wa)),i.Ja(Math.max(t.ja,s.ja)),i.Ya(Math.max(t.Va,s.Va)),i}static Xa(t){return new ro.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Ba===t.Ba&&this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va}Ka(t,s,i,e){return this.Ba===t&&this.Wa===s&&this.width()===i&&this.height()===e}Jo(t,s){return t[s]===Math.fround(this.Ba)&&t[s+1]===Math.fround(this.Wa)&&t[s+2]===Math.fround(this.ja)&&t[s+3]===Math.fround(this.Va)}qa(t){this.Ba=+t}Za(){return this.Ba}za(t){this.Wa=+t}Qa(){return this.Wa}Ja(t){this.ja=+t}tl(){return this.ja}Ya(t){this.Va=+t}sl(){return this.Va}toArray(){return[this.Ba,this.Wa,this.ja,this.Va]}jo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Ba,this.Wa,this.width(),this.height())}static el(t){return ro.Un(ro.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=this.ja,t[s]=this.Va}nl(t,s){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ba,t[s]=this.Va}rl(t,s,i){t[s++]=this.Ba,t[s++]=this.Wa,t[s++]=i,t[s++]=this.ja,t[s++]=this.Wa,t[s++]=i,t[s++]=this.ja,t[s++]=this.Va,t[s++]=i,t[s++]=this.Ba,t[s++]=this.Va,t[s]=i}width(){return this.ja-this.Ba}height(){return this.Va-this.Wa}hl(){return(this.Ba+this.ja)/2}ol(){return(this.Wa+this.Va)/2}offset(t,s){t=+t,s=+s,this.Ba+=t,this.Wa+=s,this.ja+=t,this.Va+=s}offsetLeft(t){this.Ba+=+t}offsetTop(t){this.Wa+=+t}al(t){this.ja+=+t}ll(t){this.Va+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.Wa<this.Va?this.Ba<this.ja?this.Va=this.Wa+this.width():this.Va=this.Wa-this.width():this.Ba<this.ja?this.Va=this.Wa-this.width():this.Va=this.Wa+this.width()}cl(t,s){t=+t,s=+s,this.Ba-=t,this.Wa-=s,this.ja+=t,this.Va+=s}fl(t,s){t=+t,s=+s,this.Ba+=t,this.Wa+=s,this.ja-=t,this.Va-=s}multiply(t,s){this.Ba*=t,this.Wa*=s,this.ja*=t,this.Va*=s}St(t,s){this.Ba/=t,this.Wa/=s,this.ja/=t,this.Va/=s}dl(t){this.Ba=+t-this.Ba,this.ja=+t-this.ja}pl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}ml(t,s){const i=this.width(),e=this.height(),n=this.Za()+i*t,r=this.Qa()+e*s;this.Ha(n-e*s,r-i*t,e,i)}gl(){const t=this.Ba;this.Ba=this.ja,this.ja=t}yl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}wl(t){const s=this.Wa;this.Wa=+t-this.Va,this.Va=+t-s}round(){this.Ba=Math.round(this.Ba),this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va)}Sl(){this.Ba=Math.ceil(this.Ba),this.Wa=Math.ceil(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va)}bl(){this.Ba=Math.floor(this.Ba),this.Wa=Math.floor(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va)}floor(){this.Ba=Math.floor(this.Ba),this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va)}ceil(){this.Ba=Math.ceil(this.Ba),this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va)}Kn(t,s,i,e){this.Ba=Math.max(this.Ba,+t),this.Wa=Math.max(this.Wa,+s),this.ja=Math.min(this.ja,+i),this.Va=Math.min(this.Va,+e)}vl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Ba=ro.Kn(this.Ba,t,i),this.Wa=ro.Kn(this.Wa,s,e),this.ja=ro.Kn(this.ja,t,i),this.Va=ro.Kn(this.Va,s,e)}normalize(){this.Ba>this.ja&&this.gl(),this.Wa>this.Va&&this.yl()}Ml(t){return!(t.ja<this.Ba||t.Va<this.Wa||t.Ba>this.ja||t.Wa>this.Va)}xl(t,s,i){return!(t.ja+s<this.Ba||t.Va+i<this.Wa||t.Ba+s>this.ja||t.Wa+i>this.Va)}Gl(t,s){return t>=this.Ba&&t<=this.ja&&s>=this.Wa&&s<=this.Va}Tl(t){return t.Ba>=this.Ba&&t.Wa>=this.Wa&&t.ja<=this.ja&&t.Va<=this.Va}Cl(t){t.Ba<this.Ba&&(this.Ba=+t.Ba),t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja>this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va)}Il(t){this.Ba=ro.It(t.Ba,t.ja,this.Ba),this.Wa=ro.It(t.Wa,t.Va,this.Wa),this.ja=ro.It(t.Ba,t.ja,this.ja),this.Va=ro.It(t.Wa,t.Va,this.Va)}}}{const ho=self.Is;ho._l=class{constructor(t,s,i,e,n,r,h,o){this.El=NaN,this.Rl=NaN,this.Pl=NaN,this.Al=NaN,this.Ol=NaN,this.Dl=NaN,this.Fl=NaN,this.Ll=NaN,this.El=0,this.Rl=0,this.Pl=0,this.Al=0,this.Ol=0,this.Dl=0,this.Fl=0,this.Ll=0,t instanceof ho._l?this.S(t):this.set(t||0,s||0,i||0,e||0,n||0,r||0,h||0,o||0)}set(t,s,i,e,n,r,h,o){this.El=+t,this.Rl=+s,this.Pl=+i,this.Al=+e,this.Ol=+n,this.Dl=+r,this.Fl=+h,this.Ll=+o}kl(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}S(t){this.El=t.El,this.Rl=t.Rl,this.Pl=t.Pl,this.Al=t.Al,this.Ol=t.Ol,this.Dl=t.Dl,this.Fl=t.Fl,this.Ll=t.Ll}equals(t){return this.El===t.El&&this.Rl===t.Rl&&this.Pl===t.Pl&&this.Al===t.Al&&this.Ol===t.Ol&&this.Dl===t.Dl&&this.Fl===t.Fl&&this.Ll===t.Ll}Nl(t){this.El=+t}$r(){return this.El}$l(t){this.Rl=+t}Br(){return this.Rl}Bl(t){this.Pl=+t}Wr(){return this.Pl}Wl(t){this.Al=+t}jr(){return this.Al}jl(t){this.Ol=+t}Vr(){return this.Ol}Vl(t){this.Dl=+t}Hr(){return this.Dl}Hl(t){this.Fl=+t}Ur(){return this.Fl}Ul(t){this.Ll=+t}qr(){return this.Ll}ql(){return new DOMQuad(new DOMPoint(this.El,this.Rl),new DOMPoint(this.Pl,this.Al),new DOMPoint(this.Ol,this.Dl),new DOMPoint(this.Fl,this.Ll))}static zl(t){return ho.Un(ho._l,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.El,this.Rl,this.Pl,this.Al,this.Ol,this.Dl,this.Fl,this.Ll]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.El,t[s++]=this.Rl,t[s++]=this.Pl,t[s++]=this.Al,t[s++]=this.Ol,t[s++]=this.Dl,t[s++]=this.Fl,t[s]=this.Ll}Jl(t,s,i){t[s++]=this.El,t[s++]=this.Rl,t[s++]=i,t[s++]=this.Pl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Ol,t[s++]=this.Dl,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Ll,t[s]=i}offset(t,s){t=+t,s=+s,this.El+=t,this.Rl+=s,this.Pl+=t,this.Al+=s,this.Ol+=t,this.Dl+=s,this.Fl+=t,this.Ll+=s}round(){this.El=Math.round(this.El),this.Rl=Math.round(this.Rl),this.Pl=Math.round(this.Pl),this.Al=Math.round(this.Al),this.Ol=Math.round(this.Ol),this.Dl=Math.round(this.Dl),this.Fl=Math.round(this.Fl),this.Ll=Math.round(this.Ll)}floor(){this.El=Math.floor(this.El),this.Rl=Math.floor(this.Rl),this.Pl=Math.floor(this.Pl),this.Al=Math.floor(this.Al),this.Ol=Math.floor(this.Ol),this.Dl=Math.floor(this.Dl),this.Fl=Math.floor(this.Fl),this.Ll=Math.floor(this.Ll)}ceil(){this.El=Math.ceil(this.El),this.Rl=Math.ceil(this.Rl),this.Pl=Math.ceil(this.Pl),this.Al=Math.ceil(this.Al),this.Ol=Math.ceil(this.Ol),this.Dl=Math.ceil(this.Dl),this.Fl=Math.ceil(this.Fl),this.Ll=Math.ceil(this.Ll)}Yl(t){this.El=t.Ba,this.Rl=t.Wa,this.Pl=t.ja,this.Al=t.Wa,this.Ol=t.ja,this.Dl=t.Va,this.Fl=t.Ba,this.Ll=t.Va}Xl(t,s){0===s?this.Yl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Ba*s,n=t.Wa*s,r=t.ja*s,h=t.Va*s,o=t.Ba*i,a=t.Wa*i,l=t.ja*i,u=t.Va*i;this.El=o-n,this.Rl=a+e,this.Pl=l-n,this.Al=a+r,this.Ol=l-h,this.Dl=u+r,this.Fl=o-h,this.Ll=u+e}Zl(t){t.set(Math.min(this.El,this.Pl,this.Ol,this.Fl),Math.min(this.Rl,this.Al,this.Dl,this.Ll),Math.max(this.El,this.Pl,this.Ol,this.Fl),Math.max(this.Rl,this.Al,this.Dl,this.Ll))}Gl(t,s){let i=this.Pl-this.El,e=this.Al-this.Rl;const n=this.Ol-this.El,r=this.Dl-this.Rl,h=t-this.El,o=s-this.Rl;let a=i*i+e*e,l=i*n+e*r,u=i*h+e*o;const c=n*n+r*r,f=n*h+r*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Fl-this.El,e=this.Ll-this.Rl,a=i*i+e*e,l=i*n+e*r,u=i*h+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}hl(){return(this.El+this.Pl+this.Ol+this.Fl)/4}ol(){return(this.Rl+this.Al+this.Dl+this.Ll)/4}Ql(t,s,i,e){return!(!this.Gl(t,s)&&!this.Gl(i,e))||ho.Nr(t,s,i,e,this)}tu(t){let s=t.hl(),i=t.ol();if(this.Gl(s,i))return!0;if(s=this.hl(),i=this.ol(),t.Gl(s,i))return!0;const e=this.El,n=this.Rl,r=this.Pl,h=this.Al,o=this.Ol,a=this.Dl,l=this.Fl,u=this.Ll;return ho.Nr(e,n,r,h,t)||ho.Nr(r,h,o,a,t)||ho.Nr(o,a,l,u,t)||ho.Nr(l,u,e,n,t)}su(){const t=this.El,s=this.Rl;this.El=this.Pl,this.Rl=this.Al,this.Pl=this.Ol,this.Al=this.Dl,this.Ol=this.Fl,this.Dl=this.Ll,this.Fl=t,this.Ll=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}nu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}ru(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.hu(t);this.ou(t,this.hu(s)),this.ou(s,i)}hu(t){switch(t){case 0:return this.El;case 1:return this.Rl;case 2:return this.Pl;case 3:return this.Al;case 4:return this.Ol;case 5:return this.Dl;case 6:return this.Fl;case 7:return this.Ll;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.El=s;break;case 1:this.Rl=s;break;case 2:this.Pl=s;break;case 3:this.Al=s;break;case 4:this.Ol=s;break;case 5:this.Dl=s;break;case 6:this.Fl=s;break;case 7:this.Ll=s;break;default:throw new RangeError("invalid quad point index")}}}}{const oo=self.Is,ao=self.assert,lo=[0,0,1,0,1,1,0,1],uo=oo.Un(oo._l);oo.au=class extends oo.Vn{constructor(t,s=!0){super(),t||(t=lo),this.lu=Float64Array.from(t),this.uu=new oo.Rect,this.cu=!0,this.fu=s}qn(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(lo)}S(t){this.mu(t.lu)}yu(){this.cu=!0}wu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,n=i;for(let r=0,h=t.length;r<h;r+=2){const h=t[r],o=t[r+1];h<s&&(s=h),h>e&&(e=h),o<i&&(i=o),o>n&&(n=o)}this.uu.set(s,i,e,n),this.cu=!1}Yl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Za()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Za()-s,e[7]=t.sl()-i,this.uu.S(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}Su(t,s,i){uo.S(t),uo.offset(s,i),this.mu(uo.toArray()),this.cu=!0}transform(t,s,i){let e=0,n=1;0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.bu(t,s,e,n)}bu(t,s,i,e){const n=this.lu;for(let r=0,h=n.length;r<h;r+=2){const h=r+1,o=n[r]*t,a=n[h]*s;n[r]=o*e-a*i,n[h]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,n=i.length;e<n;e+=2)i[e]+=t,i[e+1]+=s}Gl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.wu();const e=this.uu,n=e.Za()-110,r=e.Qa()-101,h=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;n<t?(a=n,u=t):(a=t,u=n),r<s?(l=r,c=s):(l=s,c=r),h<t?(f=h,p=t):(f=t,p=h),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,b=i[e],v=i[e+1],M=i[S],x=i[S+1];oo.kr(n,r,t,s,a,u,l,c,b,v,M,x)&&++g,oo.kr(h,o,t,s,f,p,d,m,b,v,M,x)&&++y}return g%2==1||y%2==1}vu(t,s,i){const e=t.lu,n=this.lu;if(this.Gl(e[0]+s,e[1]+i))return!0;if(t.Gl(n[0]-s,n[1]-i))return!0;for(let t=0,r=n.length;t<r;t+=2){const h=(t+2)%r,o=n[t],a=n[t+1],l=n[h],u=n[h+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,n=e.length;t<n;t+=2){const r=(t+2)%n,h=e[t]+s,m=e[t+1]+i,g=e[r]+s,y=e[r+1]+i;if(oo.kr(o,a,l,u,c,d,f,p,h,m,g,y))return!0}}return!1}Ql(t,s,i,e,n,r){if(this.Gl(i-t,e-s))return!0;if(this.Gl(n-t,r-s))return!0;let h=0,o=0,a=0,l=0;i<n?(h=i,a=n):(h=n,a=i),e<r?(o=e,l=r):(o=r,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(oo.kr(i,e,n,r,h,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}nu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}ru(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}xu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}Gu(){return this.lu}Tu(){return this.pu()}Cu(){return this.fu}}}{const co=self.Is;co.Iu=class extends co.Vn{constructor(t){if(super(),this._u=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}qn(){this.Eu(),this._u=null}Ru(){return 0===this._u.size}Eu(){const t=this._u;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this._u;let n=e.get(t);n||(n=new Map,e.set(t,n)),n.set(s,i)}qs(t,s){const i=this._u.get(t);return i?i.get(s):i}Us(t,s){const i=this._u.get(t);return!!i&&i.has(s)}Pu(t,s){const i=this._u,e=i.get(t);if(!e)return!1;const n=e.delete(s);return n&&0===e.size&&i.delete(t),n}Au(t){const s=this._u,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Ou(){let t=0;for(const s of this._u.values())t+=s.size;return t}*values(){for(const t of this._u.values())yield*t.values()}*Du(){for(const[t,s]of this._u.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this._u.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const fo=self.Is;fo.Fu=class extends fo.Vn{constructor(){super(),this.Lu=new Set,this.ku=[],this.Nu=!1}qn(){this.Eu()}Eu(){this.Lu.clear(),fo.bh(this.ku),this.Nu=!1}$u(t){this.Lu.has(t)||(this.Lu.add(t),this.Nu||this.ku.push(t))}Us(t){return this.Lu.has(t)}Pu(t){this.Lu.delete(t)&&(this.Nu=!0)}Ou(){return this.Lu.size}Ru(){return 0===this.Lu.size}Bu(){return this.Nu&&(this.Wu(),this.Nu=!1),this.ku}Wu(){const t=this.ku;fo.bh(t);for(const s of this.Lu)t.push(s)}}}{const po=self.Is,mo=new Map,go=new Map,yo=new Map,wo=new Map,So=new Map,bo=new Map,vo=new Map,Mo=new Map,xo=new Map;xo.set("linear","noease"),xo.set("default","noease");const Go=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],To=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Co=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.ju=class t{constructor(){}static Vu(){return"default"}static Hu(){return"noease"}static Uu(t){return Co.get(t)}static qu(s,...i){let e,n;this.zu(),s?(yo.has(s)||yo.set(s,new Map),e=yo.get(s),n=[...e.keys()].filter((i=>!t.Ju(i,s)||t.Ju(i,s).transition.Yu()))):(e=So,n=[...e.keys()]);const r=n.sort();return[...go.keys()].concat(r).filter((t=>!i.includes(t)))}static Xu(){this.zu();const t=[...So.keys()];return t.sort(),[...go.keys()].concat(t)}static Ku(){this.zu();const t=[...So.keys()];return t.sort(),t}static Zu(t){for(const s of Go)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of To)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.zu(),[...go.keys()].includes(t)}static tc(s){const i=xo.get(s);return i?mo.get(i):t.Qu(s)?mo.get(s):vo.has(s)?vo.get(s):void 0}static sc(t){return this.zu(),Mo.get(t)}static ec(s,i){this.zu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return yo.get(i).get(s)}static Ju(t,s){this.zu();const i=wo.get(s);if(i)return i.get(t)}static nc(s,i){return this.zu(),!!t.tc(s)||!!yo.get(i).get(s)}static rc(s){this.zu();return t.tc(s)||So.get(s)}static hc(t){return this.zu(),bo.get(t)}static oc(t){return this.zu(),this.Xu()[t]}static ac(t,s){return this.zu(),this.qu(s).indexOf(t)}static lc(t){return this.ac(t)}static zu(){0===mo.size&&(this.uc("default",(()=>{})),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!po.Ge(i))throw new Error("unexpected arguments");if(self.yc){const n=po.Un(self.yc,s,e);n.wc(i),t.mc(s,((t,s,i,e)=>n.Sc(t,s,i,e)),"predefined"),Mo.set(s,n)}else{const n=po.Un(po.bc,[s,i.map((t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee]))],!1);n.vc(e),t.mc(s,((t,s,i,e)=>n.Sc(t,s,i,e)),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,n){this.zu(),t.mc(s,i,"custom",e,n)}static xc(t,s){if(this.Qu(t))return;if([...vo.keys()].includes(t))return;const i=yo.get(s);i&&i.delete(t);const e=wo.get(s);e&&e.delete(t)}static mc(t,s,i,e,n){switch(i){case"predefined":mo.set(t,s),go.set(t,s);break;case"custom":e?(yo.has(e)||yo.set(e,new Map),wo.has(e)||wo.set(e,new Map),yo.get(e).set(t,s),wo.get(e).set(t,n)):(So.set(t,s),bo.set(t,n));break;case"private":mo.set(t,s),vo.set(t,s);break;default:throw new Error("unexpected ease mode")}}static Gc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,n){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(n-s+3*i-3*e)}static dc(t,s,i,e,n,r,h,o,a,l){if(e===n&&r===h)return t;const u=No(t,s,e,r,o,l),c=Oo(i,n,h,a),f=Do(i,n,h,a),d=Fo(i,n,h,a);return Lo(u,c,f,d)}static Tc(t,s,i,e){const n=[],r=Oo(t,s,i,e),h=Do(t,s,i,e),o=Fo(t,s,i,e);for(let t=0;t<Io;++t){const s=Lo(t*_o,r,h,o);n.push(s)}return n}};const Io=11,_o=1/(Io-1),Eo=4,Ro=.01,Po=1e-7,Ao=10,Oo=(t,s,i,e)=>e-3*i+3*s-t,Do=(t,s,i,e)=>3*i-6*s+3*t,Fo=(t,s,i,e)=>3*(s-t),Lo=(t,s,i,e)=>((s*t+i)*t+e)*t,ko=(t,s,i,e)=>3*s*t*t+2*i*t+e,No=(t,s,i,e,n,r)=>{if(1==t)return 1;let h=0,o=1,a=r[o],l=Io-1;for(r[Io-1];o!=l&&a<=t;)o++,a=r[o],h+=_o;o--,a=r[o];let u=h+(t-a)/(r[o+1]-a)*_o;const c=Oo(s,i,e,n),f=Do(s,i,e,n),d=Fo(s,i,e,n),p=ko(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Lo(u,c,f,d)-t)/ko(u,c,f,d);return u}{let s,i,e=h,n=h+_o,r=0;do{u=e+(n-e)/2;let h=Lo(u,c,f,d)-t;h>0?n=u:e=u,s=Math.abs(h)>1e-7,i=++r<10}while(s&&i);return u}}}{let $o=function(t){Bo.le(t)};RequireStringOrNumber=$o;const Bo=self.Is;Bo.Cc=class{constructor(t){this.Ic=[],this.Yn=t||"",this._c=0}qn(){this.Eu(),this.Ic=null}Ec(){return this.Yn}Eu(){Bo.Mh(this.Ic),this._c=0}Rc(){return this._c}Pc(t=Math.random()*this.Rc()){let s=0;for(const[i,e]of this.Ic)if(s+=i,t<s)return e;return 0}Ac(){return!!this.Ic.length}Oc(t,s){$o(s),this._c+=t,this.Ic.push([t,s])}Dc(t,s){$o(s);const i=0===t;for(let e=0;e<this.Ic.length;e++){const n=this.Ic[e],r=i||n[0]===t,h=n[1]===s;if(r&&h){this.Ic.splice(e,1),this._c-=n[0];break}}}Fc(){return JSON.stringify(this.Ic)}static Lc(t,s){const i=new Bo.Cc(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Oc(s,e)}return i}}}{const Wo=self.Is;let jo=0;Wo.kc=class{constructor(t,s){this.Nc=t,this.$c=s,this.Bc=jo++,this.Nc.Wc("runtime","screen-reader-text",{type:"create",id:this.Bc,text:this.$c})}qn(){this.Nc.Wc("runtime","screen-reader-text",{type:"release",id:this.Bc}),this.Nc=null,this.$c="",this.Bc=-1}jc(t){this.$c!==t&&(this.$c=t,this.Nc.Wc("runtime","screen-reader-text",{type:"update",id:this.Bc,text:this.$c}))}}}{const Vo=self.Is;Vo.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Vc=!1,this.Hc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Hc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Vc=!0}}}{const Ho=self.Is,Uo=self.assert;Ho.Event.Uc=class extends Ho.Vn{constructor(t){super(),this.qc=t,this.zc=[],this.Jc=new Set,this.Yc=[],this.Xc=new Set,this.Kc=0,this.Zc=[]}qn(){this.Kc>0||(Ho.bh(this.zc),this.Jc.clear(),Ho.bh(this.Yc),this.Xc.clear(),Ho.bh(this.Zc),Ho.qn(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",if:t,capture:s});else if(s){if(this.Jc.has(t))return;this.zc.push(t),this.Jc.add(t)}else{if(this.Xc.has(t))return;this.Yc.push(t),this.Xc.add(t)}}ef(t,s){this.tf()?this.Zc.push({sf:"remove",if:t,capture:s}):s?this.Jc.has(t)&&(this.Jc.delete(t),Ho.Ih(this.zc,t)):this.Xc.has(t)&&(this.Xc.delete(t),Ho.Ih(this.Yc,t))}nf(){return!this.zc.length&&!this.Yc.length}tf(){return this.Kc>0}rf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.Jc.delete(i.if),s.add(i.if)):(this.Xc.delete(i.if),t.add(i.if))}Ho.Rh(this.Yc,t),Ho.Rh(this.zc,s),Ho.bh(this.Zc)}hf(t){this.af();let s=!1;for(let i=0,e=this.zc.length;i<e;++i)if(this.zc[i](t),t.Vc){s=!0;break}if(!s)for(let s=0,i=this.Yc.length;s<i&&(this.Yc[s](t),!t.Vc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s)this.zc[s](t);for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.rf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.zc.length;i<e;++i){let e=this.zc[i];s.push(Ho.df((()=>e(t))))}for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Ho.df((()=>e(t))))}return Promise.all(s).then((()=>!t.defaultPrevented))}pf(t){const s=[];this.af();for(let i=0,e=this.zc.length;i<e;++i){const e=this.zc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then((()=>!t.defaultPrevented)):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.zc.length;s<i;++s){const i=this.zc[s](t);Ho.Mo(i)&&(yield*i)}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Ho.Mo(i)&&(yield*i)}this.lf()}}}{const qo=self.Is;qo.Event.wf=class extends qo.Vn{constructor(){super(),this.Sf=new Map,this.bf=!1}qn(){if(this.bf)throw new Error("already released");this.vf(),this.bf=!0,qo.qn(this)}zn(){return this.bf}vf(){if(this.Sf){for(let t of this.Sf.values())t.qn();this.Sf.clear()}}Mf(t,s){let i=this.Sf.get(t);return i||(s?(i=qo.Un(qo.Event.Uc,t),this.Sf.set(t,i),i):null)}xf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.nf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.hf(t):s.uf(t))}Gf(t){const s=this.Mf(t.type,!1);return s?(t.Hc=!0,s.ff(t)):Promise.resolve(!0)}async Tf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Hc=!0;const i=await s.ff(t);return s.qn(),i}async Cf(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}If(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async _f(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Ef(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.Sf.values())s.cf(t)}}}{let zo=function(t){ia=ta&&0===ea?requestIdleCallback(Jo,{timeout:35}):setTimeout(Jo,ea>0?1:t)},Jo=function(t){if(ia=-1,!sa.length)return;let s=performance.now(),i=s,e=0,n=0;do{Yo(sa.shift()),i=performance.now(),++e,n=(i-s)/e*1.1}while(sa.length&&(ta&&0===ea&&void 0!==t?n<t.timeRemaining():i-s+n<12));if(-1===ia&&sa.length){let t=i-s;zo(Math.max(16-t,4))}},Yo=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};SetNewCallback=zo,DoAsyncifiedWork=Jo,DoNextAsyncifiedJob=Yo;const Xo=self.Is,Ko=12,Zo=16,Qo=35,ta="undefined"!=typeof requestIdleCallback;let sa=[],ia=-1,ea=0,na=Xo.Ys.Us("disable-asyncify");na&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xo.df=function(t){let s=null;return Xo.Ls&&(s=Xo.Zi()),new Promise(((i,e)=>{sa.push({if:t,resolve:i,reject:e,stack:s}),na?Yo(sa.pop()):-1===ia&&zo(16)}))},Xo.df.Rf=function(t){if(t)++ea;else if(--ea,ea<0)throw new Error("already turned off high throughput mode")}}{let ra=function(){ua=-1},ha=function(){ca=-1,fa=-1;let t=Date.now();for(let s of da)if(s.Pf(t)){let t=s.Af();(-1===fa||t<fa)&&(fa=t)}else da.delete(s);if(-1!==fa){let s=Math.max(fa-t+100,1e3);ca=self.setTimeout(ha,s)}};ClearTimeCache=ra,CheckActiveIdleTimeouts=ha;const oa=self.Is,aa=1e3,la=100;let ua=-1;oa.Of=function(){return-1===ua&&(ua=Date.now(),self.setTimeout(ra,16)),ua};let ca=-1,fa=-1,da=new Set;oa.Df=class{constructor(t,s){this.Ff=t,this.Lf=1e3*s,this.kf=0,this.Nf=!1}$f(){let t=oa.Of();this.kf=t+this.Lf,this.Nf||(da.add(this),this.Nf=!0),-1===ca?(fa=this.kf,ca=self.setTimeout(ha,this.Lf+100)):this.kf<fa&&fa>t+1e3&&(self.clearTimeout(ca),fa=this.kf,ca=self.setTimeout(ha,this.Lf+100))}Pf(t){return!(t>=this.kf&&(this.Ff()?(this.kf=t+this.Lf,0):(this.Nf=!1,1)))}Af(){return this.kf}Bf(){this.Nf&&(da.delete(this),this.Nf=!1,0===da.size&&-1!==ca&&(self.clearTimeout(ca),ca=-1,fa=-1))}qn(){this.Bf(),this.Ff=null}}}{const pa=self.Is;pa.Wf=class t{constructor(t){this.jf=!1,this.Vf=t}Hf(){this.jf||(this.jf=!0,this.Vf&&(this.Vf(),this.Vf=null))}Uf(){return this.jf}qn(){this.Hf()}static qn(s){return new t((()=>s.qn()))}static qf(t,s,i,e,n){if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(n&&(i=i.bind(n)),s.includes(" ")){s=s.split(" ");const n=new pa.zf;for(let r of s)t.addEventListener(r,i,e),n.$u(pa.Un(pa.Wf,(()=>t.removeEventListener(r,i,e))));return n}return t.addEventListener(s,i,e),pa.Un(pa.Wf,(()=>t.removeEventListener(s,i,e)))}},pa.Jf=class extends pa.Wf{Yf(t){this.Vf=t}},pa.zf=class extends pa.Wf{constructor(...t){super(),this.Xf=new Set;for(let s of t)this.$u(s)}$u(...t){if(this.jf)throw new Error("already disposed");for(let s of t)this.Xf.add(s)}Kf(t){if(this.jf)throw new Error("already disposed");this.Xf.delete(t)}Zf(){if(this.jf)throw new Error("already disposed");if(this.Xf){for(let t of this.Xf)t.Hf();this.Xf.clear()}}Uf(){return this.jf}Hf(){if(this.jf)throw new Error("already disposed");this.jf=!0;for(let t of this.Xf)t.Hf();this.Xf.clear(),this.Xf=null}qn(){this.Hf()}}}{const ma=self.Is;ma.Qf=class extends ma.Vn{constructor(){super(),this.td=0,this.Ra=0,this.sd=0,this.ed=0}$u(t){t=+t,this.Ra=t-this.td,this.sd=this.ed+this.Ra,this.td=this.sd-this.ed-this.Ra,this.ed=this.sd}nd(t){this.ed-=+t}qs(){return this.ed}$f(){this.td=0,this.Ra=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Ra=0,this.sd=0,this.ed=+t}rd(t){this.td=t.td,this.Ra=t.Ra,this.sd=t.sd,this.ed=t.ed}qn(){}}}{const ga=self.Is,ya={},wa=!0,Sa=!1;ya.hd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ya.ld=function(t){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ya.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ya.ld.prototype.clone=function(){var t=new ya.ld(this.compare);return t.fd(this),t},ya.ld.prototype.clear=function(){this.size=0,this.ad=new ya.hd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ya.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ya.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ya.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ya.hd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=wa,this.yd(s),this.size++}},ya.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==wa;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==wa?(t.parent.color=!1,s.color=!1,t.parent.parent.color=wa,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=wa,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ya.ld.prototype.wd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.Sd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ya.ld.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==wa&&(s.color=!1,t.parent.color=wa,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=wa,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=wa,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==wa&&(s.color=!1,t.parent.color=wa,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=wa,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=wa,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ya.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.wd(s),i}return null},ya.ld.prototype.vd=function(t,s){this.remove(s)},ya.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ya.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ya.ld.prototype.Sd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ya.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ya.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype.Gd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ya.ld.prototype.Td=function(){return this.min(this.root).key},ya.ld.prototype.Cd=function(){return this.max(this.root).key},ya.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ya.ld.prototype.contains=function(t){return null!=this.gd(t).key},ya.ld.prototype.getValues=function(){var t=[];return this.forEach((function(s){t.push(s)})),t},ya.ld.prototype.fd=function(t){if("array"==ya.Id(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ya.Id(t.forEach))t.forEach(this.md,this);else if("function"==ya.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ya.Id(t))for(var e in t)this.md(t[e])},ya.ld.prototype._d=function(t){if("array"==ya.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ya.Id(t.forEach))t.forEach(this.vd,this);else if("function"==ya.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ya.Id(t))for(var e in t)this.remove(t[e])},ya.ld.prototype.Ed=function(t){if("array"==ya.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ya.Id(t.forEach))return t.every(this.contains,this);if("function"==ya.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ya.Id(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ya.ld.prototype.range=function(t,s){var i=[];return this.Rd((function(t){i.push(t)}),t,s),i},ya.ld.prototype.Pd=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},ya.ld.prototype.Od=function(t,s,i){if(!this.Ad())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ya.ld.prototype.traverseTo=function(t,s,i){if(!this.Ad())for(var e=this.min(this.root),n=this.gd(s);e!=n;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ya.ld.prototype.Rd=function(t,s,i,e){if(!this.Ad())for(var n=this.gd(s),r=this.gd(i);n!=r;){if(t.call(e,n.key,this))return;n=this.Sd(n)}},ya.ld.prototype.Dd=function(t,s){if(!this.Ad())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},ya.ld.prototype.forEach=function(t,s){if(!this.Ad())for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.call(s,i.key,i.key,this)},ya.ld.prototype.some=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ya.ld.prototype.every=function(t,s){if(this.Ad())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ya.ld.prototype.map=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},ya.ld.prototype.filter=function(t,s){var i=[];if(this.Ad())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ya.ld.prototype.Fd=function(){return this.size},ya.ld.prototype.Ad=function(){return 0==this.size},ya.ld.prototype.isSubsetOf=function(t){var s=ya.Fd(t);if(this.Fd()>s)return!1;var i=0;if(this.Ad())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))ya.contains.call(t,t,e.key)&&i++;return i==this.Fd()},ya.ld.prototype.intersection=function(t){var s=new ya.ld(this.compare);if(this.Ad())return s;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},ga.ld=class extends ga.Vn{constructor(t){super(),this.Ld=new ya.ld(t),this.kd=!1,this.Nd=new Set,this.$d=new Set}$u(t){this.kd?this.Ld.contains(t)?this.$d.delete(t):this.Nd.add(t):this.Ld.md(t)}Kf(t){this.kd?this.Ld.contains(t)?this.$d.add(t):this.Nd.delete(t):this.Ld.remove(t)}Us(t){return this.kd?!!this.Nd.has(t)||!this.$d.has(t)&&this.Ld.contains(t):this.Ld.contains(t)}Eu(){this.Ld.clear(),this.Nd.clear(),this.$d.clear()}toArray(){if(this.kd)throw new Error("cannot be used in queueing mode");return this.Ld.getValues()}Ou(){return this.Ld.Fd()+this.Nd.size-this.$d.size}Ru(){return 0===this.Ou()}Bd(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Ld;return t.min(t.root).key}Wd(){if(this.Ru())throw new Error("empty set");if(this.kd)throw new Error("cannot be used in queueing mode");const t=this.Bd();return this.Kf(t),t}jd(t){if(t=!!t,this.kd!==t&&(this.kd=t,!t)){for(const t of this.$d)this.Ld.remove(t);this.$d.clear();for(const t of this.Nd)this.Ld.md(t);this.Nd.clear()}}Vd(t){this.Ld.forEach(t)}*values(){if(this.Ru())return;const t=this.Ld;for(let s=t.min(t.root);s!=t.ad;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const ba=self.Is;ba.Hd=class{constructor(t=ba.hardwareConcurrency){this.Ud=t,this.qd=[],this.zd=0}$u(t){return new Promise(((s,i)=>{this.qd.push({if:t,resolve:s,reject:i}),this.Jd()}))}Yd(t){for(let s=0,i=this.qd.length;s<i;++s)if(this.qd[s].if===t)return s;return-1}Xd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.qd[i].resolve(s),this.qd.splice(i,1)}Kd(t,s){const i=this.Yd(t);if(-1===i)throw new Error("cannot find promise to reject");this.qd[i].reject(s),this.qd.splice(i,1)}async Jd(){if(!this.qd.length)return;if(this.zd>=this.Ud)return;this.zd++;const t=this.qd.shift();try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.zd--,this.Jd()}static async Zd(t,s){const i=[];let e=!1;const n=async t=>{let n;for(;n=s.pop();){if(e)return;try{i.push(await n())}catch(t){throw e=!0,t}}},r=[];for(;t--;)r.push(n());return await Promise.all(r),i}}}{const va=self.Is;va.Qd=class{constructor(t,s,i){this.Ff=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.np=()=>this.rp(),this.hp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==va.cp&&va.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=va.Of(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.np,Math.max(e-i,4))}mp(){this.hp=!0;const t=this.ap;this.ap=null,t?this.Ff(...t):this.Ff(),this.hp=!1}$f(){this.hp||(this.gp(),this.ap=null,this.ep=va.Of())}rp(){this.ip=-1,this.ep=va.Of(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}qn(){this.gp(),this.Ff=null,this.ap=null,this.np=null}}}{const Ma=self.Is;Ma.yp=class{constructor(){this.wp=new Map,this.Sp=!1,this.bp=null,this.vp=null,this.Mp=null,this.xp=null}Gp(t){this.Sp=!!t}Tp(){return this.Sp}Cp(t){this.bp=t}Ip(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}_p(t){this.vp=t}Ep(t,s,i,e,n,r){if(!this.vp)throw new Error("no raster at size callback set");return this.vp(t,s,i,e,n,r)}Rp(t){this.Mp=t}Pp(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Ap(t){this.xp=t}Op(){if(!this.xp)throw new Error("no redraw callback set");this.xp()}Dp(t){let s=this.wp.get(t);return s||(s=Ma.Un(Ma.Fp,this,t),this.wp.set(t,s)),s.Lp(),s}kp(t){this.wp.delete(t.Np())}$p(){for(const t of this.wp.values())t.Bp(),t.Wp()}}}{const xa=self.Is,Ga=4096;xa.Fp=class{constructor(t,s){this.jp=t,this.Vp=s,this.Hp=0,this.Up=0,this.qp=0,this.zp=this.jp.Ip(s).then((t=>{this.jp&&(this.Up=t[0],this.qp=t[1],this.jp.Op())})).catch((t=>{console.error("[SVG] Error loading SVG: ",t),this.Jp=!0,this.jp&&this.jp.Op()})),this.Yp=0,this.Xp=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.Jp=!1}qn(){if(this.Hp<=0)throw new Error("already released");this.Hp--,0===this.Hp&&this.im()}Bp(){this.tm&&(this.jp.Pp(this.tm),this.tm=null)}im(){this.Bp(),this.jp.kp(this),this.jp=null}Np(){return this.Vp}Lp(){this.Hp++}nm(){return this.Hp>0}rm(){return this.tm}Wp(){this.sm=!0}async hm(t,s,i){if(0===s||0===i||this.Jp)return;if(this.Qp)return;let e=xa.vr(Math.ceil(s)),n=xa.vr(Math.ceil(i));const r=Math.max(e,n);if(r>4096){const t=4096/r;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),n=Math.min(Math.ceil(n*t),4096)}if(s<e&&i<n){const t=s/i;e/n>t?(s=n*t,i=n):(s=e,i=e/t)}if(this.jp.Tp()&&(e=Math.ceil(s),n=Math.ceil(i)),e<=this.Yp&&n<=this.Xp&&!this.sm)return;this.Qp=!0,this.Yp=e,this.Xp=n;const h=await this.jp.Ep(this.Vp,t,this.Yp,this.Xp,s,i);this.jp&&(this.Bp(),this.tm=h,this.Kp=s,this.Zp=i,this.Qp=!1,this.sm=!1,this.jp.Op())}om(){return this.zp}am(){return this.Up}lm(){return this.qp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.Jp}}}{let Ta=function(t){return Pa.get(t)};lookupHtmlEntity=Ta;const Ca=self.Is;Ca.pm="\ufeff";const Ia=new Set("0123456789");Ca.gm=function(t){return Ia.has(t)};const _a=new Set(" \t\n\r\u2028\u2029");Ca.ym=function(t){return _a.has(t)},Ca.wm=function(t){return[...t].filter((t=>!Ca.ym(t))).join("")},Ca.Sm=function(t){for(const s of t)if(!Ca.ym(s))return!1;return!0},Ca.bm=function(t){for(const s of t)if(!Ca.ym(s))return!1;return!0},Ca.vm=function(t){return 1===t.length&&t.charCodeAt(0)<32},Ca.Mm=function(t){return[...t].filter((t=>!Ca.vm(t))).join("")};let Ea=null;try{Ea=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}Ca.xm=function(t){return!Ca.ym(t)&&Ea&&Ea.test(t)};const Ra=new Set("0123456789.+-e");Ca.Gm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!Ia.has(s))return!1;for(let s of t)if(!Ra.has(s))return!1;return!0},Ca.Tm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!Ca.gm(i))break;--s}return t.substr(0,s)},Ca.Cm=function(t){let s=Ca.Tm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const Pa=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Aa=/[&<>"']/g;Ca.Im=function(t){return t.replace(Aa,Ta)},Ca._m=function(t){let s=Ca.Em(t,"\\","\\\\");return s=Ca.Em(s,'"','\\"'),s=Ca.Em(s,"\t","\\t"),s=Ca.Em(s,"\r",""),Ca.Em(s,"\n","\\n")},Ca.Rm=function(t){let s=Ca.Em(t,"&","&amp;");return s=Ca.Em(s,"<","&lt;"),s=Ca.Em(s,">","&gt;"),Ca.Em(s,'"',"&quot;")};const Oa=/[-[\]{}()*+?.,\\^$|#\s]/g;Ca.Ki=function(t){return t.replace(Oa,"\\$&")},Ca.Pm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},Ca.Am=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},Ca.Om=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let n=0,r=0,h=[];for(;(r=t.indexOf(s,n))>-1;)h.push(r),n=r+e;return h},Ca.Em=function(t,s,i){return t.replaceAll(s,(()=>i))},Ca.Dm=function(t,s,i){return t.replace(new RegExp(Ca.Ki(s),"gi"),(()=>i))},Ca.Fm=function(t,s){"string"==typeof s?t.textContent=s:s.Lm()?t.textContent=s.toString():(t.innerHTML=s.km(),s instanceof Ca.pn&&s.Nm(t))},Ca.$m=function(t,s){return t instanceof Ca.dn||t instanceof Ca.pn?t.equals(s):s instanceof Ca.dn||s instanceof Ca.pn?s.equals(t):t===s},Ca.Bm=function(t,...s){let i=t;for(let e=0,n=s.length;e<n;++e){const n=`{${e}}`;if(!t.includes(n))throw new Error(`missing placeholder '${n}' in string substitution`);i=i.replace(n,s[e].toString())}return i},Ca.Wm=function(t,...s){let i=t,e=-1,n=-1;for(let r=0,h=s.length;r<h;++r){const h=`{${r}}`;t.includes(h)?(n=r,i=i.replace(h,s[r].toString())):-1===e&&(e=r)}if(e>=0&&n>=0&&e<n)throw new Error(`missing placeholder '${e}' in string substitution`);return i},Ca.jm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},Ca.Vm=function(t,s){return t>s?1:t<s?-1:0},Ca.Hm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const Da=new self.Intl.Segmenter;Ca.Um=function(t){const s=[];for(const i of Da.segment(t))s.push(i.segment);return s},Ca.qm=function*(t){for(const s of Da.segment(t))yield s.segment},Ca.zm=function(t){let s=0;for(const i of Da.segment(t))++s;return s};const Fa=1024,La=1048576,ka=1073741824,Na=1099511627776;Ca.Jm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Ym;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<ka){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<Na){let s=t/ka;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/Na;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const $a={Xm:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};Ca.sg=function(t,s){s=Object.assign({},$a,s),Ca.eg.ig("common.time");const i=[],e=self.lang,n=self.ng;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(n(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(n(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(n(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(n(".seconds",null,s))}const r=(s.Xm?e(".approx-prefix"):"")+i.join(e(".separator"));return Ca.eg.rg(),r},Ca.hg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),n=s-e.length;for(let t=0;t<n;++t)i+="0";return i+e},Ca.og=function(t){return t.toLowerCase().replace(/\b\w/g,(t=>t.toUpperCase()))},Ca.ag=function(t,s){let i=t.split(".").map((t=>t.trim())),e=s.split(".").map((t=>t.trim()));Ca.Gh(i,4,"0"),Ca.Gh(e,4,"0"),i=i.map((t=>parseInt(t,10))),e=e.map((t=>parseInt(t,10)));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},Ca.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)}))},Ca.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,n=t.length;e<n;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},Ca.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,n,r,h,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,n=1;n<=t.length;n++)h=s[e-1]===t[n-1]?o[n-1]:Math.min(o[n-1]+1,Math.min(r+1,o[n]+1)),o[n-1]=r,r=h;o[t.length]=r}return o[t.length]}}{let Ba=function(t,s,i){const e=Va.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${Ya++}">`:t;if("string"==typeof e){if("a"===e&&0===za.length||"abbr"===e&&0===Ja.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Ja.length)throw new Error("invalid bbcode tip substitution");const s=Ja[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Wa.Em(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=za.length)throw new Error("invalid bbcode link substitution");const s=za[t];if("string"==typeof s)return`<a href="${za[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};bbToHtmlReplacerFunc=Ba;const Wa=self.Is,ja=self.assert,Va=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),Ha=new Set(["icon"]),Ua=/\[(\/?)([a-zA-Z0-9]+)\]/g,qa=/\[(\/?)([^\[\n]*?)\]/g;let za=null,Ja=null,Ya=0;const Xa=/\n/g;Wa.pn=class{constructor(t,s){if(this.fg=s&&s.dg?t:Wa.Im(t),this.pg="",this.mg=!1,this.gg=[],this.yg=[],s){if(this.mg=!!s.wg,s.links){if(s.links.length>9)throw new Error("too many links");this.gg=s.links}if(s.Sg){if(s.Sg.length>9)throw new Error("too many tips");this.yg=s.Sg}}this.bg=this.fg.includes("["),this.vg=this.mg&&this.fg.includes("\n"),this.Mg=!this.bg&&!this.vg&&!this.fg.includes("&"),this.xg=!1,this.Gg=[]}toString(){return this.fg}valueOf(){return this.fg}Lm(){return this.Mg}Tg(){return this.bg?this.fg.replace(Ua,""):this.fg}km(){if(this.Mg)return this.fg;if(!this.pg&&this.fg){let t=this.fg;this.bg&&(Ya=0,za=this.gg,Ja=this.yg,t=t.replace(Ua,Ba),za=null,Ja=null),this.vg&&(t=t.replace(Xa,"<br>")),this.pg=t}return this.pg}Nm(t){if(this.gg.length)for(let s=0,i=this.gg.length;s<i;++s){const i=this.gg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Wa.dn?this.km()===t.km():t instanceof Wa.pn?this.fg===t.fg:this.fg===t}Cg(){if(this.xg)return this.Gg;const t=[],s=this.fg,i=[];qa.lastIndex=0;let e=0,n=null;for(;null!==(n=qa.exec(s));){const r=n.index;if(r>0&&"\\"===s.charAt(r-1))continue;const h=n[0],o=n[1],a=n[2],l=s.substring(e,r);if(e=r+h.length,l&&t.push({text:l,Ig:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const n=a.indexOf("=");if(-1!==n?(s=a.substring(0,n).toLowerCase(),e=a.substring(n+1)):s=s.toLowerCase(),Ha.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Ig:i.slice(0)})}else i.push({tag:s,_g:e})}}e<s.length&&t.push({text:s.substring(e),Ig:i.slice(0)});for(const s of t)s.text&&(s.text=this.Eg(s.text));return this.Gg=t.map((t=>t.icon?Wa.Un(Wa.Rg,{icon:t.icon,Ig:t.Ig}):Wa.Un(Wa.Pg,{Ag:Wa.Um(t.text),Ig:t.Ig}))),this.xg=!0,this.Gg}Eg(t){return t=Wa.Em(t,"\\[","["),Wa.Em(t,"\\\\","\\")}static Og(t){return Wa.Un(Wa.pn,t,{dg:!0}).Tg()}static Dg(t){return t.replace(qa,"")}}}{let Ka=function(t){return""!==t&&""!==t&&il.ym(t)},Za=function(t){return el.has(t)},Qa=function(t){return il.xm(t)&&!Za(t)},tl=function(t){for(;t.length>0&&Ka(t.at(-1));)t.pop()},sl=function(t){return"\n"===t||"\r\n"===t};IsWordBreakWhiteSpace=Ka,IsOpeningCJKPunctiationChar=Za,IsContinuingCJKPunctuationChar=Qa,WordBreakTrimEnd=tl,IsNewline=sl;const il=self.Is,el=new Set("");il.Fg=class{constructor(){this.Lg=[],this.kg=null}Ng(){return this.Lg}$g(){return this.Lg.length}Bg(t){this.kg=t}Wg(t,s){let i=0,e=0,n=0,r=0,h=0;for(const o of t){if(-1===o.jg()){const t=s(o);o.Vg(t.height),o.Hg(t.fontBoundingBoxAscent||0),o.Ug(t.fontBoundingBoxDescent||0),o.qg(t.zg||0),o.Jg()?o.Yg(t.width):o.Xg()&&o.Kg(this.kg)}i+=o.jg(),e=Math.max(e,o.Zg()),n=Math.max(n,o.Qg()),r=Math.max(r,o.ty()),h=Math.max(h,o.sy())}return{width:i,height:e,fontBoundingBoxAscent:n,fontBoundingBoxDescent:r,zg:h}}iy(t,s,i,e,n,r){this.Lg.push(il.Un(il.Fg.ey,{ny:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:n,zg:r}))}Fg(t,s,i,e,n){if("string"==typeof t&&(t=[il.Un(il.Pg,{Ag:il.Um(t)})]),il.bh(this.Lg),!t.length||1===t.length&&t[0].Jg()&&t[0].Ru()||i<2)return;if(1===t.length){const e=t[0];if(e.Jg()&&e.hy()<=100&&!e.oy()){let{width:t,height:r,fontBoundingBoxAscent:h,fontBoundingBoxDescent:o,zg:a}=s(e);if(t+=n,e.Yg(t),e.Vg(r),e.Hg(h||0),e.Ug(o||0),e.qg(a||0),t<=i)return void this.iy([e],t,r,h,o,a)}}let r;r="word"===e?this.ly(t):"cjk"===e?this.uy(t):this.py(t),this.my(r,s,i,n)}ly(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Pg,{Ag:["\n"],Ig:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Pg,{Ag:[r],Ig:t})),e=Ka(r);else{const n=Ka(r);if(n===e){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(il.Un(il.Pg,{Ag:[r],Ig:t}))}else s.push(i),i=[il.Un(il.Pg,{Ag:[r],Ig:t})],e=n}}return i.length>0&&s.push(i),s}uy(t){const s=[];let i=[],e=!1;for(const n of t){const t=n.gy();if(n.Xg())i.length>0&&s.push(i),s.push([n]),i=[];else for(const r of n.yy())if(sl(r))i.length>0&&s.push(i),s.push([il.Un(il.Pg,{Ag:["\n"],Ig:t})]),i=[];else if(0===i.length)i.push(il.Un(il.Pg,{Ag:[r],Ig:t})),e=Za(r);else if(e||Qa(r)){const s=i.at(-1);s.gy()===t?s.wy(r):i.push(il.Un(il.Pg,{Ag:[r],Ig:t})),e=Za(r)}else s.push(i),i=[il.Un(il.Pg,{Ag:[r],Ig:t})],e=Za(r)}return i.length>0&&s.push(i),s}py(t){const s=[];for(const i of t)if(i.Jg()){const t=i.yy();il.On(s,t.map((t=>[il.Un(il.Pg,{Ag:[t],Ig:i.gy()})])))}else s.push([i]);return s}Sy(t){return t.map((t=>t.by()))}vy(t,s){const i=t.length?t.at(-1):null;let e=0;i&&i.Jg()&&s[0].Jg()&&s[0].gy()===i.gy()&&(i.My(s[0].yy()),e=1);for(let i=s.length;e<i;++e){const i=s[e];t.push(i.by())}}my(t,s,i,e){let n=[],r=0,h=0,o=0,a=0,l=0;for(const e of t){if(1===e.length&&e[0].Jg()&&1===e[0].hy()&&sl(e[0].yy()[0])){if(0===h){const t=s(il.Un(il.Pg,{Ag:[" "],Ig:e[0].gy()}));h=t.height,o=t.fontBoundingBoxAscent||0,a=t.fontBoundingBoxDescent||0,l=t.zg||0}this.iy(n,r,h,o,a,l),n=[],r=0,h=0,o=0,a=0,l=0;continue}const t=this.Sy(n);this.vy(t,e);const u=this.Wg(t,s),c=u.width;if(c>=i)if(n.length>0&&this.iy(n,r,h,o,a,l),n=[],e[0].Jg()&&il.bm(e[0].yy()))r=0,h=0,o=0,a=0,l=0;else{this.vy(n,e);const t=this.Wg(n,s);r=t.width,h=t.height,o=t.fontBoundingBoxAscent,a=t.fontBoundingBoxDescent,l=t.zg}else n=t,r=c,h=u.height,o=u.fontBoundingBoxAscent,a=u.fontBoundingBoxDescent,l=u.zg}n.length>0&&this.iy(n,r,h,o,a,l),this.xy(s,e)}xy(t,s){for(const i of this.Lg){const e=i.Gy();if(!e.length)continue;let n=e.at(-1);if(n.Jg()){const r=n.yy(),h=r.slice(0);if(tl(h),0===h.length)i.Ty(-n.jg()),e.pop();else if(h.length<r.length){n.Cy(h);const s=t(n).width,e=n.jg()-s;n.Yg(s),i.Ty(-e)}0!==s&&e.length>0&&(n=e.at(-1),n.Ty(s),i.Ty(s))}}}Eu(){il.bh(this.Lg)}Iy(){return this.Lg.reduce(((t,s)=>Math.max(t,s.jg())),0)}_y(){return this.Lg.reduce(((t,s)=>t+s.Zg()),0)}}}{const nl=self.Is;nl.Fg.ey=class{constructor(t){this.Gg=t.ny||[],this.Ey=t.width||-1,this.Ry=t.height||-1,this.Py=t.fontBoundingBoxAscent||-1,this.Ay=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Dy=0,this.Fy=0}ny(){return this.Gg.values()}*Ly(){const t=this.Gg;for(let s=t.length-1;s>=0;--s)yield t[s]}Gy(){return this.Gg}Ty(t){this.Ey+=t}jg(){return this.Ey}Zg(){return this.Ry}ky(){return this.Py}ty(){return this.Ay}sy(){return this.Oy}Ny(t){this.Dy=t}$y(){return this.Dy}By(t){this.Fy=t}Wy(){return this.Fy}}}{const rl=self.Is;rl.jy=class{constructor(t){this.Vy=t.Ig||[],this.Ey=t.width||-1,this.Ry=t.height||-1,this.Py=t.fontBoundingBoxAscent||-1,this.Ay=t.fontBoundingBoxDescent||-1,this.Oy=t.zg||-1,this.Dy=0,this.Fy=0}Jg(){return!1}Xg(){return!1}gy(){return this.Vy}Hy(t){const s=this.Vy;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}Uy(t){return!!this.Hy(t)}qy(){const t=new Map;for(const s of this.Vy)t.set(s.tag,s._g);return t}Ty(t){this.Ey+=t}Yg(t){this.Ey=t}jg(){return this.Ey}Vg(t){this.Ry=t}Zg(){return this.Ry}Hg(t){this.Py=t}Qg(){return this.Py}Ug(t){this.Ay=t}ty(){return this.Ay}qg(t){this.Oy=t}sy(){return this.Oy}Ny(t){this.Dy=t}$y(){return this.Dy}By(t){this.Fy=t}Wy(){return this.Fy}}}{const hl=self.Is;hl.Pg=class extends hl.jy{constructor(t){super(t),this.zy=t.Ag}Jg(){return!0}My(t){hl.On(this.zy,t),this.Ey=-1,this.Ry=-1,this.Py=-1,this.Ay=-1,this.Oy=-1}wy(t){this.zy.push(t)}by(){return hl.Un(hl.Pg,{Ag:this.zy.slice(0),Ig:this.Vy,width:this.Ey,height:this.Ry,fontBoundingBoxAscent:this.Py,fontBoundingBoxDescent:this.Ay,zg:this.Oy})}yy(){return this.zy}Cy(t){this.zy=t}hy(){return this.zy.length}Ru(){return 0===this.zy.length}oy(){return this.zy.includes("\n")}}}{const ol=self.Is;ol.Rg=class extends ol.jy{constructor(t){super(t),this.Jy=t.icon}Xg(){return!0}Yy(){return this.Jy}by(){return ol.Un(ol.Rg,{icon:this.Jy,Ig:this.Vy,width:this.Ey,height:this.Ry,fontBoundingBoxAscent:this.Py,fontBoundingBoxDescent:this.Ay,zg:this.Oy})}Xy(t){if(!t)return null;let s=Number(this.Jy);return String(s)===this.Jy?(s=Math.floor(s),t.Ky(s)):t.Zy(this.Jy)}Kg(t){const s=this.Xy(t);this.Ey=s?this.Ry*s.jg()/s.Zg():0}Qy(t){const s=this.Xy(t);return s?s.Qy():null}hy(){return 1}}}{const al=self.Is;al.tw=class{constructor(t){this.sw=new Map,this.iw=t.ew,this.rw=t.hw}qn(){for(const t of this.sw.values())t.qn();this.sw.clear()}ow(t){let s=this.sw.get(t);if(s)return s;const i=this.iw(t);return s=al.Un(al.aw,this,{source:t,lw:i}),this.sw.set(t,s),s}uw(t){return this.sw.has(t)}cw(t){const s=this.sw.get(t);s&&s.qn(),this.sw.delete(t)}async fw(t){return await this.rw(t)}}}{const ll=self.Is;ll.aw=class{constructor(t,s){this.dw=t,this.pw=s.source,this.mw=[],this.gw=new Map,this.yw=!1,this.ww=!1,this.Sw=null;const i=s.lw.bw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=ll.Un(ll.Mw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.mw.push(e),s.tag&&this.gw.set(s.tag.toLowerCase(),e)}}qn(){for(const t of this.mw)t.qn();ll.bh(this.mw),this.gw.clear(),this.dw=null,this.pw=null}xw(){return this.yw}Gw(){return this.ww}Tw(){return this.Sw||(this.Sw=this.Cw()),this.Sw}async Cw(){if(this.yw)return;this.yw=!0,this.ww=!0;const t=await this.dw.fw(this.pw);if(!this.dw)return;const s=t.bw;for(let t=0,i=Math.min(s.length,this.mw.length);t<i;++t){const i=s[t].Iw;this.mw[t]._w(i)}this.ww=!1}Ky(t){return(t=Math.floor(t))<0||t>=this.mw.length?null:this.mw[t]}Zy(t){return this.gw.get(t.toLowerCase())||null}}}{const ul=self.Is;ul.Mw=class{constructor(t,s){this.Ew=t,this.pw=s.source||null,this.Rw=s.index,this.Pw=s.tag,this.Ey=s.width,this.Ry=s.height,this.Aw=null}qn(){this.Ey=0,this.Ry=0,this.Ew=null}Ow(){return this.pw}jg(){return this.Ey}Zg(){return this.Ry}_w(t){this.Aw=t}Qy(){return this.Aw}}}{let cl=function(t,s,i,e){const n=vl;gl.O(Sl,i,s),gl.O(bl,t,s),gl.Ct(n,Sl,bl),gl.normalize(n,n),e.set(n[0],n[1],n[2],gl.Tt(t,n))},fl=function(t,s,i,e,n,r,h){const o=h.x,a=h.y,l=h.z,u=h.w,c=h.Dw,f=h.Fw,d=h.Lw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*n*m+l*i*d+l*r*g>=u||o*e*c+o*t*p+a*n*f+a*s*m+l*r*d+l*i*g>u},dl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};PlaneFromPoints=cl,IsInFrontOfPlane=fl,IsPointInFrontOfPlane=dl;const pl=self.Is,ml=self.ls,gl=ml.ws,yl=ml.Ss,wl=ml.ds,Sl=gl.create(),bl=gl.create(),vl=gl.create(),Ml=yl.create(),xl=wl.create(),Gl=gl.create(),Tl=gl.create(),Cl=gl.create(),Il=gl.create(),_l=gl.create(),El=gl.create(),Rl=gl.create(),Pl=gl.create(),Al=yl.v(0,0,1,1);pl.kw={Nw(t,s,i,e,n,r,h){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=n[0]*o+n[4]*a+n[8]*l+n[12]*u,f=n[1]*o+n[5]*a+n[9]*l+n[13]*u,d=n[2]*o+n[6]*a+n[10]*l+n[14]*u,p=n[3]*o+n[7]*a+n[11]*l+n[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,h[0]=(.5*c+.5)*r[2]+r[0],h[1]=(.5*f+.5)*r[3]+r[1],h[2]=.5*(1+d),!0)},$w(t,s,i,e,n,r,h){const o=xl,a=Ml;return wl.multiply(o,n,e),null!==wl.G(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,yl.Pt(a,a,o),0!==a[3]&&(a[3]=1/a[3],h[0]=a[0]*a[3],h[1]=a[1]*a[3],h[2]=a[2]*a[3],!0))},Bw(t,s,i,e,n,r,h){const o=Sl,a=bl;if(!pl.kw.$w(t,s,0,e,n,r,o))return!1;if(!pl.kw.$w(t,s,1,e,n,r,a))return!1;const l=bl;gl.O(l,a,o);const u=vl;gl.set(u,0,0,1);const c=-i,f=gl.Tt(u,l);let d=0;if(0===f){if(0!==gl.Tt(u,o)+c)return!1}else if(d=-(gl.Tt(o,u)+c)/f,d<0)return!1;return gl.bt(h,o,l,d),!0}};class Ol{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Dw=NaN,this.Fw=NaN,this.Lw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Dw=t>0?1:0,this.Fw=s>0?1:0,this.Lw=i>0?1:0}}pl.kw.Ww=class{constructor(){this.jw=new Ol,this.Vw=new Ol,this.Hw=new Ol,this.Uw=new Ol,this.qw=new Ol,this.zw=new Ol}Jw(t,s){const i=Al;pl.kw.$w(0,1,0,t,s,i,Gl),pl.kw.$w(1,1,0,t,s,i,Tl),pl.kw.$w(0,0,0,t,s,i,Cl),pl.kw.$w(1,0,0,t,s,i,Il),pl.kw.$w(0,1,1,t,s,i,_l),pl.kw.$w(1,1,1,t,s,i,El),pl.kw.$w(0,0,1,t,s,i,Rl),pl.kw.$w(1,0,1,t,s,i,Pl),cl(Cl,Gl,_l,this.jw),cl(Gl,Tl,El,this.Vw),cl(Tl,Il,Pl,this.Hw),cl(Il,Cl,Rl,this.Uw),cl(Rl,_l,El,this.zw),cl(Il,Tl,Gl,this.qw)}Yw(t,s,i,e,n,r){return fl(t,s,i,e,n,r,this.jw)&&fl(t,s,i,e,n,r,this.Vw)&&fl(t,s,i,e,n,r,this.Hw)&&fl(t,s,i,e,n,r,this.Uw)&&fl(t,s,i,e,n,r,this.qw)&&fl(t,s,i,e,n,r,this.zw)}Xw(t,s,i){return!dl(t,s,i,this.qw)}}}{const Dl=self.Is,Fl=self.ls,Ll=Fl.ws,kl=Fl.Ss,Nl=Fl.ds,$l=Nl.create(),Bl=Ll.v(0,0,0),Wl=Ll.v(0,0,0),jl=Ll.v(0,0,0),Vl=Ll.v(0,1,0),Hl=kl.v(0,0,0,0),Ul=new Dl._l,ql=new Dl.Rect,zl=new Dl._l(0,0,1,0,1,1,0,1),Jl={Kw:1,Zw:1e4},Yl=Nl.v(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Dl.kw.Qw=class{constructor(t){t=Object.assign({},Jl,t),this.Ey=0,this.Ry=0,this.tS=Dl.Qn(45),this.sS=Math.tan(this.tS/2),this.iS=Nl.create(),this.eS=Nl.create(),this.nS=!1,this.rS=t.Kw,this.hS=t.Zw,this.oS=[],this.aS=new Map,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.bS=null,this.vS=new Map,this.MS=null,this.xS=[],this.GS=new Map,this.TS=0,this.CS=0,this.IS=1,this._S=[this.IS],this.ES=1,this.RS=[this.ES],this.PS=.5,this.AS=[this.PS],this.OS=0,this.DS=!0,this.FS=!1}LS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}kS(){this.TS=0,this.CS=0,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.wS=null,this.SS=null,this.bS=null,this.NS()}$S(){this.kS(),this.MS=null}BS(){for(const t of this.oS)t.qn();this.kS()}jg(){return this.Ey}Zg(){return this.Ry}WS(t){return this.jS()?100:t/(2*this.VS())}HS(t){return this.jS()?t/(2*this.VS())/this.WS(t):1}US(t){this.rS=t}qS(){return this.rS}zS(t){this.hS=t}JS(){return this.hS}YS(t){this.tS=t,this.sS=Math.tan(this.tS/2)}XS(){return this.tS}VS(){return this.sS}KS(){this.nS=!1}ZS(){this.nS=!0}jS(){return!this.nS}QS(){return this.nS}tb(t,s,i=.5,e=.5){const n=this.qS(),r=this.JS(),h=this.XS();if(.5===i&&.5===e)this.sb()?Nl.ut(t,h,s,n,r):Nl.perspective(t,h,s,n,r);else{const h=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.VS()*n,c=u*s;Nl.ot(t,h*c,o*c,a*u,l*u,n,r),this.sb()&&Nl.mul(t,Yl,t)}}ib(t,s,i,e=1){const n=self.devicePixelRatio,r=2*this.WS(i)*n*this.VS()/i,h=s*r/(2*n*e),o=i*r/(2*n*e),a=-h,l=h,u=-o,c=o;this.sb()?Nl.gt(t,a,l,u,c,this.qS(),this.JS()):Nl.dt(t,a,l,u,c,this.qS(),this.JS())}eb(t,s,i,e,n,r=1){let h=1;this.jS()&&(h=200*this.VS()/n);const o=jl;Ll.set(o,h,-h,1);const a=Bl,l=Wl;Ll.multiply(a,s,o),Ll.multiply(l,i,o),Nl.yt(t,a,l,e||Vl),o[2]=r,Nl.scale(t,t,o)}nb(t,s,i,e,n,r,h,o){return Ll.set(Bl,t,s,i),Ll.set(Wl,e,n,r),this.eb($l,Bl,Wl,Vl,h,o),$l}rb(t){this.oS.push(t),this.aS.set(t.Ec(),t)}hb(t){const s=this.oS.indexOf(t);-1!==s&&this.oS.splice(s,1),this.aS.delete(t.Ec())}NS(){Dl.bh(this.oS),this.aS.clear()}ob(t){return this.aS.get(t)||null}ab(){return this.lS}lb(){this.ub(this.lS)}cb(){return this.uS}fb(){this.ub(this.uS)}pb(){this.ub(this.cS)}mb(){this.ub(this.fS)}gb(){this.ub(this.dS)}yb(){this.ub(this.pS)}wb(){this.ub(this.mS)}Sb(){this.ub(this.gS)}bb(){this.ub(this.yS)}Mb(){this.ub(this.wS)}xb(){this.ub(this.SS)}Gb(){this.ub(this.bS)}Tb(t){this.MS=t}Cb(){return this.MS}Ib(t,s,i,e){const n=Dl.kw.Eb._b(t,s,i,e);let r=this.vS.get(n);return r||(r=Dl.Un(Dl.kw.Eb,this,t,s,i,e),this.vS.set(n,r)),r.Rb(),r}Pb(t){t.Ab(),0===t.Ob()&&(this.MS===t&&(this.MS=null),this.vS.delete(t.Db()),t.qn())}Fb(t){Dl.bh(this.xS),this.GS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],n=i[2];this.xS.push([e,n]),this.GS.set(t,{number:s,Lb:e,kb:n}),s++}}Nb(t){return this.xS[t]}$b(t){return this.Nb(t)[0]}Bb(t){return this.Nb(t)[1]}Wb(t){const s=this.GS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}jb(t){const s=this.GS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Vb(t){this.TS=t}Hb(){return this.TS}Ub(t){this.CS=t,this.MS=null}qb(){return this.CS}ey(t,s,i,e){const n=Dl.rr(t,s,i,e),r=Math.sin(n),h=Math.cos(n),o=.5*this.IS,a=r*o,l=h*o,u=this.ES;2===u?this.zb(t,s,0,i,e,0,a,l):1===u?this.Jb(t,s,0,i,e,0,a,l):this.Yb(t,s,0,i,e,0,a,l)}Xb(t,s,i,e,n,r){const h=Dl.rr(t,s,e,n),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.ES;2===f?this.zb(t,s,i,e,n,r,u,c):1===f?this.Jb(t,s,i,e,n,r,u,c):this.Yb(t,s,i,e,n,r,u,c)}zb(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=2*o,p=2*h,m=l+h,g=u-o,y=l-h+d,w=u+o+p,S=c+h,b=f-o,v=c-h-d,M=f+o-p;this.Kb(m,g,i,S,b,r,v,M,r,y,w,i,zl)}Jb(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a-o,u=s+a-h,c=e+a+o,f=n+a+h,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.Kb(d,p,i,y,w,r,S,b,r,m,g,i,zl)}Yb(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a,u=s+a,c=e+a,f=n+a,d=l+h,p=u-o,m=l-h,g=u+o,y=c+h,w=f-o,S=c-h,b=f+o;this.Kb(d,p,i,y,w,r,S,b,r,m,g,i,zl)}Zb(t,s,i,e,n,r){const h=Dl.rr(t,s,i,e),o=Math.sin(h),a=Math.cos(h),l=.5*this.IS,u=o*l,c=a*l,f=this.ES;2===f?this.Qb(t,s,i,e,u,c,n,r):1===f?this.tv(t,s,i,e,u,c,n,r):this.sv(t,s,i,e,u,c,n,r)}Qb(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=2*r,p=2*n,m=l+n,g=u-r,y=l-n+d,w=u+r+p,S=c+n,b=f-r,v=c-n-d,M=f+r-p;Ul.set(m,g,S,b,v,M,y,w),ql.set(h,0,o,0),this.ev(Ul,ql)}tv(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a-r,u=s+a-n,c=i+a+r,f=e+a+n,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;Ul.set(d,p,y,w,S,b,m,g),ql.set(h,0,o,0),this.ev(Ul,ql)}sv(t,s,i,e,n,r,h,o){const a=this.PS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+n,p=u-r,m=l-n,g=u+r,y=c+n,w=f-r,S=c-n,b=f+r;Ul.set(d,p,y,w,S,b,m,g),ql.set(h,0,o,0),this.ev(Ul,ql)}nv(t,s,i,e){const n=.5*this.IS,r=this.ES;2===r?this.rv(t,s,i,e,n):1===r?this.hv(t,s,i,e,n):this.ov(t,s,i,e,n)}rv(t,s,i,e,n){this.zb(t,s,0,i,s,0,0,n),this.zb(i,s,0,i,e,0,n,0),this.zb(i,e,0,t,e,0,0,-n),this.zb(t,e,0,t,s,0,-n,0)}hv(t,s,i,e,n){this.Jb(t,s,0,i,s,0,0,n),this.Jb(i,s,0,i,e,0,n,0),this.Jb(i,e,0,t,e,0,0,-n),this.Jb(t,e,0,t,s,0,-n,0)}ov(t,s,i,e,n){this.Yb(t,s,0,i,s,0,0,n),this.Yb(i,s,0,i,e,0,n,0),this.Yb(i,e,0,t,e,0,0,-n),this.Yb(t,e,0,t,s,0,-n,0)}av(t){this.nv(t.Za(),t.Qa(),t.tl(),t.sl())}lv(t){const s=Dl.rr(t.$r(),t.Br(),t.Wr(),t.jr()),i=Math.sin(s),e=Math.cos(s),n=.5*this.IS,r=i*n,h=e*n,o=this.ES;2===o?this.uv(t,r,h):1===o?this.cv(t,r,h):this.fv(t,r,h)}uv(t,s,i){this.zb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.zb(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.zb(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.zb(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}cv(t,s,i){this.Jb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Jb(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.Jb(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.Jb(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}fv(t,s,i){this.Yb(t.$r(),t.Br(),0,t.Wr(),t.jr(),0,s,i),this.Yb(t.Wr(),t.jr(),0,t.Vr(),t.Hr(),0,i,-s),this.Yb(t.Vr(),t.Hr(),0,t.Ur(),t.qr(),0,-s,-i),this.Yb(t.Ur(),t.qr(),0,t.$r(),t.Br(),0,-i,s)}dv(t){this.IS=t,this._S[this._S.length-1]=t}pv(){return this.IS}mv(t){if(this._S.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this._S.push(t),this.IS=t}gv(){if(this._S.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this._S.pop(),this.IS=this._S.at(-1)}yv(){this.ES=0,this.RS[this.RS.length-1]=0}wv(){this.ES=1,this.RS[this.RS.length-1]=0}Sv(){this.ES=2,this.RS[this.RS.length-1]=0}bv(t){if("butt"===t)this.vv();else if("square"===t)this.Mv();else{if("zag"!==t)throw new Error("invalid line cap");this.xv()}}vv(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(0),this.ES=0}Mv(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(1),this.ES=1}xv(){if(this.RS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.RS.push(2),this.ES=2}Gv(){if(this.RS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.RS.pop(),this.ES=this.RS.at(-1)}Tv(t){this.PS=t,this.AS[this.AS.length-1]=t}Cv(){return this.PS}Iv(t){if(this.AS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.AS.push(t),this.PS=t}_v(){if(this.AS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.AS.pop(),this.PS=this.AS.at(-1)}Ev(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,n=t[0],r=t[1];for(let s=0;s<i;s+=2){const i=2*s,h=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Rv(n,r,h,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Rv(n,r,h,o,a,l,s,e)}}}Pv(){return 3}Av(){this.Ov(!0),this.OS++}Dv(){return this.OS}Fv(){this.OS++}Lv(t){this.DS=!!t}kv(){return this.DS}Nv(t){this.FS=!!t}$v(){return this.FS}Bv(){return!1}sb(){return!1}Wv(){}jv(){}Vv(){}Hv(){return this.Wv()+this.jv()+this.Vv()}Uv(){return Dl.Un(Dl.kw.qv,this)}}}{const Xl=self.Is;Xl.kw.zv=class{constructor(t,s){this.Yn=s.name,this.Jv=t,this.Yv=s.Xv||0,this.Kv=s.Zv||0,this.Qv=!!s.tM,this.sM=!!s.iM,this.eM=!!s.nM,this.rM=!!s.hM,this.oM=!!s.animated,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!1,this.dM=this.Qv||this.aM||0!==this.Yv||0!==this.Kv}qn(){this.Jv=null}pM(){return this.Jv}Ec(){return this.Yn}mM(){return 0!==this.Yv||0!==this.Kv}gM(){return this.Yv}yM(){return this.Kv}wM(){return this.Qv}SM(){return this.sM}bM(){return this.eM}vM(){return this.rM}MM(){return this.oM}xM(){return this.aM}GM(){return this.uM}TM(){return this.fM}CM(){return this.dM}IM(){return!1}}}{const Kl=self.Is;Kl.kw.Eb=class{constructor(t,s,i,e,n){this.Jv=t,this.Hp=0,this._M=null,this.EM="",this.RM=i,this.PM=Kl.Un(Kl.Go),this.PM.set(e),this.AM=n,"string"==typeof s?this.EM=s:(this._M=s,this.EM=this._M.Ec())}qn(){if(this.Hp>0)throw new Error("releasing state group still in use");this.Jv=null,this._M=null,this.EM=""}OM(){const t=this.Jv;t.ub(this._M),t.DM(this.RM),t.FM(this.PM),t.Ub(this.AM),t.Tb(this)}Db(){return Kl.kw.Eb._b(this.EM,this.RM,this.PM,this.AM)}Rb(){++this.Hp}Ab(){--this.Hp}Ob(){return this.Hp}LM(){this._M=null}kM(t){if(this._M=t.ob(this.EM),!this._M)throw new Error("failed to restore shader program")}static _b(t,s,i,e){return("string"==typeof t?t:t.Ec())+","+s+","+i.No()+","+i.$o()+","+i.Bo()+","+i.Wo()+","+e}}}{let Zl=function(t,s,i){const e=i.$r(),n=i.Br(),r=i.Wr()-e,h=i.jr()-n;return[e+r*t+(i.Ur()-e)*s,n+h*t+(i.qr()-n)*s]};interpolateQuad=Zl;const Ql=self.Is,tu=Ql.Un(Ql._l);Ql.kw.NM=class{constructor(t,s,i){this.$M=t,this.BM=s,this.WM=i,this.Ea=NaN,this.Ra=NaN,this.AM=NaN,this.jM=NaN,this.VM=NaN,this.Ea=0,this.Ra=0,this.AM=0,this.jM=0,this.VM=0}HM(t,s,i,e){this.Ea=t,this.Ra=s,this.jM=i,this.VM=e}UM(){return this.Ea}qM(t){this.Ea!==t&&(this.Ea=t,this.$M.zM())}JM(){return this.Ra}YM(t){this.Ra!==t&&(this.Ra=t,this.$M.zM())}XM(){return this.AM}KM(t){this.AM!==t&&(this.AM=Math.max(t,0),this.$M.zM())}ZM(){return this.jM}QM(t){this.jM=t}tx(){return this.VM}sx(t){this.VM=t}ix(t,s,i){[this.Ea,this.Ra]=Zl(t.Ea,t.Ra,s),this.AM=t.AM,this.jM=Ql.It(i.Za(),i.tl(),t.jM),this.VM=Ql.It(i.Qa(),i.sl(),t.VM)}nx(t,s,i){[this.Ea,this.Ra]=Zl(t.Ea,t.Ra,s),this.AM=t.AM,[this.jM,this.VM]=Zl(t.jM,t.VM,i)}hx(){return{x:this.UM(),y:this.JM(),z:this.XM(),u:this.ZM(),v:this.tx()}}ox(t){this.qM(t.x),this.YM(t.y),t.hasOwnProperty("z")&&this.KM(t.z),this.QM(t.u),this.sx(t.v)}lx(){return this.$M}ux(){return this.BM}mx(){return this.WM}},Ql.kw.gx=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.yx=t,this.wx=s,this.Sx=i||null,this.bx=[],this.vx=0,this.Mx=0,this.xx=1,this.Gx=1,this.Tx=0,this.Cx=!1;const e=t-1,n=s-1;for(let i=0;i<s;++i){const s=[];for(let r=0;r<t;++r){const t=Ql.Un(Ql.kw.NM,this,r,i),h=r/e,o=i/n;t.HM(h,o,h,o),s.push(t)}this.bx.push(s)}}qn(){Ql.bh(this.bx)}Ix(){return this.yx}_x(){return this.wx}Ex(){return this.Sx}Rx(){return this.bx}zM(){this.Cx=!0}Px(){if(!this.Cx)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,n=0;for(const r of this.bx)for(const h of r){const r=h.UM(),o=h.JM();t=Math.min(t,r),s=Math.min(s,o),i=Math.max(i,r),e=Math.max(e,o),n=Math.max(n,h.XM())}this.vx=t,this.Mx=s,this.xx=i,this.Gx=e,this.Tx=n,this.Cx=!1}Ax(){return this.Px(),this.vx}Ox(){return this.Px(),this.Mx}Dx(){return this.Px(),this.xx}Fx(){return this.Px(),this.Gx}Lx(){return this.Px(),this.Tx}kx(){return this.Lx()>0}Nx(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.yx||s<0||s>=this.wx?null:this.bx[s][t]}$x(t,s,i){const e=i instanceof Ql.Rect;if(t.Ix()!==this.Ix()||t._x()!==this._x())throw new Error("source mesh wrong size");const n=t.bx,r=this.bx;for(let t=0,h=r.length;t<h;++t){const h=n[t],o=r[t];for(let t=0,n=o.length;t<n;++t){const n=h[t],r=o[t];e?r.ix(n,s,i):r.nx(n,s,i)}}}Bx(t){const s=this.bx;let i=s[0];for(let e=1,n=s.length;e<n;++e){const n=s[e];let r=i[0],h=n[0];for(let s=1,e=n.length;s<e;++s){const e=i[s],o=n[s];tu.set(r.ZM(),r.tx(),e.ZM(),e.tx(),o.ZM(),o.tx(),h.ZM(),h.tx()),t.Kb(r.UM(),r.JM(),r.XM(),e.UM(),e.JM(),e.XM(),o.UM(),o.JM(),o.XM(),h.UM(),h.JM(),h.XM(),tu),r=e,h=o}i=n}}Wx(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.bx;let e=i[0];for(let n=1,r=i.length;n<r;++n){const h=i[n];let o=e[0],a=h[0];for(let i=1,l=h.length;i<l;++i){const u=e[i],c=h[i],[f,d,p]=s(o.UM(),o.JM(),o.XM()),[m,g,y]=s(u.UM(),u.JM(),u.XM()),[w,S,b]=s(c.UM(),c.JM(),c.XM()),[v,M,x]=s(a.UM(),a.JM(),a.XM());t.Xb(f,d,p,m,g,y),t.Xb(f,d,p,w,S,b),t.Xb(f,d,p,v,M,x),i===l-1&&t.Xb(m,g,y,w,S,b),n===r-1&&t.Xb(v,M,x,w,S,b),o=u,a=c}e=h}}jx(t){const s=.001,i=.99999999,e=t.du(),n=[],r=this.Ix()-1,h=this._x()-1,o=1/r,a=1/h,l=r-1,u=h-1;let c=e[0],f=e[1],d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u),m=!0,g=0,y=0,w=0,S=-1;const b=()=>{c=Ql.Kn(Ql.It(c,g,w),0,1),f=Ql.Kn(Ql.It(f,y,w),0,1),n.push(c,f)};for(let t=0,v=e.length;t<v;t+=2){c=e[t],f=e[t+1],n.push(c,f),d=Ql.Kn(Math.floor(c*r),0,l),p=Ql.Kn(Math.floor(f*h),0,u);const M=(t+2)%v;for(g=e[M],y=e[M+1],S=-1;;){if(n.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,r=(d+1)*o,h=(p+1)*a;if(m=Ql.Xr(c,f,t,e,r,e,r,h),0!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,h,-.001),w>=0&&w<=i))b(),m=!m,S=0;else if(p>0&&2!==S&&(w=Ql.Yr(c,f,g,y,t,e,r,e,s),w>=0&&w<=i))b(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=Ql.Yr(c,f,g,y,r,e,r,h,s),w>=0&&w<=i))b(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=Ql.Yr(c,f,g,y,t,e,t,h,s),w>=0&&w<=i))b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=Ql.Yr(c,f,g,y,t,h,r,h,s),w>=0&&w<=i)))break;b(),p++,m=!0,S=2}}}return Ql.Un(Ql.au,n)}Vx(t,s){const i=this.Hx(t);this.Ux(i),s.mu(i)}Hx(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],n=i[t+1],[r,h]=this.qx(e,n);s.push(r,h)}return s}qx(t,s){const i=this.Ix()-1,e=this._x()-1,n=1/i,r=1/e,h=Ql.Kn(Math.floor(t*i),0,i-1),o=Ql.Kn(Math.floor(s*e),0,e-1),a=h*n,l=o*r,u=(h+1)*n,c=(o+1)*r,f=this.Nx(h,o),d=this.Nx(h+1,o+1),p=Ql.Xr(t,s,a,l,u,l,u,c),m=p?a+n:a,g=p?l:l+r,y=this.Nx(h+(p?1:0),o+(p?0:1)),[w,S,b]=Ql.Kr(t,s,a,l,m,g,u,c);return Ql.Zr(w,S,b,f.UM(),f.JM(),f.XM(),y.UM(),y.JM(),y.XM(),d.UM(),d.JM(),d.XM())}Ux(t){const s=[],i=1e-7;let e=t[0],n=t[1],r=e-t.at(-2),h=n-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-n,p=Math.abs(f)<i&&Math.abs(r)<i&&Math.sign(d)===Math.sign(h),m=Math.abs(d)<i&&Math.abs(h)<i&&Math.sign(f)===Math.sign(r);(!p&&!m&&Math.abs(f/r-d/h)>.001||0==f&&0===d)&&s.push(e,n),e=u,n=c,r=f,h=d}s.length>=6&&s.length<t.length&&Ql.Th(t,s)}hx(){return{cols:this.Ix(),rows:this._x(),points:this.bx.map((t=>t.map((t=>t.hx()))))}}ox(t){const s=this.Ix(),i=this._x();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.Nx(e,t).ox(i[e])}}}}{let su=function(t,s){let i,e,n,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,n=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,n=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,n=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{zx:i,Jx:e,format:n,type:r}};GetFormatSpecifiers=su;const iu=self.Is,eu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),nu=new Set(["nearest","bilinear","trilinear"]),ru=new Set(["default","low","high"]),hu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),ou={Yx:"clamp-to-edge",Xx:"clamp-to-edge",Kx:"trilinear",Zx:0,Qx:"rgba8",tG:!0,sG:"default",iG:!0,eG:!1,width:-1,height:-1},au={iG:!0,flipY:!1},lu=new Set;iu.kw.nG=class{constructor(t){this.Jv=t,this.rG=null,this.Ey=0,this.Ry=0,this.hG=!0,this.oG="clamp-to-edge",this.aG="clamp-to-edge",this.lG="trilinear",this.uG=0,this.cG="rgba8",this.fG=!1,this.dG="default",this.Hp=0}pG(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer||null===t))throw new Error("invalid texture source");if(s=Object.assign({},ou,s),this.rG)throw new Error("already created texture");if(this.oG=s.Yx,this.aG=s.Xx,this.lG=s.Kx,this.uG=s.Zx,this.cG=s.Qx,this.fG=!!s.tG&&this.Jv.kv(),this.dG=s.sG,!hu.has(this.oG)||!hu.has(this.aG))throw new Error("invalid wrap mode");if(!nu.has(this.lG))throw new Error("invalid sampling");if(!eu.has(this.cG))throw new Error("invalid pixel format");if(!ru.has(this.dG))throw new Error("invalid mipmap quality");if(this.hG=!0,t instanceof ArrayBuffer||null===t||s.eG){if(this.Ey=s.width,this.Ry=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.Ey*this.Ry*4)throw new Error("ArrayBuffer wrong size")}else this.Ey=t.width,this.Ry=t.height;if(this.Ey<=0||this.Ry<=0)throw new Error("invalid texture data size");if(s.eG){const s=iu.co(this.Ey,this.Ry);s.getContext("2d").drawImage(t,0,0,this.Ey,this.Ry),t=s}const i=iu.br(this.Ey)&&iu.br(this.Ry),e=this.Jv.mG();if(this.Ey>e||this.Ry>e)throw new Error("texture data exceeds maximum texture size");const n=this.Jv.gG(),r=this.Jv.yG();this.rG=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.rG),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.iG),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const h=su(this.cG,n);if(this.Jv.wG()||i||!this.SG())if(r>=2){let s;s=this.fG?Math.floor(Math.log2(Math.max(this.Ey,this.Ry))+1):1,n.texStorage2D(n.TEXTURE_2D,s,h.zx,this.Ey,this.Ry),t instanceof ArrayBuffer?n.texSubImage2D(n.TEXTURE_2D,0,0,0,this.Ey,this.Ry,h.format,h.type,new Uint8Array(t)):null!==t&&n.texSubImage2D(n.TEXTURE_2D,0,0,0,h.format,h.type,t)}else t instanceof ArrayBuffer?n.texImage2D(n.TEXTURE_2D,0,h.Jx,this.Ey,this.Ry,0,h.format,h.type,new Uint8Array(t)):null===t?n.texImage2D(n.TEXTURE_2D,0,h.Jx,this.Ey,this.Ry,0,h.format,h.type,null):n.texImage2D(n.TEXTURE_2D,0,h.Jx,h.format,h.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.Ey,this.Ry)),t instanceof ImageData){const s=iu.co(this.Ey,this.Ry);s.getContext("2d").putImageData(t,0,0),t=s}const s=iu.co(iu.vr(this.Ey),iu.vr(this.Ry)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.lG,i.drawImage(t,0,0,this.Ey,this.Ry,0,0,s.width,s.height),n.texImage2D(n.TEXTURE_2D,0,h.Jx,h.format,h.type,s)}null!==t&&this.bG(n),n.bindTexture(n.TEXTURE_2D,null),this.Jv.vG(),this.Hp=1,lu.add(this)}MG(t,s,i){if(i=Object.assign({},ou,i),this.rG)throw new Error("already created texture");if(this.oG=i.Yx,this.aG=i.Xx,this.lG=i.Kx,this.cG=i.Qx,this.fG=!!i.tG&&this.Jv.kv(),this.dG=i.sG,!hu.has(this.oG)||!hu.has(this.aG))throw new Error("invalid wrap mode");if(!nu.has(this.lG))throw new Error("invalid sampling");if(!eu.has(this.cG))throw new Error("invalid pixel format");if(!ru.has(this.dG))throw new Error("invalid mipmap quality");this.hG=!1,this.Ey=Math.floor(t),this.Ry=Math.floor(s);const e=iu.br(this.Ey)&&iu.br(this.Ry),n=this.Jv.mG();if(this.Ey<=0||this.Ry<=0)throw new Error("invalid texture size");if(this.Ey>n||this.Ry>n)throw new Error("texture exceeds maximum texture size");if(!this.Jv.wG()&&this.SG()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Jv.gG(),h=this.Jv.yG();this.rG=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.rG),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.iG),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);const o=su(this.cG,r),a=h>=2?o.zx:o.Jx;r.texImage2D(r.TEXTURE_2D,0,a,this.Ey,this.Ry,0,o.format,o.type,null),this.bG(r),r.bindTexture(r.TEXTURE_2D,null),this.Jv.vG(),this.Hp=1,lu.add(this)}xG(t){if("default"===this.dG)return this.hG?t.NICEST:t.FASTEST;if("low"===this.dG)return t.FASTEST;if("high"===this.dG)return t.NICEST;throw new Error("invalid mipmap quality")}SG(){return"clamp-to-edge"!==this.oG||"clamp-to-edge"!==this.aG}GG(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}bG(t){const s=iu.br(this.Ey)&&iu.br(this.Ry);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.GG(t,this.oG)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.GG(t,this.aG)),"nearest"===this.lG)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.fG=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Jv.wG())&&this.fG){t.hint(t.GENERATE_MIPMAP_HINT,this.xG(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.lG&&!this.Jv.$v();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.fG=!1;const i=this.Jv.TG();i&&this.uG>0&&"nearest"!==this.lG&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.uG,this.Jv.CG()))}IG(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.rG||this.Hp<=0)throw new Error("texture not created");if(this.hG)throw new Error("cannot update static texture");s=Object.assign({},au,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,n=this.Jv.yG(),r=this.Jv.gG();r.bindTexture(r.TEXTURE_2D,this.rG),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.iG),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const h=su(this.cG,r),o=n>=2?h.zx:h.Jx;try{if(this.Ey===i&&this.Ry===e){const s=iu.br(this.Ey)&&iu.br(this.Ry);r.texSubImage2D(r.TEXTURE_2D,0,0,0,h.format,h.type,t),(s||this.Jv.wG())&&this.fG&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xG(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Ey=i,this.Ry=e;const s=iu.br(this.Ey)&&iu.br(this.Ry);if(!this.Jv.wG()&&this.SG()&&!s)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,h.format,h.type,t),(s||this.Jv.wG())&&this.fG&&(r.hint(r.GENERATE_MIPMAP_HINT,this.xG(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Jv.vG()}_G(){if(this.Hp>0)throw new Error("texture still has references");if(!this.rG)throw new Error("already deleted texture");lu.delete(this),this.Jv.gG().deleteTexture(this.rG),this.rG=null}EG(){return!!this.rG}PG(){return this.rG}pM(){return this.Jv}AG(){this.Hp++}OG(){if(this.Hp<=0)throw new Error("no more references");this.Hp--}DG(){return this.Hp}jg(){return this.Ey}Zg(){return this.Ry}FG(){return this.hG}LG(){let t=this.Ey*this.Ry;switch(this.cG){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.fG&&(t+=Math.floor(t/3)),t}static LM(){lu.clear()}static kG(){return lu.values()}}}{const uu=self.Is,cu=self.assert,fu=self.ls,du=fu.ws,pu=fu.ds,mu=new Set(["nearest","bilinear","trilinear"]),gu={Kx:"trilinear",alpha:!0,depth:!1,NG:!0,$G:!0,BG:0},yu=new Set;uu.kw.WG=class{constructor(t){this.Jv=t,this.jG=null,this.VG=null,this.rG=null,this.HG=null,this.Ey=0,this.Ry=0,this.UG=!0,this.lG="trilinear",this.qG=!0,this.zG=!1,this.JG=!0,this.YG=0,this.XG=pu.create(),this.KG=0,this.ZG=0,this.QG=0}tT(t,s,i){i=Object.assign({},gu,i);const e=this.Jv.yG();if(this.rG||this.HG)throw new Error("already created render target");if(this.lG=i.Kx,this.qG=!!i.alpha,this.zG=!!i.depth,this.JG=!!i.NG,this.UG=!!i.$G,this.YG=i.BG,!mu.has(this.lG))throw new Error("invalid sampling");if(this.YG>0&&(e<2||this.JG))throw new Error("invalid use of multisampling");if(e<2&&(this.JG=!0),this.Ey=t,this.Ry=s,this.Ey<=0||this.Ry<=0)throw new Error("invalid render target size");this.sT();const n=this.Jv.gG();if(this.jG=n.createFramebuffer(),this.zG&&(this.VG=n.createFramebuffer()),this.JG){this.rG=this.Jv.iT(this.Ey,this.Ry,{Kx:this.lG,Qx:this.qG?"rgba8":"rgb8",tG:!1});const t=this.rG.PG();n.bindFramebuffer(n.FRAMEBUFFER,this.jG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.zG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.VG),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0))}else{this.HG=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,this.HG);const t=this.qG?n.RGBA8:n.RGB8;if(this.YG>0){const s=n.getInternalformatParameter(n.RENDERBUFFER,t,n.SAMPLES);if(s&&s[0]){const t=s[0];this.YG>t&&(this.YG=t)}else this.YG=0}0===this.YG?n.renderbufferStorage(n.RENDERBUFFER,t,this.Ey,this.Ry):n.renderbufferStorageMultisample(n.RENDERBUFFER,this.YG,t,this.Ey,this.Ry),n.bindFramebuffer(n.FRAMEBUFFER,this.jG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.HG),this.zG&&(n.bindFramebuffer(n.FRAMEBUFFER,this.VG),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,this.HG)),n.bindRenderbuffer(n.RENDERBUFFER,null)}const r=this.Jv.eT();this.zG&&r&&(n.bindFramebuffer(n.FRAMEBUFFER,this.jG),this.Jv.nT()?n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,r,0):n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r)),n.bindFramebuffer(n.FRAMEBUFFER,null),yu.add(this)}rT(t,s){if(this.Ey===t&&this.Ry===s)return;this.Ey=t,this.Ry=s,this.sT();const i=this.Jv.gG();i.bindFramebuffer(i.FRAMEBUFFER,this.jG),this.rG?this.rG.IG(new ImageData(this.Ey,this.Ry)):(i.bindRenderbuffer(i.RENDERBUFFER,this.HG),i.renderbufferStorage(i.RENDERBUFFER,this.qG?i.RGBA8:i.RGB8,this.Ey,this.Ry),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.Jv.eT();this.zG&&e&&(this.Jv.nT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}_G(){if(!this.rG&&!this.HG)throw new Error("already deleted render target");yu.delete(this);const t=this.Jv.gG();this.rG?(t.bindFramebuffer(t.FRAMEBUFFER,this.jG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.zG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.VG),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Jv.hT(this.rG),this.rG=null):this.HG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.jG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.zG&&(t.bindFramebuffer(t.FRAMEBUFFER,this.VG),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.HG),this.HG=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.Jv.yG()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.jG),this.zG&&t.deleteFramebuffer(this.VG);const s=this.Jv.oT();s.aT=null,s.lT=null,this.jG=null}sT(){this.Jv.tb(this.XG,this.Ey/this.Ry),this.KG=this.Jv.XS(),this.ZG=this.Jv.qS(),this.QG=this.Jv.JS()}uT(){return this.jG}cT(){return this.VG}pM(){return this.Jv}fT(){return this.rG}dT(){return this.Jv.XS()===this.KG&&this.Jv.qS()===this.ZG&&this.Jv.JS()===this.QG||this.sT(),this.XG}pT(){return"nearest"!==this.lG}mT(){return this.qG}gT(){return this.JG}yT(){return this.zG}jg(){return this.Ey}Zg(){return this.Ry}wT(){return this.UG}ST(){return this.YG}bT(){const t={Kx:this.lG,alpha:this.qG,NG:this.JG};return this.UG||(t.width=this.Ey,t.height=this.Ry),t}vT(t){return"nearest"!==(t=Object.assign({},gu,t)).Kx===this.pT()&&!!t.alpha===this.mT()&&!!t.depth===this.yT()&&!(this.Jv.yG()>=2&&!!t.NG!==this.gT())&&("number"==typeof t.width||"number"==typeof t.height?!this.wT()&&this.jg()===Math.floor(t.width)&&this.Zg()===Math.floor(t.height):this.wT())}MT(){return this.rG?this.rG.PG():null}LG(){return this.rG?this.rG.LG():this.Ey*this.Ry*(this.qG?4:3)}static async xT(t,s){const i=await t.GT(s,!0);return await uu.po(i)}static LM(){yu.clear()}static TT(){return yu.values()}static CT(t,s){for(const i of yu)i.wT()&&i.rT(t,s)}}}{const wu=self.Is,Su=self.ls,bu=Su.ws,vu=Su.ds,Mu=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);wu.kw.IT=class extends wu.kw.zv{static async _T(t,s){const i=t.gG(),e=s.src,n=s.ET,r=s.name,h=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(h,e),i.compileShader(h);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,n),i.compileShader(o);const a=i.createProgram();i.attachShader(a,h),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a);const l=t.RT();if(l?await t.PT((()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR))):await wu.ph(5),!i.getShaderParameter(h,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(h);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(h),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=wu.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!wu.Sm(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(h),i.deleteShader(o),a}static async AT(t,s){const i=await wu.kw.IT._T(t,s);return new wu.kw.IT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.gG(),n=t.oT();t.Ov(),e.useProgram(s),this.OT=e,this._M=s,this.DT="<default-device-transform>"===i.name;const r=e.getAttribLocation(s,"aPos"),h=e.getAttribLocation(s,"aTex");this.FT=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.LT),e.vertexAttribPointer(r,t.Pv(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==h&&(e.bindBuffer(e.ARRAY_BUFFER,t.kT),e.vertexAttribPointer(h,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(h)),-1!==this.FT&&(e.bindBuffer(e.ARRAY_BUFFER,t.NT),e.vertexAttribPointer(this.FT,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.FT)),e.bindBuffer(e.ARRAY_BUFFER,null),this.$T=new wu.kw.BT(this,"matP","mat4"),this.WT=new wu.kw.BT(this,"matMV","mat4"),this.jT=new wu.kw.BT(this,"color","vec4"),this.VT=new wu.kw.BT(this,"samplerFront","sampler"),this.HT=new wu.kw.BT(this,"pointTexStart","vec2"),this.UT=new wu.kw.BT(this,"pointTexEnd","vec2"),this.qT=new wu.kw.BT(this,"zElevation","float"),this.zT=new wu.kw.BT(this,"tileSize","vec2"),this.JT=new wu.kw.BT(this,"tileSpacing","vec2"),this.YT=new wu.kw.BT(this,"color2_","vec4"),this.XT=new wu.kw.BT(this,"outlineThickness","float"),this.KT=new wu.kw.BT(this,"samplerBack","sampler"),this.ZT=new wu.kw.BT(this,"samplerDepth","sampler"),this.QT=new wu.kw.BT(this,"destStart","vec2"),this.tC=new wu.kw.BT(this,"destEnd","vec2"),this.sC=new wu.kw.BT(this,"srcStart","vec2"),this.iC=new wu.kw.BT(this,"srcEnd","vec2"),this.eC=new wu.kw.BT(this,"srcOriginStart","vec2"),this.nC=new wu.kw.BT(this,"srcOriginEnd","vec2"),this.rC=new wu.kw.BT(this,"pixelSize","vec2"),this.hC=new wu.kw.BT(this,"seconds","float"),this.oC=new wu.kw.BT(this,"devicePixelRatio","float"),this.aC=new wu.kw.BT(this,"layerScale","float"),this.lC=new wu.kw.BT(this,"layerAngle","float"),this.uC=new wu.kw.BT(this,"layoutStart","vec2"),this.cC=new wu.kw.BT(this,"layoutEnd","vec2"),this.fC=new wu.kw.BT(this,"zNear","float"),this.dC=new wu.kw.BT(this,"zFar","float"),this.pC=!!(this.rC.mC()||this.hC.mC()||this.KT.mC()||this.QT.mC()||this.tC.mC()||this.sC.mC()||this.iC.mC()||this.eC.mC()||this.nC.mC()||this.oC.mC()||this.aC.mC()||this.lC.mC()||this.uC.mC()||this.cC.mC());const o=i.parameters||[];this.gC=[],this.fM=this.rC.mC()||this.sC.mC()||this.iC.mC()||this.eC.mC()||this.nC.mC(),this.yC=!1,this.wC=!1,this.jT.SC(1,1,1,1),this.YT.SC(1,1,1,1),this.VT.bC(0),this.KT.bC(1),this.ZT.bC(2),this.HT.vC(0,0),this.UT.vC(1,1),this.qT.MC(0),this.zT.vC(0,0),this.JT.vC(0,0),this.QT.vC(0,0),this.tC.vC(1,1),this.sC.vC(0,0),this.iC.vC(0,0),this.eC.vC(0,0),this.nC.vC(0,0),this.rC.vC(0,0),this.oC.MC(1),this.fC.MC(t.qS()),this.dC.MC(t.JS()),this.aC.MC(1),this.lC.MC(0),this.hC.MC(0),this.uC.vC(0,0),this.cC.vC(0,0),this.XT.MC(1);for(const t of o){const s=t[0],i=t[2],e=new wu.kw.BT(this,s,i);"color"===i?e.xC(0,0,0):e.MC(0),this.gC.push(e)}this.DT?this.GC(n.TC):(this.CC(n.TC,!0),this.IC(n._C,!0));const a=n.EC;e.useProgram(a?a._M:null)}qn(){this.OT.deleteProgram(this._M),this._M=null,this.Jv.hb(this),this.OT=null,super.qn()}RC(){return this.OT}PC(){return this._M}AC(){return this.gC.length}OC(t){return t<0||t>=this.gC.length?null:this.gC[t].DC()}FC(t){for(let s=0,i=t.length;s<i;++s)if(!this.gC[s].LC(t[s]))return!1;return!0}kC(t){for(let s=0,i=t.length;s<i;++s)this.gC[s].NC(t[s])}$C(t,s,i,e,n,r,h,o,a,l){return!(this.KT.mC()||this.rC.mC()&&!this.rC.BC(n,r)||this.QT.mC()&&!this.QT.BC(t.Za(),t.Qa())||this.tC.mC()&&!this.tC.BC(t.tl(),t.sl())||this.oC.mC()&&!this.oC.WC(h)||this.aC.mC()&&!this.aC.WC(o)||this.lC.mC()&&!this.lC.WC(a)||this.sC.mC()&&!this.sC.BC(s.Za(),s.Qa())||this.iC.mC()&&!this.iC.BC(s.tl(),s.sl())||this.eC.mC()&&!this.eC.BC(i.Za(),i.Qa())||this.nC.mC()&&!this.nC.BC(i.tl(),i.sl())||this.uC.mC()&&!this.uC.BC(e.Za(),e.Qa())||this.cC.mC()&&!this.cC.BC(e.Qa(),e.sl())||this.hC.mC()&&!this.hC.WC(l))}jC(t,s,i,e,n,r,h,o,a,l){this.KT.mC()||(this.rC.mC()&&this.rC.VC(n,r),this.QT.mC()&&this.QT.VC(t.Za(),t.Qa()),this.tC.mC()&&this.tC.VC(t.tl(),t.sl()),this.oC.mC()&&this.oC.HC(h),this.aC.mC()&&this.aC.HC(o),this.lC.mC()&&this.lC.HC(a),this.sC.mC()&&this.sC.VC(s.Za(),s.Qa()),this.iC.mC()&&this.iC.VC(s.tl(),s.sl()),this.eC.mC()&&this.eC.VC(i.Za(),i.Qa()),this.nC.mC()&&this.nC.VC(i.tl(),i.sl()),this.uC.mC()&&this.uC.VC(e.Za(),e.Qa()),this.cC.mC()&&this.cC.VC(e.Qa(),e.sl()),this.hC.mC()&&this.hC.HC(l))}CC(t,s){this.yC&&!s||this.DT||(this.$T.mC()&&this.$T.UC(t),this.yC=!0)}qC(){this.yC=!1}IC(t,s){this.wC&&!s||this.DT||(this.WT.mC()&&this.WT.UC(t),this.wC=!0)}zC(){this.wC=!1}GC(t){if(!this.DT)throw new Error("not device transform shader");this.$T.UC(t);const s=this.Jv,i=s.jg()/2,e=s.Zg()/2,n=s.nb(i,e,s.WS(s.Zg()),i,e,0,s.Zg());this.WT.UC(n)}JC(t){this.jT.mC()&&this.jT.YC(t[0],t[1],t[2],t[3])}static XC(){return Mu}static KC(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static ZC(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static QC(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","}"].join("\n")}static tI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static sI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static iI(t){return["#version 300 es",wu.kw.IT.KC(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static eI(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static nI(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static rI(t){return["#version 300 es",wu.kw.IT.KC(t),"in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static hI(t,s,i,e){let n="";return t>=2?n="#version 300 es\n"+wu.kw.IT.KC(e):(s&&(n="#extension GL_EXT_frag_depth : enable\n"),i&&(n+="#extension GL_EXT_shader_texture_lod : enable\n",n+="#extension GL_OES_standard_derivatives : enable\n")),n+`\n#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nprecision highmedp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\nuniform lowp vec4 color;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= color;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static oI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static aI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static lI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static uI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static cI(t){return["#version 300 es",wu.kw.IT.KC(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static fI(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static dI(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static pI(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {","\thighmedp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static mI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static gI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static yI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static wI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static SI(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const xu=self.Is,Gu=self.ls,Tu=Gu.ds,Cu=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);xu.kw.BT=class{constructor(t,s,i){if(!Cu.has(i))throw new Error("invalid uniform type");this.Sx=t,this.OT=this.Sx.RC(),this.Yn=s,this.qc=i,this.bI="color"===this.qc,this.vI=this.OT.getUniformLocation(this.Sx.PC(),s),this.MI=!!this.vI;const e=Cu.get(i);this.xI=new Float32Array(e),this.GI=new Float32Array(e)}qn(){this.Sx=null,this.OT=null,this.vI=null}mC(){return this.MI}DC(){return this.qc}TI(){return this.bI}MC(t){this.mC()&&(this.xI[0]=t,this.GI.set(this.xI),this.OT.uniform1f(this.vI,t))}bC(t){this.mC()&&(this.xI[0]=t,this.GI.set(this.xI),this.OT.uniform1i(this.vI,t))}vC(t,s){this.mC()&&(this.xI[0]=t,this.xI[1]=s,this.GI.set(this.xI),this.OT.uniform2f(this.vI,t,s))}xC(t,s,i){this.mC()&&(this.xI[0]=t,this.xI[1]=s,this.xI[2]=i,this.GI.set(this.xI),this.OT.uniform3f(this.vI,t,s,i))}SC(t,s,i,e){this.mC()&&(this.xI[0]=t,this.xI[1]=s,this.xI[2]=i,this.xI[3]=e,this.GI.set(this.xI),this.OT.uniform4f(this.vI,t,s,i,e))}CI(t){t=Math.fround(t);const s=this.xI;s[0]!==t&&(s[0]=t,this.OT.uniform1f(this.vI,t))}II(t){const s=this.xI;s[0]!==t&&(s[0]=t,this.OT.uniform1i(this.vI,t))}_I(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.xI;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.OT.uniform2f(this.vI,t,s))}EI(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.xI;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.OT.uniform3f(this.vI,t,s,i))}YC(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const n=this.xI;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(n[0]=t,n[1]=s,n[2]=i,n[3]=e,this.OT.uniform4f(this.vI,t,s,i,e))}UC(t){const s=this.xI;Tu.D(s,t)||(xu.wh(s,t,0),this.OT.uniformMatrix4fv(this.vI,!1,t))}LC(t){const s=this.GI;return this.TI()?s[0]===Math.fround(t.No())&&s[1]===Math.fround(t.$o())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}NC(t){const s=this.GI;this.TI()?(s[0]=t.No(),s[1]=t.$o(),s[2]=t.Bo()):s[0]=t}WC(t){return this.GI[0]===Math.fround(t)}BC(t,s){const i=this.GI;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}HC(t){this.GI[0]=t}VC(t,s){const i=this.GI;i[0]=t,i[1]=s}}}{const Iu=self.Is,_u=self.ls,Eu=_u.Ss,Ru=_u.ds,Pu=0,Au=1,Ou=2,Du=3,Fu=4,Lu=5,ku=6,Nu=7,$u=8,Bu=9,Wu=10,ju=11,Vu=12,Hu=13,Uu=14,qu=15,zu=16,Ju=17,Yu=18,Xu=19,Ku=20,Zu=21,Qu=22,tc=23,sc=24,ic=25,ec=26,nc=27,rc=28,hc=29;Iu.kw.RI=class{constructor(t){this.AI=t,this._C=Ru.create(),this.TC=Ru.create(),this.aT=null,this.lT=null,this.OI=!1,this.DI=Eu.v(1,1,1,1),this.EC=null,this.FI=new Iu.Rect,this.clearColor=Iu.Un(Iu.Go,0,0,0,0)}},Iu.kw.LI=class{constructor(t){const s=new ArrayBuffer(96);this.qc=0,this.kI=t,this.OT=t.AI.gG(),this.NI=0,this.$I=0,this.BI=null,this.WI=new Float32Array(s,0,16),this.jI=new Float32Array(s,64,4),this.VI=new Float32Array(s,80,4),this.HI=[]}UI(t,s){this.qc=1,this.NI=t,this.$I=s}qI(){const t=this.OT;t.drawElements(t.TRIANGLES,this.$I,t.UNSIGNED_SHORT,this.NI)}zI(t){this.qc=2,this.BI=t}JI(){const t=this.OT,s=this.BI;t.bindTexture(t.TEXTURE_2D,s?s.PG():null)}YI(t){this.qc=3,t.Vo(this.jI,0)}XI(){const t=this.jI,s=this.kI;Eu.S(s.DI,t),s.EC.JC(t)}KI(t){this.qc=21,t.Vo(this.jI,0)}ZI(){const t=this.jI,s=this.kI.EC;s.YT.mC()&&s.YT.YC(t[0],t[1],t[2],t[3])}QI(t,s){this.qc=4,this.NI=t,this.$I=s}t_(){this.OT.blendFunc(this.NI,this.$I)}s_(t,s,i,e){this.qc=5;const n=this.jI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}i_(){const t=this.jI;this.OT.viewport(t[0],t[1],t[2],t[3])}e_(t){this.qc=6,Ru.S(this.WI,t)}n_(){const t=this.kI,s=t.AI.oS,i=t.EC,e=this.WI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.CC(e,!0):n.qC()}Ru.S(t.TC,e)}r_(t){this.qc=7,Ru.S(this.WI,t)}h_(){const t=this.kI,s=t.AI.oS,i=t.EC,e=this.WI;for(let t=0,n=s.length;t<n;++t){const n=s[t];n===i?n.IC(e,!0):n.zC()}Ru.S(t._C,e)}o_(t){this.qc=8,this.BI=t}a_(){const t=this.OT,s=this.BI,i=this.kI;s?(i.aT=s.uT(),i.lT=s.cT(),i.OI&&i.lT?t.bindFramebuffer(t.FRAMEBUFFER,i.lT):t.bindFramebuffer(t.FRAMEBUFFER,i.aT)):(i.aT=null,i.lT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}l_(t){this.qc=9,t.Vo(this.WI,0)}u_(t,s,i,e){this.qc=9;const n=this.WI;n[0]=t,n[1]=s,n[2]=i,n[3]=e}c_(){const t=this.OT,s=this.WI,i=this.kI.clearColor,e=s[0],n=s[1],r=s[2],h=s[3];i.zo(e,n,r,h)||(t.clearColor(e,n,r,h),i.Eo(e,n,r,h)),t.clear(t.COLOR_BUFFER_BIT)}f_(t){this.qc=15,t.Vo(this.WI,0)}d_(){const t=this.WI;this.kI.FI.set(t[0],t[1],t[2],t[3])}p_(t,s){this.qc=10,this.NI=t,this.$I=1,this.WI[0]=s}m_(){const t=this.OT,s=this.kI,i=s.AI.uS;t.useProgram(i._M),i.CC(s.TC,!1),i.IC(s._C,!1);const e=s.FI;i.HT.mC()&&i.HT._I(e.Za(),e.Qa()),i.UT.mC()&&i.UT._I(e.tl(),e.sl());const n=this.WI[0];if(i.qT.mC()&&i.qT.CI(n),i.jT.mC()){const t=s.DI;i.jT.YC(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.NI/4,this.$I),t.useProgram(s.EC._M)}g_(t){this.qc=11,this.BI=t}y_(){const t=this.OT,s=this.kI,i=this.BI;if(s.EC=i,t.useProgram(i._M),i.CC(s.TC,!1),i.IC(s._C,!1),i.jT.mC()){const t=s.DI;i.jT.YC(t[0],t[1],t[2],t[3])}}w_(){this.qc=12}S_(){const t=this.kI.EC,s=this.OT,i=this.WI,e=this.jI,n=this.VI;if(t.KT.mC()){const t=this.kI.AI,i=this.BI;t.b_!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.PG():null),t.b_=i,s.activeTexture(s.TEXTURE0))}t.rC.mC()&&t.rC._I(i[0],i[1]),t.QT.mC()&&t.QT._I(i[2],i[3]),t.tC.mC()&&t.tC._I(i[4],i[5]),t.oC.mC()&&t.oC.CI(this.$I),t.aC.mC()&&t.aC.CI(i[6]),t.lC.mC()&&t.lC.CI(i[7]),t.sC.mC()&&t.sC._I(i[12],i[13]),t.iC.mC()&&t.iC._I(i[14],i[15]),t.eC.mC()&&t.eC._I(n[0],n[1]),t.nC.mC()&&t.nC._I(n[2],n[3]),t.uC.mC()&&t.uC._I(e[0],e[1]),t.cC.mC()&&t.cC._I(e[2],e[3]),t.hC.mC()&&t.hC.CI(this.NI)}v_(){this.qc=13}M_(){const t=this.kI.EC.gC,s=this.HI;for(let i=0,e=t.length;i<e;++i){const e=t[i],n=s[i];e.TI()?e.EI(n.No(),n.$o(),n.Bo()):e.CI(n)}}x_(t){this.qc=14,this.BI=t}G_(){const t=this.OT,s=this.BI,i=this.kI.aT;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}T_(t,s,i){this.qc=17;const e=this.WI,n=this.kI.AI;e[0]=t.jg(),e[1]=t.Zg(),e[2]=s?s.jg():n.jg(),e[3]=s?s.Zg():n.Zg(),e[4]=t.pT()?1:0,e[5]="stretch"===i;const r=this.HI;Iu.bh(r),r.push(t.uT()),r.push(s?s.uT():null)}C_(){const t=this.WI,s=this.HI,i=this.OT,e=t[0],n=t[1],r=t[2],h=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,n,0,0,r,h,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,r),s=Math.min(n,h),o=Math.max(n-h,0),a=Math.max(h-n,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}I_(t){this.qc=18,this.BI=t}__(){this.BI.E_(),this.BI=null}R_(t){this.qc=19,this.BI=t}P_(){this.BI.A_(),this.BI=null}O_(t,s,i){this.qc=20;const e=this.WI;e[0]=t,e[1]=s,e[2]=i}D_(){const t=this.kI.EC,s=this.WI;t.rC.mC()&&t.rC._I(s[0],s[1]),t.XT.mC()&&t.XT.CI(s[2])}F_(t,s,i,e,n,r,h){this.qc=16;const o=this.WI;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=n/i,o[8]=r/s,o[9]=h/i}L_(){const t=this.kI.EC,s=this.WI;t.sC.mC()&&t.sC._I(s[0],s[1]),t.rC.mC()&&t.rC._I(s[4],s[5]),t.zT.mC()&&t.zT._I(s[6],s[7]),t.JT.mC()&&t.JT._I(s[8],s[9])}k_(t,s,i,e,n,r,h){this.qc=29;const o=this.WI;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=n,o[5]=r,o[6]=h}N_(){const t=this.kI.EC,s=this.WI;t.rC.mC()&&t.rC._I(s[0],s[1]),t.zT.mC()&&t.zT._I(s[2],s[3]),t.XT.mC()&&t.XT.CI(s[4]),t.JT.mC()&&t.JT._I(s[5],s[6])}B_(t){this.qc=22,this.NI=t?1:0}W_(){const t=this.OT,s=0!==this.NI;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}j_(t){this.qc=23,this.NI=t?1:0}V_(){const t=this.OT;0===this.NI?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}H_(t){this.qc=24,this.NI=t?1:0}U_(){const t=this.OT,s=this.kI,i=s.AI,e=0!==this.NI;s.OI=e,t.activeTexture(t.TEXTURE2),e?(s.lT&&t.bindFramebuffer(t.FRAMEBUFFER,s.lT),t.bindTexture(t.TEXTURE_2D,i.eT())):(t.bindTexture(t.TEXTURE_2D,null),s.lT&&t.bindFramebuffer(t.FRAMEBUFFER,s.aT)),t.activeTexture(t.TEXTURE0)}q_(){this.qc=25}z_(){const t=this.OT;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}J_(){this.qc=26}Y_(){const t=this.OT;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}X_(){this.qc=27}K_(){const t=this.OT;t.disable(t.STENCIL_TEST)}Z_(t,s,i,e,n){this.qc=28,this.NI=t?1:0;const r=this.WI;r[0]=s,r[1]=i,r[2]=e,r[3]=n}Q_(){const t=this.OT,s=this.WI;1===this.NI?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}tE(){switch(this.qc){case 1:return void this.qI();case 2:return void this.JI();case 3:return void this.XI();case 4:return void this.t_();case 5:return void this.i_();case 6:return void this.n_();case 7:return void this.h_();case 8:return void this.a_();case 9:return void this.c_();case 10:return void this.m_();case 11:return void this.y_();case 12:return void this.S_();case 13:return void this.M_();case 14:return void this.G_();case 15:return void this.d_();case 16:return void this.L_();case 17:return void this.C_();case 18:return void this.__();case 19:return void this.P_();case 20:return void this.D_();case 21:return void this.ZI();case 22:return void this.W_();case 23:return void this.V_();case 24:return void this.U_();case 25:return void this.z_();case 26:return void this.Y_();case 27:return void this.K_();case 28:return void this.Q_();case 29:return void this.N_()}}}}{let oc=function(t,s,i,e,n,r){s?t.strokeRect(i,e,n,r):t.fillRect(i,e,n,r)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};fillOrStrokeRect=oc,ptToPx=ac,getOffsetParam=lc;const uc=self.Is,cc=4096,fc=4,dc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),pc={timeout:60},mc=new uc.Go(0,0,0,1),gc=new Set(["left","center","right"]),yc=new Set(["top","center","bottom"]),wc=new Set(["word","cjk","character"]),Sc=new Set(["ltr","rtl"]),bc=new Set;uc.sE&&uc.sE.addEventListener("fontload",(t=>{const s=t.font.Ec();for(const t of bc)(t.iE()||uc.Ze(t.eE(),s))&&t.nE()}));let vc=!1,Mc=!1;uc.kw.qv=class{constructor(t,s){s=Object.assign({},pc,s),this.Jv=t,this.rE="Arial",this.hE=16,this.oE=1,this.aE=0,this.lE=!1,this.uE=!1,this.cE="black",this.fE=!1,this.kg=null,this.dE=!0,this.pE=null,this.mE=new Set,this.gE="left",this.yE="top",this.$c="",this.wE=null,this.SE=uc.Un(uc.Fg),this.bE="word",this.vE="ltr",this.ME=!1,this.xE=!1,this.GE=!1,this.TE=-1,this.CE=0,this.IE=0,this._E=0,this.Ey=0,this.Ry=0,this.EE=1,this.RE=null,this.PE=null,this.AE=null,this.OE=null,this.DE=-1,this.FE=-1,this.LE="",this.kE="",this.NE="",this.$E=1,this.BE=1,this.WE=t=>this.jE(t),this.rG=null,this.VE=new uc.Rect,this.HE=1,this.UE=new uc.Df((()=>{this.qE(),this.zE(8,8)}),s.timeout),this.JE=null,this.YE=!1,bc.add(this)}qn(){this.pE=null,this.mE.clear(),this.kg=null,this.wE=null,this.RE=null,this.PE=null,this.AE=null,this.OE=null,this.WE=null,this.UE.qn(),this.JE=null,this.qE(),this.SE.Eu(),this.SE=null,this.Jv=null,this.YE=!0,bc.delete(this)}XE(){this.GE=!0}KE(){this.XE(),this.xE=!0}nE(){this.KE(),this.ME=!0}ZE(t){if(t=!!t,this.fE===t)return;this.fE=t;const s=this.fE?"alphabetic":"top";this.PE&&(this.PE.textBaseline=s),this.AE&&(this.AE.textBaseline=s),this.nE()}iE(){return this.fE}Bg(t){this.kg!==t&&(this.kg=t,this.SE.Bg(t),this.kg&&this.kg.Gw()&&this.kg.Tw().then((()=>this.XE())),this.nE())}QE(t){t=!!t,this.dE!==t&&(this.dE=t,this.XE())}tR(t){t||(t="serif"),this.rE!==t&&(this.rE=t,this.nE())}eE(){return this.rE}sR(t){t<.1&&(t=.1),this.hE!==t&&(this.hE=t,this.nE())}iR(){return this.hE}eR(t){this.oE!==t&&(this.oE=t,this.nE())}nR(t){this.aE!==t&&(this.aE=t,this.KE())}rR(){return this.aE}hR(t){t=!!t,this.lE!==t&&(this.lE=t,this.nE())}oR(){return this.lE}aR(t){t=!!t,this.uE!==t&&(this.uE=t,this.nE())}lR(){return this.uE}uR(t){t=Math.floor(t),this.TE!==t&&(this.TE=t,this.XE())}cR(){return this.TE}fR(t,s){let i=[];(this.lE||s.Uy("b"))&&i.push("bold"),(this.uE||s.Uy("i"))&&i.push("italic");const e=s.Hy("size"),n=(e?parseFloat(e._g):this.hE)*this.oE;t?i.push(n+"pt"):i.push(n*this.dR()+"pt");let r=this.rE;const h=s.Hy("font");return h&&h._g&&(r=h._g,this.pE&&!this.mE.has(r)&&(this.pE(r),this.mE.add(r))),r&&(dc.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}FM(t){t instanceof uc.Go&&(t=t.ta()),this.cE!==t&&(this.cE=t,this.XE())}pR(t,s,i){mc.Ro(t,s,i),this.FM(mc)}mR(t){if(!gc.has(t))throw new Error("invalid horizontal alignment");this.gE!==t&&(this.gE=t,this.KE())}gR(){return this.gE}yR(t){if(!yc.has(t))throw new Error("invalid vertical alignment");this.yE!==t&&(this.yE=t,this.KE())}wR(){return this.yE}SR(t){if(!wc.has(t))throw new Error("invalid word wrap mode");this.bE!==t&&(this.bE=t,this.nE())}bR(){return this.bE}vR(t){if(!Sc.has(t))throw new Error("invalid text direction");this.vE!==t&&(this.vE=t,this.PE&&(this.PE.direction=this.vE),this.AE&&(this.AE.direction=this.vE),this.nE())}MR(){return this.vE}jc(t){this.$c!==t&&(this.$c=t,this.nE())}xR(){return this.$c}dR(){return this.HE*this.EE*self.devicePixelRatio}GR(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.IE===t&&this._E===s&&this.EE===i)return;const e=this.IE;this.IE=t,this._E=s,this.EE=i;const n=self.devicePixelRatio;this.Ey=this.IE*this.EE*n,this.Ry=this._E*this.EE*n;const r=Math.max(this.Ey,this.Ry),h=Math.min(this.Jv.mG(),4096);let o=1;r>h&&(o=h/r,this.Ey=Math.min(this.Ey*o,h),this.Ry=Math.min(this.Ry*o,h)),this.HE=o,this.IE!==e?this.nE():this.KE()}jg(){return this.Ey}Zg(){return this.Ry}TR(){return this.EE}CR(){return this.IR(),this.SE.Iy()}_R(){return this.IR(),this.SE._y()+this.SE.$g()*(this.aE+4)-this.aE}ER(){this.IR();let t=0;for(const s of this.SE.Ng())for(const i of s.ny())t+=i.hy();return t}fT(){return this.UE.$f(),this.RR(),this.rG}PR(t,s){this.IR();const i=this.dR(),e=this.SE.Ng();for(const n of e){const e=n.ty()*i;if(s>=n.Wy()-n.Zg()*i+e&&s<n.Wy()+e)for(const s of n.ny())if(t>=s.$y()&&t<s.$y()+s.jg()*i)return s}return null}*AR(t){this.IR();const s=this.SE.Ng();for(const i of s)for(const s of i.ny()){const i=s.Hy("tag");i&&uc.Ze(i._g,t)&&(yield s)}}OR(t,s){for(const i of this.AR(t)){if(0===s)return i;--s}return null}DR(t){let s=0;for(const i of this.AR(t))++s;return s}RR(){(!this.rG||this.GE||this.xE||this.ME)&&(this.YE||this.Ey<=0||this.Ry<=0||(this.GE=!1,this.FR()))}FR(){this.YE||(this.IR(),this.zE(Math.max(uc.vr(Math.ceil(this.Ey)),128),Math.max(uc.vr(Math.ceil(this.Ry)),64)),this.LR(),this.kR(),this.UE.$f())}zE(t,s){this.RE||(this.RE=uc.co(16,16));let i=!1;this.DE===t&&this.FE===s||(this.DE=t,this.FE=s,this.RE.width=t,this.RE.height=s,i=!0),this.PE||(this.PE=this.RE.getContext("2d"),i=!0),i?(this.PE.textBaseline=this.fE?"alphabetic":"top",this.PE.direction=this.vE,this.PE.font=this.LE,this.PE.fillStyle=this.NE,this.PE.strokeStyle=this.NE,this.PE.globalAlpha=this.$E,this.PE.lineWidth=this.BE):this.PE.clearRect(0,0,t,s)}NR(){this.AE||(this.AE=uc.co(16,16).getContext("2d"),this.OE=uc.co(16,16).getContext("2d"),this.AE.textBaseline=this.fE?"alphabetic":"top",this.OE.textBaseline="top",this.AE.direction=this.vE,this.OE.direction=this.vE)}$R(t){this.kE!==t&&(this.kE=t,this.AE.font=t,this.OE.font=t)}BR(){if(!vc){vc=!0,this.NR();const t=this.AE.measureText("test");Mc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return Mc}IR(){this.WR(),this.jR()}WR(){this.ME&&(this.NR(),!this.fE||this.wE&&this.wE.toString()===this.$c||(this.wE=new uc.pn(this.$c,{dg:!0})),this.SE.Fg(this.fE?this.wE.Cg():this.$c,this.WE,this.IE,this.bE,0),this.ME=!1)}jR(){this.xE&&(this.VR(),this.xE=!1)}jE(t){const s=t.Jg()?t.yy().join(""):" ";this.$R(this.fR(!0,t));const i=t.Hy("size"),e=(i?parseFloat(i._g):this.hE)*this.oE,n=this.AE.measureText(s);let r=0;if(this.fE&&this.BR()){const t=this.OE.measureText(s);r=n.fontBoundingBoxAscent-t.fontBoundingBoxAscent}return{width:n.width,height:ac(e),fontBoundingBoxAscent:n.fontBoundingBoxAscent||0,fontBoundingBoxDescent:n.fontBoundingBoxDescent||0,zg:r}}HR(t){this.LE!==t&&(this.LE=t,this.PE.font=t)}UR(t){this.NE!==t&&(this.NE=t,this.PE.fillStyle=t,this.PE.strokeStyle=t)}qR(t){this.$E!==t&&(this.$E=t,this.PE.globalAlpha=t)}zR(t){this.BE!==t&&(this.BE=t,this.PE.lineWidth=t)}VR(){const t=this.dR(),s=(4+this.aE)*t;let i=0;const e=this.SE.Ng();if(0===e.length)return;for(const t of e){t.Ny(NaN),t.By(NaN);for(const s of t.ny())s.Ny(NaN),s.By(NaN)}const n=this.fE&&this.BR();let r=e[0].Zg()*t;if("center"===this.yE){const h=e.reduce(((i,e)=>i+e.Zg()*t+s),0)-s;i=Math.max(this.Ry/2-h/2,0),n&&(r=e[0].sy()*t)}else if("bottom"===this.yE){const r=e.reduce(((i,e)=>i+e.Zg()*t+s),0)-this.aE*t,h=n?e.at(-1).ty()*t:0;i=this.Ry-r-h-2}for(let n=0,h=e.length;n<h;++n){const h=e[n],o=h.Zg()*t,a=i;if(this.fE){if(i+=0===n?r:o,n>0&&i>this.Ry-4*t)break}else if(n>0&&i>=this.Ry-o)break;a>=0&&this.JR(h,i,t),this.fE||(i+=o),i+=s}}JR(t,s,i){let e=0;"center"===this.gE?e=Math.floor((this.Ey-t.jg()*i)/2):"right"===this.gE&&(e=this.Ey-t.jg()*i),t.Ny(e),t.By(s);for(const n of"ltr"===this.vE?t.ny():t.Ly())this.YR(n,e,s,i),e+=n.jg()*i}YR(t,s,i,e){const n=t.Hy("offsetx");s+=n?lc(n._g,t.Zg())*e:0;const r=t.Hy("offsety");if(i+=r?lc(r._g,t.Zg())*e:0,t.Xg()){const s=t.Hy("iconoffsety");i+=s?lc(s._g,t.Zg())*e:.2*t.Zg()*e}t.Ny(s),t.By(i)}LR(){this.PE.imageSmoothingEnabled=this.dE,this.PE.imageSmoothingQuality="high",this.CE=0;const t=this.dR(),s=this.SE.Ng();for(const i of s)this.XR(i,t)}XR(t,s){const i=t.$y(),e=t.Wy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.vE?t.ny():t.Ly())this.KR(i,s,t.Zg())}KR(t,s,i){const e=this.PE,n=t.$y(),r=t.Wy();if(!Number.isFinite(n)||!Number.isFinite(r))return;const h=i/16;let o=t.jg()*s;const a=t.Zg()*s,l=t.Zg()/16,u=(4+this.aE)*s;let c=t.Jg()?t.yy():null;if(-1!==this.TE){if(this.CE>=this.TE)return;t.Jg()&&this.CE+c.length>this.TE&&(c=c.slice(0,this.TE-this.CE),o=this.jE(t).width*s),this.CE+=t.hy()}const f=t.Hy("background"),d=t.Uy("u"),p=t.Uy("s");if(t.Jg()&&uc.bm(c)&&!f&&!d&&!p||t.Uy("hide"))return;const m=t.Hy("color"),g=t.Hy("opacity");this.qR(g?parseFloat(g._g)/100:1),f&&(this.UR(f._g),e.fillRect(n,r-a,o,a+u));const y=t.Hy("linethickness"),w=y?parseFloat(y._g):1,S=t.Uy("stroke");if(S&&this.zR(.5*l*w*this.dR()),t.Jg()){const s=c.join("");if(this.HR(this.fR(!1,t)),!S){this.zR(.5*l*w*this.dR());const i=t.Hy("outlineback");i&&(this.UR(i._g),this.ZR(!0,s,n,r,o))}if(this.UR(m?m._g:this.cE),this.ZR(S,s,n,r,o),!S){this.zR(.5*l*w*this.dR());const i=t.Hy("outline");i&&(this.UR(i._g),this.ZR(!0,s,n,r,o))}}else if(t.Xg()&&t.jg()>0){const s=t.Qy(this.kg);s&&e.drawImage(s,n,r-a,o,a)}if(this.UR(m?m._g:this.cE),d&&oc(e,S,n,r+s*h,o,s*h*w),p){const t=s*l,i=r-a/4+t/2;e.fillRect(n,i-t*w/2,o,t*w)}}ZR(t,s,i,e,n){"rtl"===this.vE&&(i+=n),t?"Gecko"===uc.Zs.ni?this.PE.strokeText(s,i,e,n):this.PE.strokeText(s,i,e):"Gecko"===uc.Zs.ni?this.PE.fillText(s,i,e,n):this.PE.fillText(s,i,e)}kR(){this.Jv.QR()||(this.rG||(this.rG=this.Jv.iT(this.RE.width,this.RE.height,{tG:!0,sG:"high"})),this.Jv.tP(this.RE,this.rG),this.VE.set(0,0,this.Ey/this.rG.jg(),this.Ry/this.rG.Zg()),this.JE&&this.JE())}sP(){return this.VE}qE(){this.rG&&(this.Jv.QR()||this.Jv.hT(this.rG),this.rG=null)}static LM(){for(const t of bc)t.qE()}static iP(){return bc.values()}}}{const xc=self.Is;class Gc{constructor(t){this.OT=t.gG(),this.eP=t.yG(),this.nP=t.rP(),this.hP=null,this.Nf=!1,this.oP=!1,this.aP=0,1===this.eP?this.hP=this.nP.createQueryEXT():this.hP=this.OT.createQuery()}qn(){this.lP(),this.OT=null,this.nP=null,this.oP=!1}lP(){this.hP&&(1===this.eP?this.nP.deleteQueryEXT(this.hP):this.OT.deleteQuery(this.hP),this.hP=null)}E_(){if(this.Nf)throw new Error("query already active");1===this.eP?this.nP.beginQueryEXT(this.nP.TIME_ELAPSED_EXT,this.hP):this.OT.beginQuery(this.nP.TIME_ELAPSED_EXT,this.hP),this.Nf=!0}A_(){if(!this.Nf)throw new Error("query not active");1===this.eP?this.nP.endQueryEXT(this.nP.TIME_ELAPSED_EXT):this.OT.endQuery(this.nP.TIME_ELAPSED_EXT),this.Nf=!1}uP(){if(!this.hP||this.oP||this.Nf)return;let t=!1;t=1===this.eP?this.nP.getQueryObjectEXT(this.hP,this.nP.QUERY_RESULT_AVAILABLE_EXT):this.OT.getQueryParameter(this.hP,this.OT.QUERY_RESULT_AVAILABLE);const s=this.OT.getParameter(this.nP.GPU_DISJOINT_EXT);t&&!s&&(1===this.eP?this.aP=this.nP.getQueryObjectEXT(this.hP,this.nP.QUERY_RESULT_EXT):this.aP=this.OT.getQueryParameter(this.hP,this.OT.QUERY_RESULT),this.aP/=1e9,this.oP=!0),(t||s)&&this.lP()}cP(){return this.oP}fP(){if(!this.oP)throw new Error("no result available");return this.aP}}xc.kw.dP=class{constructor(t){this.Jv=t,this.OS=t.Dv(),this.Nf=!1,this.pP=null,this.mP=!1,this.gP=null,this.yP=[]}qn(){for(const t of this.yP)t instanceof Gc&&t.qn();xc.bh(this.yP),this.pP=null,this.gP=null,this.Jv=null}E_(){if(this.Nf)throw new Error("query already active");const t=this.Jv.wP();t.length>0?(this.mP=!0,this.pP=t.at(-1),this.pP.SP(),this.pP.yP.push(this)):(this.mP=!1,this.pP=null),this.Nf=!0,t.push(this),this.bP()}A_(){if(!this.Nf)throw new Error("query not active");if(this.Jv.wP().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.SP(),this.pP&&(this.pP.bP(),this.pP=null)}bP(){this.gP=xc.Un(Gc,this.Jv),this.yP.push(this.gP),this.gP.E_()}SP(){this.gP.A_(),this.gP=null}uP(){for(const t of this.yP)t.uP()}vP(){return this.mP}cP(){return this.yP.every((t=>t.cP()))}fP(){return this.yP.reduce(((t,s)=>t+s.fP()),0)}Dv(){return this.OS}}}{const Tc=self.Is;Tc.kw.MP=class{constructor(t,s=1e3){this.Jv=t,this.xP=s,this.GP=[],this.Jv.TP(this)}qn(){this.Eu(),this.Jv.CP(this),this.Jv=null}Eu(){for(const t of this.GP)t.qn();Tc.bh(this.GP)}IP(){const t=new Tc.kw.dP(this.Jv);return this.GP.push(t),this.GP.length>this.xP&&this.GP.shift().qn(),t}_P(t){for(const s of this.GP){if(s.Dv()>=t)return;if(s.vP())return;s.uP()}}EP(t,s){if(s<=t)return NaN;let i=0;for(const e of this.GP){if(e.Dv()>=s)break;if(!(e.Dv()<t)){if(!e.cP())return NaN;i+=e.fP()}}return i}RP(t){for(let s=0,i=this.GP.length;s<i;++s){const i=this.GP[s];if(!(i.Dv()<t))return void(s>0&&this.GP.splice(0,s));i.qn()}}}}{let Cc=function(){zc=-1;for(const t of qc)t.PP()&&(t.resolve(),qc.delete(t));qc.size>0&&(zc=self.requestAnimationFrame(Cc))};CheckPendingPolls=Cc;const Ic=self.Is,_c=self.assert,Ec=self.ls,Rc=Ec.ws,Pc=Ec.Ss,Ac=Ec.ds,Oc={powerPreference:"default",AP:!0,alpha:!1,depth:!1,OP:!1,DP:2,failIfMajorPerformanceCaveat:!1},Dc=new Set(["default","low-power","high-performance"]),Fc=8e3,Lc=12e3,kc=8e3,Nc=7996,$c=262144,Bc=new Ic._l(0,0,1,0,1,1,0,1),Wc=Ac.create(),jc=Ac.create(),Vc=new Ic._l,Hc=new Ic.Rect;let Uc=null;Ic.Ls&&(self.FP=function(){Uc?Uc.loseContext():console.warn("WEBGL_lose_context not supported")},self.LP=function(){Uc?Uc.restoreContext():console.warn("WEBGL_lose_context not supported")});const qc=new Set;let zc=-1;Ic.kw.kP=class extends Ic.kw.Qw{constructor(t,s){if(super(s),s=Object.assign({},Oc,s),!Dc.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,n=0;if(s.DP>=2&&(e=t.getContext("webgl2",i),n=2),e||(e=t.getContext("webgl",i),n=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.OT=e,this.NP=e.getContextAttributes(),this.$P=e.getParameter(e.VERSION),this.eP=n,this.BP=Pc.create(),this.WP=!1,this.jP=Ac.create(),this.VP=!!s.depth,this.HP=!(!s.depth||!s.OP),this.UP=this.VP,this.qP=!1,this.zP=null,this.JP=!0,this.YP=0,this.XP=0,this.LT=null,this.kT=null,this.KP=null,this.NT=null,this.ZP=new Float32Array(8e3*this.Pv()),this.QP=new Uint16Array(12e3),this.tA=new Float32Array(16e3),this.sA=new Float32Array(32e3),this.iA=0,this.eA=0,this.nA=0,this.rA=0,this.hA=null,this.oA=null,this.aA=[],this.lA=0,this.uA=0,this.cA=null,this.fA=0,this.kI=Ic.Un(Ic.kw.RI,this),this.dA=Ic.Un(Ic.Go,1,1,1,1),this.pA=null,this.b_=null,this.mA=0,this.gA=0,this.yA=new Ic.Rect,this.wA=Ic.Un(Ic.Rect,0,0,-1,-1),this.SA=0,this.bA=-1,this.vA=0,this.MA=0,this.xA=0,this.GA="(unavailable)",this.TA="(unavailable)",this.CA=[],this.IA=!1,this._A=null,this.EA=null,this.RA=null,this.PA=null,this.AA=null,this.OA=null,this.DA=null,this.FA=0,this.LA=!!s.AP,this.nP=null,this.kA=new Set,this.NA=[],this.LS(this.QP)}Bv(){return!0}async $S(){super.$S();const t=this.OT,s=this.Pv();this.dA.Eo(1,1,1,1),this.pA=null,this.b_=null,this.iA=0,this.nA=0,this.rA=8e3*s-4*s,Ic.bh(this.aA),this.lA=0,this.uA=0,this.hA=null,this.cA=null,this.yA.set(0,0,1,1),this.fA=0;const i=this.kI;i.EC=null,i.aT=null,i.lT=null,Pc.set(i.DI,1,1,1,1),i.clearColor.Eo(0,0,0,0),i.FI.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.mA=t.ONE,this.gA=t.ONE_MINUS_SRC_ALPHA,this.$A(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.VP?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.UP=this.VP,this.qP=!1,this.NT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.NT),t.bufferData(t.ARRAY_BUFFER,this.sA.byteLength,t.DYNAMIC_DRAW),this.LT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.LT),t.bufferData(t.ARRAY_BUFFER,this.ZP.byteLength,t.DYNAMIC_DRAW),this.kT=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.kT),t.bufferData(t.ARRAY_BUFFER,this.tA.byteLength,t.DYNAMIC_DRAW),this.KP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.KP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.QP,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.bA=t.getParameter(t.MAX_TEXTURE_SIZE);const e=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.vA=e[0],this.MA=e[1];const n=t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);this.xA=n&&r?Math.min(n.precision,r.precision):0,this.MA>2048&&(this.MA=2048),this.CA=t.getSupportedExtensions();const h=t.getExtension("WEBGL_debug_renderer_info");if(h&&(this.GA=t.getParameter(h.UNMASKED_VENDOR_WEBGL),this.TA=t.getParameter(h.UNMASKED_RENDERER_WEBGL)),this._A=t.getExtension("KHR_parallel_shader_compile"),Ic.Ls&&(Uc=t.getExtension("WEBGL_lose_context")),this.LA&&(1===this.yG()?this.nP=t.getExtension("EXT_disjoint_timer_query"):this.nP=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.EA=t.getExtension("EXT_texture_filter_anisotropic"),this.EA?this.FA=t.getParameter(this.EA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.FA=0,this.yG()<2&&this.VP&&this.HP&&(this.PA=t.getExtension("WEBGL_depth_texture"),!this.PA))throw new Error("no depth texture support");this.yG()<2&&(this.AA=t.getExtension("EXT_frag_depth"),this.OA=t.getExtension("OES_standard_derivatives"),this.DA=t.getExtension("EXT_shader_texture_lod"));const o=Ic.kw.IT,a=o.ZC(!1);let l=o.tI(),u=a,c=o.lI(),f=o.oI(),d=o.eI(),p=o.ZC(!0),m=!1;this.VP&&(this.yG()<2?this.AA&&(l=o.sI(),c=o.uI(),d=o.nI(),m=!0):(u=o.QC(),l=o.iI(this.BA()),c=o.cI(this.BA()),f=o.aI(),d=o.rI(this.BA()),p=o.QC(!0)));const g=o.hI(this.yG(),m,this.OA&&this.DA,this.BA()),y=this.yG()>=2?o.QC():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.fI(),a,"<fill>"],[o.dI(),a,"<lineargradient>"],[o.pI(),a,"<penumbra>"],[o.gI(),a,"<hardellipse>"],[o.yI(),a,"<hardellipseoutline>"],[o.wI(),a,"<smoothellipse>"],[o.SI(),a,"<smoothellipseoutline>"],[o.mI(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map((t=>this.WA({src:t[0],ET:t[1],name:t[2]}))));this.lS=S[0],this.oA=S[1],this.uS=S[2],this.dS=S[3],this.pS=S[4],this.mS=S[5],this.gS=S[6],this.yS=S[7],this.wS=S[8],this.SS=S[9],this.bS=S[10],this.cS=S[11],this.fS=S[12],this.lb()}async WA(t){const s=await Ic.kw.IT.AT(this,t);return this.rb(s),s}jA(){this.hA=null}GR(t,s,i){if(this.Ey===t&&this.Ry===s&&!i)return;this.Ov();const e=this.OT,n=this.kI;this.Ey=t,this.Ry=s,this.VA(0,0,t,s),this.tb(this.jP,t/s),this.HA(this.jP),this.oA&&(e.useProgram(this.oA.PC()),this.oA.GC(this.iS),this.hA=this.oA,this.kI.EC=this.oA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.pA=null,this.b_=null,this.VP&&this.JP&&this.UA(this.Ey,this.Ry),this.cA&&this.cA.rT(this.Ey,this.Ry),e.bindFramebuffer(e.FRAMEBUFFER,null),this.cA=null,n.aT=null,n.lT=null}UA(t,s){const i=this.OT;this.zP&&this.YP===t&&this.XP===s||(this.HP?(this.zP&&i.deleteTexture(this.zP),this.zP=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.zP),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.yG()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.PA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.PA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.zP&&i.deleteRenderbuffer(this.zP),this.zP=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.zP),i.renderbufferStorage(i.RENDERBUFFER,this.eP>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.YP=t,this.XP=s)}qA(t,s){this.VP&&(this.JP=!1,this.UA(t,s))}zA(){this.VP&&(this.JP=!0,this.UA(this.Ey,this.Ry))}VA(t,s,i,e){const n=this.BP;n[0]===t&&n[1]===s&&n[2]===i&&n[3]===e||(this.JA().s_(t,s,i,e),Pc.set(n,t,s,i,e),this.uA=0)}YS(t){super.YS(t),this.tb(this.jP,this.Ey/this.Ry)}US(t){super.US(t),this.tb(this.jP,this.Ey/this.Ry)}zS(t){super.zS(t),this.tb(this.jP,this.Ey/this.Ry)}HA(t){Ac.D(this.iS,t)||(this.JA().e_(t),Ac.S(this.iS,t),this.uA=0,this.WP=!0)}YA(){let t,s,i;const e=this.cA;null===e?(t=this.jP,s=this.jg(),i=this.Zg()):(t=e.dT(),s=e.jg(),i=e.Zg()),this.HA(t),this.VA(0,0,s,i)}XA(t){Ac.D(this.eS,t)||(this.JA().r_(t),Ac.S(this.eS,t),this.uA=0,this.WP=!0)}KA(){this.WP=!1}ZA(){return this.WP}oT(){return this.kI}JA(){const t=this.aA;return this.lA===t.length&&t.push(new Ic.kw.LI(this.kI)),t[this.lA++]}Ov(){0!==this.lA&&(this.QR()||(this.QA(),this.tO(),this.lA=0,this.iA=0,this.eA=0,this.nA=0,this.uA=0))}QA(){const t=this.OT;this.nA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.NT),t.bufferSubData(t.ARRAY_BUFFER,0,this.sA.subarray(0,this.nA))),this.iA>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.LT),t.bufferSubData(t.ARRAY_BUFFER,0,this.ZP.subarray(0,this.iA)),t.bindBuffer(t.ARRAY_BUFFER,this.kT),t.bufferSubData(t.ARRAY_BUFFER,0,this.tA.subarray(0,this.eA)))}tO(){const t=this.aA;for(let s=0,i=this.lA;s<i;++s)t[s].tE()}sO(){return this.dA.Wo()}iO(t,s,i,e){const n=this.dA;n.zo(t,s,i,e)||(n.Eo(t,s,i,e),this.JA().YI(n),this.uA=0,this.MS=null)}eO(t){const s=this.dA;s.Wo()!==t&&(s.Lo(t),this.JA().YI(s),this.uA=0,this.MS=null)}FM(t){const s=this.dA;s.equals(t)||(s.set(t),this.JA().YI(s),this.uA=0,this.MS=null)}nO(){this.iO(1,1,1,1)}rO(){return this.dA}hO(t){t!==this.pA&&(this.JA().zI(t),this.pA=t,this.uA=0)}vG(){this.pA=null}DM(t){const s=this.Nb(t);this.oO(s[0],s[1])}aO(t){const s=this.Wb(t);this.oO(s.Lb,s.kb)}oO(t,s){t===this.mA&&s===this.gA||(this.JA().QI(t,s),this.mA=t,this.gA=s,this.uA=0,this.MS=null)}lO(){return this.mA===this.OT.ONE&&this.gA===this.OT.ONE_MINUS_SRC_ALPHA}uO(){this.oO(this.OT.ONE,this.OT.ONE_MINUS_SRC_ALPHA)}cO(){this.oO(this.OT.SRC_ALPHA,this.OT.ONE_MINUS_SRC_ALPHA)}fO(){this.oO(this.OT.ONE,this.OT.ZERO)}Rect(t){this.dO(t.Za(),t.Qa(),t.tl(),t.sl())}dO(t,s,i,e){this.Rv(t,s,i,s,i,e,t,e)}pO(){let t=this.iA;t>=this.rA&&(this.Ov(),t=0),1===this.uA?this.aA[this.lA-1].$I+=6:(this.JA().UI(t,6),this.uA=1)}mO(t){t.Jl(this.ZP,this.iA,this.TS+this.CS),this.iA+=12}_l(t){this.pO(),this.mO(t),Bc.Vo(this.tA,this.eA),this.eA+=8}Rv(t,s,i,e,n,r,h,o){this.pO();const a=this.ZP;let l=this.iA;const u=this.TS+this.CS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=n,a[l++]=r,a[l++]=u,a[l++]=h,a[l++]=o,a[l++]=u,this.iA=l,Bc.Vo(this.tA,this.eA),this.eA+=8}ev(t,s){this.pO(),this.mO(t),s.nl(this.tA,this.eA),this.eA+=8}gO(t,s){this.pO(),this.mO(t),s.Vo(this.tA,this.eA),this.eA+=8}yO(t,s,i,e,n,r,h,o,a,l,u,c,f){this.pO();const d=this.ZP;let p=this.iA;const m=this.TS+this.CS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iA=p,f.nl(this.tA,this.eA),this.eA+=8}Kb(t,s,i,e,n,r,h,o,a,l,u,c,f){this.pO();const d=this.ZP;let p=this.iA;const m=this.TS+this.CS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=n,d[p++]=m+r,d[p++]=h,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.iA=p,f.Vo(this.tA,this.eA),this.eA+=8}wO(t,s,i){const e=this.ZP,n=this.tA;if(i.length%3!=0)throw new Error("invalid index buffer length");for(let r=0,h=i.length;r<h;){const h=i[r++],o=i[r++],a=i[r++],l=3*h,u=3*o,c=3*a,f=2*h,d=2*o,p=2*a;this.pO();let m=this.iA,g=this.eA;e[m++]=t[l+0],e[m++]=t[l+1],e[m++]=t[l+2],e[m++]=t[u+0],e[m++]=t[u+1],e[m++]=t[u+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],e[m++]=t[c+0],e[m++]=t[c+1],e[m++]=t[c+2],n[g++]=s[f+0],n[g++]=s[f+1],n[g++]=s[d+0],n[g++]=s[d+1],n[g++]=s[p+0],n[g++]=s[p+1],n[g++]=s[p+0],n[g++]=s[p+1],this.iA=m,this.eA=g}}SO(t,s){this.Ub(0),Ac.S(Wc,this.iS),Ac.S(jc,this.eS),this.YA();const[i,e]=this.bO(this.cA),n=this.nb(0,0,this.WS(e),0,0,0,e);if(this.XA(n),"crop"===t&&this.cA&&s){const t=this.Ey/2,i=this.Ry/2,e=s.jg(),n=s.Zg(),r=this.cA.jg(),h=this.cA.Zg(),o=Math.min(r,e),a=Math.min(h,n),l=Math.max(n-h,0),u=Math.max(h-n,0);Hc.set(-t,i-u,-t+o,i-a-u),Vc.Yl(Hc),Hc.set(0,l,o,a+l),Hc.St(e,n),this.ev(Vc,Hc)}else{const t=i/2,s=e/2;this.dO(-t,s,t,-s)}this.HA(Wc),this.XA(jc)}vO(t){this.yA.equals(t)||(this.yA.S(t),this.JA().f_(t),this.uA=0)}MO(){}xO(t,s,i,e){this.nA>=7996&&this.Ov();let n=this.nA;const r=this.TS+this.CS;2===this.uA&&this.fA===r?this.aA[this.lA-1].$I++:(this.JA().p_(n,r),this.uA=2,this.fA=r);const h=this.sA;h[n++]=t,h[n++]=s,h[n++]=i,h[n++]=e,this.nA=n}ub(t){this.hA!==t&&(this.JA().g_(t),this.hA=t,this.uA=0,this.MS=null)}GO(){return this.hA}TO(){this.ub(this.oA)}CO(t){this.JA().KI(t),this.uA=0}IO(t,s,i=1){this.JA().O_(t,s,i),this.uA=0}_O(t,s,i,e,n,r,h){if(this.hA!==this.cS)throw new Error("must set tilemap fill mode first");this.JA().F_(t,s,i,e,n,r,h),this.uA=0}EO(t,s,i,e,n,r,h){if(this.hA!==this.fS)throw new Error("must set tile randomization mode first");this.JA().k_(t,s,i,e,n,r,h),this.uA=0}RO(t,s,i,e,n,r,h,o,a,l,u){const c=this.hA;if(u%=10800,!c.pC||c.$C(s,i,e,n,r,h,o,a,l,u))return;const f=this.JA();f.w_(),c.jC(s,i,e,n,r,h,o,a,l,u);const d=f.WI;d[0]=r,d[1]=h,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.jI;n.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.VI,0),f.NI=u,f.$I=o,c.KT.mC()?f.BI=t?t.fT():null:f.BI=null,this.uA=0}PO(t){const s=this.hA;if(0===t.length||s.FC(t))return;const i=this.JA();i.v_(),s.kC(t),Ic.Th(i.HI,t),this.uA=0}AO(t,s,i,e){this.JA().u_(t,s,i,e),this.uA=0}Eu(t){this.JA().l_(t),this.uA=0}OO(){}Av(){super.Av(),this.OT.flush()}DO(){this.VP&&this.cA&&this.cA.yT()&&(this.JA().B_(this.UP),this.uA=0)}FO(t){t=!!t,this.UP!==t&&this.VP&&(this.UP=t,this.JA().j_(t),this.uA=0)}LO(){return this.UP}eT(){return this.zP}nT(){return this.HP}kO(t){if(t=!!t,this.HP&&this.qP!==t){if(t&&this.LO())throw new Error("depth still enabled");this.qP=t,this.JA().H_(t),this.uA=0}}NO(t,s,i,e,n=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.wA.Ka(t,s,i,e)||(this.wA.Ha(t,s,i,e),s=(n||this.bO(this.$O())[1])-s-e,this.JA().Z_(!0,t,s,i,e),this.uA=0)}BO(){-1!==this.wA.tl()&&(this.wA.set(0,0,-1,-1),this.JA().Z_(!1,0,0,0,0),this.uA=0)}WO(){for(const t of this.kA)t._P(this.OS)}QR(){return!this.OT||this.OT.isContextLost()||this.IA}LM(){super.BS(),Ic.kw.nG.LM(),Ic.kw.WG.LM(),Ic.kw.qv.LM();for(const t of this.kA)t.Eu();this.CA=[],this.nP=null,this._A=null,this.RA=null,this.EA=null,this.PA=null,this.AA=null,this.OA=null,this.DA=null,this.FA=0,this.GA="(unavailable)",this.TA="(unavailable)",this.hA=null,this.oA=null,this.zP=null;for(const t of this.vS.values())t.LM()}async kM(){this.IA=!0,await this.$S(),this.IA=!1;for(const t of this.vS.values())t.kM(this);this.GR(this.Ey,this.Ry,!0)}jO(t,s){if(this.QR())throw new Error("context lost");this.Ov();const i=Ic.Un(Ic.kw.nG,this);return i.pG(t,s),i}async VO(t,s){if(this.QR())throw new Error("context lost");if(s=Object.assign({},s),Ic.Pi.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.Yx&&"clamp-to-edge"!==s.Yx||s.Xx&&"clamp-to-edge"!==s.Xx,n=Ic.br(i.width)&&Ic.br(i.height);return this.wG()||n||!e?s.iG=!1:Ic.Pi.Fi?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Ic.vr(i.width),resizeHeight:Ic.vr(i.height)}),s.iG=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Ic.df((()=>this.jO(i,s)))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Ic.uo(t);t=s}return await Ic.df((()=>this.jO(t,s)))}iT(t,s,i){this.Ov();const e=Ic.Un(Ic.kw.nG,this);return e.MG(t,s,i),e}tP(t,s,i){this.Ov(),s.IG(t,i)}hT(t){t&&(t.OG(),t.DG()>0||(this.Ov(),t===this.pA&&(this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.pA=null),t===this.b_&&(this.OT.activeTexture(this.OT.TEXTURE1),this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.OT.activeTexture(this.OT.TEXTURE0),this.b_=null),t._G()))}HO(t){let s=this.Ey,i=this.Ry,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Ov();const n=Ic.Un(Ic.kw.WG,this);return n.tT(s,i,Object.assign({$G:e},t)),this.cA=null,this.kI.aT=null,this.kI.lT=null,n}UO(t,s=!0){t!==this.cA&&(t&&t.wT()&&t.rT(this.Ey,this.Ry),this.JA().o_(t),this.cA=t,this.uA=0,s&&this.YA())}$O(){return this.cA}bO(t){return t?[t.jg(),t.Zg()]:[this.Ey,this.Ry]}qO(t,s="stretch"){this.eP<2||this.cA&&this.cA.ST()>0?(this.fO(),this.nO(),this.zO(t,s)):(this.JA().T_(t,this.cA,s),this.uA=0)}zO(t,s="stretch"){const i=t.fT();if(!i)throw new Error("not a texture-backed render target");this.hO(i),this.SO(s,i)}JO(t){this.eP<2||(this.JA().x_(t.uT()),this.uA=0)}YO(t){this.UO(null),this.Ov();const s=t.fT();s===this.pA&&(this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.pA=null),s===this.b_&&(this.OT.activeTexture(this.OT.TEXTURE1),this.OT.bindTexture(this.OT.TEXTURE_2D,null),this.OT.activeTexture(this.OT.TEXTURE0),this.b_=null),t._G()}async GT(t,s,i){this.Ov();const e=this.cA;let n,r,h;t?(n=t.jg(),r=t.Zg(),h=t.uT()):(n=this.jg(),r=this.Zg(),h=null);let o=0,a=0,l=n,u=r;if(i){o=Ic.Kn(Math.floor(i.Za()),0,n-1),a=Ic.Kn(Math.floor(i.Qa()),0,r-1);let t=i.width();t=0===t?n-o:Ic.Kn(Math.floor(t),0,n-o);let s=i.height();s=0===s?r-a:Ic.Kn(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}const c=this.OT;c.bindFramebuffer(c.FRAMEBUFFER,h);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.cA=null,this.kI.aT=null,this.kI.lT=null,this.UO(e)};let d;if(!s&&this.yG()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,h);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.PT((()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED)),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}XO(){this.FO(!0),this.JA().q_(),this.uA=0,this.SA=1}KO(){this.FO(!1),this.JA().J_(),this.uA=0,this.SA=2}ZO(){return 2===this.SA}QO(){this.FO(!0),this.JA().X_(),this.uA=0,this.SA=0}tD(t){this.sD()&&(this.JA().I_(t),this.uA=0)}iD(t){this.sD()&&(this.JA().R_(t),this.uA=0)}PT(t){const s=new Promise((s=>qc.add({resolve:s,PP:t})));return-1===zc&&(zc=self.requestAnimationFrame(Cc)),s}Wv(){return this.Ey*this.Ry*(this.NP.alpha?4:3)}jv(){let t=0;for(const s of Ic.kw.WG.TT())s.fT()||(t+=s.LG());return t}Vv(){let t=0;for(const s of Ic.kw.nG.kG())t+=s.LG();return t}eD(){return this.$P}yG(){return this.eP}nD(){return"webgl"+this.yG()}wG(){return this.yG()>=2}mG(){return this.bA}rD(){return this.vA}hD(){return this.MA}oD(){return 0!==this.xA}aD(){return this.xA}lD(){return this.GA}uD(){return this.TA}cD(){if(this.yG()>=2)return"webgl2";{const t=[];return this.AA&&t.push("EXT_frag_depth"),this.OA&&t.push("OES_standard_derivatives"),this.DA&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}fD(){return this.CA}sD(){return!!this.nP}rP(){return this.nP}RT(){return this._A}BA(){return!!this.RA}TG(){return this.EA}CG(){return this.FA}TP(t){this.kA.add(t)}CP(t){this.kA.delete(t)}wP(){return this.NA}gG(){return this.OT}$A(t){this.Fb([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}dD(){return this.Uv()}}}{const Jc=self.Is,Yc={pD:null,mD:null,gD:null,getTime:null,yD:null};Jc.kw.wD=class{constructor(t){t=Object.assign({},Yc,t),this.SD=t.pD,this.bD=t.mD,this.vD=t.gD,this.MD=t.getTime,this.xD=t.yD,this.GD=null,this.TD=new Set}CD(t){this.TD.add(t)}ID(t){this.TD.delete(t)}LM(){this.GD=null;for(const t of this.TD)t.LM()}_D(t){return this.SD?this.SD(t):[t.jg(),t.Zg()]}$O(t){return this.bD(t)}ED(t,s){this.vD(t,s)}RD(){return this.MD()}Op(t){this.xD(t)}PD(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.GD||this.GD.jg()===s&&this.GD.Zg()===i||(t.hT(this.GD),this.GD=null),null===this.GD&&(this.GD=t.jO(null,{width:s,height:i,Kx:"nearest",tG:!1})),this.GD}}}{const Xc=self.Is,Kc=self.assert,Zc=self.ls,Qc=Zc.ds,tf=Xc.Un(Xc.Rect),sf=Xc.Un(Xc.Rect),ef=Xc.Un(Xc.Rect),nf=Xc.Un(Xc.Rect),rf=Qc.create(),hf=Qc.create(),of={AD:null,OD:null,DD:null,FD:!1},af={LD:null,kD:!1,ND:!1,$D:!1,BD:!1,WD:!1,jD:!1};Xc.kw.VD=class{constructor(t,s){s=Object.assign({},of,s),this.jp=t,this.HD=s.AD,this.UD=s.OD,this.qD=s.DD,this.zD=null,this.JD=[],this.YD=[],this.XD=[],this.KD=!1,this.RM=0,this.ZD=!1,this.QD=!1,this.tF=!1,this.sF=!1,this.iF=!1,this.eF=!1,this.WP=!1,this.nF=!1,this.rF=!1,this.hF=!1,this.oF=!1,this.aF=!1,this.lF=0,this.uF=[null,null,null],this.cF=!!s.FD,this.fF=0,this.dF=0,this.pF=0,this.mF=0,this.gF=null,this.yF=null,this.wF=Xc.Un(Xc.Rect),this.SF=Xc.Un(Xc.Rect),this.bF=Xc.Un(Xc.Rect),this.vF=Xc.Un(Xc.Rect),this.MF=Xc.Un(Xc.Rect),this.xF=1,this.GF=1,this.TF=0,this.CF=0,this.IF=null,this._F=null,this.EF=0,this.RF=0,this.PF=0,this.AF=0,this.OF=!1,this.XG=Qc.create(),this.DF=Qc.create(),this.jp.CD(this)}qn(){this.jp.ID(this),Xc.bh(this.XD),Xc.bh(this.JD),Xc.bh(this.YD),this.gF=null,this.yF=null,this.HD=null,this.UD=null,this.qD=null}LM(){this.KD=!0,Xc.bh(this.XD),Xc.bh(this.JD),Xc.bh(this.YD)}FF(){return this.KD}LF(t,s){if(s=Object.assign({},af,s),Xc.bh(this.XD),this.fF=0,this.dF=0,this.ZD=!1,this.QD=!1,this.tF=!1,this.sF=!1,this.iF=!1,this.eF=!1,this.lF=0,this.aF=!!s.BD,this.oF=!!s.jD,this.KD=!1,Xc.Th(this.JD,t),0===t.length)return;if(s.LD){if(s.LD.length!==t.length)throw new Error("incorrect indexMap length");Xc.Th(this.YD,s.LD)}else{Xc.bh(this.YD);for(let s=0,i=t.length;s<i;++s)this.YD.push(s)}for(const s of t)this.fF+=s.gM(),this.dF+=s.yM(),s.MM()&&(this.ZD=!0),s.GM()&&(this.QD=!0),s.xM()&&(this.tF=!0),s.wM()&&(this.sF=!0),s.IM()&&(this.iF=!0);this.eF=this.kF(t[0].pM());const i=this.NF(t[0],s),e=this.$F(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.hF=!0);this.hF=!1;let n=0;i&&(this.lF=1,this.XD.push(Xc.Un(Xc.kw.VD.WF.BF,this,-1,1)),n=1);for(let s=0,r=t.length;s<r;++s)if(0!==s||i){let t=1===n?2:1;s!==r-1||e||(t=0),this.lF=Math.max(this.lF,t),this.XD.push(Xc.Un(Xc.kw.VD.WF.jF,this,n,t,s)),n=t}else this.lF=1,this.XD.push(Xc.Un(Xc.kw.VD.WF.VF,this,-1,1,s)),n=1;e&&this.XD.push(Xc.Un(Xc.kw.VD.WF.HF,this,n,0))}NF(t,s){return!!(s.kD||t.SM()||s.$D&&!t.vM()||t.GM()&&!this.oF||0!==this.fF||0!==this.dF)||(t.pM().Bv()?t.xM()&&(s.WD||s.BD)||t.TM()&&s.BD:t.xM()&&!this.eF&&s.WD)}$F(t,s){return!!s.ND||(t.pM().Bv()?t.xM()||t.wM():(t.xM()||t.wM())&&this.UF())}kF(t){return t.sb()&&this.tF&&!this.sF}qF(t,s,i){t.sb()&&null===s&&(s=t.zF()),this.IF=s,this.gF=i.JF||null,this.yF=i.YF||null,this.RM=i.XF||0,this.xF=i.devicePixelRatio||1,this.GF=i.KF||1,this.TF=i.ZF||0,this.CF="number"==typeof i.time?i.time:this.jp.RD(),this.WP=!1,t.KA(),this.ZD&&this.QF();let e=!1;if(this.tL()&&(this.sL(t,i),e=!0,this._F=this.jp.PD(t,this.pF,this.mF),tf.S(this.SF),tf.bl(),t.sb()&&t.iL(this.IF),t.eL(this.IF.fT(),this._F,tf.Za(),tf.Qa(),tf.width(),tf.height())),this.hF)this.nL(t,i);else if(e||this.sL(t,i),0!==this.bF.width()||0!==this.bF.height()){t.uO(),t.nO(),t.Vb(0),t.Ub(0),this.zD=i.rL||null,this.EF=i.hL||0,this.RF=i.oL||0,this.PF=i.aL||0,this.AF=i.lL||0,this.OF=!!i.uL,this.cL(t),this.uF[0]=s,this.uF[1]=this.lF>=1?this.fL():null,this.uF[2]=2===this.lF?this.fL():null;for(const s of this.XD){const i=this.dL(s.pL()),e=this.dL(s.mL());t.sb()?s.gL(t,i,e):s.yL(t,i,e)}t.hO(null),this.uF[1]&&this.wL(this.uF[1]),this.uF[2]&&this.wL(this.uF[2]),this.uF.fill(null),this.SL(t),this.IF=null,this._F=null,this.gF=null,this.yF=null,this.zD=null}}sL(t,s){const[i,e]=this.jp._D(t);this.bL(t,i,e),this.vL(s)}bL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.pF===s&&this.mF===i||this.ML(t,s,i,0,0,this.XG,this.DF),this.pF=s,this.mF=i}ML(t,s,i,e,n,r,h){const o=s/2+e,a=i/2+n;t.tb(r,s/i);const l=t.nb(o,a,t.WS(i),o,a,0,i);Qc.S(h,l)}vL(t){this.wF.S(t.xL),t.GL?this.SF.S(t.GL):this.SF.set(0,0,this.pF,this.mF),this.bF.S(this.SF),this.bF.St(this.pF,this.mF);const s=this.GF*this.xF;this.SF.cl(this.fF*s,this.dF*s),this.MF.S(this.SF),this.MF.St(this.pF,this.mF),this.SF.vl(0,0,this.pF,this.mF),this.vF.S(this.SF),this.vF.St(this.pF,this.mF)}cL(t){if(this.nF=t.LO(),this.rF=t.ZO(),this.oF)t.FO(!1),this.QD&&t.kO(!0);else{if(tf.S(this.SF),t.Bv()){const t=this.GF*this.xF;tf.cl(Math.max(this.fF,1)*t,Math.max(this.dF,1)*t),tf.bl(),tf.Kn(0,0,this.pF,this.mF)}else tf.bl();t.NO(tf.Za(),tf.Qa(),tf.width(),tf.height(),this.mF)}}TL(t){t.nO(),this.oF||(this.rF&&t.QO(),t.FO(!1),this.QD&&t.kO(!0)),t.sb()&&t.CL(!0)}SL(t){t.kO(!1),this.rF&&t.KO(),t.FO(this.nF),this.oF||t.BO(),t.sb()&&t.CL(!1),this.WP=t.ZA()}IL(){this.MF.Kn(0,0,1,1)}dL(t){return t<0?null:this.uF[t]}fL(){return this.jp.$O(this)}_L(){return this.IF}wL(t){this.jp.ED(t,this)}EL(t){return this.JD[t]}RL(t){this.zD?this.zD(this,t,(()=>this.HD(t,this))):this.HD(t,this),this.hF||this.TL(t)}PL(t){if(this.oF)return!0;if(0!==this.EF||0!==this.RF||0!==this.PF||0!==this.AF)return!1;const[s,i]=t.bO(t.$O());return s===this.pF&&i===this.mF}AL(t,s){let i=this.XG,e=this.DF;if(s&&!this.PL(t)){let s,n;i=rf,e=hf,0!==this.PF&&0!==this.AF?[s,n]=[this.PF,this.AF]:[s,n]=t.bO(t.$O()),this.ML(t,s,n,this.EF,this.RF,i,e),this.oF||t.BO()}t.HA(i),t.XA(e)}QF(){this.jp.Op(this)}OL(t,s){return this.qD(this.YD[t],s)}DL(t,s){let i=this.MF,e=this.vF,n=this.bF;t.Bv()&&(sf.S(i),sf.pl(1),i=sf,ef.S(e),ef.pl(1),e=ef,nf.S(n),nf.pl(1),n=nf),this.FL(t,s,e,n,i,1/this.pF,1/this.mF)}LL(t,s){let i=this.vF,e=this.bF,n=1/this.pF,r=1/this.mF;if(this.UD){let{kL:t,NL:s,$L:h}=this.UD(this.gF);t||(tf.set(0,0,0,0),t=tf),s||(s=this.pF),h||(h=this.mF),i=t,e=t,n=1/s,r=1/h}else t.Bv()&&(ef.S(i),ef.pl(1),i=ef,nf.S(e),nf.pl(1),e=nf);let h=this.MF;t.Bv()&&(h=sf,h.S(this.MF),h.pl(1)),this.FL(t,s,i,e,h,n,r),t.sb()&&this.iF&&t.BL(this.aF)}WL(t){return this.tF?t.sb()?this.tL()?this._F:this.IF.fT():this.IF:null}FL(t,s,i,e,n,r,h){t.RO(this.WL(t),n,i,e,this.wF,r,h,this.xF,this.GF,this.TF,this.CF),t.PO(this.OL(s,t))}nL(t,s){const i=this.JD[0],e=t.LO(),n=i.GM();n&&(t.FO(!1),t.kO(!0),this.MF.set(0,0,1,1),this.bF.set(0,0,1,1)),t.ub(i),t.DM(this.RM),t.UO(this.IF);let r=0,h=1;if(this.bF.set(0,0,1,1),i.TM()&&this.UD){const{kL:t,NL:s,$L:i}=this.UD(this.gF);t&&this.bF.S(t),r=Number.isFinite(s)?1/s:0,h=Number.isFinite(i)?1/i:0}else{const[s,i]=this.jp._D(t);r=1/s,h=1/i}s.xL?this.wF.S(s.xL):this.wF.set(0,0,0,0),t.RO(this.WL(t),this.MF,this.bF,this.bF,this.wF,r,h,this.xF,this.GF,this.TF,this.CF),t.PO(this.OL(0,t)),t.sb()&&this.iF&&t.BL(this.aF),t.Vb(0),this.RL(t),n&&(t.kO(!1),t.FO(e))}tL(){return this.eF}UF(){return!this.eF}jL(){return this.tF}VL(){return!!this.hF&&!this.tL()}HL(){return this.oF}UL(){return this.gF}qL(){return this.yF}zL(){return this.RM}JL(){return this.OF}ZA(){return this.WP}YL(){return this.SF}XL(){return this.vF}KL(){return this.cF}async ZL(t,s,i){}}}{const lf=self.Is;lf.kw.VD.WF=class{constructor(t,s,i,e=-1){this.QL=t,this.tk=s,this.sk=i,this.Rw=e}ik(){return this.QL}pL(){return this.tk}mL(){return this.sk}ek(){return this.Rw}PC(){return this.ik().EL(this.ek())}yL(t,s,i){}gL(t,s,i){}}}{const uf=self.Is;uf.kw.VD.WF.BF=class extends uf.kw.VD.WF{constructor(t,s,i,e){super(t,s,i,e)}yL(t,s,i){const e=this.ik();t.uO(),t.lb(),t.UO(i,e.JL()),t.AO(0,0,0,0),e.RL(t),e.IL()}gL(t,s,i){const e=this.ik();t.uO(),t.lb(),t.UO(i,!1),t.AO(0,0,0,0),e.RL(t),e.IL()}}}{const cf=self.Is,ff=cf.Un(cf.Rect),df=cf.Un(cf._l);cf.kw.VD.WF.HF=class extends cf.kw.VD.WF{constructor(t,s,i,e){super(t,s,i,e)}yL(t,s,i){const e=this.ik();t.lb(),t.UO(i),e.AL(t,!0),t.DM(e.zL()),t.hO(s.fT()),df.Yl(e.YL()),ff.S(e.XL()),ff.pl(1),t.ev(df,ff),e.KL()&&t.JO(s)}gL(t,s,i){const e=this.ik();t.lb(),t.UO(i,!1),e.PL(t)?df.Yl(e.XL()):(t.CL(!1),e.AL(t,!0),df.Yl(e.YL())),t.nk(null),t.DM(e.zL()),t.hO(s.fT()),e.HL()?t.SO():t.ev(df,e.XL())}}}{const pf=self.Is;pf.kw.VD.WF.VF=class extends pf.kw.VD.WF{constructor(t,s,i,e){super(t,s,i,e)}yL(t,s,i){const e=this.ik();t.UO(i,e.JL()),t.AO(0,0,0,0),t.fO(),t.ub(this.PC()),e.LL(t,this.ek()),e.RL(t),e.IL()}gL(t,s,i){const e=this.ik();t.UO(i,!1),t.AO(0,0,0,0),t.fO(),t.ub(this.PC()),e.LL(t,this.ek()),e.RL(t),e.IL()}}}{const mf=self.Is,gf=mf.Un(mf.Rect),yf=mf.Un(mf._l);mf.kw.VD.WF.jF=class extends mf.kw.VD.WF{constructor(t,s,i,e){super(t,s,i,e)}yL(t,s,i){const e=this.ik();t.UO(i);const n=0===this.mL();n?t.DM(e.zL()):(t.AO(0,0,0,0),t.fO()),t.ub(this.PC()),e.DL(t,this.ek()),t.hO(s.fT()),e.AL(t,n),yf.Yl(e.YL()),gf.S(e.XL()),gf.pl(1),t.ev(yf,gf),e.KL()&&t.JO(s)}gL(t,s,i){const e=this.ik();t.UO(i,!1),0===this.mL()?(t.DM(e.zL()),t.nk(null),e.PL(t)?yf.Yl(e.XL()):(t.CL(!1),e.AL(t,!0),yf.Yl(e.YL()))):(t.AO(0,0,0,0),t.fO(),yf.Yl(e.XL())),t.ub(this.PC()),e.DL(t,this.ek()),t.hO(s.fT()),e.HL()?t.SO():t.ev(yf,e.XL())}}}{let wf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};SortZOrderList=wf;const Sf=self.Is,bf=self.Ns;let vf=null;const Mf=new Set,xf=[],Gf=[];let Tf=!1,Cf=!1,If=!1;const _f=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.rk=class{constructor(t){vf=t,Object.defineProperties(this,{hk:{value:vf.lk().ak(),writable:!1},uk:{value:vf.fk().ck(),writable:!1},dk:{value:{},writable:!1},pk:{value:{},writable:!1},mk:{value:vf.gk(),writable:!1},yk:{value:vf.wk(),writable:!1},Sk:{value:new Date(vf.bk()),writable:!1},storage:{value:new self.vk(vf),writable:!1},Mk:{value:vf.xk(),writable:!1},Gk:{value:vf.Tk(),writable:!1},Ck:{value:vf.Ik(),writable:!1},Kx:{value:vf._k(),writable:!1},Ek:{value:vf.Rk(),writable:!1},Pk:{value:new self.Ak(t),writable:!1},Ok:{value:new self.Dk(t),writable:!1}}),vf.Fk().addEventListener("keydown",(t=>{Mf.has(t.key)?t.stopPropagation():Mf.add(t.key)})),vf.Fk().addEventListener("keyup",(t=>Mf.delete(t.key))),vf.wf().addEventListener("window-blur",(()=>Mf.clear())),vf.xk()&&(self.alert=t=>(Tf||(Tf=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}Lk(t){Object.defineProperties(this.dk,t)}kk(t){Object.defineProperties(this.pk,t)}addEventListener(t,s){vf.Fk().addEventListener(t,s)}removeEventListener(t,s){vf.Fk().removeEventListener(t,s)}Nk(t,...s){bf.ue(t);const i=vf.$k(),e=i.Bk(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Cu())return e.Wk();if(s.length<e.jk())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.jk()} expected)`);const n=e.Vk();let r=n.Hk();const h=i.Uk();if(h){r=r.slice(0);const t=new Set(r);for(const s of h.Hk())t.has(s)||(r.push(s),t.add(s));for(const s of i.qk())t.has(s)||(r.push(s),t.add(s))}return n.zk(r,e.Jk(),e.Yk(),e.Wk(),...s)}Xk(t){const s=vf.Zk().Kk();if(!s)throw new Error("not in a function which returns a value");switch(s.Qk()){case 1:"number"==typeof t&&s.tN(t);break;case 2:"string"==typeof t&&s.tN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.tN(t)}}signal(t){bf.ue(t),vf.$k().sN(t)}iN(t){return bf.ue(t),vf.$k().eN(t)}nN(){return[vf.Tk(),vf.Ik()]}get rN(){return vf.hN()}get oN(){return vf.aN()}get lN(){return vf.uN()}get cN(){return vf.fN()}get dN(){return vf.pN()}get mN(){return vf.gN()}set mN(t){bf.he(t),vf.yN(t)}get wN(){return Cf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),Cf=!0),vf.SN()}get framesPerSecond(){return vf.SN()}get bN(){return vf.vN()}get MN(){return vf.xN()}get GN(){return vf.TN()}get CN(){return vf.IN()}set CN(t){if(!_f.has(t))throw new Error("invalid framerate mode");vf._N(t)}get EN(){return vf.RN()}set EN(t){bf.he(t),vf.PN(t)}get AN(){return vf.ON()}set AN(t){vf.DN(t)}get FN(){return vf.lk().LN()}get kN(){return vf.lk().NN()}random(){return vf.$N()}get layout(){const t=vf.BN();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.WN()}jN(t){const s=vf.VN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HN(t),!i)throw new Error("invalid layout");return i.WN()}UN(){return vf.VN().qN().map((t=>t.WN()))}zN(t){const s=vf.VN();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.HN(t),!i)throw new Error("invalid layout");s.JN()||s.YN(i)}get keyboard(){const t=vf.XN().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get KN(){const t=vf.XN().KN;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get ZN(){const t=vf.XN().ZN;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get QN(){const t=vf.XN().QN;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}t$(t,s){bf.ue(t),bf.ue(s),vf.s$(t,s)}i$(t){bf.he(t);const s=vf.e$(t);return s?s.n$():null}r$(t,s){bf.Ae(s);const i=vf.h$();for(const s of t){const t=vf.o$(s),i=t.a$();xf.push([i.l$().ek(),i.u$()]),Gf.push(t)}if(0===xf.length)return;xf.sort(wf),Gf.sort(((t,i)=>s(t.n$(),i.n$())));let e=!1;for(let t=0,s=xf.length;t<s;++t){const s=Gf[t],n=i.c$(xf[t][0]),r=xf[t][1],h=n.f$();h[r]!==s&&(h[r]=s,s.a$().d$(n,!0),n.p$(s),e=!0)}e&&vf.m$(),Sf.bh(xf),Sf.bh(Gf)}async g$(t,s){If||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),If=!0);const i=new MessageChannel,e=i.port1,n=i.port2;return await vf.y$("runtime","script-create-worker",{url:t,opts:s,port2:n},[n]),e}alert(t){return vf.y$("runtime","alert",{message:t+(vf.xk()?" [via Web Worker]":"")})}w$(t){return bf.he(t),vf.S$(t)}b$(t){vf.v$(t)}async M$(t,s,i){bf.ce(t),bf.ie(s),bf.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=vf.x$();if(!e)return;vf.m$();const n=await e.G$(t||"image/png",s,i.x,i.y,i.width,i.height);return await vf.T$(Sf.E$._$.I$.C$,null),n}}}{const Ef=self.Is,Rf=self.Ns;let Pf=null;self.R$=class{constructor(t){Pf=t,Object.defineProperties(this,{P$:{value:!0,writable:!1}})}A$(t){const s=self.D$.O$(t);if(!s)throw new Error("invalid IImageInfo");s.F$(Pf.L$())}k$(t){return Pf.io(t)}N$(t){return Pf.eo(t)}$$(t){return Pf.no(t)}B$(t){return Pf.ro(t)}W$(t){return Pf.j$(t)}V$(t){return"flat"===Pf.H$()&&Ef.Zh(t)&&(t=t.toLowerCase()),Pf.U$(t)}get q$(){return Pf.z$()}async J$(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}Y$(...t){return Pf.X$(...t)}K$(t){return Pf.Z$(t)}Q$(t){return Pf.tB(t)}}}{const Af=self.Is,Of=self.Ns;let Df=null;self.sB=class{constructor(t){Df=t,Object.defineProperties(this,{runtime:{value:Df.L$(),writable:!1}})}iB(t,s){const i=Df.L$(),e=i.o$(t),n=i.o$(s);return Df.eB(e,n)}nB(t,s){const i=Df.L$(),e=i.o$(t);for(const t of s){const s=i.o$(t);if(Df.eB(e,s))return t}return null}rB(t){const s=Df.L$().o$(t),i=Df.hB(s);return i?i.n$():null}oB(t,s){if(Of.he(t),Of.he(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");Df.aB(t,s)}lB(){return Df.uB()}cB(t,s){const i=Df.L$();let e;e=Array.isArray(t)?t.map((t=>i.fB(t))):[i.fB(t)];const n=Af.Rect.Xa(s),r=[];return Df.dB(null,e,n,r),r.map((t=>t.n$()))}}}{const Ff=self.Is,Lf=self.Ns;let kf=null;const Nf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),$f=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),Bf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.Ak=class{constructor(t){kf=t,Object.defineProperties(this,{pB:{value:Ff.Zs.oi,writable:!1},os:{value:Nf.get(Ff.Zs.Qs)||"unknown",writable:!1},mB:{value:Ff.Zs.ti,writable:!1},browser:{value:$f.get(Ff.Zs.si)||"unknown",writable:!1},gB:{value:Ff.Zs.ii,writable:!1},yB:{value:Bf.get(Ff.Zs.ni)||"unknown",writable:!1}})}get wB(){let t=kf.SB();return kf.bB()?t="nwjs":kf.vB()?t="windows-webview2":"cordova"===t?t="Android"===Ff.Zs.Qs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get AI(){return kf.x$().MB()}get xB(){return kf.x$().GB()}get TB(){return kf.x$().CB()}get IB(){return kf.x$()._B()}get EB(){return kf.x$().RB()}get PB(){return kf.x$().AB()}get OB(){return kf.x$().DB()}get LB(){return kf.x$().kB()}get devicePixelRatio(){return kf.NB()}}}{const Wf=self.Is,jf=self.Ns;self.vk=class{constructor(t){this.$B=t.BB()}getItem(t){return jf.ue(t),this.$B.getItem(t)}setItem(t,s){return jf.ue(t),this.$B.setItem(t,s)}removeItem(t){return jf.ue(t),this.$B.removeItem(t)}clear(){return this.$B.clear()}keys(){return this.$B.keys()}}}{const Vf=self.Is,Hf=self.Ns,Uf=Vf._s();self.WB=class{#t;constructor(){const t=Vf.VB.jB(Uf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.L$().HB(),writable:!1},id:{value:t.UB(),writable:!1},qB:{value:t.zB(),writable:!1},JB:{value:t.YB(),writable:!1},XB:{value:t.KB(),writable:!1},ZB:{value:t.QB(),writable:!1},tW:{value:t.sW(),writable:!1},iW:{value:t.eW(),writable:!1},nW:{value:t.rW(),writable:!1},hW:{value:t.oW(),writable:!1}}),t.L$().aW(this,t)}static lW(t){if(!t)return null;const s=Vf.VB.uW(t);return s?s.cW():null}fW(){return this.#t.pW().dW()}mW(){return this.#t.gW().n$()}}}{const qf=self.Is,zf=self.Ns,Jf=qf._s();self.yW=class{#t;constructor(){const t=qf.VB.jB(Jf);this.#t=t,Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},runtime:{value:t.L$().HB(),writable:!1},wW:{value:t.SW().cW(),writable:!1}}),t.L$().aW(this,t)}addEventListener(t,s){zf.ue(t),zf.Ae(s),this.#t.Fk().addEventListener(t,s)}removeEventListener(t,s){zf.ue(t),zf.Ae(s),this.#t.Fk().removeEventListener(t,s)}bW(){return[...this.vW()]}MW(){return qf.Bh(this.vW())}xW(){return[...this.GW()]}TW(){return qf.Bh(this.GW())}IW(t){const s=this.#t,i=s.L$()._W(t),e=s.EW(i);return e?e.n$():null}*vW(){for(const t of this.#t.RW())yield t.n$()}*GW(){for(const t of this.#t.AW().PW())yield t.n$()}OW(t){zf.Ae(t);const s=this.#t;if(s.DW()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.FW(t)}Ci(t,s,i,e,n){if(zf.se(s),zf.se(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#t,h=r.L$(),o=h.BN().l$(t);if(!o)throw new Error("invalid layer");const a=h.LW(r,o,s,i,e,n);e&&o.kW(a);const l=h.$k();return l.NW(!0),a.$W(),l.NW(!1),l.BW()||h.VN().WW()||h.jW(),a.n$()}}}{const Yf=self.Is,Xf=self.Ns,Kf=new WeakMap,Zf=["above","below","top-sublayer","bottom-sublayer"];self.VW=class{constructor(t){Kf.set(this,t);const s=[],i=t.HW(),e=i.UW().length;for(let t=0;t<e;++t)s.push(new self.qW(i,t));Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},index:{value:t.ek(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Xf.ue(t),Xf.Ae(s),Kf.get(this).Fk().addEventListener(t,s)}removeEventListener(t,s){Xf.ue(t),Xf.Ae(s),Kf.get(this).Fk().removeEventListener(t,s)}get width(){return Kf.get(this).jg()}set width(t){Xf.he(t),Kf.get(this).Yg(t)}get height(){return Kf.get(this).Zg()}set height(t){Xf.he(t),Kf.get(this).Vg(t)}zW(t,s){Xf.he(t),Xf.he(s);const i=Kf.get(this);i.Yg(t),i.Vg(s)}getSize(){const t=Kf.get(this);return[t.jg(),t.Zg()]}set scale(t){Xf.he(t),Kf.get(this).JW(t)}get scale(){return Kf.get(this).YW()}set angle(t){Xf.he(t),Kf.get(this).XW(t)}get angle(){return Kf.get(this).KW()}set scrollX(t){Xf.se(t),Kf.get(this).ZW(t)}get scrollX(){return Kf.get(this).QW()}set scrollY(t){Xf.se(t),Kf.get(this).tj(t)}get scrollY(){return Kf.get(this).sj()}scrollTo(t,s){Xf.se(t),Xf.se(s);const i=Kf.get(this);i.ZW(t),i.tj(s)}ij(){const t=Kf.get(this);return[t.QW(),t.sj()]}ej(t){const s=Kf.get(this);let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.l$(t),i?i.nj():null}rj(){return Kf.get(this).hj().map((t=>t.nj()))}*oj(){for(const t of Kf.get(this).oj())yield t.nj()}aj(t,s,i){const e=Kf.get(this),n=self.lj;Xf.ue(t),Xf.Be(s,n);const r=s?e.L$().uj(s):null,h=Zf.indexOf(i);if(h<0)throw new Error("invalid location");e.cj(t,r,h)}fj(t,s,i){const e=Kf.get(this),n=e.L$(),r=self.lj;Xf.$e(t,r);const h=n.uj(t);if(!h)throw new Error("invalid layer");Xf.Be(s,r);const o=s?n.uj(s):null,a=Zf.indexOf(i);if(a<0)throw new Error("invalid location");e.dj(h,o,a)}pj(t){const s=Kf.get(this),i=self.lj;Xf.$e(t,i);const e=s.L$().uj(t);if(!e)throw new Error("invalid layer");const n=e.L$();s.mj(e),n.$k().BW()||n.jW()}gj(){const t=Kf.get(this),s=t.L$();t.yj(),s.$k().BW()||s.jW()}wj(t,s){Xf.he(t),Xf.he(s),Kf.get(this).Sj(t,s)}bj(){return Kf.get(this).vj()}set V(t){Xf.ue(t);const s=Kf.get(this);if("perspective"===t)s.Mj();else{if("orthographic"!==t)throw new Error("invalid projection");s.xj()}}get V(){return Kf.get(this).Gj()?"orthographic":"perspective"}}}{const Qf=self.Is,td=self.Ns,sd=new WeakMap,id=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ed=new Map([...id.entries()].map((t=>[t[1],t[0]]))),nd=new Set(["2d","3d"]),rd=Qf.Un(Qf.Go);self.lj=class{constructor(t){sd.set(this,t);const s=[],i=t.HW(),e=i.UW().length;for(let t=0;t<e;++t)s.push(new self.qW(i,t));Object.defineProperties(this,{name:{value:t.Ec(),writable:!1},layout:{value:t.HN().WN(),writable:!1},effects:{value:s,writable:!1}}),t.L$().aW(this,t)}get Tj(){const t=sd.get(this).Cj();return t?t.nj():null}*Ij(){for(const t of sd.get(this).Ij())yield t.nj()}*_j(){for(const t of sd.get(this).Ej())yield t.nj()}*Rj(){for(const t of sd.get(this).Ej())for(const s of t.Pj())yield s.nj()}get index(){return sd.get(this).ek()}get isVisible(){return sd.get(this).Aj()}set isVisible(t){sd.get(this).Oj(t)}get Dj(){return sd.get(this).Fj()}get Lj(){return sd.get(this).kj()}set Lj(t){sd.get(this).Nj(t)}get $j(){return sd.get(this).Bj()}set $j(t){sd.get(this).Wj(!!t)}get jj(){return sd.get(this).Vj()}get opacity(){return sd.get(this).sO()}set opacity(t){t=Qf.Kn(+t,0,1),isNaN(t)||sd.get(this).eO(t)}set scale(t){td.he(t),sd.get(this).Hj(t)}get scale(){return sd.get(this).Uj()}set qj(t){td.he(t),sd.get(this).zj(t)}get qj(){return sd.get(this).Jj()}set angle(t){td.he(t),sd.get(this).XW(t)}get angle(){return sd.get(this).Yj()}set Xj(t){td.he(t),sd.get(this).Kj(t)}get Xj(){return sd.get(this).Zj()}set Qj(t){td.he(t),sd.get(this).tV(t)}get Qj(){return sd.get(this).sV()}set iV(t){td.he(t),sd.get(this).KM(t)}get iV(){return sd.get(this).XM()}set renderingMode(t){if(!nd.has(t))throw TypeError("invalid rendering mode");sd.get(this).eV("3d"===t)}get renderingMode(){return sd.get(this).nV()?"3d":"2d"}set rV(t){sd.get(this).hV(t)}get rV(){return sd.get(this).oV()}set aV(t){sd.get(this).lV(t)}get aV(){return sd.get(this).uV()}set XF(t){td.ue(t);const s=id.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");sd.get(this).DM(s)}get XF(){return ed.get(sd.get(this).cV())}set backgroundColor(t){if(td.Te(t),t.length<3)throw new Error("expected 3 elements");rd.Ro(t[0],t[1],t[2]);const s=sd.get(this),i=s.fV();i.Uo(rd)||(i.ko(rd),s.L$().m$())}get backgroundColor(){const t=sd.get(this).fV();return[t.No(),t.$o(),t.Bo()]}set scrollX(t){td.se(t);const s=sd.get(this);s.dV(!0),s.ZW(t)}get scrollX(){return sd.get(this).QW()}set scrollY(t){td.se(t);const s=sd.get(this);s.dV(!0),s.tj(t)}get scrollY(){return sd.get(this).sj()}scrollTo(t,s){td.se(t),td.se(s);const i=sd.get(this);i.dV(!0),i.ZW(t),i.tj(s)}ij(){const t=sd.get(this);return[t.QW(),t.sj()]}pV(){sd.get(this).dV(!1)}getViewport(){return sd.get(this).mV().il()}gV(t,s,i=0){td.se(t),td.se(s),td.se(i);const e=sd.get(this),n=e.L$();return e.yV(t-n.CB(),s-n._B(),i)}wV(t,s,i=0){td.se(t),td.se(s),td.se(i);const e=sd.get(this),n=e.L$(),[r,h]=e.SV(t,s,i);return[r+n.CB(),h+n._B()]}bV(t,s,i=0){return td.se(t),td.se(s),td.se(i),sd.get(this).vV(t,s,i)}MV(t,s,i=0){return td.se(t),td.se(s),td.se(i),sd.get(this).xV(t,s,i)}get GV(){return sd.get(this).TV()}}}{let hd=function(t){let s=ld.get(t);return s||(s=od.Un(od.Event.wf),ld.set(t,s),s)};GetDispatcher=hd;const od=self.Is,ad=self.Ns,ld=new WeakMap,ud=od._s();self.CV=class{#t;constructor(){const t=od.VB.jB(ud);this.#t=t;const s={runtime:{value:t.L$().HB(),writable:!1},objectType:{value:t.IV().dW(),writable:!1},wW:{value:t.SW().cW(),writable:!1}};t._V(s),t.EV(s),Object.defineProperties(this,s),t.L$().aW(this,t)}static RV(){return od.VB.PV()}AV(){const t=ld.get(this);t&&(t.qn(),ld.delete(this))}addEventListener(t,s,i){ad.ue(t),ad.Ae(s),hd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ad.ue(t),ad.Ae(s),hd(this).removeEventListener(t,s,i)}dispatchEvent(t){hd(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.L$();s.OV(t),s.$k().BW()||s.VN().WW()||s.$k().DV()||s.jW()}FV(){const t=this.#t.LV();return t?t.map((t=>t.n$())):[]}*kV(){const t=this.#t;if(t.NV())for(const s of t.$V())yield s.n$()}get uid(){return this.#t.BV()}get WV(){return this.#t.jV()}get VV(){return this.#t.HV()}set mN(t){ad.he(t),this.#t.yN(t)}get mN(){return this.#t.UV()}qV(){this.#t.zV()}get oN(){const t=this.#t;return t.L$().aN(t)}JV(...t){ad.Te(t);const s=new Set(t),i=this.#t.YV();return s.isSubsetOf(i)}XV(t){ad.$e(t,Set),this.#t.KV(t)}ZV(){return new Set(this.#t.YV())}signal(t){ad.ue(t);const s=this.#t;s.L$().$k().QV(s,t)}iN(t){ad.ue(t);const s=this.#t;return s.L$().$k().tH(s,t)}}}{const cd=self.Is,fd=self.Ns,dd=cd._s();self.sH=class extends self.CV{#t;#s=!1;#i=null;#e=!1;#n=null;#r;#h;constructor(t){super(),this.#t=cd.VB.jB(dd),this.#s=!1,this.#i=null,this.#e=!1,this.#n=null,this.#r=t?.iH,this.#h=t?.eH}AV(){this.nH(!1),this.rH(!1),super.AV()}hH(){return cd.VB.oH()}aH(t){const s=this.#t;s.L$().lH(t,s)}uH(t){const s=this.#t;return s.L$().T$(t,s)}cH(t,s){if(fd.ue(t),fd.Ae(s),!this.#r)throw new Error("no DOM component id set");this.#t.L$().fH(this.#r,t,s)}dH(t){fd.Te(t);for(const[s,i]of t)this.cH(s,i)}pH(t,s){if(fd.ue(t),!this.#r)throw new Error("no DOM component id set");this.#t.L$().Wc(this.#r,t,s)}mH(t,s){if(fd.ue(t),!this.#r)throw new Error("no DOM component id set");return this.#t.L$().y$(this.#r,t,s)}gH(t,s){if(!this.#t.L$().xk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#r,handler:t,data:s,responseId:null});this.pH(t,s)}nH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.L$();if(t){if(!this.#i)if(this.#t.L$().yH()){const t=globalThis.wH,s=this.wW;this.#i=()=>{const i=performance.now();this.SH(),t.bH(s,performance.now()-i)}}else this.#i=()=>this.SH();s.wf().addEventListener("tick",this.#i)}else s.wf().removeEventListener("tick",this.#i)}vH(){return this.#s}SH(){}rH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.L$();if(t){if(!this.#n)if(this.#t.L$().yH()){const t=globalThis.wH,s=this.wW;this.#n=()=>{const i=performance.now();this.MH(),t.bH(s,performance.now()-i)}}else this.#n=()=>this.MH();s.wf().addEventListener("tick2",this.#n)}else s.wf().removeEventListener("tick2",this.#n)}xH(){return this.#e}MH(){}GH(){return[]}TH(){return null}CH(t){}IH(){if(!this.#h)throw new Error("no wrapper component id set");return this.#t.L$()._H(this.#h)}EH(t,s){if(fd.ue(t),fd.Ae(s),!this.#h)throw new Error("no wrapper component id set");this.#t.L$().RH(this.#h,t,s)}PH(t){fd.Te(t);for(const[s,i]of t)this.EH(s,i)}AH(t,s){if(!this.#h)throw new Error("no wrapper component id set");this.runtime.Ok.OH(this.#h,t,s)}DH(t,s){if(!this.#h)throw new Error("no wrapper component id set");return this.runtime.Ok.FH(this.#h,t,s)}}}{let pd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=md.VB.jB(Md),i=s.a$();this.#t=s,this.#s=i,vd.set(this,s);const e=[],n=i.LH();if(n){const t=i.IV().HW().UW().length;for(let s=0;s<t;++s)e.push(new self.qW(n,s))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#s.HN().WN()}get kH(){return this.#s.l$().nj()}get x(){return this.#s.UM()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.UM()===t||(s.qM(t),s.NH())}get y(){return this.#s.JM()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.JM()===t||(s.YM(t),s.NH())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.UM()===t&&i.JM()===s||(i.$H(t,s),i.NH())}BH(){const t=this.#s;return[t.UM(),t.JM()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.WH(t,s),i.NH()}set jH(t){t=+t;const s=this.#s;isNaN(t)||s.VH()===t||(s.HH(t),s.NH())}get jH(){return this.#s.VH()}set UH(t){t=+t;const s=this.#s;isNaN(t)||s.qH()===t||(s.zH(t),s.NH())}get UH(){return this.#s.qH()}JH(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.VH()===t&&i.qH()===s||(i.HH(t),i.zH(s),i.NH())}YH(){const t=this.#s;return[t.VH(),t.qH()]}get iV(){return this.#s.XM()}set iV(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.XM()===t||(i.KM(t),s.L$().m$())}get XH(){return this.#s.KH()}get width(){return this.#s.jg()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.jg()===t||(s.Yg(t),s.NH())}get height(){return this.#s.Zg()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.Zg()===t||(s.Vg(t),s.NH())}zW(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.jg()===t&&i.Zg()===s||(i.GR(t,s),i.NH())}getSize(){const t=this.#s;return[t.jg(),t.Zg()]}get angle(){return this.#s.KW()}set angle(t){t=md.Zn(+t);const s=this.#s;isNaN(t)||s.KW()===t||(s.XW(t),s.NH())}get ZH(){return md.tr(this.angle)}set ZH(t){this.angle=md.Qn(t)}Zl(t){return t?(this.#s.QH(Sd,bd,!1),Sd.il()):this.#s.tU().il()}sU(t){return t?(this.#s.QH(Sd,bd,!1),bd.ql()):this.#s.iU().ql()}eU(){return this.#s.nU()}get isVisible(){return this.#s.Fj()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.Fj()!==t&&(i.Oj(t),s.L$().m$())}get opacity(){return this.#s.sO()}set opacity(t){t=md.Kn(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.sO()===t||(i.eO(t),s.L$().m$())}set rU(t){if(gd.Te(t),t.length<3)throw new Error("expected 3 elements");Td.Ro(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.hU().Uo(Td)||(i.oU(Td),s.L$().m$())}get rU(){const t=this.#s.hU();return[t.No(),t.$o(),t.Bo()]}set XF(t){gd.ue(t);const s=xd.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.DM(s),i.L$().m$()}get XF(){return Gd.get(this.#s.cV())}aU(){this.#s.lU()}uU(){this.#s.cU()}fU(t){gd.$e(t,wd);const s=this.#t,i=s.L$().uj(t);if(!i)throw new Error("invalid layer");s.a$().dU(i)}pU(t,i){gd.$e(t,s),this.#s.mU(vd.get(t),i)}get zIndex(){return this.#s.u$()}get gU(){return this.#s.yU()}set gU(t){this.#s.wU(!!t)}Gl(t,s){return gd.se(t),gd.se(s),this.#s.SU(+t,+s)}iB(t){gd.$e(t,s);const i=this.#t,e=vd.get(t);return i.L$().fk().eB(i,e)}rB(){const t=this.#t,s=t.L$().fk().hB(t);return s?s.n$():null}getParent(){const t=this.#t.bU();return t?t.n$():null}vU(){const t=this.#t.MU();return t?t.n$():null}*xU(){for(const t of this.#t.xU())yield t.n$()}GU(){return this.#t.TU()}CU(t){const s=this.#t.IU(t);return s?s.n$():null}*children(){for(const t of this.#t.children())yield t.n$()}*_U(){for(const t of this.#t._U())yield t.n$()}EU(t,i){gd.$e(t,s),gd.we(i),i||(i={});const e=this.#t,n=vd.get(t);e.RU(n,i)}removeChild(t){gd.$e(t,s);const i=this.#t,e=vd.get(t);i.PU(e)}AU(){const t=this.#t;t.OU()&&t.bU().PU(t)}DU(){const t=this.#s;return{FU:t.LU(),kU:t.NU(),$U:t.BU(),WU:t.jU(),VU:t.HU(),UU:t.qU(),zU:t.JU(),YU:t.XU(),KU:t.ZU()}}QU(t,s){gd.he(t),gd.he(s),this.#s.tq(t,s)}sq(){const t=this.#s;t.iq(),t.NH()}eq(t,s,i){gd.he(t),gd.he(s),gd.ye(i);const e=this.#s;e.nq(t,s,i)&&e.NH()}rq(t,s){let i=NaN,e=NaN,n=NaN,r=NaN,h=NaN;const o=this.#s;if(o.hq()){const a=o.oq().Nx(t,s);null!==a&&(i=a.UM(),e=a.JM(),n=a.XM(),r=a.ZM(),h=a.tx())}return{x:i,y:e,iV:n,aq:r,lq:h}}uq(){const t=this.#s;if(!t.hq())return[0,0];const s=t.oq();return[s.Ix(),s._x()]}}};MakeIWorldInstanceClass=pd;const md=self.Is,gd=self.Ns,yd=self.CV,wd=self.lj,Sd=md.Un(md.Rect),bd=md.Un(md._l),vd=new WeakMap,Md=md._s(),xd=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Gd=new Map([...xd.entries()].map((t=>[t[1],t[0]]))),Td=md.Un(md.Go);self.cq=pd(self.CV),self.fq=pd(self.sH)}{const Cd=self.Is,Id=self.Ns;self.pq=class extends self.cq{#t;constructor(){super(),this.#t=self.CV.RV()}mq(){return this.#t.yq().gq()}focus(){this.#t.yq().wq()}blur(){this.#t.yq().Sq()}bq(t,s){Id.ue(t),this.#t.yq().vq(t,s)}}}{let _d=function(t){let s=Pd.get(t);return s||(s=Ed.Un(Ed.Event.wf),Pd.set(t,s),s)};GetDispatcher=_d;const Ed=self.Is,Rd=self.Ns,Pd=new WeakMap,Ad=Ed._s();self.Mq=class{#t;constructor(){const t=Ed.VB.jB(Ad);this.#t=t;const s={runtime:{value:t.L$().HB(),writable:!1},behavior:{value:t.Gq().xq(),writable:!1},Tq:{value:t.Iq().Cq(),writable:!1}};Object.defineProperties(this,s),t.L$().aW(this,t)}static RV(){return Ed.VB.PV()}get _q(){return this.#t.Eq().n$()}AV(){const t=Pd.get(this);t&&(t.qn(),Pd.delete(this))}addEventListener(t,s,i){Rd.ue(t),Rd.Ae(s),_d(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Rd.ue(t),Rd.Ae(s),_d(this).removeEventListener(t,s,i)}dispatchEvent(t){_d(this).dispatchEvent(t)}}}{const Od=self.Is,Dd=self.Ns,Fd=Od._s();self.Rq=class{constructor(){const t=Od.VB.jB(Fd),s={runtime:{value:t.L$().HB(),writable:!1},behavior:{value:t.Gq().xq(),writable:!1},name:{value:t.Ec(),writable:!1}};Object.defineProperties(this,s)}}}{const Ld=self.Is,kd=self.Ns,Nd=Ld._s();self.Pq=class{#s;constructor(){const t=Ld.VB.jB(Nd);this.#s=t;const s={runtime:{value:t.L$().HB(),writable:!1},id:{value:t.UB(),writable:!1}};Object.defineProperties(this,s),t.L$().aW(this,t)}bW(){return this.#s.PW().map((t=>t.n$()))}static lW(t){if(!t)return null;const s=Ld.VB.Aq(t);return s?s.xq():null}}}{const $d=self.Is,Bd=self.Ns,Wd=$d.Un($d.Go);self.qW=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.UW()[this.index].Ec()}get isActive(){return this.#t.Oq(this.index)}set isActive(t){t=!!t;const s=this.#t;s.Oq(this.index)!==t&&(s.Dq(this.index,t),s.Fq(),s.L$().m$())}setParameter(t,s){Bd.he(t),t=Math.floor(+t);const i=this.#t,e=i.Lq(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof $d.Go){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");Wd.Ro(s[0],s[1],s[2]),s=Wd}else if("number"!=typeof s)throw new TypeError("expected number");i.kq(this.index,t,s)&&i.Oq(this.index)&&i.L$().m$()}getParameter(t){Bd.he(t),t=Math.floor(+t);const s=this.#t.Lq(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof $d.Go?[s.No(),s.$o(),s.Bo()]:s}}}{const jd=self.Is,Vd=self.Ns;self.Nq=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Ec(),writable:!1}})}get speed(){return this.#t.$q()}get Bq(){return this.#t.Wq()}get jq(){return this.#t.Vq()}get Hq(){return this.#t.Uq()}get qq(){return this.#t.zq()}get frameCount(){return this.#t.Jq()}Yq(){return this.#t.Xq().map((t=>t.Kq()))}*frames(){for(const t of this.#t.Xq())yield t.Kq()}}}{const Hd=self.Is,Ud=self.Ns;self.D$=class{#s;constructor(t){this.#s=t}static O$(t){return t.#s}get width(){return this.#s.jg()}get height(){return this.#s.Zg()}getSize(){const t=this.#s;return[t.jg(),t.Zg()]}Zq(t){return t.Qq(this)}tz(){return this.#s.sP().il()}}}{const qd=self.Is,zd=self.Ns;self.sz=class extends self.D${#s;constructor(t){super(t.iz()),this.#s=t,Object.defineProperties(this,{duration:{value:t.ez(),writable:!1},jH:{value:t.VH(),writable:!1},UH:{value:t.qH(),writable:!1}})}YH(){const t=this.#s;return[t.VH(),t.qH()]}nz(){return this.#s.rz()}hz(t){return this.oz(t)[0]}az(t){return this.oz(t)[1]}oz(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.lz(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.uz(t)}return i?[i.UM(),i.JM()]:this.YH()}cz(){const t=this.#s.fz();return t?t.pu():0}dz(t){return this.pz(t)[0]}mz(t){return this.pz(t)[1]}pz(t){zd.he(t),t=Math.floor(t);const s=this.#s.fz();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.gz()}}}{let Jd=function(t){const s=Kd.get(t);if(s.yz())throw new Error("timeline/tween was released and is no longer valid");return s};GetTimelineState=Jd;const Yd=self.Is,Xd=self.Ns,Kd=new WeakMap;self.wz=class{constructor(t){Kd.set(this,t),t.L$().aW(this,t)}pause(){Jd(this).Sz()}resume(){Jd(this).bz()}stop(){Jd(this).$f()}JV(t){return Jd(this).vz(t)}set time(t){Xd.he(t),Jd(this).Mz(t)}get time(){return Jd(this).RD()}set totalTime(t){Xd.he(t),Jd(this).xz(t)}get totalTime(){return Jd(this).Gz()}set Bq(t){Jd(this).Tz(!!t)}get Bq(){return Jd(this).Cz()}set qq(t){Jd(this).Iz(!!t)}get qq(){return Jd(this)._z()}set playbackRate(t){Xd.he(t),Jd(this).Ez(t)}get playbackRate(){return Jd(this).Rz()}get progress(){const t=Jd(this);return t.RD()/t.Gz()}get tags(){return Jd(this).Pz()}get finished(){return Jd(this).Az()}get Oz(){return Jd(this).IsPlaying()}get Dz(){return Jd(this).Fz()}get Lz(){return Kd.get(this).yz()}}}{let Zd=function(t){const s=sp.get(t);if(s.yz())throw new Error("timeline was released and is no longer valid");return s};GetTimelineState=Zd;const Qd=self.Is,tp=self.Ns,sp=new WeakMap;let ip=null;self.kz=class extends self.wz{constructor(t){super(t),sp.set(this,t);const s={name:{value:t.Ec(),writable:!1}};Object.defineProperties(this,s)}}}{let ep=function(t){const s=hp.get(t);if(s.yz())throw new Error("tween was released and is no longer valid");return s};GetTweenState=ep;const np=self.Is,rp=self.Ns,hp=new WeakMap,op=new WeakMap;let ap=null;self.Nz=class extends self.wz{constructor(t,s,i){super(t),ap||(ap=i.$z),hp.set(this,t),s&&op.set(this,s)}stop(){const t=ep(this);op.get(this).Bz(t)}Wz(t){rp.ue(t);const s=self.ju.oc(ap(t));ep(this).jz(s)}get _q(){const t=ep(this).Vz();return t?t.n$():null}get Uz(){return ep(this).qz()}set Uz(t){ep(this).zz(!!t)}get value(){const t=ep(this);if("value"!==t.Jz())throw new Error("not a value tween");return t.Xz("value").Yz()}}}{const lp=self.Is,up=self.Ns;self.Kz=class extends self.WB{constructor(){super()}}}{const cp=self.Is,fp=self.Ns,dp=cp._s();self.Zz=class extends self.Kz{#t;#i;#s=0;#r=new Map;constructor(t){if(super(),this.#t=cp.VB.jB(dp),!t?.iH)throw new Error("no DOM component ID specified");this.#i=t.iH,this.Qz("elem-focused",(t=>t.tJ())),this.Qz("elem-blurred",(t=>{t&&t.sJ()}))}iJ(t){const s=this.#s++;return this.#r.set(s,t),s}eJ(t){this.#r.delete(t)}Qz(t,s){this.#t.L$().fH(this.#i,t,(t=>{const i=this.#r.get(t.elementId);s(i,t)}))}nJ(t){fp.Te(t);for(const[s,i]of t)this.nJ(s,i)}}}{const pp=self.Is,mp=self.Ns,gp=new WeakMap,yp=pp._s();self.rJ=class extends self.yW{#t;constructor(){super(),this.#t=pp.VB.jB(yp)}hJ(){}oJ(){return this.#t.iz().aJ()}lJ(t){}uJ(t){}cJ(){}fJ(t){}}}{const wp=self.Is,Sp=self.Ns,bp=new WeakMap,vp=wp._s();self.dJ=class extends self.fq{#t;#n=null;#s=null;constructor(t){super(t),this.#t=wp.VB.jB(vp)}AV(){if(super.AV(),this.#n){const t=this.#t.L$().wf();t.removeEventListener("renderercontextlost",this.#n),t.removeEventListener("renderercontextrestored",this.#s),this.#n=null,this.#s=null}}pJ(){if(this.#n)return;this.#n=()=>this.mJ(),this.#s=()=>this.gJ();const t=this.#t.L$().wf();t.addEventListener("renderercontextlost",this.#n),t.addEventListener("renderercontextrestored",this.#s)}mJ(){}gJ(){}yJ(t){}}}{const Mp=self.Is,xp=self.Ns,Gp=Mp.Un(Mp.Rect),Tp=new WeakMap,Cp=Mp._s();self.wJ=class extends self.dJ{#t=-1;#s=!0;#r=!1;#e=!1;#i=-.2;#h=Mp.Un(Mp.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.iH)throw new Error("no DOM component ID specified");super(t);const s=Mp.VB.jB(Cp);Tp.set(this,s),this.#t=this.wW.iJ(this);const i=s.L$().x$();this.#o=i.SJ(),this.#a=i.bJ(),this.nH(!0)}AV(){super.AV(),this.wW.eJ(this.#t),this.vJ("destroy"),this.#t=-1,Tp.delete(this)}MJ(){if(Tp.get(this).L$().xk())throw new Error("not valid in worker mode");return this.xJ("get-element")}vJ(t,s){s||(s={}),s.elementId=this.#t,this.pH(t,s)}xJ(t,s){return s||(s={}),s.elementId=this.#t,this.gH(t,s)}GJ(t,s){return s||(s={}),s.elementId=this.#t,this.mH(t,s)}TJ(t){t||(t={});const s=Tp.get(this).a$();t.elementId=this.#t,t.isVisible=s.Fj(),t.htmlIndex=s.l$().CJ(),t.htmlZIndex=s.IJ(),Object.assign(t,this._J()),this.#s=!!t.isVisible,this.gH("create",t),this.EJ(!0)}RJ(t){t=!!t,this.#s!==t&&(this.#s=t,this.vJ("set-visible",{isVisible:t}))}SH(){this.EJ(!1)}PJ(){const t=Tp.get(this).L$().x$().AJ();return"Android"===Mp.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}EJ(t){const s=Tp.get(this);if(s.OJ())return;const i=s.a$(),e=i.l$(),n=i.tU();let[r,h]=e.SV(n.Za(),n.Qa()),[o,a]=e.SV(n.tl(),n.sl());const l=s.L$().x$(),u=l.RB(),c=l.AB();if(!i.Fj()||!e.Fj())return void this.RJ(!1);if(!this.PJ()&&(o<=0||a<=0||r>=u||h>=c))return void this.RJ(!1);Gp.set(r,h,o,a);const f=l.SJ(),d=l.bJ(),p=e.CJ(),m=i.IJ();if(!t&&Gp.equals(this.#h)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.RJ(!0);this.#h.S(Gp),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.RJ(!0);let g=null;this.#e&&(g=e.DJ()+this.#i),this.vJ("update-position",{left:Math.round(this.#h.Za()),top:Math.round(this.#h.Qa()),width:Math.round(this.#h.width()),height:Math.round(this.#h.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}FJ(){this.xJ("focus",{focus:!0})}LJ(){this.xJ("focus",{focus:!1})}tJ(){this.#r=!0}sJ(){this.#r=!1}kJ(){return this.#r}NJ(t,s){this.$J("set-css-style",{prop:Mp.vo(t),val:s})}BJ(t,s){this.$J("set-attribute",{name:t,val:s})}WJ(t){this.$J("remove-attribute",{name:t})}jJ(){this.#c||(this.#c=!0,Promise.resolve().then((()=>{this.#c=!1,this.vJ("update-state",this._J())})))}_J(){}VJ(){return this.#t}}}{const Ip=self.Is,_p=self.Ns;self.HJ=class extends self.Pq{constructor(){super()}}}{const Ep=self.Is,Rp=self.Ns;self.UJ=class extends globalThis.Rq{constructor(){super()}hJ(){}}}{const Pp=self.Is,Ap=self.Ns,Op=new WeakMap,Dp=Pp._s();self.qJ=class extends self.Mq{#e=!1;#s=!1;#t=!1;constructor(){super(),Op.set(this,Pp.VB.jB(Dp))}AV(){super.AV(),this.nH(!1),this.rH(!1),this.zJ(!1),Op.delete(this)}hH(){return Pp.VB.oH()}JJ(){}aH(t){const s=Op.get(this);s.L$().lH(t,s.Eq(),s.Iq())}uH(t){const s=Op.get(this);return s.L$().T$(t,s.Eq(),s.Iq())}nH(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=Op.get(this).L$();t?s.YJ(this):s.XJ(this)}vH(){return this.#e}SH(){}rH(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=Op.get(this).L$();t?s.KJ(this):s.ZJ(this)}xH(){return this.#s}MH(){}zJ(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=Op.get(this).L$();t?s.QJ(this):s.tY(this)}sY(){return this.#t}iY(){}GH(){return[]}TH(){return null}CH(t){}}}{const Fp=self.Is,Lp=self.Ns;let kp=null;self.Dk=class{constructor(t){kp=t}b$(t){kp.v$(t)}OH(t,s,i){Lp.ue(t),Lp.ue(s),Lp.Ce(i),kp.eY(t,s,i)}FH(t,s,i){return Lp.ue(t),Lp.ue(s),Lp.Ce(i),kp.nY(t,s,i)}rY(t){return Lp.ce(t),new self.hY(kp,t)}set oY(t){kp.aY(!!t)}get oY(){return kp.lY()}uY(t){kp.cY(!!t)}fY(t){Lp.se(t);const s=kp.dY(t);return s?s.dW():null}}}{const Np=self.Is,$p=self.Ns;self.hY=class{#t;#s;#h;#i;#r;#n;constructor(t,s){this.#t=t;const i=t.$k(),e=t.Uk();this.#s=e,this.#h=e.pY();const n=t.Zk();this.#i=n.mY(),this.#r=n.gY(e);const r=i.yY().gY();this.#n=r,s&&r.wY(s),t.SY(!1)}bY(){const t=this.#t.$k(),s=this.#h,i=this.#n;t.vY(s),this.#s.MY(this.#i,this.#r),t.xY(s),i.GY(i.ek()+1)}get TY(){return this.#n.CY()}release(){const t=this.#t,s=t.Zk(),i=t.$k().yY();t.SY(!0),i.IY(),s.IY()}}}{const Bp=self.Is,Wp=self.Ns;let jp=null,Vp=null;self._Y=class{constructor(t,s){Vp=t,jp=s}EY(){jp.uO()}RY(t){jp.aO(t)}PY(){jp.gb()}AY(){jp.lb()}OY(){jp.Gb()}setColor(t){jp.iO(t[0],t[1],t[2],t[3])}DY(t,s,i,e){jp.iO(t,s,i,e)}FY(){jp.nO()}LY(t){jp.eO(t)}kY(t){jp.Ub(t)}NY(){jp.qb()}rect(t){jp.dO(t.left,t.top,t.right,t.bottom)}$Y(t,s,i,e){jp.dO(t,s,i,e)}BY(t){jp._l(Bp._l.zl(t))}WY(t,s,i,e,n,r,h,o){jp.Rv(t,s,i,e,n,r,h,o)}jY(t,s){jp.ev(Bp._l.zl(t),Bp.Rect.el(s))}VY(t,s){jp.gO(Bp._l.zl(t),Bp._l.zl(s))}HY(t,s,i,e,n,r,h,o,a,l,u,c,f){jp.yO(t,s,i,e,n,r,h,o,a,l,u,c,Bp.Rect.el(f))}UY(t,s,i,e,n,r,h,o,a,l,u,c,f){jp.Kb(t,s,i,e,n,r,h,o,a,l,u,c,Bp._l.zl(f))}qY(t,s,i){jp.wO(t,s,i)}zY(t){jp.Ev(t)}line(t,s,i,e){jp.ey(t,s,i,e)}JY(t,s,i,e,n,r){jp.Zb(t,s,i,e,n,r)}YY(t,s,i,e){jp.nv(t,s,i,e)}XY(t){jp.av(Bp.Rect.el(t))}KY(t){jp.lv(Bp._l.zl(t))}ZY(t){jp.mv(t)}QY(){jp.gv()}tX(t){jp.bv(t)}sX(){jp.Gv()}iX(t){Wp.Be(t,self.eX);const s=t?Vp.uj(t):null;jp.hO(s)}nX(t,s){const i=self.D$.O$(t);if(!i)throw new Error("invalid IImageInfo");return i.rX(jp,{Yx:s?.Yx??"clamp-to-edge",Xx:s?.Xx??"clamp-to-edge",Kx:s?.Kx??"trilinear",tG:s?.tG??!0})}hX(t){const s=self.D$.O$(t);if(!s)throw new Error("invalid IImageInfo");s.qE()}Qq(t){const s=self.D$.O$(t);if(!s)throw new Error("invalid IImageInfo");const i=s.fT();return self.eX.oX(Vp,i)}aX(t,s,i){Wp.he(t),Wp.he(s);const e=jp.iT(t,s,{Yx:i?.Yx??"clamp-to-edge",Xx:i?.Xx??"clamp-to-edge",Kx:i?.Kx??"trilinear",tG:i?.tG??!0});return self.eX.oX(Vp,e)}lX(t,s,i){Wp.$e(s,self.eX);const e=Vp.uj(s);jp.tP(t,e,{iG:i?.iG??!0})}deleteTexture(t){Wp.$e(t,self.eX);const s=Vp.uj(t);jp.hT(s)}uX(){const t=jp.Uv();return new self.cX(Vp,t)}fX(){Vp.x$().dX(jp)}pX(t){Wp.$e(t,globalThis.lj),Vp.uj(t).mX(jp)}}}{const Hp=self.Is,Up=self.Ns,qp=new WeakMap,zp=new WeakMap;self.eX=class{constructor(t,s){qp.set(this,{runtime:t,texture:s}),zp.set(s,this),t.aW(this,s),Object.defineProperties(this,{width:{value:s.jg(),writable:!1},height:{value:s.Zg(),writable:!1}})}static oX(t,s){if(!s)return null;return zp.get(s)||new self.eX(t,s)}}}{let Jp=function(t){return Kp.get(t).gX};getActual=Jp;const Yp=self.Is,Xp=self.Ns,Kp=new WeakMap;self.cX=class{constructor(t,s){Kp.set(this,{runtime:t,gX:s}),t.aW(this,s)}release(){Jp(this).qn()}set yX(t){Xp.ue(t),Jp(this).tR(t)}get yX(){return Jp(this).eE()}set wX(t){Xp.he(t),Jp(this).sR(t)}get wX(){return Jp(this).iR()}set lineHeight(t){Xp.he(t),Jp(this).nR(t)}get lineHeight(){return Jp(this).rR()}set SX(t){Jp(this).hR(t)}get SX(){return Jp(this).oR()}set bX(t){Jp(this).aR(t)}get bX(){return Jp(this).lR()}setColor(t){Xp.Te(t),this.vX(t[0],t[1],t[2])}vX(t,s,i){Jp(this).pR(t,s,i)}MX(t){Xp.ue(t),Jp(this).FM(t)}set xX(t){Jp(this).mR(t)}get xX(){return Jp(this).gR()}set verticalAlign(t){Jp(this).yR(t)}get verticalAlign(){return Jp(this).wR()}set GX(t){Jp(this).SR(t)}get GX(){return Jp(this).bR()}set TX(t){Jp(this).vR(t)}get TX(){return Jp(this).MR()}set text(t){Xp.ue(t),Jp(this).jc(t)}get text(){return Jp(this).xR()}zW(t,s,i){Xp.he(t),Xp.he(s),Xp.he(i),Jp(this).GR(t,s,i)}Zq(){const{runtime:t,gX:s}=Kp.get(this),i=s.fT();return self.eX.oX(t,i)}tz(){return Jp(this).sP().il()}CX(t){Xp.Ae(t),Jp(this).JE=t}IX(){Jp(this).qE()}get _X(){return Jp(this).CR()}get EX(){return Jp(this)._R()}}}{let Zp=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return im.get(i)||""},Qp=function(t){return new Promise(((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)}))};GetTypeFromFileExtension=Zp,AddScript=Qp;const tm=self.Is,sm=new Set(["local","remote"]),im=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);tm.RX=class extends tm.Vn{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.PX="folders",this.AX=new Map,this.OX="cordova"===i,this.DX=!!s.isiOSCordova,this.FX=!!s.isFileProtocol,this.LX=s.swClientId,this.kX=s.supportedAudioFormats||{},this.NX=new Map,this.$X=!1,this.BX=s.scriptFolder,this.WX="",this.jX="",this.VX="",this.HX=s.fileMap||new Map,this.UX=new Map;const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.qX=e?"remote":"local",this.zX=new Map,this.JX=[],this.YX=[],this.XX=!1,this.KX=0,this.ZX=0,this.QX=0,this.tK=!1,this.sK=tm.Un(tm.Qd,(()=>this.iK()),50),this.eK=tm.Un(tm.Hd,Math.max(tm.hardwareConcurrency,8)),this.nK=tm.Un(tm.Hd,20),this.rK=new self.R$(this)}qn(){for(const t of this.zX.values())t.qn();this.zX.clear(),tm.bh(this.YX),this.Nc=null}L$(){return this.Nc}hK(t){this.PX=t}H$(){return this.PX}oK(){return this.BX}aK(t){this.WX=t}z$(){return this.WX}lK(t){this.jX=t}uK(){return this.jX}cK(t){this.VX=t}fK(){return this.VX}dK(){return this.FX}no(t,s){return s=s||this.qX,tm.Zh(t)?("flat"===this.PX&&(t=t.toLowerCase()),this.OX&&this.FX?this.pK(t):"playable-ad-single-file"===this.Nc.SB()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.eK.$u((()=>tm.no(t))):this.nK.$u((()=>tm.no(t)))):tm.no(t)}ro(t){return tm.Zh(t)?("flat"===this.PX&&(t=t.toLowerCase()),this.OX&&this.FX?this.mK(t):"playable-ad-single-file"===this.Nc.SB()?tm.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.qX?this.eK.$u((()=>tm.ro(t))):this.nK.$u((()=>tm.ro(t)))):tm.ro(t)}io(t){return tm.Zh(t)?("flat"===this.PX&&(t=t.toLowerCase()),this.OX&&this.FX?this.gK(t):"playable-ad-single-file"===this.Nc.SB()?tm.ao(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.qX?this.eK.$u((()=>tm.io(t))):this.nK.$u((()=>tm.io(t)))):tm.io(t)}async eo(t){const s=await this.io(t);return JSON.parse(s)}yK(t,s){return"flat"===this.PX&&(t=t.toLowerCase()),this.Nc.y$("runtime","cordova-fetch-local-file",{filename:t,as:s})}gK(t){return this.yK(t,"text")}async pK(t){const s=await this.yK(t,"buffer"),i=Zp(t);return new Blob([s],{type:i})}async wK(t){"flat"===this.PX&&(t=t.toLowerCase());let s=this.AX.get(t);if(s)return s;const i=await this.pK(t);return s=URL.createObjectURL(i),this.AX.set(t,s),s}mK(t){return this.yK(t,"buffer")}U$(t){"flat"===this.PX&&(t=t.toLowerCase());let s=this.WX+t;return"Gecko"===tm.Zs.ni&&"preview"===this.Nc.SB()&&(s=this.SK(s)),s}j$(t){return tm.Kh(t)?Promise.resolve(t):this.OX&&this.FX?this.wK(t):"playable-ad-single-file"===this.Nc.SB()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.PX&&(t=t.toLowerCase()),Promise.resolve(t))}bK(t){if(tm.Kh(t)||"preview"!==this.Nc.SB()||!this.LX||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.LX),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}vK(t){return this.j$(t)}MK(t){if(t.xK&&!sm.has(t.xK))throw new Error("invalid load policy");let s=this.zX.get(t.url);return s||(s=tm.Un(tm.GK,this,{url:t.url,size:t.size||0,xK:t.xK||this.qX}),this.zX.set(s.TK(),s),this.XX||(this.KX+=s.Ou(),this.YX.push(s.CK().then((()=>this.IK(s.Ou()))))),s)}_K(t){this.zX.delete(t.TK())}async EK(){try{await Promise.all(this.YX),this.QX=1}catch(t){console.error("Error loading: ",t),this.tK=!0,this.iK()}}RK(){this.XX=!0}PK(){return this.tK}IK(t){this.ZX+=t,this.sK.pp()}iK(){const t=tm.Un(tm.Event,"loadingprogress");this.QX=tm.Kn(this.ZX/this.KX,0,1),t.progress=this.QX,this.Nc.wf().dispatchEvent(t)}LN(){return this.QX}NN(){return this.Nc.DK().AK()}FK(t){tm.Th(this.JX,t),this.JX.length&&this.YX.push(this.LK())}async LK(){const t=[],s=[];for(const[i,e,n]of this.JX)this.KX+=n,t.push(this.kK(i,e,s).then((()=>this.IK(n))));await Promise.all(t),this.Nc.xk()&&s.length>0&&await this.Nc.y$("runtime","load-webfonts",{webfonts:s})}async kK(t,s,i){try{let e=await this.j$(s);"Gecko"===tm.Zs.ni&&(t=`'${t}'`),("Gecko"===tm.Zs.ni&&"preview"===this.Nc.SB()||"playable-ad-single-file"===this.Nc.SB())&&(e=this.SK(e));const n=new FontFace(t,`url('${e}')`);this.Nc.xk()?self.fonts.add(n):document.fonts.add(n),await n.load(),this.Nc.xk()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}NK(t){return!!this.kX[t]}$K(t,s){this.$X=!!s;for(const[s,i,e]of t)this.NX.set(s,{fileName:s,BK:i.map((t=>({type:t[0],WK:t[1],fullName:s+t[1],fileSize:t[2]}))),jK:e})}VK(t){"flat"===this.PX&&(t=t.toLowerCase());const s=this.NX.get(t);if(!s)return null;let i=null;for(const t of s.BK)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.NK(t.type))return t;return i}HK(t){const s=this.VK(t);return s?{url:this.U$(s.fullName),type:s.type}:null}UK(){if(this.$X){const t=[];for(const s of this.NX.values()){if(s.jK)continue;const i=this.VK(s.fileName);i&&t.push({qK:s.fileName,url:this.U$(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}zK(t){return"preview"===this.Nc.SB()&&(t=new URL(t,location.href).toString()),this.HX.get(t)||null}SK(t){let s=this.UX.get(t);if(s)return s;const i=this.zK(t);return i?(s=URL.createObjectURL(i),this.UX.set(t,s),s):t}ak(){return this.rK}async X$(...t){const s=await Promise.all(t.map((t=>this.j$(t))));if(this.Nc.xk())if(1===t.length){const s=t[0];await import((tm.Zh(s)?"./":"")+s)}else{const s=t.map((t=>`import "${tm.Zh(t)?"./":""}${t}";`)).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map((t=>Qp(t))))}async Z$(t){if(WebAssembly.compileStreaming){const s=await this.j$(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await tm.ro(t);return await WebAssembly.compile(s)}}async tB(t){const s=await this.j$(t);return await this.Nc.y$("runtime","add-stylesheet",{url:s})}}}{const em=self.Is;em.JK=class extends em.Vn{constructor(t,s){super(),this.YK=t,this.Nc=t.L$(),this.XK=s.url||"",this.KK=s.size,this.ZK=s.xK,this.QK=s.blob||null,this.tZ=!!this.QK,this.Sw=null}qn(){this.Sw=null,this.YK=null,this.Nc=null,this.QK=null}TK(){return this.XK}Ou(){return this.KK}CK(){return"local"===this.ZK||this.QK?(this.tZ=!0,Promise.resolve()):(this.Sw||(this.Sw=this.YK.no(this.XK,this.ZK).then((t=>(this.tZ=!0,this.Sw=null,this.QK=t,t))).catch((t=>{console.error("Error loading resource: ",t),this.Sw=null}))),this.Sw)}sZ(){return this.tZ}iZ(){return this.QK?Promise.resolve(this.QK):this.Sw?this.Sw:this.YK.no(this.XK,this.ZK)}}}{const nm=self.Is,rm=new nm.Hd,hm=new Set;nm.GK=class extends nm.JK{constructor(t,s){super(t,s),this.eZ=null,this.nZ=null,this.Hp=0,this.rZ=-1,this.hZ=-1,hm.add(this)}qn(){if(0!==this.Hp)throw new Error("released image asset which still has texture references");this.YK._K(this),this.eZ=null,hm.delete(this),super.qn()}static oZ(){for(const t of hm)t.eZ=null,t.nZ=null,t.Hp=0}rX(t,s){return s=s||{},this.Hp++,this.nZ?Promise.resolve(this.nZ):(this.eZ||(s.Zx=this.Nc.x$().aZ(),this.eZ=this.lZ(t,s)),this.eZ)}async lZ(t,s){try{const i=await this.iZ();return 0===this.Hp?(this.eZ=null,null):await rm.$u((async()=>{const e=await t.VO(i,s);return this.eZ=null,0===this.Hp?(t.hT(e),null):(this.nZ=e,this.rZ=e.jg(),this.hZ=e.Zg(),this.nZ)}))}catch(t){throw console.error("Failed to load texture: ",t),t}}qE(){if(this.Hp<=0)throw new Error("texture released too many times");this.Hp--,0===this.Hp&&this.nZ&&(this.nZ.pM().hT(this.nZ),this.nZ=null)}uZ(){return this.Hp}fT(){return this.nZ}jg(){return this.rZ}Zg(){return this.hZ}async cZ(){const t=await this.iZ();return nm.Pi.ImageBitmap?await createImageBitmap(t):await nm.uo(t)}}}{let om=function(t,s){return t.a$().fZ()-s.a$().fZ()};SortByInstLastCachedZIndex=om;const am=self.Is,lm=self.assert;am.dZ=class extends am.Vn{constructor(t,s,i){super(),this.pZ=t,this.Ea=s,this.Ra=i,this.mZ=[],this.gZ=!0,this.yZ=new Set,this.wZ=!1}qn(){am.bh(this.mZ),this.yZ.clear(),this.pZ=null}$f(){am.bh(this.mZ),this.gZ=!0,this.yZ.clear(),this.wZ=!1}SZ(){this.gZ=!1}Ru(){return!this.mZ.length||!(this.mZ.length>this.yZ.size)&&(this.bZ(),!0)}vZ(t){if(this.yZ.has(t))return this.yZ.delete(t),void(0===this.yZ.size&&(this.wZ=!1));this.mZ.push(t),this.gZ=1===this.mZ.length}Kf(t){this.yZ.add(t),this.wZ=!0,this.yZ.size>=50&&this.bZ()}bZ(){this.wZ&&(this.mZ.length!==this.yZ.size?(am.Rh(this.mZ,this.yZ),this.yZ.clear(),this.wZ=!1):this.$f())}MZ(){this.gZ||(this.mZ.sort(om),this.gZ=!0)}xZ(t){this.bZ(),this.MZ(),this.mZ.length&&t.push(this.mZ)}}}{const um=self.Is;um.GZ=class extends um.Vn{constructor(t,s){super(),this.TZ=t,this.CZ=s,this.IZ=um.Un(um.Iu)}qn(){this.IZ.qn(),this.IZ=null}_Z(t,s,i){let e=this.IZ.qs(t,s);return e||(i?(e=um.Un(um.dZ,this,t,s),this.IZ.Set(t,s,e),e):null)}EZ(t){return Math.floor(t/this.TZ)}RZ(t){return Math.floor(t/this.CZ)}PZ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Gl(e,n))continue;const s=this._Z(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.IZ.Pu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Gl(e,n)||this._Z(e,n,!0).vZ(t)}AZ(t,s){let i=this.EZ(t.Za());const e=this.RZ(t.Qa()),n=this.EZ(t.tl()),r=this.RZ(t.sl());for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this._Z(i,t,!1);e&&e.xZ(s)}}OZ(t){let s=t.Za();const i=t.Qa(),e=t.tl(),n=t.sl();for(;s<=e;++s)for(let t=i;t<=n;++t){const i=this._Z(s,t,!1);i&&i.SZ()}}}}{let cm=function(t,s){return t.a$().fZ()-s.a$().fZ()},fm=function(t,s){return t.a$().XM()-s.a$().XM()};SortByInstLastCachedZIndex=cm,SortByInstZElevation=fm;const dm=self.Is,pm=self.assert,mm=new dm.Rect,gm=new dm._l,ym=[],wm=new dm.Rect,Sm=new dm.Rect,bm=self.ls,vm=bm.ws,Mm=bm.Ss,xm=bm.ds,Gm=xm.create(),Tm=vm.create(),Cm=Mm.create(),Im=vm.create(),_m=vm.create(),Em=vm.create(),Rm=dm.Un(dm._a),Pm=dm.Un(dm.Rect),Am=[],Om=[],Dm=[],Fm={name:"",DZ:-1,FZ:!1,isVisible:!0,Lj:!0,$j:!1,backgroundColor:[1,1,1,1],rV:!0,LZ:[1,1],opacity:1,aV:!1,kZ:!1,NZ:!1,$Z:!1,qj:1,XF:0,iV:0,BZ:[],WZ:[],jZ:[]};dm.VZ=class extends dm.Vn{constructor(t,s,i){super(),i=Object.assign({},Fm,i),this.HZ=t,this.Nc=t.L$(),this.UZ=s,this.Yn=i.name,this.Rw=-1,this.qZ=!!i.$j,this.zZ=-1,this.JZ=i.DZ,this.YZ=!!i.FZ,this.XZ=!!i.isVisible,this.KZ=!!i.Lj,this.ZZ=dm.Un(dm.Go),this.ZZ.wa(i.backgroundColor),this.QZ=!!i.rV,this.tQ=i.LZ[0],this.sQ=i.LZ[1],this.PM=dm.Un(dm.Go,1,1,1,i.opacity),this.iQ=dm.Un(dm.Go),this.eQ=!!i.aV,this.nQ=!!i.kZ,this.rQ=!!i.NZ,this.hQ=!!i.$Z,this.oQ=i.qj,this.RM=i.XF,this.aQ=null,this.lQ=1,this.AM=i.iV,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=!1,this.BP=dm.Un(dm.Rect),this.pQ=dm.Un(dm.Rect),this.mQ=dm.Un(dm.Rect),this.gQ=!0,this.XG=xm.create(),this.yQ=!0,this.DF=xm.create(),this.wQ=!0,this.SQ=dm.Un(dm.kw.Ww),this.bQ=!0,this.vQ=[],this.MQ=i.BZ,this.xQ=[],this.GQ=[],this.TQ=new Map,this.mZ=[],this.CQ=!1,this.IQ=!1,this._Q=!1;const e=this.Nc.x$();this.EQ=dm.Un(dm.RQ,this,i.WZ),this.QL=dm.Un(dm.kw.VD,e.PQ(),{AD:(t,s)=>{const i=s.UL(),n=i.$O();t.FM(i.AQ()),t.zO(n),t.JO(n),e.OQ(n)},DD:t=>this.HW().DQ(t)}),this.FQ=!0,this.LQ=!0,this.kQ=null,this.NQ=[],this.$Q=!1,this.BQ=dm.Un(dm.Rect,0,0,-1,-1),this.WQ=dm.Un(dm.Rect,0,0,-1,-1),this.jQ=new self.lj(this),this.VQ(),this.HQ()&&(this.kQ=dm.Un(dm.GZ,this.Nc.Tk(),this.Nc.Ik())),this.UQ=i.jZ.map((t=>dm.VZ.qQ(this.HZ,this,t)))}zQ(){for(const t of this.MQ){const s=this.Nc.JQ(t[1]);this.HZ.YQ(s),s.XQ()||(s.KQ(t),s.ZQ(this.Rw)),this.xQ.push(t),this.TQ.set(t[2],t)}dm.Th(this.vQ,this.xQ),this.MQ=null}static qQ(t,s,i){return dm.Un(dm.VZ,t,s,{name:i[0],DZ:i[2],isVisible:i[3],Lj:i[13],$j:i[19],backgroundColor:i[4].map((t=>t/255)),rV:i[5],LZ:[i[6],i[7]],opacity:i[8],aV:i[9],kZ:i[17],NZ:i[18],$Z:i[10],qj:i[11],XF:i[12],iV:i[16],BZ:i[14],WZ:i[15],jZ:i[20]})}qn(){for(const t of this.UQ)t.qn();dm.bh(this.UQ);for(const t of this.mZ)this.Nc.OV(t);dm.bh(this.mZ),this.EQ.qn(),this.EQ=null,this.QL.qn(),this.QL=null,this.jQ=null,this.UZ=null,this.HZ=null,this.Nc=null}QQ(t){return this.TQ.get(t)}t0(t){const s=this.HZ.s0();let i=0;const e=this.xQ;for(let n=0,r=e.length;n<r;++n){const r=e[n],h=this.Nc.JQ(r[1]);let o=!0;if(!h.i0()||s){const s=this.Nc.e0(r,this,!0);t.push(s),h.n0()&&(o=!1,this.GQ.push(s.BV()))}o&&(e[i]=e[n],++i)}dm.Sh(e,i),this.Nc.jW(),this.p$()}r0(t,s){if(!t.SW().YB())throw new Error("instance is not of world type");const i=t.a$();if(i.l$()!==this)throw new Error("instance added to wrong layer");this.mZ.push(t),0!==i.XM()&&(this._Q=!0),s&&this.HQ()&&t.a$().NH(),this.p$(t)}h0(t){this.mZ.includes(t)||(this.mZ.push(t),0!==t.a$().XM()&&(this._Q=!0),this.p$(t))}o0(t,s){const i=t.a$();if(i.l$()!==this)throw new Error("instance added to wrong layer");this.mZ.unshift(t),0!==i.XM()&&(this._Q=!0),this.p$(t),s&&this.HQ()&&t.a$().NH()}a0(t,s){const i=this.mZ.indexOf(t);i<0||(s&&this.HQ()&&t.a$().l0(),this.mZ.splice(i,1),this.p$(t),this.u0())}c0(){this._Q=!0}u0(){0===this.mZ.length&&(this._Q=!1)}f0(t){if(t){const t=new Set;for(const s of this.mZ){const i=s.a$().fZ();i>=0&&t.add(i)}let s=-1;for(const i of this.mZ){const e=i.a$();if(!(e.fZ()>=0)){for(++s;t.has(s);)++s;e.d0(s)}}}this.mZ.sort(cm)}p0(){}m0(){for(const t of this.mZ)t.IV().n0()||this.Nc.OV(t);this.Nc.jW(),dm.bh(this.mZ),this._Q=!1,this.p$()}g0(t,s,i,e,n,r){const h=this.Nc.$k(),o=this.Nc.y0(),a=t.w0(),l=[];for(const u of this.xQ){const c=u[0],f=c[0],d=c[1];if(!s.Gl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.S0(p))continue}let m=n;if(!m){const t=this.Nc.h$();this.HN()===t?m=this:(m=t.b0(this.Ec()),m||(m=t.c$(this.ek())))}const g=this.Nc.e0(u,m,!1,void 0,void 0,!1,r);m.kW(g);const y=g.a$();y.WH(i,e),y.NH(),h.NW(!0),g.$W(),h.NW(!1),l.push(g)}return l}DW(){return this.mZ.length}HN(){return this.HZ}Ec(){return this.Yn}v0(t){this.Rw=t}ek(){return this.Rw}M0(t){this.zZ=t}CJ(){return this.zZ}Bj(){return this.qZ}Wj(t){t=!!t,this.qZ!==t&&(this.qZ=t,this.HZ.x0(),this.Nc.m$())}G0(){let t=-1;const s=this.Cj();return t=s?s.Ej().indexOf(this):this.HN().T0().indexOf(this),t}C0(){return this.JZ}L$(){return this.Nc}I0(){return this.YZ}_0(){for(const t of this.Ij())if(t.I0())return!0;return!1}NB(){return this.Nc.NB()}HW(){return this.EQ}ik(){return this.E0(),this.QL}E0(){const t=this.R0();if(!this.FQ&&t===this.LQ&&!this.QL.FF())return;const s=this.HW().P0();this.QL.LF(s.map((t=>t.PC())),{LD:s.map((t=>t.ek())),kD:!t,jD:!0}),this.FQ=!1,this.LQ=t}Fq(){this.HW().Fq(),this.FQ=!0}HQ(){return this.hQ&&!this.rQ}A0(){return this.kQ}O0(){this.$Q=!1}Fj(){for(const t of this.D0())if(!t.Aj())return!1;return!0}Aj(){return this.XZ}Oj(t){t=!!t,this.XZ!==t&&(this.XZ=t,this.Nc.m$())}Nj(t){this.KZ=!!t}kj(){return this.KZ}Vj(){for(const t of this.D0())if(!t.kj())return!1;return!0}dV(t){if(t=!!t,this.dQ!==t){if(this.dQ=t,t){const t=this.HN();this.cQ=t.QW(),this.fQ=t.sj()}this.F0(),this.Nc.m$()}}L0(){return this.dQ}ZW(t){const s=this.HN(),i=s.k0(),e=s.N0();t>e&&(t=e),t<i&&(t=i),this.cQ!==t&&(this.cQ=t,this.L0()&&(this.F0(),this.Nc.m$()))}tj(t){const s=this.HN(),i=s.$0(),e=s.B0();t>e&&(t=e),t<i&&(t=i),this.fQ!==t&&(this.fQ=t,this.L0()&&(this.F0(),this.Nc.m$()))}QW(){return this.L0()?this.cQ:this.HN().QW()}sj(){return this.L0()?this.fQ:this.HN().sj()}mV(){return this.W0(),this.BP}j0(){return this.W0(),this.pQ}V0(){return this.W0(),this.mQ}vj(){const t=this.HN();return[t.H0(),t.U0()]}WS(t){return this.Nc.WS(t)}q0(t,s){const i=this.j0();if(0===t)s.S(i);else{let e=i.hl(),n=i.ol();const r=this.z0(t),h=i.width()/r,o=i.height()/r,[a,l]=this.vj();if(.5!==a||.5!==l){const s=this.J0(),i=this.Nc,r=this.WS()/s;let h=(a-.5)*i.Y0()/r,o=(l-.5)*i.X0()/r;const u=this.KW();0!==u&&(Rm.set(h,o),Rm.rotate(u),h=Rm.Oa(),o=Rm.Fa());const c=dm.mr(s,0,t);e+=dm.It(h,0,c),n+=dm.It(o,0,c)}s.set(e-h/2,n-o/2,e+h/2,n+o/2)}}sO(){return this.PM.Wo()}eO(t){t=dm.Kn(t,0,1),this.PM.Wo()!==t&&(this.PM.Lo(t),this.VQ(),this.Nc.m$())}VQ(){this.iQ.S(this.PM),this.iQ.Ko()}AQ(){return this.iQ}R0(){return this.PM.zo(1,1,1,1)}Jj(){return this.oQ}zj(t){this.oQ!==t&&(this.oQ=t,this.F0(),this.Nc.m$())}Zj(){return this.tQ}sV(){return this.sQ}K0(t,s){this.tQ===t&&this.sQ===s||(this.tQ=t,this.sQ=s,this.F0(),this.Nc.m$())}Kj(t){this.K0(t,this.sV())}tV(t){this.K0(this.Zj(),t)}KM(t){this.AM!==t&&(this.AM=t,this.Nc.m$())}XM(){return this.AM}XW(t){t=dm.Zn(t),this.uQ!==t&&(this.uQ=t,this.F0(),this.Nc.m$())}KW(){return dm.Zn(this.HZ.KW()+this.uQ)}Yj(){return this.uQ}Z0(){return this.mZ.length>0}f$(){return this.mZ}Q0(){return this.t1()&&this.rQ?(dm.Th(Dm,this.f$()),Dm.sort(((t,s)=>this.s1(t,s))),Dm):this.f$()}i1(t){dm.On(t,this.Q0());for(const s of this.UQ)s.Fj()&&s.sO()>0&&s.i1(t)}s1(t,s){const i=this.HN().e1(),e=i[0],n=i[1],r=i[2],h=t.a$(),o=s.a$(),a=h.UM()-e,l=h.JM()-n,u=h.XM()-r,c=o.UM()-e,f=o.JM()-n,d=o.XM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}fV(){return this.ZZ}oV(){return this.QZ}hV(t){t=!!t,this.QZ!==t&&(this.QZ=t,this.Nc.m$())}uV(){return this.eQ}lV(t){t=!!t,this.eQ!==t&&(this.eQ=t,this.Nc.m$())}eV(t){t=!!t,this.nQ!==t&&(this.nQ=t,this.F0(),this.Nc.m$())}nV(){return this.nQ}n1(){return!this.L$().h1()||!this.nQ}t1(){return!this.n1()}o1(){return this.t1()&&this.HN().a1()}l1(){if(!this.o1())return!1;for(const t of this.UQ)if(!t.l1())return!1;return!0}DM(t){this.RM!==t&&(this.RM=t,this.Nc.m$())}cV(){return this.RM}u1(){return!this.UZ}Cj(){return this.UZ}c1(t){this.UZ=t}Ej(){return this.UQ}f1(){return this.UQ.length>0}d1(t,s=!0){s?this.UQ.push(t):this.UQ.unshift(t)}m1(t,s,i){let e=this.UQ.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.UQ.splice(e,0,t)}g1(t){const s=this.UQ.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.UQ.splice(s,1)}w1(){for(const t of this.UQ)if(t.S1())return!0;return!1}*Pj(){for(const t of this.UQ)yield*t.Pj();yield this}*Ij(){let t=this.Cj();for(;t;)yield t,t=t.Cj()}*D0(){yield this,yield*this.Ij()}b1(t){for(const s of this.Ij())if(s===t)return!0;return!1}v1(t){return this===t||this.tQ===t.tQ&&this.sQ===t.sQ&&this.lQ===t.lQ&&this.oQ===t.oQ&&this.uQ===t.uQ&&this.QW()===t.QW()&&this.sj()===t.sj()}M1(){return{parallaxX:this.Zj(),parallaxY:this.sV(),scale:this.Uj(),scaleRate:this.Jj(),angle:this.Yj(),hasOwnScroll:this.L0(),scrollX:this.QW(),scrollY:this.sj()}}G1(t){this.K0(t.parallaxX,t.parallaxY),this.Hj(t.scale),this.zj(t.scaleRate),this.XW(t.angle),this.dV(t.hasOwnScroll),this.ZW(t.scrollX),this.tj(t.scrollY),this.W0()}T1(t){0!==t.size&&dm.Rh(this.mZ,t)>0&&(this.u0(),this.p$())}p$(t){this.CQ=!1,this.$Q=!1,t&&!t.IV().SW().KB()||(this.IQ=!1)}C1(){if(!this.CQ){if(this.mZ.sort(fm),this.HQ())for(let t=0,s=this.mZ.length;t<s;++t){const s=this.mZ[t].a$();s.d0(t),this.kQ.OZ(s.I1())}else for(let t=0,s=this.mZ.length;t<s;++t)this.mZ[t].a$().d0(t);this.CQ=!0}}_1(){if(this.IQ)return;const t=this.HZ.E1(this.CJ()).map((t=>[...t.Pj()])).flat();let s=0;for(const i of t){for(const t of i.f$())t.IV().SW().KB()&&t.a$().R1(s++);i.P1()}}P1(){this.IQ=!0}A1(){return{isVisible:this.Fj(),opacity:this.sO(),isInteractive:this.kj()}}O1(t,s,i){const e=t.a$(),n=s.a$();if(e.l$()!==this||n.l$()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const r=e.u$();let h=n.u$();return r!==h+(i?1:-1)&&(dm.Ch(this.mZ,r),r<h&&h--,i&&h++,h===this.mZ.length?this.mZ.push(t):this.mZ.splice(h,0,t),this.p$(t),!0)}D1(t,s){const i=[];let e=0,n=0,r=t.length,h=s.length;for(;e<r&&n<h;){const r=t[e],h=s[n];r.a$().fZ()<h.a$().fZ()?(i.push(r),++e):(i.push(h),++n)}for(;e<r;++e)i.push(t[e]);for(;n<h;++n)i.push(s[n]);return i}F1(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],n=t[e+1];s.push(this.D1(i,n))}return i%2==1&&s.push(t[i-1]),s}L1(t){for(;t.length>1;)t=this.F1(t);return t[0]}N1(){return this.C1(),dm.bh(ym),this.kQ.AZ(this.mV(),ym),ym.length?1===ym.length?ym[0]:this.L1(ym):[]}S1(){return this.Fj()&&this.sO()>0&&this.B1()}B1(){if(this.Z0()||!this.oV())return!0;for(const t of this.UQ)if(t.B1())return!0;return!1}W1(){return this.uV()||!this.R0()||0!==this.cV()||this.EQ.j1()}V1(){if(this.W1())return!0;for(const t of this.UQ)if(t.V1())return!0;return!1}$O(){return this.aQ}z0(t){if(this.HZ.Gj())return 1;{const s=this.H1();return s/(s-t)}}U1(t){const s=this.Nc.TV();if(this.HZ.Gj())return s;{const i=this.H1();return this.WS()/Math.abs(i-t)*s}}F0(){this.wQ=!0,this.bQ=!0,this.gQ=!0}q1(t){return this.wQ&&(this.z1(t,this.DF,0,0,null),this.wQ=!1),this.DF}J0(t){return this.WS(t)/this.J1()}H1(){return this.o1()?this.HN().e1()[2]:this.J0()}Y1(){if(this.o1()){const t=this.HN().e1();return[t[0],t[1],t[2]]}return this.X1()}X1(t=0,s=0,i=0){const e=this.Nc,n=this.HN(),r=e.K1(),h=e.Z1();let o=(this.QW()-r)*this.tQ+r,a=(this.sj()-h)*this.sQ+h;e.Rk()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=n.Gj()?this.WS(i):this.J0(i),[f,d]=this.vj();if(.5!==f||.5!==d){const t=this.WS(i)/c;let s=(f-.5)*e.Y0()/t,n=(d-.5)*e.X0()/t;const r=this.KW();0!==r&&(Rm.set(s,n),Rm.rotate(r),s=Rm.Oa(),n=Rm.Fa()),l+=s,u+=n}return[l,u,c]}z1(t,s,i,e,n){const r=this.Nc,h=this.HN();if(this.o1()){vm.S(Im,h.e1()),vm.S(_m,h.Q1()),vm.S(Em,h.t2());const t=r.K1(),s=r.Z1(),i=_m[0]-Im[0],e=_m[1]-Im[1],n=_m[2]-Im[2];Im[0]=(Im[0]-t)*this.tQ+t,Im[1]=(Im[1]-s)*this.sQ+s,Im[2]*=Math.max(this.tQ,this.sQ),_m[0]=Im[0]+i,_m[1]=Im[1]+e,_m[2]=Im[2]+n}else{const[t,s,r]=this.X1(i,e,n);vm.set(Im,t,s,r),vm.set(_m,t,s,r-100);const h=this.KW();0===h?vm.set(Em,0,1,0):vm.set(Em,Math.sin(h),Math.cos(h),0)}t.eb(s,Im,_m,Em,n||r.X0())}s2(){this.yQ=!0,this.bQ=!0,this.gQ=!0}i2(t){return this.yQ&&(this.e2(t),this.yQ=!1),this.XG}e2(t){const s=this.Nc.x$(),[i,e]=this.vj();if(this.HZ.Gj())t.ib(this.XG,s.n2(),s.h2());else if(.5===i&&.5===e)xm.S(this.XG,s.o2());else{const n=s.n2(),r=s.h2();t.tb(this.XG,n/r,i,e)}}mX(t,s=!0,i=0,e=0,n=0){s&&t.HA(this.i2(t));let r=null;0===i&&0===e&&0===n?r=this.q1(t):(this.z1(t,Gm,i,e,n),r=Gm),t.XA(r)}a2(t){this.mX(t),t.Vb(this.XM())}l2(t){let s=null;if(t.Bv()&&this.Nc.u2()){const i=this.Nc.x$().c2(this);i&&(s=i.IP(),t.tD(s))}return s}f2(t){if(t.sb()&&this.Nc.u2()){const s=2*(this.ek()+1);t.d2(s,s+1)}}Bx(t,s,i){const e=this.Nc.x$(),n=this.W1();let r=null;const h=this.l2(t);if(this.f2(t),n){const s={Kx:this.Nc._k(),NG:!0,m2:!!t.sb()&&this.Nc.g2()};"low"===e.w2()&&(s.width=e.n2(),s.height=e.h2()),r=this.Nc.S2(s),this.aQ=r,t.UO(r),this.oV()&&t.AO(0,0,0,0)}else this.aQ=s,t.UO(s);if(this.oV()||t.Eu(this.ZZ),this.HZ.b2(t,this.aQ,this.UQ,n&&this.oV()),this.f2(t),this.mX(t),t.Vb(this.XM()),t.FO(this.t1()),this.J1()>Number.EPSILON){this.C1();const s=this.HQ()&&0===this.XM()&&!this._Q;this.o1()?this.v2(t):s?this.M2(t):this.G2(t,this.Q0())}t.Vb(0),t.Ub(0),n&&(t.FO(!1),this.T2(t,r,s,i)),h&&t.iD(h),this.aQ=null}G2(t,s){const i=this.mV(),e=this.aQ,n=this.HN().Gj(),r=this.HN().C2();let h=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===h)continue;h=a;const l=a.a$();l.Fj()&&l.I2(i,r,n)&&this._2(a,l,t,e)}}v2(t){const s=this.aQ,i=this.E2(),e=Am,n=Om,r=this.Q0();for(let h=0,o=r.length;h<o;){const a=r[h],l=a.a$();if(!l.Fj()||!l.R2(i)){++h;continue}(!a.P2()||l.A2()>0)&&n.push(a);const u=a.a$().KH();e.push(a);let c=h+1;for(;c<o;++c){const t=r[c],s=t.a$();if(s.Fj()&&s.R2(i)){if(s.KH()!==u)break;t.P2()?(s.A2()>0&&n.push(t),e.push(t)):n.push(t)}}if(1!==e.length||e[0].O2()){this.D2(t,e);for(let i=0,e=n.length;i<e;++i){const e=n[i],r=e.a$();r.F2(!0),this._2(e,r,t,s),r.F2(!1)}}else{this._2(a,l,t,s);for(let i=0,e=n.length;i<e;++i){const e=n[i];if(e===a)continue;const r=e.a$();r.l$()._2(e,r,t,s)}}h=c,dm.bh(e),dm.bh(n)}}D2(t,s){const i=this.aQ;t.XO();for(let i=0,e=s.length;i<e;++i){const e=s[i],n=e.a$();n.L2(!0),this.N2(e,n,t)}t.KO();for(let e=0,n=s.length;e<n;++e){const n=s[e],r=n.a$();this._2(n,r,t,i),r.L2(!1)}t.QO()}M2(t){const s=this.kQ,i=this.WQ,e=this.BQ,n=this.mV();let r;i.set(s.EZ(n.Za()),s.RZ(n.Qa()),s.EZ(n.tl()),s.RZ(n.sl())),this.$Q&&i.equals(e)?r=this.NQ:(r=this.N1(),this.$Q=!0,e.S(i)),this.G2(t,r),r!==this.NQ&&dm.Th(this.NQ,r)}_2(t,s,i,e){s.j1()?this.B2(t,s,i,e):this.N2(t,s,i)}N2(t,s,i){const e=s.W2();i.Cb()!==e&&e.OM(),t.Bx(i)}B2(t,s,i,e){this.j2(t,s,i,e,null)&&this.mX(i)}j2(t,s,i,e,n){const r=s.LH().ik();return r.qF(i,e,{JF:t,XF:s.cV(),devicePixelRatio:this.Nc.V2(),time:t.H2(),KF:this.Nc.U2()*this.J1(),ZF:this.KW(),xL:s.tU(),GL:r.VL()?null:this.q2(s),rL:n&&n.rL,hL:n&&n.hL,oL:n&&n.oL,aL:n&&n.aL,lL:n&&n.lL,uL:n&&n.uL}),i.Vb(this.XM()),r.ZA()}T2(t,s,i,e){const n=this.EQ.P0(),r=this.Nc;0===n.length?(t.UO(i),t.lb(),e&&0===this.RM&&this.R0()?t.qO(s):(t.DM(this.RM),t.FM(this.iQ),t.zO(s)),t.JO(s),r.OQ(s)):this.ik().qF(t,i,{JF:this,XF:this.cV(),devicePixelRatio:r.V2(),KF:r.U2()*this.J1(),ZF:this.KW(),xL:this.mV(),GL:null,FD:!0})}Uj(){return this.lQ}Hj(t){this.lQ!==t&&(this.lQ=t,this.HZ.z2(),this.F0(),this.Nc.m$())}TV(){return this.J1()*this.Nc.TV()}DJ(){return this.J1()*this.Nc.DJ()}J1(){return(this.lQ*this.HZ.YW()-1)*this.oQ+1}W0(){if(!this.gQ)return;this.gQ=!1;const t=this.Nc.K1(),s=this.Nc.Z1(),i=(this.QW()-t)*this.tQ+t,e=(this.sj()-s)*this.sQ+s,n=this.J1(),r=this.Nc.Y0()/n,h=this.Nc.X0()/n;let o=i-r/2,a=e-h/2;this.Nc.Rk()&&(o=Math.round(o),a=Math.round(a));const l=this.pQ;l.set(o,a,o+r,a+h);const u=this.KW();0!==u&&(mm.S(l),mm.offset(-l.hl(),-l.ol()),gm.Xl(mm,u),gm.Zl(mm),mm.offset(l.hl(),l.ol()),l.S(mm));const c=this.AM;this.q0(c,this.BP),this.o1()?this.J2(c,this.mQ):this.mQ.S(this.BP)}J2(t,s){const i=this.Nc.x$(),e=i.RB(),n=i.AB(),[r,h]=this.yV(0,0,t),[o,a]=this.yV(e,0,t),[l,u]=this.yV(e,n,t),[c,f]=this.yV(0,n,t);let d=Math.min(r,o,l,c),p=Math.min(h,a,u,f),m=Math.max(r,o,l,c),g=Math.max(h,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}yV(t,s,i=0){return this.Y2(t,s,i,this.DJ())}vV(t,s,i=0){return this.Y2(t,s,i,this.TV()*this.NB())}Y2(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.J1(),o=n.Y0()/h,a=n.X0()/h,l=Cm;Mm.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.i2(r),c=this.q1(r),f=Tm;return dm.kw.Bw(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}X2(t,s){const i=this.lQ,e=this.oQ,n=this.tQ,r=this.sQ,h=this.uQ;this.lQ=1,this.oQ=1,this.tQ=1,this.sQ=1,this.uQ=0,this.F0();const o=this.yV(t,s);return this.lQ=i,this.oQ=e,this.tQ=n,this.sQ=r,this.uQ=h,this.F0(),o}SV(t,s,i=0){return this.K2(t,s,i,this.DJ())}xV(t,s,i=0){return this.K2(t,s,i,this.TV()*this.NB())}K2(t,s,i,e){const n=this.Nc,r=n.pM(),h=this.J1(),o=n.Y0()/h,a=n.X0()/h,l=Cm;Mm.set(l,0,0,o,a);const u=this.i2(r),c=this.q1(r),f=Tm;return dm.kw.Nw(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Z2(t,s){return t*=this.TV()*this.NB(),0!==s&&(t*=this.z0(s)),t}q2(t){const s=t.tU(),i=t.KH(),e=t.A2(),n=i+e,r=s.Za(),h=s.Qa(),o=s.tl(),a=s.sl();if(this.o1()){if(this.Q2(r,h,i)||this.Q2(o,h,i)||this.Q2(o,a,i)||this.Q2(r,a,i))return null;if(e>0&&(this.Q2(r,h,n)||this.Q2(o,h,n)||this.Q2(o,a,n)||this.Q2(r,a,n)))return null}else if(n>=this.J0())return null;let[l,u]=this.xV(r,h,i),[c,f]=this.xV(o,a,i);if(0!==this.KW()||e>0||this.o1()){const[t,s]=this.xV(o,h,i),[d,p]=this.xV(r,a,i);if(e>0){const[i,e]=this.xV(r,h,n),[m,g]=this.xV(o,h,n),[y,w]=this.xV(o,a,n),[S,b]=this.xV(r,a,n);let v=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=v,v=Math.min(u,f,s,p,e,g,w,b),f=Math.max(u,f,s,p,e,g,w,b),u=v}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return mm.set(l,u,c,f),mm}E2(){return this.bQ&&(this.t3(),this.bQ=!1),this.SQ}t3(){const t=this.Nc.pM(),s=this.i2(t),i=this.q1(t);this.SQ.Jw(i,s)}Q2(t,s,i){return this.E2().Xw(t,s,i)}s3(){return{d:this.I0(),s:this.Uj(),a:this.Yj(),v:this.Aj(),i:this.kj(),html:this.Bj(),bc:this.ZZ.toJSON(),t:this.oV(),sx:this.cQ,sy:this.fQ,hosp:this.dQ,px:this.Zj(),py:this.sV(),c:this.PM.toJSON(),sr:this.Jj(),fx:this.EQ.hx(),cg:this.GQ}}i3(t){this.YZ=!!t.d,this.lQ=t.s,this.uQ=t.a,this.XZ=!!t.v,this.KZ=!t.hasOwnProperty("i")||t.i,this.qZ=!!t.html,this.ZZ.wa(t.bc),this.QZ=!!t.t,t.hasOwnProperty("sx")&&(this.cQ=t.sx),t.hasOwnProperty("sy")&&(this.fQ=t.sy),t.hasOwnProperty("hosp")&&(this.dQ=!!t.hosp),this.tQ=t.px,this.sQ=t.py,this.PM.wa(t.c),this.VQ(),this.oQ=t.sr,dm.Th(this.GQ,t.cg),dm.Th(this.xQ,this.vQ);const s=new Set(this.GQ);let i=0;for(let t=0,e=this.xQ.length;t<e;++t)s.has(this.xQ[t][2])||(this.xQ[i]=this.xQ[t],++i);dm.Sh(this.xQ,i),this.EQ.ox(t.fx),this.FQ=!0}e3(){this.f0(!1),this.p$(),this.F0(),this.s2()}nj(){return this.jQ}kW(t,s=!1){if(this.mZ.includes(t))s&&this.mZ.sort(((t,s)=>t.a$().n3()-s.a$().n3()));else if(t.r3()){const s=[...t._U()];s.push(t),s.sort(((t,s)=>t.a$().n3()-s.a$().n3()));for(const t of s)if(t.NV())for(const i of t.$V()){if(s.includes(i))continue;const t=[...i._U()];t.push(i),t.sort(((t,s)=>t.a$().n3()-s.a$().n3())),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.SW().YB()&&this.r0(t,!0)}else{if(t.SW().YB()&&this.r0(t,!0),!t.NV())return;for(const s of t.$V()){const t=[...s._U()];if(t.push(s),t.sort(((t,s)=>t.a$().n3()-s.a$().n3())),t&&t.length)for(const s of t)s.SW().YB()&&this.r0(s,!0)}}}}}{let Lm=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},km=function(t,s){Km!==t&&(t.a2(s),Km=t)};vec3EqualsXYZ=Lm,MaybePrepareLayerDraw=km;const Nm=self.Is,$m=self.wH,Bm=self.assert,Wm=Nm.Un(Nm.Rect),jm=Nm.Un(Nm.Rect),Vm=Nm.Un(Nm.Rect),Hm=Nm.Un(Nm.Go),Um=self.ls,qm=Um.ws,zm=[],Jm=[],Ym=[],Xm=[];let Km=null;Nm.h3=class extends Nm.Vn{constructor(t,s,i){super(),this.o3=t,this.Nc=t.L$(),this.Yn=i[0],this.a3=i[1],this.l3=i[2],this.Ey=i[1],this.Ry=i[2],this.u3=!!i[3],this.c3=!!i[4],this.f3=i[5],this.d3=i[6],this.m3=i[7],this.g3=null,this.JZ=i[8],this.Rw=s,this.cQ=0,this.fQ=0,this.lQ=1,this.uQ=0,this.y3=new Set,this.w3=new Set,this.S3=new Set,this.b3=[],this.v3=[],this.M3=new Map,this.x3=new Map,this.G3=[],this.T3=!1,this.C3=qm.create(),this.I3=qm.create(),this._3=qm.create(),this.E3=[],this.R3=[],this.P3=new Map,this.A3=new Map,this.O3=-1;const e=this.Nc.x$();this.EQ=Nm.Un(Nm.RQ,this,i[11]),this.QL=Nm.Un(Nm.kw.VD,e.PQ(),{AD:(t,s)=>{const i=s.UL().$O();t.nO(),t.zO(i),t.JO(i),e.OQ(i)},DD:t=>this.HW().DQ(t)}),this.FQ=!0,this.D3=!1,this.aQ=null,this.F3={},this.L3=new Map,this.N3=!0,this.B3=new self.VW(this),this.W3=Nm.Un(Nm.Event.wf);for(const t of i[9])this.E3.push(Nm.VZ.qQ(this,null,t));this.j3();for(const t of this.oj())t.zQ();for(const t of i[10]){const s=this.Nc.JQ(t[1]);if(!s)throw new Error("missing nonworld object class");s.XQ()||s.KQ(t),this.G3.push(t),this.YQ(s)}}qn(){for(const t of this.R3)t.qn();Nm.bh(this.R3),this.S3.clear(),this.g3=null,this.o3=null,this.Nc=null}L$(){return this.Nc}Ec(){return this.Yn}C0(){return this.JZ}ek(){return this.Rw}HW(){return this.EQ}ik(){return this.E0(),this.QL}E0(){const t="low"===this.Nc.x$().w2();if(!this.FQ&&this.D3===t&&!this.QL.FF())return;const s=this.HW().P0();this.QL.LF(s.map((t=>t.PC())),{LD:s.map((t=>t.ek())),ND:t,jD:!0}),this.FQ=!1,this.D3=t}Fq(){this.HW().Fq(),this.FQ=!0}V3(){let t=this.R3[0].J1();for(let s=1,i=this.R3.length;s<i;++s){const i=this.R3[s];0===i.Zj()&&0===i.sV()||(t=Math.min(t,i.J1()))}return t}H3(){return.5*this.Nc.Y0()/this.V3()}U3(){return.5*this.Nc.X0()/this.V3()}k0(){return this.q3()?-1/0:this.H3()}N0(){return this.q3()?1/0:this.jg()-this.H3()}$0(){return this.q3()?-1/0:this.U3()}B0(){return this.q3()?1/0:this.Zg()-this.U3()}ZW(t){const s=this.k0(),i=this.N0();t>i&&(t=i),t<s&&(t=s),this.cQ!==t&&(this.cQ=t,this.z3(),this.Nc.m$())}QW(){return this.cQ}tj(t){const s=this.$0(),i=this.B0();t>i&&(t=i),t<s&&(t=s),this.fQ!==t&&(this.fQ=t,this.z3(),this.Nc.m$())}sj(){return this.fQ}q3(){return this.u3}z2(){this.ZW(this.QW()),this.tj(this.sj());for(const t of this.R3)t.L0()&&(t.ZW(t.QW()),t.tj(t.sj()))}Sj(t,s){this.f3===t&&this.d3===s||(this.f3=t,this.d3=s,this.J3()&&(this.Y3(),this.z3(),this.Nc.m$()))}H0(){return this.Gj()?.5:this.f3}U0(){return this.Gj()?.5:this.d3}C2(){const t=this.H0(),s=this.U0();return t<0||t>1||s<0||s>1}Mj(){this.c3&&(this.c3=!1,this.Y3(),this.z3(),this.Nc.m$())}xj(){this.c3||(this.c3=!0,this.Y3(),this.z3(),this.Nc.m$())}Gj(){return this.c3}J3(){return!this.Gj()}X3(t){t=!!t,this.T3!==t&&(this.T3=t,this.z3(),this.Nc.m$())}a1(){return this.T3}K3(t,s,i,e,n,r,h,o,a){Lm(this.C3,t,s,i)&&Lm(this.I3,e,n,r)&&Lm(this._3,h,o,a)||(qm.set(this.C3,t,s,i),qm.set(this.I3,e,n,r),qm.set(this._3,h,o,a),this.Z3())}Z3(){this.z3(),this.Nc.m$()}e1(){return this.C3}Q1(){return this.I3}t2(){return this._3}YW(){return this.lQ}JW(t){this.lQ!==t&&(this.lQ=t,this.z3(),this.z2(),this.Nc.m$())}XW(t){t=Nm.Zn(t),this.uQ!==t&&(this.uQ=t,this.z3(),this.Nc.m$())}KW(){return this.uQ}jg(){return this.Ey}Yg(t){!isFinite(t)||t<1||(this.Ey=t)}Zg(){return this.Ry}Vg(t){!isFinite(t)||t<1||(this.Ry=t)}Q3(){return this.g3}T0(){return this.E3}*oj(){for(const t of this.E3)yield*t.Pj()}hj(){return this.R3}t4(){return this.R3.length}l$(t){return"number"==typeof t?this.c$(t):this.b0(t.toString())}c$(t){return t=Nm.Kn(Math.floor(t),0,this.R3.length-1),this.R3[t]}b0(t){return this.P3.get(t.toLowerCase())||null}s4(t){return!!this.b0(t)}i4(t){return this.A3.get(t)||null}Y3(){for(const t of this.R3)t.s2()}z3(){for(const t of this.R3)t.F0()}cj(t,s,i){if(this.s4(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.Cj(),n=Nm.Un(Nm.VZ,this,e,{name:t,DZ:Math.floor(1e15*Math.random()),FZ:!0});this.e4(n,s,i),this.L$().m$(),this.x0()}dj(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.n4(t),this.e4(t,s,i),this.L$().m$(),this.x0())}mj(t){if(this.n4(t)){const s=this.Nc.$k();s.NW(!0),t.qn(),s.NW(!1),this.L$().m$(),this.x0()}}yj(){const t=new Set;for(const s of this.oj())s.I0()&&!s._0()&&t.add(s);if(0===t.size)return;const s=this.Nc.$k();s.NW(!0);for(const s of t)this.n4(s),s.qn();s.NW(!1),this.L$().m$(),this.x0()}e4(t,s,i){if(i>=2)if(s){if(s===t||s.b1(t))throw new Error(`cannot move layer '${t.Ec()}' to sub-layer of itself`);s.d1(t,2===i),t.c1(s)}else 2===i?this.E3.push(t):this.E3.unshift(t),t.c1(null);else{const e=s.Cj();if(e){if(s.b1(t))throw new Error(`cannot move layer '${t.Ec()}' to sub-layer of itself`);e.m1(t,s,0===i),t.c1(e)}else{let e=this.E3.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.E3.splice(e,0,t),t.c1(null)}}}n4(t){const s=t.Cj();if(s)return s.g1(t),!0;if(this.E3.length>1){const s=this.E3.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.E3.splice(s,1),!0}return!1}j3(){this.R3=[...this.oj()],this.P3.clear(),this.A3.clear();for(let t=0,s=this.R3.length;t<s;++t){const s=this.R3[t];s.v0(t),this.P3.set(s.Ec().toLowerCase(),s),this.A3.set(s.C0(),s)}}r4(){let t=0;for(const s of this.E3){for(const i of s.Pj())i.M0(t);s.Bj()&&t++}}h4(){return this.E3.at(-1).CJ()+1}async x0(){this.j3(),this.r4(),this.O3=this.h4()}o4(){return this.O3}a4(){this.O3=-1}E1(t){const s=[];for(const i of this.E3){const e=i.CJ();if(e===t)s.push(i);else if(e>t)break}return s}M1(){return{scrollX:this.QW(),scrollY:this.sj(),scale:this.YW(),angle:this.KW(),vpX:this.H0(),vpY:this.U0()}}G1(t){this.ZW(t.scrollX),this.tj(t.scrollY),this.JW(t.scale),this.XW(t.angle),this.Sj(t.vpX,t.vpY)}l4(){let t=this.E3.filter((t=>t.S1()))[0];for(;t;){if(!t.oV())return Hm.ko(t.fV()),Hm.Lo(1),Hm;if(t.W1())return Hm.Eo(0,0,0,0),Hm;t=t.Ej().filter((t=>t.S1()))[0]}return Hm.Eo(0,0,0,0),Hm}s0(){return this.N3}u4(){return[...this.y3]}YQ(t){if(t.NV())for(const s of t.f4().c4())this.y3.add(s);else this.y3.add(t)}d4(){return[...this.w3]}m4(t,s){if(t===this||!s)return Promise.resolve();t&&(Nm.mo(this.w3,t.w3),t.w3.clear());const i=[];for(const t of this.y3)this.w3.has(t)||(i.push(t.g4(s)),this.w3.add(t));return Promise.all(i)}async y4(t){if(t.w0())throw new Error("cannot load textures for family");const s=this.Nc.pM();if(!s||s.QR()||this.w3.has(t))return;this.w3.add(t);const i=t.g4(s);this.w4(i),await i,t.S4(),this.Nc.m$()}w4(t){this.S3.add(t),t.then((()=>this.S3.delete(t))).catch((()=>this.S3.delete(t)))}b4(){return Promise.all([...this.S3])}v4(t){if(t.w0()||t.DW()>0)throw new Error("cannot unload textures");const s=this.Nc.pM();s&&this.w3.has(t)&&(this.w3.delete(t),t.M4(s))}x4(t,s){if(t!==this&&s)for(const s of this.w3)s.n0()||t.y3.has(s)||(s.M4(),this.w3.delete(s))}G4(){this.w3.clear()}async T4(t){const s=this.Nc,i=this.o3,e=s.$k();this.m3&&(this.g3=e.C4(this.m3),this.g3.I4()),i._4(this),this.Ey=this.a3,this.Ry=this.l3,this.cQ=s.Tk()/2,this.fQ=s.Ik()/2,this.z2(),this.Y3(),this.z3(),this.r4(),await this.Nc.x$().E4(this.h4(),!0),this.R4(t),this.Nc.P4(!0),this.A4(),this.N3||this.O4(),this.D4(this.b3),this.D4(this.v3),this.F4(),i.L4(),s.jW(),this.Nc.P4(!1);const n=this.Nc.N4();if(await Promise.all(n),Nm.bh(n),!s.B4()){for(const t of this.b3)t.W4();for(const t of this.v3)t.j4(this.M3,this.x3);for(const[t,s]of Object.entries(this.F3)){const i=this.Nc.dY(parseInt(t,10));i&&!i.w0()&&i.i0()&&Nm.bh(s)}for(const t of this.b3)t.V4();for(const t of this.v3)t.V4();for(const t of this.b3)t.OU()||t.H4();for(const t of this.v3)t.OU()||t.H4()}Nm.bh(this.b3),Nm.bh(this.v3),this.M3.clear(),this.x3.clear(),await Promise.all([...this.y3].map((t=>t.U4(this.Nc.pM())))),t&&(s.wf().dispatchEvent(new Nm.Event("beforefirstlayoutstart")),await s.q4(new Nm.Event("beforeprojectstart"))),await this.z4(new Nm.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new Nm.Event("beforelayoutstart")),await this.q4(new Nm.Event("beforelayoutstart")),s.B4()||await s.T$(Nm.E$._$.I$.J4,null,null),s.wf().dispatchEvent(new Nm.Event("afterlayoutstart")),await this.q4(new Nm.Event("afterlayoutstart")),await this.z4(new Nm.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new Nm.Event("afterfirstlayoutstart")),await s.q4(new Nm.Event("afterprojectstart"))),e.Y4(i),await this.b4(),this.N3=!1}R4(t){for(const t of this.Nc.y0())if(!t.w0()&&t.YB())for(const s of t.PW()){const t=s.a$(),i=t.l$(),e=Nm.Kn(i.ek(),0,this.R3.length-1),n=this.R3[e];t.d$(n,!0),n.h0(s)}if(!t)for(const t of this.R3)t.f0(!1)}A4(){for(const t of this.R3)t.t0(this.b3),t.p0()}O4(){let t=!1;for(const[s,i]of Object.entries(this.F3)){const e=this.Nc.dY(parseInt(s,10));if(e&&!e.w0()&&e.i0())for(const s of i){let i=null;if(e.YB()&&(i=s.hasOwnProperty("instJson")?this.i4(s.instJson.w.l):this.i4(s.w.l),!i))continue;const n=this.Nc.e0(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?n.ox(s.instJson):n.ox(s),t=!0,this.v3.push(n),s.hasOwnProperty("instJson")&&(this.M3.set(n,s),this.x3.set(s.index,n))}}for(const t of this.R3)t.f0(!0),t.p$();t&&(this.Nc.jW(),this.Nc.X4())}D4(t){for(const s of t){if(!s.NV())continue;const i=s.a$(),e=s.jV();for(const n of s.IV().f4().K4()){if(n===s.IV())continue;const r=n.PW();if(r.length>e)s.Z4(r[e]);else{let e;e=i?this.Nc.e0(n,i.l$(),!0,i.UM(),i.JM(),!0):this.Nc.e0(n,null,!0,0,0,!0),this.Nc.jW(),n.Q4(),s.Z4(e),t.push(e)}}}}F4(){for(const t of this.G3)this.Nc.JQ(t[1]).NV()||this.Nc.e0(t,null,!0)}t5(){const t=[],s=this.G3;let i=0;for(let e=0,n=s.length;e<n;++e){const n=s[e],r=this.Nc.JQ(n[1]);r.n0()?r.NV()&&r.f4().s5()||t.push(this.Nc.e0(n,null,!0)):(s[i]=n,++i)}Nm.Sh(s,i),this.Nc.jW(),this.D4(t)}g0(t,s,i,e,n,r,h){if(i)return i.g0(t,s,n,r,e,h);{const i=[];for(const o of this.R3)i.push(o.g0(t,s,n,r,e,h));return i.flat()}}async i5(){const t=this.o3;this.Nc.B4()||(await this.z4(new Nm.Event("beforeanylayoutend")),await this.q4(new Nm.Event("beforelayoutend")),await this.Nc.T$(Nm.E$._$.I$.e5,null,null),await this.q4(new Nm.Event("afterlayoutend")),await this.z4(new Nm.Event("afteranylayoutend"))),t.n5(!0),this.Nc.$k().r5(),this.N3||this.h5();for(const t of this.R3)t.m0();for(const t of this.Nc.y0())if(!(t.n0()||t.YB()||t.SW().zB()||t.w0())){for(const s of t.PW())this.Nc.OV(s);this.Nc.jW()}t.n5(!1),t.BN()===this&&t._4(null)}o5(t,s){const i=t.IV().C0().toString();this.F3.hasOwnProperty(i)||(this.F3[i]=[]);const e=this.F3[i],n={index:s,instJson:t.hx(),sceneGraphJson:{children:[]}};e.push(n),this.L3.set(t,n)}a5(t){const s=this.L3.get(t);for(const i of t.l5()){const t=this.L3.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Nm.c5.u5(i.a$())})}}h5(){this.L3.clear();let t=0;for(const s of this.R3){s.C1();for(const i of s.f$()){const s=i.IV();!s.n0()&&s.i0()&&(this.o5(i,t),t++)}}for(const t of this.R3)for(const s of t.f$()){const t=s.IV();!t.n0()&&t.i0()&&this.a5(s)}this.L3.clear()}f5(){this.F3={},this.N3=!0}$O(){return this.aQ}W1(){const t=this.Nc,s=t.pM().Bv();return"low"===t.x$().w2()||s&&t.g2()||this.EQ.j1()||s&&t.h1()}d5(t){const s=this.Nc.x$();if(this.W1()){t.UO(null),t.AO(0,0,0,0);const i={Kx:this.Nc._k(),NG:t.sb()||this.Nc.g2()||this.EQ.j1(),m2:!!t.sb()&&this.Nc.g2()};"low"===s.w2()&&(i.width=s.n2(),i.height=s.h2()),this.aQ=this.Nc.S2(i)}else this.aQ=null}p5(t){this.Nc.m5(t)&&(t.FO(!1),t.UO(null),t.lb(),t.qO(this.aQ))}g5(t){this.W1()&&(t.FO(!1),this.y5(t,this.aQ))}w5(t){t.UO(this.aQ),t.Eu(this.l4()),this.Nc.h1()&&t.DO();const s=this.E1(0);this.b2(t,this.aQ,s,!0),t.sb()&&t.d2(0,1),this.g5(t),this.aQ=null}S5(t,s){let i=null;this.Nc.m5(t)&&(i=this.aQ),t.UO(i),t.AO(0,0,0,0),this.Nc.h1()&&t.DO();const e=this.E1(s);this.b2(t,i,e,!0),this.p5(t),t.Ov(),this.Nc.x$().b5(s)}b2(t,s,i,e){const n=i.filter((t=>t.S1()));for(let i=0,r=n.length;i<r;){const h=n[i];if(h.l1()&&!h.V1()){zm.push(h);for(let t=i+1;t<r;++t){const s=n[t];if(!s.l1()||s.V1())break;zm.push(n[t])}if(zm.length>=2||1===zm.length&&zm[0].w1()){this.v5(t,s,zm),i+=zm.length,Nm.bh(zm);continue}Nm.bh(zm)}h.Bx(t,s,e&&0===i),++i}}y5(t,s){const i=this.EQ.P0(),e=this.Nc;0===i.length?(t.UO(null),t.lb(),t.qO(s),t.JO(s),e.OQ(s)):(Vm.set(0,0,e.Y0(),e.X0()),this.ik().qF(t,null,{JF:this,XF:3,devicePixelRatio:this.Nc.V2(),KF:this.Nc.U2()*this.YW(),ZF:this.KW(),xL:Vm,GL:null,FD:!0}))}v5(t,s,i){i[0].oV()||(Hm.ko(i[0].fV()),Hm.Lo(1),t.Eu(Hm)),this.Nc.x$(),t.FO(!0);const e=Jm,n=Ym,r=Xm;for(const t of i)t.C1(),t.i1(e);const h=i[0],o=h.l2(t);h.f2(t);for(let i=0,h=e.length;i<h;){const o=e[i],a=o.a$(),l=a.l$();if(!a.Fj()||!a.R2(l.E2())){++i;continue}(!o.P2()||a.A2()>0)&&r.push(o);const u=o.a$().KH();n.push(o);let c=i+1;for(;c<h;++c){const t=e[c],s=t.a$();if(s.Fj()&&s.R2(s.l$().E2())){if(s.KH()!==u)break;t.P2()?(s.A2()>0&&r.push(t),n.push(t)):r.push(t)}}if(1!==n.length||n[0].O2()){this.M5(t,s,n);for(let i=0,e=r.length;i<e;++i){const e=r[i],n=e.a$(),h=n.l$();n.F2(!0),km(h,t),h._2(e,n,t,s),n.F2(!1)}}else{km(l,t),l._2(o,a,t,s);for(let i=0,e=r.length;i<e;++i){const e=r[i];if(e===o)continue;const n=e.a$(),h=n.l$();km(h,t),h._2(e,n,t,s)}}i=c,Nm.bh(n),Nm.bh(r)}o&&t.iD(o),Nm.bh(e),Km=null}M5(t,s,i){t.XO();for(let s=0,e=i.length;s<e;++s){const e=i[s],n=e.a$(),r=n.l$();n.L2(!0),km(r,t),r.N2(e,n,t)}t.KO();for(let e=0,n=i.length;e<n;++e){const n=i[e],r=n.a$(),h=r.l$();km(h,t),h._2(n,r,t,s),r.L2(!1)}t.QO()}s3(){const t={sx:this.QW(),sy:this.sj(),s:this.YW(),a:this.KW(),w:this.jg(),h:this.Zg(),ortho:this.Gj(),vpX:this.H0(),vpY:this.U0(),fv:this.N3,persist:this.F3,fx:this.EQ.hx(),layers:{},dynamicLayers:[]};for(const s of this.R3)if(s.I0()){const i=s.Cj();t.dynamicLayers.push({sid:s.C0(),name:s.Ec(),parentSid:i?i.C0():null,siblingIndex:s.G0(),data:s.s3()})}else t.layers[s.C0().toString()]=s.s3();return t}i3(t){this.cQ=t.sx,this.fQ=t.sy,this.lQ=t.s,this.uQ=t.a,this.Ey=t.w,this.Ry=t.h,this.c3=!!t.ortho,t.hasOwnProperty("vpX")&&(this.f3=t.vpX),t.hasOwnProperty("vpY")&&(this.d3=t.vpY),this.N3=!!t.fv,this.F3=t.persist,this.EQ.ox(t.fx),this.FQ=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.i4(t);e&&e.i3(i)}if(t.hasOwnProperty("dynamicLayers")){this.yj(),this.Nc.jW();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],n=e.sid,r=e.name,h=e.parentSid,o=e.siblingIndex,a=e.data;if(this.j3(),this.s4(r)||this.i4(n))continue;let l,u;if(null===h)l=null,u=this.E3;else{if(l=this.i4(h),!l)continue;u=l.Ej()}const c=Nm.Un(Nm.VZ,this,l,{name:r,DZ:n,FZ:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({kH:c,x5:o}),c.i3(a)}for(const[t,i]of s){i.sort(((t,s)=>t.x5-s.x5));for(const s of i){const i=s.kH,e=s.x5;let n=t.indexOf(i);t.splice(n,1),t.splice(e,0,i)}}}this.x0(),this.Y3(),this.z3()}WN(){return this.B3}Fk(){return this.W3}G5(t){t.layout=this.WN();const s=this.Nc,i=s.yH()&&!s.$k().BW();i&&$m.T5(),this.W3.dispatchEvent(t),i&&$m.C5()}q4(t){return t.layout=this.WN(),this.W3.Cf(t)}z4(t){return t.layout=this.WN(),this.Nc.q4(t)}I5(){this._5(this.E3)}_5(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Ec()}`),this._5(t.Ej(),s+1)}}}{const Zm=self.Is;Zm.E5=class extends Zm.Vn{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#r=null;#h=0;#d=null;constructor(t){super(),this.#s=t}qn(){this.#s=null,this.#e=null,this.#r=null,this.#d=null,Zm.bh(this.#i),this.#f.clear(),this.#a.clear(),Zm.bh(this.#t)}AT(t){const s=Zm.Un(Zm.h3,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Ec().toLowerCase(),s),this.#a.set(s.C0(),s)}L$(){return this.#s}R5(t){this.#r=t}P5(){if(this.#r)return this.#r;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}A5(t){return this.#f.get(t.toLowerCase())||null}O5(t){return this.#a.get(t)||null}D5(t){return t=Zm.Kn(Math.floor(t),0,this.#i.length-1),this.#i[t]}HN(t){return"number"==typeof t?this.D5(t):this.A5(t.toString())}qN(){return this.#i}_4(t){this.#e=t}BN(){return this.#e}F5(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}L5(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*k5(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}N5(t){return this.#e===t||this.#t.includes(t)}n5(t){if(t)this.#h++;else{if(this.#h<=0)throw new Error("already unset");this.#h--}}WW(){return this.#h>0}YN(t){this.#d=t}L4(){this.#d=null}JN(){return!!this.#d}B5(){return this.#d}W5(){const t=this.BN();t&&t.Y3()}j5(){const t=this.BN();t&&t.z3()}}}{const Qm=self.Is,tg=new RegExp("<(.+?)>","g");Qm.V5=class extends Qm.Vn{constructor(t){super(),this.Nc=t,this.H5=Qm.Un(Qm.U5),this.q5=null,this.z5=[],this.J5=new Map,this.Y5=new Map,this.X5=new Map,this.K5=[],this.Z5=[],this.Q5=[],this.t6=!1,this.s6=!1,this.i6=!1,this.e6=()=>this.n6(),this.r6=()=>this.h6(),this.o6=()=>this.a6(),this.l6=()=>this.u6(),this.c6=t=>this.f6(t._q),this.d6=t=>this.p6(),this.m6=t=>this.g6(),this.y6=t=>this.w6(),this.S6=[],this.b6=0}qn(){this.v6(),this.e6=null,this.r6=null,this.o6=null,this.l6=null,this.c6=null,this.m6=null;for(const t of this.z5)t.Sz(),t.qn();Qm.bh(this.z5),this.z5=null,this.H5.qn(),this.H5=null,Qm.bh(this.K5),this.K5=null,Qm.bh(this.Z5),this.Z5=null,Qm.bh(this.Q5),this.Q5=null,this.J5.clear(),this.J5=null,this.Y5.clear(),this.Y5=null,this.X5.clear(),this.X5=null,Qm.bh(this.S6),this.S6=null,this.Nc=null}M6(){const t=this.Nc.wf();t.addEventListener("pretick",this.e6),t.addEventListener("tick2",this.r6),t.addEventListener("beforelayoutchange",this.o6),t.addEventListener("layoutchange",this.l6),t.addEventListener("instancedestroy",this.c6),t.addEventListener("beforeload",this.d6),t.addEventListener("afterload",this.m6),t.addEventListener("afterlayoutstart",this.y6)}v6(){const t=this.Nc.wf();t.removeEventListener("pretick",this.e6),t.removeEventListener("tick2",this.r6),t.removeEventListener("beforelayoutchange",this.o6),t.removeEventListener("layoutchange",this.l6),t.removeEventListener("instancedestroy",this.c6),t.removeEventListener("beforeload",this.d6),t.removeEventListener("afterload",this.m6),t.removeEventListener("afterlayoutstart",this.y6)}AT(t){this.H5.$u(t);const s=Qm.G6.x6(t,this);this.$u(s),this.T6(s),this.X5.set(s.Ec(),0)}C6(t){const s=this.I6(),i=t.HV(),e=s.qs(i),n=Qm.G6.C6(`${i}:${this.X5.get(i)}`,e,this);return this._6(i),this.$u(n),n}_6(t){this.X5.set(t,this.X5.get(t)+1)}E6(){for(const t of this.z5){if(t.R6())continue;const s=t.HV();this._6(s)}}P6(){for(const t of this.X5.keys())this.X5.set(t,0)}$u(t){this.z5.push(t),this.J5.set(t.Ec().toLowerCase(),t)}Kf(t){t.A6(),t.R6()||(Qm.Ih(this.z5,t),Qm.Ih(this.K5,t),Qm.Ih(this.Z5,t),Qm.Ih(this.Q5,t),this.J5.delete(t.Ec().toLowerCase()),this.O6(t),t.yz()||t.qn())}lH(t){this.Nc.lH(t,this.q5,null)}L$(){return this.Nc}I6(){return this.H5}D6(t){this.q5=t}F6(){return this.q5}*L6(){for(const t of this.z5)yield t}*k6(){for(const t of this.Z5)yield t}N6(t,s){this.Y5.has(t)||this.Y5.set(t,new Set),this.Y5.get(t).add(s)}T6(t){for(const s of t.B6())this.N6(s,t)}O6(t){for(const[s,i]of this.Y5.entries())i.has(t)&&(i.delete(t),0===i.size&&this.Y5.delete(s))}W6(t){if(this.Y5.has(t))return this.Y5.get(t)}j6(t,s){if(s)for(const i of this.z5)if(s.every((t=>i.V6(t._q,t.trackId)))&&i.Ec().includes(t.Ec()))return i}H6(t){return this.J5.get(t.toLowerCase())||null}U6(t){for(const s of this.K5)if(s.Ec()===t)return s;for(const s of this.Z5)if(s.Ec()===t)return s;return null}*q6(t){if(tg.test(t)){let s;tg.lastIndex=0;const i=new Set;do{if(s=tg.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.H6(t);s&&(yield s)}i.clear()}else{const s=this.H6(t);s&&(yield s)}}*z6(t){for(const s of this.z5)s.vz(t)&&(yield s)}J6(t){this.K5.includes(t)||this.K5.push(t),this.Y6()}X6(t){Qm.Ih(this.Z5,t),this.K6()}Z6(t){this.Z5.includes(t)?(t.Q6(!0),t.t8(!1),t.s8(!1)):(t.Q6(!1),t.t8(!0),t.s8(!1),this.K5.includes(t)||this.K5.push(t)),this.Y6()}i8(t){t.Q6(!1),t.t8(!1),t.e8(),Qm.Ih(this.K5,t),this.K6()}n8(t){t.Q6(!1),t.t8(!1),this.Z5.includes(t)&&(t.s8(!0),this.Q5.push(t),Qm.Ih(this.Z5,t)),this.K5.includes(t)&&t.s8(!0)}r8(t){t.Q6(!1),t.t8(!1),t.s8(!1),t.Ez(1),Qm.Ih(this.Z5,t)}h8(t){this.n8(t),t.e8()}n6(){const t=this.L$();if(t.B4())return;if(!this.t6)return;if(this.s6)return;let s=0;for(t.yH()&&(s=performance.now()),this.i6=!0;this.K5.length;){const t=this.K5.pop();t.o8()?(t.a8(),this.Q5.push(t)):(t.l8(),this.Z5.push(t)),0!==t.u8()&&(this.b6=1)}const i=this.Nc.c8(),e=this.Nc.f8(),n=this.Nc.gN();for(let t=this.Z5.length-1;t>=0;t--){const s=this.Z5[t];s&&s.d8(i,n,e)}this.i6=!1,t.yH()&&globalThis.wH.p8(performance.now()-s),0!==this.b6&&t.m$()}h6(){const t=this.L$();if(t.B4())return;if(!this.t6)return;if(this.s6)return;let s,i=0;t.yH()&&(i=performance.now());for(let t=0,i=this.Q5.length;t<i;t++){const i=this.Q5[t];s||(s=new Set),i.A6(),this.m8(i),s.add(i)}if(s){Qm.Rh(this.Q5,s),this.b6=0;for(let t=0,s=this.Z5.length;t<s;t++)if(0!==this.Z5[t].u8()){this.b6=1;break}}this.K6(),t.yH()&&globalThis.wH.p8(performance.now()-i)}m8(t){t.yz()||t.g8()&&t.y8()&&t.w8()&&t.S8()}Y6(){this.t6||(this.t6=!0)}K6(){this.Q5.length||this.Z5.length||this.K5.length||this.i6||(this.t6=!1)}a6(){for(this.s6=!0;this.K5.length;)this.i8(this.K5.pop());const t=new Set;for(const s of this.Z5)s.a6()&&(s.A6(),t.add(s));Qm.Rh(this.Z5,t),t.clear();for(const s of this.Q5)s.a6()&&(s.A6(),t.add(s));Qm.Rh(this.Q5,t),this.K6();for(const t of this.z5)t.b8()}u6(){this.s6=!1}f6(t){const s=t.IV(),i=this.W6(s);if(i)if(this.Nc.B4())this.S6.push(t);else for(const t of i)t.R6()||(t.yz()?this.Kf(t):t.g8()||(this.m8(t),this.Kf(t)))}p6(){for(const t of this.K5.map((t=>t)))this.m8(t),this.Kf(t);for(const t of this.Z5.map((t=>t)))this.m8(t),this.Kf(t)}g6(){for(const t of this.S6)this.f6(t);Qm.bh(this.S6);for(const t of this.z5)t.g6()}w6(){const t=this.Nc.VN().BN();if(t)for(const s of this.z5){const i=s.v8();i&&t.Ec()===i&&this.Z6(s)}}s3(){return{timelinesJson:this.M8(),scheduledTimelinesJson:this.x8(),playingTimelinesJson:this.G8(),markedForRemovalTimelinesJson:this.T8(),hasRuntimeListeners:this.t6,changingLayout:this.s6,isTickingTimelines:this.i6}}i3(t){t&&(this.P6(),this.C8(t.timelinesJson),this.I8(t.scheduledTimelinesJson),this._8(t.playingTimelinesJson),this.E8(t.markedForRemovalTimelinesJson),this.t6=!t.hasRuntimeListeners,this.s6=!!t.changingLayout,this.i6=!!t.isTickingTimelines,this.E6(),this.Y6(),this.K6())}M8(){return this.z5.map((t=>t.s3()))}C8(t){for(const s of t){let t=this.H6(s.name);if(t)t.i3(s);else{const i=this.P8(s);if(!i)continue;const e=this.H6(i);t=this.C6(e),t.i3(s)}t.A8()||this.Kf(t)}}P8(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}x8(){return this.O8(this.K5)}I8(t){this.D8(t,this.K5)}G8(){return this.O8(this.Z5)}_8(t){this.D8(t,this.Z5)}T8(){return this.O8(this.Q5)}E8(t){this.D8(t,this.Q5)}F8(t,s){if(!s)return!1;for(const i of s)if(i===t.Ec())return!0;return!1}O8(t){return t.map((t=>t.Ec()))}D8(t,s){const i=new Set;for(const e of s)this.F8(e,t)||i.add(e);if(Qm.Rh(s,i),t){const i=t=>s=>s.Ec()===t;for(const e of t){const t=this.H6(e);t&&(s.find(i(e))||s.push(t))}}}}}{const sg=self.Is,ig=100,eg=.01,ng=25,rg=20,hg=5,og=[0,0],ag=[0,0],lg=[0,0],ug=[0,0,0,0,0],cg=new Array(4),fg=[{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0},{x:0,y:0,t:0,vt:0}],dg={x:0,y:0,t:0,vt:0};sg.L8=class{constructor(t,s){this.k8=!1,this.N8=t,this.B8=[];let i=null;if(i=s?this.N8.W8(s):sg.Bh(this.N8.j8()),!i)return;const e=i.Xz("offsetX"),n=i.Xz("offsetY");if(!e||!n)return;this.V8=e,this.H8=n;const r=e.U8(),h=n.U8();for(let t=1,s=Math.min(r.length,h.length);t<s;++t){const s=r[t],i=(s.q8(),s.z8()),e=h[t],n=(e.q8(),e.z8());i&&"cubic-bezier"===i.J8()&&n&&"cubic-bezier"===n.J8()?this.B8.push(sg.Un(sg.Y8,i,n,s,e,this.B8.length)):(i&&"line"===i.J8()&&n&&n.J8(),this.B8.push(sg.Un(sg.X8,s,e,this.B8.length)))}this.k8=!0}qn(){for(const t of this.B8)t.qn();sg.bh(this.B8),this.B8=null,this.N8=null,this.V8=null,this.H8=null}K8(){return this.k8}Z8(){return this.B8}Q8(t){const s="relative"===this.V8.t7()?t.UM():0,i="relative"===this.H8.t7()?t.JM():0;for(const t of this.B8)t.Q8(s,i)}Nw(t,s,i){let e=NaN,n=this.B8.length;for(let i=0;i<n;i++){const n=this.B8[i];if("cubic-bezier"===n.DC()){const i=n.Nw(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],lg[0]=i[2],lg[1]=n.ek())}}return lg}s7(t,s,i){const e=i.i7;sg.te(e[0])||(e[0]=0),sg.te(e[1])||(e[1]=1);let n=NaN,r=this.B8.length;for(let i=0;i<r;i++){const r=this.B8[i];if("cubic-bezier"===r.DC()){const i=r.e7(t,s,e);(isNaN(n)||i[3]<n)&&(n=i[3],lg[0]=i[2],lg[1]=r.ek())}}return lg}n7(t,s){return this.B8[s].n7(t)}r7(t,s){return this.B8[s].r7(t)}},sg.Y8=class{constructor(t,s,i,e,n){this.Rw=n;const r=t.h7("cubic-bezier"),h=i.h7("cubic-bezier"),o=s.h7("cubic-bezier"),a=e.h7("cubic-bezier");this.o7=t.a7(),this.l7=s.a7(),this.u7=t.a7()+r.c7(),this.f7=s.a7()+o.c7(),this.d7=i.a7()+h.p7(),this.m7=e.a7()+a.p7(),this.g7=i.a7(),this.y7=e.a7(),this.w7=0,this.S7=0,this.b7=0,this.v7=0,this.M7=0,this.x7=0,this.G7=0,this.T7=0,this.C7=0,this.I7=0,this._7=0,this.E7=0,this.R7=0,this.P7=0,this.A7=0,this.O7=0,this.D7=0,this.F7=0,this.L7=0,this.k7=0,this.N7=NaN,this.k8=!1,this.B7=100,this.W7=new Array(this.B7+1),this.W7[0]=0,this.j7=0,this.V7=[],this.H7=[];for(let t=0;t<100;t++)this.H7.push({x:0,y:0,t:0,vt:0});this.U7()}qn(){sg.bh(this.W7),this.W7=null,sg.bh(this.V7),this.V7=null,sg.bh(this.H7),this.H7=null}DC(){return"cubic-bezier"}ek(){return this.Rw}q7(){return Math.floor(this.j7/25)}z7(){return 1/this.q7()}Q8(t,s){this.J7=t,this.Y7=s,this.W7=new Array(this.B7+1),this.W7[0]=0,this.U7(),this.w7=this.o7+this.J7,this.S7=this.l7+this.Y7,this.b7=this.u7+this.J7,this.v7=this.f7+this.Y7,this.M7=this.d7+this.J7,this.x7=this.m7+this.Y7,this.G7=this.g7+this.J7,this.T7=this.y7+this.Y7,this.C7=3*(this.b7-this.w7),this.I7=3*(this.v7-this.S7),this._7=3*(this.M7-this.b7),this.E7=3*(this.x7-this.v7),this.R7=3*(this.G7-this.M7),this.P7=3*(this.T7-this.x7),this.A7=3*(this.b7-this.w7),this.O7=3*(this.w7+this.M7-2*this.b7),this.D7=this.G7-this.w7+3*(this.b7-this.M7),this.F7=3*(this.v7-this.S7),this.L7=3*(this.S7+this.x7-2*this.v7),this.k7=this.T7-this.S7+3*(this.v7-this.x7)}Map(t){if(!this.k8)return NaN;const s=this.X7(t);return ag[0]=this.K7(s),ag[1]=this.Z7(s),ag}Nw(t,s){const i=this.Q7(100),e=this.t9(t,s,i),n=this.s9(t,s,i,e);return ug[0]=n.x,ug[1]=n.y,ug[2]=n.t,ug[3]=n.vt,ug}e7(t,s,i){const e=this.Q7(100),n=this.i9(t,s,e,i),r=this.s9(t,s,e,n);return ug[0]=r.x,ug[1]=r.y,ug[2]=r.t,ug[3]=r.vt,ug}n7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.C7+e*this._7+n*this.R7,h=i*this.I7+e*this.E7+n*this.P7,o=sg.sr(r,h);return og[0]=r/o,og[1]=h/o,og}r7(t){const s=1-t,i=s*s,e=2*s*t,n=t*t,r=i*this.C7+e*this._7+n*this.R7,h=i*this.I7+e*this.E7+n*this.P7;return Math.atan2(h,r)}X7(t){if(!this.k8)return;let s=t*this.W7[this.B7],i=0,e=this.B7,n=0;for(;i<e;)n=i+((e-i)/2|0),this.W7[n]<s?i=n+1:e=n;this.W7[n]>s&&n--;const r=this.W7[n];return r===s?n/this.B7:(n+(s-r)/(this.W7[n+1]-r))/this.B7}K7(t){return this.k8?self.ju.rc("cubicbezier")(t,this.o7+this.J7,this.u7+this.J7,this.d7+this.J7,this.g7+this.J7):NaN}Z7(t){return this.k8?self.ju.rc("cubicbezier")(t,this.l7+this.Y7,this.f7+this.Y7,this.m7+this.Y7,this.y7+this.Y7):NaN}Q7(t){if(t=t||100,this.V7.length>=t)return this.V7;this.V7=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,n=i**3,r=this.A7*i,h=this.O7*e,o=this.D7*n,a=this.F7*i,l=this.L7*e,u=this.k7*n,c=this.w7+r+h+o,f=this.S7+a+l+u;this.H7[s].x=c,this.H7[s].y=f,this.H7[s].t=i,this.H7[s].vt=0,this.V7[s]=this.H7[s]}return this.V7}t9(t,s,i,e=null,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.N7))for(let e=0;e<100;e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}else{for(let e=this.N7;e<this.N7+5&&!(e>=i.length);e++){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}for(let e=this.N7;e>this.N7-5&&!(e<0);e--){const h=i[e],o=h.x-t,a=h.y-s;h.vt=o*o+a*a,h.vt<n&&(n=h.vt,r=e)}}return this.N7=r,r}i9(t,s,i,e,n=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.N7))for(let h=0;h<100;h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}else{for(let h=this.N7;h<this.N7+5&&!(h>=i.length);h++){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}for(let h=this.N7;h>this.N7-5&&!(h<0);h--){const o=i[h],a=o.x-t,l=o.y-s;o.vt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.vt<n&&(n=o.vt,r=h)}}return this.N7=r,r}s9(t,s,i,e){let n=i[e],r=1,h=Number.MAX_SAFE_INTEGER;t:do{const r=i.length;let o=0===e?0:e-1,a=e===r-1?r-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;cg[0]=i[o];for(let i=1;i<=2;i++){const r=l+i*u,o=r**2,a=r**3,c=this.A7*r,f=this.O7*o,d=this.D7*a,p=this.F7*r,m=this.L7*o,g=this.k7*a,y=this.w7+c+f+d,w=this.S7+p+m+g,S=y-t,b=w-s,v=S*S+b*b;if(v<h){h=v,e=i,dg.x=y,dg.y=w,dg.t=r,dg.vt=v,n=dg;break t}const M=fg[i-1];M.x=y,M.y=w,M.t=r,M.vt=v,cg[i]=M}cg[3]=i[a],i=cg}while(r++<20);return n}U7(){this.k8=!0;let t=this.K7(0),s=this.Z7(0),i=0;for(let e=1;e<=this.B7;e++){const n=this.K7(.01*e),r=this.Z7(.01*e),h=t-n,o=s-r;i+=sg.sr(h,o),this.W7[e]=i,t=n,s=r}this.j7=i}},sg.X8=class{constructor(t,s,i){this.Rw=i,this.e9=t.a7(),this.n9=s.a7(),this.J7=0,this.Y7=0}qn(){}DC(){return"line"}ek(){return this.Rw}Q8(t,s){this.J7=t,this.Y7=s}UM(){return this.e9+this.J7}JM(){return this.n9+this.Y7}}}{const pg=self.Is,mg=0,gg=1;pg.G6=class extends pg.Vn{constructor(t,s,i){super(),this.Nc=i.L$(),this.r9=i,this.h9=s,this.Yn=t,this.o9=[],this.a9=0,this.l9=null,this.u9=0,this.c9(),this.f9=null,this.d9=null,this.p9=0,this.m9=0,this.g9=1,this.y9=0,this.w9=-1,this.S9=1,this.b9=!1,this.v9=!1,this.M9=!1,this.x9=!0,this.G9=!1,this.T9=!1,this.C9=-1,this.I9=!1,this._9=!1,this.E9=!1,this.R9=!1,this.P9=NaN,this.A9=[""],this.O9="",this.D9=!1,this.b6=0,this.F9=0,this.L9=null,this.k9=null}static x6(t,s){const i=s.I6(),e=i.N9(),n=i.qs(t[e]),r=pg.Un(pg.G6,t[e],n,s);return r.B9(!0),r}static C6(t,s,i){return pg.Un(pg.G6,t,s,i)}qn(){if(this.yz())return;const t=this.Nc.wf();this.r9.i8(this),this.r9.h8(this);for(const t of this.o9)t.qn();pg.bh(this.o9),this.o9=null,this.Nc=null,this.r9=null,this.h9=null,this.G9=!0,this.f9=null,this.d9=null,this.W9(t)}W9(t){const s=pg.Un(pg.Event,"timelinestatereleased");s.j9=this,t.dispatchEvent(s)}DC(){return 0}c9(){for(const t of this.h9.H9().V9())this.a9=this.o9.push(pg.U9.AT(this,t))}q9(){return this.r9}L$(){return this.Nc}j8(){return this.o9}z9(t,s,i,e){if(!this.F9)return;let n;for(let r=0;r<this.o9.length;r++){let h=this.o9[r];if(t!==h.Vz())continue;const o=h.Xz(i);o&&s.constructor===o.J9().constructor&&o.t7()===e.t7()&&(n||(n=[]),n.push(o))}return n}A8(){return!!this.o9.length}W8(t){for(const s of this.o9)if(pg.Ze(s.Jz(),t))return s;return null}Y9(t){for(const s of this.o9)if(!s.X9()&&pg.Ze(s.Ec(),t))return s;return null}wY(t){this.Yn=t}Ec(){return this.Yn}K9(){return this.h9}HV(){return this.h9.Ec()}Gz(){return this.h9.Gz()}xz(t){this.h9.xz(t)}Z9(){return this.h9.Z9()}Q9(t){this.h9.Q9(t)}ttt(){return this.h9.ttt()}stt(t){this.h9.stt(t)}t7(){return this.h9.t7()}itt(t){this.h9.t7(t)}jz(t){for(const s of this.j8())s.jz(t)}Cz(){return this.h9.Cz()}Tz(t){return this.h9.Tz(t)}_z(){return this.h9._z()}Iz(t){return this.h9.Iz(t)}Vq(){return this.h9.Vq()}ett(t){return this.h9.ett(t)}Ez(t){return this.g9=t}Rz(){return this.g9}v8(){return this.h9.v8()}ntt(){return this.h9.ntt()}htt(){return this.h9.htt()}ott(){return this.y9}att(){return!this.IsPlaying()||this.g9>0}Az(){return this.f9||(this.f9=new Promise((t=>{this.d9=t}))),this.f9}e8(){this.f9&&(this.d9(),this.f9=null,this.d9=null)}ltt(t){this.A9=pg.G6.utt(t),this.D9=!0}Pz(){return this.A9}ctt(){return this.D9&&(this.O9=this.A9.join(" ")),this.D9=!1,this.O9}vz(t){if(!this.A9)return!1;if(!this.A9.length)return!1;const s=pg.G6.utt(t);return!!s&&!!s.length&&s.every(pg.G6.ftt,this)}dtt(){pg.E$.ptt&&this.constructor===pg.G6&&(pg.E$.ptt.I$.mtt(this),this.r9.lH(pg.E$.ptt.I$.gtt),this.r9.lH(pg.E$.ptt.I$.ytt),this.r9.lH(pg.E$.ptt.I$.wtt),this.r9.lH(pg.E$.ptt.I$.Stt),pg.E$.ptt.I$.btt())}vtt(){this.C9=this.Nc.Mtt()}S8(){this.E9||(this.E9=!0,pg.E$.ptt&&this.constructor===pg.G6&&(pg.E$.ptt.I$.mtt(this),this.r9.lH(pg.E$.ptt.I$.xtt),this.r9.lH(pg.E$.ptt.I$.Gtt),this.r9.lH(pg.E$.ptt.I$.Ttt),this.r9.lH(pg.E$.ptt.I$.Ctt),pg.E$.ptt.I$.btt()))}Q6(t){this.b9=t}Itt(){return this.C9===this.Nc.Mtt()}IsPlaying(t=!1){return!!this.Itt()||!(!this._tt()||t)||this.b9}Ett(){return this.IsPlaying(!0)}Fz(){return this.Rtt()}Rtt(){return!(this.yz()||this._tt()||this.Ett()||this.y8())}t8(t){this.v9=t}_tt(){return this.v9}Ptt(t){this.x9=t;const s=this.Cz(),i=this._z();if(s||i){if(s&&!i);else if(!s&&i){const t=this.RD();1===this.y9&&(t<=0||t>=this.Gz())&&(this.x9=!0)}}else{const t=this.RD();(t<=0||t>=this.Gz())&&(this.x9=!0)}}y8(){return this.x9}yz(){return this.G9}s8(t){this.T9=t}o8(){return this.T9}Att(t){this.I9=t}Ott(){return this.I9}B9(t){this._9=!!t}R6(){return this._9}w8(){return this.M9}RD(){return this.p9}Mz(t){const s=this.RD();this.Dtt(t),this.Ptt(!1),this.y8()||this.Att(!0),(this.Ett()||this._tt()||!this.M9)&&(this.Ett()||this._tt()||this.M9?this.Ett()?this.Sz():this._tt()&&(this.r9.i8(this),this.Ftt()):this.Ftt()),this.Ltt(),this.ktt(this.RD(),!1,!0,!0,s),this.Ntt(),this.b6&&this.L$().m$(),this.$tt()}Dtt(t){pg.te(t)||(t=this.Gz()),t<0?this.p9=0:t>=this.Gz()?this.p9=this.Gz():this.p9=t}Btt(t){pg.te(t)||(t=this.Gz()),t<0?this.p9=0:t>=this.Gz()?this.p9=this.Gz():this.p9=t;for(const t of this.o9)t.Wtt()}$tt(){pg.E$.ptt&&this.constructor===pg.G6&&(pg.E$.ptt.I$.mtt(this),this.r9.lH(pg.E$.ptt.I$.jtt),this.r9.lH(pg.E$.ptt.I$.Vtt),this.r9.lH(pg.E$.ptt.I$.Htt),pg.E$.ptt.I$.btt())}Utt(){if(this.Cz())return!0;if(this._z()&&1===this.y9){if(this.att()){if(this.RD()>=this.Gz())return!1}else if(this.RD()<=0)return!1}else if(!this.Cz()&&!this._z())if(this.att()){if(this.RD()>=this.Gz())return!1}else if(this.RD()<=0)return!1;return!0}bz(){this.yz()||this.Utt()&&this.Play(!0)}Play(t=!1){return!this.yz()&&!this._tt()&&(this.Ett()&&this.Itt()?this.qtt():!this.Ett()&&!!(this.y8()||t||this.Ott())&&this.ztt())}qtt(){return this.Att(!1),this.r9.X6(this),this.r9.Z6(this),this.Az(),!0}ztt(){return this.Att(!1),this.r9.Z6(this),this.Az(),!0}Sz(t=!1){this.yz()||(this.Ptt(t),this.r9.n8(this),this.y8()&&this.e8())}$f(t=!0,s=!1){if(this.yz())return;if(!this.Ett()&&this._tt())return this.r9.i8(this);if(this.y8())return;this.Sz(!0),this.att()?this.Dtt(0):this.Dtt(this.Gz());const i=this.RD();this.Ltt(),s?this.Jtt(i):this.ktt(i,!1,!1,!0),t&&this.$tt(),this.Ntt(),this.b6&&t&&this.L$().m$()}Ytt(){this.$f(!1,!0)}Jtt(t){this.ktt(t,!1,!1,!0,NaN,!1,!0)}a6(){return!!this.yz()||!(!this.L$().B4()&&this.Xtt())&&(this.r9.r8(this),this.L$().B4()||this.Ytt(),!0)}Ftt(){this.l8(!0)}a8(){this.l8(!1,!0),this.Q6(!1),this.t8(!1)}l8(t=!1,s=!1){if(!this.o8()||s)if(t){this.E9=!1,this.M9=!0,this.R9=!0,this.Ltt();for(const t of this.o9)t.l8();this.Ntt()}else if(this.Q6(!0),this.t8(!1),this.dtt(),this.y8()){this.C9=-1,0!==this.y9&&(this.g9=Math.abs(this.g9)),this.y9=0,this.w9=-1,this.S9=1,this.x9=!1,this.E9=!1,this.M9=!0,this.R9=!0,this.att()?this.Dtt(0):this.Dtt(this.Gz()),this.Ltt();for(const t of this.o9)t.l8();this.Ntt()}else{-1!==this.w9&&(this.y9=this.w9),this.R9=!0,this.E9=!1,this.Ltt();for(const t of this.o9)t.Ktt();this.Ntt()}}u8(){return this.b6}Ltt(){this.F9=0;for(const t of this.o9)t.vP()&&(this.F9=1)}Ntt(){this.b6=0;for(const t of this.o9)t.Ztt(),0===this.b6&&1===t.u8()&&(this.b6=1),this.l9||1!==t.Qtt()||(this.l9||(this.l9=[]),this.u9=this.l9.push(t))}d8(t,s,i){if(this.htt()){if(0===t&&0===this.P9)return;this.P9=t,t=i}else{if(0===i&&0===this.P9)return;this.P9=i,t=i,s=1}const e=this.p9+this.m9,n=e+t*s*this.g9,r=this.h9.tst;n<0?(this.p9=0,this.m9=-n):n>=r?(this.p9=r,this.m9=this.p9-n):(this.p9=n,this.m9=0);let h=!1,o=!1;const a=this.Cz(),l=this._z();let u;a||l?a&&!l?this.g9>0?this.p9>=r&&(this.Btt(0),o=!0):this.p9<=0&&(this.Btt(r),o=!0):!a&&l?this.g9>0?this.p9>=r&&(this.Dtt(r),this.Ez(-1*this.Rz()),o=!0,1===this.y9?this.S9<this.Vq()?(this.S9++,this.y9=0):h=!0:0===this.y9&&(this.y9=1)):this.p9<=0&&(this.Dtt(0),this.Ez(-1*this.Rz()),o=!0,1===this.y9?this.S9<this.Vq()?(this.S9++,this.y9=0):h=!0:0===this.y9&&(this.y9=1)):a&&l&&(this.g9>0?this.p9>=r&&(this.Dtt(r),this.Ez(-1*this.Rz()),o=!0,this.y9++,pg.wrap(this.y9,0,2)):this.p9<=0&&(this.Dtt(0),this.Ez(-1*this.Rz()),o=!0,this.y9++,pg.wrap(this.y9,0,2))):this.g9>0?this.p9>=r&&(this.S9<this.Vq()?(this.S9++,this.Btt(0),o=!0):(this.Dtt(r),h=!0)):this.p9<=0&&(this.S9<this.Vq()?(this.S9++,this.Btt(r),o=!0):(this.Dtt(0),h=!0));const c=this.a9;if(h){for(u=0;u<c;u++)this.o9[u].sst();return this.Sz(!0),void this.vtt()}const f=this.u9;for(u=0;u<f;u++)this.l9[u].ist();if(1===this.F9)for(u=0;u<c;u++){const t=this.o9[u],s=t.est();this.p9-s<0&&e-s>0?(this.p9=s<0?0:s>=r?r:s,t.Sc(s,!0,!1,o,this.R9,!1)):t.Sc(this.p9,!0,!1,o,this.R9,!1)}else for(u=0;u<c;u++)this.o9[u].Sc(this.p9,!0,!1,o,this.R9,!1);if(!this.IsPlaying()&&this.L9){const t=this.L9.RD()+this.L9.rst().nst().est(),s=this.p9-t;this.p9-=s,0!==this.m9&&(this.m9-=s),this.L9=null}for(u=0;u<f;u++)this.l9[u].hst();this.R9&&(this.R9=!1)}ost(t){this.L9=t}ast(){return this.L9}ktt(t,s=!1,i=!1,e=!1,n=NaN,r=!1,h=!1){for(const t of this.o9)t.ist();for(const r of this.o9){let o=t;if("number"==typeof n&&!isNaN(n)){const t=this.RD()-r.est(),s=n-r.est();t<0&&s>0&&(o=r.est(),this.Dtt(o))}r.Sc(o,s,i,e,this.R9,h)}for(const t of this.o9)t.hst();this.R9&&r&&(this.R9=!1)}lst(){const t=this.h9.H9().ust(),s=pg.U9.AT(this,t);return this.a9=this.o9.push(s),s}A6(){if(!this.yz())for(const t of this.o9)t.cst()}b8(){for(const t of this.o9)t.b8()}fst(){for(const t of this.o9)t.dst()}pst(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.o9[i];if(!t)return;return t.mst(s),void this.r9.N6(s.IV(),this)}for(const i of this.o9)if(i.X9()){if(t){if(i.Jz()!==t)continue;i.mst(s),this.r9.N6(s.IV(),this);break}if(!i.gst()){i.mst(s),this.r9.N6(s.IV(),this);break}}}}V6(t,s){for(const i of this.o9)if(i.X9())if(s){if(s===i.Jz()&&t===i.Vz())return!0}else if(t===i.Vz())return!0;return!1}g8(){return this.o9.some((t=>!t.X9()||t.yst()))}Xtt(){return this.o9.some((t=>{if(t.X9()){if(!t.yst())return!1;const s=t.IV();return!!s&&s.n0()}return!1}))}Xz(t){for(const s of this.j8())for(const i of s.wst())if(i.Sst()===t)return i}bst(t){for(const s of this.o9)if(t===s.Vz())return s;return null}vst(t){let s=t?t.split(" "):[];const i=new Set(s.map((t=>t.toLowerCase().trim())));s=[...i.values()];for(const t of this.j8())for(const i of t.Mst())if(s.every((t=>i.xst(t))))return i}B6(){const t=[];for(const s of this.j8())t.push(s.IV());return t.filter((t=>t))}g6(){for(const t of this.j8())t.g6()}s3(){return{tracksJson:this.Gst(),name:this.Yn,playheadTime:this.RD(),playbackRate:this.g9,pingPongState:this.y9,resumePingPongState:this.w9,currentRepeatCount:this.S9,isPlaying:this.b9,isScheduled:this.v9,initialStateSet:this.M9,finishedTriggers:this.E9,complete:this.x9,released:this.G9,markedForRemoval:this.T9,completedTick:this.C9,implicitPause:this.I9,isTemplate:this._9,tags:this.A9.join(" "),stringTags:this.O9,tagsChanged:this.D9,firstTick:this.R9}}i3(t){t&&(this.Tst(t.tracksJson),this.Yn=t.name,this.p9=t.playheadTime,this.g9=t.playbackRate,this.y9=t.pingPongState,this.w9=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.S9=t.currentRepeatCount,this.b9=!!t.isPlaying,this.v9=!!t.isScheduled,this.M9=!!t.initialStateSet,this.E9=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.x9=!!t.complete,this.G9=!!t.released,this.T9=!!t.markedForRemoval,this.C9=t.completedTick,this.I9=!!t.implicitPause,this._9=!!t.isTemplate,this.A9=t.tags.split(" "),this.O9=t.stringTags,this.D9=!!t.tagsChanged,this.R9=!!t.firstTick)}Gst(){return this.o9.map((t=>t.s3()))}Tst(t){this.fst(),t.forEach(((t,s)=>{this.o9[s].i3(t)})),this.o9.filter((t=>t.yst()))}static ftt(t){const s=this.Pz();return""===t?1===s.length&&""===s[0]:s.map((t=>t.toLowerCase())).includes(t.toLowerCase())}static utt(t){if(pg.Ge(t))return t.slice(0);if(pg.le(t))return t.split(" ");throw new Error("invalid tags")}Cst(){return this.k9||(this.k9=pg.Un(self.kz,this)),this.k9}}}{const yg=self.Is,wg=0,Sg=1,bg=2;yg.U9=class extends yg.Vn{constructor(t,s){super(),this.N8=t,this.Ist=s,this._st=s.H9(),this.Est=NaN,this.Rst=NaN,this.Pst=null,this.Ast=null,this.Ost=!1,this.mP=s.est()>0,this.Dst=!1,this.Fst=!1,this.Lst=NaN,this.kst=null,this.Nst=this.Ist.rst().$st(),this.Bst=[],this.Wst(),this.jst=0,this.b6=0,this.Vst=0}static AT(t,s){return yg.Un(yg.U9,t,s)}qn(){this.Nst=null;for(const t of this.Bst)t.qn();yg.bh(this.Bst),this.Bst=null,this.N8=null,this.Pst=null,this.Ast=null,this.Ist=null,this.kst=null}Wst(){for(const t of this.Ist.Ust().Hst())this.Bst.push(yg.qst.AT(this,t))}cst(){for(const t of this.Bst)t.cst()}b8(){for(const t of this.Bst)t.b8();this.Pst=null,this.Ast=null}zst(){return this.N8}L$(){return this.N8.L$()}Mst(){return this.Nst||(this.Nst=this.Ist.rst().$st()),this.Nst}wst(){return this.Bst}Xz(t){for(let s=0;s<this.Bst.length;s++){const i=this.Bst[s];if(i.Sst()===t)return i}}Jst(){this.Pst||this.Vz()}Yst(){return!!this.Pst&&!this.Pst.OJ()}yst(){if(!this.X9())return!1;const t=this.Xst(),s=this.L$().e$(t);return!!s&&!s.OJ()}IV(){if(!this.X9())return;const t=this.Kst();return-1!==t?this.L$().JQ(t):void 0}Zst(){return this.N8.j8().indexOf(this)}dst(){this.Pst=null,this.Est=NaN,this.Ast=null,this.Rst=NaN,this.Ost=!0}gst(){return!!this.Pst}Vz(){if(this.Ost)return;if(this.Pst&&this.Yst())return this.Pst;const t=this.Xst();return this.Pst=this.L$().e$(t),this.Pst}mst(t){if(this.Ost=!1,this.Pst!==t){this.b8(),this.Pst=t,this.Rst=t.IV().ek(),this.Est=t.BV(),this.Ast=t.a$();for(const s of this.Qst()){const i=s.tit,e=s.sit;switch(i.iit()){case"instance-variable":{e.eit();const i=t.IV(),n=i.nit(s.name),r=i.rit(n),h=i.hit(n);r===s.name&&h===s.type&&e.oit(n);break}case"behavior":{const i=s.Tq,n=this.IV(),r=t.IV(),h=e.Iq(r);if(i&&h){const t=i.Ec();n.ait(t),r.ait(t),e.eit(),e.lit(h.C0())}break}}}}}*Qst(){for(const t of this.Bst){const s=t.J9(),i=this.IV(),e={tit:t,sit:s};switch(t.iit()){case"world-instance":e.uit=t.Sst();break;case"instance-variable":{const t=s.eit();e.name=i.rit(t),e.type=i.hit(t);break}case"effect":{const t=i.HW(),n=s.cit(t);e.fit=n;break}case"behavior":{const t=s.Iq(i);e.Tq=t;break}case"plugin":e.wW=i.SW()}yield e}}a$(){if(this.Ast&&this.Yst())return this.Ast;const t=this.Vz();return t&&(this.Ast=t.a$()),this.Ast}nst(){return this.Ist}Xst(){return isNaN(this.Est)?this.Ist.Xst():this.Est}dit(t){this.Ist.dit(t)}ttt(){return this.Ist.ttt()}stt(t){this.Ist.stt(t)}t7(){return this.Ist.t7()}Jz(){return this.Ist.Jz()}est(){return this.Ist.est()}pit(){return this.Ist.pit()}mit(t){this.Ist.mit(t)}itt(t){this.Ist.itt(t)}jz(t){for(const s of this.Mst())s.jz(t);for(const s of this.wst())s.jz(t)}git(){return this.Ist.git()}yit(t){this.Ist.yit(t)}Kst(){return isNaN(this.Rst)?this.Ist.Kst():this.Rst}wit(t){this.Ist.wit(t)}Sit(t){this.Ist.Sit(t)}bit(){const t=this.Vz();return t&&t.yq().vit()?t.yq().bit():this.Ist.bit()}Mit(t){this.Ist.Mit(t)}xit(){const t=this.Vz();return t&&t.yq().vit()?t.yq().xit():this.Ist.xit()}DC(){return this.Ist.DC()}Ec(){return this.Ist.Ec()}X9(){return 0===this.DC()}Git(){return 1===this.DC()}Tit(){return 2===this.DC()}Cit(){return this.jst}u8(){return this.b6}Qtt(){return this.Vst}vP(){return this.mP}Wtt(){for(const t of this.Bst)t.Wtt()}l8(){if(this.Jst(),!this.Yst()&&this.X9())return;const t=this.zst().att(),s=t?0:this.pit();for(const t of this.Bst)t.l8(s),0===this.jst&&1===t.Cit()&&(this.jst=1),0===this.b6&&1===t.u8()&&(this.b6=1);this.Vst=0,this.Bst.some((t=>t.Qtt()))&&(this.Vst=1),this.kst=t?this.Iit(s):this._it(s),this.Dst=!1,this.Fst=!1,this.Sc(s),this.Eit(this.kst)}Ktt(){if(this.Jst(),!this.Yst()&&this.X9())return;const t=this.N8.att(),s=this.N8.RD()-this.est();this.kst=t?this.Iit(s):this._it(s);for(const t of this.Bst)t.Ktt(s)}sst(){if(!this.zst().y8()&&(this.Jst(),(this.Yst()||!this.X9())&&!this.mP)){const t=this.N8.RD();t>=this.est()+this.pit()?this.Sc(this.pit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}Ztt(){for(let t=0,s=this.Bst.length;t<s;t++){const s=this.Bst[t];s.Ztt(),0===this.jst&&1===s.Cit()&&(this.jst=1),0===this.b6&&1===s.u8()&&(this.b6=1)}}ist(){const t=this.Bst.length;for(let s=0;s<t;s++)this.Bst[s].ist()}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){this.Pst||this.Vz();const o=this.Pst&&!this.Pst.OJ(),a=0===this.Ist.qc;if((o||!a)&&!(r&&a&&this.IV().n0()||(t-=this.est())<0)){this.Rit(t,s),this.Pit(t,s,n),!this.zst().IsPlaying()&&this.zst().ast()&&(t=this.zst().ast().RD());for(let s=0,n=this.Bst.length;s<n;s++)this.Bst[s].Sc(t,i,e,h);this.Ait(t,s),0!==this.jst&&(this.Ast||(this.Ast=this.Pst.a$()),this.Ast&&this.Ast.NH())}}hst(){const t=this.Bst.length;for(let s=0;s<t;s++)this.Bst[s].hst()}Rit(t,s){if(s&&this.mP&&!this.Dst){if(this.zst().att()){if(t<0)return}else if(t>this.pit())return;for(const t of this.Bst)t.l8();this.Dst=!0}}Ait(t,s){if(s&&this.mP&&!this.Fst)if(this.zst().att()){if(t>=this.pit()){for(const t of this.Bst)t.Sc(this.pit(),!1,!0);this.Fst=!0}}else if(t<=0){for(const t of this.Bst)t.Sc(0,!1,!0);this.Fst=!0}}Pit(t,s,i){if(i)return;if(!s)return;if(!yg.E$.ptt)return;const e=this.zst();if(e.att()){const s=this.kst.q8(),i=this.kst.RD(),n=s?s.RD():e.Gz();(t<=i||t>=n)&&(this.kst=this._st.Oit(t,this.Ist),s&&this.Eit(this.kst))}else{if(!this._st.Dit(t,this.Ist))return;this.kst||(this.kst=this._st.Dit(t,this.Ist));const s=this.kst.Fit(),i=this.kst.RD(),e=s?s.RD():0;(t>=i||t<=e)&&(this.kst=this._st.Dit(t,this.Ist),this.kst&&this.Eit(this.kst))}}Iit(t){return this._st.Lit(t,this.Ist)||this._st.Oit(t,this.Ist)}_it(t){return this._st.Lit(t,this.Ist)||this._st.Dit(t,this.Ist)}Eit(t){if(!yg.E$.ptt)return;const s=this.zst(),i=s.q9();yg.E$.ptt.I$.mtt(s),yg.E$.ptt.I$.kit(t),i.lH(yg.E$.ptt.I$.Nit),i.lH(yg.E$.ptt.I$.Eit),s.IsPlaying()||s.ost(t),yg.E$.ptt.I$.btt(s),yg.E$.ptt.I$.$it(t)}Bit(){return this.Ist.rst().Wit()}jit(){const t=this.Ist.Ust().Vit(),s=yg.qst.AT(this,t);return this.Bst.push(s),s}Hit(t){this.Ist.rst().Uit(t)}qit(t){for(const s of this.Bst)s.qit(t)}zit(){for(const t of this.Bst)t.zit()}Jit(){if(this.Jst(),this.Yst()||!this.X9())for(const t of this.Bst)t.Jit()}Yit(){if(this.Jst(),!this.Yst()&&this.X9())return;let t=!1;for(const s of this.Bst){const i=s.Yit();!t&&i&&(t=!0)}if(t){const t=this.Bit();t.Mz(this.zst().RD()),t.jz("noease"),t.yit(!0),t.ltt("")}}g6(){isNaN(this.Lst)||this.Xit(this.Lst),this.Lst=NaN}s3(){const t=this.Vz(),s=t?t.BV():this.Xst();return{propertyTracksJson:this.Kit(),lastKeyframeDataItemJson:this.Zit(),initialStateOfNestedSet:this.Dst,endStateOfNestedSet:this.Fst,instanceUid:s,cleared:this.Ost}}i3(t){if(t){this.Qit(t.propertyTracksJson),this.tet(t.lastKeyframeDataItemJson),this.Lst=t.instanceUid,this.Dst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.Dst=t.initialStateOfNestedSet),this.Fst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Fst=t.endStateOfNestedSet),this.Ost=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.Bst)0===this.jst&&1===t.Cit()&&(this.jst=1),0===this.b6&&1===t.u8()&&(this.b6=1);this.Vst=0,this.Bst.some((t=>t.Qtt()))&&(this.Vst=1)}}Zit(){return this.Ist.rst().iet(this.kst)}Kit(){return this.Bst.map((t=>t.s3()))}Qit(t){t.forEach(((t,s)=>{this.Bst[s].i3(t)}))}Xit(t){if(!yg.te(t))return;const s=this.L$().e$(t);s&&this.zst().pst(this.Ist.Jz(),s,this.Zst())}tet(t){const s=this.Ist.rst();this.kst=s.eet(t)}}}{const vg=self.Is;vg.qst=class extends vg.Vn{constructor(t,s){super(),this.net=t,this.ret=s,this.het=s.Ust(),this.jst=0,this.b6=0,this.Vst=0,this.oet=this.J9(),this.aet=this.ret.uet().let(),this.cet=null,this.fet=null}static AT(t,s){return vg.Un(vg.qst,t,s)}qn(){this.net=null,this.oet&&(this.oet.qn(),this.oet=null),this.aet=null,this.ret=null,this.het=null}Cit(){return this.jst}u8(){return this.b6}Qtt(){return this.Vst}det(){return!!this.fet}pet(t){this.fet=t}met(){return this.fet}yet(){return this.net}wet(){return this.ret}Ust(){return this.het}zst(){return this.net.zst()}L$(){return this.net.L$()}Vz(){return this.net.Vz()}J9(){if(this.oet)return this.oet;let t;switch(this.ret.iit()){case"behavior":t=new vg.qst.bet(this);break;case"effect":t=new vg.qst.vet(this),this.b6=1;break;case"instance-variable":t=new vg.qst.Met(this);break;case"plugin":t=new vg.qst.xet(this),this.b6=1;break;case"world-instance":t=new vg.qst.Get(this),this.b6=1,this.jst=1;break;case"value":t=new vg.qst.Tet(this);break;case"audio":t=new vg.qst.Cet(this)}return this.oet=t,this.oet}iit(){return this.ret.iit()}Iet(t){this.ret.Iet(t)}_et(){return this.ret.Eet()}Ret(t){this.ret.Pet(t)}Yz(){return this.J9().Aet()}Sst(){return this.ret.Oet()}Det(t){this.ret.Fet(t)}Let(){return this.ret.DC()}ket(t){this.ret.Net(t)}$et(){return this.Ust().Bet(this.ret).DC()}Wet(){return this.ret.Wet()}jet(t){this.ret.jet(t)}Vet(){return this.ret.Vet()}Het(t){this.ret.Het(t)}git(){return this.ret.git()}yit(t){this.ret.yit(t)}ttt(){return this.ret.ttt()}stt(t){this.ret.stt(t)}t7(){return this.ret.t7()}itt(t){this.ret.itt(t)}jz(t){for(const s of this.Uet())s.jz(t)}qet(){return this.ret.qet()}Uet(){return this.aet||(this.aet=this.ret.uet().let()),this.aet}U8(){return this.ret.uet().U8()}zet(t){return this.het.zet(t,this.ret)}Jet(t){return this.het.Jet(t,this.ret)}Yet(t){let s,i=this.het.zet(t,this.ret);return i?s=this.het.Xet(t,this.ret):(i=this.het.Jet(t,this.ret),s=this.het.Ket(t,this.ret)),{start:i,end:s}}*Zet(){for(const t of this.Uet())yield t.a7()}*Qet(){for(const t of this.Uet())yield t.RD()}cst(){this.J9().cst()}b8(){this.J9().b8()}tnt(){return this.J9().tnt()}Wtt(){this.J9().Wtt()}l8(t){this.J9().l8(),this.cet=this.snt(t),this.Ztt()}Ktt(t){this.J9().Ktt(),this.cet=this.snt(t)}Ztt(){const t=this.yet();if(this.Vst=0,t.X9()){const s=this.zst(),i=t.Vz(),e=this.J9(),n=this.Sst();if(e.int()){const t=s.z9(i,e,n,this);t&&t.length&&(this.Vst=1)}else this.Vst=0}}snt(t){const s=this.zst();return this.het.zet(t,this.ret)||(s.att()?this.het.Jet(t,this.ret):this.het.Ket(t,this.ret))}ist(){this.oet.ist()}Sc(t,s=!1,i=!1,e=!1){let n,r,h=!1;if(s)n=this.het.Jet(t,this.ret);else{if(this.cet){const s=this.zst(),i=this.cet.q8(),e=this.cet.RD(),n=i?i.RD():s.Gz();(t<=e||t>=n)&&(this.cet=this.het.Jet(t,this.ret),h=!0)}else this.cet=this.het.Jet(t,this.ret),h=!0;n=this.cet}n&&(r=n.q8()),this.oet.Sc(t,n,r,s,i,e,h)}ent(t){if(this.cet){const s=this.zst(),i=this.cet.q8(),e=this.cet.RD(),n=i?i.RD():s.Gz();(t<=e||t>=n)&&(this.cet=this.het.Jet(t,this.ret))}else this.cet=this.het.Jet(t,this.ret);const s=this.cet,i=s.q8();return this.oet.ent(t,s,i)}nnt(t,s,i){return this.oet.ent(t,s,i)}hst(){this.oet.hst()}static rnt(t,s){const i=s.wet();return s.het.Jet(t,i)}static hnt(t,s){const i=s.wet();return s.het.Ket(t,i)}ont(){const t=this.ret.uet().ant();return this.cet=null,t}qit(t){this.cet=null,this.ret.uet().lnt(t)}zit(){this.J9().zit()}Jit(){if(this.J9().Jit()){const t=this.het.Bet(this.ret),s=this.J9().tnt();t.unt(s)}}Yit(){const t=this.J9().Yit();return t&&this.cnt(),this.J9().fnt(),t}cnt(){const t=this.zst().RD(),s=this.J9(),i=vg.qst.rnt(t,this),e=this.ont();e.Net(i.DC()),e.Mz(t),e.jz(i.dnt()),e.yit(!0),e.pnt(s.mnt()),e.unt(s.tnt())}s3(){return{sourceAdapterJson:this.J9().s3()}}i3(t){t&&this.J9().i3(t.sourceAdapterJson)}}}{const Mg=self.Is,xg=Mg.qst;xg.Get=class{constructor(t){this.gnt=t,this.ynt=null,this.wnt()}qn(){this.ynt&&(this.ynt.qn(),this.ynt=null),this.gnt=null}int(){return this.ynt.int()}Xz(){return this.gnt}cst(){this.ynt&&this.ynt.cst()}b8(){this.ynt&&this.ynt.b8()}wnt(){return this.ynt||(this.ynt=this.Snt()),this.ynt}eit(){}ek(){return this.eit()}bnt(){}Wtt(){this.wnt().Wtt()}l8(){this.wnt().l8()}Ktt(){this.wnt().Ktt()}ist(){this.ynt.vnt()}Sc(t,s,i,e,n,r,h){let o;switch(this.gnt.$et()){case"numeric":o=xg.Mnt.Sc(t,s,i,this.gnt);break;case"angle":o=xg.xnt.Sc(t,s,i,this.gnt);break;case"boolean":o=xg.Gnt.Sc(t,s,i,this.gnt);break;case"color":o=xg.Tnt.Sc(t,s,i,this.gnt);break;case"text":o=xg.Cnt.Sc(t,s,i,this.gnt)}this.ynt.Int(t,o,s,i,e,n,r,h)}ent(t,s,i){switch(this.gnt.$et()){case"numeric":return xg.Mnt.Sc(t,s,i,this.gnt);case"angle":return xg.xnt.Sc(t,s,i,this.gnt);case"boolean":return xg.Gnt.Sc(t,s,i,this.gnt);case"color":return xg.Tnt.Sc(t,s,i,this.gnt);case"text":return xg.Cnt.Sc(t,s,i,this.gnt)}}hst(){this.ynt._nt()}zit(){this.wnt().Ent()}fnt(){this.wnt().fnt()}tnt(){return this.wnt().tnt()}Jit(){return this.wnt().Jit()}Yit(){return this.wnt().Yit()}mnt(){const t=this.gnt,s=t.yet().zst().RD(),i=xg.rnt(s,t),e=i.q8();switch(t.$et()){case"numeric":return xg.Mnt.Sc(s,i,e,t);case"angle":return xg.xnt.Sc(s,i,e,t);case"boolean":return xg.Gnt.Sc(s,i,e,t);case"color":return xg.Tnt.Sc(s,i,e,t);case"text":return xg.Cnt.Sc(s,i,e,t)}}Snt(){const t=this.gnt;switch(t.qet()?t.$et():""){case"combo":case"boolean":case"text":case"string":return new xg.Pnt.Rnt(this);case"numeric":case"number":case"angle":return"combo"===this.gnt.Let()?new xg.Pnt.Rnt(this):new xg.Pnt.Ant(this);case"color":case"offsetColor":return new xg.Pnt.Ont(this);default:return new xg.Pnt.Ant(this)}}s3(){return{propertyAdapterJson:this.wnt().s3()}}i3(t){t&&this.wnt().i3(t.propertyAdapterJson)}}}{const Gg=self.Is,Tg=0;class Cg extends Gg.qst.Get{constructor(t){super(t),this.Dnt=NaN}eit(){return this.gnt.wet().Eet()[0]}ek(){return this.Dnt?this.Dnt:super.ek()}bnt(){return this.gnt.yet().Vz()}oit(t){this.gnt.wet().Eet()[0]!==t&&(this.Dnt=t)}Sc(t,s,i,e,n,r,h){this.wnt().Fnt(s.Aet())&&super.Sc(t,s,i,e,n,r,h)}ent(t,s,i){if(this.wnt().Fnt(s.Aet()))return super.ent(t,s,i)}s3(){return Object.assign(super.s3(),{index:this.Dnt})}i3(t){t&&(super.i3(t),this.Dnt=t.index)}}Gg.qst.Met=Cg}{const Ig=self.Is,_g=0,Eg=1,Rg=2;class Pg extends Ig.qst.Get{constructor(t){super(t),this.JZ=NaN}eit(){return this.gnt.wet().Eet()[1]}bnt(){const t=this.gnt.wet(),s=this.gnt.yet(),i=this.JZ?this.JZ:t.Eet()[0],e=s.Vz(),n=e.Lnt(i);return e.knt()[n].yq()}Iq(t){const s=this.gnt.wet().Eet()[2];return t.Nnt(s)}lit(t){this.gnt.wet().Eet()[0]!==t&&(this.JZ=t)}Sc(t,s,i,e,n,r,h){const o=this.gnt.yet().Vz();this.Iq(o.IV())&&super.Sc(t,s,i,e,n,r,h)}ent(t,s,i){const e=this.gnt.yet().Vz();if(this.Iq(e.IV()))return super.ent(t,s,i)}s3(){return Object.assign(super.s3(),{sid:this.JZ})}i3(t){t&&(super.i3(t),this.JZ=t.sid)}}Ig.qst.bet=Pg}{const Ag=self.Is,Og=0,Dg=1;class Fg extends Ag.qst.Get{constructor(t){super(t)}eit(){return this.gnt.wet().Eet()[1]}bnt(){const t=this.gnt.yet().a$().LH(),s=t.HW(),i=this.cit(s).ek();return t.Oq(i)?t.$nt(i):null}cit(t){const s=this.gnt.wet().Eet()[0];return t.Bnt(s)}Sc(t,s,i,e,n,r,h){this.Wnt()&&super.Sc(t,s,i,e,n,r,h)}ent(t,s,i){if(this.Wnt())return super.ent(t,s,i)}Wnt(){const t=this.gnt.yet().a$().LH(),s=t.HW(),i=this.cit(s);if(!i)return;const e=i.ek();return t.Oq(e)}}Ag.qst.vet=Fg}{const Lg=self.Is,kg=0;class Ng extends Lg.qst.Get{constructor(t){super(t)}eit(){return this.gnt.wet().Eet()[0]}bnt(){return this.gnt.yet().Vz().yq()}Sc(t,s,i,e,n,r,h){const o=this.gnt.yet();o.IV().SW()===o.Vz().IV().SW()&&super.Sc(t,s,i,e,n,r,h)}ent(t,s,i){const e=this.gnt.yet();if(e.IV().SW()===e.Vz().IV().SW())return super.ent(t,s,i)}jnt(){const t=this.gnt.yet().IV().SW();if(Lg.E$.Vnt&&t instanceof Lg.E$.Vnt&&("initial-frame"===this.gnt.Sst()||"initial-animation"===this.gnt.Sst()))switch(this.gnt.t7()){case"relative":case"absolute":return null}}}Lg.qst.xet=Ng}{const $g=self.Is;class Bg extends $g.qst.Get{constructor(t){super(t),this.Hnt=0,this.Unt=!1}int(){return!1}l8(){const t=this.gnt.Ust();let s=this.gnt.wet();s=t.Bet(s),this.Hnt=s.a7()}Ktt(){}Aet(){return this.Unt||this.gnt.Sc(0),this.Hnt}Sc(t,s,i,e,n,r,h){this.Hnt=$g.qst.Mnt.Sc(t,s,i,this.gnt),this.Unt=!0}zit(){}fnt(){}tnt(){return this.Hnt}Jit(){return!1}Yit(){return!1}s3(){return{value:this.Hnt,init:this.Unt}}i3(t){t&&(this.Hnt=t.value,this.Unt=!t.hasOwnProperty("init")||t.init)}}$g.qst.Tet=Bg}{const Wg=self.Is,jg=0,Vg=0,Hg=1,Ug=1,qg=2,zg=3;class Jg extends Wg.qst.Get{constructor(t){super(t),this.qnt=!1,this.znt=null,this.Jnt=null,this.Ynt=null,this.N8=this.gnt.zst(),this.net=this.gnt.yet(),this.Xnt=this.gnt._et(),this.Knt=this.Xnt[0],this.Znt=this.Xnt[1],this.Xnt[3]?this.Qnt=this.Xnt[3]:this.Qnt=Math.random().toString(36).slice(2),this.trt=NaN,this.srt=NaN,this.irt=NaN,this.ert=null,this.nrt()}qn(){super.qn(),this.znt=null,this.Jnt=null,this.Ynt=null,this.N8=null,this.net=null,this.Xnt=null,this.Knt=null,this.ert=null}nrt(){if(!self.Is.E$.Audio)return;const t=this.gnt.L$().rrt(self.Is.E$.Audio);t&&(this.znt=t.gW().yq()),this.Jnt=self.Is.E$.Audio.hrt,this.Ynt=self.Is.E$.Audio.ort}art(){if(this.ert)return;const t=this.gnt.yet().Xz("audioSource");t&&(this.ert=t.J9())}lrt(){const t=this.gnt.yet().Xz("volume");return t?t.J9().srt:this.srt}cst(){super.cst(),this.qnt=!1,this.znt&&(this.Ynt&&(this.trt=this.Ynt.urt.call(this.znt,this.Qnt),this.srt=this.Ynt.crt.call(this.znt,this.Qnt)),this.Jnt&&this.Jnt.Sz.call(this.znt,this.Qnt))}frt(){return this.Qnt}drt(){return this.irt}prt(t){this.irt=t}l8(){super.l8(),this.trt=NaN,this.qnt=!1}Ktt(){super.Ktt();const t=this.gnt.zst().RD();switch(this.trt=t-this.Znt,this.gnt.Sst()){case"audioSource":break;case"volume":this.srt=this.gnt.ent(t)}this.qnt=!1}Sc(t,s,i,e,n,r,h){if(this.znt)switch(this.gnt.Sst()){case"audioSource":{if(!this.N8.att())return;if(e)return void(this.Jnt&&this.Jnt.Sz.call(this.znt,this.Qnt));if(t<this.Znt)return void(this.qnt=!1);const s=this.Ynt.mrt.call(this.znt,this.Qnt),i=this.N8.Rz();if(i!==s&&this.Jnt.Ez.call(this.znt,this.Qnt,i),this.qnt)return;if(!this.gnt.zst().IsPlaying())return;if(this.qnt=!0,isNaN(this.trt)){const s=self.performance.now(),i=t-this.Znt;if("suspended"===this.znt.grt())return void(this.qnt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Jnt){let t=this.drt();isNaN(t)?(this.prt(0),t=0):this.prt(t),this.Jnt.yrt.call(this.znt,this.Knt,t,this.Qnt,e)}}else{const t=this.trt;this.trt=NaN;const s=this.lrt();if(this.srt=NaN,"suspended"===this.znt.grt())return void(this.qnt=!1);this.Jnt&&(this.prt(s),this.Jnt.yrt.call(this.znt,this.Knt,s,this.Qnt,t))}break}case"volume":this.art(),super.Sc(t,s,i,e,n,r,h)}}ent(t,s,i){if(this.znt)switch(this.gnt.Sst()){case"audioSource":return;case"volume":return this.art(),super.ent(t,s,i)}}wrt(t,s){return this.ert?this.ert.drt():0}Srt(t,s,i,e){this.ert&&this.ert.prt(this.wrt()+s),this.Jnt&&this.ert&&this.Jnt.prt.call(this.znt,this.ert.frt(),this.ert.drt())}brt(t,s,i){this.ert&&this.ert.prt(s),this.Jnt&&this.ert&&this.Jnt.prt.call(this.znt,this.ert.frt(),this.ert.drt())}vrt(){return!0}s3(){return{audioPlaybackStarted:this.qnt,audioTag:this.Qnt,pauseTime:this.trt,pauseVolume:this.srt,volume:this.irt}}i3(t){t&&(this.qnt=t.audioPlaybackStarted,this.Qnt=t.audioTag,this.trt=t.pauseTime,this.srt=t.pauseVolume,this.irt=t.volume,this.nrt())}}Wg.qst.Cet=Jg}{const Yg=self.Is;Yg.qst.Pnt=class{constructor(t){this.oet=t,this.gnt=t.Xz(),this.Ast=this.gnt.yet().a$(),this.Mrt=this.gnt.Sst(),this.xrt=!1,this.Grt=null,this.Trt=null}qn(){this.oet=null,this.gnt=null,this.Ast=null,this.Grt=null,this.Trt=null}int(){return!1}cst(){}b8(){this.Ast=null,this.Grt=null,this.Trt=null}J9(){return this.oet}Xz(){return this.gnt}a$(){return this.Ast||(this.Ast=this.gnt.yet().a$()),this.Ast}Crt(t){this.xrt=!!t}Irt(){return this.xrt}Wtt(){}l8(){}Ktt(){}Ent(){this.Grt=this.tnt()}fnt(){this.Grt=null}tnt(){}Jit(){}Yit(){}Fnt(t){return typeof this._rt()==typeof t}vnt(){}Int(t,s,i,e,n,r,h,o){}_nt(){}Ert(){return this.Prt((()=>{const t=this.gnt.wet();return this.gnt.Ust().Bet(t)}),(()=>{const t=this.gnt.wet();return this.gnt.Ust().Art(t)})).Rrt()}Ort(){const t=this.gnt.zst().RD()-this.gnt.yet().est();return this.Prt((()=>{const s=this.gnt.wet();return this.gnt.Ust().Jet(t,s)}),(()=>{const s=this.gnt.wet(),i=this.gnt.Ust();return i.Ket(t,s)||i.Art(s)})).Rrt()}Prt(t,s){return this.gnt.zst().att()?t():s()}Drt(t,s){return"relative"===this.gnt.t7()?t():s()}Frt(t,s){return this.Irt()?(this.Crt(!1),t()):s()}Lrt(t){}krt(){return this.oet.ek()}Nrt(){return this.Trt||(this.Trt=this.oet.bnt()),this.Trt}$rt(t,s,i,e,n,r){switch(this.gnt.iit()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return n();case"audio":return r()}}s3(){return{firstAbsoluteUpdate:this.xrt,saveState:this.Grt}}i3(t){t&&(this.xrt=t.firstAbsoluteUpdate,this.Grt=t.saveState)}Brt(t,s=!1){const i=[];for(const e of t){const t=e.yet().est();for(const n of e.Uet())s&&0===n.RD()?i.push({time:t+n.RD(),value:n.Rrt()}):s||i.push({time:t+n.RD(),value:n.Rrt()})}return i.sort(((t,s)=>t.time-s.time))}Wrt(t,s,i){return this.jrt(s,i)}jrt(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}}}{const Xg=self.Is,Kg=new Map,Zg=[0,0,0];class Qg extends Xg.qst.Pnt{constructor(t){super(t)}Wtt(){}l8(){}Ktt(){}tnt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.krt();switch(t){case"behavior":case"plugin":return this.Vrt(s.Hrt(i));case"effect":return this.Vrt(s[i]);case"world-instance":return this.Vrt(this._rt())}}Jit(){const t=this.Ert();return!this.Urt(t,this._rt())}Yit(){return!Xg.ee(this.Grt)&&!this.Urt(this.Grt,this._rt())}Urt(t,s){return t=this.qrt(t),s=this.qrt(s),t.Uo(s)}Ert(){const t=super.Ert();return this.qrt(t)}Ort(){const t=super.Ort();return this.qrt(t)}Lrt(t){}Vrt(t){return Xg.ke(t,Xg.Go)?t.toArray().slice(0,3):t.slice(0,3)}qrt(t){return Xg.ke(t,Xg.Go)?t:new Xg.Go(t[0],t[1],t[2],1)}Fnt(t){return!0}int(){return!0}vnt(){const t=this.gnt.zst(),s=this.gnt.Vz(),i=this.gnt.J9(),e=t.z9(s,i,this.Mrt,this.gnt);if(e&&e.length>1){Kg.has(s)||Kg.set(s,new Map);const t=Kg.get(s),i=this.gnt.iit();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.Mrt)||e.set(this.Mrt,{zrt:!1,color:new Xg.Go(0,0,0,1)})}}Jrt(t,s,i){const e=Kg.get(t).get(s).get(i);return e.zrt=!0,e.color}Int(t,s,i,e,n,r,h,o){const a=this.gnt.zst(),l=this.gnt.yet(),u=this.gnt.Vz(),c=this.gnt.J9(),f=this.gnt.iit(),d=this.Mrt,p=a.z9(u,c,d,this.gnt);if(p&&p.length>1){const t=this.Brt(p,!0),i=this.Wrt(a,a.RD(),t);if(i){const t=l.est(),e=i.time-t;if(0===e)this.Jrt(u,f,this.Mrt).Po(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],n=s[2],r=this.gnt.Sc(e,!1,!0),h=Xg.Go.Ma(t,r[0]),o=Xg.Go.Ma(i,r[1]),a=Xg.Go.Ma(n,r[2]);this.Jrt(u,f,this.Mrt).Po(h,o,a)}}}else this.Yrt(s[0],s[1],s[2])}_nt(){const t=this.gnt.Vz();if(!Kg.has(t))return;const s=Kg.get(t),i=this.gnt.iit();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.Mrt))return;const n=e.get(this.Mrt),r=n.zrt,h=n.color;r&&this.Yrt(h.No(),h.$o(),h.Bo()),0===e.size&&s.delete(i),0===s.size&&Kg.delete(t)}_rt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.krt();switch(t){case"behavior":case"plugin":return this.qrt(s.Hrt(i));case"effect":return s[i].clone();case"world-instance":return this.a$().hU().clone()}}Yrt(t,s,i){const e=this.gnt.iit(),n=this.Nrt(),r=this.krt();switch(e){case"behavior":case"plugin":Zg[0]=t,Zg[1]=s,Zg[2]=i,n.Xrt(r,Zg);break;case"effect":n[r].Ro(t,s,i);break;case"world-instance":this.a$().Krt(t,s,i)}}s3(){}i3(t){}}Xg.qst.Pnt.Ont=Qg}{const ty=self.Is,sy=ty.qst;class iy extends ty.qst.Pnt{constructor(t){super(t)}Wtt(){}l8(){}Ktt(){}tnt(){return this._rt()}Jit(){return this.Ert()!==this.tnt()}Yit(){return!ty.ee(this.Grt)&&this.Grt!==this.tnt()}int(){return!1}Int(t,s,i,e,n,r,h,o){const a=this.gnt,l=a.yet(),u=a.iit(),c=a.zst(),f=l.Vz(),d=a.J9(),p=this.Mrt,m=c.z9(f,d,p,a);if(m&&m.length>1){const i=this.Brt(m),e=t+l.est(),n=this.Wrt(c,e,i);n&&(s=n.value)}switch(a.$et()){case"numeric":if(!sy.Mnt.Zrt(this.krt(),this.Nrt(),s,u))return;break;case"angle":if(!sy.xnt.Zrt(this.krt(),this.Nrt(),s,u))return;break;case"boolean":if(!sy.Gnt.Zrt(this.krt(),this.Nrt(),s,u))return;break;case"color":if(!sy.Tnt.Zrt(this.krt(),this.Nrt(),s,u))return;break;case"text":if(!sy.Cnt.Zrt(this.krt(),this.Nrt(),s,u))return}this.Yrt(s)}_rt(){const t=this.gnt.iit(),s=this.Nrt(),i=this.krt();switch(t){case"behavior":case"plugin":return s.Hrt(i);case"effect":return s[i];case"instance-variable":return s.Qrt(i)}}Yrt(t){const s=this.gnt.iit(),i=this.Nrt(),e=this.krt();switch(s){case"behavior":case"plugin":i.Xrt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.tht(e,t)}}}ty.qst.Pnt.Rnt=iy}{const ey=self.Is,ny=ey.qst.Pnt,ry=new Map,hy=(t,s,i,e,n,r=!1,h=null,o=null)=>{ry.set(t,{sht:s,iht:i,eht:e,round:n,nht:r,init:h,reset:o})};hy("offsetX",((t,s,i,e)=>{"relative"===e.gnt.t7()?t.rht(s,i.zst().ntt()):t.rht(s)}),((t,s)=>t.qM(s)),(t=>t.UM()),!0),hy("offsetY",((t,s,i,e)=>{"relative"===e.gnt.t7()?t.hht(s,i.zst().ntt()):t.hht(s)}),((t,s)=>t.YM(s)),(t=>t.JM()),!0),hy("offsetWidth",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.gnt.t7(),h=1===e.oht.DC();if((r||h)&&t.OU()&&t.BU()){if(isNaN(e.aht)){const s=[];let n=t.bU();for(;n;)s.push(n),n=n.bU();s.reverse();const r=(t,s)=>s.zst().bst(t.Vz()),o=(t,s)=>{const i=r(t,s);if(i)return i.bit();const e=t.Vz().yq();return e.vit()?e.bit():t.uht().lht()},a=(t,s,i,e=0)=>{const n=r(t,s);if(!n)return e;const h=n.Xz(i);if(!h)return e;const o=h.wet().uet();if(!o)return e;const a=o.Art();return a?a.Aet():e};let l;if(h)l=s[s.length-1].jg();else{let t=s[0];l=t.uht().lht()*t.uht().cht(),l+=a(t,i,"offsetWidth"),l+=o(t,i)*a(t,i,"offsetScaleX");for(let e=1;e<s.length;e++)t=s[e],l*=t.uht().cht(),l+=a(t,i,"offsetWidth"),l+=o(t,i)*a(t,i,"offsetScaleX")}e.aht=0===l?Number.EPSILON:l}if(n)return;t.Ty(s/e.aht,!0)}else t.Ty(s)}),((t,s)=>t.Yg(s)),(t=>t.jg()),!0),hy("offsetHeight",((t,s,i,e,n)=>{if(0===s)return;const r="relative"===e.gnt.t7(),h=1===e.oht.DC();if((r||h)&&t.OU()&&t.jU()){if(isNaN(e.aht)){const s=[];let n=t.bU();for(;n;)s.push(n),n=n.bU();s.reverse();const r=(t,s)=>s.zst().bst(t.Vz()),o=(t,s)=>{const i=r(t,s);if(i)return i.xit();const e=t.Vz().yq();return e.vit()?e.xit():t.uht().fht()},a=(t,s,i,e=0)=>{const n=s.zst().bst(t.Vz());if(!n)return e;const r=n.Xz(i);if(!r)return e;const h=r.wet().uet();if(!h)return e;const o=h.Art();return o?o.Aet():e};let l;if(h)l=s[s.length-1].Zg();else{let t=s[0];l=t.uht().fht()*t.uht().dht(),l+=a(t,i,"offsetHeight"),l+=o(t,i)*a(t,i,"offsetScaleY");for(let e=1;e<s.length;e++)t=s[e],l*=t.uht().dht(),l+=a(t,i),l+=o(t,i)*a(t,i,"offsetScaleY")}e.aht=0===l?Number.EPSILON:l}if(n)return;t.pht(s/e.aht,!0)}else t.pht(s)}),((t,s)=>t.Vg(s)),(t=>t.Zg()),!0),hy("offsetAngle",((t,s,i,e,n)=>{t.mht(s)}),((t,s)=>t.XW(s)),(t=>t.KW()),!1,!0),hy("offsetOpacity",((t,s,i,e,n)=>{s/=e.ght?e.ght:1;const r=t.sO()+s;if(0===e.yht)r>1?e.yht+=r-1:r<0&&(e.yht+=r),t.wht(s);else{const i=t.sO()+s;s>0&&e.yht>0?i>1&&(e.yht+=i-1):s>0&&e.yht<0?(e.yht+=s,e.yht>0&&(t.wht(e.yht),e.yht=0)):s<0&&e.yht>0?(e.yht+=s,e.yht<0&&(t.wht(e.yht),e.yht=0)):s<0&&e.yht<0&&i<0&&(e.yht+=i)}}),((t,s)=>{t.eO(s)}),(t=>t.sO()),!1,!0,((t,s,i)=>{switch(t.yht=0,t.gnt.t7()){case"relative":{t.gnt.Ust();const s=t.gnt.wet().uet().let();let i=t.a$().sO(),e=i;for(const n of s){const s=n.RD();e=i+t.gnt.ent(s),e=ey.Kn(e,0,1)}t.Sht=i-e,t.Sht=Math.round(100*(t.Sht+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const n=s[i].RD();e-=t.gnt.ent(n),e=ey.Kn(e,0,1)}t.bht=e,t.bht=Math.round(100*(t.bht+Number.EPSILON))/100;break}}const e="relative"===t.gnt.t7(),n=1===t.oht.DC();if((e||n)&&s.OU()&&s.JU()){const e=[];let n=s.bU();for(;n;)e.push(n),n=n.bU();e.reverse();const r=(t,s,i)=>{const e=s.zst().bst(t.Vz());if(!e)return 0;const n=e.Xz(i);if(!n)return 0;const r=n.wet().uet();if(!r)return 0;const h=r.Art();return h?h.Aet():0};let h=e[0].uht().vht();h+=r(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)h+=r(e[t],i,"offsetOpacity");t.ght=0===h?1:h}}),(t=>{switch(t.gnt.t7()){case"relative":{t.yht=0;const s=t.a$();let i=s.sO();i=Math.round(100*(i+Number.EPSILON))/100,t.gnt.zst().att()?(s.eO(i+t.Sht),t.xI=0):(s.eO(i-t.bht),t.xI=t.J9().mnt());break}}})),hy("offsetOriginX",((t,s)=>t.Mht(s)),((t,s)=>t.HH(s)),(t=>t.VH()),!1),hy("offsetOriginY",((t,s)=>t.xht(s)),((t,s)=>t.zH(s)),(t=>t.qH()),!1),hy("offsetZElevation",((t,s)=>t.Ght(s)),((t,s)=>t.KM(s)),(t=>t.XM()),!0),hy("offsetScaleX",((t,s,i,e)=>{if(0===s)return;const n=t.jg()<0?-1:1;if("relative"===e.gnt.t7()&&t.OU()&&t.BU()){const r=i.bit()*n*s;isNaN(e.aht)&&ry.get("offsetWidth").sht(t,1,i,e,!0),t.Ty(r/e.aht,!0)}else t.Ty(i.bit()*n*s)}),((t,s,i)=>{t.Yg(i.bit()*s)}),((t,s)=>{const i=t.jg()<0?-1:1;if(t.BU()){const e=t.bU(),n=s.zst().bst(e.Vz());let r=NaN;if(n)r=e.jg()/n.bit();else{const t=e.Vz().yq();r=t.vit()?e.jg()/t.bit():1}return t.jg()*i/(s.bit()*r)}return t.jg()*i/s.bit()}),!1),hy("offsetScaleY",((t,s,i,e)=>{if(0===s)return;const n=t.Zg()<0?-1:1;if("relative"===e.gnt.t7()&&t.OU()&&t.jU()){const r=i.xit()*n*s;isNaN(e.aht)&&ry.get("offsetHeight").sht(t,1,i,e,!0),t.pht(r/e.aht,!0)}else t.pht(i.xit()*n*s)}),((t,s,i)=>{t.Vg(i.xit()*s)}),((t,s)=>{const i=t.Zg()<0?-1:1;if(t.jU()){const e=t.bU(),n=s.zst().bst(e.Vz());let r=NaN;if(n)r=e.Zg()/n.xit();else{const t=e.Vz().yq();r=t.vit()?e.Zg()/t.xit():1}return t.Zg()*i/(s.xit()*r)}return t.Zg()*i/s.xit()}),!1);class oy extends ey.qst.Pnt{constructor(t){super(t),this.xI=0,this.yht=0,this.Sht=0,this.bht=0,this.ght=NaN,this.aht=NaN,this.Tht=void 0,this.Cht=void 0,this.Iht=null,this._ht=null,this.Eht=null,this.Rht=null,this.Pht=null,this.Aht=null,this.Oht=null,this.Dht=null,this.Fht=!1,this.Lht=!1,ey.ke(this.gnt.zst(),ey.kht)?this.oht=new ey.qst.Pnt.Nht(this):this.oht=new ey.qst.Pnt.$ht(this);const s=this.gnt.Sst();switch(this.gnt.iit()){case"world-instance":{const t=ry.get(s);this.Iht=t.eht,this._ht=t.sht,this.Eht=t.iht,this.Fht=t.round,this.Lht=t.nht,this.Pht=t.init,this.Rht=t.reset;break}case"audio":this.Aht=t.wrt,this.Oht=t.Srt,this.Dht=t.brt,this.Fht=!!t.vrt(),this.Lht=!1}}qn(){this.oht=null,this.Iht=null,this._ht=null,this.Eht=null,this.Rht=null,this.Pht=null,this.Aht=null,this.Oht=null,this.Dht=null,super.qn()}int(){return this.oht.int()}Bht(){return this.xI}Wht(t){this.xI=t}Wtt(){this.Rht&&this.Rht(this)}l8(){const t=this.oht.l8();if("number"==typeof t&&(this.xI=t),this.Pht){const t=this.a$(),s=this.gnt.yet();this.Pht(this,t,s)}}Ktt(){const t=this.oht.Ktt();"number"==typeof t&&(this.xI=t)}tnt(){return this._rt()}Jit(){return this.Ert()!==this.tnt()}Yit(){return!ey.ee(this.Grt)&&this.Grt!==this.tnt()}vnt(){this.oht.vnt()}Int(t,s,i,e,n,r,h,o){return this.oht.Int(t,s,i,e,n,r,h,o)}_nt(){this.oht._nt()}_rt(){const t=this.Nrt(),s=this.krt(),i=this.a$(),e=this.gnt.yet();switch(this.gnt.iit()){case"behavior":case"plugin":return t.Hrt(s);case"effect":return t[s];case"instance-variable":return t.Qrt(s);case"world-instance":return this.Iht(i,e);case"audio":return this.Aht.call(this.J9(),i,e)}}Yrt(t,s,i){const e=this.Nrt(),n=this.krt(),r=this.a$(),h=this.gnt.yet();switch(this.gnt.iit()){case"behavior":e.jht(n,t);break;case"effect":e[n]+=t;break;case"instance-variable":e.Vht(n,t);break;case"plugin":e.jht(n,t,this.J9().jnt());break;case"world-instance":this._ht(r,t,h,this);break;case"audio":this.Oht.call(this.J9(),r,t,h,this)}}Hht(t,s,i){let e=this.gnt.ttt();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.gnt.zst().RD();if(!this.gnt.zet(t))return}const n=this.Nrt(),r=this.krt(),h=this.a$(),o=this.gnt.yet();switch(this.gnt.iit()){case"behavior":n.Xrt(r,t);break;case"effect":n[r]=t;break;case"instance-variable":n.tht(r,t);break;case"plugin":n.Xrt(r,t,this.J9().jnt());break;case"world-instance":this.Eht(h,t,o);break;case"audio":this.Dht.call(this.J9(),h,t,o)}}Uht(t,s,i,e,n,r,h,o){this.oht.Uht(t,s,i,e,n,r,h,o)}qht(t,s,i,e,n){"angle"===this.gnt.Let()&&(t=ey.tr(t));const r=(t.toString().split(".")[1]||"").length,h=this._rt();let o;switch(o=0===r?this.Fht?Math.round(h):this.Lht?"angle"===this.gnt.Let()?ey.Qn(Math.round(ey.tr(h))):Number(ey.toFixed(h,2)):h:this.Fht?Number(ey.toFixed(h,r)):(this.Lht,h),this.Yrt(o-h,s,i),this.gnt.Sst()){case"offsetWidth":case"offsetScaleX":{const t=this.a$(),s=t.jg(),i=Number(ey.toFixed(s,2));t.Ty(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.a$(),s=t.Zg(),i=Number(ey.toFixed(s,2));t.pht(i-s);break}}}s3(){return Object.assign(super.s3(),{v:this.xI,a:this.yht,fod:this.Sht,bod:this.bht,of:this.ght,sf:this.aht,armorf:this.Tht,armandf:this.Cht})}i3(t){t&&(super.i3(t),this.xI=t.v,this.yht=t.a,this.Sht=ey.te(t.fod)?t.fod:0,this.bht=ey.te(t.bod)?t.bod:0,this.ght=ey.te(t.of)?t.of:NaN,this.aht=ey.te(t.sf)?t.sf:NaN,this.Tht=ey.te(t.armorf)?t.armorf:void 0,this.Cht=ey.te(t.armandf)?t.armandf:void 0)}}ey.qst.Pnt.Ant=oy}{const ay=self.Is;class ly{constructor(t){this.zht=!1,this.Hnt=0,this.Jht=!1,this.Yht=!1,this.Bst=t;for(let t=0,s=this.Bst.length;t<s;t++)this.Bst[t].pet(this)}wst(){return this.Bst}Xht(){this.zht=!0}Kht(){return this.zht}pnt(t){this.Hnt=t}Aet(){return this.Hnt}Zht(t){this.Jht=t}Qht(){return this.Jht}sst(t){this.Yht=t}tot(){return this.Yht}$f(){this.zht=!1,this.Hnt=0,this.Jht=!1,this.Yht=!1}}class uy{constructor(t){this.sot=t}qn(){this.sot=null}DC(){return 0}l8(){const t=this.sot;return this.sot.Xz(),t.Drt((()=>t.Prt((()=>0),(()=>t.J9().mnt()))),(()=>{}))}Ktt(){}int(){switch(this.sot,this.sot.Xz().t7()){case"relative":return!1;case"absolute":return!0}}vnt(){this.sot;const t=this.sot.Xz(),s=t.Sst();switch(t.t7()){case"relative":break;case"absolute":if(t.det())t.met().$f();else{const i=t.zst(),e=t.Vz(),n=t.J9(),r=i.z9(e,n,s,t);r&&r.length>1&&new ly(r)}}}Int(t,s,i,e,n,r,h,o){const a=this.sot,l=this.sot.Xz();switch(l.t7()){case"relative":{const h=a.Bht();a.Yrt(s-h,i,e),r&&this.Uht(t,i,e,n,h,s),a.Wht(s);break}case"absolute":{const t=l.zst(),i=l.yet();if(l.Vz(),l.J9(),l.det()){const e=l.met(),n=e.wst(),r=a.Brt(n,!0),u=a.Wrt(t,t.RD(),r);if(u){const t=i.est(),n=u.time-t;if(0===n)e.sst(h),e.Zht(o),e.Xht(),e.pnt(e.Aet()+s);else{if(n<0)return;const t=l.ent(n);e.sst(h),e.Zht(o),e.Xht(),e.pnt(e.Aet()+(s-t))}}}else a.Hht(s,o,h);break}}}_nt(){const t=this.sot,s=this.sot.Xz();switch(s.t7()){case"relative":break;case"absolute":if(s.det()){const i=s.met();i.Kht()&&t.Hht(i.Aet(),i.Qht(),i.tot())}}}Uht(t,s,i,e,n,r){const h=this.sot;e||(s&&t===s.RD()?h.qht(s.a7(),s,i):i&&t===i.RD()?h.qht(i.a7(),s,i):r-n==0&&h.qht(s.a7(),s,i))}}ay.qst.Pnt.$ht=uy}{const cy=self.Is;class fy{constructor(t){this.sot=t}qn(){this.sot=null}DC(){return 1}l8(){const t=this.sot;return t.Crt(!0),this.Lrt(t.Ert())}Ktt(){const t=this.sot;if(t.Ert()!==t.Ort())return t.Crt(!0),this.Lrt(t.Ort())}int(){return!1}vnt(){}Int(t,s,i,e,n,r,h,o){const a=this.sot,l=a.Bht();switch(a.Xz().t7()){case"relative":a.Yrt(s-l,i,e),r&&this.Uht(t,i,e,n,l,s,!1,h);break;case"absolute":a.Irt()?(a.Crt(!1),a.Yrt(l,i,e)):0===t&&0===a.Xz().zst().Gz()?a.Hht(s,!0,!1):(a.Yrt(s-l,i,e),r&&this.Uht(t,i,e,n,l,s,this.iot(),h))}a.Wht(s)}_nt(){}Lrt(t){return t-this.sot.tnt()}iot(){const t=this.sot,s=t.a$().Vz(),i=t.Xz().L$().q9();let e=0;for(const t of i.k6())0===t.DC()?t.V6(s)&&e++:1===t.DC()&&t.Vz()===s&&e++;return e<=1}Uht(t,s,i,e,n,r,h,o){const a=this.sot;e?s&&t===s.RD()?a.qht(s.a7(),s,i,h,o):i&&t===i.RD()?a.qht(i.a7(),s,i,h,o):i||a.qht(s.a7(),s,i,h,o):s&&t===s.RD()?a.qht(s.a7(),s,i,h,o):i&&t===i.RD()?a.qht(i.a7(),s,i,h,o):r-n==0&&a.qht(s.a7(),s,i,h,o)}}cy.qst.Pnt.Nht=fy}{const dy=self.Is,py=self.ju;dy.qst.Mnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Art(t),t.a7()}let n=e.ttt();if("default"===n&&(n="continuous"),"combo"===e.Let()&&(n="discrete"),"discrete"===n)return s.a7();if("continuous"===n||"step"===n){const r=e.zst().Z9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.a7(),o=i.a7(),a=s.h7("cubic-bezier"),l=i.h7("cubic-bezier"),u=a&&a.eot()&&l&&l.not();if(!u&&h===o)return h;const c=s.RD(),f=i.RD();"step"===n&&0!==r&&(t=dy.Kn(t,c,f));const d=dy.normalize(t,c,f),p=s.dnt();let m;if(u){const t=f-c;m=py.rc(p)(t*d,0,1,t),m=py.rc("cubicbezier")(m,h,h+a.c7(),o+l.p7(),o)}else m=py.rc(p)((f-c)*d,h,o-h,f-c);return"integer"===e.Let()?Math.floor(m):m}}}}{const my=self.Is;my.qst.xnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Art(t),t.a7()}let n=e.ttt();if("default"===n&&(n="continuous"),"combo"===e.Let()&&(n="discrete"),"discrete"===n)return s.a7();if("continuous"===n||"step"===n){const r=e.zst().Z9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.RD(),o=i.RD(),a=s.a7(),l=i.a7();"step"===n&&0!==r&&(t=my.Kn(t,h,o));const u=s.h7("angle");if(!u){if(a===l)return a;const i=my.normalize(t,h,o),e=self.ju.rc(s.dnt());return my.ur(a,l,e(i,0,1,1))}{const i=u.rot();if(a===l&&0===i)return a;const e=my.normalize(t,h,o),n=self.ju.rc(s.dnt())(e,0,1,1);switch(u.hot()){case"closest":return my.ur(a,l,n,i);case"clockwise":return my.cr(a,l,n,i);case"anti-clockwise":return my.dr(a,l,n,i)}}}}}}{const gy=self.Is;gy.qst.Gnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return!!n!=!!i}static Sc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Art(t),t.a7()?1:0}return s.a7()?1:0}}}{const yy=self.Is,wy=[0,0,0],Sy=[0,0,0],by=[0,0,0];yy.qst.Tnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return Array.isArray(i)?(wy[0]=i[0],wy[1]=i[1],wy[2]=i[2]):(by.ha(i),wy[0]=Math.floor(255*by.No()),wy[1]=Math.floor(255*by.$o()),wy[2]=Math.floor(255*by.Bo())),Array.isArray(n)?(Sy[0]=n[0],Sy[1]=n[1],Sy[2]=n[2]):(by.ha(n),Sy[0]=Math.floor(255*by.No()),Sy[1]=Math.floor(255*by.$o()),Sy[2]=Math.floor(255*by.Bo())),wy[0]!==Sy[0]||wy[1]!==Sy[1]||wy[2]!==Sy[2]}static Sc(t,s,i,e){if(!i){let t=e.wet();t=e.Ust().Art(t);const s=t.a7();return wy[0]=s[0],wy[1]=s[1],wy[2]=s[2],wy}let n=e.ttt();if("default"===n&&(n="continuous"),"discrete"===n){const t=s.a7();return wy[0]=t[0],wy[1]=t[1],wy[2]=t[2],wy}if("continuous"===n||"step"===n){const r=e.zst().Z9();if("step"===n&&0!==r){const s=1/r;t=Math.floor(t*s)/s}const h=s.RD(),o=i.RD(),a=s.a7(),l=i.a7();"step"===n&&0!==r&&(t=yy.Kn(t,h,o));const u=yy.normalize(t,h,o),c=s.dnt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.ju.rc(c),S=o-h,b=S*u;return wy[0]=f===m?f:w(b,f,m-f,S),wy[1]=d===g?d:w(b,d,g-d,S),wy[2]=p===y?p:w(b,p,y-p,S),wy}}}}{const vy=self.Is;vy.qst.Cnt=class{constructor(){}static Zrt(t,s,i,e){let n;switch(e){case"behavior":case"plugin":n=s.Hrt(t);break;case"effect":n=s[t];break;case"instance-variable":n=s.Qrt(t)}return n!==i}static Sc(t,s,i,e){if(!i){let t=e.wet();return t=e.Ust().Art(t),t.a7()}return s.a7()}}}{const My=self.Is;My.U5=class{constructor(){this.oot=new Map}qn(){for(const t of this.oot.values())t.qn();this.oot.clear(),this.oot=null}$u(t){const s=new My.aot(t),i=s.Ec();this.oot.set(i,s)}qs(t){return this.oot.get(t)}N9(){return 0}static lot(t,s,i,e){if(s)for(const n of s)My.U5.uot("create",n,t,i,e)}static cot(t,s,i,e){if(s)for(const n of s)My.U5.uot("create-including-disabled",n,t,i,e)}static fot(t,s,i,e){t.length?s.forEach(((s,i)=>{t[i].i3(s)})):s.forEach((s=>{My.U5.uot("load",s,t,i,e)}))}static uot(t,s,i,e,n){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,n);break;case"create":case"create-including-disabled":r=new e(s,n)}else if("object"==typeof e){const i=s[e.dot],h=e.map.get(i);switch(t){case"load":r=new h(null,n);break;case"create":case"create-including-disabled":r=new h(s,n)}}switch(t){case"load":r.i3(s),i.push(r);break;case"create":if("function"==typeof r.git&&!r.git())return r.qn();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const xy=self.Is,Gy=0,Ty=1,Cy=2,Iy=3,_y=4,Ey=5,Ry=6,Py=7,Ay=8,Oy=9,Dy=10,Fy=11;xy.aot=class{constructor(t){this.Yn="",this.tst=NaN,this.pot=0,this.mot="default",this.got="default",this.yot=!1,this.wot=!1,this.Sot=1,this._st=null,this.bot="",this.vot=!1,this.Mot=!0,t&&(this.Yn=t[0],this.tst=t[1],this.pot=t[2],this.mot=t[3],this.got=t[4],this.yot=!!t[6],this.wot=!!t[7],this.Sot=t[8],this.bot=t[9],this.vot=!!t[10],this.Mot=!!t[11],this._st=new xy.xot(t[5],this))}qn(){this._st.qn(),this._st=null}H9(){return this._st||(this._st=new xy.xot(null,this)),this._st}Ec(){return this.Yn}wY(t){this.Yn=t}Gz(){return this.tst}xz(t){this.tst=t}Z9(){return this.pot}Q9(t){this.pot=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}Cz(){return this.yot}Tz(t){this.yot=t}_z(){return this.wot}Iz(t){this.wot=t}Vq(){return this.Sot}ett(t){this.Sot=t}v8(){return this.bot}ntt(){return this.vot}htt(){return this.Mot}s3(){return{trackDataJson:this._st.s3(),name:this.Yn,totalTime:this.tst,step:this.pot,interpolationMode:this.mot,resultMode:this.got,loop:this.yot,pingPong:this.wot,repeatCount:this.Sot,startOnLayout:this.bot,transformWithSceneGraph:!!this.vot,useSystemTimescale:this.Mot}}i3(t){t&&(this.H9().i3(t.trackDataJson),this.Yn=t.name,this.tst=t.totalTime,this.pot=t.step,this.mot=t.interpolationMode,this.got=t.resultMode,this.yot=t.loop,this.wot=t.pingPong,this.Sot=t.repeatCount,this.bot=t.startOnLayout,this.vot=!!t.transformWithSceneGraph,this.Mot=!!t.useSystemTimescale)}}}{const Ly=self.Is,ky=0,Ny=1,$y=2,By=1,Wy=2,jy=3,Vy=4,Hy=5,Uy=6,qy=7,zy=0,Jy=1,Yy=8,Xy=0,Ky=1,Zy=9,Qy=10;class tw{constructor(t,s){this._st=s,this.Got=null,this.Tot=null,this.Est=NaN,this.Rst=NaN,this.mot="default",this.got="default",this.fu=!1,this.Cot=null,this.het=null,this.Bc="",this.Iot=null,this._ot=0,this.Eot=this._st.K9().Gz(),this.qc=0,this.Yn="",t&&(t[0]&&(this.Got=t[0],this.Est=t[0][2],this.Rst=t[0][1]),this.mot=t[1],this.got=t[2],this.fu=!!t[3],t[6]&&(this.Bc=t[6]),t[7]&&(this.Iot=t[7],this._ot=t[7][0],this.Eot=t[7][1]),t[8]&&(this.Tot=t[8]),t[8]&&(this.Tot=t[8]),t[9]&&(this.qc=t[9]),t[10]&&(this.Yn=t[10]),this.Cot=new Ly.Rot(t[4],this),this.het=new Ly.Pot(t[5],this))}qn(){this.Got=null,this._st=null,this.Cot&&(this.Cot.qn(),this.Cot=null),this.het&&(this.het.qn(),this.het=null),this.Iot=null}H9(){return this._st}rst(){return this.Cot||(this.Cot=new Ly.Rot(null,this)),this.Cot}Ust(){return this.het||(this.het=new Ly.Pot(null,this)),this.het}Aot(){return this.Got}Kst(){return this.Rst}wit(t){this.Rst=t}Xst(){return this.Est}dit(t){this.Est=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}git(){return this.fu}yit(t){this.fu=!!t}Jz(){return this.Bc}est(){return this._ot}pit(){return this.Eot}mit(t){this.Eot=t}bit(){return this.Tot[0]}Sit(t){this.Tot||(this.Tot=[]),this.Tot[0]=t}xit(){return this.Tot||(this.Tot=[]),this.Tot[1]}Mit(t){this.Tot||(this.Tot=[]),this.Tot[1]=t}DC(){return this.qc}Ec(){return this.Yn}s3(){return{keyframeDataJson:this.Cot.s3(),propertyTrackDataJson:this.het.s3(),instanceData:this.Got,additionalInstanceData:this.Tot,instanceUid:this.Est,objectClassIndex:this.Rst,interpolationMode:this.mot,resultMode:this.got,enabled:this.fu,id:this.Bc,nestedData:this.Iot,type:this.qc,name:this.Yn}}i3(t){t&&(this.Got=t.instanceData,this.Est=t.instanceUid,this.Rst=t.objectClassIndex,this.mot=t.interpolationMode,this.got=t.resultMode,this.fu=t.enabled,this.Bc=t.id,this.qc=t.type?t.type:0,this.Yn=t.name?t.name:"",this.Eot=this._st.K9().Gz(),t.nestedData&&(this.Iot=t.nestedData,this._ot=this.Iot[0],this.Eot=this.Iot[1]),t.additionalInstanceData&&(this.Tot=t.additionalInstanceData),this.rst().i3(t.keyframeDataJson),this.Ust().i3(t.propertyTrackDataJson))}}Ly.xot=class{constructor(t,s){this.h9=s,this.Oot=[],Ly.U5.lot(this.Oot,t,tw,this)}qn(){this.h9=null;for(const t of this.Oot)t.qn();Ly.bh(this.Oot),this.Oot=null}K9(){return this.h9}ust(){const t=new tw(null,this);return this.Oot.push(t),t}Dot(t){return t.rst().$st()[0]}Fot(t){return t.rst().$st().at(-1)}Lit(t,s){const i=s.rst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()===t)return e}}Lot(t,s){const i=s.rst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()>t)return e}}Dit(t,s){const i=s.rst().$st(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()>=t)return e}}Oit(t,s){const i=s.rst().$st();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.RD()<=t)return e}}*V9(){for(const t of this.Oot)yield t}s3(){return{trackDataItemsJson:this.Oot.map((t=>t.s3()))}}i3(t){t&&Ly.U5.fot(this.Oot,t.trackDataItemsJson,tw,this)}}}{const sw=self.Is,iw=0,ew=0,nw=1,rw=2,hw=3,ow=4,aw=5,lw=6,uw=7,cw=8,fw=9;class dw{constructor(t,s){this.het=s,this.kot="",this.Not=null,this.Mrt=null,this.qc=null,this.$ot=NaN,this.Bot=NaN,this.mot="default",this.got="default",this.fu=!1,this.Wot=null,this.jot=!0,t&&(this.kot=t[0][0],this.Not=t[0].slice(1),this.Mrt=t[1],this.qc=t[2],this.$ot=t[3],this.Bot=t[4],this.mot=t[5],this.got=t[6],this.fu=!!t[7],this.Wot=new sw.Vot(t[8],this),this.jot=t[9])}qn(){this.Wot.qn(),this.Wot=null,this.het=null,this.Not=null}Ust(){return this.het}uet(){return this.Wot||(this.Wot=new sw.Vot(null,this)),this.Wot}iit(){return this.kot}Iet(t){this.kot=t}Eet(){return this.Not}Pet(t){this.Not=t}Oet(){return this.Mrt}Fet(t){this.Mrt=t}DC(){return this.qc}Net(t){this.qc=t}Wet(){return this.$ot}jet(t){this.$ot=t}Vet(){return this.Bot}Het(t){this.Bot=t}ttt(){return this.mot}stt(t){this.mot=t}t7(){return this.got}itt(t){this.got=t}git(){return this.fu}yit(t){this.fu=!!t}qet(){return!!this.jot}s3(){return{propertyKeyframeDataJson:this.Wot.s3(),sourceAdapterId:this.kot,sourceAdapterArguments:this.Not,property:this.Mrt,type:this.qc,min:this.$ot,max:this.Bot,interpolationMode:this.mot,resultMode:this.got,enabled:this.fu,canHavePropertyKeyframes:this.jot}}i3(t){t&&(this.kot=t.sourceAdapterId,this.Not=t.sourceAdapterArguments,this.Mrt=t.property,this.qc=t.type,this.$ot=t.min,this.Bot=t.max,this.mot=t.interpolationMode,this.got=t.resultMode,this.fu=t.enabled,this.jot=t.canHavePropertyKeyframes,this.uet().i3(t.propertyKeyframeDataJson))}}sw.Pot=class{constructor(t,s){this.Ist=s,this.Hot=[],sw.U5.lot(this.Hot,t,dw,this)}qn(){this.Ist=null;for(const t of this.Hot)t.qn();sw.bh(this.Hot),this.Hot=null}nst(){return this.Ist}Vit(){const t=new dw(null,this);return this.Hot.push(t),t}Bet(t){return t.uet().let()[0]}Art(t){return t.uet().let().at(-1)}zet(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()===t)return e}}Xet(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()>t)return e}}Ket(t,s){const i=s.uet().let(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.RD()>=t)return e}}Jet(t,s){const i=s.uet().let();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.RD()<=t)return e}}*Hst(){for(const t of this.Hot)yield t}s3(){return{propertyTrackDataItemsJson:this.Hot.map((t=>t.s3()))}}i3(t){t&&sw.U5.fot(this.Hot,t.propertyTrackDataItemsJson,dw,this)}}}{const pw=self.Is,mw=0,gw=1,yw=2,ww=3;class Sw{constructor(t,s){if(this.Cot=s,this.CF=-1,this.Uot="noease",this.qot=!1,this.A9=null,this.zot=null,!t)return;this.CF=t[0],this.Uot=t[1],this.qot=!!t[2];const i=t[3];this.A9=i?i.split(" "):[],this.zot=new Set(this.A9.map((t=>t.toLowerCase()))),this.Jot=null,this.Yot=null}qn(){this.Cot=null,pw.bh(this.A9),this.A9=null,this.zot.clear(),this.zot=null,this.Jot=null}rst(){return this.Cot}q8(){return this.Jot}Xot(t){this.Jot=t}Fit(){return this.Yot}Kot(t){this.Yot=t}RD(){return this.CF}Mz(t){this.CF=t,this.Cot.Zot()}dnt(){return this.Uot}jz(t){this.Uot=t}git(){return this.qot}yit(t){this.qot=!!t}Pz(){return this.A9}ltt(t){this.A9=t?t.split(" "):[],this.zot=new Set(this.A9.map((t=>t.toLowerCase())))}Qot(){return this.zot}xst(t){return this.zot.has(t.toLowerCase())}s3(){return{time:this.CF,ease:this.Uot,enable:this.qot,tags:this.A9}}i3(t){t&&(this.CF=t.time,this.Uot=t.ease,this.qot=t.enable,this.A9=t.tags,this.zot=new Set(this.A9.map((t=>t.toLowerCase()))))}}pw.Rot=class{constructor(t,s){this.Ist=s,this.Nst=[],pw.U5.lot(this.Nst,t,Sw,this),this.Zot()}qn(){this.Ist=null;for(const t of this.Nst)t.qn();pw.bh(this.Nst),this.Nst=null}Zot(){this.Nst.sort(((t,s)=>t.RD()-s.RD()));for(let t=0;t<this.Nst.length;t++){const s=this.Nst[t];s.Xot(this.Nst[t+1]),s.Kot(this.Nst[t-1])}}nst(){return this.Ist}tat(){return this.Nst.length}$st(){return this.Nst}Wit(){const t=new Sw(null,this);return this.Nst.push(t),this.Zot(),t}Uit(t){for(const s of this.Nst){if(!t(s))continue;const i=this.Nst.indexOf(s);-1!==i&&(s.qn(),this.Nst.splice(i,1))}this.sat(),this.Zot()}sat(){this.Nst.sort(((t,s)=>t.RD()-s.RD()))}iet(t){return this.Nst.indexOf(t)}eet(t){return this.Nst[t]}*iat(){for(const t of this.Nst)yield t}*eat(){for(let t=this.Nst.length-1;t>=0;t--)yield this.Nst[t]}s3(){return{keyframeDataItemsJson:this.Nst.map((t=>t.s3()))}}i3(t){t&&(pw.U5.fot(this.Nst,t.keyframeDataItemsJson,Sw,this),this.Zot())}}}{const bw=self.Is,vw=0,Mw=0,xw=1,Gw=2,Tw=1,Cw=2,Iw=3,_w=4,Ew=5;class Rw{constructor(t,s){this.Wot=s,this.Hnt=null,this.nat=null,this.qc="",this.CF=NaN,this.Uot="noease",this.qot=!1,this.rat=null,this.hat=void 0,this.oat="line",t&&(this.Hnt=t[0][0],this.nat=t[0][1],this.qc=t[0][2],this.CF=t[1],this.Uot=t[2],this.qot=!!t[3],this.oat=t[5],this.rat=null,t[4]&&(this.rat=new bw.aat(t[4],this)),this.Jot=null,this.lat=null)}qn(){this.Wot=null,this.rat&&(this.rat.qn(),this.rat=null),this.Jot=null,this.lat=null}uat(){return this.rat}Xot(t){this.Jot=t}q8(){return this.Jot}cat(t){this.lat=t}z8(){return this.lat}Aet(){return this.Hnt}pnt(t){"color"===this.qc&&bw.te(t)?(this.Hnt[0]=bw.Rr(t),this.Hnt[1]=bw.Pr(t),this.Hnt[2]=bw.Ar(t)):this.Hnt=t}Rrt(){return this.nat}unt(t){"color"===this.qc&&bw.te(t)?(this.nat[0]=bw.Rr(t),this.nat[1]=bw.Pr(t),this.nat[2]=bw.Ar(t)):this.nat=t}a7(){const t=this.Wot.wet().t7();return"relative"===t?this.Aet():"absolute"===t?this.Rrt():void 0}DC(){return this.qc}Net(t){this.qc=t}RD(){return this.CF}Mz(t){this.CF=t,this.Wot.fat()}dnt(){return this.Uot}jz(t){this.Uot=t}git(){return this.qot}yit(t){this.qot=!!t}J8(){return this.oat}h7(t){if(!this.rat)return;if(this.hat||null===this.hat)return this.hat;const s=this.rat.dat();if(!s)return this.hat=null,this.hat;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.Jz()===t)return this.hat=i,this.hat}return this.hat=null,this.hat}s3(){const t=this.rat;return{addonDataJson:t?t.s3():t,value:this.Hnt,aValue:this.nat,type:this.qc,time:this.CF,ease:this.Uot,enable:this.qot}}i3(t){t&&(t.addonDataJson&&this.rat.pat(t.addonDataJson),this.Hnt=t.value,this.nat=t.aValue,this.qc=t.type,this.CF=t.time,this.Uot=t.ease,this.qot=t.enable)}}bw.Vot=class{constructor(t,s){this.ret=s,this.aet=[],this.mat=[],bw.U5.lot(this.aet,t,Rw,this),bw.U5.cot(this.mat,t,Rw,this),this.fat()}qn(){this.ret=null;for(const t of this.aet)t.qn();bw.bh(this.aet),this.aet=null;for(const t of this.mat)t.qn();bw.bh(this.mat),this.mat=null}fat(){let t=this.aet;t.sort(((t,s)=>t.RD()-s.RD()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Xot(t[s+1]),s-1>=0&&i.cat(t[s-1])}t=this.mat,t.sort(((t,s)=>t.RD()-s.RD()));for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Xot(t[s+1]),s-1>=0&&i.cat(t[s-1])}}ant(){const t=new Rw(null,this);return this.aet.push(t),this.fat(),t}lnt(t){for(const s of this.aet){if(!t(s))continue;const i=this.aet.indexOf(s);-1!==i&&(s.qn(),this.aet.splice(i,1))}this.gat(),this.fat()}gat(){this.aet.sort(((t,s)=>t.RD()-s.RD()))}wet(){return this.ret}yat(){return this.aet.length}Art(){return this.aet[this.aet.length-1]}let(){return this.aet}U8(){return this.mat}*wat(){for(const t of this.aet)yield t}*Sat(){for(let t=this.aet.length-1;t>=0;t--)yield this.aet[t]}s3(){const t=this.aet,s=this.mat;return{propertyKeyframeDataItemsJson:t.map((t=>t.s3())),propertyKeyframeDataItemsIncludingDisabledJson:s.map((t=>t.s3()))}}i3(t){t&&(bw.U5.fot(this.aet,t.propertyKeyframeDataItemsJson,Rw,this),bw.U5.fot(this.mat,t.propertyKeyframeDataItemsIncludingDisabledJson,Rw,this),this.fat())}}}{const Pw=self.Is,Aw=0,Ow=1;class Dw{constructor(t,s){this.rat=s,this.Bc=t[0],this.bat=t[1]}qn(){this.rat=null,this.bat=null}uat(){return this.rat}Jz(){return this.Bc}s3(){return{id:this.Bc,data:this.bat}}i3(t){t&&(this.Bc=t.id,this.bat=t.data)}}const Fw=0,Lw=1,kw=2,Nw=3;class $w extends Dw{constructor(t,s){super(t,s),this.vat=this.bat[0],this.Mat=!!this.bat[1],this.xat=this.bat[2],this.Gat=!!this.bat[3]}qn(){super.qn()}c7(){return this.vat}eot(){return this.Mat}p7(){return this.xat}not(){return this.Gat}s3(){return Object.assign(super.s3(),{startAnchor:this.vat,startEnable:!!this.Mat,endAnchor:this.xat,endEnable:!!this.Gat})}i3(t){t&&(super.i3(t),this.vat=t.startAnchor,this.Mat=!!t.startEnable,this.xat=t.endAnchor,this.Gat=!!t.endEnable)}}const Bw=0,Ww=1;class jw extends Dw{constructor(t,s){super(t,s),this.Tat=this.bat[0],this.Cat=this.bat[1]}qn(){super.qn()}hot(){return this.Tat}rot(){return this.Cat}s3(){return Object.assign(super.s3(),{direction:this.Tat,revolutions:this.Cat})}i3(t){t&&(super.i3(t),this.Tat=t.direction,this.Cat=t.revolutions)}}Pw.aat=class{constructor(t,s){this.Iat=s,this._at=[],Pw.U5.lot(this._at,t,{dot:0,map:new Map([["cubic-bezier",$w],["angle",jw]])},this)}qn(){this.Iat=null;for(const t of this._at)t.qn();Pw.bh(this._at),this._at=null}Eat(){return this.Iat}dat(){return this._at}*Rat(){for(const t of this._at)yield t}s3(){return{addonDataItemsJson:this._at.map((t=>t.s3()))}}i3(t){t&&Pw.U5.fot(this._at,t.addonDataItemsJson,{dot:"id",map:new Map([["cubic-bezier",$w],["angle",jw]])},this)}}}{const Vw=self.Is,Hw="start-value",Uw="current-state",qw=0,zw=1;let Jw=0;Vw.kht=class extends Vw.G6{constructor(t,s){super("tween-"+Jw++,t,s),this.Bc="",this.Pat=!1,this.Aat="start-value",this.Pst=null,this.Oat=null,this.Dat=null,this.net=null,this.Fat=null}W9(t){const s=Vw.Un(Vw.Event,"tweenstatereleased");s.Lat=this,t.dispatchEvent(s)}DC(){return 1}c9(){for(const t of this.h9.H9().V9())this.o9.push(Vw.kat.AT(this,t));this.net=this.o9[0]}lst(){const t=this.h9.H9().ust(),s=Vw.kat.AT(this,t);return this.o9.push(s),this.Nat(),s}Nat(){this.net=this.o9[0]}Xz(t){return this.net.wst()[0]}ket(t){this.$at=t}Vz(){const t=this.j8();if(!t||!t.length)return;const s=t[0];if(this.net=s,!s)return;const i=s.Vz();return s.Yst()?i:void 0}Bat(t){this.Dat||(this.Dat=[]),this.Dat.push(t)}Wat(t){this.Oat||(this.Oat=[]),this.Oat.push(t)}jat(t){if(!this.Dat)return;const s=this.Dat.indexOf(t);-1!==s&&this.Dat.splice(s,1)}Vat(t){if(!this.Oat)return;const s=this.Oat.indexOf(t);-1!==s&&this.Oat.splice(s,1)}Hat(t,s){for(const i of this.o9)for(const e of i.Bst){if(e.Sst()!==s)continue;const i=e.Ust(),n=e.wet(),r=i.Bet(n);r.pnt(t),r.unt(t)}}Uat(t){for(const s of this.o9)for(const i of s.Bst)if(i.Sst()===t)return i}qat(t){for(const s of t){const t=this.Uat(s);this.Hat(t.tnt(),s)}if(this.att()){const t=this.Gz()-this.RD();this.xz(t);for(const s of this.o9)s.mit(t);this.Dtt(0)}else{const t=this.RD();this.xz(t);for(const s of this.o9)s.mit(t);this.Dtt(t)}this.Ftt()}zat(t,s){const i=this.Uat(s),e=i.Ust(),n=i.wet(),r=e.Art(n);r.Mz(this.Gz()),r.pnt(t),r.unt(t)}Jat(t){this.Bc=t}Jz(){return this.Bc}Yat(t){this.Aat=t}Xat(){return this.Aat}zz(t){this.Pat=t}qz(){return this.Pat}dtt(){if(this.Dat)for(const t of this.Dat)t(this);if(!this.y8())for(const t of this.o9)t.Yit()}vtt(){this.C9=this.Nc.Mtt()}S8(){if(!this.E9&&(this.E9=!0,this.Oat))for(const t of this.Oat)t(this)}Mz(t){this.Kat(),super.Mz(t)}Btt(t){Vw.te(t)||(t=this.Gz()),t<0?this.p9=0:t>=this.Gz()?this.p9=this.Gz():this.p9=t,this.net.Wtt()}l8(t){if(!this.w8()&&"current-state"===this.Xat())for(const t of this.o9)t.Jit();super.l8(t)}Sz(t=!1){if(super.Sz(t),!this.y8())for(const t of this.o9)t.zit()}$f(t=!0,s=!1){this.Kat(),super.$f(t,s)}Kat(){for(const t of this.o9){const s=t=>{const s=t.RD(),i=this.Gz();return 0!==s&&s!==i};t.Hit(s),t.qit(s)}}a6(){if(this.yz())return!0;const t=this.Vz();return!(t&&t.IV().n0()||(this.r9.r8(this),this.Ytt(),0))}d8(t,s,i){if(this.Pst||(this.Pst=this.Vz()),!this.Pst||this.Pst.OJ())return this.Sz(!0),void this.vtt();const e=this.Pst.gN();if(-1!==e&&(t=i*e),0===t&&0===this.P9)return;this.P9=t;const n=this.p9+this.m9+t*this.g9,r=this.h9.tst;n<0?(this.p9=0,this.m9=-n):n>=r?(this.p9=r,this.m9=this.p9-n):(this.p9=n,this.m9=0);let h=!1,o=!1;const a=this.Cz(),l=this._z();if(a||l?a&&!l?this.g9>0?this.p9>=r&&(this.Btt(0),this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),o=!0):this.p9<=0&&(this.Btt(r),this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),o=!0):!a&&l?this.g9>0?this.p9>=r&&(this.Dtt(r),this.Ez(-1*this.Rz()),o=!0,1===this.y9?this.S9<this.Vq()?(this.S9++,this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt),this.IsPlaying()?this.y9=0:this.w9=0):(this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt),h=!0):0===this.y9&&(this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt),this.IsPlaying()?this.y9=1:this.w9=1)):this.p9<=0&&(this.Dtt(0),this.Ez(-1*this.Rz()),o=!0,1===this.y9?this.S9<this.Vq()?(this.S9++,this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt),this.IsPlaying()?this.y9=0:this.w9=0):(h=!0,this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt)):0===this.y9&&(this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt),this.IsPlaying()?this.y9=1:this.w9=1)):a&&l&&(this.g9>0?this.p9>=r&&(this.Dtt(r),this.Ez(-1*this.Rz()),o=!0,0===this.y9&&(this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt)),1===this.y9&&(this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt)),this.IsPlaying()?(this.y9++,this.y9=Vw.wrap(this.y9,0,2)):(this.w9=this.y9+1,this.w9=Vw.wrap(this.w9,0,2))):this.p9<=0&&(this.Dtt(0),this.Ez(-1*this.Rz()),o=!0,0===this.y9&&(this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt)),1===this.y9&&(this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),this.Zat(Vw.slt.tlt.I$.elt),this.Zat(Vw.slt.tlt.I$.nlt)),this.IsPlaying()?(this.y9++,this.y9=Vw.wrap(this.y9,0,2)):(this.w9=this.y9+1,this.w9=Vw.wrap(this.w9,0,2)))):this.g9>0?this.p9>=r&&(this.S9<this.Vq()?(this.S9++,this.Btt(0),this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),o=!0):(this.Dtt(r),h=!0)):this.p9<=0&&(this.S9<this.Vq()?(this.S9++,this.Btt(r),this.Zat(Vw.slt.tlt.I$.Qat),this.Zat(Vw.slt.tlt.I$.ilt),o=!0):(this.Dtt(0),h=!0)),this.IsPlaying()){if(h)return this.net.sst(),this.Sz(!0),void this.vtt();this.net.Sc(this.p9,!0,!1,o,this.R9,!1),this.R9&&(this.R9=!1)}}Zat(t){const s=this.Vz(),i=s.rlt(Vw.slt.tlt);i.hlt(this),this.Nc.lH(t,s,i.Iq()),i.olt()}s3(){const t=super.s3(),s=this.K9();return Object.assign(t,{tweenDataItemJson:s.s3(),id:this.Bc,destroyInstanceOnComplete:this.Pat,initialValueMode:this.Aat})}i3(t){t&&(this.K9().i3(t.tweenDataItemJson),super.i3(t),this.Bc=t.id,this.Pat=t.destroyInstanceOnComplete,this.Aat=t.initialValueMode,this.Nat())}static IsPlaying(t){return t.IsPlaying()}static Fz(t){return t.Fz()}static llt(t){return!!t._z()&&0===t.ott()}static ult(t){return!!t._z()&&1===t.ott()}static clt(t){const s=t.runtime.q9(),i=new Vw.aot;if(t.json){i.i3(t.json.tweenDataItemJson);const e=new Vw.kht(i,s);return e.i3(t.json),e}{const e=new Vw.kht(i,s);Vw.Ge(t.flt)||(t.flt=[t.flt]),e.Jat(t.id),e.ltt(t.tags),e.Yat(t.dlt),e.zz(t.plt),e.Tz(t.loop),e.Iz(t.mlt),e.xz(t.time),e.Q9(0),e.stt("default"),e.itt(t.flt[0].glt),e.ett(t.jq);const n=e.lst();n.dit(t._q.BV()),n.stt("default"),n.itt(t.flt[0].glt),n.yit(!0),n.wit(t._q.IV().ek());const r=t._q.yq(),h=r.vit()?r.bit():t._q.a$().jg(),o=r.vit()?r.xit():t._q.a$().Zg();n.Sit(h),n.Mit(o);const a=n.Bit();a.Mz(0),a.jz("noease"),a.yit(!0),a.ltt("");const l=n.Bit();l.Mz(t.time),l.jz("noease"),l.yit(!0),l.ltt("");for(const s of t.flt){const i=n.jit();i.Iet(s.ylt),i.Ret(s.wlt),i.Det(s.uit),i.ket(s.type),i.jet(NaN),i.Het(NaN),i.stt("default"),i.itt(s.glt),i.yit(!0);const e=i.ont();e.Net(s.valueType),e.Mz(0),e.jz(s.Slt),e.yit(!0),e.pnt(s.blt),e.unt(s.blt);const r=i.ont();r.Net(s.valueType),r.Mz(t.time),r.jz(s.Slt),r.yit(!0),r.pnt(s.vlt),r.unt(s.vlt),i.J9()}return e}}static dit(t,s){if(!isNaN(s))for(const i of t.j8())i.dit(s)}Mlt(t,s){return this.Fat||(this.Fat=Vw.Un(self.Nz,this,t,s)),this.Fat}}}{const Yw=self.Is;Yw.kat=class extends Yw.U9{constructor(t,s){super(t,s),this.xlt=null,this.Glt=null}static AT(t,s){return Yw.Un(Yw.kat,t,s)}Tlt(){1===this.Bst.length?this.xlt=this.Bst[0]:(this.xlt=this.Bst[0],this.Glt=this.Bst[1])}Wst(){for(const t of this.Ist.Ust().Hst())this.Bst.push(Yw.Clt.AT(this,t));this.Tlt()}jit(){const t=this.Ist.Ust().Vit(),s=Yw.Clt.AT(this,t);return this.Bst.push(s),this.Tlt(),s}l8(){if(this.Jst(),!this.Yst()&&this.X9())return;const t=this.zst().att()?0:this.pit();for(const s of this.Bst)s.l8(t),0===this.jst&&1===s.Cit()&&(this.jst=1),0===this.b6&&1===s.u8()&&(this.b6=1);this.Vst=0,this.Bst.some((t=>t.Qtt()))&&(this.Vst=1),this.kst=this.Iit(t),this.Dst=!1,this.Fst=!1,this.Sc(t)}ist(){}Sc(t,s=!1,i=!1,e=!1,n=!1,r=!1,h=!1){if(this.Pst||this.Vz(),this.Pst)return!this.Pst.OJ()&&(!r||!this.IV().n0())&&(this.Glt?(this.xlt.Sc(t,i,e,h),this.Glt.Sc(t,i,e,h)):this.xlt.Sc(t,i,e,h),void(0!==this.xlt.Cit()&&(this.Ast||(this.Ast=this.Pst.a$()),this.Ast&&this.Ast.NH())))}hst(){}i3(t){super.i3(t),this.Tlt()}}}{const Xw=self.Is;Xw.Clt=class extends Xw.qst{constructor(t,s){super(t,s),this.Ilt=!1}static AT(t,s){return Xw.Un(Xw.Clt,t,s)}Sc(t,s=!1,i=!1,e=!1){let n,r;if(this.Ilt)n=this.aet[0],r=this.aet[1];else if(s)n=this.het.Jet(t,this.ret),r=n.q8();else{if(this.cet){const s=this.zst(),i=this.cet.q8(),e=this.cet.RD(),n=i?i.RD():s.Gz();(t<=e||t>=n)&&(this.cet=this.het.Jet(t,this.ret))}else this.cet=this.het.Jet(t,this.ret);n=this.cet,r=n.q8()}this.oet.Sc(t,n,r,s,i,e)}ont(){const t=this.ret.uet().ant();return this.cet=null,this.Ilt=this.Uet().length<=2,t}qit(t){this.cet=null,this.ret.uet().lnt(t),this.Ilt=this.Uet().length<=2}s3(){return{sourceAdapterJson:this.J9().s3(),basic:this.Ilt}}i3(t){t&&(this.J9().i3(t.sourceAdapterJson),this.Ilt=t.basic)}}}{const Kw=self.Is,Zw=self.ju,Qw=0,tS=1,sS=2;Kw.bc=class extends Kw.Vn{constructor(t,s=!0){super(),this.Yn=t[0],this._lt=t[2],this.Elt=[];for(const s of t[1]){const t=Kw.Rlt.AT(this,s);this.Elt.push(t)}for(let t=0;t<this.Elt.length;t++){const s=this.Elt[t],i=this.Elt[t+1],e=this.Elt[t-1];s.Xot(i),s.cat(e)}this.Plt=new Map,this.Alt=new Map,this.Olt(),s&&Zw.Mc(this.Yn,((t,s,i,e)=>this.Sc(t,s,i,e)),null,{transition:this})}static AT(t){return Kw.Un(Kw.bc,t)}qn(){for(const t of this.Elt)t.qn();Kw.bh(this.Elt),this.Elt=null,this.Plt.clear(),this.Plt=null,this.Alt.clear(),this.Alt=null}vc(t){this._lt=!!t}Dlt(t){const s=this.Alt.get(t);if(s)return s;for(const s of this.Elt)if(s.Flt()===t)return this.Alt.set(t,s),s}Llt(t){for(let s=this.Elt.length-1;s>=0;s--){const i=this.Elt[s],e=i.Flt();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.z8();if(!t)break;if(t.Flt()!==s.Flt())break;s=t}return s}}}}Sc(t,s,i,e){let n=t/e;if(this._lt){const n=this.Dlt(0),r=this.Dlt(1),h=s+(s+i)*n.klt(),o=(s+i)*r.klt()-h;return 0===e?h+o:Zw.Gc(t,h,o,e)}0===e&&(n=1);let r=this.Llt(n),h=r.q8();if(!h){const t=r.z8(),s=r;r=t,h=s}const o=h.Flt()-r.Flt(),a=Kw.Xn(n,r.Flt(),h.Flt(),0,o);if(r.Nlt()||0===o){const t=s+(s+i)*r.klt(),e=(s+i)*h.klt()-t;return 0===o?1===a?t+e:t:Zw.Gc(a,t,e,o)}const l=r.Flt(),u=r.klt(),c=r.Flt()+r.$lt(),f=r.klt()+r.Blt(),d=h.Flt()+h.Wlt(),p=h.klt()+h.jlt(),m=h.Flt(),g=h.klt();let y=Zw.rc("spline")(a,l,u,c,f,d,p,m,g,this.Plt.get(r));return y+=r.klt(),(1-y)*s+y*(s+i)}Olt(){this.Plt.clear();for(let t=0;t<this.Elt.length-1;t++){const s=this.Elt[t];if(!s.eot())continue;const i=s,e=this.Elt[t+1];if(!e.not())continue;const n=i.Flt(),r=i.Flt()+i.$lt(),h=e.Flt()+e.Wlt(),o=e.Flt();this.Plt.set(i,Zw.Tc(n,r,h,o))}}}}{const iS=self.Is,eS=0,nS=1,rS=2,hS=3,oS=4,aS=5,lS=6,uS=7,cS=8;iS.Rlt=class extends iS.Vn{constructor(t,s){super(),this.Vlt=t,this.Hlt=s[0],this.Ult=s[1],this.qlt=s[2],this.zlt=s[3],this.Jlt=s[4],this.Ylt=s[5],this.Mat=s[6],this.Gat=s[7],this.Xlt=s[8],this.Jot=null,this.lat=null}qn(){this.Vlt=null}static AT(t,s){return iS.Un(iS.Rlt,t,s)}Xot(t){this.Jot=t}q8(){return this.Jot}cat(t){this.lat=t}z8(){return this.lat}Flt(){return this.Hlt}klt(){return this.Ult}$lt(){return this.qlt}Blt(){return this.zlt}Wlt(){return this.Jlt}jlt(){return this.Ylt}eot(){return this.Mat}not(){return this.Gat}Nlt(){return"linear"===this.Xlt}Klt(){return"cubic"===this.Xlt}}}{const fS=self.Is;fS.Zlt=class extends fS.Vn{constructor(t){super(),this.Nc=t,this.Qlt=[]}qn(){for(const t of this.Qlt)t.qn();fS.bh(this.Qlt),this.Qlt=null}AT(t){this.Qlt.push(fS.bc.AT(t))}}}{const dS=self.Is;dS.tut=class extends dS.Vn{constructor(t){super(),this.Nc=t,this.sut=null,this.iut=null,this.c6=t=>this.f6(t._q)}qn(){if(this.v6(),this.sut){for(const t of this.sut.values())t.clear();this.sut.clear()}this.sut=null,this.Nc=null}AT(t){if(this.sut||(this.sut=new Map),!t)return;const s=t[0][16][0],i=t[1];this.sut.has(i)||this.sut.set(i,new Map),this.sut.get(i).set(s,t)}M6(){const t=this.Nc.wf();t&&t.addEventListener("instancedestroy",this.c6)}v6(){const t=this.Nc.wf();t&&t.removeEventListener("instancedestroy",this.c6)}eut(){return!!this.sut&&0!==this.sut.size}nut(t,s){let i=0;if(i=t instanceof dS.rut?t.ek():t,!this.sut.has(i))return;const e=this.sut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}hut(t,s){this.iut||(this.iut=new WeakMap),this.iut.has(t)||this.iut.set(t,s)}out(t){if(!this.iut)return"";return this.iut.get(t)||""}f6(t){this.iut&&this.iut.has(t)&&this.iut.delete(t)}}}{const pS=self.Is;pS.aut=class{constructor(t){this.Nc=t,this.lut=new pS.uut}qn(){this.lut.qn(),this.lut=null,this.Nc=null}L$(){return this.Nc}AT(t){this.lut.$u(t)}cut(t){return this.lut.qs(t)}fut(){return this.lut.fut()}}}{const mS=self.Is;mS.dut=class{constructor(t,s,i,e,n,r,h){this.Nc=n.L$(),this.mut=n,this.gut=t,this.yut=i,this.wut=e,this.Pw=s,this.q5=r,this.Sut=h??r.Vz().BV(),this.but(),this.vut=this.xut?.Mut()??-1,this.Gut=[],this.Tut=null,this.Cut=NaN,this.Iut=null,this._ut=null,this.Eut=null,this.Rut="",this.Put=null,this.Aut="",this.Out="",this.Dut=0,this.Fut=!1,this.G9=!1}qn(){this.G9||(mS.bh(this.Gut),this.Gut=null,this.Nc=null,this.mut=null,this.wut=null,this.q5=null,this.Tut=null,this.Cut=NaN,this.Iut&&this.Iut.clear(),this.Iut=null,this._ut=null,this.Eut=null,this.Rut="",this.Put=null,this.Aut="",this.Out="",this.G9=!0)}zn(){return this.G9}Lut(){return this.mut}L$(){return this.Nc}Ec(){return this.gut}kut(){return this.wut}gz(){return this.Pw}F6(){return this.q5||(this.q5=this.Nc.e$(this.Sut).yq()),this.q5}Nut(){return this.$ut(this.vut)}But(){const t=this.Nut();return t?t.gz():""}Wut(){const t=this.Nut();return t?t.Pz():[]}jut(t){const s=this.Wut();if(!s)return!1;if(!s.length)return!1;const i=mS.dut.utt(t);return!(!i||!i.length)&&i.every(mS.dut.ftt,s)}Vut(t,s){const i=this.Wut();if(!i)return!1;if(!i.length)return!1;const e=mS.dut.utt(t);return!(!e||!e.length)&&e.every((t=>mS.dut.Hut.call(i,t,s)))}static ftt(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map((t=>t.trim().toLowerCase())).includes(t.trim().toLowerCase())}static utt(t){return t.trim().split(" ")}static Hut(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some((i=>mS.compare(i.trim(),s,t.trim())))}Uut(t){const s=this.Nut();if(s){if(mS.te(t)){const i=s.qut(),e=i?i[t]:void 0;if(mS.te(e))return this.$ut(e)}if("string"==typeof t)for(const i of s.qut()){const s=this.$ut(i);if(s.vz(t))return this.$ut(s.Mut())}}}zut(t){const s=this.Uut(t);return s?s.gz():""}Jut(t){const s=this.Uut(t);return s?s.Pz():""}Yut(t){const s=this.Nut();if(!s)return-1;const i=s.qut();if(!i)return-1;const e=this.Uut(t);return e?i.indexOf(e.Mut()):-1}Xut(){const t=this.Nut();if(!t)return 0;const s=t.qut();return s?s.length:0}$ut(t){return this.wut.$ut(t)}$f(){this.Zut().Kut(!0)}Kut(t){if(this.Qut()){for(const[t,s]of this.Qut().entries())s.Kut(!1);this.Qut().clear()}if(this.Iut=null,this.Tut=null,this.tct=null,this._ut=null,this.Rut="",this.Put=null,this.Aut="",this.Out="",this.Gut=[],t){this.mut.sct(this);const t=this.xut.Mut();t!==this.vut&&this.ict(t)}else this.vut=this.xut.Mut()}ect(){const t=this.wut.$ut(this.vut);return t?t.rct().nct():0}hct(t){return!(t<0)&&t===this.oct()}oct(){const t=this.wut.$ut(this.vut);if(!t)return-1;let s=t.rct().act();return s?t.rct().lct().indexOf(s):-1}uct(t){const s=this.cct(t);return s?s.Ec():""}fct(t){let s;return mS.te(t)&&(s=this.cct(t)),"string"==typeof t&&(s=this.dct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Aet():""}pct(t,s){if(t.git())return t.Mut();{const i=t.rct().act();if(!i)return s.Mut();const e=i.mct();if(!mS.te(e))return s.Mut();const n=this.$ut(e);return n?this.pct(n,s):s.Mut()}}gct(t,s){if(t.git()){if("reference"===t.DC()){const s=t.yct(),i=t.wct(),e=this.mut.cut(s);if(!e)return[-1,null];const n=e.Sct(i);return n?this.gct(n,e):this.gct(e.bct(),e)}return[t.Mut(),s]}{const i=t.rct().act();if(!i)return[-1,null];const e=i.mct();if(!mS.te(e))return[-1,null];const n=s.$ut(e);return n?this.gct(n,s):[-1,null]}}vct(t,s){let i=this.$ut(t);if(i){if(!i.git()){const s=this.$ut(this.vut);t=this.pct(i,s)}if(mS.te(t)&&t!==this.vut)if(i=this.$ut(t),"reference"===i.DC()){const e=i.yct(),n=i.wct(),r=this.mut.cut(e);let h=r.Sct(n);if(h){const i=this.gct(h,r);if(-1===i[0])return;s(this.vut,t,i[1],i[0])}else s(this.vut,t)}else s(this.vut,t)}}Mct(t){let s;if(mS.te(t)&&(s=this.cct(t)),"string"==typeof t&&(s=this.dct(t)),!s)return;let i=s.mct();mS.te(i)&&this.vct(i,((t,s,i,e)=>{this.Gut.push(t),this.ict(s,i,e)}))}xct(){const t=this.Gct();if(!t)return;const s=t.mct();mS.te(s)&&this.vct(s,((t,s,i,e)=>{this.Gut.push(t),this.ict(s,i,e)}))}Tct(t){const s=this.wut.Sct(t);if(!s)return;const i=s.Mut();mS.te(i)&&this.vct(i,((t,s,i,e)=>{this.Gut.push(t),this.ict(s,i,e)}))}Cct(){const t=this.Gut.pop();mS.te(t)?this.ict(t):this.Ict()&&(this.mut.sct(this.Ict(),!0,!1,!1),this.Ict().ict(this._ct()),this.Zut().Ect(this.Ict()))}Rct(t){if(!this.Nut())return;const s=this.Uut(t);if(s){if(!s.git())return;const t=s.Mut();if(!mS.te(t))return;this.Gut.push(this.vut),this.ict(s.Mut())}}Pct(t){if(mS.te(t))return!!this.wut.$ut(this.vut).rct().lct()[t];if("string"==typeof t){const s=this.wut.$ut(this.vut).rct().lct();for(let i=0;i<s.length;i++)if(s[i].Ec()===t)return!0;return!1}return!1}Act(){this.Fut=!0}Oct(){return this.Dut>0}Dct(){this.Dut++}Fct(){this.Dut--,0===this.Dut&&this.Fut&&this.mut.Lct(this)}ict(t,s,i){const e=this.vut,n=this.F6().Vz();this.Dct(),this.mut.kct(this),this.Nc.lH(mS.E$.$ct.I$.Nct,n),this.Nc.lH(mS.E$.$ct.I$.Bct,n),this.Nc.lH(mS.E$.$ct.I$.Wct,n),this.Nc.lH(mS.E$.$ct.I$.jct,n),this.vut=t;let r=this.$ut(this.vut);if("dictionary"===r.DC()&&(this.Nc.lH(mS.E$.$ct.I$.Vct,n),this.Nc.lH(mS.E$.$ct.I$.Hct,n),this.Nc.lH(mS.E$.$ct.I$.Uct,n),this.Nc.lH(mS.E$.$ct.I$.qct,n)),this.mut.zct(),this.Fct(),!this.zn()&&(r=this.$ut(this.vut),"reference"===r.DC())){const t=s?s.Ec():r.yct();if(this.Jct(r)){this.Gut.pop();const t=this.Yct(r);this.mut.sct(t,!0,!0,!1),t.Xct(this,e),this.Zut().Ect(t)}else{const s="number"==typeof i?i:r.wct();if(t){this.Gut.pop();let i=r.Kct();if(i){let t=this.mut.Zct(i);for(;t;)i=mS.Cm(i),t=this.mut.Zct(i)}else{i=`${t}-ref`;let s=this.mut.Zct(i);for(;s;)i=mS.Cm(i),s=this.mut.Zct(i)}const n=this.mut.Qct(t,s,i,this.q5,!0);n.Xct(this,e),this.tft(r,n);const h=this.Zut();n.sft(h),h.Ect(n)}}}}Gct(){const t=this.wut.$ut(this.vut);return t?t.rct().act():null}cct(t){const s=this.wut.$ut(this.vut);if(!s)return null;const i=s.rct().lct();if(!i)return null;return i[t]||null}dct(t){const s=this.wut.$ut(this.vut);if(!s)return null;return s.rct().ift(t)||null}but(t){if("number"==typeof t){let s=this.$ut(t);s||(s=this.wut.bct()),this.xut=s}else if("number"==typeof this.yut){let t=this.$ut(this.yut);t||(t=this.wut.bct()),this.xut=t}else{let t=this.wut.Sct(this.yut);t||(t=this.wut.bct()),this.xut=t}}s3(){return this.Fut?null:{flowchartName:this.gut,flowchartTag:this.Pw,startNodeTag:this.yut,currentNodeId:this.vut,previousNodeIds:this.Gut,pluginUID:this.q5.Vz().BV(),reference:{previousFlowchartTag:this.Ict()?this.Ict().gz():"",previousStartNodeId:mS.te(this._ct())?this._ct():NaN,referencesJson:this.eft(),currentReferenceFlowchartTag:this.nft()?this.nft().gz():"",rootFlowchartTag:this.Zut()?this.Zut().gz():""}}}eft(){if(!this.rft())return null;const t=[];for(const[s,i]of this.Qut().entries())t.push({flowchartElementId:s.Mut(),flowchartStateTag:i.gz()});return t.length?t:null}i3(t){if(t){if(this.gut=t.flowchartName,this.Pw=t.flowchartTag,this.yut=t.startNodeTag,this.vut=t.currentNodeId,this.Gut=t.previousNodeIds,this.Sut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Rut=s.previousFlowchartTag,this.Cut=s.previousStartNodeId,this.Put=s.referencesJson,this.Aut=s.currentReferenceFlowchartTag,this.Out=s.rootFlowchartTag}this.but()}}Ict(){return"string"==typeof this.Rut&&this.Rut&&(this.Tut=this.mut.Zct(this.Rut),this.Rut=""),this.Tut}_ct(){return this.Cut}Xct(t,s){this.Tut=t,this.Cut=s}nft(){return"string"==typeof this.Aut&&this.Aut&&(this._ut=this.mut.Zct(this.Aut),this.Aut=""),this._ut}Ect(t){this._ut=t,this._ut===this&&(this._ut=null)}Zut(){return"string"==typeof this.Out&&this.Out&&(this.Eut=this.mut.Zct(this.Out),this.Out=""),this.Eut?this.Eut:this}sft(t){this.Eut=t}rft(){return this.hft(),!!this.Iut}Jct(t){return this.hft(),this.Iut&&this.Iut.has(t)}hft(){if(this.Put){this.Iut&&this.Iut.clear(),this.Iut||(this.Iut=new Map);for(const t of this.Put){const s=this.mut.Zct(t.flowchartStateTag),i=s.$ut(t.flowchartElementId);this.Iut.set(i,s)}this.Put=null}}Qut(){return this.hft(),this.Iut}Yct(t){return this.hft(),this.Iut.get(t)}tft(t,s){this.Iut||(this.Iut=new Map),this.Iut.set(t,s)}}}{const gS=self.Is;gS.oft=class{constructor(t){this.Nc=t,this.aft=new Map,this.lft=null,this.uft=[],this.cft=()=>this.g6(),this.fft=null}qn(){gS.bh(this.uft),this.uft=null,this.aft.clear(),this.aft=null,this.lft=null,this.Nc=null,this.fft=null}L$(){return this.Nc}cut(t){return this.Nc.Lut().cut(t)}Qct(t,s,i,e,n,r){const h=this.Nc.Lut().cut(t);if(!h)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.aft.has(i)){const t=this.aft.get(i);return void(t&&this.Lct(t))}const o=new gS.dut(t,i,s,h,this,e,r);return this.aft.set(i,o),n&&this.sct(o,!0),o}Lct(t){if(t.Act(),t.Oct())return;const s=t.gz();this.aft.delete(s),t.qn(),this.lft===t&&(this.lft=null)}dft(t){t.$f()}Zct(t){return this.aft.get(t)}kct(t){this.uft.push(t)}zct(){this.uft.pop()}sct(t,s=!1,i=!1,e=!0){if(e){const s=t.nft();t=s||t}t!==this.lft&&(this.pft(),this.mft(t,s,i))}gft(t){return"string"==typeof t?this.Zct(t):this.uft.length?this.uft[this.uft.length-1]:this.lft}pft(){if(!this.lft)return;if(this.lft.zn())return;const t=this.lft.F6().Vz();this.lft.Dct(),this.kct(this.lft),this.Nc.lH(gS.E$.$ct.I$.yft,t),this.zct(),this.lft.Fct()}mft(t,s=!1,i=!1){if(this.lft=t,!this.lft)return;if(this.lft.zn())return;const e=this.lft.F6().Vz();this.lft.Dct(),this.kct(this.lft),this.Nc.lH(gS.E$.$ct.I$.wft,e),!0!==i&&"number"!=typeof i||this.lft.but(i),s&&(this.Nc.lH(gS.E$.$ct.I$.Vct,e),this.Nc.lH(gS.E$.$ct.I$.Hct,e),this.Nc.lH(gS.E$.$ct.I$.Uct,e),this.Nc.lH(gS.E$.$ct.I$.qct,e)),this.zct(),this.lft.Fct()}s3(){return{flowchartJsonObjects:[...this.aft.values()].map((t=>t.s3())),currentFlowchartTag:this.lft?this.lft.gz():null}}i3(t){if(!t)return;this.fft=t;const s=new Map;for(const t of this.fft.flowchartJsonObjects){const i=t.flowchartTag;if(this.aft.has(i)){const e=this.aft.get(i);e.i3(t),s.set(i,e)}else{const i=this.Qct(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.i3(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.aft.entries())s.has(t)||i.qn();this.aft.clear(),this.aft=s,this.Nc.B4()?this.Nc.wf().addEventListener("afterload",this.cft):this.g6()}g6(){this.Nc.wf().removeEventListener("afterload",this.cft);const t=this.aft.get(this.fft.currentFlowchartTag);t&&this.sct(t,!0),this.fft=null}}}{const yS=self.Is;yS.uut=class{constructor(){this.Sft=new Map}qn(){for(const t of this.Sft.values())t.qn();this.Sft.clear(),this.Sft=null}$u(t){const s=new yS.bft(t),i=s.Ec();this.Sft.set(i,s)}qs(t){return this.Sft.get(t)}fut(){return!!this.Sft.size}static vft(t,s,i,e){if(s)for(const n of s){const s=new i(n,e);t.push(s)}}}}{const wS=self.Is,SS=0,bS=1;wS.bft=class{constructor(t){this.Yn=t[0],this.Mft=new wS.xft(t[1],this)}qn(){this.Mft.qn(),this.Mft=null}Gft(){return this.Mft}$ut(t){return this.Mft.$ut(t)}Sct(t){return this.Mft.Sct(t)}bct(){return this.Mft.bct()}Ec(){return this.Yn}}}{const vS=self.Is,MS=0,xS=1,GS=2,TS=3,CS=4,IS=5,_S=6,ES=7,RS=8,PS=8,AS=9,OS=10,DS=11;class FS{constructor(t,s){this.Mft=s,this.qc=t[7],this.Tft=t[0],this.Pw=t[1],this.Pw?this.A9=this.Pw.trim().split(" ").map((t=>t.trim())):this.A9=[],this.Cft=t[2],this.Ift=null,this._ft=null,this.qot=!1,"dictionary"===this.qc&&(this.Ift=t[3],this._ft=t[4],this.qot=t[8]),this.Eft=t[6],this.Rft=null,this.Pft=null,this.Aft=null,"reference"===this.qc&&(this.Rft=t[8],this.Pft=t[9],this.Aft=t[10],this.qot=t[11]),this.Oft=new vS.Dft(t[5],this)}qn(){this.Mft=null}Gft(){return this.Mft}rct(){return this.Oft}Mut(){return this.Tft}gz(){return this.Pw}Pz(){return this.A9}vz(t){if(!this.A9)return!1;if(!this.A9.length)return!1;const s=vS.dut.utt(t);return!(!s||!s.length)&&s.every(vS.dut.ftt,this.A9)}Fft(){return this.Eft}Lft(t){this.Eft=!!t}kft(){if("dictionary"===this.qc)return!0;if("reference"===this.qc)return!1;throw new Error(`unexpected flowchart node type: ${this.qc}`)}qut(){return this.Cft}Nft(){return this.Ift}$ft(){return this._ft}DC(){return this.qc}git(){return this.qot}yct(){return this.Rft}wct(){return this.Pft}Kct(){return this.Aft}}vS.xft=class{constructor(t,s){this.wut=s,this.Bft=[],this.Wft=new Map,this.jft=new Map,this.Vft=null,vS.uut.vft(this.Bft,t,FS,this);for(const t of this.Bft){const s=t.Mut(),i=t.gz(),e=t.Pz(),n=t.Fft();if(this.Wft.set(s,t),i)for(const s of e)this.jft.has(s)||this.jft.set(s,new Set),this.jft.get(s).add(t);n&&(this.Vft=t);const r=t.rct();for(const t of r.Hft()){const s=t.Mut();this.Wft.set(s,t)}}this.Vft||this.Uft()}qn(){this.wut=null;for(const t of this.Bft)t.qn();vS.bh(this.Bft),this.Bft=null}kut(){return this.wut}$ut(t){return this.Wft.get(t)}Sct(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.jft.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce(((t,s)=>s.size<t.size?s:t))].filter((t=>s.every((s=>s.has(t)))))[0]}bct(){return this.Vft}*qft(){for(const t of this.Bft)yield t}Uft(){let t=0;for(const s of this.qft())s.Fft()&&t++;if(0===t){for(const t of this.qft())if(t.kft()&&!t.Fft())return void t.Lft(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.qft())s.kft()&&(s.Fft()&&t?t=!1:s.Fft()&&!t&&s.Lft(!1))}}for(const t of this.qft())if(t.kft()&&t.Fft())return void(this.Vft=t)}}}{const LS=self.Is,kS=0,NS=1,$S=2,BS=3,WS=4,jS=5;class VS{constructor(t,s){this.Oft=s,this.Tft=t[0],this.Yn=t[1],this.Hnt=t[2],this.zft=t[3],this.qot=t[4],this.Jft=t[5]}qn(){this.Oft=null}rct(){return this.Oft}Mut(){return this.Tft}Ec(){return this.Yn}Aet(){return this.Hnt}mct(){return this.zft}git(){return this.qot}Yft(){return this.Jft}}LS.Dft=class{constructor(t,s){this.Xft=s,this.Kft=[],this.Zft=new Map,LS.uut.vft(this.Kft,t,VS,this),this.Qft=this.Kft.filter((t=>t.git()));for(const t of this.Qft)this.Zft.set(t.Ec(),t)}qn(){this.Xft=null;for(const t of this.Kft)t.qn();LS.bh(this.Kft),this.Kft=null,LS.bh(this.Qft),this.Qft=null}tdt(){return this.Xft}nct(){return this.Qft.length}lct(){return this.Qft}ift(t){return this.Zft.get(t)}act(){for(const t of this.Qft)if(t.Yft())return t}*Hft(){for(const t of this.Qft)yield t}}}{const HS=self.Is;HS.sdt=class extends HS.Vn{constructor(t){super(),this.idt=t,this.edt=[],this.edt.push(HS.Un(HS.ndt,this)),this.Rw=0,this.rdt=this.edt[0]}qn(){for(const t of this.edt)t.qn();HS.bh(this.edt),this.rdt=null,this.idt=null}IV(){return this.idt}AW(){return this.rdt}hdt(){return this.edt[this.Rw-1]}Eu(){this.AW().Eu()}odt(){const t=this.edt,s=++this.Rw;if(s===t.length){const s=HS.Un(HS.ndt,this);t.push(s),this.rdt=s}else{const i=t[s];i.$f(),this.rdt=i}}adt(){const t=this.edt,s=++this.Rw;s===t.length&&t.push(HS.Un(HS.ndt,this));const i=t[s];i.rd(t[s-1]),this.rdt=i}IY(){this.rdt=this.edt[--this.Rw]}ldt(t){const s=this.edt;for(let i=0,e=s.length;i<e;++i)s[i].ldt(t)}}}{const US=self.Is;US.ndt=class extends US.Vn{constructor(t){super(),this.edt=t,this.idt=this.edt.IV(),this.udt=this.idt.L$().Zk(),this.cdt=!0,this.mZ=[],this.fdt=[]}qn(){this.ddt(),this.edt=null,this.idt=null,this.udt=null}ddt(){US.bh(this.mZ),US.bh(this.fdt)}IV(){return this.idt}pdt(){return this.cdt}mdt(){return this.cdt?!!this.idt.DW():!!this.mZ.length}PW(){return this.cdt?this.idt.PW():this.mZ}gdt(){return!!this.fdt.length}ydt(){return this.fdt}wdt(){const t=this.PW();return t.length?t:this.fdt}$f(){this.cdt=!0,US.bh(this.fdt)}Eu(){this.cdt=!0}rd(t){t.pdt()?this.$f():(this.cdt=!1,US.Th(this.mZ,t.mZ),US.bh(this.fdt))}Sdt(t){this.mZ.push(t)}bdt(t){this.fdt.push(t)}vdt(t){this.cdt=!!t}Mdt(){return this.mZ}xdt(){return this.fdt}Gdt(t){this.cdt=!1,US.bh(this.mZ),this.mZ.push(t)}Tdt(t){this.cdt=!1,US.Th(this.mZ,t)}Cdt(t){this.cdt=!1,US.bh(this.mZ);for(const s of t)this.mZ.push(s)}Idt(t,s){for(const i of s)t.has(i)||this.fdt.push(i)}_dt(t){for(const s of t)this.mZ.push(s);US.Rh(this.fdt,t)}Edt(){US.bh(this.fdt)}Rdt(t){if(t)if(this.udt.mY().Uk().Pdt()){this.pdt()&&(US.bh(this.mZ),US.Th(this.fdt,t.IV().PW()),this.cdt=!1);const s=this.fdt.indexOf(t);-1!==s&&(this.mZ.push(this.fdt[s]),this.fdt.splice(s,1))}else this.Gdt(t)}ldt(t){US.Rh(this.mZ,t),US.Rh(this.fdt,t)}}}{const qS=self.Is;qS.Adt=class extends qS.Vn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.L$(),this.edt=[],this.edt.push(qS.Un(qS.Ddt,this,null)),this.Rw=0,this.Fdt=[]}qn(){for(const t of this.edt)t.qn();qS.bh(this.edt),qS.bh(this.Fdt),this.Odt=null,this.Nc=null}$k(){return this.Odt}L$(){return this.Nc}mY(){return this.edt[this.Rw]}Ldt(){return this.edt}kdt(){return this.Rw}gY(t){const s=this.edt,i=++this.Rw;if(i===s.length){const i=qS.Un(qS.Ddt,this,t);return s.push(i),i}{const e=s[i];return e.$f(t),e}}IY(){--this.Rw}Ndt(t){this.Fdt.push(t)}$dt(){this.Fdt.pop()}Kk(){const t=this.Fdt;return 0===t.length?null:t.at(-1)}}}{const zS=self.Is;zS.Ddt=class extends zS.Vn{constructor(t,s){super(),this.edt=t,this.Nc=this.edt.L$(),this.Bdt=s,this.Wdt=0,this.jdt=0,this.Vdt=!1,this.Hdt=!1,this.Udt=null,this.qdt=0,this.zdt=0,this.Jdt=null}qn(){this.$f(null),this.edt=null,this.Nc=null}$f(t){this.Bdt=t,this.Wdt=0,this.jdt=0,this.Vdt=!1,this.Hdt=!1,this.Jdt=null}Ydt(t,s){this.Bdt=t,this.Wdt=0,this.jdt=s}Xdt(){this.Wdt=0,this.jdt=0}Uk(){return this.Bdt}Kdt(t){this.Bdt=t}Zdt(){return this.Wdt}Qdt(t){this.Wdt=t}tpt(){return this.jdt}spt(t){this.jdt=t}ipt(t){this.Vdt=!!t}ept(){return this.Vdt}npt(t){this.Hdt=!!t}rpt(){return this.Hdt}hpt(t){this.Udt=t}opt(){return this.Udt}apt(t,s){this.qdt=t,this.zdt=s}Qk(){return this.qdt}tN(t){this.zdt=t}lpt(){return this.zdt}upt(){const t=this.Bdt;return!!t.cpt()||this.Wdt<t.fpt()-1&&!!t.pY().length}dpt(t){this.Jdt=t}ppt(){return this.Jdt}}}{const JS=self.Is;JS.mpt=class extends JS.Vn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.L$(),this.edt=[],this.Rw=-1,this.rdt=null,this.gpt=[]}qn(){JS.bh(this.edt),this.Odt=null,this.Nc=null}ypt(t){this.gpt=t;const s=this.gpt.slice(0);this.edt.push(s),this.Rw=0,this.rdt=s}$k(){return this.Odt}L$(){return this.Nc}wpt(){return this.rdt}gY(){const t=++this.Rw,s=this.edt;t===s.length?s.push(this.gpt.slice(0)):JS.Th(s[t],this.gpt),this.rdt=s[t]}IY(){this.rdt=this.edt[--this.Rw]}}}{const YS=self.Is;YS.Spt=class extends YS.Vn{constructor(t){super(),this.Odt=t,this.Nc=this.Odt.L$(),this.edt=[],this.Rw=-1}qn(){YS.bh(this.edt),this.Odt=null,this.Nc=null}$k(){return this.Odt}L$(){return this.Nc}bpt(){return this.Rw>=0}wpt(){return this.edt[this.Rw]}gY(){if(++this.Rw,this.Rw===this.edt.length){const t=YS.Un(YS.vpt,this);return this.edt.push(t),t}{const t=this.edt[this.Rw];return t.$f(),t}}IY(){--this.Rw}Mpt(t){const s=this.edt;for(let i=this.Rw;i>=0;--i){const e=s[i];if(e.Ec()===t)return e}return null}xpt(){return this.edt.slice(0,this.Rw+1)}}}{const XS=self.Is;XS.vpt=class extends XS.Vn{constructor(t){super(),this.Gpt=t,this.Yn="",this.Rw=0,this.Tpt=!1,this.Cpt=NaN}$f(){this.Yn="",this.Rw=0,this.Tpt=!1,this.Cpt=NaN}wY(t){this.Yn=t}Ec(){return this.Yn}GY(t){this.Rw=t}ek(){return this.Rw}Sz(){this.Tpt=!0}CY(){return this.Tpt}Ipt(t){this.Cpt=t}_pt(){return this.Cpt}}}{const KS=self.Is;KS.Ept=class extends KS.Vn{constructor(){super(),this.edt=[],this.Rw=-1}qn(){KS.bh(this.edt)}wpt(){return this.edt[this.Rw]}gY(){if(++this.Rw,this.Rw===this.edt.length){const t=[];return this.edt.push(t),t}return this.edt[this.Rw]}IY(){--this.Rw}}}{let ZS=function(t,s){return t.ek()-s.ek()},QS=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};SortSolArray=ZS,IsSolArrayIdentical=QS;const tb=self.Is,sb=self.assert;tb.Rpt=class extends tb.Vn{constructor(t){super(),this.Nc=t,this.Ppt=[],this.Apt=new Map,this.Opt=[],this.Dpt=new Map,this.Fpt=new Map,this.Lpt=new Map,this.kpt=new Map,this.Npt=new Map,this.$pt=new Map,this.Bpt=0,this.Wpt=[],this.jpt=[],this.Vpt=[],this.Hpt=new Map,this.Upt=new Map,this.udt=tb.Un(tb.Adt,this),this.qpt=tb.Un(tb.mpt,this),this.Gpt=tb.Un(tb.Spt,this),this.zpt=[],this.Jpt=[],this.Ypt=[],this.Xpt=0,this.Kpt=0,this.Zpt=0,this.Qpt=[],this.tmt=[],this.smt=[],this.imt=new Map,this.emt=new Map,self.c3_callFunction=(t,s)=>this.nmt(t,s)}qn(){this.r5(),this.udt.qn(),this.udt=null,this.qpt.qn(),this.qpt=null,tb.bh(this.Jpt),tb.bh(this.Ypt),this.Nc=null,tb.bh(this.Ppt),this.Apt.clear()}AT(t){const s=tb.Un(tb.rmt,this,t);this.Ppt.push(s),this.Apt.set(s.Ec().toLowerCase(),s)}hmt(t){this.zpt.push(t)}omt(){for(const t of this.Upt.values())t.amt();for(const t of this.Hpt.values())t.omt();for(const t of this.Upt.values())t.omt();for(const t of this.Ppt)t.omt();for(const t of this.Ppt)t.I4();for(const t of this.zpt)t.omt(!1);tb.bh(this.zpt),this.qpt.ypt(this.Vpt)}L$(){return this.Nc}C4(t){return this.Apt.get(t.toLowerCase())||null}lmt(t){this.Opt.push(t),this.Dpt.set(t.umt(),t)}cmt(t){this.Fpt.set(t.C0(),t)}fmt(t){this.Lpt.set(t.C0(),t)}dmt(t){this.kpt.set(t.C0(),t)}pmt(t){switch(t.mmt()){case 0:this.Hpt.set(t.gmt().toLowerCase(),t);break;case 1:this.Upt.set(t.gmt().toLowerCase(),t)}}ymt(t){this.$pt.set(t.C0(),t),t.n0()?this.Wpt.push(t):this.jpt.push(t)}wmt(t){t.length>=2&&t.sort(ZS);let s=this.Npt.get(t.length);s||(s=[],this.Npt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(QS(t,e))return e}return s.push(t),t}Smt(t){return this.Vpt.push(t.bmt()),this.Bpt++}Zk(){return this.udt}vmt(){return this.Zk().mY()}Uk(){return this.vmt().Uk()}Mmt(){const t=this.vmt();return t.Uk().xmt(t.Zdt())}Gmt(){const t=this.vmt();return t.Uk().Tmt(t.tpt())}Cmt(){return this.qpt}yY(){return this.Gpt}Imt(t){const s=[];for(t=t._mt();t;)tb.On(s,t.Emt()),t=t._mt();return s}Rmt(t){const s={};for(const i of this.Imt(t))s[i.Pmt()]=i.Amt();return Object.create(Object.prototype,s)}Omt(t){return this.$pt.get(t)||null}Dmt(t){return this.Fpt.get(t)||null}Fmt(t){return this.Lpt.get(t)||null}Lmt(t){return this.kpt.get(t)||null}Bk(t){return this.Hpt.get(t.toLowerCase())||null}kmt(t,s){let i=this.Upt.get((t.Ec()+"."+s).toLowerCase());if(i)return i;if(!t.w0())for(const e of t.Nmt())if(i=this.Upt.get((e.Ec()+"."+s).toLowerCase()),i)return i;return null}$mt(){return this.Wpt}Bmt(){return this.jpt}Wmt(t){for(const t of this.Wpt)t.jmt();if(t)for(const t of this.jpt)t.FG()&&t.jmt()}Vmt(t){return this.Dpt.get(t.toLowerCase())||null}Hmt(t){const s=this.Fpt.get(t);return s&&s.Umt()?s:null}qmt(){return this.Opt}zmt(){for(const t of this.Opt)t.Jmt()}Ymt(){for(const t of this.Ppt)t.Xmt()}Kmt(t){this.Ymt(),this.Xpt++;for(const s of t.k5()){const t=s.Q3();t&&(this.Nc.Zmt(s),t.tE(),this.Nc.Qmt())}this.Xpt--}async tgt(t){this.Ymt(),this.Xpt++;for(const s of this.sgt(t))await this.Nc.igt(s);this.Xpt--}*sgt(t){for(const s of t.k5()){const t=s.Q3();t&&(this.Nc.Zmt(s),yield*t.egt(),this.Nc.Qmt())}}ngt(t,s,i,e){let n=!1;if(!t.BN())return this.rgt(s,i,e);this.Kpt++;for(const r of t.k5()){const t=r.Q3();if(!t)continue;this.Nc.Zmt(r);for(const r of t.hgt()){const t=r.ngt(s,i,e);n=n||t}const h=t.ngt(s,i,e);n=n||h,this.Nc.Qmt()}return this.Kpt--,n}*ogt(t,s,i,e){let n=!1;if(!t.BN())return this.rgt(s,i,e);this.Kpt++;for(const r of t.k5()){const t=r.Q3();if(!t)continue;this.Nc.Zmt(r);for(const r of t.hgt()){const t=yield*r.ogt(s,i,e);n=n||t}const h=yield*t.ogt(s,i,e);n=n||h,this.Nc.Qmt()}return this.Kpt--,n}rgt(t,s,i){return this.Jpt.push([t,s,i]),!1}agt(t,s,i){let e=null;const n=new Promise((t=>e=t));return this.Ypt.push([t,s,i,e]),n}*lgt(){if(this.Nc.ugt())throw new Error("should not be in breakpoint");const t=this.Nc.VN();for(;this.Ypt.length;){const[s,i,e,n]=this.Ypt.shift();n(yield*this.ogt(t,s,i,e))}}async cgt(){for(const t of this.lgt())await this.Nc.igt(t)}fgt(t,s,i,e){let n=!1;const r=t.BN(),h=r.Q3();if(!h)return;this.Kpt++,this.Nc.Zmt(r);const o=h.hgt();for(let t=0,r=o.length;t<r;++t){const r=o[t].fgt(s,i,e);n=n||r}const a=h.fgt(s,i,e);return n=n||a,this.Nc.Qmt(),this.Kpt--,n}*dgt(t,s,i,e){let n=!1;const r=t.BN(),h=r.Q3();if(!h)return;this.Kpt++,this.Nc.Zmt(r);const o=h.hgt();for(let t=0,r=o.length;t<r;++t){const r=yield*o[t].dgt(s,i,e);n=n||r}const a=yield*h.dgt(s,i,e);return n=n||a,this.Nc.Qmt(),this.Kpt--,n}pgt(){return this.Kpt}mgt(){return this.pgt()>0}ggt(){return++this.Kpt}ygt(){--this.Kpt}wgt(){return this.Xpt>0}BW(){return this.wgt()||this.mgt()}Y4(t){for(const[s,i,e]of this.Jpt)this.ngt(t,s,i,e);tb.bh(this.Jpt)}NW(t){t?this.Zpt++:this.Zpt--}DV(){return this.Zpt>0}Sgt(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().Eu()}vgt(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().odt()}vY(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().adt()}xY(t){for(let s=0,i=t.length;s<i;++s)t[s].bgt().IY()}qk(t){const s=new Set,i=this.udt.Ldt(),e=this.udt.kdt();for(let n=0;n<=e;++n){const e=i[n].ppt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}Mgt(t){const s=new Set([...t]),i=this.qk(s);if(i.size>0){for(const t of i)t.bgt().odt();return[...i]}return null}xgt(){const t=tb.Un(tb.Ggt,this);return this.Qpt.push(t),t}Tgt(){return this.Qpt}Cgt(){if(!this.Qpt.length)return;const t=this.vmt();let s=!1;this.Xpt++;for(let i=0,e=this.Qpt.length;i<e;++i){const e=this.Qpt[i];e.Igt()&&e._gt(t),e.Egt()&&(s=!0)}s&&(this.Rgt(),t.$f(null)),this.Xpt--}async Pgt(){if(!this.Qpt.length)return;const t=this.vmt();let s=!1;this.Xpt++;for(let i=0,e=this.Qpt.length;i<e;++i){const e=this.Qpt[i];e.Igt()&&await e.Agt(t),e.Egt()&&(s=!0)}s&&(this.Rgt(),t.$f(null)),this.Xpt--}Rgt(){const t=tb.Eh(this.Qpt,(t=>t.Egt()));for(const s of t)s.qn()}r5(){for(const t of this.Qpt)t.qn();tb.bh(this.Qpt)}Ogt(t){for(const s of this.Qpt)s.ldt(t);for(const s of t){const t=this.emt.get(s);if(this.emt.delete(s),t)for(const{resolve:s}of t.Dgt.values())s(!0)}}Fgt(t){this.tmt.push({promise:t,Lgt:this.pgt()})}kgt(){tb.bh(this.tmt)}Ngt(){const t=this.pgt();this.tmt=this.tmt.filter((s=>s.Lgt<=t))}$gt(){const t=Promise.all(this.tmt.map((t=>t.promise)));return this.tmt=[],t}sN(t){const s=t.toLowerCase();this.smt.push(s),this.Nc.lH(tb.E$._$.I$.Bgt,null),this.smt.pop();for(const t of this.Nc.$k().Tgt())t.Wgt()&&t.jgt()===s&&t.Vgt();const i=this.imt.get(s);i&&(i.resolve(),this.imt.delete(s))}eN(t){const s=t.toLowerCase(),i=this.imt.get(s);if(i)return i.promise;{let t=null;const i=new Promise((s=>t=s));return this.imt.set(s,{promise:i,resolve:t}),i}}Hgt(){if(0===this.smt.length)throw new Error("not in a signal");return this.smt.at(-1)}Ugt(t){let s=this.emt.get(t);return s||(s={qgt:[],Dgt:new Map},this.emt.set(t,s)),s}QV(t,s){const i=this.Ugt(t),e=s.toLowerCase();i.qgt.push(e),this.Nc.lH(t.SW().Jgt().I$.zgt,t),i.qgt.pop();for(const s of this.Nc.$k().Tgt())s.Ygt()&&s.jgt()===e&&s.Xgt(t);const n=i.Dgt.get(e);n&&(n.resolve(!1),i.Dgt.delete(e)),0===i.qgt.length&&0===i.Dgt.size&&this.emt.delete(t)}tH(t,s){const i=this.Ugt(t),e=s.toLowerCase(),n=i.Dgt.get(e);if(n)return n.promise;{let t=null;const s=new Promise((s=>t=s));return i.Dgt.set(e,{promise:s,resolve:t}),s}}Kgt(t){const s=this.Ugt(t);if(!s||0===s.qgt.length)throw new Error("not in a signal");return s.qgt.at(-1)}s3(){return{groups:this.Zgt(),cnds:this.Qgt(),acts:this.tyt(),vars:this.syt(),waits:this.iyt()}}i3(t){this.eyt(t.groups),this.nyt(t.cnds),this.ryt(t.acts),this.hyt(t.vars),this.oyt(t.waits)}Zgt(){const t={};for(const s of this.qmt())t[s.C0().toString()]=s.ayt();return t}eyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Hmt(t);e&&e.lyt(i)}}Qgt(){const t={};for(const[s,i]of this.Lpt){const e=i.s3();e&&(t[s.toString()]=e)}return t}nyt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Lpt)i.i3(s.get(t)||null)}tyt(){const t={};for(const[s,i]of this.kpt){const e=i.s3();e&&(t[s.toString()]=e)}return t}ryt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.kpt)i.i3(s.get(t)||null)}syt(){const t={};for(const[s,i]of this.$pt)i.uyt()||!i.n0()&&!i.FG()||(t[s.toString()]=i.Aet());return t}hyt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Omt(t);e&&e.pnt(i)}}iyt(){return this.Qpt.filter((t=>!t.cyt())).map((t=>t.s3()))}oyt(t){this.r5();for(const s of t){const t=tb.Ggt.fyt(this,s);t&&this.Qpt.push(t)}}dyt(){return[...this.Nc.VN().k5()].map((t=>t.Q3())).filter((t=>t)).map((t=>t.pyt()))}myt(t){for(;t;){const s=t._mt();if(s instanceof tb.gyt)return s;t=s}return null}nmt(t,s){Array.isArray(s)||(s=[]);const i=this.Bk(t.toLowerCase());if(!i)return null;if(!i.Cu())return i.Wk();const e=i.yyt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].bmt())}while(s.length<e.length)}const n=i.Vk();return n.zk(n.Hk(),!1,i.Yk(),i.Wk(),...s)}}}{const ib=self.Is;ib.rmt=class extends ib.Vn{constructor(t,s){super(),this.Odt=t,this.Nc=t.L$(),this.Yn=s[0],this.wyt=[],this.Syt=new Map,this.byt=new Map,this.vyt=new Map,this.Myt=!1,this.xyt=[],this.Gyt=[],this.Tyt=new Set;for(const t of s[1])this.Cyt(t,null,this.wyt);this.Iyt=this.Nc.yH()?{type:"sheet",name:this.Yn,_yt:0,children:[]}:null}qn(){this.Odt=null,this.Nc=null}Cyt(t,s,i){switch(t[0]){case 0:case 3:this.Eyt(t,s,i);break;case 1:this.Ryt(t,s,i);break;case 2:this.Pyt(t,s,i);break;case 4:this.Ayt(t,s);break;case 5:this.Oyt(t,s,i);break;case 6:this.Dyt(t,s);break;default:throw new Error("invalid event type")}}Eyt(t,s,i){const e=ib.Fyt.AT(this,s,t);if(e.Pdt()){i.push(e);const t=e.Lyt();for(let s=0,i=t.length;s<i;++s)t[s].kyt()&&this.Nyt(e,s)}else e.kyt()?this.Nyt(e,0):i.push(e)}Ayt(t,s){const i=ib.gyt.$yt(this,s,t);this.Odt.pmt(i)}Dyt(t,s){const i=ib.gyt.Byt(this,s,t);this.Odt.pmt(i)}Ryt(t,s,i){const e=ib.Wyt.AT(this,s,t);i.push(e)}Pyt(t,s,i){const e=ib.jyt.AT(this,s,t);i.push(e)}Oyt(t,s,i){const e=ib.Vyt.AT(this,s,t);i.push(e)}Nyt(t,s){t.Pdt()||this.Odt.hmt(t);const i=t.xmt(s),e=i.Hyt(),n=i.IV();if(i.Uyt()){let r=this.byt.get(n);r||(r=new Map,this.byt.set(n,r));const h=i.qyt().toLowerCase();let o=r.get(e);o||(o=new Map,r.set(e,o));let a=o.get(h);a||(a=[],o.set(h,a)),a.push([t,s])}else{let r=this.Syt.get(n);r||(r={zyt:new Map,Jyt:new Map},this.Syt.set(n,r));const h=i.Iq();let o;h?(o=r.Jyt.get(h),o||(o=new Map,r.Jyt.set(h,o))):o=r.zyt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}omt(){const t=this.wyt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof ib.Fyt&&t[s+1].Yyt();t[s].omt(e)}}Xyt(t){this.xyt.push(t)}I4(){ib.bh(this.Gyt),this.Kyt(this),this.Tyt.clear()}Kyt(t){const s=t.Gyt,i=t.Tyt;for(const e of this.xyt){const n=e.Zyt();e.Qyt()&&t!==n&&!i.has(n)&&(i.add(n),n.Kyt(t),s.push(n))}}hgt(){return this.Gyt}$k(){return this.Odt}L$(){return this.Nc}Ec(){return this.Yn}twt(t,s){this.vyt.set(s,t)}swt(t){return this.vyt.get(t)||null}Xmt(){this.Myt=!1}tE(){if(this.Myt)return;const t=this.Nc,s=t.iwt(),i=s?performance.now():0;this.Myt=!0;const e=this.$k(),n=e.vmt();for(const s of this.wyt)s.tE(n),e.Sgt(s.pY()),e.kgt(),t.jW();n.$f(null),s&&(this.Iyt._yt+=performance.now()-i)}*egt(){if(this.Myt)return;this.Myt=!0;const t=this.Nc,s=this.$k(),i=s.vmt();for(const e of this.wyt)yield*e.egt(i),s.Sgt(e.pY()),s.kgt(),t.jW();i.$f(null)}ngt(t,s,i){if(!s)return this.ewt(t,s,null,null);{const e=s.IV();let n=!1,r=this.ewt(t,s,e,i);n=n||r;for(const h of e.Nmt())r=this.ewt(t,s,h,i),n=n||r}}ewt(t,s,i,e){const n=this.Syt.get(i);if(!n)return!1;const r=e?n.Jyt.get(e):n.zyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){const e=this.nwt(s,t,i);o=o||e}return o}*ogt(t,s,i){if(!s)return yield*this.rwt(t,s,null,null);{const e=s.IV();let n=!1,r=yield*this.rwt(t,s,e,i);n=n||r;for(const h of e.Nmt())r=yield*this.rwt(t,s,h,i),n=n||r}}*rwt(t,s,i,e){const n=this.Syt.get(i);if(!n)return!1;const r=e?n.Jyt.get(e):n.zyt;if(!r)return!1;const h=r.get(t);if(!h)return!1;let o=!1;for(const[t,i]of h){let e;e=t.hwt()?this.nwt(s,t,i):yield*this.owt(s,t,i),o=o||e}return o}fgt(t,s,i){const e=s.IV(),n=this.byt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=this.nwt(null,s[0],s[1]);o=o||i}return o}*dgt(t,s,i){const e=s.IV(),n=this.byt.get(e);if(!n)return!1;const r=n.get(t);if(!r)return!1;const h=r.get(i);if(!h)return!1;let o=!1;for(let t=0,s=h.length;t<s;++t){const s=h[t],i=s[0],e=s[1];let n;n=i.hwt()?this.nwt(null,i,e):yield*this.owt(null,i,e),o=o||n}return o}nwt(t,s,i){const e=this.Nc,n=this.Odt,r=n.Uk(),h=n.Zk(),o=n.pgt();let a=!1;r&&n.vgt(r.Hk()),n.vgt(s.Hk());const l=o>1;l&&n.Cmt().gY();const u=h.gY(s);t&&(s.Lyt()[i].IV().AW().Gdt(t),t.NV()&&t.awt());let c=!0;if(s.bU()){const t=s.lwt();for(let s=0,i=t.length;s<i;++s)if(!t[s].uwt(u)){c=!1;break}}return c&&(s.Pdt()?s.cwt(u,i):s.tE(u),a=u.ept()),h.IY(),l&&n.Cmt().IY(),n.xY(s.Hk()),r&&n.xY(r.Hk()),r||1!==o||(n.kgt(),n.DV()||e.jW()),a}*owt(t,s,i){const e=this.Nc,n=this.Odt,r=n.Uk(),h=n.Zk(),o=n.pgt();let a=!1;r&&n.vgt(r.Hk()),n.vgt(s.Hk());const l=o>1;l&&n.Cmt().gY();const u=h.gY(s);t&&(s.Lyt()[i].IV().AW().Gdt(t),t.NV()&&t.awt());let c=!0;if(s.bU()){const t=s.lwt();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].fwt(u))){c=!1;break}}return c&&(s.Pdt()?yield*s.dwt(u,i):yield*s.egt(u),a=u.ept()),h.IY(),l&&n.Cmt().IY(),n.xY(s.Hk()),r&&n.xY(r.Hk()),r||1!==o||(n.kgt(),n.DV()||e.jW()),a}pyt(){return this.Iyt}}}{let eb=function(t,s){return!0};NoActions=eb;const nb=self.Is,rb=[];function*hb(t,s){return!0}nb.Fyt=class extends nb.Vn{constructor(t,s,i){super(),this.g3=t,this.Nc=t.L$(),this.pwt=s,this.mwt=null,this.udt=this.Nc.$k().Zk(),this.gwt=[],this.ywt=[],this.wwt=!1,this.Swt=!1,this.bwt=!1,this.vwt=!1,this.Mwt=!!i[2],this.xwt=!1,this.Gwt=null,this.Twt=[],this.Jnt=[],this.Cwt=[],this.Iwt=eb,this._wt=hb,this.Ewt=!1,this.Rwt=!1,this.Pwt="",this.Awt=!1,this.Owt=null,this.Iyt=null,this.JZ=i[4],this.Dwt=i[5],this.g3.twt(this,this.Dwt),this.Fwt=this.Nc.yH()?{Lwt:i[3][0],kwt:i[3][1],Nwt:!1,$wt:!1,Bwt:!1,Wwt:!1}:null,this.$k().cmt(this),3===i[0]&&this.jwt(i[1]);let e=0;for(const t of i[6]){const s=nb.Vwt.AT(this,t,e++);this.Twt.push(s),this.Hwt(s.IV())}e=0;for(const t of i[7]){const s=nb.Uwt.AT(this,t,e++);this.Jnt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.g3.Cyt(s,this,this.Cwt)}this.Twt.length&&(this.xwt=null===this.Twt[0].IV()&&this.Twt[0].Hyt()===nb.E$._$.I$.qwt),0===this.Twt.length&&(this.Twt=rb),0===this.Jnt.length&&(this.Jnt=rb),0===this.Cwt.length&&(this.Cwt=rb)}static AT(t,s,i){return nb.Un(nb.Fyt,t,s,i)}jwt(t){this.Ewt=!0,this.Rwt=!!t[0],this.Awt=this.Rwt,this.Pwt=t[1].toLowerCase(),this.Owt=[],this.$k().lmt(this),this.Nc.yH()&&(this.Iyt={type:"group",name:t[1],_yt:0,children:[]})}zwt(t){this.Owt.push(t)}Jwt(t,s){for(const i of t.f4().K4())s.includes(i)||s.push(i)}Ywt(t,s){if(t)if(s.includes(t)||s.push(t),t.w0())for(const i of t.Xwt())i.NV()&&this.Jwt(i,s);else t.NV()&&this.Jwt(t,s)}Hwt(t){this.Ywt(t,this.gwt)}Kwt(t){this.Ywt(t,this.ywt)}Zwt(){this.gwt=this.Nc.y0()}omt(t){this.vwt=!!t,this.Qwt(),this.tSt();for(const t of this.Twt)t.omt();if(this.Jnt.length>0){let t=!1;for(const s of this.Jnt)s.omt(),s.sSt()&&(t=!0);t?(this.Iwt=this.iSt,this._wt=this.eSt):(this.Iwt=this.nSt,this._wt=this.rSt)}const s=this.Cwt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof nb.Fyt&&s[t+1].Yyt();s[t].omt(e)}this.Fwt&&this.hSt(),this.Iyt&&this.oSt().pyt().children.push(this.Iyt)}pyt(){return this.Iyt}oSt(){let t=this.bU();for(;t;){if(t.Umt())return t;t=t.bU()}return this.g3}hSt(){const t=this.Fwt;t.Nwt=this.Twt.every((t=>t.hwt())),t.$wt=this.Jnt.every((t=>t.hwt())),t.Bwt=this.Cwt.every((t=>t.hwt())),t.Wwt=t.Nwt&&t.$wt&&t.Bwt}aSt(){let t=this;do{t.hSt(),t=t.bU()}while(t)}Qwt(){if(!this.Umt())return;let t=this.bU();for(this.bwt=!0;t;){if(!t.Umt()){this.bwt=!1;break}t=t.bU()}}lSt(){const t=this.Nc.y0();if(this.gwt===t)this.ywt=t;else{this.ywt=nb.Oh(this.gwt);let t=this.bU();for(;t;){for(const s of t.gwt)this.Kwt(s);t=t.bU()}const s=this.$k();this.gwt=s.wmt(this.gwt),this.ywt=s.wmt(this.ywt)}}tSt(){if(!this.uSt())return;this.Gwt=[];let t=this.bU();for(;t;)this.Gwt.push(t),t=t.bU();this.Gwt.reverse()}cSt(){this.Swt=!0,this.pwt&&this.pwt.cSt()}cpt(){return this.Swt}pY(){return this.gwt}Hk(){return this.wwt||(this.wwt=!0,this.lSt()),this.ywt}fSt(t){return this.gwt.includes(t)}lwt(){return this.Gwt}Q3(){return this.g3}$k(){return this.g3.$k()}L$(){return this.Nc}bU(){return this.pwt}dSt(t){this.mwt=t}_mt(){return this.mwt||this.pwt}pSt(){return this.Dwt}mSt(){return this.Fwt&&this.Fwt.kwt}gSt(){return this.mSt()&&this.Fwt.Lwt}ySt(t){this.Fwt.Lwt=!!t,this.aSt()}Umt(){return this.Ewt}wSt(){return this.bwt}Yyt(){return this.xwt}SSt(){return this.vwt}umt(){return this.Pwt}ayt(){return this.Awt}Jmt(){this.lyt(this.Rwt)}lyt(t){if(t=!!t,!this.Ewt)throw new Error("not a group");if(this.Awt!==t){this.Awt=t;for(const t of this.Owt)t.bSt();if(this.Owt.length){const t=this.Nc.h$().Q3();t&&t.I4()}}}C0(){return this.JZ}Pdt(){return this.Mwt}kyt(){return this.Twt.length&&this.Twt[0].kyt()}vSt(){return this.mwt&&this.mwt instanceof nb.gyt}uSt(){return this.vSt()||this.Twt.some((t=>t.kyt()))}Lyt(){return this.Twt}fpt(){return this.Twt.length}xmt(t){if((t=Math.floor(t))<0||t>=this.Twt.length)throw new RangeError("invalid condition index");return this.Twt[t]}MSt(t){return this.xmt(t)}xSt(t){let s=t.ek();if(0===s)return!0;--s;const i=t.GSt()?t.TSt():t.IV();for(;s>=0;--s){const t=this.Twt[s];if(i===t.IV()||t.GSt()&&t.TSt()===i)return!1}return!0}CSt(){return this.Jnt}ISt(){return this.Jnt.length}Tmt(t){if((t=Math.floor(t))<0||t>=this.Jnt.length)throw new RangeError("invalid action index");return this.Jnt[t]}_St(t){t=Math.floor(t);const s=this.Jnt.find((s=>s.ESt()===t));if(!s)throw new RangeError("invalid action debug index");return s}RSt(t){return(t=Math.floor(t))>=0&&t<this.Jnt.length}PSt(){return this.Cwt}Emt(){return this.Cwt.filter((t=>t instanceof nb.Wyt))}uwt(t){t.Kdt(this);const s=this.Twt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Qdt(e),n.Wq())throw new Error("trigger cannot be used as sub-event to a loop");if(n.tE())i=!0;else if(!this.Mwt)return!1}return!this.Mwt||i}cwt(t,s){t.Kdt(this),t.Qdt(s),this.Twt[s].tE()&&(this.Iwt(t,0)&&this.ASt(t),t.ipt(!0))}*fwt(t){t.Kdt(this);const s=this.Twt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(t.Qdt(e),n.Wq())throw new Error("trigger cannot be used as sub-event to a loop");let r;if(r=n.hwt()?n.tE():yield*n.egt(),r)i=!0;else if(!this.Mwt)return!1}return!this.Mwt||i}*dwt(t,s){t.Kdt(this),t.Qdt(s);const i=this.Twt[s];let e;if(e=i.hwt()?i.tE():yield*i.egt(),e){let s;s=this.OSt()?this.Iwt(t,0):yield*this._wt(t,0),s&&(this.DSt()?this.ASt():yield*this.FSt()),t.ipt(!0)}}tE(t){t.Kdt(this),this.xwt||t.npt(!1),this.Mwt?this.LSt(t):this.kSt(t)}*egt(t){(this.gSt()||this.Nc.NSt())&&(yield this),t.Kdt(this),this.xwt||t.npt(!1),this.Mwt?yield*this.$St(t):yield*this.BSt(t)}LSt(t){const s=this.Twt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.kyt())continue;t.Qdt(e);const r=n.tE();i=i||r}t.ipt(i),i&&(this.Iwt(t,0)&&this.ASt(t),this.vwt&&t.npt(!0))}*$St(t){const s=this.Twt;let i=0===s.length;for(let e=0,n=s.length;e<n;++e){const n=s[e];if(n.kyt())continue;let r;t.Qdt(e),r=n.hwt()?n.tE():yield*n.egt(),i=i||r}if(t.ipt(i),i){let s;s=this.OSt()?this.Iwt(t,0):yield*this._wt(t,0),s&&(this.DSt()?this.ASt():yield*this.FSt()),this.vwt&&t.npt(!0)}}kSt(t){const s=this.Twt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Qdt(i),!e.tE())return void t.ipt(!1)}t.ipt(!0),this.Iwt(t,0)&&this.ASt(t),t.ept()&&this.vwt&&t.npt(!0)}*BSt(t){const s=this.Twt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let n;if(t.Qdt(i),n=e.hwt()?e.tE():yield*e.egt(),!n)return void t.ipt(!1)}let i;t.ipt(!0),i=this.OSt()?this.Iwt(t,0):yield*this._wt(t,0),i&&(this.DSt()?this.ASt():yield*this.FSt()),t.ept()&&this.vwt&&t.npt(!0)}nSt(t,s){const i=this.Jnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.spt(e),s.tE()}return!0}*rSt(t,s){const i=this.Jnt;for(let e=s,n=i.length;e<n;++e){const s=i[e];t.spt(e),s.hwt()?s.tE():yield*s.egt()}return!0}iSt(t,s){const i=this.$k(),e=this.Jnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];t.spt(n);const r=s.tE();if(s.WSt()&&!0===r)return!1;s.jSt()&&r instanceof Promise&&i.Fgt(r)}return!0}*eSt(t,s){const i=this.$k(),e=this.Jnt;for(let n=s,r=e.length;n<r;++n){const s=e[n];let r;if(t.spt(n),r=s.hwt()?s.tE():yield*s.egt(),s.WSt()&&!0===r)return!1;s.jSt()&&r instanceof Promise&&i.Fgt(r)}return!0}VSt(t){this.Iwt(t,t.tpt())&&this.ASt()}*HSt(t){(yield*this._wt(t,t.tpt()))&&(yield*this.FSt())}ASt(){if(!this.Cwt.length)return;const t=this.Umt()&&this.Nc.iwt(),s=t?performance.now():0,i=this.udt,e=i.gY(this);this.Swt?this.USt(e):this.qSt(e),i.IY(),t&&(this.Iyt._yt+=performance.now()-s)}USt(t){const s=this.Ewt,i=this.bwt,e=this.$k(),n=this.Cwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.pY(),l=!i||!s&&r<o;l&&e.vY(a),h.tE(t),l?e.xY(a):e.Sgt(a)}}qSt(t){const s=this.Cwt;for(let i=0,e=s.length;i<e;++i)s[i].tE(t)}*FSt(){if(!this.Cwt.length)return;const t=this.udt,s=t.gY(this);this.Swt?yield*this.zSt(s):yield*this.JSt(s),t.IY()}*zSt(t){const s=this.Ewt,i=this.bwt,e=this.$k(),n=this.Cwt;for(let r=0,h=n.length,o=h-1;r<h;++r){const h=n[r],a=h.pY(),l=!i||!s&&r<o;l&&e.vY(a),yield*h.egt(t),l?e.xY(a):e.Sgt(a)}}*JSt(t){const s=this.Cwt;for(let i=0,e=s.length;i<e;++i)yield*s[i].egt(t)}MY(t,s){s.Xdt();const i=this.Twt;if(!this.Pdt())for(let e=t.Zdt()+1,n=i.length;e<n;++e){const t=i[e];if(s.Qdt(e),!t.tE())return!1}return this.Iwt(s,0)&&this.ASt(s),!0}*YSt(t,s){s.Xdt();const i=this.Twt;if(!this.Pdt())for(let e=t.Zdt()+1,n=i.length;e<n;++e){const t=i[e];let n;if(s.Qdt(e),n=t.hwt()?t.tE():yield*t.egt(),!n)return!1}let e;return e=this.OSt()?this.Iwt(s,0):yield*this._wt(s,0),e&&(this.DSt()?this.ASt():yield*this.FSt()),!0}hwt(){return!this.gSt()&&!this.Nc.NSt()&&this.Fwt.Wwt}OSt(){return!this.Nc.NSt()&&this.Fwt.$wt}DSt(){return!this.Nc.NSt()&&this.Fwt.Bwt}XSt(t){if(this.bU()){const s=this.lwt();for(let i=0,e=s.length;i<e;++i)if(!s[i].uwt(t))return!1}return!0}*KSt(t){if(this.bU()){const s=this.lwt();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].fwt(t)))return!1}return!0}ZSt(t,s,i){if(s.length>0)if(i){const i=s.map((t=>t.qs(0)));t.Cmt().gY(),this.mwt.QSt(i)}else this.mwt.tbt(s);else i&&t.Cmt().gY()}sbt(t,s,i,e){let n,r;const h=t.length>0;let o=null;const a=this.Nc,l=this.udt,u=a.$k(),c=this.mwt,f=c.jSt(),d=u.ggt()>1;if(this.ZSt(u,s,d),h&&(i?u.vY(t):u.vgt(t)),null!==e){if(e.ibt){const t=i?e.ibt.AW():e.ibt.bgt().hdt(),s=e.ebt.AW();s.Tdt(t.PW()),s.Edt(),i||e.ebt.nbt()}else if(e.rbt){const t=e.rbt.AW();t.Tdt(e.hbt),t.Edt()}e.obt&&(o=u.Mgt(t))}const p=l.gY(this);return i&&p.dpt(t),this.XSt(p)&&(p.Kdt(this),f&&([r,n]=c.abt()),this.kSt(p),f&&c.lbt(r)),l.IY(),d&&u.Cmt().IY(),null!==o&&u.xY(o),h&&u.xY(t),u.ygt(),f||u.Ngt(),n}*ubt(t,s,i,e){let n,r;(this.gSt()||this.Nc.NSt())&&(yield this);const h=t.length>0;let o=null;const a=this.Nc,l=this.udt,u=a.$k(),c=this.mwt,f=c.jSt(),d=u.ggt()>1;if(this.ZSt(u,s,d),h&&(i?u.vY(t):u.vgt(t)),null!==e){if(e.ibt){const t=i?e.ibt.AW():e.ibt.bgt().hdt(),s=e.ebt.AW();s.Tdt(t.PW()),s.Edt(),i||e.ebt.nbt()}else if(e.rbt){const t=e.rbt.AW();t.Tdt(e.hbt),t.Edt()}e.obt&&(o=u.Mgt(t))}const p=l.gY(this);return i&&p.dpt(t),(yield*this.KSt(p))&&(p.Kdt(this),f&&([r,n]=c.abt()),yield*this.BSt(p),f&&c.lbt(r)),l.IY(),d&&u.Cmt().IY(),null!==o&&u.xY(o),h&&u.xY(t),u.ygt(),f||u.Ngt(),n}cbt(t,s){const i=this.Hk(),e=i.length>0,n=this.Nc,r=this.udt,h=n.$k(),o=h.ggt()>1;o&&h.Cmt().gY(),this.mwt.QSt(t),e&&(s?h.vY(i):h.vgt(i));const a=r.gY(this);this.XSt(a)&&(a.Kdt(this),this.kSt(a)),r.IY(),o&&h.Cmt().IY(),e&&h.xY(i),h.ygt(),h.Ngt()}*fbt(t,s){(this.gSt()||this.Nc.NSt())&&(yield this);const i=this.Hk(),e=i.length>0,n=this.Nc,r=this.udt,h=n.$k(),o=h.ggt()>1;o&&h.Cmt().gY(),this.mwt.QSt(t),e&&(s?h.vY(i):h.vgt(i));const a=r.gY(this);(yield*this.KSt(a))&&(a.Kdt(this),yield*this.BSt(a)),r.IY(),o&&h.Cmt().IY(),e&&h.xY(i),h.ygt(),h.Ngt()}zk(t,s,i,e,...n){let r,h;const o=t.length>0,a=this.Nc,l=this.udt,u=a.$k(),c=this.mwt,f=c.jSt(),d=u.ggt()>1;d&&u.Cmt().gY(),n.length>0&&this.mwt.QSt(n),o&&(s?u.vY(t):u.vgt(t));const p=l.gY(this);return p.apt(i,e),l.Ndt(p),a.SY(!1),this.XSt(p)&&(p.Kdt(this),f&&([h,r]=c.abt()),this.kSt(p),f&&c.lbt(h)),a.SY(!0),l.IY(),l.$dt(),d&&u.Cmt().IY(),o&&u.xY(t),u.ygt(),f||u.Ngt(),r||p.lpt()}}}{const ob=self.Is,ab=[];let lb=!1;ob.Vyt=class extends ob.Vn{constructor(t,s,i){super();const e=t.L$(),n=t.$k();this.g3=t,this.Odt=n,this.Nc=t.L$(),this.pwt=s;const r=e.dbt(i[1]);this.pbt=r,this.Dwt=i[2],this.g3.twt(this,this.Dwt),this.Fwt=e.yH()?{Lwt:i[3][0],kwt:i[3][1]}:null}static AT(t,s,i){return ob.Un(ob.Vyt,t,s,i)}omt(){const t=this.pbt,s=this.Nc.$k().Rmt(this);this.pbt=t.bind(null,this.Nc.HB(),s)}bU(){return this.pwt}_mt(){return this.pwt}Q3(){return this.g3}pSt(){return this.Dwt}mSt(){return this.Fwt&&this.Fwt.kwt}gSt(){return this.mSt()&&this.Fwt.Lwt}ySt(t){this.Fwt.Lwt=!!t}Yyt(){return!1}pY(){return ab}Hk(){return this.pwt?this.pwt.Hk():ab}tE(t){t.Kdt(this),this.Odt.Fgt(this.mbt())}async mbt(){try{await this.pbt()}catch(t){console.error(`Unhandled exception running script %c${this.Q3().Ec()}, event ${this.pSt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.wH&&self.wH.gbt(this),lb||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),lb=!0)}}*egt(t){t.Kdt(this),(this.gSt()||this.Nc.NSt())&&(yield this),this.tE(t)}hwt(){return!this.gSt()&&!this.Nc.NSt()}static ybt(){return lb}static wbt(){lb=!0}}}{const ub=self.Is,cb=self.assert;ub.gyt=class extends ub.Vn{constructor(t,s,i){super(),this.g3=t,this.Nc=t.L$(),this.pwt=s,this.Sbt=0,this.bbt="",this.vbt=0,this.Mbt=[],this.xbt=!0,this.Gbt="",this.idt=null,this.Tbt=!1,this.Cbt=[],this.Ibt=!1,this._bt=!1,this.Ebt=0,this.Rbt=-1,this.Pbt=new Map,this.Abt=ub.Fyt.AT(t,s,i),this.Abt.dSt(this)}Obt(t){this.Sbt=0,this.bbt=t[0],this.vbt=t[1],this.Mbt=t[2].map((t=>ub.Wyt.AT(this.g3,this,t))),this.xbt=t[3],this._bt=t[4],this.Ibt=t[5]}Dbt(t){this.Sbt=1,this.Gbt=t[1],this.idt=this.Nc.JQ(t[2]),this.Abt.Hwt(this.idt),this.bbt=this.idt.Ec()+"."+this.Gbt,this.vbt=t[3],this.Mbt=t[4].map((t=>ub.Wyt.AT(this.g3,this,t))),this.xbt=t[5],this._bt=t[6],this.Ibt=t[7],this.idt.Fbt(this)}static $yt(t,s,i){const e=ub.Un(ub.gyt,t,s,i),n=i[1];return e.Obt(n),e}static Byt(t,s,i){const e=ub.Un(ub.gyt,t,s,i),n=i[1];return e.Dbt(n),e}amt(){if(this.idt&&this.idt.w0())for(const t of this.idt.Xwt())if(t.Lbt(this.Gbt)){this.Tbt=!0;break}}omt(){for(const t of this.Mbt)t.omt();this.Abt.omt(!1)}mmt(){return this.Sbt}Emt(){return this.Mbt}yyt(){return this.Mbt}jk(){return this.Mbt.length}kbt(t){this.Cbt.push(t)}Nbt(){return this.Cbt}tbt(t){const s=this.Mbt;for(let i=0,e=s.length;i<e;++i)s[i].pnt(t[i].qs(0))}QSt(t){const s=this.Mbt;for(let i=0,e=s.length;i<e;++i)s[i].pnt(t[i])}$bt(){return this.Mbt.map((t=>t.Aet()))}bU(){return this.pwt}_mt(){return this.pwt}gmt(){return this.bbt}Bbt(){return this.Gbt}Wbt(){return this.Tbt}Yk(){return this.vbt}IV(){return this.idt}Cu(){return this.xbt}Wk(){switch(this.vbt){case 0:return null;case 2:return"";default:return 0}}Vk(){return this.Abt}Jk(){return this.Ibt}jSt(){return this._bt}abt(){const t=this.Ebt++;let s;this.Rbt=t;const i=new Promise((t=>s=t));return this.Pbt.set(t,{resolve:s,jbt:0}),[t,i]}lbt(t){const s=this.Pbt.get(t);0===s.jbt&&(s.resolve(),this.Pbt.delete(t)),this.Rbt=-1}Vbt(){return this.Pbt.get(this.Rbt).jbt++,this.Rbt}Hbt(t){this.Rbt=t,this.Pbt.get(t).jbt--}Ubt(t,s){const i=new Map,e=[];for(const t of this.idt.AW().PW()){const s=t.IV();if(s.Lbt(this.Gbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.Abt.sbt(t,s,this.Ibt,{rbt:this.idt,hbt:e}),i.size>0)for(const[e,n]of i){const i=e.qbt(this.Gbt).Vk(),r=[...new Set([...t,...i.pY()])];i.sbt(r,s,this.Ibt,{rbt:e,hbt:n})}}*zbt(t,s){const i=new Map,e=[];for(const t of this.idt.AW().PW()){const s=t.IV();if(s.Lbt(this.Gbt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.Abt.ubt(t,s,this.Ibt,{rbt:this.idt,hbt:e})),i.size>0)for(const[e,n]of i){const i=e.qbt(this.Gbt).Vk(),r=[...new Set([...t,...i.pY()])];yield*i.ubt(r,s,this.Ibt,{rbt:e,hbt:n})}}}}{const fb=self.Is,db=[];fb.Wyt=class extends fb.Vn{constructor(t,s,i){super();const e=t.$k();this.g3=t,this.Odt=e,this.Nc=t.L$(),this.pwt=s,this.qpt=e.Cmt(),this.Yn=i[1],this.qc=i[2],this.Jbt=i[3],this.hG=!!i[4],this.Ybt=!!i[5],this.Xbt=s instanceof fb.gyt,this.JZ=i[6],this.Kbt=this.Nc.Pmt(i[8]),this.Zbt=t=>this.pnt(t),this.Qbt=()=>this.Aet(),this.tvt=!this.pwt||this.hG||this.Ybt,this.Hnt=this.Jbt,this.svt=-1,this.ivt()&&(this.Hnt=this.Hnt?1:0),!this.evt()||this.FG()||this.uyt()||(this.svt=e.Smt(this)),e.ymt(this)}static AT(t,s,i){return fb.Un(fb.Wyt,t,s,i)}omt(){if(this.evt()&&!this.FG()&&!this.uyt()&&!this.nvt()){const t=this.Odt.myt(this);t&&t.kbt(this)}}Ec(){return this.Yn}Pmt(){return this.Kbt}bU(){return this.pwt}_mt(){return this.bU()}n0(){return!this.bU()}evt(){return!this.n0()}nvt(){return this.Xbt}FG(){return this.hG}uyt(){return this.Ybt}Qi(){return 0===this.qc}le(){return 1===this.qc}ivt(){return 2===this.qc}Yyt(){return!1}C0(){return this.JZ}bmt(){return this.Jbt}pY(){return db}tE(t){!this.evt()||this.FG()||this.uyt()||this.pnt(this.bmt())}hwt(){return!0}*egt(t){this.tE(t)}pnt(t){this.Qi()?"number"!=typeof t&&(t=parseFloat(t)):this.le()?"string"!=typeof t&&(t=t.toString()):this.ivt()&&(t=t?1:0),this.tvt?this.Hnt=t:this.qpt.wpt()[this.svt]=t}Aet(){return this.tvt?this.Hnt:this.qpt.wpt()[this.svt]}rvt(){let t=this.Aet();return this.ivt()&&(t=!!t),t}jmt(){this.Hnt=this.Jbt}Amt(){return{configurable:!1,enumerable:!0,get:this.Qbt,set:this.Zbt}}}}{const pb=self.Is,mb=self.assert,gb=[];pb.jyt=class extends pb.Vn{constructor(t,s,i){super();const e=t.$k();this.g3=t,this.Odt=e,this.Nc=t.L$(),this.pwt=s,this.hvt=null,this.ovt=i[1],this.Nf=!0}static AT(t,s,i){return pb.Un(pb.jyt,t,s,i)}omt(){this.hvt=this.Odt.C4(this.ovt),this.g3.Xyt(this);let t=this.bU();for(;t;)t instanceof pb.Fyt&&t.Umt()&&t.zwt(this),t=t.bU();this.bSt(),this.Nc.yH()&&this.g3.pyt().children.push(this.hvt.pyt())}bU(){return this.pwt}pY(){return gb}Zyt(){return this.hvt}tE(t){const s=!!this.bU(),i=this.Nc.y0();s&&this.Odt.vgt(i),this.hvt.tE(),s&&this.Odt.xY(i)}*egt(t){const s=!!this.bU(),i=this.Nc.y0();s&&this.Odt.vgt(i),yield*this.hvt.egt(),s&&this.Odt.xY(i)}hwt(){return!1}Qyt(){return this.Nf}bSt(){let t=this.bU();for(;t;){if(t instanceof pb.Fyt&&t.Umt()&&!t.ayt())return void(this.Nf=!1);t=t.bU()}this.Nf=!0}}}{let yb=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};WrapIndex=yb;const wb=self.Is,Sb=self.assert;wb.avt=class extends wb.Vn{constructor(t){super(),this.Sx=t,this.Nc=t.L$()}omt(){}static lvt(t,s){const i=s[0],e=[Gb,Mb,xb,Tb,bb,vb];return wb.Un(e[i],t,s)}};class bb extends wb.avt{constructor(t,s){super(t),this.uvt=this.Nc.DK(),this.pbt=this.Nc.dbt(s[1]),this.pbt!==wb.E$._$.ort.random&&this.pbt!==wb.E$._$.ort.cvt||this.Sx.fvt()}dvt(){return this.uvt.pvt(this.pbt,this.uvt)}}class vb extends wb.avt{constructor(t,s){super(t),this.mvt=null,this.bbt=s[1],this.Sx.fvt()}omt(){const t=this.Nc.$k();this.mvt=t.Bk(this.bbt),this.bbt=null;const s=this.Sx.Vk(),i=this.mvt.Vk();this.gvt=[...new Set([...s.Hk(),...i.Hk()])],this.gvt=t.wmt(this.gvt)}dvt(){const t=this.mvt;if(t.Cu()){const s=t.Vk();return wb.Fyt.prototype.zk.bind(s,this.gvt,t.Jk(),t.Yk(),t.Wk())}{const s=t.Wk();return()=>s}}}class Mb extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.JQ(s[1]),this.pbt=this.Nc.dbt(s[2]),this.yvt=!!s[3],this.udt=this.Nc.$k().Zk(),this.Sx.wvt(this.idt)}dvt(){return this.idt.SW().pvt(this.pbt,this.idt.gW().yq())}Svt(...t){const s=this.idt,i=s.AW().wdt(),e=i.length;if(0===e)return this.yvt?"":0;const n=yb(this.Sx.bvt(),e);return this.udt.mY().hpt(s),this.pbt.apply(i[n].yq(),t)}vvt(t,...s){const i=this.idt,e=i.PW(),n=e.length;if(0===n||"number"!=typeof t)return this.yvt?"":0;const r=yb(t,n);return this.udt.mY().hpt(i),this.pbt.apply(e[r].yq(),s)}}class xb extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.JQ(s[1]),this.Mvt=s[3],this.yvt=!!s[2],this.Sx.wvt(this.idt)}xvt(){const t=this.idt.AW().wdt(),s=t.length;return 0===s?this.yvt?"":0:t[yb(this.Sx.bvt(),s)].Gvt(this.Mvt)}Tvt(){const t=this.idt,s=t.AW().wdt(),i=s.length;if(0===i)return this.yvt?"":0;const e=s[yb(this.Sx.bvt(),i)],n=e.IV().Cvt(t.Ivt());return e.Gvt(this.Mvt+n)}_vt(t){const s=this.idt,i=s.PW(),e=i.length;if(0===e||"number"!=typeof t)return this.yvt?"":0;const n=i[yb(t,e)];let r=0;return s.w0()&&(r=n.IV().Cvt(s.Ivt())),n.Gvt(this.Mvt+r)}}class Gb extends wb.avt{constructor(t,s){super(t),this.idt=this.Nc.JQ(s[1]),this.Evt=this.idt.Nnt(s[2]),this.Rvt=this.idt.ait(s[2]),this.pbt=this.Nc.dbt(s[3]),this.yvt=!!s[4],this.udt=this.Nc.$k().Zk(),this.Sx.wvt(this.idt)}Pvt(...t){const s=this.idt,i=s.AW().wdt(),e=i.length;if(0===e)return this.yvt?"":0;const n=yb(this.Sx.bvt(),e);this.udt.mY().hpt(s);const r=i[n];let h=0;return s.w0()&&(h=r.IV().Avt(s.Ivt())),this.pbt.apply(r.knt()[this.Rvt+h].yq(),t)}Ovt(t,...s){const i=this.idt,e=i.PW(),n=e.length;if(0===n||"number"!=typeof t)return this.yvt?"":0;const r=yb(t,n);this.udt.mY().hpt(i);const h=e[r];let o=0;return i.w0()&&(o=h.IV().Avt(i.Ivt())),this.pbt.apply(h.knt()[this.Rvt+o].yq(),s)}}class Tb extends wb.avt{constructor(t,s){super(t),this.Dvt=null,this.Fvt=s[1]}omt(){this.Dvt=this.Nc.$k().Omt(this.Fvt)}Lvt(){return this.Dvt}}}{let Cb=function(t){const s=self.kvt[t];if(!s)throw new Error("invalid expression number");return s};GetExpressionFunc=Cb;const Ib=self.Is,_b=self.assert;Ib.Nvt=class extends Ib.Vn{constructor(t,s,i){super(),this.Sx=t,this.Rw=i,this.qc=s,this.qs=null,this.$vt=!1,this.Ybt=!1}static AT(t,s,i){const e=s[0],n=[Eb,Rb,kb,Ab,Db,Pb,Fb,Eb,Ab,Ab,Nb,$b,kb,Wb,Rb,Lb,Ob,Bb,jb,Vb,Hb,Ub];return Ib.Un(n[e],t,e,i,s)}omt(){}fvt(){this.$vt=!0}wvt(t){this.$vt||t&&(t.SW().zB()||(this.$vt=!0))}Bvt(){return this.$vt}ek(){return this.Rw}L$(){return this.Sx.L$()}Vk(){return this.Sx.Vk()}uyt(){return this.Ybt}Wvt(){return 4===this.qc}};class Eb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.jvt=0;const n=e[1];this.Vvt=n[0],this.Hvt=[],this.Uvt=null;for(let t=1,s=n.length;t<s;++t)this.Hvt.push(Ib.avt.lvt(this,n[t]));this.Hvt.length?this.qs=this.qvt:(this.qs=Cb(this.Vvt),this.Ybt=!0)}zvt(t){if(t<0||t>=this.Hvt.length)throw new RangeError("invalid numbered node");return this.Hvt[t]}omt(){for(const t of this.Hvt)t.omt();const t=Cb(this.Vvt);this.Hvt.length?this.Uvt=t(this):this.Uvt=t}bvt(){return this.jvt}qvt(t){return this.jvt=t,this.Uvt()}}class Rb extends Eb{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.Jvt,14===s&&(this.Vk().Zwt(),this.Sx instanceof Ib.Uwt&&this.Vk().cSt())}Jvt(t){this.jvt=t;const s=this.Uvt();return"string"==typeof s?s:""}Yvt(){return Cb(this.Vvt)()}}class Pb extends Eb{constructor(t,s,i,e){super(t,s,i,e),t.Xvt()>=2?this.qs=this.nj:this.qs=this.l$,this.Ybt=!1}l$(t){this.jvt=t;const s=this.Uvt();return this.L$().h$().l$(s)}nj(t){const s=this.l$(t);return s?s.nj():null}}class Ab extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Kvt=e[1],this.qs=this.Zvt,this.Ybt=!0}Zvt(){return this.Kvt}}class Ob extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Qvt=e[1],this.qs=this.tMt,this.Ybt=!0}tMt(){return this.Qvt}}class Db extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.idt=this.L$().JQ(e[1]),t.Xvt()>=2?this.qs=this.dW:this.qs=this.IV;const n=this.Vk();n.Hwt(this.idt),this.Sx instanceof Ib.Uwt?n.cSt():n.bU()&&n.bU().cSt(),this.Ybt=!0}IV(){return this.idt}dW(){return this.idt?this.idt.dW():null}}class Fb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.HZ=this.L$().VN().A5(e[1]),t.Xvt()>=2?this.qs=this.WN:this.qs=this.HN,this.Ybt=!0}HN(){return this.HZ}WN(){return this.HZ?this.HZ.WN():null}}class Lb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.N8=this.L$().q9().H6(e[1]),t.Xvt()>=2?this.qs=this.Cst:this.qs=this.zst,this.Ybt=!0}zst(){return this.N8}Cst(){return this.N8?this.N8.Cst():null}}class kb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.sMt=e[1],this.qs=this.iMt,this.Ybt=!0}iMt(){return this.sMt}}class Nb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.eMt=e[1];const n=this.Sx.IV();this.Sx instanceof Ib.Vwt&&this.Sx.FG()?(this.qs=this.nMt,this.Ybt=!0):n&&n.w0()?(this.qs=this.rMt,this.fvt()):(this.qs=this.nMt,this.Ybt=!0)}nMt(){return this.eMt}rMt(t){t=t||0;const s=this.Sx.IV(),i=s.AW(),e=i.PW();let n=null;if(e.length)n=e[t%e.length].IV();else if(i.gdt()){const s=i.ydt();n=s[t%s.length].IV()}else{if(!(s.DW()>0))return 0;{const i=s.PW();n=i[t%i.length].IV()}}return this.eMt+n.Cvt(s.Ivt())}}class $b extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.Fvt=e[1],this.Dvt=null,t.Xvt()>=2?this.qs=this.hMt:this.qs=this.oMt,this.Ybt=!0}omt(){this.Dvt=this.L$().$k().Omt(this.Fvt)}oMt(){return this.Dvt}hMt(){return null}}class Bb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.aMt=e[1],this.mvt=null,t.Xvt()>=2?this.qs=this.lMt:this.qs=this.uMt,this.Ybt=!0}omt(){this.mvt=this.L$().$k().Bk(this.aMt),this.aMt=null}uMt(){return this.mvt}lMt(){return null}}class Wb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.cMt=[],this.fMt=[],this.Ybt=!0;for(let t=1,s=e.length;t<s;++t){const s=Ib.Nvt.AT(this.Sx,e[t],0);this.cMt.push(s),this.fMt.push(0),s.uyt()||(this.Ybt=!1)}this.qs=this.dMt}omt(){for(const t of this.cMt)t.omt()}dMt(){const t=this.cMt,s=this.fMt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0);return s}}class jb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.pMt=e[1],this.qs=this.dnt,this.Ybt=!0}dnt(){return this.pMt}}class Vb extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.mMt=e[1],this.qs=this.gMt,this.Ybt=!0}gMt(){return this.mMt}}class Hb extends Eb{constructor(t,s,i,e){super(t,s,i,e),this.qs=this.HV,this.Ybt=!1}HV(){return this.Uvt()}}class Ub extends Ib.Nvt{constructor(t,s,i,e){super(t,s,i),this.wut=this.L$().Lut().cut(e[1]),this.qs=this.yMt,this.Ybt=!0}yMt(){return this.wut.Ec()}}}{let qb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=qb;const zb=self.Is,Jb=self.assert,Yb=[],Xb=function(){};zb.Vwt=class extends zb.Vn{constructor(t,s,i){if(super(),this.Abt=t,this.Nc=t.L$(),this.Rw=i,this.pbt=this.Nc.dbt(s[1]),this.wMt=s[3]>0,this.SMt=2===s[3],this.bMt=!!s[4],this.vMt=!!s[5],this.hG=!!s[6],this.JZ=s[7],this.MMt=this.Abt.Pdt(),this.idt=null,this.Evt=null,this.Rvt=-1,this.uvt=null,this.tE=Xb,this.egt=Xb,this.Ws=[],this.xMt=[],this.GMt=!1,this.TMt=null,this.CMt=null,this.Fwt=this.Nc.yH()?{Lwt:s[8][0],IMt:s[8][1]}:null,-1===s[0]?this.uvt=this.Nc.DK():(this.idt=this.Nc.JQ(s[0]),s[2]&&(this.Evt=this.idt.Nnt(s[2]),this.Rvt=this.idt.ait(s[2])),this.Abt.bU()&&this.Abt.bU().cSt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(zb.Nvt.AT(this,s,this.Ws.length)),this.xMt.push(0)}0===this.Ws.length&&(this.Ws=Yb,this.xMt=Yb),this.Abt.$k().fmt(this)}static AT(t,s,i){return zb.Un(zb.Vwt,t,s,i)}omt(){for(const t of this.Ws)t.omt(),t.Bvt()&&(this.GMt=!0);this.SMt?(this.tE=this._Mt,this.egt=this.EMt):this.uvt?(this.RMt(),this.egt=this.PMt):this.idt.SW().zB()?(this.AMt(),this.egt=this.OMt):this.hG?(this.tE=this.DMt,this.egt=this.FMt):(this.tE=this.LMt,this.egt=this.kMt)}RMt(){const t=this.uvt,s=this.uvt;this.NMt(t,s,this.$Mt)}AMt(){const t=this.idt.SW(),s=this.idt.gW().yq();this.NMt(t,s,this.BMt)}NMt(t,s,i){const e=this.pbt,n=this.vMt,r=this.Ws;if(0===r.length){const i=t.pvt(e,s);this.tE=n?function(){return zb.xor(i(),n)}:i}else if(1===r.length){const i=r[0];if(!n&&i.uyt())this.tE=t.WMt(e,s,i.qs(0));else{const r=t.pvt(e,s);this.tE=function(){return zb.xor(r(i.qs(0)),n)}}}else if(2===r.length){const i=r[0],h=r[1];if(!n&&i.uyt()&&h.uyt())this.tE=t.jMt(e,s,i.qs(0),h.qs(0));else{const r=t.pvt(e,s);this.tE=function(){return zb.xor(r(i.qs(0),h.qs(0)),n)}}}else if(3===r.length){const i=r[0],h=r[1],o=r[2];if(!n&&i.uyt()&&h.uyt()&&o.uyt())this.tE=t.VMt(e,s,i.qs(0),h.qs(0),o.qs(0));else{const r=t.pvt(e,s);this.tE=function(){return zb.xor(r(i.qs(0),h.qs(0),o.qs(0)),n)}}}else this.tE=i}C0(){return this.JZ}Hyt(){return this.pbt}IV(){return this.idt}Iq(){return this.Evt}HMt(){return this.Evt?this.Evt.Gq():this.idt?this.idt.SW():null}Xvt(){const t=this.HMt();return t?t.UMt():1}Vk(){return this.Abt}L$(){return this.Nc}ek(){return this.Rw}ESt(){return this.ek()}kyt(){return this.wMt}Uyt(){return this.SMt}qMt(){return this.vMt}Wq(){return this.bMt}FG(){return this.hG}zMt(){return this.Fwt.Lwt}JMt(){return!!this.uvt}GSt(){return this.JMt()||this.idt.SW().zB()}TSt(){for(const t of this.Ws)if(t.Wvt())return t.IV();return null}YMt(t){this.Fwt.Lwt=!!t,this.Abt.aSt()}XMt(){return this.Fwt.IMt}hwt(){return!this.zMt()&&!this.Nc.NSt()&&!this.XMt()}KMt(){return this.TMt||(this.TMt=new Map),this.TMt}ZMt(){return this.CMt||(this.CMt=new Map),this.CMt}$Mt(){const t=this.xMt;return qb(this.Ws,t),zb.xor(this.pbt.apply(this.uvt,t),this.vMt)}*PMt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;qb(this.Ws,t);let s=this.pbt.apply(this.uvt,t);return zb.Mo(s)&&(s=yield*s),zb.xor(s,this.vMt)}return this.tE()}BMt(){const t=this.xMt;qb(this.Ws,t);const s=this.idt.gW().yq();return zb.xor(this.pbt.apply(s,t),this.vMt)}*OMt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;qb(this.Ws,t);const s=this.idt.gW().yq();let i=this.pbt.apply(s,t);return zb.Mo(i)&&(i=yield*i),zb.xor(i,this.vMt)}return this.tE()}_Mt(){return!0}*EMt(){return(this.zMt()||this.Nc.NSt())&&(yield this),!0}QMt(){return this.Evt?this.Evt.Gq().UMt()>=2?this.Evt.Cq():this.Evt:this.idt.SW().UMt()>=2?this.idt.dW():this.idt}DMt(){const t=this.xMt;qb(this.Ws,t);const s=this.pbt.apply(this.QMt(),t);return this.idt.nbt(),s}*FMt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;qb(this.Ws,t);let s=this.pbt.apply(this.QMt(),t);return zb.Mo(s)&&(s=yield*s),this.idt.nbt(),s}return this.tE()}LMt(){const t=this.Ws,s=this.xMt,i=this.idt.AW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.Bvt()||(s[i]=e.qs(0))}return i.pdt()?this.txt(i):this.sxt(i)}*kMt(){return(this.zMt()||this.Nc.NSt())&&(yield this),this.LMt()}ixt(t){const s=this.Ws,i=this.xMt;for(let e=0,n=s.length;e<n;++e){const n=s[e];n.Bvt()&&(i[e]=n.qs(t))}}txt(t){const s=this.idt,i=s.w0(),e=s.Ivt(),n=this.Rvt,r=n>=0,h=s.PW(),o=this.GMt,a=this.xMt,l=this.pbt,u=this.vMt,c=this.MMt&&!this.wMt;t.ddt();for(let s=0,f=h.length;s<f;++s){const f=h[s];let d;if(o&&this.ixt(s),r){const t=i?f.IV().Avt(e):0;d=l.apply(f.knt()[n+t].yq(),a)}else d=l.apply(f.yq(),a);zb.xor(d,u)?t.Sdt(f):c&&t.bdt(f)}return s.nxt(!0),t.vdt(!1),s.nbt(),t.mdt()}sxt(t){const s=this.idt,i=s.w0(),e=s.Ivt(),n=s.NV(),r=this.Rvt,h=r>=0,o=this.GMt,a=this.xMt,l=this.pbt,u=this.vMt,c=this.MMt&&!this.wMt,f=t.Mdt(),d=t.xdt(),p=c&&!this.Abt.xSt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.ixt(t),h){const t=i?s.IV().Avt(e):0;w=l.apply(s.knt()[r+t].yq(),a)}else w=l.apply(s.yq(),a);zb.xor(w,u)?(y=!0,p?(f.push(s),n&&s.rxt()):(m[g]=s,n&&s.hxt(g),++g)):p?(m[g]=s,n&&s.oxt(g),++g):c&&(d.push(s),n&&s.axt())}zb.Sh(m,g),n&&s.lxt(p,g);const w=y;return p&&!y&&(y=this.uxt(f)),s.nxt(w||c),c?y:t.mdt()}uxt(t){const s=this.idt,i=s.w0(),e=s.Ivt(),n=this.GMt,r=this.Rvt,h=r>=0,o=this.xMt,a=this.pbt,l=this.vMt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(n&&this.ixt(s),h){const t=i?u.IV().Avt(e):0;c=a.apply(u.knt()[r+t].yq(),o)}else c=a.apply(u.yq(),o);if(zb.xor(c,l))return!0}return!1}cxt(t,s){return this.Ws[t].qs(s)}qyt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].Yvt()}s3(){if(!this.TMt||!this.TMt.size)return null;const t={};for(const[s,i]of this.TMt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map((t=>[t[0].BV(),t[1].BV(),t[2]]))),t[s]=e}return{ex:t}}i3(t){if(this.TMt&&(this.TMt.clear(),this.TMt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.KMt();t.clear();for(const[e,n]of Object.entries(i)){let i=n;"collmemory"===e&&(i=zb.Un(zb.Iu,n.map((t=>[s.e$(t[0]),s.e$(t[1]),t[2]])).filter((t=>t[0]&&t[1])))),t.set(e,i)}}}}}{let Kb=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(0)};EvalParams=Kb;const Zb=self.Is,Qb=self.assert,tv=[],sv=function(){},iv=function*(){},ev=1,nv=2,rv=4,hv=8,ov=16;Zb.Uwt=class extends Zb.Vn{constructor(t,s,i){super(),this.Abt=t;const e=t.L$();this.Nc=e,this.Rw=i,this.JZ=s.length>=4?s[3]:-1,this.fxt=s.length>=5?255&s[4]:0,this.dxt=s.length>=5?s[4]>>8:0,this.pbt=null,this.idt=null,this.Evt=null,this.Rvt=-1,this.uvt=null,this.pxt="",this.mxt=null,this.gxt=null,this.tE=sv,this.egt=sv,this.Ws=[],this.xMt=[],this.GMt=!1,this.TMt=null,this.CMt=null;const n=-3===s[0],r=n?s[2]:s[5];if(this.Fwt=e.yH()||n?{Lwt:r[0],IMt:r[1],index:r[2]}:null,-1===s[0])this.uvt=e.DK(),this.pbt=e.dbt(s[1]);else if(-2===s[0])this.pxt=s[1];else if(n){const t=e.dbt(s[1]);this.pbt=t,this.tE=this.yxt,this.egt=this.wxt,this.dxt|=8}else this.idt=e.JQ(s[0]),4&this.dxt?(this.pxt=s[1],this.mxt=e.JQ(s[2])):(s[2]&&(this.Evt=this.idt.Nnt(s[2]),this.Rvt=this.idt.ait(s[2])),this.pbt=e.dbt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(Zb.Nvt.AT(this,s,this.Ws.length)),this.xMt.push(0)}0===this.Ws.length&&(this.Ws=tv,this.xMt=tv),this.Sxt()&&(this.Abt.Zwt(),this.Abt.cSt()),this.Abt.$k().dmt(this)}static AT(t,s,i){return Zb.Un(Zb.Uwt,t,s,i)}omt(){for(const t of this.Ws)t.omt(),t.Bvt()&&(this.GMt=!0);if(this.uvt)this.RMt(),this.egt=this.PMt;else if(this.pxt)4&this.dxt?this.bxt():this.vxt(),this.pxt="",this.mxt=null;else if(this.tE===this.yxt){const t=this.pbt,s=this.Nc.$k().Rmt(this.Abt);this.pbt=t.bind(null,this.Nc.HB(),s)}else this.Evt?this.jSt()?(this.tE=this.Mxt,this.egt=this.xxt):(this.tE=this.Gxt,this.egt=this.Txt):this.idt.SW().zB()?(this.AMt(),this.egt=this.OMt):this.FG()?(this.tE=this.Cxt,this.egt=this.Ixt):this.jSt()?(this.tE=this._xt,this.egt=this.Ext):this.Rxt()?(this.tE=this.Pxt,this.egt=this.Axt):this.Ws.length?this.Ws.every((t=>t.Bvt()))?(this.tE=this.Oxt,this.egt=this.Dxt):this.GMt?(this.tE=this.Fxt,this.egt=this.Lxt):this.Ws.every((t=>t.uyt()))?(Kb(this.Ws,this.xMt),this.tE=this.kxt,this.egt=this.Nxt):(this.tE=this.$xt,this.egt=this.Bxt):(this.tE=this.kxt,this.egt=this.Nxt)}RMt(){const t=this.uvt,s=this.uvt;this.NMt(t,s,this.$Mt)}AMt(){const t=this.idt.SW(),s=this.idt.gW().yq();this.NMt(t,s,this.BMt)}vxt(){const t=this.Abt.$k(),s=t.Bk(this.pxt);if(s.Cu()){const i=!!(2&this.dxt);this.gxt=s.Vk();let e=[...new Set([...this.Abt.Hk(),...this.gxt.Hk()])];e=t.wmt(e);const n=!s.Jk()&&this.Wxt()?{obt:!0}:null;if(this.tE=Zb.Fyt.prototype.sbt.bind(this.gxt,e,this.Ws,i,n),this.Nc.yH()){const t=this;this.egt=function*(){return(t.zMt()||t.Nc.NSt())&&(yield t),yield*t.gxt.ubt(e,t.Ws,i,n)}}else this.egt=iv}else this.tE=sv,this.egt=iv}bxt(){const t=this.Abt.$k(),s=t.kmt(this.mxt,this.pxt);if(s.Cu()){const i=!!(2&this.dxt);this.gxt=s.Vk();let e=[...new Set([...this.Abt.Hk(),...this.gxt.Hk(),this.idt,s.IV()])];e=t.wmt(e);const n=!this.idt.w0()&&!s.IV().w0(),r=!this.idt.w0()&&s.IV().w0(),h=this.idt.w0();let o=null;if(!s.Jk()&&this.Wxt()&&(o=o||{},o.obt=!0),!r&&i||(o=o||{},o.ibt=this.idt,o.ebt=s.IV()),n||r||h&&!s.Wbt()?this.tE=Zb.Fyt.prototype.sbt.bind(this.gxt,e,this.Ws,i,o):h&&(this.tE=Zb.gyt.prototype.Ubt.bind(s,e,this.Ws)),this.Nc.yH()){const t=this;n||r||h&&!s.Wbt()?this.egt=function*(){return(t.zMt()||t.Nc.NSt())&&(yield t),yield*t.gxt.ubt(e,t.Ws,i,o)}:h&&(this.egt=function*(){return(t.zMt()||t.Nc.NSt())&&(yield t),yield*s.zbt(e,t.Ws)})}else this.egt=iv}else this.tE=sv,this.egt=iv}NMt(t,s,i){const e=this.pbt,n=this.Ws;if(0===n.length)this.tE=t.pvt(e,s);else if(1===n.length){const i=n[0];if(i.uyt())this.tE=t.WMt(e,s,i.qs(0));else{const n=t.pvt(e,s);this.tE=function(){return n(i.qs(0))}}}else if(2===n.length){const i=n[0],r=n[1];if(i.uyt()&&r.uyt())this.tE=t.jMt(e,s,i.qs(0),r.qs(0));else{const n=t.pvt(e,s);this.tE=function(){return n(i.qs(0),r.qs(0))}}}else if(3===n.length){const i=n[0],r=n[1],h=n[2];if(i.uyt()&&r.uyt()&&h.uyt())this.tE=t.VMt(e,s,i.qs(0),r.qs(0),h.qs(0));else{const n=t.pvt(e,s);this.tE=function(){return n(i.qs(0),r.qs(0),h.qs(0))}}}else this.tE=i}C0(){return this.JZ}jSt(){return!!(8&this.dxt)}WSt(){return!!(16&this.dxt)}Rxt(){return 1===this.fxt}FG(){return 2===this.fxt}Sxt(){return!!(1&this.dxt)}sSt(){return this.jSt()||this.WSt()}IV(){return this.idt}HMt(){return this.Evt?this.Evt.Gq():this.idt?this.idt.SW():null}Xvt(){const t=this.HMt();return t?t.UMt():1}Vk(){return this.Abt}Wxt(){let t=this.Abt;do{if(t instanceof Zb.gyt&&t.Jk())return!0;t=t._mt()}while(t);return!1}L$(){return this.Nc}ek(){return this.Rw}ESt(){return this.Fwt.index}zMt(){return this.Fwt.Lwt}YMt(t){this.Fwt.Lwt=!!t,this.Abt.aSt()}XMt(){return this.Fwt.IMt}hwt(){return!this.zMt()&&!this.Nc.NSt()&&!this.XMt()}KMt(){return this.TMt||(this.TMt=new Map),this.TMt}ZMt(){return this.CMt||(this.CMt=new Map),this.CMt}$Mt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.uvt,t)}*PMt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;return Kb(this.Ws,t),yield*this.pbt.apply(this.uvt,t)}return this.tE()}BMt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.idt.gW().yq(),t)}*OMt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;return Kb(this.Ws,t),yield*this.pbt.apply(this.idt.gW().yq(),t)}return this.tE()}kxt(){const t=this.xMt,s=this.idt.AW().PW();for(let i=0,e=s.length;i<e;++i)this.pbt.apply(s[i].yq(),t)}*Nxt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt,s=this.idt.AW().PW();for(let i=0,e=s.length;i<e;++i)yield*this.pbt.apply(s[i].yq(),t)}else this.kxt()}$xt(){const t=this.xMt;Kb(this.Ws,t);const s=this.idt.AW().PW();for(let i=0,e=s.length;i<e;++i)this.pbt.apply(s[i].yq(),t)}*Bxt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;Kb(this.Ws,t);const s=this.idt.AW().PW();for(let i=0,e=s.length;i<e;++i)yield*this.pbt.apply(s[i].yq(),t)}else this.$xt()}Oxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);i.apply(r.yq(),s)}}*Dxt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW();for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(n);yield*i.apply(r.yq(),s)}}else this.Oxt()}Fxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.Bvt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.Bvt()&&(s[i]=e.qs(n))}i.apply(r.yq(),s)}}*Lxt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW();for(let i=0,e=t.length;i<e;++i){const e=t[i];e.Bvt()||(s[i]=e.qs(0))}for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i){const e=t[i];e.Bvt()&&(s[i]=e.qs(n))}yield*i.apply(r.yq(),s)}}else this.Fxt()}Pxt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt,n=e.jxt(),r=e.AW().PW();n.Vxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);i.apply(n.yq(),s)}n.Hxt(i)}*Axt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt,n=e.jxt(),r=e.AW().PW();n.Vxt(i);for(let e=0,n=r.length;e<n;++e){const n=r[e];for(let i=0,n=t.length;i<n;++i)s[i]=t[i].qs(e);yield*i.apply(n.yq(),s)}n.Hxt(i)}else this.Pxt()}Uxt(){return this.Evt?this.Evt.Gq().UMt()>=2?this.Evt.Cq():this.Evt:this.idt.SW().UMt()>=2?this.idt.dW():this.idt}Cxt(){const t=this.xMt;return Kb(this.Ws,t),this.pbt.apply(this.Uxt(),t)}*Ixt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.xMt;Kb(this.Ws,t);let s=this.pbt.apply(this.Uxt(),t);return Zb.Mo(s)&&(s=yield*s),s}return this.Cxt()}Gxt(){const t=this.idt,s=t.w0(),i=t.Ivt(),e=this.Ws,n=this.GMt,r=this.xMt,h=this.pbt,o=this.Rvt,a=t.AW().PW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.Bvt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.Bvt()&&(r[s]=i.qs(t))}const u=s?l.IV().Avt(i):0;h.apply(l.knt()[o+u].yq(),r)}}*Txt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.idt,s=t.w0(),i=t.Ivt(),e=this.Ws,n=this.GMt,r=this.xMt,h=this.pbt,o=this.Rvt,a=t.AW().PW();for(let t=0,s=e.length;t<s;++t){const s=e[t];s.Bvt()||(r[t]=s.qs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(n)for(let s=0,i=e.length;s<i;++s){const i=e[s];i.Bvt()&&(r[s]=i.qs(t))}const u=s?l.IV().Avt(i):0;yield*h.apply(l.knt()[o+u].yq(),r)}}else this.Gxt()}_xt(){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(i.apply(h.yq(),s))}return Promise.all(n)}*Ext(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.Ws,s=this.xMt,i=this.pbt,e=this.idt.AW().PW(),n=[];for(let r=0,h=e.length;r<h;++r){const h=e[r];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].qs(r);n.push(yield*i.apply(h.yq(),s))}return Promise.all(n)}return this._xt()}Mxt(){const t=this.idt,s=t.w0(),i=t.Ivt(),e=this.Ws,n=this.xMt,r=this.pbt,h=this.Rvt,o=t.AW().PW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.IV().Avt(i):0;a.push(r.apply(l.knt()[h+u].yq(),n))}return Promise.all(a)}*xxt(){if((this.zMt()||this.Nc.NSt())&&(yield this),this.XMt()){const t=this.idt,s=t.w0(),i=t.Ivt(),e=this.Ws,n=this.xMt,r=this.pbt,h=this.Rvt,o=t.AW().PW(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)n[s]=e[s].qs(t);const u=s?l.IV().Avt(i):0;a.push(yield*r.apply(l.knt()[h+u].yq(),n))}return Promise.all(a)}return this.Mxt()}async yxt(){try{await this.pbt()}catch(t){console.error(`Unhandled exception running script %c${this.Abt.Q3().Ec()}, event ${this.Abt.pSt()}, action ${this.ESt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.wH&&self.wH.gbt(this),Zb.Vyt.ybt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Zb.Vyt.wbt())}}*wxt(){return(this.zMt()||this.Nc.NSt())&&(yield this),this.yxt()}s3(){return this.TMt&&this.TMt.size?{ex:Zb.So(this.TMt)}:null}i3(t){if(this.TMt&&(this.TMt.clear(),this.TMt=null),!t)return;const s=t.ex;s&&(this.TMt=Zb.bo(s))}}}{let av=function(t){return t instanceof Ev?_v.uj(t):t.Vz()},lv=function(t){return av(t).a$()},uv=function(t){return _v.uj(t)},cv=function(t){return uv(t).a$()},fv=function(t){return t instanceof Rv?_v.uj(t):t},dv=function(t){return t instanceof Pv?_v.uj(t):t},pv=function(t,s,i,e){s.BV()<i.BV()?t.Set(s,i,e):t.Set(i,s,e)},mv=function(t,s,i){s.BV()<i.BV()?t.Pu(s,i):t.Pu(i,s)},gv=function(t,s){t.Au(s)},yv=function(t,s,i){return s.BV()<i.BV()?t.qs(s,i):t.qs(i,s)},wv=function(t,s,i,e){if(!s)return!1;const n=0!==i||0!==e,r=t.a$(),h=_v.fk(),o=_v.Mmt(),a=o.Vk().Pdt(),l=o.IV(),u=o.qMt(),c=s.AW(),f=l!==s;let d;Lv=s,Fv=f&&!u,kv=!1;let p=0,m=0,g=!1;c.pdt()?(Av.S(r.tU()),Av.offset(i,e),h.qxt(r.l$(),s,Av,Dv),d=Dv):a?_v.zxt()&&!c.xdt().length&&c.Mdt().length?d=c.Mdt():(d=c.xdt(),kv=!0):d=c.Mdt(),n&&(p=r.UM(),m=r.JM(),r.WH(i,e),r.NH());for(const s of d)if(h.eB(t,s)){if(g=!0,u)break;f&&Nv.add(s)}return n&&(r.$H(p,m),r.NH()),xv.bh(Dv),g},Sv=function(t){const s=_v.Uk().Pdt(),i=Lv.AW(),e=i.Mdt(),n=i.xdt();i.pdt()?(i.Cdt(Nv),s&&(xv.bh(n),i.Idt(Nv,Lv.PW()))):s?kv?i._dt(Nv):(i.Idt(Nv,e),i.Cdt(Nv)):i.Cdt(Nv),Lv.nbt()},bv=function(t,s){Fv&&(s&&Sv(t),Nv.clear(),Lv=null,Fv=!1)},vv=function(t,s){const i=_v.e$(s);if(!i)return!1;const e=t.AW();if(!e.pdt()&&!e.Mdt().includes(i))return!1;if(t.w0()){if(i.IV().Jxt(t))return e.Rdt(i),t.nbt(),!0}else if(i.IV()===t)return e.Rdt(i),t.nbt(),!0;return!1},Mv=function(t,s){const i=t.AW();if(i.pdt()){i.vdt(!1),i.ddt();const e=t.PW();for(let t=0,n=e.length;t<n;++t){const n=e[t];n.BV()===s?i.bdt(n):i.Sdt(n)}return t.nbt(),!!i.Mdt().length}{const e=i.Mdt();let n=0;for(let t=0,r=e.length;t<r;++t){const r=e[t];e[n]=r,r.BV()===s?i.bdt(r):++n}return xv.Sh(e,n),t.nbt(),!!e.length}};GetInst=av,GetWorldInfo=lv,GetInst_SDKv2=uv,GetWorldInfo_SDKv2=cv,GetObjectClass=fv,GetLayer=dv,CollMemory_Add=pv,CollMemory_Remove=mv,CollMemory_RemoveInstance=gv,CollMemory_Get=yv,DoOverlapCondition=wv,FinishCollisionConditionPicking=Sv,FinishCollisionCondition=bv,PickByUID_Normal=vv,PickByUID_Inverted=Mv;const xv=self.Is,Gv=new xv.Go,Tv={},Cv={},Iv={};let _v=null;xv.Yxt=function(t){_v=t};const Ev=self.CV,Rv=self.yW,Pv=self.lj;Cv.Xxt=function(t,s){return xv.compare(this.a$().UM(),t,s)},Iv.Xxt=function(t,s){return xv.compare(this.x,t,s)},Cv.Kxt=function(t,s){return xv.compare(this.a$().JM(),t,s)},Iv.Kxt=function(t,s){return xv.compare(this.y,t,s)},Cv.Zxt=function(){return this.a$().nU()},Iv.Zxt=function(){return this.eU()},Tv.Qxt=function(){const t=lv(this),s=t.HN(),i=t.tU();return i.tl()<0||i.sl()<0||i.Za()>s.jg()||i.Qa()>s.Zg()},Tv.tGt=function(t,s,i){const e=fv(this).AW(),n=e.PW();if(!n.length)return!1;let r=n[0],h=r.a$(),o=r,a=xv.nr(h.UM(),h.JM(),s,i);for(let e=1,l=n.length;e<l;++e){r=n[e],h=r.a$();const l=xv.nr(h.UM(),h.JM(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=r)}return e.Rdt(o),!0},Cv.qM=function(t){const s=this.a$();s.UM()!==t&&(s.qM(t),s.NH())},Iv.qM=function(t){this.x=+t},Cv.YM=function(t){const s=this.a$();s.JM()!==t&&(s.YM(t),s.NH())},Iv.YM=function(t){this.y=+t},Cv.sGt=function(t,s){const i=this.a$();i.iGt(t,s)||(i.$H(t,s),i.NH())},Iv.sGt=function(t,s){this.setPosition(t,s)},Tv.eGt=function(t,s){if(!(t=fv(t)))return;const i=av(this),e=t.EW(i);if(!e)return;const[n,r]=e.nGt(s),h=i.a$();h.UM()===n&&h.JM()===r||(h.$H(n,r),h.NH())},Tv.rGt=function(t){if(0===t)return;const s=lv(this);s.WH(s.hGt()*t,s.oGt()*t),s.NH()},Cv.aGt=function(t,s){if(0===s)return;const i=this.a$();t=xv.Qn(t),i.WH(Math.cos(t)*s,Math.sin(t)*s),i.NH()},Iv.aGt=function(t,s){0!==s&&(t=xv.Qn(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},Cv.UM=function(){return this.a$().UM()},Iv.UM=function(){return this.x},Cv.JM=function(){return this.a$().JM()},Iv.JM=function(){return this.y},Tv.aN=function(){return _v.aN(av(this))},Cv.lGt=function(t,s){return xv.compare(this.a$().jg(),t,s)},Iv.lGt=function(t,s){return xv.compare(this.width,t,s)},Cv.uGt=function(t,s){return xv.compare(this.a$().Zg(),t,s)},Iv.uGt=function(t,s){return xv.compare(this.height,t,s)},Cv.Yg=function(t){const s=this.a$();s.jg()!==t&&(s.Yg(t),s.NH())},Iv.Yg=function(t){this.width=t},Cv.Vg=function(t){const s=this.a$();s.Zg()!==t&&(s.Vg(t),s.NH())},Iv.Vg=function(t){this.height=t},Cv.GR=function(t,s){const i=lv(this);i.jg()===t&&i.Zg()===s||(i.GR(t,s),i.NH())},Iv.GR=function(t,s){this.zW(t,s)},Cv.jg=function(){return this.a$().jg()},Iv.jg=function(){return this.width},Cv.Zg=function(){return this.a$().Zg()},Iv.Zg=function(){return this.height},Tv.cGt=function(){return lv(this).tU().Za()},Tv.fGt=function(){return lv(this).tU().Qa()},Tv.dGt=function(){return lv(this).tU().tl()},Tv.pGt=function(){return lv(this).tU().sl()},Tv.mGt=function(){const t=lv(this).tU();return(t.Za()+t.tl())/2},Tv.gGt=function(){const t=lv(this).tU();return(t.Qa()+t.sl())/2},Tv.yGt=function(t,s){return xv.hr(lv(this).KW(),xv.Qn(s))<=xv.Qn(t)},Tv.wGt=function(t){return xv.lr(lv(this).KW(),xv.Qn(t))},Tv.SGt=function(t,s){const i=xv.Qn(t),e=xv.Qn(s),n=lv(this).KW();return xv.lr(e,i)?xv.lr(n,i)&&!xv.lr(n,e):!(!xv.lr(n,i)&&xv.lr(n,e))},Cv.XW=function(t){const s=this.a$(),i=xv.Zn(xv.Qn(t));isNaN(i)||s.KW()===i||(s.XW(i),s.NH())},Iv.XW=function(t){this.ZH=t},Tv.bGt=function(t){if(isNaN(t)||0===t)return;const s=lv(this);s.XW(s.KW()+xv.Qn(t)),s.NH()},Tv.vGt=function(t){if(isNaN(t)||0===t)return;const s=lv(this);s.XW(s.KW()-xv.Qn(t)),s.NH()},Tv.MGt=function(t,s){const i=lv(this),e=i.KW(),n=xv.ar(e,xv.Qn(s),xv.Qn(t));isNaN(n)||e===n||(i.XW(n),i.NH())},Tv.xGt=function(t,s,i){const e=lv(this),n=e.KW(),r=s-e.UM(),h=i-e.JM(),o=Math.atan2(h,r),a=xv.ar(n,o,xv.Qn(t));isNaN(a)||n===a||(e.XW(a),e.NH())},Tv.GGt=function(t,s){const i=lv(this),e=i.KW(),n=t-i.UM(),r=s-i.JM(),h=Math.atan2(r,n);isNaN(h)||e===h||(i.XW(h),i.NH())},Cv.KW=function(){return xv.tr(this.a$().KW())},Iv.KW=function(){return this.ZH},Tv.TGt=function(t,s){return xv.compare(xv.Tr(100*lv(this).sO(),6),t,s)},Cv.Fj=function(){return this.a$().Fj()},Iv.Fj=function(){return this.isVisible},Tv.Oj=function(t){const s=lv(this);t=2===t?!s.Fj():0!==t,s.Fj()!==t&&(s.Oj(t),_v.m$())},Tv.eO=function(t){const s=xv.Kn(t/100,0,1),i=lv(this);if(i.JU()){if(i.uht().CGt()===s)return}else if(i.sO()===s)return;i.eO(s),_v.m$()},Tv.IGt=function(t){Gv.Qo(t);const s=lv(this);s.hU().Uo(Gv)||(s.oU(Gv),_v.m$())},Tv.rO=function(){const t=lv(this).hU();return xv._r(t.No(),t.$o(),t.Bo(),t.Wo())},Tv.sO=function(){return xv.Tr(100*lv(this).sO(),6)},Tv._Gt=function(t){return!!(t=dv(t))&&lv(this).l$()===t},Tv.EGt=function(t){const s=fv(this).AW(),i=s.PW();if(!i.length)return!1;let e=i[0];for(let s=1,n=i.length;s<n;++s){const n=i[s],r=n.a$(),h=e.a$(),o=r.l$().ek(),a=h.l$().ek();0===t?(o>a||o===a&&r.u$()>h.u$())&&(e=n):(o<a||o===a&&r.u$()<h.u$())&&(e=n)}return s.Rdt(e),!0},Cv.RGt=function(t,s,i){const e=this.a$(),n=0===t?e.XM():e.KH();return xv.compare(n,s,i)},Iv.RGt=function(t,s,i){const e=0===t?this.iV:this.XH;return xv.compare(e,s,i)},Cv.PGt=function(){this.a$().lU()},Iv.PGt=function(){this.aU()},Cv.AGt=function(){this.a$().cU()},Iv.AGt=function(){this.uU()},Tv.OGt=function(t){(t=dv(t))&&lv(this).dU(t)},Tv.DGt=function(t,s){const i=0===t;if(!(s=fv(s)))return;const e=av(this),n=s.FGt(e);n&&e.a$().mU(n,i)},Cv.KM=function(t){const s=this.a$();s.XM()!==t&&(s.KM(t),_v.m$())},Iv.KM=function(t){this.iV=t},Tv.LGt=function(){return lv(this).l$().ek()},Tv.kGt=function(){return lv(this).l$().Ec()},Cv.NGt=function(){return this.a$().u$()},Iv.NGt=function(){return this.zIndex},Cv.$Gt=function(){return this.a$().XM()},Iv.$Gt=function(){return this.iV},Cv.BGt=function(){return this.a$().KH()},Iv.BGt=function(){return this.XH},Tv.WGt=function(t){const s=av(this),i=s.IV().HW().Bnt(t);if(!i)return;const e=i.ek();return s.a$().LH().Oq(e)},Tv.jGt=function(t,s){const i=av(this),e=i.IV().HW().Bnt(s);if(!e)return;const n=e.ek(),r=1===t,h=i.a$().LH();h.Oq(n)!==r&&(h.Dq(n,r),h.Fq(),_v.m$())},Tv.VGt=function(t,s,i){const e=av(this),n=e.IV().HW().Bnt(t);if(!n)return;s=Math.floor(s);const r=n.PC().OC(s);if(!r)return;"color"===r?(Gv.Qo(i),i=Gv):"percent"===r&&(i/=100);const h=n.ek(),o=e.a$().LH();o.kq(h,s,i)&&o.Oq(h)&&_v.m$()};const Av=xv.Un(xv.Rect),Ov=[],Dv=[];let Fv=!1,Lv=null,kv=!1;const Nv=new Set;function*$v(t){if(!t)return!1;const s=this.L$(),i=s.fk(),e=s.$k(),n=e.Zk(),r=e.Mmt(),h=r.IV(),o=r.KMt(),a=r.ZMt(),l=n.mY(),u=s.Mtt(),c=u-1,f=l.Uk(),d=n.gY(f);let p=o.get("collmemory");p||(p=xv.Un(xv.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",(t=>gv(p,t._q))));const m=h.AW(),g=t.AW(),y=m.PW();let w=null;for(let s=0;s<y.length;++s){const n=y[s];g.pdt()?(i.qxt(n.a$().l$(),t,n.a$().tU(),Ov),w=Ov,i.HGt(n,t,w)):w=g.PW();for(let s=0;s<w.length;++s){const r=w[s];if(i.eB(n,r)||i.UGt(n,r)){const s=yv(p,n,r);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(pv(p,n,r,u),a){const s=f.pY();e.vY(s);const i=h.AW(),o=t.AW();if(i.vdt(!1),o.vdt(!1),h===t){const t=i.Mdt();xv.bh(t),t.push(n),t.push(r),h.nbt()}else{const s=i.Mdt(),e=o.Mdt();xv.bh(s),xv.bh(e),s.push(n),e.push(r),h.nbt(),t.nbt()}yield*f.YSt(l,d),e.xY(s)}}else mv(p,n,r)}xv.bh(Ov)}return n.IY(),!1}Tv.qGt=function(t){const s=fv(this);t=fv(t);const i=s.L$();if(i.zGt())return $v.call(s,t);if(!t)return!1;const e=i.fk(),n=i.$k(),r=n.Zk(),h=n.Mmt(),o=h.IV(),a=h.KMt(),l=h.ZMt(),u=r.mY(),c=i.Mtt(),f=c-1,d=u.Uk(),p=r.gY(d);let m=a.get("collmemory");m||(m=xv.Un(xv.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",(t=>gv(m,t._q))));const g=o.AW(),y=t.AW(),w=g.PW();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y.pdt()?(e.qxt(i.a$().l$(),t,i.a$().tU(),Ov),S=Ov,e.HGt(i,t,S)):S=y.PW();for(let s=0;s<S.length;++s){const r=S[s];if(e.eB(i,r)||e.UGt(i,r)){const s=yv(m,i,r);let e=!1,h=-2;"number"==typeof s&&(e=!0,h=s);const a=!e||h<f;if(pv(m,i,r,c),a){const s=d.pY();n.vY(s);const e=o.AW(),h=t.AW();if(e.vdt(!1),h.vdt(!1),o===t){const t=e.Mdt();xv.bh(t),t.push(i),t.push(r),o.nbt()}else{const s=e.Mdt(),n=h.Mdt();xv.bh(s),xv.bh(n),s.push(i),n.push(r),o.nbt(),t.nbt()}d.MY(u,p),n.xY(s)}}else mv(m,i,r)}xv.bh(Ov)}return r.IY(),!1},Tv.JGt=function(t){return t=fv(t),wv(av(this),t,0,0)},Tv.YGt=function(t,s,i){return t=fv(t),wv(av(this),t,s,i)},Tv.XGt=function(){return!0},Tv.OU=function(){return lv(this).OU()},Tv.r3=function(){return lv(this).r3()},Tv.KGt=function(t,s){const i=fv(this);t=fv(t);const e=i.L$(),n=this.AW().PW();if(0===n.length)return!1;const r=t.AW();let h=r.PW();if(r.pdt()){const s=[...e.ZGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.pdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];if(1===s)for(const s of e.xU())s.QGt(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e.bU(),null===i)continue}else i=e.MU();i.QGt(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(r.Cdt(a),t.nbt(),!0)},Tv.tTt=function(t,s){const i=fv(this);t=fv(t);const e=i.L$(),n=i.AW().PW();if(0===n.length)return!1;const r=t.AW();let h=r.PW();if(r.pdt()){const s=[...e.ZGt(t)];s.length>0&&(h=h.concat(s))}if(0===h.length)return!1;const o=r.pdt()?null:new Set(h),a=new Set;for(let i=0,e=n.length;i<e;++i){const e=n[i];2!==s||e.r3()||!e.QGt(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e._U())2===s&&i.r3()||i.QGt(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(r.Cdt(a),t.nbt(),!0)},Tv.sTt=function(t,s,i){const e=fv(this);t=fv(t);const n=e.L$(),r=e.AW().PW();if(0===r.length)return!1;const h=t.AW();let o=h.PW();if(h.pdt()){const s=[...n.ZGt(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=h.pdt()?null:new Set(o),l=[];for(let e=0,n=r.length;e<n;++e){const n=r[e];if(0===s){const s=n.IU(i);null!==s&&s.QGt(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of n.children())if(s.QGt(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(h.Tdt(l),t.nbt(),!0)},Tv.iTt=function(t,s,i){const e=av(this);switch(t){case 0:default:return xv.compare(e.TU(),s,i);case 1:return xv.compare(e.eTt(),s,i)}},Tv.RU=function(t,s,i,e,n,r,h,o,a,l){t=fv(t);const u=av(this),c=_v.Gmt().IV();for(const f of t.nTt(u,c)){if(!f.SW().rW())return;u.RU(f,{FU:s,kU:i,$U:e,WU:n,VU:r,zU:h,UU:o,YU:a,KU:l})}},Tv.PU=function(t){t=fv(t);const s=av(this),i=_v.Gmt().IV();for(const e of t.nTt(s,i))s.PU(e)},Tv.rTt=function(){const t=av(this);t.OU()&&t.bU().PU(t)},Tv.hTt=function(){const t=av(this).bU();return t?t.BV():-1},Tv.oTt=function(){return av(this).TU()},Tv.aTt=function(){return av(this).eTt()},Tv.lTt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=lv(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.iq(),i.NH()):i.tq(t,s)},Tv.nq=function(t,s,i,e,n,r,h,o){const a=lv(this);a.nq(t,s,{mode:0===i?"absolute":"relative",x:e,y:n,iV:r,aq:h,lq:o})&&a.NH()},Tv.uTt=function(){const t=lv(this);return t.hq()?t.oq().Ix():0},Tv.cTt=function(){const t=lv(this);return t.hq()?t.oq()._x():0},Tv.fTt=function(t){const s=lv(this);t=2===t?!s.Fj():0!==t,s.Fj()!==t&&s.Oj(t)},Tv.vq=function(t,s){this instanceof self.CV?this.NJ(t,s):this.vq(t,s)},Tv.dTt=function(t,s){this instanceof self.CV?this.BJ(t,""+s):this.dTt(t,""+s)},Tv.pTt=function(t){this instanceof self.CV?this.WJ(t):this.pTt(t)},Tv.mTt=function(){this instanceof self.CV?this.FJ():this.wq()},Tv.gTt=function(){this instanceof self.CV?this.LJ():this.Sq()},Tv.yTt=function(){return this instanceof self.CV?this.kJ():this.yTt()},Tv.wTt=function(t){this instanceof self.CV?this.STt(0!==t):this.bTt(0!==t)},Tv.vTt=function(){return this instanceof self.CV?this.xbt():this.MTt()},Cv.xTt=function(t,s,i){return xv.compare(this.Vz().Qrt(t),s,i)},Iv.xTt=function(t,s,i){return xv.compare(uv(this).Qrt(t),s,i)},Cv.GTt=function(t){return!!this.Vz().Qrt(t)},Iv.GTt=function(t){return!!uv(this).Qrt(t)},Tv.TTt=function(t,s){const i=fv(this),e=i.AW(),n=e.PW();if(!n.length)return!1;const r=i.w0();let h=null,o=0;for(let e=0,a=n.length;e<a;++e){const a=n[e],l=r?a.IV().Cvt(i.Ivt()):0,u=a.Qrt(l+s);(null===h||0===t&&u<o||1===t&&u>o)&&(o=u,h=a)}return e.Rdt(h),!0},Tv.CTt=function(t){const s=fv(this);return s.L$().Mmt().qMt()?Mv(s,t):vv(s,t)},Tv.vz=function(t){const s=new Set(xv.Lh(t)),i=av(this).YV();return s.isSubsetOf(i)},Tv.ITt=function(){return av(this)._Tt()},Tv.ETt=function(){return av(this).YV().size},Tv.RTt=function(t){return av(this).PTt(t)},Tv.ATt=function(t,s){const i=xv.Lh(s);if(0===i.length)return;const e=av(this),n=new Set(e.YV());if(0===t)for(const t of i)n.add(t);else if(1===t)for(const t of i)n.delete(t);e.KV(n)},Tv.OTt=function(){_v.OV(av(this))},Tv.DTt=function(){return!0},Tv.FTt=function(){return!0},Cv.LTt=function(t,s){this.Vz().tht(t,s)},Iv.LTt=function(t,s){uv(this).tht(t,s)},Cv.kTt=function(t,s){const i=this.Vz(),e=i.Qrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.tht(t,e+s)},Iv.kTt=function(t,s){const i=uv(this),e=i.Qrt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.tht(t,e+s)},Cv.NTt=function(t,s){const i=this.Vz(),e=i.Qrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.tht(t,e-s))},Iv.NTt=function(t,s){const i=uv(this),e=i.Qrt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.tht(t,e-s))},Cv.$Tt=function(t,s){this.Vz().tht(t,s?1:0)},Iv.$Tt=function(t,s){uv(this).tht(t,s?1:0)},Cv.BTt=function(t){const s=this.Vz();s.tht(t,0===s.Qrt(t)?1:0)},Iv.BTt=function(t){const s=uv(this);s.tht(t,0===s.Qrt(t)?1:0)},Tv.WTt=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=av(this),e="state";_v.jTt(),i.p6(e),i.ox(s,e),_v.VTt(e,{HTt:!0})},Tv.UTt=function(){return JSON.stringify(av(this).hx("state"))},Tv.qTt=function(){return av(this).IV().Ec()},Tv.zTt=function(){const t=_v.vmt().opt();let s=t.DW();for(const i of _v.ZGt(t))++s;return s},Tv.JTt=function(){return _v.vmt().opt().AW().PW().length},Cv.jV=function(){return this.Vz().jV()},Iv.jV=function(){return uv(this).jV()},Cv.BV=function(){return this.Vz().BV()},Iv.BV=function(){return uv(this).BV()},Tv.zgt=function(t){const s=av(this);return t.toLowerCase()===_v.$k().Kgt(s)},Tv.QV=function(t){const s=av(this);_v.$k().QV(s,t)},Tv.YTt=function(t){const s=fv(this);return _v.$k().xgt().XTt(s.AW().PW(),t),!0},Tv.KTt=function(){return av(this).HV()},xv.ZTt=function(t,s,i){const e=t[1],n=t[3],r=t[4],h=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.I$,w=s.hrt,S=s.ort,b=Object.assign({},Tv,i>=2?Iv:Cv);n&&(y.Xxt=b.Xxt,y.Kxt=b.Kxt,y.Zxt=b.Zxt,y.Qxt=b.Qxt,y.tGt=b.tGt,w.qM=b.qM,w.YM=b.YM,w.sGt=b.sGt,w.eGt=b.eGt,w.rGt=b.rGt,w.aGt=b.aGt,S.QTt=b.UM,S.tCt=b.JM,S.oN=b.aN),r&&(y.lGt=b.lGt,y.uGt=b.uGt,w.Yg=b.Yg,w.Vg=b.Vg,w.GR=b.GR,S.sCt=b.jg,S.iCt=b.Zg,S.eCt=b.cGt,S.nCt=b.fGt,S.rCt=b.dGt,S.hCt=b.pGt,S.oCt=b.mGt,S.aCt=b.gGt),h&&(y.lCt=b.yGt,y.uCt=b.wGt,y.SGt=b.SGt,w.XW=b.XW,w.bGt=b.bGt,w.vGt=b.vGt,w.MGt=b.MGt,w.xGt=b.xGt,w.GGt=b.GGt,S.cCt=b.KW),o&&(y.Fj=b.Fj,y.TGt=b.TGt,w.Oj=b.Oj,w.eO=b.eO,w.IGt=b.IGt,S.Opacity=b.sO,S.ColorValue=b.rO),a&&(y._Gt=b._Gt,y.EGt=b.EGt,y.RGt=b.RGt,w.PGt=b.PGt,w.AGt=b.AGt,w.OGt=b.OGt,w.DGt=b.DGt,w.KM=b.KM,S.LGt=b.LGt,S.kGt=b.kGt,S.NGt=b.NGt,S.$Gt=b.$Gt,S.BGt=b.BGt),l&&(y.WGt=b.WGt,w.jGt=b.jGt,w.VGt=b.VGt),d&&(y.XGt=b.XGt,y.OU=b.OU,y.r3=b.r3,y.KGt=b.KGt,y.tTt=b.tTt,y.sTt=b.sTt,y.iTt=b.iTt,w.RU=b.RU,w.PU=b.PU,w.rTt=b.rTt,S.hTt=b.hTt,S.oTt=b.oTt,S.aTt=b.aTt),p&&(w.lTt=b.lTt,w.nq=b.nq,S.uTt=b.uTt,S.cTt=b.cTt),u&&(y.Fj=b.Fj,w.Oj=b.fTt,w.fCt=b.vq,w.dCt=b.dTt,w.pCt=b.pTt),c&&(y.mCt=b.yTt,w.gCt=b.mTt,w.yCt=b.gTt),f&&(y.Cu=b.vTt,w.wCt=b.wTt),m&&(y.qGt=b.qGt,y.JGt=b.JGt,y.YGt=b.YGt,s.SCt=bv),e||(y.xTt=b.xTt,y.GTt=b.GTt,y.TTt=b.TTt,y.CTt=b.CTt,y.vz=b.vz,w.LTt=b.LTt,w.kTt=b.kTt,w.NTt=b.NTt,w.$Tt=b.$Tt,w.BTt=b.BTt,w.ATt=b.ATt,y.DTt=b.DTt,y.FTt=b.FTt,w.OTt=b.OTt,w.WTt||(w.WTt=b.WTt),S.UTt||(S.UTt=b.UTt),S.zTt=b.zTt,S.JTt=b.JTt,S.bCt=b.jV,S.vCt=b.BV,S.qTt=b.qTt,S.ITt=b.ITt,S.ETt=b.ETt,S.RTt=b.RTt,y.zgt=b.zgt,w.QV=b.QV,w.YTt=b.YTt),g&&(S.KTt=b.KTt)}}{const Bv=self.Is;Bv.Ggt=class extends Bv.Vn{constructor(t){super(),this.Odt=t,this.qc="",this.CF=-1,this.MCt="",this.xCt=!1,this.GCt=null,this.jdt=0,this.gwt=[],this.Jdt=null,this.TCt=new Map,this.CCt=null,this.ICt=null,this._Ct=-1,this.Mbt=null,this.ECt=null,this.RCt=!1}qn(){this.qc="",this.CF=-1,this.MCt="",this.GCt=null,this.ICt=null,this.Mbt=null,this.ECt=null,this._Ct=-1,Bv.bh(this.gwt),this.Jdt&&(this.Jdt.clear(),this.Jdt=null);for(const t of this.TCt.values())t.qn();this.TCt.clear(),this.CCt=null}HM(){const t=this.Odt,s=t.L$().y0(),i=t.vmt();this.GCt=i.Uk(),this.jdt=i.tpt()+1;const e=t.myt(this.GCt);e&&(this.ICt=e,this.Mbt=e.$bt(),this.ECt=e.Nbt().map((t=>t.Aet())),e.jSt()&&(this._Ct=e.Vbt()));for(const t of s){const s=t.AW();s.pdt()&&!this.GCt.fSt(t)||(this.gwt.push(t),this.TCt.set(t,Bv.Un(Bv.PCt,s)))}const n=t.qk();this.Jdt=n.size>0?n:null}ACt(t){this.qc="timer",this.HM(),this.CF=this.Odt.L$().fN()+t}OCt(t){this.qc="walltimer",this.HM(),this.CF=this.Odt.L$().pN()+t}DCt(t){this.qc="signal",this.HM(),this.MCt=t.toLowerCase()}XTt(t,s){this.qc="instance-signals",this.HM(),this.MCt=s.toLowerCase(),this.CCt=new Set(t)}FCt(t){this.qc="promise",this.HM(),t.then((()=>this.Vgt())).catch((t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Vgt()}))}LCt(){return"timer"===this.qc}kCt(){return"walltimer"===this.qc}Wgt(){return"signal"===this.qc}Ygt(){return"instance-signals"===this.qc}cyt(){return"promise"===this.qc}jgt(){return this.MCt}NCt(){return this.xCt}Vgt(){this.xCt=!0}Xgt(t){this.CCt.delete(t),0===this.CCt.size&&this.Vgt()}Igt(){return this.LCt()?this.CF<=this.Odt.L$().fN():this.kCt()?this.CF<=this.Odt.L$().pN():this.NCt()}$Ct(t){t.Ydt(this.GCt,this.jdt);for(const[t,s]of this.TCt.entries()){const i=t.AW();s.Ydt(i)}this.Jdt&&t.dpt([...this.Jdt]);const s=this.ICt;s&&(s.QSt(this.Mbt),s.Nbt().map(((t,s)=>t.pnt(this.ECt[s]))),s.jSt()&&s.Hbt(this._Ct))}_gt(t){this.$Ct(t),this.GCt.VSt(t),this.ICt&&this.ICt.jSt()&&this.ICt.lbt(this._Ct),this.Odt.Sgt(this.gwt),this.RCt=!0}async Agt(t){this.$Ct(t);for(const s of this.GCt.HSt(t))await this.Odt.L$().igt(s);this.ICt&&this.ICt.jSt()&&this.ICt.lbt(this._Ct),this.Odt.Sgt(this.gwt),this.RCt=!0}Egt(){return this.RCt}ldt(t){for(const s of this.TCt.values())s.ldt(t);if("instance-signals"===this.qc){for(const s of t)this.CCt.delete(s);0===this.CCt.size&&this.Vgt()}}s3(){const t={},s={wt:this.qc,t:this.CF,st:this.MCt,s:this.xCt,ev:this.GCt.C0(),sm:this.gwt.map((t=>t.C0())),dsm:this.Jdt?[...this.Jdt].map((t=>t.C0())):null,sols:t};this.GCt.RSt(this.jdt)&&(s.act=this.GCt.Tmt(this.jdt).C0());for(const[s,i]of this.TCt)t[s.C0().toString()]=i.s3();return"instance-signals"===this.qc&&(s.pi=[...this.CCt].map((t=>t.BV()))),s}static fyt(t,s){const i=t.L$(),e=t.Dmt(s.ev);if(!e)return null;let n=0;if(s.hasOwnProperty("act")){const i=t.Lmt(s.act);if(!i)return null;n=i.ek()}const r=Bv.Un(Bv.Ggt,t);r.CF=s.t,s.hasOwnProperty("wt")?r.qc=s.wt:r.qc=-1===r.CF?"signal":"timer",r.MCt=s.st,r.xCt=s.s,r.GCt=e,r.jdt=n;for(const t of s.sm){const s=i.dY(t);s&&r.gwt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.dY(t);s&&(r.Jdt||(r.Jdt=new Set),r.Jdt.add(s))}for(const[e,n]of Object.entries(s.sols)){const s=parseInt(e,10),h=i.dY(s);if(!h)continue;const o=Bv.Un(Bv.PCt,null);o.i3(t,n),r.TCt.set(h,o)}if("instance-signals"===r.qc){r.CCt=new Set;for(const t of s.pi){const s=i.e$(t);s&&r.CCt.add(s)}}return r}}}{const Wv=self.Is;Wv.PCt=class extends Wv.Vn{constructor(t){super(),this.idt=null,this.BCt=!0,this.mZ=[],t&&(this.idt=t.IV(),this.BCt=t.pdt(),Wv.Th(this.mZ,t.Mdt()))}qn(){this.idt=null,Wv.bh(this.mZ)}Ydt(t){t.vdt(this.BCt),Wv.Th(t.Mdt(),this.mZ)}ldt(t){Wv.Rh(this.mZ,t)}s3(){return{sa:this.BCt,insts:this.mZ.map((t=>t.BV()))}}i3(t,s){const i=t.L$();this.BCt=!!s.sa,Wv.bh(this.mZ);for(const t of s.insts){const s=i.e$(t);s&&this.mZ.push(s)}}}}{let jv=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};GetNextParamMap=jv;const Vv=self.Is;Vv.WCt=class extends Vv.Vn{constructor(t){super(),this.Nc=t.runtime,this.Bc=t.id,this.Yn=t.name??"",this.jCt=!!t.qB,this.VCt=!!t.HCt,this.UCt=!!t.ZB,this.qCt=!!t.zCt,this.JCt=!!t.tW,this.YCt=!!t.XCt,this.KCt=!!t.hW,this.ZCt=!!t.XB,this.QCt=!!t.iW,this.tIt=t.sIt,this.iIt=null,this.eIt=new Map,this.nIt=new Map,this.rIt=new Map,this.hIt=new Map,this.oIt=t.aIt,this.lIt=null}qn(){this.Nc=null}L$(){return this.Nc}UB(){return this.Bc}Ec(){return this.Yn}uIt(){}Jgt(){return this.UMt()>=2?this.lIt.constructor:this.constructor}UMt(){return this.tIt}cIt(t=!1){let s=this.oIt;return t&&"function"!=typeof s&&this.UMt()>=2&&(s=globalThis.Kz),s}zB(){return this.jCt}YB(){return this.VCt}KB(){return this.ZCt}eW(){return this.QCt}QB(){return this.UCt}SM(){return this.qCt}sW(){return this.JCt}rW(){return this.YCt}oW(){return this.KCt}pvt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.eIt.get(t);return i||(i=t.bind(s),this.eIt.set(t,i),i)}WMt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=jv(this.nIt,t);let n=e.get(i);return n||(n=t.bind(s,i),e.set(i,n),n)}jMt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const n=jv(this.rIt,t),r=jv(n,i);let h=r.get(e);return h||(h=t.bind(s,i,e),r.set(e,h),h)}VMt(t,s,i,e,n){if(!s)throw new Error("missing 'this' binding");const r=jv(this.hIt,t),h=jv(r,i),o=jv(h,e);let a=o.get(n);return a||(a=t.bind(s,i,e,n),o.set(n,a),a)}fIt(t){if(!this.zB())throw new Error("must be single-global plugin");this.iIt=t}pW(){if(!this.zB())throw new Error("must be single-global plugin");return this.iIt}gW(){if(!this.zB())throw new Error("must be single-global plugin");return this.iIt.gW()}dIt(){const t=this.UMt();Vv.VB.pIt(this,t);const s=this.cIt(!0);if(s){if(this.lIt=new s,!(this.lIt instanceof self.WB))throw new TypeError("plugin class must derive from IPlugin")}else this.lIt=new self.WB;Vv.VB.mIt(t)}cW(){return this.lIt}}}{const Hv=self.Is;Hv.gIt=class extends Hv.WCt{constructor(t,s){super(t),this.yIt=s,this.wIt=0,this.SIt=new Map,this.bIt("elem-focused",(t=>t.vIt())),this.bIt("elem-blurred",(t=>{t&&t.MIt()}))}qn(){super.qn()}xIt(t){const s=this.wIt++;return this.SIt.set(s,t),s}GIt(t){this.SIt.delete(t)}bIt(t,s){this.Nc.fH(this.yIt,t,(t=>{const i=this.SIt.get(t.elementId);s(i,t)}))}}}{const Uv=self.Is;Uv.TIt=class extends Uv.Vn{constructor(t){super(),this.idt=t,this.Nc=t.L$(),this.CIt=t.SW()}qn(){this.idt=null,this.Nc=null,this.CIt=null}IV(){return this.idt}L$(){return this.Nc}SW(){return this.CIt}iz(){return this.idt.iz()}uIt(){}nxt(t){}Vxt(t){}Hxt(t){}g4(t){}M4(){}S4(){}U4(t){}IIt(){}cIt(){return null}_It(t,s,i){const e=Uv.Un(Uv.Event,t,s);e.EIt=this,i&&Object.assign(e,i),this.IV().G5(e)}}}{const qv=self.Is;qv.RIt=class extends qv.Vn{constructor(t,s){super(),this.di=t,this.yIt=s,this.PIt=null,this.Nc=t.L$(),this.idt=this.di.IV(),this.AIt=this.idt.jxt(),this.e6=null,this.r6=null,this.vH=!1,this.xH=!1,this.Xf=null,this.YE=!1}qn(){this.YE=!0,this.OIt(),this.DIt(),this.e6=null,this.r6=null,this.Xf&&(this.Xf.qn(),this.Xf=null),this.di=null,this.Nc=null,this.idt=null,this.AIt=null}zn(){return this.YE}Vz(){return this.di}L$(){return this.Nc}IV(){return this.idt}SW(){return this.AIt.SW()}jxt(){return this.AIt}FIt(){return this.di.n$()}lH(t){return this.Nc.lH(t,this.di,null)}LIt(t){return this.Nc.LIt(t,this.di,null)}T$(t){return this.Nc.T$(t,this.di,null)}kIt(t,s){return this.Nc.kIt(t,this.di,s)}NIt(t,s){return this.Nc.NIt(t,this.di,s)}$It(t){return this.Nc.$It(t)}BIt(t,s){this.Nc.fH(this.yIt,t,s)}WIt(t){for(const[s,i]of t)this.BIt(s,i)}jIt(t,s){this.Nc.Wc(this.yIt,t,s)}VIt(t,s){return this.Nc.y$(this.yIt,t,s)}HIt(t,s){if(!this.Nc.xk())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.yIt,handler:t,data:s,responseId:null});this.jIt(t,s)}UIt(t){if(!t)throw new Error("cannot set empty component id");this.PIt=t}qIt(){if(!this.PIt)throw new Error("wrapper extension component id not set");return this.Nc._H(this.PIt)}RH(t,s){if(!this.PIt)throw new Error("wrapper extension component id not set");this.Nc.RH(this.PIt,t,s)}zIt(t){for(const[s,i]of t)this.RH(s,i)}eY(t,s){if(!this.PIt)throw new Error("wrapper extension component id not set");this.Nc.eY(this.PIt,t,s)}nY(t,s){if(!this.PIt)throw new Error("wrapper extension component id not set");return this.Nc.nY(this.PIt,t,s)}d8(){}JIt(){}YIt(){if(!this.vH){if(!this.e6)if(this.Nc.yH()){const t=globalThis.wH,s=this.SW();this.e6=()=>{const i=performance.now();this.d8(),t.bH(s,performance.now()-i)}}else this.e6=()=>this.d8();this.Nc.wf().addEventListener("tick",this.e6),this.vH=!0}}OIt(){this.vH&&(this.Nc.wf().removeEventListener("tick",this.e6),this.vH=!1)}XIt(){return this.vH}KIt(){if(!this.xH){if(!this.r6)if(this.Nc.yH()){const t=globalThis.wH,s=this.SW();this.r6=()=>{const i=performance.now();this.JIt(),t.bH(s,performance.now()-i)}}else this.r6=()=>this.JIt();this.Nc.wf().addEventListener("tick2",this.r6),this.xH=!0}}DIt(){this.xH&&(this.Nc.wf().removeEventListener("tick2",this.r6),this.xH=!1)}ZIt(){return this.xH}QIt(){return[]}hx(){return null}ox(t){}Hrt(t){}Xrt(t,s){}jht(t,s,i){if(0===s)return;const e=this.Hrt(t);if("number"!=typeof e)throw new Error("expected number");this.Xrt(t,e+s,i)}t_t(t,s,i,e){}s_t(t,...s){t.call(this,...s)}i_t(t,...s){return t.call(this,...s)}cIt(){return null}_It(t,s,i){if(!this.di.e_t())return;const e=this.FIt(),n=qv.Un(qv.Event,t,s);n._q=e,i&&Object.assign(n,i),e.dispatchEvent(n)}SM(){return!1}}}{const zv=self.Is;zv.n_t=class extends zv.RIt{constructor(t,s){super(t,s),this.Ast=t.a$(),this.r_t=null,this.h_t=null}qn(){if(this.r_t){const t=this.Nc.wf();t.removeEventListener("renderercontextlost",this.r_t),t.removeEventListener("renderercontextrestored",this.h_t),this.r_t=null,this.h_t=null}this.Ast=null,super.qn()}o_t(){this.a_t()}l_t(){}u_t(){}a_t(){if(this.r_t)return;this.r_t=()=>this.oZ(),this.h_t=()=>this.c_t();const t=this.Nc.wf();t.addEventListener("renderercontextlost",this.r_t),t.addEventListener("renderercontextrestored",this.h_t)}oZ(){this.l_t()}c_t(){this.u_t()}a$(){return this.Ast}vit(){return!1}bit(){if(!this.vit())throw new Error("original size not known");const t=this.f_t();if(t)return t.jg()}xit(){if(!this.vit())throw new Error("original size not known");const t=this.f_t();if(t)return t.Zg()}f_t(){return null}d_t(){const t=this.f_t();if(t){const s=t.fT();if(s)return[s.jg(),s.Zg()]}return[100,100]}p_t(){const t=this.f_t();return t?t.sP():null}m_t(){const t=this.f_t();return t?t.g_t():null}y_t(){const t=this.f_t();return!!t&&t.w_t()}nGt(t){const s=this.di.a$();return[s.UM(),s.JM(),s.KH()]}IIt(t,s,i){}S_t(t,s){}P2(){return!0}}}{const Jv=self.Is,Yv=Jv.Un(Jv.Rect);Jv.b_t=class extends Jv.n_t{constructor(t,s){super(t,s),this.v_t=this.SW().xIt(this),this.M_t=!0,this.x_t=!1,this.G_t=!1,this.T_t=-.2,this.C_t=Jv.Un(Jv.Rect,0,0,-1,-1);const i=this.Nc.x$();this.I_t=i.SJ(),this.__t=i.bJ(),this.E_t=-1,this.R_t=-1,this.P_t=!1,this.YIt()}qn(){this.SW().GIt(this.v_t),this.A_t("destroy"),this.v_t=-1,super.qn()}gq(){if(this.Nc.xk())throw new Error("not valid in worker mode");return this.O_t("get-element")}A_t(t,s){s||(s={}),s.elementId=this.v_t,this.jIt(t,s)}O_t(t,s){return s||(s={}),s.elementId=this.v_t,this.HIt(t,s)}D_t(t,s){return s||(s={}),s.elementId=this.v_t,this.VIt(t,s)}F_t(t){t||(t={});const s=this.a$();t.elementId=this.v_t,t.isVisible=s.Fj(),t.htmlIndex=s.l$().CJ(),t.htmlZIndex=s.IJ(),Object.assign(t,this.L_t()),this.M_t=!!t.isVisible,this.HIt("create",t),this.k_t(!0)}fTt(t){t=!!t,this.M_t!==t&&(this.M_t=t,this.A_t("set-visible",{isVisible:t}))}d8(){this.k_t(!1)}N_t(){const t=this.Nc.x$().AJ();return"Android"===Jv.Zs.Qs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}k_t(t){if(this.Vz().OJ())return;const s=this.a$(),i=s.l$(),e=s.tU();let[n,r]=i.SV(e.Za(),e.Qa()),[h,o]=i.SV(e.tl(),e.sl());const a=this.Nc.x$(),l=a.RB(),u=a.AB();if(!s.Fj()||!i.Fj())return void this.fTt(!1);if(!this.N_t()&&(h<=0||o<=0||n>=l||r>=u))return void this.fTt(!1);Yv.set(n,r,h,o);const c=a.SJ(),f=a.bJ(),d=i.CJ(),p=s.IJ();if(!t&&Yv.equals(this.C_t)&&this.I_t===c&&this.__t===f&&this.E_t===d&&this.R_t===p)return void this.fTt(!0);this.C_t.S(Yv),this.I_t=c,this.__t=f,this.E_t=d,this.R_t=p,this.fTt(!0);let m=null;this.G_t&&(m=i.DJ()+this.T_t),this.A_t("update-position",{left:Math.round(this.C_t.Za()),top:Math.round(this.C_t.Qa()),width:Math.round(this.C_t.width()),height:Math.round(this.C_t.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}wq(){this.O_t("focus",{focus:!0})}Sq(){this.O_t("focus",{focus:!1})}vIt(){this.x_t=!0}MIt(){this.x_t=!1}yTt(){return this.x_t}vq(t,s){this.A_t("set-css-style",{prop:Jv.vo(t),val:s})}dTt(t,s){this.A_t("set-attribute",{name:t,val:s})}pTt(t){this.A_t("remove-attribute",{name:t})}$_t(){this.P_t||(this.P_t=!0,Promise.resolve().then((()=>{this.P_t=!1,this.A_t("update-state",this.L_t())})))}L_t(){}B_t(){return this.v_t}}}{const Xv=self.Is,Kv=self.Pq;Xv.W_t=class extends Xv.Vn{constructor(t){super(),this.Nc=t.runtime,this.Bc=t.id,this.Yn=t.name??"",this.j_t=Xv.Un(Xv.Fu),this.V_t=Xv.Un(Xv.Fu),this.tIt=t.sIt,this.oIt=t.aIt,this.H_t=null}qn(){this.V_t.qn(),this.j_t.qn(),this.Nc=null}L$(){return this.Nc}UB(){return this.Bc}Ec(){return this.Yn}uIt(){}UMt(){return this.tIt}cIt(t=!1){let s=this.oIt;return t&&"function"!=typeof s&&this.UMt()>=2&&(s=globalThis.HJ),s}U_t(t){this.j_t.$u(t)}B6(){return this.j_t.Bu()}r0(t){this.V_t.$u(t)}a0(t){this.V_t.Pu(t)}PW(){return this.V_t.Bu()}dIt(){const t=this.UMt();Xv.VB.pIt(this,t);const s=this.cIt(!0);if(s){if(this.H_t=new s,!(this.H_t instanceof Kv))throw new TypeError("behavior class must derive from IBehavior")}else this.H_t=new Kv;Xv.VB.mIt(t)}xq(){return this.H_t}}}{const Zv=self.Is;Zv.q_t=class extends Zv.Vn{constructor(t){super(),this.Nc=t.L$(),this.Evt=t,this.idt=t.IV(),this.z_t=t.Gq(),this.z_t.U_t(this.idt)}qn(){this.Nc=null,this.Evt=null,this.idt=null,this.z_t=null}uIt(){}Iq(){return this.Evt}IV(){return this.idt}L$(){return this.Nc}Gq(){return this.z_t}}}{const Qv=self.Is;Qv.J_t=class extends Qv.Vn{constructor(t,s){super(),this.Y_t=t,this.yIt=s,this.di=t.Eq(),this.Nc=t.L$(),this.Evt=t.Iq(),this.AIt=this.Evt.jxt(),this.vH=!1,this.xH=!1,this.sY=!1,this.Xf=null}qn(){this.OIt(),this.DIt(),this.X_t(),this.Xf&&(this.Xf.qn(),this.Xf=null),this.Y_t=null,this.di=null,this.Nc=null,this.Evt=null,this.AIt=null}Gq(){return this.Evt.Gq()}K_t(){return this.Y_t}Eq(){return this.di}IV(){return this.di.IV()}a$(){return this.di.a$()}L$(){return this.Nc}Iq(){return this.Evt}jxt(){return this.AIt}FIt(){return this.Y_t.FIt()}lH(t){return this.Nc.lH(t,this.di,this.Evt)}LIt(t){return this.Nc.LIt(t,this.di,this.Evt)}T$(t){return this.Nc.T$(t,this.di,this.Evt)}Z_t(){}d8(){}JIt(){}Q_t(){}YIt(){this.vH||(this.Nc.YJ(this),this.vH=!0)}OIt(){this.vH&&(this.Nc.XJ(this),this.vH=!1)}XIt(){return this.vH}KIt(){this.xH||(this.Nc.KJ(this),this.xH=!0)}DIt(){this.xH&&(this.Nc.ZJ(this),this.xH=!1)}ZIt(){return this.xH}tEt(){this.sY||(this.Nc.QJ(this),this.sY=!0)}X_t(){this.sY&&(this.Nc.tY(this),this.sY=!1)}sEt(){return this.sY}QIt(){return[]}BIt(t,s){this.Nc.fH(this.yIt,t,s)}iEt(t,s){}hx(){return null}ox(t){}Hrt(t){}Xrt(t,s){}jht(t,s){if(0===s)return;const i=this.Hrt(t);if("number"!=typeof i)throw new Error("expected number");this.Xrt(t,i+s)}t_t(t,s,i,e){}s_t(t,...s){t.call(this,...s)}i_t(t,...s){return t.call(this,...s)}cIt(){return null}_It(t,s,i){if(!this.Y_t.e_t())return;const e=this.FIt(),n=Qv.Un(Qv.Event,t,s);n.eEt=e,n._q=e._q,i&&Object.assign(n,i),e.dispatchEvent(n)}}}{let tM=function(t){if(t!==iM)throw new Error("invalid internal API token")};ValidateInternalAPIToken=tM;const sM=self.Is;sM.E$={},sM.slt={};const iM=sM._s();let eM=[],nM=[],rM=[],hM=null,oM=null,aM=null,lM=null;const uM=new Map,cM=new Map;sM.VB=class extends sM.Vn{constructor(t,s){super(),this.Nc=t,this.nEt=[],this.uvt=null,this.rEt=[],this.hEt=new Map,this.oEt=null,this.aEt=null,this.lEt=new Set(s)}uEt(t){const s=t[19],i=this.Nc.dbt(t[0]);if(!i)throw new Error("missing plugin");sM.ZTt(t,i,s);const e=s>=2?sM.WCt:i,n=sM.Un(e,{runtime:this.Nc,qB:t[1],HCt:t[2],ZB:t[5],tW:t[8],zCt:t[9],XCt:t[13],hW:t[14],XB:t[17],iW:t[18],sIt:s,id:t[20],name:t[21],aIt:s>=2?i:null});n.uIt(),this.nEt.push(n),uM.set(i,n)}cEt(){this.uvt=sM.Un(sM.E$._$,{runtime:this.Nc,qB:!0}),this.uvt.uIt()}fEt(t){const s=t[1],i=t[2],e=t[3],n=this.Nc.dbt(t[0]);if(!n)throw new Error("missing behavior");this.hEt.set(n,(()=>{const t=s>=2?sM.W_t:n,r=sM.Un(t,{runtime:this.Nc,id:i,name:e,sIt:s,aIt:s>=2?n:null});r.uIt(),this.rEt.push(r),cM.set(n,r),!this.oEt&&sM.slt.dEt&&r instanceof sM.slt.dEt?this.oEt=r:!this.aEt&&sM.slt.pEt&&r instanceof sM.slt.pEt&&(this.aEt=r),r.dIt()}))}mEt(t){const s=this.hEt.get(t);s&&(s(),this.hEt.delete(t))}static pIt(t,s=1){if(sM.VB.pIt!==hM)throw new Error("invalid method");1===s&&eM.push(t),nM.push(t)}static mIt(t=1){if(sM.VB.mIt!==oM)throw new Error("invalid method");1===t&&eM.pop(),nM.pop()}static PV(){if(sM.VB.PV!==aM)throw new Error("invalid method");if(0===eM.length)throw new Error("no init object set");return eM.at(-1)}static jB(t){if(sM.VB.jB!==lM)throw new Error("invalid method");if(tM(t),0===nM.length)throw new Error("no init object set");return nM.at(-1)}static gEt(t){rM.push(t)}static yEt(){rM.pop()}static oH(){if(0===rM.length)throw new Error("no init properties set");return rM.at(-1)}wEt(){for(const t of this.nEt)t.dIt()}static uW(t){return uM.get(t)||null}static Aq(t){return cM.get(t)||null}DK(){return this.uvt}SEt(){return this.oEt}bEt(){return this.aEt}_H(t){return this.lEt.has(t)}},hM=sM.VB.pIt,oM=sM.VB.mIt,aM=sM.VB.PV,lM=sM.VB.jB}{const fM=self.Is,dM=new Set;fM.vEt=class extends fM.Vn{constructor(){super(),this.MEt=0,this.XK="",this.KK=0,this.xEt=0,this.GEt=0,this.Ey=0,this.Ry=0,this.TEt=!1,this.CEt=!1,this.IEt=null,this._Et="",this.VE=fM.Un(fM.Rect),this.EEt=fM.Un(fM._l),this.REt="",this.PEt=new self.D$(this),dM.add(this)}qn(){this.qE(),this.IEt&&0===this.IEt.uZ()&&this.IEt.qn(),this.IEt=null,dM.delete(this),this.AEt()}static oZ(){for(const t of dM)t._Et="",t.VE.set(0,0,0,0),t.EEt.Yl(t.VE)}OEt(t){this.XK=t[0],this.KK=t[1],this.xEt=t[2],this.GEt=t[3],this.Ey=t[4],this.Ry=t[5],this.TEt=t[6],this.CEt=!0}DEt(t,s){if(this.IEt)throw new Error("already loaded asset");this.XK=s;const i={};return fM.Kh(s)&&(i.xK="remote"),this.F$(t,i),this.IEt.CK()}FEt(t,s){if(this.IEt)throw new Error("already loaded asset");this.XK="",this.KK=s.size,this.IEt=fM.Un(fM.GK,t.lk(),{blob:s,size:this.KK,xK:"local"})}LEt(t){if(t===this)throw new Error("cannot replace with self");this.MEt++,this.qE(),this.XK=t.XK,this.KK=t.KK,this.xEt=t.xEt,this.GEt=t.GEt,this.Ey=t.Ey,this.Ry=t.Ry,this.TEt=t.TEt,this.CEt=t.CEt,this.IEt=t.IEt,this._Et=t._Et,this.VE=t.VE,this.EEt=t.EEt,this.AEt()}TK(){return this.XK}Ou(){return this.KK}kEt(){return this.xEt}NEt(){return this.GEt}w_t(){return this.TEt}jg(){return this.Ey}Zg(){return this.Ry}$Et(){return this.IEt.jg()}BEt(){return this.IEt.Zg()}F$(t,s){if(this.IEt)throw new Error("already got asset");s=Object.assign({},s,{url:this.TK(),size:this.Ou()}),this.IEt=t.MK(s)}sZ(){return this.IEt&&this.IEt.sZ()}async rX(t,s){if(!this.IEt)throw new Error("no asset");if(this._Et)throw new Error("already loaded texture");const i=this.MEt;this._Et="loading";const e=await this.IEt.rX(t,s);if(this.MEt!==i)return null;if(!e)return this._Et="",null;this._Et="loaded",this.CEt||(this.Ey=e.jg(),this.Ry=e.Zg(),this.CEt=!0);const n=this.TEt?this.Ry:this.Ey,r=this.TEt?this.Ey:this.Ry;return this.VE.set(this.xEt,this.GEt,this.xEt+n,this.GEt+r),this.VE.St(e.jg(),e.Zg()),this.EEt.Yl(this.VE),this.TEt&&this.EEt.su(),e}qE(){this._Et&&(this.IEt&&this.IEt.qE(),this._Et="",this.VE.set(0,0,0,0),this.EEt.Yl(this.VE))}fT(){return this.IEt&&"loaded"===this._Et?this.IEt.fT():null}sP(){return this.VE}g_t(){return this.EEt}aJ(){return this.PEt}WEt(){return this.IEt}async jEt(t){t||(t=await this.IEt.cZ());const s=fM.co(this.Ey,this.Ry),i=s.getContext("2d");return this.TEt?(i.rotate(Math.PI/-2),i.translate(-this.Ry,0),i.drawImage(t,this.xEt,this.GEt,this.Ry,this.Ey,0,0,this.Ry,this.Ey)):i.drawImage(t,this.xEt,this.GEt,this.Ey,this.Ry,0,0,this.Ey,this.Ry),s}async VEt(t){if(this.REt)return this.REt;const s=await this.jEt(t),i=await fM.fo(s);return this.REt=URL.createObjectURL(i),this.REt}AEt(){this.REt&&(URL.revokeObjectURL(this.REt),this.REt="")}}}{const pM=self.Is;pM.HEt=class extends pM.Vn{constructor(t){super(),this.Yn=t[0],this.UEt=t[1],this.bMt=!!t[2],this.Sot=t[3],this.qEt=t[4],this.zEt=!!t[5],this.JZ=t[6],this.JEt=t[7].map((t=>pM.Un(pM.YEt,t))),this.XEt=new self.Nq(this)}static KEt(t,s){const i=pM.Un(pM.HEt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.JEt.push(pM.YEt.KEt(t)),i}qn(){for(const t of this.JEt)t.qn();pM.bh(this.JEt)}ZEt(t){for(const s of this.JEt)s.iz().F$(t)}QEt(t,s){return Promise.all(this.JEt.map((i=>i.iz().rX(t,s))))}tRt(){for(const t of this.JEt)t.iz().qE()}Ec(){return this.Yn}C0(){return this.JZ}Jq(){return this.JEt.length}Xq(){return this.JEt}sRt(t){if((t=Math.floor(t))<0||t>=this.JEt.length)throw new RangeError("invalid frame");return this.JEt[t]}iRt(t,s){(s=Math.floor(s))<0?this.JEt.unshift(t):s>=this.JEt.length?this.JEt.push(t):this.JEt.splice(s,0,t)}eRt(t){if((t=Math.floor(t))<0||t>=this.JEt.length)throw new RangeError("invalid frame");this.JEt[t].qn(),this.JEt.splice(t,1)}nRt(t){for(let s=0,i=this.JEt.length;s<i;++s)if(pM.Ze(this.JEt[s].gz(),t))return s;return-1}rRt(t){if("string"==typeof t){const s=this.nRt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}$q(){return this.UEt}Wq(){return this.bMt}Vq(){return this.Sot}Uq(){return this.qEt}zq(){return this.zEt}hRt(){return this.XEt}}}{const mM=self.Is,gM=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();mM.YEt=class extends mM.Vn{constructor(t){super(),this.oRt=mM.Un(mM.vEt),this.oRt.OEt(t),this.aRt=t[7],this.lRt=mM.Un(mM._a,t[8],t[9]),this.uRt=t[10].map((t=>mM.Un(mM.cRt,this,t))),this.fRt=new Map;for(const t of this.uRt)this.fRt.set(t.Ec().toLowerCase(),t);this.dRt=null;const s=t[11];s.length>=6&&(this.dRt=mM.Un(mM.au,s)),this.Pw=t[12]?t[12]:"",this.pRt=new self.sz(this)}static KEt(t){const s=mM.Un(mM.YEt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.oRt.FEt(t,gM),s}qn(){this.dRt&&(this.dRt.qn(),this.dRt=null),this.oRt.qn(),this.oRt=null}iz(){return this.oRt}ez(){return this.aRt}VH(){return this.lRt.Oa()}qH(){return this.lRt.Fa()}fz(){return this.dRt}uz(t){return this.fRt.get(t.toLowerCase())||null}lz(t){return(t=Math.floor(t))<0||t>=this.uRt.length?null:this.uRt[t]}rz(){return this.uRt.length}gz(){return this.Pw}Kq(){return this.pRt}}}{const yM=self.Is;yM.cRt=class extends yM.Vn{constructor(t,s){super(),this.mRt=t,this.Yn=s[0],this.gRt=yM.Un(yM._a,s[1],s[2])}qn(){}Ec(){return this.Yn}UM(){return this.gRt.Oa()}JM(){return this.gRt.Fa()}yRt(){return this.gRt}}}{const wM=self.Is,SM=self.wH,bM=self.yW,vM=self.assert;wM.rut=class extends wM.Vn{constructor(t,s,i){super();const e=t.dbt(i[1]);this.Nc=t,this.CIt=wM.VB.uW(e),this.AIt=null,this.wRt=e.Instance,this.Rw=s,this.JZ=i[11],this.Yn=i[0],this.Kbt=this.Nc.Pmt(i[14]),this.SRt=!!i[9],this.bRt=!!i[2],this.vRt=!!i[10],this.MRt=i[3].map((s=>({DZ:s[0],type:s[1],name:s[2],xRt:t.Pmt(s[3])}))),this.GRt=i[4],this.TRt=i[5],this.VCt=this.CIt.YB(),this.CRt=wM.Un(wM.Event.wf),this.EQ=null;const[n,r]=t.fk().uB();if(this.IRt=wM.Un(wM._Rt,n,r),this.ERt=!0,this.RRt=null,this.PRt=null,this.ARt=-1,this.ORt=null,this.DRt=null,this.FRt=null,this.LRt=null,this.kRt=null,this.NRt=!1,this.$Rt=null,this.BRt=i[8].map((t=>wM.WRt.AT(this,t))),this.jRt=[],this.VRt=new Map,this.HRt=new Map,this.URt=new Set,this.qRt=new Map,this.zRt=wM.Un(wM.sdt,this),this.JRt=null,this.YRt=0,this.XRt=!1,this.$Rt=null,this.oRt=null,this.KRt=null,this.ZRt=null,this.QRt=null,this.tPt=0,this.TMt=new Map,this.CMt=new Map,this.mZ=[],this.sPt=new Map,this.iPt=!0,this.CIt.sW()&&(this.EQ=wM.Un(wM.RQ,this,i[12])),i[6]&&(this.oRt=wM.Un(wM.vEt),this.oRt.OEt(i[6])),i[7]){this.KRt=i[7].map((t=>wM.Un(wM.HEt,t))),this.ZRt=new Map,this.QRt=new Map;for(const t of this.KRt)this.ZRt.set(t.Ec().toLowerCase(),t),this.QRt.set(t.C0(),t)}this.bRt?(this.RRt=[],this.PRt=new Set,this.ARt=this.Nc.ePt()):(this.ORt=[],this.DRt=new Set,this.FRt=[],this.LRt=[],this.kRt=[]);const h=this.CIt.UMt();if(h<2&&(this.AIt=wM.Un(e.nPt,this,i[15]),!(this.AIt instanceof wM.TIt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.rPt=null,this.hPt=null,this.W3=wM.Un(wM.Event.wf),wM.VB.pIt(this,h),h>=2?(o=e.nPt,o||(o=globalThis.rJ)):o=this.AIt.cIt(),o){if(this.rPt=new o(h<2?this:null),h<2&&!(this.rPt instanceof bM))throw new TypeError("script interface class must derive from IObjectClass");if(h>=2&&!(this.rPt instanceof globalThis.rJ))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.rPt=new bM;if(wM.VB.mIt(h),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.AIt.IIt(s,i,e)}}this.Nc.oPt()&&!this.bRt&&!this.vRt&&this.VCt||this.uIt(),this.CIt.zB()&&(this.CIt.fIt(this),this.aPt(i)),this.lPt=null}static AT(t,s,i){return wM.Un(wM.rut,t,s,i)}qn(){if(this.CRt.qn(),this.CRt=null,this.oRt&&(this.oRt.qn(),this.oRt=null),this.KRt){for(const t of this.KRt)t.qn();wM.bh(this.KRt),this.ZRt.clear(),this.QRt.clear()}this.lPt=null,this.zRt.qn(),this.zRt=null,this.TMt.clear(),this.CMt.clear(),this.$Rt=null,this.Nc=null}uPt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.JQ(t[s]);this.RRt.push(i),this.PRt.add(i),i.ORt.push(this),i.DRt.add(this)}}cPt(t){this.NRt=!0,this.$Rt=t}NV(){return this.NRt}f4(){return this.$Rt}fPt(){let t=0;if(!this.bRt)for(const s of this.ORt)for(const i of s.dPt()){const s=i.Ec().toLowerCase();this.VRt.set(s,i),this.HRt.set(s,t),this.jRt.push(i),++t}for(const s of this.dPt()){const i=s.Ec().toLowerCase();this.VRt.set(i,s),this.HRt.set(i,t),this.jRt.push(s),++t}for(const t of this.jRt)this.URt.add(t.Gq().constructor);if(!this.bRt&&this.ORt.length){const t=this.Nc.pPt();wM.xh(this.FRt,t,0),wM.xh(this.LRt,t,0),wM.xh(this.kRt,t,0);const s=[];let i=0,e=0,n=0;for(const t of this.ORt){const r=t.Ivt();this.FRt[r]=i,i+=t.mPt(),this.LRt[r]=e,e+=t.gPt(),this.kRt[r]=n,n+=t.yPt();const h=t.HW();if(h&&this.EQ)for(const t of h.UW())s.push(t.wPt(this.EQ))}this.EQ&&this.EQ.SPt(s)}}aPt(t){const s=this.Nc.bPt(),i=wM.Un(wM.Instance,{runtime:this.Nc,objectType:this,uid:s});i.vPt(t[16],[]),this.Nc.MPt(s,i),this.mZ.push(i)}jxt(){return this.AIt}xPt(){return this.vRt}wf(){return this.CRt}uIt(){this.bRt||(this.AIt?this.AIt.uIt():this.rPt.hJ())}GPt(){return this.tPt>0}async g4(t){this.bRt||(this.tPt++,1===this.tPt&&(this.AIt?await this.AIt.g4(t):await this.rPt.lJ(this.Nc.x$().TPt())))}M4(){if(!this.bRt){if(this.tPt--,this.tPt<0)throw new Error("released textures too many times");0===this.tPt&&(this.AIt?this.AIt.M4():this.rPt.uJ(this.Nc.x$().TPt()))}}S4(){if(this.bRt)throw new Error("not applicable to family");this.AIt?this.AIt.S4():this.rPt.cJ()}async U4(t){this.bRt||(this.AIt?await this.AIt.U4(t):await this.rPt.fJ(this.Nc.x$().TPt()))}L$(){return this.Nc}SW(){return this.CIt}CPt(){return this.wRt}Ec(){return this.Yn}Pmt(){return this.Kbt}ek(){return this.Rw}C0(){return this.JZ}w0(){return this.bRt}n0(){return this.SRt}YB(){return this.VCt}Ivt(){return this.ARt}dPt(){return this.BRt}gPt(){return this.GRt}IPt(t){return t&&this.URt.has(t)}mPt(){return this.MRt.length}_Pt(){return this.MRt.map((t=>t.DZ))}EPt(t){return this.MRt.findIndex((s=>s.DZ===t))}nit(t){return this.MRt.findIndex((s=>s.name===t))}RPt(){return this.MRt.map((t=>t.name))}PPt(){return this.MRt.map((t=>t.xRt))}hit(t){if((t=Math.floor(t))<0||t>=this.MRt.length)throw new RangeError("invalid instance variable index");return this.MRt[t].type}rit(t){if((t=Math.floor(t))<0||t>=this.MRt.length)throw new RangeError("invalid instance variable index");return this.MRt[t].name}yPt(){return this.TRt}APt(){return this.jRt}Nnt(t){return this.VRt.get(t.toLowerCase())||null}ait(t){const s=this.HRt.get(t.toLowerCase());return void 0===s?-1:s}HW(){return this.EQ}sW(){return this.CIt.sW()}OPt(){return this.EQ&&this.EQ.DPt()}bgt(){return this.zRt}AW(){return this.zRt.AW()}iz(){return this.oRt}KQ(t){this.JRt=t}XQ(){return this.JRt}ZQ(t){this.YRt=t}FPt(){return this.YRt}LPt(){return this.KRt}kPt(){return this.KRt.length}Nmt(){return this.ORt}Jxt(t){return this.DRt.has(t)}Xwt(){return this.RRt}S0(t){return this.PRt.has(t)}Avt(t){return this.LRt[t]}Cvt(t){return this.FRt[t]}Fbt(t){this.qRt.set(t.Bbt().toLowerCase(),t)}Lbt(t){return!!this.qbt(t)}qbt(t){const s=this.qRt.get(t.toLowerCase());return s&&s.Cu()?s:null}NPt(){return this.KRt}$Pt(t){if(!this.KRt)throw new Error("no animations");return this.ZRt.get(t.toLowerCase())||null}BPt(t){if(!this.KRt)throw new Error("no animations");return this.QRt.get(t)||null}WPt(t){if(this.$Pt(t))throw new Error(`animation name '${t}' already exists`);const s=wM.HEt.KEt(this.L$(),t);return this.KRt.push(s),this.ZRt.set(s.Ec().toLowerCase(),s),this.QRt.set(s.C0(),s),s}jPt(t){const s=this.$Pt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.KRt.length)throw new Error("cannot remove last animation");const i=this.KRt.indexOf(s);this.KRt.splice(i,1),this.ZRt.delete(s.Ec().toLowerCase()),this.QRt.delete(s.C0()),s.qn()}VPt(){if(!this.KRt)throw new Error("no animations");return this.KRt[0]}HPt(){return this.VPt().sRt(0)}UPt(){if(this.KRt){const t=this.HPt().iz();return[t.jg(),t.Zg()]}return this.oRt?[this.oRt.jg(),this.oRt.Zg()]:[100,100]}gW(){if(!this.CIt.zB())throw new Error("not a single-global plugin");return this.mZ[0]}PW(){return this.mZ}*vW(){yield*this.mZ}*RW(){yield*this.mZ,yield*this.Nc.ZGt(this)}DW(){return this.mZ.length}r0(t){this.mZ.push(t)}qPt(){this.iPt=!0}Q4(){if(!this.iPt||this.bRt)return;const t=this.mZ;let s=0;for(let i=t.length;s<i;++s)t[s].zPt(s);const i=this.Nc.JPt();for(const t of i)t.IV()===this&&t.zPt(s++);this.iPt=!1}YPt(t){const s=this.mZ;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.JPt();for(const s of i)if(s.IV()===this){if(0===t)return s;--t}return null}FGt(t){if(t&&t.NV()&&t.IV()!==this)for(const s of t.$V())if(s.IV()===this)return s;const s=this.AW().PW();return s.length?s[0]:null}EW(t){const s=this.AW().PW();return s.length>0?s[t.jV()%s.length]:null}*nTt(t,s){const i=this.AW().PW(),e=i.length,n=s.AW(),r=s.AW().PW(),h=r.length;let o=t.jV();!s.w0()&&n.pdt()||(o=r.indexOf(t));const a=Math.ceil(e/h),l=e%h;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}nxt(t){this.AIt?.nxt(t)}nbt(){if(!this.NRt||this.bRt)return;this.Q4();const t=this.AW(),s=t.Mdt(),i=t.pdt(),e=this.Nc.vmt(),n=e&&e.Uk()&&e.Uk().Pdt();for(const e of this.$Rt.K4()){if(e===this)continue;e.Q4();const r=e.AW();if(r.vdt(i),!i){const i=r.Mdt();wM.bh(i);for(const t of s)i.push(e.YPt(t.jV()));if(n){const s=t.xdt(),i=r.xdt();wM.bh(i);for(const t of s)i.push(e.YPt(t.jV()))}}}}lxt(t,s){for(const i of this.f4().K4()){const e=i.AW();t?wM.Sh(e.xdt(),s):wM.Sh(e.Mdt(),s)}}XPt(){return this.IRt}KPt(t){this.ERt=!!t}ZPt(){if(this.ERt&&this.VCt){for(const t of this.mZ)t.a$().QPt();for(const t of this.Nc.JPt())t.IV()===this&&t.a$().QPt();this.ERt=!1}}tAt(t,s,i){if(s){const i=this.sPt.get(s);i&&(i.delete(t),0===i.size&&this.sPt.delete(s))}if(i){let s=this.sPt.get(i);s||(s=new Set,this.sPt.set(i,s)),s.add(t)}}sAt(){if(this.w0()){const t=new Set;for(const s of this.RRt)for(const i of s.sAt())t.add(i);return t.values()}return this.sPt.keys()}KMt(){return this.TMt||(this.TMt=new Map),this.TMt}ZMt(){return this.CMt||(this.CMt=new Map),this.CMt}iAt(){return this.IPt(wM.slt.dEt)}eAt(){return this.IPt(wM.slt.pEt)}nAt(){return this.IPt(wM.slt.rAt)}i0(){return this.IPt(wM.slt.hAt)}s3(){const t={instances:this.mZ.map((t=>t.hx()))};return this.TMt&&this.TMt.size&&(t.ex=wM.So(this.TMt)),t}i3(t,s){this.TMt&&(this.TMt.clear(),this.TMt=null);const i=t.ex;i&&(this.TMt=wM.bo(i));const e=this.mZ,n=t.instances;for(let t=0,s=Math.min(e.length,n.length);t<s;++t)e[t].ox(n[t]);for(let t=n.length,s=e.length;t<s;++t)this.Nc.OV(e[t]);for(let t=e.length,i=n.length;t<i;++t){const i=n[t];let e=null;if(this.YB()&&(e=this.Nc.BN().i4(i.w.l),!e))continue;const r=this.Nc.e0(this.JRt||this,e,!1,0,0,!0);r.ox(i),s&&s.add(r)}this.lPt=n,this.qPt()}oAt(){return this.lPt}aAt(){this.lPt=null}lAt(){for(let t=0,s=this.mZ;t<s;++t)this.mZ[t].lAt()}dW(){return this.rPt}Fk(){return this.W3}uAt(){return this.hPt}FW(t){this.hPt=t}G5(t){const s=this.Nc,i=s.yH()&&!s.$k().BW();i&&SM.T5(),this.W3.dispatchEvent(t),i&&SM.C5()}}}{const MM=self.Is;MM.cAt=class extends MM.Vn{constructor(t,s){super(),this.Nc=t,this.fAt=s;for(const t of this.fAt)t.cPt(this)}qn(){this.Nc=null}L$(){return this.Nc}c4(){return this.fAt}K4(){return this.fAt}s5(){return this.fAt.some((t=>t.YB()))}}}{const xM=self.Is,GM=self.wH,TM=self.CV,CM=xM.VB,IM=[];let _M=0;const EM=new WeakMap,RM=new WeakMap,PM=1,AM=2,OM=4,DM=8,FM=16,LM=32,kM=64;xM.Instance=class extends xM.Vn{constructor(t){if(xM.VB!==CM)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.dAt=t.objectType,this.Ast=null,this.pAt=null,this.mAt=null,this.gAt=0,this.yAt=t.uid,this.wAt=_M++,this.dxt=0,this.SAt=null;const s=xM.Lh(t.tags);s.length>0&&(this.SAt=new Set(s)),this.bAt=IM,this.vAt=IM;const i=this.dAt.APt();i.length>0&&(this.vAt=i.map(((t,s)=>xM.Un(xM.MAt,{runtime:this.Nc,Tq:t,_q:this,index:s})))),this.xAt=this.dAt.NV()?[]:null,this.GAt=-1,this.CRt=null;const e=this.SW();if(e.SM()&&(this.dxt|=4),e.YB())if(this.Ast=xM.Un(xM.TAt,this,t.kH),t.CAt)this.Ast.IAt(t.CAt);else{this.Ast._At();const[t,s]=this.dAt.UPt();this.Ast.GR(t,s),this.IV().OPt()&&this.Ast.LH().EAt()}t.RAt?this.PAt(t.RAt):this.AAt()}qn(){if(this.mAt&&(this.mAt.AV(),this.mAt=null),this.vAt.length>0){for(const t of this.vAt)t.qn();xM.bh(this.vAt)}this.pAt&&(this.pAt.qn(),this.pAt=null);const t=EM.get(this);t&&(t.clear(),EM.delete(this));const s=RM.get(this);s&&(s.clear(),RM.delete(this)),this.xAt&&xM.bh(this.xAt),this.CRt&&(this.CRt.qn(),this.CRt=null),this.SAt&&this.SAt.clear(),this.SAt=null,this.Nc=null,this.dAt=null,this.bAt.length>0&&xM.bh(this.bAt),this.Ast&&(this.Ast.qn(),this.Ast=null)}PAt(t){t.length>0&&(this.bAt=[],xM.Th(this.bAt,t))}AAt(){const t=this.dAt.mPt();if(0===t)return;this.bAt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.bAt.push(s[this.dAt.hit(i)])}vPt(t,s){if(this.pAt)throw new Error("already got sdk instance");for(let t=0,i=this.vAt.length;t<i;++t)this.vAt[t].vPt(s?s[t]:null);if(this.SW().UMt()<2){if(this.pAt=xM.Un(this.dAt.CPt(),this,t),!(this.pAt instanceof xM.RIt))throw new Error("sdk type must derive from SDKInstanceBase");!this.SW().YB()&&this.dAt.uAt()&&this.n$()}else{const s=this.SW().cIt();this.OAt(s.Instance,t)}}yq(){return this.pAt??this.mAt}a$(){return this.Ast}L$(){return this.Nc}gN(){return this.GAt}UV(){const t=this.GAt;return-1===t?this.L$().gN():t}yN(t){((t=+t)<0||!isFinite(t))&&(t=0),this.GAt=t,this.IV().OPt()&&this.Nc.DAt(this,!0)}zV(){this.GAt=-1,this.IV().OPt()&&this.Nc.DAt(this,!1)}H2(){return this.Nc.FAt(this)}wf(){return this.CRt||(this.CRt=xM.Un(xM.Event.wf)),this.CRt}Bx(t){this.pAt?this.pAt.Bx(t):this.mAt.yJ(this.Nc.x$().TPt())}uIt(t){this.pAt.uIt(t)}LAt(){this.dxt|=2}kAt(){return!!(2&this.dxt)}NAt(){this.dxt|=1}OJ(){return!!(1&this.dxt)}SM(){return!!(4&this.dxt)||this.pAt.SM()}$At(){this.dxt|=32}O2(){return!!(32&this.dxt)}BAt(){return!!(8&this.dxt)}WAt(t){t?this.dxt|=8:this.dxt&=-9}jAt(){return!!(16&this.dxt)}VAt(t){t?this.dxt|=16:this.dxt&=-17}HAt(){return!!(64&this.dxt)}UAt(t){t?this.dxt|=64:this.dxt&=-65}qAt(t,s){t<<=16,s?this.dxt|=t:this.dxt&=~t}zAt(t){return!!(this.dxt&t<<16)}f_t(){return this.pAt.f_t()}d_t(){return this.pAt.d_t()}p_t(){return this.pAt.p_t()}m_t(){return this.pAt.m_t()}y_t(){return this.pAt.y_t()}nGt(t){return this.pAt.nGt(t)}IV(){return this.dAt}P2(){return this.pAt.P2()}QGt(t){return t.w0()?t.S0(this.IV()):this.IV()===t}JAt(t,s,i){const e=(s,i)=>{const e=i||s.IV(),n=t.get(e);n?n.add(s):t.set(e,new Set([s]))};if(e(this,s),this.NV())for(const t of this.$V())e(t);if(i)for(const t of this._U())e(t)}YAt(){if(!this.SW().rW())throw new Error("object does not support scene graph")}OU(){return null!==this.bU()}bU(){const t=this.a$();if(!t)return null;const s=t.bU();return s?s.Vz():null}MU(){const t=this.a$();if(!t)return null;const s=t.MU();return s?s.Vz():null}*xU(){const t=this.a$();if(t)for(const s of t.xU())yield s.Vz()}XAt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}r3(){const t=this.a$();return!!t&&t.r3()}KAt(t){const s=this.a$();if(!s)return[];const i=t.Ec();return s.l5().map((t=>t.Vz())).filter((t=>t.IV().Ec()===i))}l5(){const t=this.a$();return t?t.l5().map((t=>t.Vz())):[]}*children(){const t=this.a$();if(t)for(const s of t.children())yield s.Vz()}*_U(){const t=this.a$();if(t)for(const s of t._U())yield s.Vz()}TU(){const t=this.a$();return t?t.TU():0}ZAt(){return[...this.xU()].length}eTt(){const t=this.a$();return t?t.eTt():0}IU(t){const s=this.a$();if(!s)return null;const i=s.IU(t);return i?i.Vz():null}QAt(){const t=this.a$();if(!t)return NaN;const s=t.bU();return s?s.tOt(t):NaN}sOt(t){for(const s of this.a$().l5())if(s.Vz().BV()===t)return!0;return!1}RU(t,s){this.YAt(),t.YAt(),this.a$().RU(t.a$(),s||{})}PU(t){const s=this.a$();s&&s.PU(t.a$())}ZU(){const t=this.a$();return!!t&&t.ZU()}W4(){const t=this.a$();if(!t)return;const s=t.iOt();if(s)for(const t of s){const s=this.Nc.e$(t[2]);if(s){const i=t[3];this.RU(s,{FU:!!(1&i),kU:!!(i>>1&1),$U:!!(i>>2&1),WU:!!(i>>3&1),VU:!!(i>>4&1),KU:!!(i>>5&1),UU:!!(i>>6&1),zU:!!(i>>7&1),YU:!!(i>>8&1)})}}}j4(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.RU(i,{FU:!!(1&e),kU:!!(e>>1&1),$U:!!(e>>2&1),WU:!!(e>>3&1),VU:!!(e>>4&1),KU:!!(e>>5&1),UU:!!(e>>6&1),zU:!!(e>>7&1),YU:!!(e>>8&1)})}}HV(){const t=this.Nc.eOt();return t?t.out(this):""}NV(){return null!==this.xAt}nOt(){xM.bh(this.xAt)}Z4(t){this.xAt.push(t)}LV(){return this.xAt}rOt(t){return!!this.hOt(t)}hOt(t){const s=this.$V();if(null===s||0===s.length)return!1;for(const i of s)if(i.IV()===t)return i;return null}$V(){return this.xAt}awt(){for(const t of this.$V())t.IV().AW().Gdt(t)}rxt(){for(const t of this.$V())t.IV().AW().Sdt(t)}hxt(t){for(const s of this.$V())s.IV().AW().Mdt()[t]=s}axt(){for(const t of this.$V())t.IV().AW().bdt(t)}oxt(t){for(const s of this.$V())s.IV().AW().xdt()[t]=s}SW(){return this.dAt.SW()}zPt(t){this.gAt=t}jV(){return this.dAt.Q4(),this.gAt}BV(){return this.yAt}oOt(){return this.wAt}aOt(t){t?this.KV(new Set(t)):this.SAt=null}KV(t){if(0===t.size)this.SAt=null;else{this.SAt?this.SAt.clear():this.SAt=new Set;for(const s of t)this.SAt.add(s)}}YV(){return this.SAt??new Set}_Tt(){return Array.from(this.YV()).join(" ")}PTt(t){t=Math.floor(t);for(const s of this.YV()){if(0===t)return s;--t}return""}knt(){return this.vAt}lOt(t){if(!t)return null;for(const s of this.vAt)if(s.Gq()instanceof t)return s;return null}rlt(t){if(!t)return null;const s=this.lOt(t);return s?s.yq():null}Lnt(t){const s=this.vAt;for(let i=0,e=s.length;i<e;++i)if(s[i].Iq().C0()===t)return i;return-1}uOt(){return this.bAt}RPt(){return this.dAt.RPt()}cOt(){return this.bAt.length}Qrt(t){t|=0;const s=this.bAt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}Gvt(t){return this.bAt[t]}fOt(t){const s=this.bAt[t];return 0===this.dAt.hit(t)?!!s:s}tht(t,s){t|=0;const i=this.bAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.dAt.hit(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Vht(t,s){if(0===s)return;t|=0;const i=this.bAt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}KMt(){let t=EM.get(this);return t||(t=new Map,EM.set(this,t),t)}ZMt(){let t=RM.get(this);return t||(t=new Map,RM.set(this,t),t)}dOt(t){const s=this.IV();if(s.Fk().xf(t))return!0;for(const i of s.Nmt())if(i.Fk().xf(t))return!0;return!!this.Nc.Fk().xf(t)}$W(){const t=new Set;t.add(this);const s=this.a$();if(s&&s.r3())for(const s of this._U())if(t.add(s),s.NV())for(const i of s.$V())t.add(i);if(this.NV())for(const s of this.$V())t.add(s);for(const s of t.values())s.V4();this.H4()}pOt(){this.dAt.uAt()&&this.n$();for(const t of this.vAt)t.Z_t()}mOt(){this.pOt()}V4(){if(this.pOt(),this.dOt("instancecreate")){const t=this.IV(),s=new xM.Event("instancecreate");s._q=this.n$(),t.G5(s);for(const i of t.Nmt())i.G5(s);this.Nc.G5(s)}this.Nc.lH(this.SW().Jgt().I$.DTt,this,null)}H4(){if(this.SW().rW()){if(this.G5(new xM.Event("hierarchyready")),this.dOt("hierarchyready")){const t=this.IV(),s=new xM.Event("hierarchyready");s._q=this.n$(),t.G5(s);for(const i of t.Nmt())i.G5(s);this.Nc.G5(s)}this.Nc.lH(this.SW().Jgt().I$.XGt,this,null)}}gOt(){this.Nc.lH(this.SW().Jgt().I$.FTt,this,null)}yOt(t){if(this.mAt){const s=new xM.Event("destroy");s.wOt=t,this.G5(s)}if(!this.dOt("instancedestroy"))return;const s=this.IV(),i=new xM.Event("instancedestroy");i._q=this.n$(),i.wOt=t,s.G5(i);for(const t of s.Nmt())t.G5(i);this.Nc.G5(i)}SOt(){return this.pAt?this.pAt.QIt():this.mAt.GH()}hx(t="full",s=null){const i={};"full"===t?i.uid=this.BV():i.c3=!0;const e=this.YV();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=EM.get(this);if(s&&s.size&&(i.ex=xM.So(s)),-1!==this.gN()&&(i.mts=this.gN()),this.dAt.mPt()>0){const t={},s=this.dAt._Pt();for(let i=0,e=this.bAt.length;i<e;++i)t[s[i].toString()]=this.bAt[i];i.ivs=t}if(this.vAt.length){const s={};for(const i of this.vAt){const e=i.hx(t);e&&(s[i.Iq().C0().toString()]=e)}i.behs=s}}this.Ast&&(i.w=this.Ast.s3(t,s));const n=this.pAt?this.pAt.hx():this.mAt.TH();return n&&(i.data=n),i}p6(t="full",s=null){this.Ast&&this.Ast.p6(t)}g6(t,s="full",i=null){this.Ast&&this.Ast.g6(t,s,i)}bOt(t,s="full",i=null){this.Ast&&this.Ast.bOt(t,s,i)}lAt(){this.SW().YB()&&this.Ast.lAt()}ox(t,s="full",i=null){if("full"===s)this.yAt=t.uid;else if(!t.c3)return;if(this.aOt(t.tags),"visual-state"!==s){let s=EM.get(this);s&&(s.clear(),EM.delete(this));const i=t.ex;i&&(s=xM.bo(i),EM.set(this,s)),this.GAt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.dAt.EPt(i);if(e<0||e>=this.bAt.length)continue;let n=s;null===n&&(n=NaN),this.bAt[e]=n}}if(this.SW().YB()){const e=t.w;if(e){const t=e.l;if(this.Ast.l$().C0()!==t){const i=this.Ast.l$(),e=i.HN().i4(t);e?(this.Ast.d$(e),i.a0(this,!0),e.r0(this,!0),e.p$(this),this.Ast.NH()):"full"===s&&this.Nc.OV(this)}this.Ast.i3(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),n=this.Lnt(i);n<0||n>=this.vAt.length||this.vAt[n].ox(e,s)}}const e=t.data;e&&(this.pAt?this.pAt.ox(e,s):this.mAt.CH(e))}n$(){return this.mAt||this.OAt()}e_t(){return!!this.mAt}OAt(t,s){const i=this.Ast?t?self.dJ:self.cq:t?self.sH:self.CV,e=t||this.pAt.cIt(),n=this.dAt.uAt(),r=n||e||i,h=this.SW().UMt();if(xM.VB.pIt(this,h),xM.VB.gEt(s),this.mAt=new r,xM.VB.yEt(),xM.VB.mIt(h),e&&!(this.mAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(n){const t=e||i;if(!(this.mAt instanceof t))throw new TypeError(`setInstanceClass(): class '${n.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.mAt}_V(t){if(0===this.bAt.length)return;const s={},i=this.dAt.PPt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:xM.Instance.prototype.fOt.bind(this,t),set:xM.Instance.prototype.tht.bind(this,t)};const e=Object.create(Object.prototype,s);t.vOt={value:e,writable:!1}}EV(t){const s=this.vAt;if(0===s.length)return;const i={};for(const t of s)i[t.Iq().Pmt()]={value:t.FIt(),writable:!1};const e=Object.create(Object.prototype,i);t.Jyt={value:e,writable:!1}}G5(t){if(!this.e_t())return;const s=this.n$();t._q=s;const i=this.Nc,e=i.yH()&&!i.$k().BW();e&&GM.T5(),s.dispatchEvent(t),e&&GM.C5()}}}{const NM=self.Is;NM.c5=class extends NM.Vn{constructor(t){super(),this.Sx=t,this.pwt=null,this.MOt=[],this.xOt=t.jg(),this.GOt=t.Zg(),this.TOt=1,this.COt=1,this.IOt=0,this._Ot=1,this.EOt=t.sO(),this.ROt=null,this.POt=null,this.AOt=NaN,this.OOt=!1,this.a3=NaN,this.l3=NaN,this.DOt=s=>{if(s._q!==this.pwt.Vz())return;t.L$().wf().removeEventListener("instancecreate",this.DOt);const i=this.pwt.Vz().yq();this.OOt=!!i.vit(),this.a3=this.OOt?i.bit():NaN,this.l3=this.OOt?i.xit():NaN}}qn(){this.pwt=null,this.ROt=null,this.POt=null,this.AOt=NaN,this.OOt=!1,this.a3=NaN,this.l3=NaN,NM.bh(this.MOt)}FOt(t){if(this._Ot=this.Sx.sO(),this.EOt=this._Ot,this.pwt=t,this.IOt=t?t.KW():0,this.pwt){const t=this.Sx.L$();if(this.pwt.Vz().SW().UMt()<2){const s=this.pwt.Vz().yq();s?(this.OOt=!!s.vit(),this.a3=this.OOt?s.bit():NaN,this.l3=this.OOt?s.xit():NaN):this.pwt.Vz().OJ()||t.wf().addEventListener("instancecreate",this.DOt)}else this.OOt=!1,this.a3=NaN,this.l3=NaN}else this.OOt=!1,this.a3=NaN,this.l3=NaN}bU(){return this.pwt}r3(){return this.MOt.length>0}l5(){return this.MOt}LOt(){this.r3()&&1!==this.MOt.length&&(this.POt?this.MOt.sort(((t,s)=>{const i=this.POt.get(t.Vz()),e=this.POt.get(s.Vz());return NM.te(i)&&NM.te(e)?i-e:0})):this.MOt.sort(((t,s)=>{const i=t.uht().kOt(),e=s.uht().kOt();return NM.te(i)&&NM.te(e)?i-e:0})))}kOt(){return this.AOt}cht(){return this.TOt}NOt(t){this.TOt=t}dht(){return this.COt}$Ot(t){this.COt=t}vht(){return this.EOt}CGt(){return this._Ot}BOt(t){this._Ot=t}lht(){return 0===this.xOt?Number.EPSILON:this.xOt}fht(){return 0===this.GOt?Number.EPSILON:this.GOt}WOt(){if(this.Sx.BU()){const t=this.pwt;let s=t.jg(),i=t.uht().lht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OOt?1+s/this.a3:s/i}return 1}jOt(){if(this.Sx.jU()){const t=this.pwt;let s=t.Zg(),i=t.uht().fht();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.OOt?1+s/this.l3:s/i}return 1}VOt(){return 0}HOt(){return{sw:this.xOt,sh:this.GOt,sx:this.TOt,sy:this.COt,psa:this.IOt,oo:this._Ot,so:this.EOt,pi:this.Sx.Vz().QAt()}}s3(t,s=null){const i=this.HOt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.UOt(t),c:this.qOt(t)})}zOt(t){let s="";return t.LU()&&(s+="x"),t.NU()&&(s+="y"),t.BU()&&(s+="w"),t.jU()&&(s+="h"),t.HU()&&(s+="a"),t.qU()&&(s+="z"),t.ZU()&&(s+="d"),t.JU()&&(s+="o"),t.XU()&&(s+="v"),s}UOt(t){return this.pwt?!this.pwt.Vz()||this.pwt.Vz().OJ()?null:this.JOt(this.pwt,this.Sx,t):null}qOt(t){return this.MOt.map((s=>this.JOt(s,s,t))).filter((t=>t))}JOt(t,s,i){const e=t.Vz();if(e&&e.OJ())return null;const n={};return n.uid=e.BV(),n.f=this.zOt(s),n.offsets=s.YOt(),n.data=NM.c5.XOt(e),n.oci=e.IV().ek(),"state"===i?(n.inst=e.hx("full",{selfOnly:!0}),n.instIndex=NaN):(n.instIndex=e.IV().PW().indexOf(e),n.inst=null),n}i3(t){this.xOt=t.sw,this.GOt=t.sh,this.TOt=t.sx,this.COt=t.sy,this.IOt=t.psa,this._Ot=t.oo,this.EOt=t.so,this.AOt=NM.te(t.pi)?t.pi:NaN}KOt(t,s,i,e){if(!t&&!s)if(e?.HTt){if(this.ROt)for(const t of this.ROt)t.OJ()||t.OU()||t.L$().OV(t)}else if(this.ROt)for(const t of this.ROt)if(i.c&&i.c.length){if(!i.c.some((s=>s.uid===t.BV())))continue;t.OJ()||t.OU()||t.L$().OV(t)}this.ROt=t,this.POt=s}g6(t,s){const i=this.Sx,e=i.L$(),n=new Set;if(t.p&&!this.pwt){const r=t.p.uid,h=e.e$(r);if(h){const r=h.a$();h.XAt(i.Vz())?this.pwt=r:(h.sOt(i.Vz().BV())?(e.OV(i.Vz()),e.ZOt(i.Vz().BV())):h.RU(i.Vz(),this.QOt(t.p.f)),n.has(i)||(i.tDt(t.p.offsets),this.sDt(h,t.p,s),this.iDt(i.Vz(),i.Vz().BV(),i.L$(),s)),n.add(i),h.a$().uht().LOt())}else if(NM.te(t.p.oci)){const n=e.JQ(t.p.oci),r=(e.DK(),e.LW(n,i.l$(),0,0,!0));if(r){const n=this.eDt(t.p,e);n&&r.ox(n),r.a$().l$().kW(r),r.RU(i.Vz(),this.QOt(t.p.f)),this.iDt(r,r.BV(),e,s),r.a$().uht().LOt()}}}const r=[];for(const s of t.c){const t=s.uid,i=e.e$(t);i&&r.push(i)}let h=0;for(const o of t.c){const a=o.uid,l=e.e$(a);if(l){if(this.ROt){if(this.ROt.includes(l)){const e=l;if(e.IV()!==l.IV()){h++;continue}if(e.OJ()){h++;continue}const o=t.c[h];if(!s?.HTt&&this.nDt(e,r,i)){if(i.Vz().IU(h)){const r=e.IV().ek(),a=o.oci,l=i.Vz().IU(h).IV().ek();if(r!==a||a!==l){this.rDt(t.c,i,n,s);break}this.hDt(h,o,i,n,s)}else this.hDt(h,o,i,n,s);h++;continue}if(e.OU()&&e.bU()!==i.Vz()){const t=this.oDt(o,s);this.aDt(t,o,n,s),h++;continue}this.aDt(e.a$(),o,n,s,!0),h++;continue}if(this.ROt[h]){const e=this.ROt[h];if(e.IV()!==l.IV()){h++;continue}if(e.OJ()){h++;continue}const o=t.c[h];if(!s?.HTt&&this.nDt(e,r,i)){if(i.Vz().IU(h)){const r=e.IV().ek(),a=o.oci,l=i.Vz().IU(h).IV().ek();if(r!==a||a!==l){this.rDt(t.c,i,n,s);break}this.hDt(h,o,i,n,s)}else this.hDt(h,o,i,n,s);h++;continue}if(e.OU()&&e.bU()!==i.Vz()){const t=this.oDt(o,s);this.aDt(t,o,n,s),h++;continue}this.aDt(e.a$(),o,n,s,!0),h++;continue}}const e=l.IV();if(this.lDt(r,e)===i.Vz().KAt(e).length){const t=i.Vz().IU(h);if(t){const i=t.a$();i&&(n.has(i)||(i.tDt(o.offsets),this.sDt(t,o,s)),n.add(i))}h++;continue}if(l.OU()&&l.bU()!==i.Vz()){const t=this.oDt(o,s);this.aDt(t,o,n,s),h++;continue}this.aDt(l.a$(),o,n,s)}else if(this.ROt&&this.ROt[h]){const a=this.ROt[h],l=e.JQ(this.uDt(o));if(a.IV()!==l){h++;continue}if(a.OJ()){h++;continue}const u=t.c[h];if(!s?.HTt&&this.nDt(a,r,i)){if(i.Vz().IU(h)){const e=a.IV().ek(),r=u.oci,o=i.Vz().IU(h).IV().ek();if(e!==r||r!==o){this.rDt(t.c,i,n,s);break}this.hDt(h,u,i,n,s)}else this.hDt(h,u,i,n,s);h++;continue}if(a.OU()&&a.bU()!==i.Vz()){const t=this.oDt(u,s);this.aDt(t,u,n,s),h++;continue}this.aDt(a.a$(),u,n,s)}else{const t=this.oDt(o,s);this.aDt(t,o,n,s)}h++}}rDt(t,s,i,e){const n=s.L$();for(const t of s.Vz().children())t&&!t.OJ()&&(n.OV(t),n.ZOt(t.BV()));this.ROt&&(this.ROt=[]),this.POt&&(this.POt=new WeakMap);for(const s of t){const t=this.oDt(s,e);this.aDt(t,s,i,e),this.ROt.push(t.Vz()),this.POt.set(t.Vz(),this.ROt.length-1)}s.uht().LOt()}nDt(t,s,i){const e=t.IV();return this.lDt(s,e)===i.Vz().KAt(e).length}hDt(t,s,i,e,n){const r=i.Vz().IU(t);if(!r)return;const h=r.a$();h&&(e.has(h)||(h.tDt(s.offsets),this.sDt(r,s,n)),e.add(h))}QOt(t){const s={};return s.FU=t.includes("x"),s.kU=t.includes("y"),s.$U=t.includes("w"),s.WU=t.includes("h"),s.VU=t.includes("a"),s.UU=t.includes("z"),s.KU=t.includes("d"),s.zU=t.includes("o"),s.YU=t.includes("v"),s}uDt(t){return NM.te(t.oci)?t.oci:t[1]}oDt(t,s){if(!NM.te(t.oci))return;const i=this.Sx,e=i.L$();let n;if(t.data)n=e.e0(t.data,i.l$(),!1,0,0,!1,!0);else{const s=e.JQ(t.oci);n=e.LW(s,i.l$(),0,0,!0)}if(!n)return;const r=this.eDt(t,e);r&&n.ox(r);const h=n.a$();return h.l$().kW(n,!0),h}iDt(t,s,i,e){if(i.e$(s)){if(!e?.HTt){const e=i.e$(s);e!==t&&i.OV(e)}i.ZOt(s)}i.MPt(s,t)}aDt(t,s,i,e,n=!0){const r=this.Sx,h=r.RU(t,this.QOt(s.f));h&&n?(i.has(t)||(t.tDt(s.offsets),this.sDt(t.Vz(),s,e)),i.add(t)):h&&this.iDt(t.Vz(),s.uid,r.L$(),e),this.LOt()}sDt(t,s,i){let e=this.eDt(s,this.Sx.L$());if(!e)return;const n=t.L$();e=JSON.parse(JSON.stringify(e));const r=e.w?.zi;e.w=null,t.ox(e),NM.te(r)&&t.a$().d0(r),this.iDt(t,e.uid,n,i)}lDt(t,s){return t.filter((t=>t.IV().Ec()===s.Ec())).length}eDt(t,s){if(NM.te(t.instIndex)){const i=s.JQ(t.oci).oAt();return i?i[t.instIndex]:null}return NM.le(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static XOt(t){let s=t.a$().l$().QQ(t.BV());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.l5()]){const t=s.a$();i.push([t.HN().C0(),t.l$().ek(),s.BV(),NM.c5.u5(t),s.IV().NV()?1:0,t.u$(),NM.c5.XOt(s)])}return NM.Ge(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=NM.c5.cDt(),s[0][14][1]=i,s[0][14][2]=t.a$().u$()),s}static u5(t){let s=0;return s|=Number(t.XU())<<8,s|=Number(t.JU())<<7,s|=Number(t.qU())<<6,s|=Number(t.ZU())<<5,s|=Number(t.HU())<<4,s|=Number(t.jU())<<3,s|=Number(t.BU())<<2,s|=Number(t.NU())<<1,s|=0|Number(t.LU()),s}static cDt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}}}{const $M=self.Is,BM=self.ls,WM=BM.ws,jM=BM.Ss,VM=$M.Un($M.Rect),HM=$M.Un($M._l),UM=$M.Un($M.Event,"bboxchange",!1),qM=$M.Un($M.Go,0,0,0,0),zM=$M.Un($M.au),JM=$M.Un($M.Go,1,1,1,1),YM=$M.Un($M.Rect,0,0,-1,-1),XM=$M.Un($M.Rect,0,0,-1,-1),KM=new Set(["absolute","relative"]),ZM=[];let QM=!0;const tx=1,sx=2,ix=4,ex=8,nx=16,rx=32,hx=64,ox=128,ax=256,lx=512,ux=1024,cx=2048,fx=4096,dx=8192,px=16384,mx=32768,gx=1<<22,yx=1<<23,wx=12647936,Sx=65536,bx=1<<17,vx=1<<18,Mx=1<<19,xx=1<<20,Gx=1<<21,Tx=26,Cx=31<<26,Ix=new WeakMap,_x=new WeakMap;$M.TAt=class extends $M.Vn{constructor(t,s){super(),this.di=t,this.idt=t.IV(),this.Nc=t.L$(),this.fDt=s,this.idt.tAt(this,null,s),this.dDt=-1,this.pDt=-1,this.dxt=196635,this.idt.SW().QB()&&(this.dxt|=128),this.Ea=NaN,this.Ra=NaN,this.AM=NaN,this.mDt=NaN,this.gDt=NaN,this.zG=NaN,this._o=NaN,this.yDt=NaN,this.wDt=NaN,this.SDt=NaN,this.bDt=NaN,this.vDt=$M.Un($M.Rect),this.MDt=$M.Un($M._l),this.xDt=XM,this.GDt=YM,this.TDt=null,this.CDt=null,this.IDt=null,this.PM=JM,this._Dt=JM,this.EDt=null,this.RDt=null,this.di.IV().OPt()&&(this.RDt=$M.Un($M.PDt,this.di,this)),this.ADt=null,this.ROt=null,this.POt=null,this.ODt=-1,this.DDt=null}NAt(){this.dxt|=256}qn(){if(this.idt.tAt(this,this.fDt,null),this.EDt&&(this.Nc.pM().Pb(this.EDt),this.EDt=null),this.TDt=null,this.CDt&&(this.CDt.FDt.qn(),this.CDt=null),this.IDt&&(this.IDt.clear(),this.IDt=null),this.iq(),this.RDt&&this.RDt.qn(),this.OU()&&this.bU().PU(this),this.r3()){const t=[...this.l5()];for(const s of t)this.PU(s)}this.LDt(),this.kDt(),Ix.delete(this),_x.delete(this),this.di=null,this.idt=null,this.Nc=null,this.fDt=null}IAt(t){if(QM=!1,this.$H(t[0],t[1]),this.KM(t[2]),this.GR(t[3],t[4]),this.zG=0,this.QB()?this.XW(t[6]):this._o=0,qM.wa(t[7]),this.NDt(qM),this.HH(t[8]),this.zH(t[9]),this.DM(t[10]),this.RDt&&this.RDt.$Dt(t[12]),t[14]&&Ix.set(this,{BDt:t[14][1],WDt:t[14][2]}),t[15]){const s=t[15];this.tq(s[0],s[1]);const i=this.oq(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,n=s.length;e<n;++e){const n=s[e],r=i.Nx(e,t);r.qM(n[0]),r.YM(n[1]),r.KM(n[2]),r.QM(n[3]),r.sx(n[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,n=!e,r=this.Nc.eOt();e&&r&&r.hut(this.Vz(),i),n&&r&&r.hut(this.Vz(),s)}QM=!0,this.jDt()}_At(){this.Ea=0,this.Ra=0,this.AM=0,this.mDt=0,this.gDt=0,this.zG=0,this._o=0,this.yDt=0,this.wDt=1,this.SDt=0,this.bDt=0,this.jDt()}L$(){return this.Nc}IV(){return this.idt}Vz(){return this.di}VDt(){return this.HU()?this.HDt(this.bU().UDt()-this.ADt.VOt()):0}qM(t){if(t=+t,this.LU()){const s=this.ADt,i=t-this.UM(),e=-this.VDt();0===e?this.Ea+=i/s.WOt():(this.Ea+=Math.cos(e)*i/s.WOt(),this.NU()&&(this.Ra+=Math.sin(e)*i/s.jOt()))}else this.Ea=t}rht(t,s=!1){t=+t,s?this.Ea+=t:this.LU()?this.qM(this.UM()+t):this.Ea+=t}UM(){if(this.LU()){let t=this.Ea;const s=this.ADt,i=this.bU(),e=this.VDt();return 0===e?t*=s.WOt():(t=t*s.WOt()*Math.cos(e),this.NU()&&(t-=this.Ra*s.jOt()*Math.sin(e))),i.UM()+t}return this.Ea}YM(t){if(t=+t,this.NU()){const s=this.ADt,i=t-this.JM(),e=-this.VDt();0===e?this.Ra+=i/s.jOt():(this.LU()&&(this.Ea-=Math.sin(e)*i/s.WOt()),this.Ra+=Math.cos(e)*i/s.jOt())}else this.Ra=t}hht(t,s=!1){t=+t,s?this.Ra+=t:this.NU()?this.YM(this.JM()+t):this.Ra+=t}JM(){if(this.NU()){let t=this.Ra;const s=this.ADt,i=this.bU(),e=this.VDt();return 0===e?t*=s.jOt():(t=t*s.jOt()*Math.cos(e),this.LU()&&(t+=this.Ea*s.WOt()*Math.sin(e))),i.JM()+t}return this.Ra}$H(t,s){if(t=+t,s=+s,this.qDt()){const i=this.LU(),e=this.NU(),n=this.ADt,r=t-this.UM(),h=s-this.JM(),o=-this.VDt();if(0===o)i?this.Ea+=r/n.WOt():this.Ea=t,e?this.Ra+=h/n.jOt():this.Ra=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Ea+=e?(l*r-a*h)/n.WOt():l*r/n.WOt():this.Ea=t,e?this.Ra+=i?(a*r+l*h)/n.jOt():l*h/n.jOt():this.Ra=s}}else this.Ea=t,this.Ra=s}zDt(){return[this.UM(),this.JM()]}WH(t,s){t=+t,s=+s,this.qDt()?this.$H(this.UM()+t,this.JM()+s):(this.Ea+=t,this.Ra+=s)}iGt(t,s){return this.UM()===t&&this.JM()===s}KM(t){if(t=+t,this.qU()&&(t-=this.bU().XM()),this.AM===t)return;this.AM=t,this.JDt();const s=this.l$();0!==this.AM&&s.c0(),s.p$(this)}JDt(){if(this.jDt(),this.r3()){const t=this.l5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.qU()&&i.JDt()}}}Ght(t){this.KM(this.XM()+t)}XM(){return this.qU()?this.bU().XM()+this.AM:this.AM}KH(){return this.l$().XM()+this.XM()}vit(){return this.Vz().SW().UMt()<2&&this.Vz().yq().vit()}Yg(t){if(t=+t,this.BU()){const s=this.jg();0===s?this.mDt=Number.EPSILON:this.mDt*=t/s}else this.mDt=t;this.YDt()}Ty(t,s){t=+t,s?this.mDt+=t:this.BU()?this.Yg(this.jg()+t):this.mDt+=t,this.YDt()}jg(){if(this.BU()){const t=this.bU(),s=t.jg();return t.uht().lht()===Number.EPSILON?(this.uht().lht()+s)*this.mDt:s*this.mDt}return this.mDt}Vg(t){if(t=+t,this.jU()){const s=this.Zg();0===s?this.gDt=Number.EPSILON:this.gDt*=t/s}else this.gDt=t;this.YDt()}pht(t,s){t=+t,s?this.gDt+=t:this.jU()?this.Vg(this.Zg()+t):this.gDt+=t,this.YDt()}Zg(){if(this.jU()){const t=this.bU(),s=t.Zg();return t.uht().fht()===Number.EPSILON?(this.uht().fht()+s)*this.gDt:s*this.gDt}return this.gDt}GR(t,s){if(t=+t,s=+s,this.BU()){const s=this.jg();0===s?this.mDt=Number.EPSILON:this.mDt*=t/s}else this.mDt=t;if(this.jU()){const t=this.Zg();0===t?this.gDt=Number.EPSILON:this.gDt*=s/t}else this.gDt=s;this.YDt()}Ou(){return[this.jg(),this.Zg()]}A2(){return this.zG}XDt(t){if(t<0)throw new RangeError("invalid depth");this.zG=t}KDt(){if(this.OU()){const t=this.ADt;return Math.min(t.WOt(),t.jOt())}return 1}QB(){return!!(128&this.dxt)}XW(t){t=+t,this.QB()&&(this.HU()&&(t-=this.bU().KW()),t=$M.Zn(t),this._o!==t&&(this._o=t,this.YDt()))}mht(t){0!=(t=+t)&&this.QB()&&(this._o=$M.Zn(this._o+t),this.YDt())}YDt(){if(this.dxt|=262144,this.r3()){const t=this.l5();for(let s=0,i=t.length;s<i;s++)t[s].YDt()}}KW(){return this.HU()&&this.QB()?this.HDt($M.Zn(this.bU().UDt()+this._o)):this._o}UDt(){return this.HU()&&this.QB()?$M.Zn(this.bU().UDt()+this._o):this._o}HDt(t){return this.BU()&&this.MU().jg()<0&&(t=$M.Zn($M.pr(t,this.MU().KW()+Math.PI))),this.jU()&&this.MU().Zg()<0&&(t=$M.pr(t,this.MU().KW())),t}ZDt(){const t=this.bU();return!!(this.BU()&&t.jg()<0)||!!(this.jU()&&t.Zg()<0)}QDt(){const t=this.bU();return!!(this.BU()&&t.jg()<0&&this.jU()&&t.Zg()<0)}tFt(){const t=this.dxt;if(!(262144&t))return;const s=this.KW();this.yDt=Math.sin(s),this.wDt=Math.cos(s),this.dxt=-262145&t}oGt(){return this.tFt(),this.yDt}hGt(){return this.tFt(),this.wDt}HH(t){this.SDt=+t}Mht(t){this.SDt+=+t}VH(){return this.SDt}zH(t){this.bDt=+t}xht(t){this.bDt+=+t}qH(){return this.bDt}NDt(t){this.PM.equals(t)||(this.PM===JM?(this.PM=$M.Un($M.Go,t),this._Dt=$M.Un($M.Go,t),this._Dt.Ko()):t.zo(1,1,1,1)?(this.PM=JM,this._Dt=JM):(this.PM.set(t),this._Dt.set(t),this._Dt.Ko()),this.jDt())}eO(t){if(t=$M.Kn(+t,0,1),this.JU()){if(this.uht().CGt()===t)return;this.uht().BOt(t),t=this.sO()}else if(this.PM.a===t)return;this.sFt(t)}iFt(){if(!this.r3())return;const t=this.l5();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.sFt(i.sO())}}sFt(t){qM.ko(this.PM),qM.a=t,this.NDt(qM),this.iFt()}wht(t){this.JU()?this.eO(this.uht().CGt()+t):this.eO(this.sO()+t)}sO(){return this.JU()?this.bU().sO()*this.uht().CGt():this.PM.a}oU(t){this.PM.Uo(t)||(qM.ko(t),qM.a=this.sO(),this.NDt(qM))}Krt(t,s,i){qM.Ro(t,s,i),this.oU(qM)}eFt(t,s,i){0===t&&0===s&&0===i||(qM.ko(this.PM),qM.r+=t,qM.g+=s,qM.b+=i,this.oU(qM))}hU(){return this.PM}AQ(){return this._Dt}ZU(){return!!(512&this.dxt)}nFt(t){this.rFt(512,t)}LU(){return!!(1024&this.dxt)}hFt(t){this.rFt(1024,t)}NU(){return!!(2048&this.dxt)}qDt(){return!!(3072&this.dxt)}oFt(t){this.rFt(2048,t)}BU(){return!!(4096&this.dxt)}aFt(t){this.rFt(4096,t)}jU(){return!!(8192&this.dxt)}lFt(t){this.rFt(8192,t)}HU(){return!!(16384&this.dxt)}uFt(t){this.rFt(16384,t)}qU(){return!!(32768&this.dxt)}cFt(t){this.rFt(32768,t)}JU(){return!!(4194304&this.dxt)}fFt(t){this.rFt(4194304,t)}XU(){return!!(8388608&this.dxt)}dFt(t){this.rFt(8388608,t)}pFt(){this.dxt&=-12647937}RU(t,s){if(t===this)return!1;if(t.OU())return!1;if(this.mFt(t))return!1;if(this.gFt(t))return!1;const i=t.UM(),e=t.JM(),n=t.jg(),r=t.Zg(),h=t.KW(),o=t.XM(),a=t.sO();t.yFt(this),t.hFt(s.FU),t.oFt(s.kU),t.aFt(s.$U),t.lFt(s.WU),t.uFt(s.VU),t.cFt(s.UU),t.fFt(s.zU),t.dFt(s.YU),t.nFt(s.KU);const l=i-this.UM(),u=e-this.JM(),c=-this.KW(),f=Math.cos(c),d=Math.sin(c);if(s.FU&&(s.VU?t.Ea=l*f-u*d:t.Ea=l,s.$U)){const s=this.jg()/this.ADt.lht();0!==s&&(t.Ea/=s)}if(s.kU&&(s.VU?t.Ra=l*d+u*f:t.Ra=u,s.WU)){const s=this.Zg()/this.ADt.fht();0!==s&&(t.Ra/=s)}if(s.$U){const s=this.jg();0===s||s===Number.EPSILON?(t.mDt=1,t.ADt.NOt(1)):(t.mDt=n/this.jg(),t.ADt.NOt(t.mDt))}if(s.WU){const s=this.Zg();0===s||s===Number.EPSILON?(t.gDt=1,t.ADt.$Ot(1)):(t.gDt=r/this.Zg(),t.ADt.$Ot(t.gDt))}return s.VU&&(t._o=h-this.KW()),s.UU&&(t.AM=o-this.XM()),s.zU&&t.ADt.BOt(a),s.YU&&t.Oj(this.Fj()),this.wFt(t),this.NH(),this.iFt(),!0}PU(t){if(t.bU()!==this)return;const s=t.UM(),i=t.JM(),e=t.jg(),n=t.Zg(),r=t.KW(),h=t.XM(),o=t.sO();t.yFt(null),t.pFt(),t.$H(s,i),t.GR(e,n),t.XW(r),t.KM(h),t.eO(o),this.SFt(t),this.NH()}bFt(){return this.ODt}vFt(){this.MFt();const t=[...this.children()];for(const s of t)this.PU(s);const s=this.bU();s&&s.PU(this),this.pFt()}MFt(){if(this.xFt(),!this.ROt){const t=[...this.children()];t.length&&(this.ROt=[],this.POt=new WeakMap);let s=0;for(const i of t){const t=i.Vz();this.ROt.push(t),this.POt.set(t,s),s++}}const t=this.bU();t&&t.MFt()}xFt(){if(-1!==this.ODt)return;const t=[...this.xU()];this.ODt=t.length;for(const s of t)s.xFt();const s=[...this.children()];for(const t of s)t.xFt()}kDt(){this.ROt&&(this.ROt.length=0),this.ROt=null,this.POt=null;const t=this.bU();t&&t.kDt(),this.ODt=-1}OU(){return null!==this.bU()}bU(){const t=this.ADt;return null!==t?t.bU():null}MU(){let t=this;for(;t.OU();)t=t.bU();return t}*xU(){let t=this.bU();for(;t;)yield t,t=t.bU()}XAt(t){return this.l5().includes(t)}r3(){const t=this.ADt;return null!==t&&t.r3()}l5(){const t=this.ADt;return null!==t?t.l5():ZM}children(){return this.l5()}*_U(){for(const t of this.children())yield t,yield*t._U()}TU(){return this.l5().length}eTt(){return[...this._U()].length}IU(t){const s=this.l5();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}tOt(t){if(!t)return NaN;const s=this.l5();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}GFt(t){this.ADt||(this.ADt=$M.Un($M.c5,this)),t&&this.ADt.FOt(t)}uht(){return this.ADt}LDt(){this.ADt&&(this.ADt.qn(),this.ADt=null)}yFt(t){t?(t.GFt(null),this.GFt(t)):(this.ADt&&this.ADt.FOt(null),this.r3()||this.LDt())}gFt(t){if(!this.OU())return!1;const s=this.bU();return s===t||s.gFt(t)}mFt(t){if(this.XAt(t))return!0;for(const s of this.l5())if(s.mFt(t))return!0;return!1}wFt(t){this.ADt.l5().push(t)}SFt(t){const s=this.ADt.l5(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.OU()||this.LDt(),t.r3()||t.LDt()}iOt(){const t=Ix.get(this);return t?t.BDt:null}TFt(){const t=Ix.get(this);return t?t.WDt:NaN}n3(){const t=_x.get(this);return $M.te(t)?t:NaN}CFt(t){_x.set(this,t)}IFt(){this.rFt(524288,!0),this.jDt()}jDt(){if(!QM)return;const t=this.Nc.pM();let s;this.EDt&&t.Pb(this.EDt),s=524288&this.dxt?t.cb()||"<point>":t.ab()||"<default>",this.EDt=t.Ib(s,this.cV(),this._Dt,this.XM())}W2(){return this.EDt}R0(){return this.PM===JM}DM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.cV()!==t&&(this.dxt=-2080374785&this.dxt|t<<26,this.jDt())}cV(){return(2080374784&this.dxt)>>26}d$(t,s){const i=s&&this.fDt!==t;i&&this.l0(),this.idt.tAt(this,this.fDt,t),this.fDt=t,i&&this._Ft(),0!==this.XM()&&this.fDt.c0()}l$(){return this.fDt}HN(){return this.l$().HN()}d0(t){this.dDt=0|t}u$(){return this.fDt.C1(),this.dDt}R1(t){this.pDt=0|t}IJ(){return this.fDt._1(),this.pDt}fZ(){return this.dDt}rFt(t,s){s?this.dxt|=t:this.dxt&=~t}Fj(){return!!(1&this.dxt)}Oj(t){if(this.rFt(1,t),this.r3())for(const s of this.l5())s.XU()&&s.Oj(t)}yU(){return!!(8&this.dxt)}wU(t){t=!!t,this.yU()!==t&&(this.rFt(8,t),t?this.NH():this.EFt())}RFt(t,s){if(this.rFt(32,t),this.IDt&&this.IDt.clear(),s.trim()){this.IDt||(this.IDt=new Set);for(const t of s.split(" "))t&&this.IDt.add(t.toLowerCase())}else this.IDt=null}PFt(t){const s=!!(32&this.dxt),i=this.IDt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}NH(){if(this.dxt|=65554,this.idt.KPt(!0),this.Nc.m$(),this.fDt.HQ()&&(this.QH(this.vDt,this.MDt,!0),this.dxt&=-3,this._Ft()),4&this.dxt&&this.di.wf().dispatchEvent(UM),null!==this.ADt){const t=this.ADt.l5();for(let s=0,i=t.length;s<i;++s)t[s].NH()}}QH(t,s,i){const e=this.UM(),n=this.JM(),r=this.jg(),h=this.Zg(),o=this.KW();t.Ha(e-this.SDt*r,n-this.bDt*h,r,h),i&&this.hq()&&this.AFt(t),0===o?s.Yl(t):(t.offset(-e,-n),s.Kl(t,this.oGt(),this.hGt()),s.offset(e,n),s.Zl(t)),t.normalize()}OFt(){const t=this.dxt;2&t&&(this.QH(this.vDt,this.MDt,!0),this.dxt=-3&t)}tU(){return this.OFt(),this.vDt}iU(){return this.OFt(),this.MDt}DFt(t){const s=this.UM(),i=this.JM(),e=Math.round(s)-s,n=Math.round(i)-i;return 0===e&&0===n?t:(HM.S(t),HM.offset(e,n),HM)}FFt(t){this.vDt.S(t),this.MDt.Yl(this.vDt),this.dxt&=-3,this.QPt(),this._Ft()}LFt(t){this.rFt(4,t)}kFt(){return!!(4&this.dxt)}I2(t,s,i){return s&&0!==this.A2()?this.R2(this.l$().E2()):0===this.XM()||i?t.Ml(this.tU()):this.NFt()}NFt(){const t=this.l$(),s=this.KH();return!(s>=t.J0())&&(t.q0(s,VM),VM.Ml(this.tU()))}R2(t){const s=this.tU(),i=s.Za(),e=s.tl(),n=s.Qa(),r=s.sl(),h=this.KH(),o=h+this.A2();return t.Yw(i,n,h,e,r,o)}nU(){const t=this.l$();if(t.o1())return this.R2(t.E2());{const s=t.HN();return this.I2(t.mV(),s.C2(),s.Gj())}}L2(t){this.rFt(1048576,t)}F2(t){this.rFt(2097152,t)}$Ft(){return!!(1048576&this.dxt)}BFt(){return!!(2097152&this.dxt)}WFt(t){this.TDt=t,this.jFt(),this.hq()&&(this.DDt.VFt=null)}HFt(){return this.TDt}UFt(){return null!==this.TDt||this.hq()}qFt(){return this.zFt(this.jg(),this.Zg(),this.KW(),this.oGt(),this.hGt())}JFt(t,s,i){let e=0,n=1;return 0!==i&&(e=Math.sin(i),n=Math.cos(i)),this.zFt(t,s,i,e,n)}zFt(t,s,i,e,n){let r=this.CDt;null===r&&(r={FDt:$M.Un($M.au),width:NaN,height:NaN,angle:NaN},this.CDt=r);const h=r.FDt;if(r.width===t&&r.height===s&&r.angle===i)return h;const o=this.TDt;if(this.hq()){const i=this.VH(),r=this.qH(),a=this.oq();let l=this.DDt.VFt;l||(o?(zM.S(o),zM.offset(i,r)):zM.gu(),l=a.jx(zM),this.DDt.VFt=l),a.Vx(l,h),h.offset(-i,-r),h.bu(t,s,e,n)}else o?(h.S(o),h.bu(t,s,e,n)):h.Su(this.iU(),-this.UM(),-this.JM());return r.width=t,r.height=s,r.angle=i,h}jFt(){this.YFt(!0);const t=this.CDt;null!==t&&(t.width=NaN)}tq(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Vz().SW().oW())throw new Error("object does not support mesh");this.iq(),this.DDt={XFt:$M.Un($M.kw.gx,t,s),KFt:$M.Un($M.kw.gx,t,s),VFt:null}}hq(){return null!==this.DDt}oq(){if(!this.hq())throw new Error("no mesh");return this.DDt.XFt}ZFt(){if(!this.hq())throw new Error("no mesh");return this.DDt.KFt}QFt(t){this.rFt(65536,t)}tLt(){return!!(65536&this.dxt)}YFt(t){this.rFt(131072,t)}sLt(){return!!(131072&this.dxt)}AFt(t){const s=this.DDt.XFt,i=Math.min(s.Ax(),0),e=Math.min(s.Ox(),0),n=Math.max(s.Dx(),1),r=Math.max(s.Fx(),1),h=t.width(),o=t.height();t.offsetLeft(i*h),t.offsetTop(e*o),t.al((n-1)*h),t.ll((r-1)*o),this.zG=s.Lx()}iq(){this.DDt&&(this.DDt.XFt.qn(),this.DDt.KFt.qn(),this.DDt=null,this.jFt())}nq(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!KM.has(e))throw new Error("invalid mode");const n="relative"===e;let r=i.x,h=i.y;const o=i.iV;let a="number"==typeof i.aq?i.aq:n?0:-1,l="number"==typeof i.lq?i.lq:n?0:-1;if(!this.hq())return!1;const u=this.oq(),c=u.Nx(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.XM()!==o&&(c.KM(o),f=!0),n&&(r+=t/(u.Ix()-1),h+=s/(u._x()-1)),-1!==a||n?(n&&(a+=t/(u.Ix()-1)),a=$M.Kn(a,0,1)):a=c.ZM(),-1!==l||n?(n&&(l+=s/(u._x()-1)),l=$M.Kn(l,0,1)):l=c.tx(),c.UM()===r&&c.JM()===h&&c.ZM()===a&&c.tx()===l?f:(c.qM(r),c.YM(h),c.QM(a),c.sx(l),this.jFt(),!0)}kAt(){return this.di.kAt()}SU(t,s){return!!this.tU().Gl(t,s)&&!!this.iU().Gl(t,s)&&(this.kAt()?this.di.yq().S_t(t,s):!this.UFt()||this.qFt().Gl(t-this.UM(),s-this.JM()))}iLt(){return!!(16&this.dxt)}QPt(){if(!this.iLt()||!this.yU()||256&this.dxt)return;const t=this.tU(),s=this.idt.XPt(),i=this.xDt;if(VM.set(s.EZ(t.Za()),s.RZ(t.Qa()),s.EZ(t.tl()),s.RZ(t.sl())),i.equals(VM))return;const e=this.di;i===XM?(s.PZ(e,null,VM),this.xDt=$M.Un($M.Rect,VM)):(s.PZ(e,i,VM),i.S(VM)),this.dxt&=-17}eLt(){this.dxt|=16}EFt(){const t=this.xDt;t!==XM&&(this.idt.XPt().PZ(this.di,t,null),this.xDt=XM)}_Ft(){const t=this.l$();if(!t.HQ()||256&this.dxt)return;const s=t.A0(),i=this.tU(),e=this.GDt;if(VM.set(s.EZ(i.Za()),s.RZ(i.Qa()),s.EZ(i.tl()),s.RZ(i.sl())),e.equals(VM))return;const n=this.di;e===YM?(s.PZ(n,null,VM),this.GDt=$M.Un($M.Rect,VM)):(s.PZ(n,e,VM),e.S(VM)),t.O0()}l0(){const t=this.GDt;t!==YM&&(this.l$().A0().PZ(this.di,t,null),this.GDt=YM)}I1(){return this.GDt}lU(){const t=this.di,s=this.fDt,i=s.f$();i.length&&i.at(-1)===t||(s.a0(t,!1),s.r0(t,!1),this.Nc.m$())}cU(){const t=this.di,s=this.fDt,i=s.f$();i.length&&i[0]===t||(s.a0(t,!1),s.o0(t,!1),this.Nc.m$())}dU(t){const s=this.di,i=this.fDt;if(i.HN()!==t.HN())throw new Error("layer from different layout");t!==i&&(i.a0(s,!0),this.d$(t),t.r0(s,!0),this.Nc.m$())}mU(t,s){const i=this.di;let e=!1;const n=this.fDt;if(t.BV()===i.BV())return;const r=t.a$();if(!r)throw new Error("expected world instance");const h=r.l$();n.ek()!==h.ek()&&(n.a0(i,!0),this.d$(h),h.r0(i,!0),e=!0);const o=h.O1(i,t,!!s);(e||o)&&this.Nc.m$()}LH(){return this.RDt}nLt(t){this.rFt(64,t)}j1(){return!!(64&this.dxt)}s3(t,s=null){const i={x:this.UM(),y:this.JM(),w:this.jg(),h:this.Zg(),l:this.l$().C0(),zi:this.u$()};0!==this.XM()&&(i.ze=this.XM()),0!==this.KW()&&(i.a=this.UDt()),this.R0()||(i.c=this.PM.toJSON()),.5!==this.VH()&&(i.oX=this.VH()),.5!==this.qH()&&(i.oY=this.qH()),0!==this.cV()&&(i.bm=this.cV()),this.Fj()||(i.v=this.Fj()),this.yU()||(i.ce=this.yU()),this.kFt()&&(i.be=this.kFt()),this.RDt&&(i.fx=this.RDt.s3());const e=!!(32&this.dxt);return e&&(i.sfi=e),this.IDt&&(i.sft=[...this.IDt].join(" ")),this.ADt&&"visual-state"!==t&&(i.sgi=this.ADt.s3(t,s),Ix.has(this)&&(i.sgcd=Ix.get(this).BDt,i.sgzid=Ix.get(this).WDt)),this.hq()&&(i.mesh=this.oq().hx()),i}YOt(){return{x:this.Ea,y:this.Ra,z:this.AM,w:this.mDt,h:this.gDt,a:this._o,sgi:this.uht()?this.uht().HOt():null}}tDt(t){t&&(this.Ea=t.x,this.Ra=t.y,this.AM=t.z,this.mDt=t.w,this.gDt=t.h,this._o=t.a,t.sgi&&this.uht()&&this.uht().i3(t.sgi),this.YDt(),this.NH())}lAt(){this.kDt(),this.vFt(),this.GFt(null),this.ADt&&this.ADt.KOt(this.ROt,this.POt)}p6(t){"visual-state"!==t&&this.vFt()}g6(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.dxt)return;this.ADt.g6(t.sgi,i)}}bOt(t,s="full",i=null){if("visual-state"!==s)if(256&this.dxt)this.kDt();else{if(t.hasOwnProperty("sgi"))this.ADt.KOt(null,null,t.sgi,i);else if(i?.HTt&&this.ROt)for(const t of this.ROt)t.OJ()||this.Nc.OV(t);this.kDt(),this.NH()}}i3(t,s,i=null){if(QM=!1,this.qM(t.x),this.YM(t.y),this.Yg(t.w),this.Vg(t.h),this.d0(t.zi),this.KM(t.hasOwnProperty("ze")?t.ze:0),this.XW(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?qM.wa(t.c):t.hasOwnProperty("o")?(qM.ko(this.PM),qM.a=t.o):qM.Eo(1,1,1,1),this.NDt(qM),this.HH(t.hasOwnProperty("oX")?t.oX:.5),this.zH(t.hasOwnProperty("oY")?t.oY:.5),this.DM(t.hasOwnProperty("bm")?t.bm:0),this.Oj(!t.hasOwnProperty("v")||t.v),this.wU(!t.hasOwnProperty("ce")||t.ce),this.LFt(!!t.hasOwnProperty("be")&&t.be),this.RFt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.RDt&&t.hasOwnProperty("fx")&&this.RDt.i3(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.GFt(null);const s=this.ADt,i=t.sgi;s.i3(i),s.KOt(this.ROt,this.POt),t.sgcd&&$M.te(t.sgzid)&&Ix.set(this,{BDt:t.sgcd,WDt:t.sgzid})}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.tq(s.cols,s.rows),this.oq().ox(s)}else this.iq();this.NH(),QM=!0,this.jDt(),"visual-state"!==s&&this.Nc.rLt(this.Vz(),t)}}}{const Ex=self.Is;Ex.WRt=class extends Ex.Vn{constructor(t,s){super();const i=t.L$(),e=i.dbt(s[1]);i.hLt().mEt(e),this.Nc=i,this.idt=t,this.z_t=Ex.VB.Aq(e),this.AIt=null,this.oLt=null,this.wRt=e.Instance,this.JZ=s[2],this.Yn=s[0],this.Kbt=this.Nc.Pmt(s[3]);const n=this.z_t.UMt();if(n<2&&(this.AIt=Ex.Un(e.nPt,this),!(this.AIt instanceof Ex.q_t)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(Ex.VB.pIt(this,n),n>=2){const t=e.nPt??globalThis.UJ;if(this.oLt=new t,!(this.oLt instanceof globalThis.UJ))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.oLt=new globalThis.Rq;Ex.VB.mIt(n),this.uIt()}static AT(t,s){return Ex.Un(Ex.WRt,t,s)}qn(){this.Nc=null,this.z_t=null,this.AIt&&(this.AIt.qn(),this.AIt=null),this.wRt=null}jxt(){return this.AIt}uIt(){this.AIt?this.AIt.uIt():this.oLt&&this.oLt.hJ()}L$(){return this.Nc}IV(){return this.idt}Gq(){return this.z_t}CPt(){return this.wRt}Ec(){return this.Yn}C0(){return this.JZ}Cq(){return this.oLt}Pmt(){return this.Kbt}}}{const Rx=self.Is,Px=self.Mq;Rx.MAt=class extends Rx.Vn{constructor(t){super(),this.Nc=t.runtime,this.Evt=t.Tq,this.z_t=this.Evt.Gq(),this.di=t._q,this.Rw=t.index,this.pAt=null,this.mAt=null,this.z_t.r0(this.di)}qn(){this.mAt&&(this.mAt.AV(),this.mAt=null),this.z_t.a0(this.di),this.pAt&&(this.pAt.qn(),this.pAt=null),this.Nc=null,this.Evt=null,this.z_t=null,this.di=null}vPt(t){if(this.pAt)throw new Error("already got sdk instance");if(this.Gq().UMt()<2){if(this.pAt=Rx.Un(this.Evt.CPt(),this,t),!(this.pAt instanceof Rx.J_t))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.Gq().cIt();this.dIt(s.Instance,t)}}yq(){return this.pAt??this.mAt}Eq(){return this.di}L$(){return this.Nc}Iq(){return this.Evt}Gq(){return this.z_t}krt(){return this.Rw}Z_t(){this.pAt?this.pAt.Z_t():this.mAt.JJ()}iEt(t,s){this.pAt&&this.pAt.iEt(t,s)}SOt(){return this.pAt?this.pAt.QIt():this.mAt.GH()}hx(t="full"){return this.pAt?this.pAt.hx(t):this.mAt.TH(t)}ox(t,s="full"){if(this.pAt)return this.pAt.ox(t,s);this.mAt.CH(t,s)}static aLt(t,s,i){const e=globalThis.qJ;let n,r;n=s instanceof e?t.uj(s):s.K_t(),r=i instanceof e?t.uj(i):i.K_t();const h=n.Eq(),o=r.Eq(),a=h.IV().ek(),l=o.IV().ek();if(a!==l)return a-l;const u=h.oOt(),c=o.oOt();return u!==c?u-c:n.krt()-r.krt()}dIt(t,s){const i=Px,e=t??this.pAt.cIt(),n=e||i,r=this.Gq().UMt();if(Rx.VB.pIt(this,r),Rx.VB.gEt(s),this.mAt=new n,Rx.VB.yEt(),Rx.VB.mIt(r),e&&!(this.mAt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.mAt}FIt(){return this.mAt||this.dIt()}e_t(){return!!this.mAt}}}{const Ax=self.Is;Ax.RQ=class extends Ax.Vn{constructor(t,s){super(),this.Sx=t,this.lLt=[],this.uLt=[],this.cLt=new Map,this.fLt=[],this.dLt=[],this.pLt=new Set,this.eM=!0;for(const t of s){const s=Ax.Un(Ax.mLt,this,t,this.lLt.length);this.lLt.push(s),this.cLt.set(s.Ec().toLowerCase(),s),t.length>=3&&this.fLt.push(this.gLt(s,t[2]))}this.L$().yLt(this)}qn(){this.L$().wLt(this);for(const t of this.dLt)t.qn();Ax.bh(this.dLt),Ax.bh(this.lLt),Ax.bh(this.uLt),this.cLt.clear(),Ax.bh(this.fLt),this.Sx=null}SLt(t){this.pLt.add(t)}bLt(t){this.pLt.delete(t)}vLt(t){t.sb()&&(this.dLt=this.lLt.map((t=>{const s=t.PC();return s.MLt()>0?Ax.Un(Ax.kw.xLt,s):null})),this.GLt());for(const s of this.pLt)s.vLt(t)}SPt(t){if(t.length){this.lLt=t.concat(this.lLt);for(const s of t)this.cLt.set(s.Ec().toLowerCase(),s);for(let t=0,s=this.lLt.length;t<s;++t)this.lLt[t].v0(t)}}gLt(t,s){t.TLt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Ax.Un(Ax.Go);e.wa(s),i[t]=e}}return i}Ex(){return this.Sx}L$(){return this.Sx.L$()}Fq(){Ax.bh(this.uLt);let t=!0;for(const s of this.lLt)s.Qyt()&&(this.uLt.push(s),s.PC().bM()||(t=!1));this.eM=t}UW(){return this.lLt}DPt(){return this.lLt.length>0}Bnt(t){return this.cLt.get(t.toLowerCase())||null}CLt(t){if((t=Math.floor(+t))<0||t>=this.lLt.length)throw new RangeError("invalid effect type index");return this.lLt[t]}Oq(t){return this.CLt(t).Qyt()}Dq(t,s){this.CLt(t).TLt(s)}P0(){return this.uLt}j1(){return this.uLt.length>0}bM(){return this.eM}$nt(t){return this.fLt[t]}DQ(t){return t<this.dLt.length?this.dLt[t]:this.fLt[t]}Lq(t,s){if(t<0||t>=this.fLt.length)return null;const i=this.fLt[t];return s<0||s>=i.length?null:i[s]}kq(t,s,i){if(t<0||t>=this.fLt.length)return!1;const e=this.fLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Ax.Go){if(n.Uo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.dLt.length&&this.dLt[t].ILt(s,i),!0}GLt(){const t=this.fLt,s=this.dLt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.ILt(t,n[t])}}static _Lt(t){return t&&t instanceof Ax.Go?{t:"color",v:t.toJSON()}:t}static ELt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=Ax.Un(Ax.Go);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static RLt(t){return t.map(Ax.RQ._Lt)}static PLt(t){return t.map(Ax.RQ.ELt)}hx(){return this.lLt.map((t=>({name:t.Ec(),active:t.Qyt(),params:Ax.RQ.RLt(this.fLt[t.ek()])})))}ox(t){for(const s of t){const t=this.Bnt(s.name);t&&(t.TLt(s.active),this.fLt[t.ek()]=Ax.RQ.PLt(s.params))}this.Fq(),this.GLt()}}}{const Ox=self.Is;Ox.mLt=class extends Ox.Vn{constructor(t,s,i){super(),this.EQ=t,this.Bc=s[0],this.Yn=s[1],this.Rw=i,this._M=null,this.Nf=!0}qn(){this.EQ=null,this._M=null}wPt(t){const s=Ox.Un(Ox.mLt,t,[this.Bc,this.Yn],-1);return s._M=this._M,s.Nf=this.Nf,s}vLt(t){const s=t.ob(this.Bc);if(!s)throw new Error("failed to find shader program '"+this.Bc+"'");this._M=s}HW(){return this.EQ}Ec(){return this.Yn}v0(t){this.Rw=t}ek(){return this.Rw}Ex(){return this.EQ.Ex()}L$(){return this.EQ.L$()}TLt(t){this.Nf=!!t}Qyt(){return this.Nf}PC(){return this._M}ALt(){const t=[];for(let s=0,i=this._M.AC();s<i;++s){const i=this._M.OC(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(Ox.Un(Ox.Go,1,1,1,1))}}return t}}}{const Dx=self.Is;Dx.PDt=class extends Dx.Vn{constructor(t,s){super(),this.di=t,this.OLt=s,this.EQ=t.IV().HW(),this.DLt=!0,this.LQ=!0,this.FLt=!1,this.LLt=!1,this.kLt=!1,this.NLt=!1,this.QL=Dx.Un(Dx.kw.VD,t.L$().x$().PQ(),{AD:(t,s)=>{const i=s.UL(),e=i.a$();t.FM(e.AQ()),t.Ub(e.KH()),i.Bx(t),t.Ub(0)},OD:t=>{const s=t.p_t(),[i,e]=t.d_t();return{kL:s,NL:i,$L:e}},DD:t=>this.DQ(t)}),this.$Lt=[],this.uLt=[],this.eM=!0,this.fLt=[],this.dLt=[],this.vLt(t.L$().pM());for(let t=0,s=this.EQ.UW().length;t<s;++t)this.$Lt.push(!0);this.Fq(),this.EQ.SLt(this)}qn(){this.EQ.bLt(this);for(const t of this.dLt)t&&t.qn();Dx.bh(this.dLt),this.QL.qn(),this.QL=null,Dx.bh(this.$Lt),Dx.bh(this.uLt),Dx.bh(this.fLt),this.di=null,this.EQ=null}vLt(t){t.sb()&&(this.dLt=this.EQ.UW().map((t=>{const s=t.PC();return s.MLt()>0?Dx.Un(Dx.kw.xLt,s):null})))}$Dt(t){let s=0;for(const i of t)this.fLt.push(this.gLt(s,i)),++s;this.GLt(),this.Fq()}gLt(t,s){this.$Lt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=Dx.Un(Dx.Go);e.wa(s),i[t]=e}}return i}EAt(){for(const t of this.EQ.UW())this.fLt.push(t.ALt());this.GLt()}Ex(){return this.Sx}HW(){return this.EQ}ik(){return this.E0(),this.QL}L$(){return this.di.L$()}Fq(){Dx.bh(this.uLt);const t=this.OLt,s=this.EQ.UW(),i=this.uLt,e=this.$Lt;let n=!0;for(let t=0,r=s.length;t<r;++t)if(e[t]){const e=s[t];i.push(e),e.PC().bM()||(n=!1)}this.eM=n,t.nLt(!!i.length),this.DLt=!0}E0(){const t=this.di,s=this.OLt,i=s.R0(),e=t.SW().eW(),n=0!==s.KW()||0!==s.l$().KW()||s.jg()<0||s.Zg()<0,r=t.y_t(),h=t.SM();(this.DLt||i!==this.LQ||e!==this.FLt||n!==this.LLt||r!==this.kLt||h!==this.NLt||this.QL.FF())&&(this.QL.LF(this.uLt.map((t=>t.PC())),{LD:this.uLt.map((t=>t.ek())),kD:!i||h,$D:e,BD:r,WD:n}),this.DLt=!1,this.LQ=i,this.FLt=e,this.LLt=n,this.kLt=r,this.NLt=h)}P0(){return this.uLt}$nt(t){return this.fLt[t]}DQ(t){return t<this.dLt.length?this.dLt[t]:this.fLt[t]}Lq(t,s){if(t<0||t>=this.fLt.length)return null;const i=this.fLt[t];return s<0||s>=i.length?null:i[s]}kq(t,s,i){if(t<0||t>=this.fLt.length)return!1;const e=this.fLt[t];if(s<0||s>=e.length)return!1;const n=e[s];if(n instanceof Dx.Go){if(n.Uo(i))return!1;n.ko(i)}else{if(n===i)return!1;e[s]=i}return t<this.dLt.length&&this.dLt[t].ILt(s,i),!0}GLt(){const t=this.fLt,s=this.dLt;for(let i=0,e=s.length;i<e;++i){const e=s[i],n=t[i];for(let t=0,s=n.length;t<s;++t)e.ILt(t,n[t])}}bM(){return this.eM}BLt(){return this.uLt.some((t=>t.PC().xM()))}Oq(t){return this.$Lt[t]}Dq(t,s){this.$Lt[t]=!!s}UW(){return this.EQ.UW()}s3(){return this.EQ.UW().map((t=>({name:t.Ec(),active:this.$Lt[t.ek()],params:Dx.RQ.RLt(this.fLt[t.ek()])})))}i3(t){for(const s of t){const t=this.EQ.Bnt(s.name);t&&(this.$Lt[t.ek()]=s.active,this.fLt[t.ek()]=Dx.RQ.PLt(s.params))}this.Fq(),this.GLt()}}}{const Fx=self.Is,Lx=[],kx=[],Nx=[],$x=Fx.Un(Fx.au),Bx=Fx.Un(Fx.au),Wx=Fx.Un(Fx._l),jx=Fx.Un(Fx.Rect),Vx=Fx.Un(Fx.Rect);let Hx=null,Ux=null,qx=null;Fx.WLt=class extends Fx.Vn{constructor(t){super(),this.Nc=t,this.jLt=0,this.VLt=0,this.HLt=[],this.ULt=0,this.qLt=0,this.zLt=0,this.JLt=0,this.YLt=new self.sB(this)}qn(){this.Nc=null}L$(){return this.Nc}ck(){return this.YLt}XLt(){this.qLt=this.ULt,this.ULt=0,this.JLt=this.zLt,this.zLt=0}KLt(){return this.qLt}ZLt(){return this.JLt}QLt(t,s){const i=t.a$(),e=s.a$();i&&e&&i.yU()&&e.yU()&&this.HLt.push([t,s])}HGt(t,s,i){for(const[e,n]of this.HLt){let r=null;if(t===e)r=n;else{if(t!==n)continue;r=e}r.QGt(s)&&(i.includes(r)||i.push(r))}}UGt(t,s){if(!this.HLt.length)return!1;for(const[i,e]of this.HLt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}tkt(){Fx.bh(this.HLt)}eB(t,s){if(!t||!s||t===s)return!1;const i=t.a$(),e=s.a$();if(!i.yU()||!e.yU())return!1;this.ULt++;const n=i.l$(),r=e.l$();return n.v1(r)?this.skt(i,e):this.ikt(i,e)}skt(t,s){if(!t.tU().Ml(s.tU()))return!1;if(this.zLt++,!t.iU().tu(s.iU()))return!1;if(t.kAt()&&s.kAt())return!1;if(t.kAt())return this.ekt(t,s);if(s.kAt())return this.ekt(s,t);if(!t.UFt()&&!s.UFt())return!0;const i=t.qFt(),e=s.qFt();return i.vu(e,s.UM()-t.UM(),s.JM()-t.JM())}ikt(t,s){const i=t.kAt(),e=s.kAt();if(i&&!e)return this.nkt(t,s);if(e&&!i)return this.nkt(s,t);if(e||i)return!1;{const i=t.l$(),e=s.l$();$x.S(t.qFt()),Bx.S(s.qFt());const n=$x.du();for(let s=0,e=n.length;s<e;s+=2){const e=s+1,r=n[s],h=n[e],[o,a]=i.SV(r+t.UM(),h+t.JM());n[s]=o,n[e]=a}const r=Bx.du();for(let t=0,i=r.length;t<i;t+=2){const i=t+1,n=r[t],h=r[i],[o,a]=e.SV(n+s.UM(),h+s.JM());r[t]=o,r[i]=a}return $x.yu(),Bx.yu(),this.zLt++,$x.vu(Bx,0,0)}}nkt(t,s){const i=t.l$(),e=s.l$();Hx||(Hx=Fx.Un(Fx.au)),Ux||(Ux=Fx.Un(Fx.Rect)),qx||(qx=Fx.Un(Fx._l));const n=s.UM(),r=s.JM(),[h,o]=e.SV(n,r),[a,l]=i.yV(h,o),u=a-n,c=l-r;if(Ux.S(s.tU()),Ux.offset(u,c),!t.tU().Ml(Ux))return!1;if(qx.S(s.iU()),qx.offset(u,c),this.zLt++,!t.iU().tu(qx))return!1;Hx.S(s.qFt());const f=Hx.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return Hx.yu(),this.ekt(t,s,a,l,Hx,Ux,qx)}ekt(t,s,i,e,n,r,h){const o=void 0!==r?r:s.tU(),a=t.UM(),l=t.JM(),u=t.Vz().yq(),c=void 0!==i?i:s.UM(),f=void 0!==e?e:s.JM(),d=s.UFt(),p=void 0!==h?h:s.iU(),m=kx;u.rkt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.hkt();if(this.ULt++,o.xl(e,a,l)&&(Wx.Yl(e),Wx.offset(a,l),Wx.tu(p)))if(d){const t=void 0!==n?n:s.qFt();let r=c,h=f;void 0!==n&&(r=s.UM(),h=s.JM());const o=i.okt();if(o){if(this.zLt++,o.vu(t,r-(a+e.Za()),h-(l+e.Qa())))return Fx.bh(m),!0}else if($x.Su(Wx,0,0),$x.vu(t,r,h))return Fx.bh(m),!0}else{const t=i.okt();if(!t)return Fx.bh(m),!0;if($x.Su(p,0,0),t.vu($x,-(a+e.Za()),-(l+e.Qa())))return Fx.bh(m),!0}}return Fx.bh(m),!1}akt(t,s,i){const e=t.AW(),n=this.Nc.Uk();if(!n)throw new Error("cannot call outside event");const r=n.Pdt(),h=new Fx.lkt;if(e.pdt()){i||(e.vdt(!1),Fx.bh(e.Mdt())),r&&Fx.bh(e.xdt());for(const n of t.PW()){const t=n.a$(),o=t.l$();let a=!1;if(h.kj(o)&&t.nU()&&(a=s.some((([s,i])=>{const[e,n]=h.yV(o,s,i,t.KH());return t.SU(e,n)}))),a){if(i)return!1;e.Sdt(n)}else r&&e.bdt(n)}}else{let t,o=!1;r&&!n.xSt(this.Nc.Mmt())?this.Nc.zxt()&&!e.xdt().length&&e.Mdt().length?t=e.Mdt():(t=e.xdt(),o=!0):t=e.Mdt();let a=0;for(let n=0,l=t.length;n<l;++n){const l=t[n],u=l.a$(),c=u.l$();let f=!1;if(h.kj(c)&&u.nU()&&(f=s.some((([t,s])=>{const[i,e]=h.yV(c,t,s,u.KH());return u.SU(i,e)}))),f){if(i)return!1;o?e.Sdt(l):t[a++]=l}else o?t[a++]=l:r&&e.bdt(l)}i||(t.length=a)}return t.nbt(),h.qn(),!!i||e.mdt()}ukt(t,s){if(!t)return!0;for(const i of s.sAt())if(!t.v1(i))return!1;return!0}qxt(t,s,i,e){if(s.w0())for(const n of s.Xwt())this.ukt(t,n)?(n.ZPt(),n.XPt().AZ(i,e)):Fx.On(e,n.PW());else this.ukt(t,s)?(s.ZPt(),s.XPt().AZ(i,e)):Fx.On(e,s.PW())}dB(t,s,i,e){for(const n of s)this.qxt(t,n,i,e)}ckt(t,s,i){const e=this.Nc.SEt();e&&this.dB(t,e.B6(),s,i)}fkt(t,s,i){const e=this.Nc.bEt();e&&this.dB(t,e.B6(),s,i)}PFt(t,s){return t.BAt()&&(!s||s.a$().PFt(t.KMt().get("solidTags")))}hB(t){const s=t.a$();this.ckt(s.l$(),s.tU(),Lx);for(const s of Lx)if(this.PFt(s,t)&&this.eB(t,s))return Fx.bh(Lx),s;return Fx.bh(Lx),null}dkt(t,s){this.ckt(null,t,Lx);for(const i of Lx)if(this.PFt(i,s)&&this.pkt(t,i))return Fx.bh(Lx),i;return Fx.bh(Lx),null}mkt(t,s){let i=null;s&&(i=Nx,Fx.bh(i));const e=t.a$();this.fkt(e.l$(),e.tU(),Lx);for(const e of Lx)if(e.jAt()&&this.eB(t,e)){if(!s)return Fx.bh(Lx),e;i.push(e)}return Fx.bh(Lx),i}gkt(t,s,i,e,n){e=e||50;const r=t.a$(),h=r.UM(),o=r.JM();for(let a=0;a<e;++a)if(r.$H(h+s*a,o+i*a),r.NH(),!this.eB(t,n))return!0;return r.$H(h,o),r.NH(),!1}ykt(t,s,i,e,n,r){e=e||50;const h=t.a$(),o=h.UM(),a=h.JM();let l=null,u=null;for(let c=0;c<e;++c)if(h.$H(o+s*c,a+i*c),h.NH(),!this.eB(t,l))if(l=this.hB(t),l)u=l;else if(n&&(l=r?this.eB(t,r)?r:null:this.mkt(t),l&&(u=l)),!l)return u&&this.wkt(t,s,i,u,16,!0),!0;return h.$H(o,a),h.NH(),!1}Skt(t,s,i,e){e=e||50;const n=t.a$(),r=n.UM(),h=n.JM();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(n.$H(r+s*l*u,h+i*l*u),n.NH(),!this.eB(t,o)){if(o=this.hB(t),!o)return a&&this.wkt(t,s*u,i*u,a,16,!0),!0;a=o}}return n.$H(r,h),n.NH(),!1}wkt(t,s,i,e,n,r){let h=2,o=!1,a=!1;const l=t.a$();let u=l.UM(),c=l.JM();for(;h<=n;){const n=1/h;h*=2,l.WH(s*n*(o?1:-1),i*n*(o?1:-1)),l.NH(),this.eB(t,e)||r&&this.hB(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.UM(),c=l.JM())}a&&(l.$H(u,c),l.NH())}bkt(t,s=100){let i=0;const e=t.a$(),n=e.UM(),r=e.JM();let h=0,o=this.hB(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(h){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(h=(h+1)%8,e.$H(Math.floor(n+s*i),Math.floor(r+a*i)),e.NH(),!this.eB(t,o)&&(o=this.hB(t),!o))return!0}return e.$H(n,r),e.NH(),!1}vkt(t,s,i,e){const n=t.a$(),r=n.UM(),h=n.JM(),o=Math.max(10,Fx.er(s,i,r,h)),a=Fx.rr(s,i,r,h),l=e||this.hB(t);if(!l)return Fx.Zn(a+Math.PI);let u=l,c=0,f=0;const d=Fx.Qn(5);let p;for(p=1;p<36;++p){const r=a-p*d;if(n.$H(s+Math.cos(r)*o,i+Math.sin(r)*o),n.NH(),!this.eB(t,u)&&(u=e?null:this.hB(t),!u)){c=r;break}}for(36===p&&(c=Fx.Zn(a+Math.PI)),u=l,p=1;p<36;++p){const r=a+p*d;if(n.$H(s+Math.cos(r)*o,i+Math.sin(r)*o),n.NH(),!this.eB(t,u)&&(u=e?null:this.hB(t),!u)){f=r;break}}if(36===p&&(f=Fx.Zn(a+Math.PI)),n.$H(r,h),n.NH(),f===c)return f;const m=Fx.hr(f,c)/2;let g;g=Fx.lr(f,c)?Fx.Zn(c+m+Math.PI):Fx.Zn(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return Fx.rr(0,0,M,x)}Mkt(t,s,i,e,n){if(!n)return!1;const r=n.a$();return!!r.yU()&&(this.ULt++,jx.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!r.tU().Ml(jx)&&(n.kAt()?this.xkt(t,s,i,e,n,r):(this.zLt++,!!r.iU().Ql(t,s,i,e)&&(!r.UFt()||r.qFt().Ql(r.UM(),r.JM(),t,s,i,e)))))}xkt(t,s,i,e,n,r){const h=r.UM(),o=r.JM(),a=n.yq(),l=kx;Vx.set(t,s,i,e),Vx.normalize(),a.rkt(Vx,l);for(let n=0,r=l.length;n<r;++n){const r=l[n],a=r.hkt();if(this.ULt++,jx.xl(a,h,o)&&(Wx.Yl(a),Wx.offset(h,o),Wx.Ql(t,s,i,e))){const n=r.okt();if(!n)return Fx.bh(l),!0;if(this.zLt++,n.Ql(h+a.Za(),o+a.Qa(),t,s,i,e))return Fx.bh(l),!0}}return Fx.bh(l),!1}pkt(t,s){if(!s)return!1;const i=s.a$();if(!i.yU())return!1;if(this.ULt++,!i.tU().Ml(t))return!1;if(s.kAt())return this.Gkt(t,s,i);if(this.zLt++,Wx.Yl(t),!i.iU().tu(Wx))return!1;if(!i.UFt())return!0;const e=$x;e.Yl(t,i.UM(),i.JM());const n=i.qFt();return e.vu(n,0,0)}Gkt(t,s,i){const e=i.UM(),n=i.JM(),r=s.yq(),h=kx;r.rkt(t,h);for(let s=0,i=h.length;s<i;++s){const i=h[s],r=i.hkt();if(this.ULt++,t.xl(r,e,n)){const s=i.okt();if(!s)return Fx.bh(h),!0;if(this.zLt++,$x.Yl(t,0,0),s.vu($x,-(e+r.Za()),-(n+r.Qa())))return Fx.bh(h),!0}}return Fx.bh(h),!1}Tkt(t,s){if(!t)return;const i=t.a$();i.yU()&&(this.ULt++,i.tU().Ml(s.rect)&&(t.kAt()?this.Ckt(t,i,s):(this.zLt++,i.UFt()?s.Ikt(t,i.UM(),i.JM(),i.qFt()):s._kt(t,i.iU()))))}Ckt(t,s,i){const e=s.UM(),n=s.JM(),r=kx;t.yq().rkt(i.rect,r);for(let h=0,o=r.length;h<o;h++){const o=r[h],a=o.hkt();if(this.ULt++,i.rect.xl(a,e,n)){const r=o.okt();this.zLt++,r?i.Ikt(t,e+a.Za(),n+a.Qa(),r):i.Ekt(t,s.UM(),s.JM(),a)}}Fx.bh(r)}aB(t,s){if(t===this.jLt&&s===this.VLt)return;this.jLt=t,this.VLt=s;const i=this.Nc.y0();for(const e of i)if(e.YB()){for(const t of e.RW())t.a$().EFt();e.XPt().Rkt(t,s),e.KPt();for(const t of e.RW()){const s=t.a$();s.eLt(),s.QPt()}}}uB(){return[this.jLt,this.VLt]}Pkt(t,s){this.jLt=t,this.VLt=s}}}{const zx=self.Is;zx._Rt=class extends zx.Vn{constructor(t,s){super(),this.TZ=t,this.CZ=s,this.IZ=zx.Un(zx.Iu)}qn(){this.IZ.qn(),this.IZ=null}Rkt(t,s){if(!this.IZ.Ru())throw new Error("grid not empty");this.TZ=t,this.CZ=s}_Z(t,s,i){let e=this.IZ.qs(t,s);return e||(i?(e=zx.Un(zx.Akt,this,t,s),this.IZ.Set(t,s,e),e):null)}EZ(t){const s=Math.floor(t/this.TZ);return isFinite(s)?s:0}RZ(t){const s=Math.floor(t/this.CZ);return isFinite(s)?s:0}PZ(t,s,i){if(s)for(let e=s.Za(),n=s.tl();e<=n;++e)for(let n=s.Qa(),r=s.sl();n<=r;++n){if(i&&i.Gl(e,n))continue;const s=this._Z(e,n,!1);s&&(s.Kf(t),s.Ru()&&this.IZ.Pu(e,n))}if(i)for(let e=i.Za(),n=i.tl();e<=n;++e)for(let n=i.Qa(),r=i.sl();n<=r;++n)s&&s.Gl(e,n)||this._Z(e,n,!0).vZ(t)}AZ(t,s){let i=this.EZ(t.Za());const e=this.RZ(t.Qa()),n=this.EZ(t.tl()),r=this.RZ(t.sl());if(isFinite(n)&&isFinite(r))for(;i<=n;++i)for(let t=e;t<=r;++t){const e=this._Z(i,t,!1);e&&e.xZ(s)}}}}{const Jx=self.Is;Jx.Akt=class extends Jx.Vn{constructor(t,s,i){super(),this.pZ=t,this.Ea=s,this.Ra=i,this.mZ=Jx.Un(Jx.Fu)}qn(){this.mZ.qn(),this.mZ=null,this.pZ=null}Ru(){return this.mZ.Ru()}vZ(t){this.mZ.$u(t)}Kf(t){this.mZ.Pu(t)}xZ(t){Jx.On(t,this.mZ.Bu())}}}{const Yx=self.Is,Xx=1e-6,Kx=2;Yx.Okt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Yx.Rect,this.Dkt=2,this.Fkt=null,this.Lkt=0,this.kkt=0,this.Nkt=0,this.$kt=0,this.Bkt=0,this.vt=0,this.Wkt=1,this.jkt=0,this.Vkt=1,this.Hkt=0}Ukt(){return this.Dkt<1.000001}$f(){this.Dkt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.Dkt=2,this.Fkt=null,this.Lkt=0,this.kkt=0,this.Nkt=0,this.$kt=0,this.Bkt=0,this.vt=0,this.Wkt=1,this.jkt=0,this.Vkt=1,this.Hkt=0,this}qkt(){if(!1===this.Ukt())return;const t=this.dx*this.Dkt,s=this.dy*this.Dkt,i=Yx.sr(t,s),e=t/i,n=s/i;this.vt=i-Xx,this.$kt=this.x1+e*this.vt,this.Bkt=this.y1+n*this.vt,this.Lkt=Math.atan2(this.Nkt,this.kkt)+Math.PI/2,this.Wkt=Math.cos(this.Lkt),this.jkt=Math.sin(this.Lkt);const r=e*this.Wkt+n*this.jkt;if(this.Vkt=e-2*this.Wkt*r,this.Hkt=n-2*this.jkt*r,r>0){const t=Math.PI;this.Lkt=Yx.Zn(this.Lkt+t),this.Wkt=-this.Wkt,this.jkt=-this.jkt}}zkt(t,s,i,e,n){const r=Yx.Jr(this.x1,this.y1,this.x2,this.y2,s,i,e,n);r>=0&&r<this.Dkt&&(this.Dkt=r,this.Fkt=t.BV(),this.kkt=s-e,this.Nkt=i-n)}Ekt(t,s,i,e){const n=s+e.Za(),r=s+e.tl(),h=i+e.Qa(),o=i+e.sl();this.zkt(t,n,h,r,h),this.zkt(t,r,h,r,o),this.zkt(t,r,o,n,o),this.zkt(t,n,o,n,h)}_kt(t,s){const i=s.$r(),e=s.Br(),n=s.Wr(),r=s.jr(),h=s.Vr(),o=s.Hr(),a=s.Ur(),l=s.qr();this.zkt(t,i,e,n,r),this.zkt(t,n,r,h,o),this.zkt(t,h,o,a,l),this.zkt(t,a,l,i,e)}Ikt(t,s,i,e){const n=e.du();for(let e=0,r=n.length;e<r;e+=2){const h=(e+2)%r,o=n[e]+s,a=n[e+1]+i,l=n[h]+s,u=n[h+1]+i;this.zkt(t,o,a,l,u)}}}}{const Zx=self.Is;Zx.lkt=class{constructor(){this.Jkt=new Map}qn(){for(const t of this.Jkt.values())t.Ykt.Eu();this.Jkt.clear()}Xkt(t){let s=this.Jkt.get(t);return void 0===s&&(s={Lj:null,Ykt:new Zx.Iu},this.Jkt.set(t,s)),s}kj(t){const s=this.Xkt(t);return null===s.Lj&&(s.Lj=t.Vj()),s.Lj}yV(t,s,i,e){if(0!==e)return t.yV(s,i,e);const n=this.Xkt(t);let r=n.Ykt.qs(s,i);return void 0===r&&(r=t.yV(s,i,e),n.Ykt.Set(s,i,r)),r}}}{const Qx=self.Is,tG=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),sG=new Set(["high","low"]),iG=self.ls,eG=iG.ds,nG=iG.ws,rG=eG.create(),hG=300,oG=200,aG=120,lG=8,uG=Qx.Un(Qx._l),cG=Qx.Un(Qx.Rect),fG=3e3,dG=200,pG=300;Qx.Kkt=class extends Qx.Vn{constructor(t){super(),this.Nc=t,this.Zkt=[],this.Qkt=!1,this.tNt=null,this.sNt=null,this.iNt=null,this.eNt="high-performance",this.nNt=!1,this.rNt="auto",this.hNt=0,this.oNt=0,this.aNt="",this.lNt=0,this.uNt=0,this.cNt=0,this.fNt=0,this.dNt=0,this.pNt=0,this.nS="normalized",this.mNt=0,this.gNt=1,this.yNt=1e4,this.DS=!0,this.wNt=0,this.pF=0,this.mF=0,this.SNt="letterbox-scale",this.bNt="letterbox-scale",this.vNt=0,this.MNt=0,this.xNt=eG.create(),this.GNt="high",this.TNt=this.GNt,this.CNt=!1,this.INt=[],this._Nt=new Set,this.ENt=self.C3_Shaders,this.RNt=Qx.Un(Qx.kw.wD,{pD:()=>[this.n2(),this.h2()],mD:()=>this.PNt(),gD:t=>this.ANt(t),getTime:()=>this.L$().fN(),yD:()=>this.L$().m$()}),this.ONt=0,this.DNt=0,this.FNt=NaN,this.LNt=null,this.kNt=new Map,this.NNt=NaN,this.$Nt=new Map,this.BNt="",this.WNt=1,this.jNt=Qx.Un(Qx.Rect),this.VNt="",this.HNt=null,this.UNt=null,this.qNt=0,this.zNt=0,this.JNt=-1,this.YNt=0,this.XNt=t=>this.YNt=t.progress,this.KNt=null,this.ZNt={QNt:null,t$t:null,s$t:null},this.i$t=0,this.e$t=0,this.n$t=0,this.r$t="fade-in",this.h$t=null,this.o$t=new Promise((t=>this.h$t=t))}a$t(t){this.eNt=t}l$t(t){this.Qkt=!!t}u$t(t){this.nS=t}c$t(){return this.nS}f$t(t){this.mNt=t}d$t(t,s){this.gNt=t,this.yNt=s}p$t(t){this.nNt=!!t}m$t(t){this.rNt=t}async co(t){let s=t.canvas;this.Zkt.push({canvas:s,g$t:null}),this.Nc.fH("runtime","window-resize",(t=>this.y$t(t))),this.Nc.fH("runtime","fullscreenchange",(t=>this.w$t(t))),this.Nc.fH("runtime","fullscreenerror",(t=>this.S$t(t))),s.addEventListener("webglcontextlost",(t=>this.b$t(t))),s.addEventListener("webglcontextrestored",(t=>this.v$t(t))),this.CNt=!!t.isFullscreen,this.aNt=t.cssDisplayMode;const i=navigator.gpu&&this.Qkt;let e=!1;if(i)try{await this.M$t(!0)}catch(t){this.x$t("WebGPU",t),this.sNt=null}if(!this.pM())try{await this.G$t(!0)}catch(t){this.x$t("WebGL",t),this.tNt=null}if(this.pM()||(e=!0),!this.pM()&&i)try{await this.M$t(!1)}catch(t){this.x$t("WebGPU",t),this.sNt=null}if(!this.pM())try{await this.G$t(!1)}catch(t){this.x$t("WebGL",t),this.tNt=null}const n=this.pM();if(!n)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");n.Nv(e),this.sNt&&(this.sNt.T$t=()=>this.C$t(),this.sNt.I$t=()=>this._$t()),"normalized"===this.nS?n.KS():(n.ZS(),n.YS(this.mNt)),this.GR(t.windowInnerWidth,t.windowInnerHeight,!0),await this.vLt()}x$t(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async M$t(t){const s={Kw:this.gNt,Zw:this.yNt};let i=!0;"no"===this.rNt?i=!1:"auto"===this.rNt&&(i=Qx.Zs.hi);const e={powerPreference:this.eNt,depth:this.Nc.h1(),failIfMajorPerformanceCaveat:t,E$t:this.Nc.g2(),R$t:this.Nc.P$t(),OP:this.Nc.A$t(),O$t:i};this.sNt=Qx.Un(Qx.kw.D$t,s),await this.sNt.AT(this.Zkt[0].canvas,e)}async G$t(t){const s={alpha:!0,powerPreference:this.eNt,AP:"xbox-uwp-webview2"!==this.Nc.SB(),depth:this.Nc.h1(),OP:this.Nc.A$t(),failIfMajorPerformanceCaveat:t,Kw:this.gNt,Zw:this.yNt};this.nNt&&(s.DP=1),this.tNt=Qx.Un(Qx.kw.kP,this.Zkt[0].canvas,s),await this.tNt.$S()}async F$t(){if(this.ENt){const t=[];for(const[s,i]of Object.entries(this.ENt)){i.src=i.L$t;const e=Qx.kw.k$t.ZC();t.push(this.sNt.WA(Object.assign({ET:e,name:s},i)))}await Promise.all(t)}}async N$t(){if(this.ENt){const t=[];for(const[s,i]of Object.entries(this.ENt)){let e;if(i.$$t&&this.tNt.yG()>=2)i.src=i.$$t,e=Qx.kw.IT.QC();else{if(!i.B$t)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.B$t,e=Qx.kw.IT.ZC()}t.push(this.tNt.WA(Object.assign({ET:e,name:s},i)))}await Promise.all(t),this.tNt.jA(),this.tNt.lb()}this.tNt.sD()&&(this.LNt=Qx.Un(Qx.kw.MP,this.tNt))}async vLt(){this.sNt?await this.F$t():this.tNt&&await this.N$t();const t=this.pM();t.Lv(this.DS),t.sD()&&(this.FNt=0);for(const s of this.Nc.W$t()){for(const i of s.UW())i.vLt(t);s.vLt(t),s.Fq()}this.iNt=new self._Y(this.Nc,t)}qn(){this.Nc=null,this.tNt=null,this.Zkt.length=0}xk(){return this.Nc.xk()}y$t(t){const s=this.Nc;if(s.j$t())return;const i=t.devicePixelRatio;this.xk()&&(self.devicePixelRatio=i),s.V$t(i),this.CNt=!!t.isFullscreen,this.aNt=t.cssDisplayMode,this.GR(t.innerWidth,t.innerHeight),s.m$();const e=new Qx.Event("window-resize");e.data=t,s.wf()._f(e);const n=new Qx.Event("resize");n.H$t=this.RB(),n.U$t=this.AB(),n.q$t=this.DB(),n.z$t=this.kB(),s.G5(n),s.yH()&&(s.ugt()||self.wH.J$t())&&s.qF()}w$t(t){this.CNt=!!t.isFullscreen,this.GR(t.innerWidth,t.innerHeight,!0),this.Nc.m$()}S$t(t){this.CNt=!!t.isFullscreen,this.GR(t.innerWidth,t.innerHeight,!0),this.Nc.m$()}GR(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.hNt===t&&this.oNt===s&&!i)return;this.hNt=t,this.oNt=s;const e=this.Y$t();"letterbox-scale"===e?this.X$t(t,s):"letterbox-integer-scale"===e?this.K$t(t,s):"off"===e?this.Z$t(t,s):this.Q$t(t,s),this.tBt(e);for(const{canvas:t}of this.Zkt)t.width=this.cNt,t.height=this.fNt;this.Nc.Wc("canvas","update-size",{marginLeft:this.dNt,marginTop:this.pNt,styleWidth:this.lNt,styleHeight:this.uNt,displayScale:this.DJ()});const n=this.pM();n.GR(this.cNt,this.fNt,!0);for(const t of this.INt)n.YO(t);Qx.bh(this.INt),this.sBt();const r=this.Nc.VN();r.W5(),r.j5()}sBt(){this.pM().tb(this.xNt,this.n2()/this.h2())}o2(){return this.xNt}X$t(t,s){const i=this.Nc.NB(),e=this.Nc.Tk(),n=this.Nc.Ik(),r=e/n;if(t/s>r){const i=s*r;this.lNt=Math.round(i),this.uNt=s,this.dNt=Math.floor((t-this.lNt)/2),this.pNt=0}else{const i=t/r;this.lNt=t,this.uNt=Math.round(i),this.dNt=0,this.pNt=Math.floor((s-this.uNt)/2)}this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.Nc.iBt(e,n)}K$t(t,s){const i=this.Nc.NB();1!==i&&(t+=1,s+=1);const e=this.Nc.Tk(),n=this.Nc.Ik(),r=e/n;let h;h=t/s>r?s*r*i/e:t/r*i/n,h>1?h=Math.floor(h):h<1&&(h=1/Math.ceil(1/h)),this.cNt=Math.round(e*h),this.fNt=Math.round(n*h),this.lNt=this.cNt/i,this.uNt=this.fNt/i,this.dNt=Math.max(Math.floor((t-this.lNt)/2),0),this.pNt=Math.max(Math.floor((s-this.uNt)/2),0),this.Nc.iBt(e,n)}Q$t(t,s){const i=this.Nc.NB();this.lNt=t,this.uNt=s,this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.dNt=0,this.pNt=0;const e=this.DJ();this.Nc.iBt(this.lNt/e,this.uNt/e)}Z$t(t,s){const i=this.Nc.NB();this.lNt=this.Nc.Y0(),this.uNt=this.Nc.X0(),this.cNt=Math.round(this.lNt*i),this.fNt=Math.round(this.uNt*i),this.eBt()?(this.dNt=Math.floor((t-this.lNt)/2),this.pNt=Math.floor((s-this.uNt)/2)):(this.dNt=0,this.pNt=0),this.Nc.iBt(this.Nc.Y0(),this.Nc.X0())}tBt(t){if("high"===this.GNt)this.pF=this.cNt,this.mF=this.fNt,this.TNt="high";else{let s,i;if("off"===this.Y$t()?(s=this.Nc.Y0(),i=this.Nc.X0()):(s=this.Nc.Tk(),i=this.Nc.Ik()),this.cNt<s||this.fNt<i)this.pF=this.cNt,this.mF=this.fNt,this.TNt="high";else if(this.pF=s,this.mF=i,this.TNt="low","scale-inner"===t){const t=s/i,e=this.hNt/this.oNt;e<t?this.pF=this.mF*e:e>t&&(this.mF=this.pF/e)}else if("scale-outer"===t){const t=s/i,e=this.hNt/this.oNt;e>t?this.pF=this.mF*e:e<t&&(this.mF=this.pF/e)}}}L$(){return this.Nc}nBt(){return this.Zkt[0].canvas}PQ(){return this.RNt}eBt(){return this.CNt}rBt(){return this.aNt}hBt(t){if(!tG.has(t))throw new Error("invalid fullscreen mode");this.SNt=t;const s=this.Nc.VN();s.W5(),s.j5()}AJ(){return this.SNt}oBt(t){if(!tG.has(t))throw new Error("invalid fullscreen mode");this.bNt=t;const s=this.Nc.VN();s.W5(),s.j5()}aBt(){return this.bNt}Y$t(){return this.eBt()?this.aBt():this.AJ()}lBt(t){if(!sG.has(t))throw new Error("invalid fullscreen scaling quality");this.GNt=t,this.Nc.VN().W5()}uBt(){return this.GNt}w2(){return this.TNt}static cBt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}SJ(){return this.hNt}bJ(){return this.oNt}n2(){return this.pF}h2(){return this.mF}Lv(t){this.DS=!!t}fBt(t){this.wNt=t}aZ(){return this.wNt}dBt(){return this.pM().QR()}b$t(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.INt=[],this._Nt.clear(),this.RNt.LM(),this.tNt.LM(),this.Nc.G4()}C$t(){console.log("[Construct] WebGPU device lost"),this.INt=[],this._Nt.clear(),this.RNt.LM(),this.Nc.G4()}async v$t(t){await this.tNt.kM(),await this.vLt(),await this.Nc.pBt(),console.log("[Construct] WebGL context restored")}async _$t(){await this.vLt(),await this.Nc.pBt(),console.log("[Construct] WebGPU device restored")}mBt(){return this.tNt}gBt(){return this.sNt}pM(){return this.sNt||this.tNt}TPt(){return this.iNt}MB(){let t="";return t=this.Nc.gBt()?"webgpu":"webgl"+this.Nc.mBt().yG(),this.Nc.pM().$v()&&(t+="-software"),t}GB(){return this.Nc.gBt()?this.Nc.gBt().yBt():this.Nc.mBt().uD()}TV(){return"low"===this.TNt?1/this.Nc.NB():this.DJ()}DJ(){const t=this.Y$t();if("off"===t||"crop"===t)return 1;const s=this.Nc.Tk(),i=this.Nc.Ik(),e=s/i,n=this.cNt/this.fNt;return"scale-inner"!==t&&n>e||"scale-inner"===t&&n<e?this.uNt/i:this.lNt/s}U2(){return"low"===this.w2()?1:this.DJ()}V2(){return"low"===this.w2()?1:this.Nc.NB()}wBt(t,s){this.vNt=t,this.MNt=s}dX(t,s,i,e=!0){s=s||this.pF,i=i||this.mF;const n=s/2+this.vNt,r=i/2+this.MNt;if(e){let e=this.o2();s===this.pF&&i===this.mF||(t.tb(rG,s/i),e=rG),t.HA(e)}const h=t.nb(n,r,t.WS(i),n,r,0,i);t.XA(h)}SBt(t,s=!0){const i=this.RB(),e=this.AB(),n=i/2,r=e/2;s&&t.HA(this.o2());const h=t.nb(n,r,t.WS(e),n,r,0,e);t.XA(h)}DB(){return this.cNt}kB(){return this.fNt}RB(){return this.lNt}AB(){return this.uNt}CB(){return this.dNt}_B(){return this.pNt}h4(){return this.Zkt.length}bBt(){return"undefined"!=typeof OffscreenCanvas&&this.nBt()instanceof OffscreenCanvas&&("Chromium"!==Qx.Zs.ni||Qx.Zs.ei>=124)}async E4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.Zkt.length===t)return;const i={count:t,layersDomState:this.Nc.VN().BN().T0().filter((t=>t.Bj())).map((t=>t.A1())),immediate:s,marginLeft:this.dNt,marginTop:this.pNt,styleWidth:this.lNt,styleHeight:this.uNt};let e;if(e=this.xk()?await this.Nc.y$("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.Zkt.length)this.Zkt.length=t;else for(const t of e.addedCanvases){t.width=this.cNt,t.height=this.fNt;const s=this.bBt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.Zkt.push({canvas:t,g$t:i})}this.Nc.m$()}b5(t){if(t>=this.Zkt.length)return;const s=this.nBt(),i=this.Zkt[t].g$t;this.bBt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}S2(t){t.depth=this.Nc.h1();const s=this.INt,i=s.findIndex((s=>s.vT(t)));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.pM().HO(t),this._Nt.add(e),e}OQ(t){if(!this._Nt.has(t))throw new Error("render target not in use");this._Nt.delete(t),this.INt.push(t)}PNt(){const t={Kx:this.Nc._k()};return"low"===this.w2()&&(t.width=this.n2(),t.height=this.h2()),this.S2(t)}ANt(t){this.OQ(t)}*vBt(){for(const t of this.Nc.VN().k5())for(const s of t.hj()){const t=this.kNt.get(s);t&&(yield t)}}c2(t){if(!this.pM().sD())return null;let s=this.kNt.get(t);return s||(s={kH:t,name:t.Ec(),MBt:Qx.Un(Qx.kw.MP,this.tNt),xBt:0,GBt:0,TBt:0},this.kNt.set(t,s)),s.MBt}CBt(){const t=this.pM();if(t.sD()&&0===this.DNt){this.DNt=t.Dv(),this.NNt=NaN;for(const t of this.vBt())t.xBt=NaN}}IBt(){this.tNt&&this.tNt.sD()&&this._Bt(),this.sNt&&this.sNt.sD()&&this.EBt()}_Bt(){if(isNaN(this.NNt)&&(this.NNt=this.LNt.EP(this.ONt,this.DNt),!isNaN(this.NNt))){if(this.Nc.yH())for(const t of this.vBt())if(t.xBt=t.MBt.EP(this.ONt,this.DNt),isNaN(t.xBt))return;if(this.LNt.RP(this.DNt),this.FNt=Math.min(this.NNt,1),this.Nc.yH()){const t=new Map;for(const s of this.vBt())s.MBt.RP(this.DNt),s.GBt=Math.min(s.xBt,1),t.set(s.kH,s.GBt);for(const s of this.vBt()){const i=s.kH,e=(t.get(i)||0)-i.Ej().reduce(((s,i)=>s+(t.get(i)||0)),0);s.TBt=Qx.Kn(e,0,1)}const s=this.Nc.BN(),i=this.FNt-s.T0().reduce(((s,i)=>s+(t.get(i)||0)),0);self.wH.RBt(Qx.Kn(i,0,1),this.FNt,[...this.vBt()])}this.ONt=this.DNt,this.DNt=0}}PBt(){return this.LNt}EBt(){if(0===this.DNt)return;for(let t=this.ONt;t<this.DNt;++t){const s=this.$Nt.get(t);if(s&&!s.cP())return}const t=this.Nc.BN(),s=Qx.xo(t.t4()+1,0);let i=0;for(let t=this.ONt;t<this.DNt;++t){const e=this.$Nt.get(t);if(!e)continue;const n=e.fP();let r=BigInt(0),h=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,n.length/2);t<i;++t){const i=n[2*t],e=n[2*t+1];i!==o&&(r===o||i<r)&&(r=i),e>h&&(h=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(h-r)/1e9}if(this.FNt=Qx.Kn(i,0,1),this.Nc.yH()){const i=t.hj(),e=new Map;for(let t=0,n=Math.min(i.length,s.length-1);t<n;++t){const n=s[t+1];e.set(i[t],n)}const n=[],r=new Map;for(const[t,s]of e){const i=[...t.Pj()].reduce(((t,s)=>t+(e.get(s)||0)),0);r.set(t,i),n.push({name:t.Ec(),TBt:Qx.Kn(s,0,1),GBt:Qx.Kn(i,0,1)})}const h=this.FNt-t.T0().reduce(((t,s)=>t+(r.get(s)||0)),0);self.wH.RBt(Qx.Kn(h,0,1),this.FNt,n)}for(let t=this.ONt;t<this.DNt;++t)this.$Nt.delete(t);this.ONt=this.DNt,this.DNt=0}ABt(t){this.$Nt.set(this.sNt.Dv(),t)}TN(){return this.FNt}G$(t,s,i,e,n,r){return this.BNt=t,this.WNt=s,this.jNt.Ha(i,e,n,r),this.HNt||(this.HNt=new Promise((t=>{this.UNt=t}))),this.HNt}OBt(){if(!this.BNt)return;let t=this.nBt();const s=this.jNt,i=Qx.Kn(Math.floor(s.Za()),0,t.width),e=Qx.Kn(Math.floor(s.Qa()),0,t.height);let n=s.width();n=0===n?t.width-i:Qx.Kn(Math.floor(n),0,t.width-i);let r=s.height();if(r=0===r?t.height-e:Qx.Kn(Math.floor(r),0,t.height-e),(0!==i||0!==e||n!==t.width||r!==t.height)&&n>0&&r>0){const s=Qx.co(n,r);s.getContext("2d").drawImage(t,i,e,n,r,0,0,n,r),t=s}Qx.fo(t,this.BNt,this.WNt).then((t=>{this.VNt&&URL.revokeObjectURL(this.VNt),this.VNt=URL.createObjectURL(t),this.HNt=null,this.UNt(t)})),this.BNt="",this.WNt=1}DBt(){return this.VNt}FBt(t){t?this.qNt++:this.qNt--}LBt(){return this.qNt>0}kBt(t){const s=this.pM();if(2===t)this.KNt=Qx.Un(Qx.kw.qv,this.pM()),this.KNt.tR("Arial"),this.KNt.sR(16),this.KNt.mR("center"),this.KNt.yR("center"),this.KNt.GR(300,200);else if(0===t){const t=this.Nc.NBt();t&&t.rX(s).catch((t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t)))}else 4===t&&(this.$Bt("splash-images/splash-logo.svg").then((t=>{"done"===this.r$t?s.hT(t):this.ZNt.QNt=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.BBt("splash-images/splash-poweredby-512.png").then((t=>{"done"===this.r$t?s.hT(t):this.ZNt.t$t=t})).catch((t=>console.warn("Failed to load splash image: ",t))),this.BBt("splash-images/splash-website-512.png").then((t=>{"done"===this.r$t?s.hT(t):this.ZNt.s$t=t})).catch((t=>console.warn("Failed to load splash image: ",t))))}async $Bt(t){t=new URL(t,this.Nc.WBt()).toString();const s=await Qx.no(t),i=await this.Nc.jBt(s,2048,2048);return await this.pM().VO(i,{sG:"high"})}async BBt(t){t=new URL(t,this.Nc.WBt()).toString();const s=await Qx.no(t);return await this.pM().VO(s,{sG:"high"})}VBt(){this.Nc.Wc("runtime","hide-cordova-splash")}HBt(){this.zNt=Date.now(),this.Nc.wf().addEventListener("loadingprogress",this.XNt),this.JNt=requestAnimationFrame((()=>this.UBt())),3!==this.Nc.qBt()&&this.VBt()}async zBt(){const t=this.pM();this.YNt=1;const s=this.Nc.qBt();4===s&&await this.o$t,this.h$t=null,this.o$t=null,-1!==this.JNt&&(cancelAnimationFrame(this.JNt),this.JNt=-1),this.Nc.wf().removeEventListener("loadingprogress",this.XNt),this.XNt=null,this.KNt&&(this.KNt.qn(),this.KNt=null),this.Nc.JBt(),t.OO(),this.ZNt.QNt&&(t.hT(this.ZNt.QNt),this.ZNt.QNt=null),this.ZNt.t$t&&(t.hT(this.ZNt.t$t),this.ZNt.t$t=null),this.ZNt.s$t&&(t.hT(this.ZNt.s$t),this.ZNt.s$t=null),t.AO(0,0,0,0),t.Av(),this.r$t="done",this.ONt=t.Dv(),3===s&&this.VBt()}UBt(){if(-1===this.JNt)return;const t=this.pM();t.OO(),this.JNt=-1;const s=this.Nc.lk().PK(),i=this.Nc.qBt();if(3!==i&&(this.SBt(t),t.AO(0,0,0,0),t.nO(),t.lb(),t.hO(null)),0===i)this.YBt(s);else if(1===i)this.XBt(s,120,0);else if(2===i)this.KBt(s);else if(3===i)Qx.gh();else{if(4!==i)throw new Error("invalid loader style");this.ZBt(s)}t.Av(),this.JNt=requestAnimationFrame((()=>this.UBt()))}KBt(t){t?this.KNt.pR(1,0,0):this.KNt.pR(.6,.6,.6),this.KNt.jc(Math.round(100*this.YNt)+"%");const s=this.lNt/2,i=this.uNt/2;uG.kl(s-150,i-100,s+150,i+100);const e=this.pM();e.hO(this.KNt.fT()),e.ev(uG,this.KNt.sP())}XBt(t,s,i){const e=this.pM();e.gb(),t?e.iO(1,0,0,1):e.iO(.118,.565,1,1);const n=this.lNt/2,r=this.uNt/2,h=s/2;cG.Ha(n-h,r-4+i,Math.floor(s*this.YNt),8),e.Rect(cG),cG.Ha(n-h,r-4+i,s,8),cG.offset(-.5,-.5),cG.cl(.5,.5),e.iO(0,0,0,1),e.av(cG),cG.cl(1,1),e.iO(1,1,1,1),e.av(cG)}YBt(t){const s=this.pM(),i=this.Nc.NBt();if(!i)return void this.XBt(t,120,0);const e=i.fT();if(!e)return void this.XBt(t,120,0);const n=e.jg(),r=e.Zg(),h=this.lNt/2,o=this.uNt/2,a=n/2,l=r/2;uG.kl(h-a,o-l,h+a,o+l),s.hO(e),s._l(uG),this.XBt(t,n,l+16)}ZBt(t){const s=this.pM(),i=this.ZNt.QNt,e=this.ZNt.t$t,n=this.ZNt.s$t,r=Date.now();0===this.i$t&&(this.zNt=r);const h=this.Nc.QBt()||this.Nc.tWt()&&!this.Nc.sWt(),o=h?0:200,a=h?0:3e3;let l=1;"fade-in"===this.r$t?l=Math.min((r-this.zNt)/300,1):"fade-out"===this.r$t&&(l=Math.max(1-(r-this.n$t)/300,0)),s.gb(),s.iO(.231*l,.251*l,.271*l,l),cG.set(0,0,this.lNt,this.uNt),s.Rect(cG);const u=Math.ceil(this.lNt),c=Math.ceil(this.uNt);let f,d;this.uNt>256?(s.iO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),cG.Ha(0,.8*c-d/2,f,d),s.Rect(cG),t?s.iO(l,0,0,l):s.iO(.161*l,.953*l,.816*l,l),f=u*this.YNt,cG.Ha(.5*u-f/2,.8*c-d/2,f,d),s.Rect(cG),s.iO(l,l,l,l),s.lb(),e&&(f=1.5*Qx.Kn(.22*c,105,.6*u),d=f/8,cG.Ha(.5*u-f/2,.2*c-d/2,f,d),s.hO(e),s.Rect(cG)),i&&(f=Math.min(.395*c,.95*u),d=f,cG.Ha(.5*u-f/2,.485*c-d/2,f,d),s.hO(i),s.Rect(cG)),n&&(f=1.5*Qx.Kn(.22*c,105,.6*u),d=f/8,cG.Ha(.5*u-f/2,.868*c-d/2,f,d),s.hO(n),s.Rect(cG))):(s.iO(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),cG.Ha(0,.85*c-d/2,f,d),s.Rect(cG),t?s.iO(l,0,0,l):s.iO(.161*l,.953*l,.816*l,l),f=u*this.YNt,cG.Ha(.5*u-f/2,.85*c-d/2,f,d),s.Rect(cG),s.iO(l,l,l,l),s.lb(),i&&(f=.55*c,d=f,cG.Ha(.5*u-f/2,.45*c-d/2,f,d),s.hO(i),s.Rect(cG))),this.i$t++,"fade-in"===this.r$t&&r-this.zNt>=300&&this.i$t>=2&&(this.r$t="wait",this.e$t=r),"wait"===this.r$t&&r-this.e$t>=a&&this.YNt>=1&&(this.r$t="fade-out",this.n$t=r),("fade-out"===this.r$t&&r-this.n$t>=300+o||h&&this.YNt>=1&&r-this.zNt<500)&&this.h$t()}}}{const mG=self.Is,gG=self.wH,yG=self.assert,wG=self.qJ,SG={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let bG=!0;mG.iWt=class extends mG.Vn{constructor(t){t=Object.assign({},SG,t),super(),this.eWt=t.messagePort,this.nWt=t.runtimeBaseUrl,this.rWt=t.previewUrl,this.hWt=!!t.headless,this.oWt=!!t.hasDom,this.aWt=!!t.isInWorker,bG=t.ife,this.lWt=!!t.useAudio,this.uWt=t.exportType,this.cWt=t.isNWjs,this.DX=!!t.isiOSCordova,this.fWt=!!t.isiOSWebView,this.dWt=!!t.isWindowsWebView2,this.pWt=!!t.isAnyWebView2Wrapper,this.mWt=!!t.isFBInstantAvailable,this.gWt=!("preview"!==this.uWt||!t.isDebug),this.yWt=this.gWt,this.wWt=this.gWt,this.SWt=0,this.bWt=[],this.vWt=[],this.MWt=!1,this.xWt="",this.GWt="",this.TWt="",this.CWt="",this.IWt=0,this._Wt=0,this.EWt=0,this.xF=self.devicePixelRatio,this.RWt=0,this.PWt=0,this.AWt=0,this.OWt=0,this.DWt=0,this.FWt=!1,this.ww=!0,this.LWt=!1,this.kWt=!1,this.NWt=!1,this.$Wt=null,this.YK=mG.Un(mG.RX,this,t),this.o3=mG.Un(mG.E5,this),this.Odt=mG.Un(mG.Rpt,this),this.BWt=mG.Un(mG.VB,this,t.wrapperComponentIds),this.WWt=mG.Un(mG.WLt,this),this.r9=mG.Un(mG.V5,this),this.jWt=mG.Un(mG.Zlt,this),this.VWt=mG.Un(mG.tut,this),this.mut=mG.Un(mG.aut,this),this.dw=mG.Un(mG.tw,{ew:t=>this.HWt(t),hw:t=>this.UWt(t)}),this.qWt=new Map,this.zWt=[],this.JWt=new Map,this.YWt=new Map,this.XWt=0,this.KWt=[],this.ZWt=new Set,this.QWt=[],this.tjt=[],this.sjt=new Map,this.ijt=!1,this.ejt=!1,this.njt=0,this.rjt=0,this.hjt=new Map,this.ojt=new Set,this.ajt=new Set,this.ljt=[],this.ujt=[],this.cjt=null,this.fjt=!1,this.djt="vsync",this.lG="trilinear",this.pjt=!1,this.mjt=!0,this.gjt=!1,this.yjt=!1,this.wjt=null,this.Sjt={bjt:t=>{this.JNt=-1,this.vjt=-1,this.d8(t)},Mjt:t=>{this.vjt=-1,this.d8(t,!1,"skip-render")},xjt:()=>{this.JNt=-1,this.qF()}},this.JNt=-1,this.vjt=-1,this.Gjt=0,this.Tjt=0,this.Cjt=!1,this.Ijt=!1,this._jt=!1,this.Ejt=!0,this.Rjt=!0,this.Pjt=!1,this.Ajt=0,this.Ojt=new mG.Hd(1),this.Djt=()=>Math.random(),this.Fjt=0,this.Ljt=0,this.kjt=0,this.Njt=0,this.$jt=0,this.GAt=1,this.Bjt=1/30,this.Wjt=0,this.jjt=mG.Un(mG.Qf),this.Vjt=mG.Un(mG.Qf),this.Hjt=mG.Un(mG.Qf),this.Ujt=new Map,this.qjt=-1,this.zjt=0,this.Jjt=0,this.Yjt=-1,this.Xjt=0,this.Kjt=0,this.Zjt=0,this.Qjt=!1,this.tVt="",this.sVt=!1,this.iVt="",this.CH=null,this.eVt="",this.nVt=null,this.rVt=null,this.CRt=mG.Un(mG.Event.wf),this.hVt=new Map,this.oVt=new Map,this.aVt=0,this.lVt=!1,this.uVt=!1,this.cVt=!1,this.fVt=[],this.dVt={pretick:mG.Un(mG.Event,"pretick",!1),tick:mG.Un(mG.Event,"tick",!1),tick2:mG.Un(mG.Event,"tick2",!1),instancecreate:mG.Un(mG.Event,"instancecreate",!1),instancedestroy:mG.Un(mG.Event,"instancedestroy",!1),beforelayoutchange:mG.Un(mG.Event,"beforelayoutchange",!1),layoutchange:mG.Un(mG.Event,"layoutchange",!1)},this.dVt.instancecreate._q=null,this.dVt.instancedestroy._q=null,this.W3=mG.Un(mG.Event.wf),this.pVt=null;const s=(t,s)=>mG.MAt.aLt(this,t,s);this.mVt=mG.Un(mG.ld,s),this.gVt=mG.Un(mG.ld,s),this.yVt=mG.Un(mG.ld,s),this.wVt=mG.Un(mG.SVt,this,t.jobScheduler),t.canvas&&(this.cjt=mG.Un(mG.Kkt,this)),this.eWt.onmessage=t=>this._OnMessageFromDOM(t.data),this.fH("runtime","visibilitychange",(t=>this.bVt(t))),this.fH("runtime","wrapper-extension-message",(t=>this.vVt(t))),this.fH("runtime","get-remote-preview-status-info",(()=>this.MVt())),this.fH("runtime","js-invoke-function",(t=>this.nmt(t))),this.fH("runtime","go-to-last-error-script",self.goToLastErrorScript),this.fH("runtime","offline-audio-render-completed",(t=>this.xVt(t))),this.CRt.addEventListener("window-blur",(t=>this.GVt(t))),this.CRt.addEventListener("window-focus",(()=>this.TVt())),this.r9.M6(),this.VWt.M6(),this.CVt=null,this.IVt=new WeakMap,this._Vt={keyboard:null,KN:null,ZN:null,QN:null},this.EVt=new WeakMap,this.RVt=[]}static AT(t){return mG.Un(mG.iWt,t)}qn(){mG.bh(this.zWt),this.JWt.clear(),this.YWt.clear(),this.o3.qn(),this.o3=null,this.Odt.qn(),this.Odt=null,this.BWt.qn(),this.BWt=null,this.YK.qn(),this.YK=null,this.WWt.qn(),this.WWt=null,this.r9.qn(),this.r9=null,this.jWt.qn(),this.jWt=null,this.VWt.qn(),this.VWt=null,this.mut.qn(),this.mut=null,this.dw.qn(),this.dw=null,this.cjt&&(this.cjt.qn(),this.cjt=null),this.CRt.qn(),this.CRt=null,this.PVt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.AVt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.OVt(t)}}AVt(t){if(!this.cVt)return void this.fVt.push(t);const s=t.component,i=t.handler,e=t.data,n=t.dispatchOpts,r=!(!n||!n.dispatchRuntimeEvent),h=!(!n||!n.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const t=new mG.Event(i);t.data=e,this.CRt._f(t)}if(h){const t=new mG.Event(i,!0);for(const[s,i]of Object.entries(e))t[s]=i;this.G5(t)}}const a=this.hVt.get(s);if(!a)return void(r||h||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(r||h||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.DVt(o,!1,""+t))}null!==o&&(u&&u.then?u.then((t=>this.DVt(o,!0,t))).catch((t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.DVt(o,!1,""+t)})):this.DVt(o,!0,u))}DVt(t,s,i){this.eWt.postMessage({type:"result",responseId:t,isOk:s,result:i})}OVt(t){const s=t.responseId,i=t.isOk,e=t.result,n=this.oVt.get(s);i?n.resolve(e):n.reject(e),this.oVt.delete(s)}fH(t,s,i){let e=this.hVt.get(t);if(e||(e=new Map,this.hVt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Wc(t,s,i,e){this.eWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}y$(t,s,i,e){const n=this.aVt++,r=new Promise(((t,s)=>{this.oVt.set(n,{resolve:t,reject:s})}));return this.eWt.postMessage({type:"event",component:t,handler:s,data:i,responseId:n},e),r}eY(t,s,i,e=-1){this.Wc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}nY(t,s,i){const e=this.aVt++,n=new Promise(((t,s)=>{this.oVt.set(e,{resolve:t,reject:s})}));return this.eY(t,s,i,e),n}vVt(t){if(-1!==t.asyncId){const s=t.asyncId;this.oVt.get(s).resolve(t.params),this.oVt.delete(s)}else this.AVt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}RH(t,s,i){this.fH("wrapper-extension:"+t,s,i)}_H(t){return this.BWt._H(t)}FVt(t){if(!this.yH())throw new Error("not in debug mode");this.Wc("runtime","post-to-debugger",t)}async IAt(t){mG.Yxt(this),this.yH()?await gG.IAt(this):self.wH&&self.wH.LVt(this);const s=await this.YK.eo("data.json");if(await this.kVt(s),await this.NVt(t),this.QBt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.mBt()){const t=this.mBt();console.info(`[C3 runtime] Hosted in ${this.xk()?"worker":"DOM"}, rendering with WebGL ${t.yG()} [${t.uD()}]`)}else this.gBt()&&console.info(`[C3 runtime] Hosted in ${this.xk()?"worker":"DOM"}, rendering with WebGPU [${this.gBt().yBt()}]`);this.pM().$v()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.cVt=!0;for(const t of this.fVt)this.AVt(t);mG.bh(this.fVt),this.cjt&&this.cjt.HBt();for(const s of t.runOnStartupFunctions)this.bWt.push(this.$Vt(s));if(await Promise.all([this.YK.EK(),...this.bWt]),mG.bh(this.bWt),!this.YK.PK())return this.cjt&&await this.cjt.zBt(),await this.CRt.Cf(new mG.Event("beforeruntimestart")),await this.OO(),this.eWt.postMessage({type:"runtime-ready"}),this;this.cjt&&this.cjt.VBt()}async $Vt(t){try{await t(this.CVt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async kVt(t){const s=t.project;this.xWt=s[0],this.GWt=s[16],this.TWt=s[31],this.CWt=s[38],this.IWt=s[36];const i=s[39]||"loading-logo.png";this.pjt=!!s[9],this._Wt=this.AWt=s[10],this.EWt=this.OWt=s[11],this.WWt.Pkt(this._Wt,this.EWt),this.RWt=this._Wt/2,this.PWt=this.EWt/2,this.djt=s[37],this.fjt=!!s[40],this.lG=s[14],this.LWt=s[15],this.kWt=s[42],this.NWt=s[17],this.FWt=!!s[18],this.DWt=s[19],this.rjt=s[21],this.gjt=s[22];const e=this.YK;if(e.hK(s[45]),e.$K(s[7],s[25]),e.aK(s[8]),e.lK(s[32]),e.cK(s[28]),e.FK(s[29]),0===this.DWt){let t="";t="flat"===e.H$()?e.fK()+i:i,t&&(this.$Wt=e.MK({url:t}))}this.cjt&&(this.cjt.hBt(mG.Kkt.cBt(s[12])),this.cjt.lBt(s[23]?"high":"low"),this.cjt.Lv(0!==s[24]),this.cjt.a$t(s[34]),this.cjt.fBt(s[41]),this.cjt.l$t(s[13]),this.cjt.u$t(s[30]),this.cjt.d$t(s[46],s[47]),this.cjt.f$t(s[26]),this.cjt.p$t(s[48]),this.cjt.m$t(s[50]));const n=s[43];n&&await this.BVt(n),this.WVt(),this.BWt.cEt(),this.ljt=self.jVt();const r=s[2];for(const t of r[1])this.BWt.fEt(t);for(const t of r[0])this.BWt.uEt(t);this.ljt=self.jVt(),this.VVt(),this.BWt.wEt();for(const t of s[3]){const s=mG.rut.AT(this,this.zWt.length,t);this.zWt.push(s),this.JWt.set(s.Ec().toLowerCase(),s),this.YWt.set(s.C0(),s)}for(const t of s[4])this.zWt[t[0]].uPt(t);for(const t of s[27]){const s=t.map((t=>this.zWt[t]));this.KWt.push(mG.Un(mG.cAt,this,s))}this.HVt();for(const t of this.zWt)t.fPt();for(const t of s[5])this.o3.AT(t);const h=s[1];if(h){const t=this.o3.A5(h);t&&this.o3.R5(t)}for(const t of s[35])this.jWt.AT(t);for(const t of s[33])this.r9.AT(t);for(const t of s[44])this.VWt.AT(t);this.VWt.eut()||(this.VWt.qn(),this.VWt=null);for(const t of s[49])this.mut.AT(t);this.mut.fut()||(this.mut.qn(),this.mut=null);for(const t of s[6])this.Odt.AT(t);this.Odt.omt(),this.UVt(),mG.bh(this.ljt),this.jW();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Wc("runtime","set-target-orientation",{targetOrientation:o})}async BVt(t){const s=t.format;"image-sequence"===s?this.wjt=new self.qVt(this,t):"image-sequence-gif"===s?this.wjt=new self.zVt(this,t):"webm"===s?this.wjt=new self.JVt(this,t):"mp4"===s&&(this.wjt=new self.YVt(this,t)),this.djt="unlimited-frame",this.cjt.hBt("off"),this.xF=1,self.devicePixelRatio=1,await this.y$("runtime","set-exporting-to-video",{message:this.wjt.XVt(0),duration:this.wjt.ez()})}qBt(){return this.DWt}j$t(){return null!==this.wjt}KVt(){return this.wjt.ez()}ZVt(){return this.wjt.QVt()}tHt(){return this.wjt.IAt({width:this.cjt.DB(),height:this.cjt.kB()})}sHt(){const t=this.Gjt/this.ZVt();return this.wjt.iHt(this.cjt.nBt(),t)}eHt(){this.wjt&&this.wjt.Bit()}xVt(t){this.wjt.nHt(t)}rHt(){return this.wjt.Av()}tWt(){return this.mWt}Gw(){return this.ww}v$(t){this.bWt.push(t)}P4(t){this.MWt=!!t}hHt(t){this.MWt&&this.vWt.push(t)}N4(){return this.vWt}ePt(){return this.XWt++}pPt(){return this.XWt}yLt(t){this.ZWt.add(t)}wLt(t){this.ZWt.delete(t)}W$t(){return this.ZWt}async NVt(t){this.cjt&&(await this.cjt.co(t),this.cjt.kBt(this.DWt))}async OO(){this.Cjt=!0,this.Fjt=Date.now();let t=null;const s=new Promise((s=>t=s));if(this.FWt){for(const t of this.zWt)t.w0()||t.xPt()||!t.YB()||t.uIt();(async()=>{await this.YK.EK(),await s,this.ww=!1,this.oHt()})()}else this.ww=!1;this.YK.RK(),this.yH()&&gG.aHt(bG);for(const t of this.o3.qN())t.t5();this.j$t()&&await this.tHt();const i=this.o3.P5();await i.m4(null,this.pM()),await i.T4(!0),this.zjt=performance.now(),t(),this.FWt||this.oHt(),(await this.y$("runtime","before-start-ticking")).isSuspended&&!this.j$t()?(this.Ajt++,this.Pjt=!0):this.d8()}oHt(){this.lH(mG.E$._$.I$.lHt,null,null),this.Wc("runtime","register-sw")}dbt(t){t=Math.floor(t);const s=this.ljt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}VVt(){for(const t of self.uHt){const s=mG.Bh(Object.keys(t));this.ujt.push(s)}}Pmt(t){t=Math.floor(t);const s=this.ujt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}cHt(){return this.oWt}fHt(){return this.hWt}xk(){return this.aWt}WBt(){return this.nWt}dHt(){return this.rWt}$k(){return this.Odt}Zk(){return this.Odt.Zk()}vmt(){return this.Odt.vmt()}Uk(){return this.Odt.Uk()}Mmt(){return this.Odt.Mmt()}zxt(){return 0===this.vmt().Zdt()}Gmt(){return this.Odt.Gmt()}hLt(){return this.BWt}DK(){return this.BWt.DK()}JQ(t){if((t=Math.floor(t))<0||t>=this.zWt.length)throw new RangeError("invalid index");return this.zWt[t]}pHt(t){return this.JWt.get(t.toLowerCase())||null}dY(t){return this.YWt.get(t)||null}rrt(t){const s=mG.VB.uW(t);return s?s.pW():null}y0(){return this.zWt}*mHt(){for(const t of this.zWt)t.w0()||(yield*t.vW())}wf(){return this.CRt}Fk(){return this.W3}G5(t){t.runtime=this.HB();const s=this.yH()&&!this.Odt.BW();s&&gG.T5(),this.W3.dispatchEvent(t),s&&gG.C5()}q4(t){return t.runtime=this.HB(),this.W3.Cf(t)}Tk(){return this._Wt}Ik(){return this.EWt}gHt(t,s){if(this._Wt===t&&this.EWt===s)return;this._Wt=t,this.EWt=s;const i=this.VN();i.W5(),i.j5()}Y0(){return this.AWt}X0(){return this.OWt}iBt(t,s){if(this.AWt===t&&this.OWt===s)return;this.AWt=t,this.OWt=s;const i=this.VN();i.W5(),i.j5()}V$t(t){this.j$t()||(this.xF=t)}NB(){return this.xF}K1(){return this.RWt}Z1(){return this.PWt}x$(){return this.cjt}n2(){return this.cjt?this.cjt.n2():this.AWt}h2(){return this.cjt?this.cjt.h2():this.OWt}TV(){return this.cjt?this.cjt.TV():1}DJ(){return this.cjt?this.cjt.DJ():1}U2(){return this.cjt?this.cjt.U2():1}V2(){return this.cjt?this.cjt.V2():1}CB(){return this.cjt?this.cjt.CB():0}_B(){return this.cjt?this.cjt._B():0}yHt(){return this.cjt?this.cjt.RB():0}wHt(){return this.cjt?this.cjt.AB():0}AJ(){return this.cjt?this.cjt.AJ():"off"}S2(t){return this.cjt?this.cjt.S2(t):null}OQ(t){this.cjt&&this.cjt.OQ(t)}g2(){return this.LWt}P$t(){return this.kWt}A$t(){return this.NWt}TN(){return this.cjt?this.cjt.TN():NaN}pT(){return"nearest"!==this._k()}IN(){return this.djt}_N(t){this.djt!==t&&(this.djt=t,-1===this.JNt&&-1===this.vjt||(this.SHt(),this.bHt()))}_k(){return this.lG}oPt(){return this.FWt}NBt(){return this.$Wt}JBt(){this.$Wt&&(this.$Wt.qE(),this.$Wt.qn(),this.$Wt=null)}VN(){return this.o3}BN(){return this.o3.BN()}q9(){return this.r9}vHt(){return this.jWt}eOt(){return this.VWt}Lut(){return this.mut}lk(){return this.YK}MK(t){return this.YK.MK(t)}LW(t,s,i,e,n,r){if(r&&this.VWt){if(t instanceof mG.rut&&t.w0()){const h=t.Xwt(),o=Math.floor(this.$N()*h.length);return this.LW(h[o],s,i,e,n,r)}const h=this.VWt.nut(t,r);if(h){const t=this.e0(h,s,!1,i,e,!1,n,void 0,n);return this.VWt.hut(t,r),t}}return this.e0(t,s,!1,i,e,!1,n,void 0,n)}e0(t,s,i,e,n,r,h,o,a){let l=null,u=null;if(t instanceof mG.rut){if(u=t,u.w0()){const t=u.Xwt();u=t[Math.floor(this.$N()*t.length)]}l=u.XQ()}else l=t,u=this.JQ(l[1]);const c=u.SW().YB();if(this.ww&&c&&!u.xPt())return null;const f=s;let d;c||(s=null),d=i&&!r&&l&&!this.hjt.has(l[2])?l[2]:this.rjt++;const p=l?l[0]:null,m=mG.Un(mG.Instance,{runtime:this,objectType:u,kH:s,CAt:p,RAt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.hjt.set(d,m);let g=null;if(c&&(g=m.a$(),void 0!==e&&void 0!==n&&(g.qM(e),g.YM(n)),u.KPt(!0)),s&&(a||s.r0(m,!0),s.HN().y4(u)),this.njt++,u.NV()&&!i&&!r){const t=new Set;for(const s of u.f4().K4()){if(s===u)continue;const i=this.MHt(s,g,t);if(i){const t=this.e0(i,f,!1,g?g.UM():e,g?g.JM():n,!0,!1,void 0,a);m.Z4(t)}else{const t=this.e0(s,f,!1,g?g.UM():e,g?g.JM():n,!0,!1,void 0,a);m.Z4(t)}}for(const t of m.$V()){t.Z4(m);for(const s of m.$V())t!==s&&t.Z4(s)}}if(c&&!i&&h&&this.xHt(m,p,g,s,e,n,a),u.NV()&&!i&&!r&&h)for(const t of m.$V()){const i=t.a$();if(!i)continue;const e=t.SW(),n=t.IV().XQ()[0];e.YB()?this.xHt(t,n,i,s,i.UM(),i.JM(),a):this.xHt(t,n,i,s,void 0,void 0,a)}if(!r&&h){void 0===e&&(e=p[0]),void 0===n&&(n=p[1]);const t=g.MU(),s=e-g.UM()+t.UM(),i=n-g.JM()+t.JM();t.$H(s,i)}u.qPt();const y=l?mG.Oh(l[5]):null,w=l?l[4].map((t=>mG.Oh(t))):null,S=c&&p&&p[13];if(S&&m.LAt(),m.vPt(y,w),S){const t=p[13];m.yq().IIt(t[2],t[0],t[1])}this.tjt.push(m),this.ijt=!0,this.yH()&&gG.GHt(m);const b=this.dVt.instancecreate;return b._q=m,this.CRt.dispatchEvent(b),m}eDt(t){const s=t[0],i=t[1],e=t[2],n=t[6];return n||this.o3.O5(s).l$(i).QQ(e)}MHt(t,s,i){const e=s?.iOt()??[];for(const s of e){const e=this.eDt(s),n=!!s[4],r=this.JQ(e[1]);if(!i.has(e)&&t===r&&n)return i.add(e),e}}xHt(t,s,i,e,n,r,h){const o=i.TFt(),a=i.iOt();if(t.a$().CFt(o),!a)return;void 0===n&&(n=s[0]),void 0===r&&(r=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this.o3.O5(i).l$(o).QQ(a);const y=this.JQ(g[1]),w=t.rOt(y),S=l.has(y);if(w&&!S&&d){const s=t.hOt(y);s.a$().IAt(g[0]);const i=n+g[0][0]-u,e=r+g[0][1]-c;s.a$().$H(i,e),s.a$().CFt(p),t.RU(s,{FU:!!(1&f),kU:!!(f>>1&1),$U:!!(f>>2&1),WU:!!(f>>3&1),VU:!!(f>>4&1),KU:!!(f>>5&1),UU:!!(f>>6&1),zU:!!(f>>7&1),YU:!!(f>>8&1)}),l.add(y)}else{const s=n+g[0][0]-u,i=r+g[0][1]-c,o=this.e0(g,e,!1,s,i,!1,!0,t,h);o.a$().CFt(p),t.RU(o,{FU:!!(1&f),kU:!!(f>>1&1),$U:!!(f>>2&1),WU:!!(f>>3&1),VU:!!(f>>4&1),KU:!!(f>>5&1),UU:!!(f>>6&1),zU:!!(f>>7&1),YU:!!(f>>8&1)})}}}OV(t){if(this.ojt.has(t))return;const s=t.IV();let i=this.sjt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.sjt.set(s,i);if(this.yH()&&gG.THt(t),t.NAt(),this.ijt=!0,t.NV())for(const s of t.$V())this.OV(s);for(const s of t.children())s.ZU()&&this.OV(s);if(!this.o3.WW()&&!this.Qjt){const s=this.$k();s.NW(!0),t.gOt(),s.NW(!1)}t.yOt(this.o3.WW())}jW(){this.ijt&&(this.ejt=!0,this.CHt(),this.IHt(),this.ejt=!1,this.ijt=!1,this.m$())}CHt(){for(const t of this.tjt){const s=t.IV();s.r0(t);for(const i of s.Nmt())i.r0(t),i.qPt()}mG.bh(this.tjt)}IHt(){this.CRt.cf(!0);for(const[t,s]of this.sjt.entries())this._Ht(t,s),s.clear();this.sjt.clear(),this.CRt.cf(!1)}_Ht(t,s){for(const t of s){const s=this.dVt.instancedestroy;s._q=t,this.CRt.dispatchEvent(s),this.hjt.delete(t.BV()),this.Ujt.delete(t);const i=t.a$();i&&(i.EFt(),i.l0(),i.NAt()),this.ojt.add(t),this.njt--}mG.Rh(t.PW(),s),t.qPt(),this.ajt.add(t);for(const i of t.Nmt())mG.Rh(i.PW(),s),i.qPt(),this.ajt.add(i);if(t.SW().YB()){const t=new Set([...s].map((t=>t.a$().l$())));for(const i of t)i.T1(s)}}JPt(){return this.tjt}*ZGt(t){for(const s of this.JPt())t.w0()?s.IV().Jxt(t)&&(yield s):s.IV()===t&&(yield s)}bPt(){return this.rjt++}MPt(t,s){this.hjt.set(t,s)}aY(t){t=!!t,this.Rjt!==t&&(this.Rjt=!!t,this.Rjt&&this.Pjt&&(this.cY(!1),this.Pjt=!1))}lY(){return this.Rjt}G4(){this.CRt.dispatchEvent(mG.Un(mG.Event,"renderercontextlost")),this.cY(!0);for(const t of this.zWt)!t.w0()&&t.GPt()&&t.M4();const t=this.BN();t&&t.G4(),mG.vEt.oZ(),mG.GK.oZ()}async pBt(){await this.BN().m4(null,this.pM()),this.CRt.dispatchEvent(mG.Un(mG.Event,"renderercontextrestored")),this.cY(!1),this.m$()}bVt(t){if(!this.Rjt)return;const s=t.hidden;this.cY(s),this.Pjt=s,s||this.m$()}GVt(t){this.QBt()&&this.gjt&&!mG.Zs.oi&&(t.data.parentHasFocus||(this.cY(!0),this.yjt=!0))}TVt(){this.yjt&&(this.cY(!1),this.yjt=!1)}bHt(){const t=this.Sjt;"vsync"===this.djt?-1===this.JNt&&(this.JNt=self.requestAnimationFrame(t.bjt)):"unlimited-tick"===this.djt?(-1===this.vjt&&(this.vjt=mG.Uh(t.Mjt)),-1===this.JNt&&(this.JNt=self.requestAnimationFrame(t.xjt))):-1===this.vjt&&(this.vjt=mG.Uh(t.bjt))}SHt(){-1!==this.JNt&&(self.cancelAnimationFrame(this.JNt),this.JNt=-1),-1!==this.vjt&&(mG.qh(this.vjt),this.vjt=-1)}hN(){return this.Ajt>0}cY(t){if(this.j$t())return;const s=this.hN();this.Ajt+=t?1:-1,this.Ajt<0&&(this.Ajt=0);const i=this.hN();if(!s&&i)console.log("[Construct] Suspending"),this.SHt(),this.CRt.dispatchEvent(mG.Un(mG.Event,"suspend")),this.G5(mG.Un(mG.Event,"suspend")),this.lH(mG.E$._$.I$.EHt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.Ljt=t,this.zjt=t,this.qjt=0,this.Jjt=0,this.Yjt=0,this.Xjt=0,this.Zjt=0,this.Kjt=0,this.CRt.dispatchEvent(mG.Un(mG.Event,"resume")),this.G5(mG.Un(mG.Event,"resume")),this.lH(mG.E$._$.I$.RHt,null,null),this.ugt()||this.d8(t)}}YJ(t){this.mVt.$u(t)}QJ(t){this.gVt.$u(t)}KJ(t){this.yVt.$u(t)}XJ(t){this.mVt.Kf(t)}tY(t){this.gVt.Kf(t)}ZJ(t){this.yVt.Kf(t)}PHt(t,s){const i=s?performance.now():0;let e;return t instanceof wG?(e=t.SH(),s&&gG.AHt(t.behavior,performance.now()-i)):(e=t.d8(),s&&gG.AHt(t.Gq(),performance.now()-i)),e}OHt(){const t=this.yH();this.mVt.jd(!0);for(const s of this.mVt)this.PHt(s,t);this.mVt.jd(!1)}DHt(t,s){const i=s?performance.now():0;let e;return t instanceof wG?(e=t.iY(),s&&gG.AHt(t.behavior,performance.now()-i)):(e=t.Q_t(),s&&gG.AHt(t.Gq(),performance.now()-i)),e}FHt(){const t=this.yH();this.gVt.jd(!0);for(const s of this.gVt)this.DHt(s,t);this.gVt.jd(!1)}LHt(t,s){const i=s?performance.now():0;let e;return t instanceof wG?(e=t.MH(),s&&gG.AHt(t.behavior,performance.now()-i)):(e=t.JIt(),s&&gG.AHt(t.Gq(),performance.now()-i)),e}kHt(){const t=this.yH();this.yVt.jd(!0);for(const s of this.yVt)this.LHt(s,t);this.yVt.jd(!1)}*NHt(){const t=this.yH();this.mVt.jd(!0);for(const s of this.mVt){const i=this.PHt(s,t);mG.Mo(i)&&(yield*i)}this.mVt.jd(!1)}*$Ht(){const t=this.yH();this.gVt.jd(!0);for(const s of this.gVt){const i=this.DHt(s,t);mG.Mo(i)&&(yield*i)}this.gVt.jd(!1)}*BHt(){const t=this.yH();this.yVt.jd(!0);for(const s of this.yVt){const i=this.LHt(s,t);mG.Mo(i)&&(yield*i)}this.yVt.jd(!1)}async d8(t,s,i){this._jt=!0;const e="background-wake"===i,n="background-wake"!==i&&"skip-render"!==i,r=this.VN(),h=this.x$();if(!this.Cjt||this.hN()&&!s&&!e)return;const o=performance.now();this.Ijt=!0,this.WHt(t||0),this.Yjt++,this.jHt();const a=this.VHt();this.zGt()&&await a;const l=this.CRt.If(this.dVt.pretick);l instanceof Promise&&await l,this.G5(this.pVt.pretick);const u=this.HHt();this.zGt()&&await u,this.UHt()&&await this.qHt(),r.JN()&&await this.zHt();const c=this.JHt();this.zGt()&&await c;const f=r.BN(),d=f.o4();let p=!1;if(-1!==d&&(f.a4(),h.h4()!==d)){const t=this.x$().E4(d);this.xk()&&(p=!0,await t)}this.Wc("canvas","update-html-layer-dom-state",{layersDomState:f.T0().filter((t=>t.Bj())).map((t=>t.A1()))}),n&&this.qF(),p&&this.Wc("canvas","cleanup-html-layers"),this.j$t()&&(await this.sHt(),this.fN()>=this.KVt())?this.rHt():(this.hN()||e||this.bHt(),this.Gjt++,this.Tjt++,this.Ijt=!1,this.Kjt+=performance.now()-o)}async VHt(){const t=this.Odt,s=this.yH();this.jW(),t.NW(!0),this.Zmt(this.BN()),s&&gG.YHt(),this.zGt()?await t.Pgt():t.Cgt(),s&&gG.XHt(),this.Qmt(),t.NW(!1),this.jW(),t.NW(!0)}async HHt(){const t=this.Odt,s=this.yH(),i=this.zGt(),e=this.CRt,n=this.dVt,r=this.pVt;s&&gG.YHt(),i?await this.KHt(this.NHt()):this.OHt(),i?await this.KHt(this.$Ht()):this.FHt(),s&&gG.ZHt(),s&&gG.YHt(),i?await this.QHt(n.tick):e.dispatchEvent(n.tick),s&&gG.tUt(),t.NW(!1),this.G5(r.tick)}async JHt(){const t=this.Odt,s=this.CRt,i=this.dVt,e=this.pVt,n=this.yH(),r=this.zGt();n&&gG.YHt(),r?await t.tgt(this.o3):t.Kmt(this.o3),n&&gG.XHt(),this.WWt.tkt(),this.jHt(),this.Ejt=!1,t.NW(!0),n&&gG.YHt(),r?await this.KHt(this.BHt()):this.kHt(),n&&gG.ZHt(),n&&gG.YHt(),r?await this.QHt(i.tick2):s.dispatchEvent(i.tick2),n&&gG.tUt(),t.NW(!1),this.G5(e.tick2),r&&await t.cgt(),this.jW(),this.jHt()}jHt(){if(0===this.ojt.size)return;const t=this.CRt;t.cf(!0);for(const t of this.ajt)t.bgt().ldt(this.ojt);this.ajt.clear(),this.Odt.Ogt(this.ojt);for(const t of this.ojt)t.qn();this.ojt.clear(),t.cf(!1)}async zHt(){const t=this.VN();let s=0;for(;t.JN()&&s++<10;)await this.sUt(t.B5())}WHt(t){let s=0;this.j$t()?(s=1/this.ZVt(),this.kjt=s,this.Njt=s):0!==this.Ljt&&(s=Math.max(t-this.Ljt,0)/1e3,s>.5&&(s=0),this.kjt=s,this.Njt=mG.Kn(s,this.Wjt,this.Bjt)),this.Ljt=t,this.$jt=this.Njt*this.GAt,this.jjt.$u(this.$jt),this.Vjt.$u(s*this.GAt),this.Hjt.$u(this.Njt);for(const[t,s]of this.Ujt)s.$u(this.Njt*t.gN());this.cjt&&this.cjt.IBt(),t-this.zjt>=1e3&&(this.zjt+=1e3,t-this.zjt>=1e3&&(this.zjt=t),this.Jjt=this.qjt,this.qjt=0,this.Xjt=this.Yjt,this.Yjt=0,this.Zjt=Math.min(this.Kjt/1e3,1),this.Kjt=0,this.cjt&&this.cjt.CBt(),this.WWt.XLt(),this.yH()&&gG.iUt())}DAt(t,s){if(s){if(!this.Ujt.has(t)){const s=mG.Un(mG.Qf);s.rd(this.jjt),this.Ujt.set(t,s)}}else this.Ujt.delete(t)}FAt(t){const s=this.Ujt.get(t);return s?s.qs():this.fN()}async sUt(t){const s=this.CRt,i=this.VN().BN();await i.i5(),i.x4(t,this.pM()),i===t&&this.Odt.r5(),this.WWt.tkt(),this.jHt(),s.dispatchEvent(this.dVt.beforelayoutchange),mG.df.Rf(!0),await t.m4(i,this.pM()),mG.df.Rf(!1),await t.T4(!1),s.dispatchEvent(this.dVt.layoutchange),this.m$(),this.Ejt=!0,this.jW(),this.eHt()}m$(){this.mjt=!0}mBt(){return this.cjt?this.cjt.mBt():null}gBt(){return this.cjt?this.cjt.gBt():null}pM(){return this.cjt?this.cjt.pM():null}qF(){const t=this.cjt;if(!t||t.dBt())return;const s=this.pM(),i=s.sD(),e=i&&s.Bv(),n=i&&s.sb();if(e&&s.WO(),!this.mjt&&!this.j$t())return void s.Fv();const r=this.o3.BN();this.qjt++,s.OO();const h=this.yH();h&&gG.YHt(),this.mjt=!1;let o=null;e&&(o=t.PBt().IP(),s.tD(o));let a=null;n&&(a=s.eUt(2*(1+r.t4())),s.d2(0,1)),this.h1()&&"low"===t.w2()?s.qA(t.n2(),t.h2()):s.zA(),this.nUt(this.pM(),r),o&&s.iD(o),n&&(s.rUt(),this.cjt.ABt(a)),s.Av(),h&&(gG.hUt(),gG.oUt()),t&&t.OBt()}m5(t){return"low"===this.x$().w2()||t.Bv()&&(this.g2()||this.h1())}nUt(t,s){t.lb(),t.uO(),t.iO(1,1,1,1),t.UO(null),t.hO(null),t.FO(this.h1()),this.m5(t)&&s.d5(t);const i=s.h4();for(let e=1;e<i;++e)s.S5(t,e),t.sb()&&t.aUt();this.m5(t)||s.d5(t),s.w5(t)}lH(t,s,i){if(!this.Cjt)return!1;const e=!this.Ijt&&!this.Odt.mgt();let n=0;e&&(n=performance.now());const r=this.yH();r&&this.SY(!1);const h=this.Odt.ngt(this.o3,t,s,i);if(e){const t=performance.now()-n;this.Kjt+=t,r&&gG.lUt(t)}return r&&this.SY(!0),h}LIt(t,s,i){if(!this.zGt())return this.lH(t,s,i);if(this.ugt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.Ijt&&!this.Odt.mgt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Odt.ogt(this.o3,t,s,i)}async T$(t,s,i){if(!this.zGt())return this.lH(t,s,i);if(!this.Cjt)return!1;if(this.ugt())return this.Odt.agt(t,s,i);if(!this.BN())return this.Odt.rgt(t,s,i);const e=performance.now(),n=this.Odt.ogt(this.o3,t,s,i);let r=n.next();for(;!r.done;)await this.igt(r.value),r=n.next();return this.hN()||this.Odt.mgt()||(await this.Odt.cgt(),this._jt&&!this.Ijt&&this.bHt()),this.Kjt+=performance.now()-e,r.value}kIt(t,s,i){const e=this.yH();e&&this.SY(!1);const n=this.Odt.fgt(this.o3,t,s,i);return e&&this.SY(!0),n}NIt(t,s,i){return this.Odt.dgt(this.o3,t,s,i)}$It(t){return this.Ojt.$u(t)}Zmt(t){this.QWt.push(t)}Qmt(){if(!this.QWt.length)throw new Error("layout stack empty");this.QWt.pop()}h$(){return this.QWt.length?this.QWt.at(-1):this.BN()}aN(t){return t&&-1!==t.gN()?this.Njt*t.gN():this.$jt}c8(){return this.$jt}f8(){return this.Njt}uN(){return this.kjt}gN(){return this.GAt}yN(t){(isNaN(t)||t<0)&&(t=0),this.GAt=t}PN(t){this.Wjt=Math.max(t,0)}RN(){return this.Wjt}DN(t){this.Bjt=Math.max(t,0)}ON(){return this.Bjt}SN(){return this.Jjt}vN(){return this.Xjt}xN(){return this.Zjt}uUt(){return this.Fjt}fN(){return this.jjt.qs()}cUt(){return this.Vjt.qs()}pN(){return this.Hjt.qs()}Mtt(){return this.Gjt}fUt(){return this.Tjt}dUt(){return this.njt}gk(){return this.xWt}wk(){return this.GWt}pUt(){return this.TWt}mUt(){return this.CWt}bk(){return this.IWt}e$(t){if(this.Qjt)throw new Error("cannot call while loading state - wait until afterload event");return this.hjt.get(t)||null}ZOt(t){if(this.Qjt)throw new Error("cannot call while loading state - wait until afterload event");this.hjt.delete(t)}X4(){this.hjt.clear();for(const t of this.zWt)if(!t.w0())for(const s of t.PW())this.hjt.set(s.BV(),s)}QBt(){return"preview"===this.uWt}yH(){return this.gWt}SB(){return this.uWt}bB(){return"nwjs"===this.SB()||this.cWt}sWt(){return"cordova"===this.uWt}gUt(){return"Android"===mG.Zs.Qs&&("cordova"===this.uWt||"playable-ad-single-file"===this.uWt||"playable-ad-zip"===this.uWt||"instant-games"===this.uWt)}yUt(){return this.DX}wUt(){return this.fWt}vB(){return this.dWt}SUt(){return this.pWt}fk(){return this.WWt}SEt(){return this.BWt.SEt()}bEt(){return this.BWt.bEt()}h1(){return this.fjt}bUt(){return this.pM().HS(this.X0())}WS(t){return this.pM().WS(t||this.X0())}vUt(){return this.Ejt}MUt(t){t=!!t,this.pjt!==t&&(this.pjt=t,this.VN().j5(),this.m$())}Rk(){return this.pjt}xUt(t){if(!this.qWt.has(t)){const s=()=>this.GUt(t);this.qWt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this.dw.ow(t);return s.xw()||s.Tw().then((()=>this.m$())),s}GUt(t){this.dw.cw(t)}HWt(t){const s=[];for(const i of t.LPt())for(const t of i.Xq()){const i=t.iz();s.push({source:t,width:i.jg(),height:i.Zg(),tag:t.gz()})}return{bw:s}}async UWt(t){const s=mG.Un(mG.Hd),i=[],e=new Map;for(const n of t.LPt())for(const t of n.Xq()){const n=t.iz().WEt();e.has(n)||(e.set(n,null),i.push(s.$u((async()=>{const t=await n.cZ();e.set(n,t)}))))}await Promise.all(i);const n=[];for(const i of t.LPt())for(const t of i.Xq())n.push(s.$u((async()=>{const s=t.iz(),i=e.get(s.WEt()),n=await s.jEt(i);return{Iw:await createImageBitmap(n)}})));const r=await Promise.all(n);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{bw:r}}TUt(t){this.tVt=t,this.sVt=!1}CUt(){this.tVt="",this.sVt=!0}IUt(t){this.iVt=t}WTt(t){this.CH=t}_Ut(){return this.eVt}UHt(){return!!(this.tVt||this.sVt||this.iVt||null!==this.CH)}async qHt(){if(this.tVt&&(this.jW(),await this.EUt(this.tVt),this.RUt()),this.iVt&&(await this.PUt(this.iVt),this.RUt(),this.yH()&&gG.AUt()),this.sVt){const t=await this.OUt();this.eVt=t,await this.T$(mG.E$._$.I$.DUt,null),this.eVt="",this.RUt()}if(null!==this.CH){this.jW();try{await this.FUt(this.CH),this.eVt=this.CH,await this.T$(mG.E$._$.I$.LUt,null),this.eVt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.T$(mG.E$._$.I$.kUt,null)}this.RUt()}}RUt(){this.tVt="",this.sVt=!1,this.iVt="",this.CH=null}BB(){return this.nVt||(this.nVt=localforage.Ci({name:"c3-localstorage-"+this.pUt(),description:this.gk()})),this.nVt}NUt(){return this.rVt||(this.rVt=localforage.Ci({name:"c3-savegames-"+this.pUt(),description:this.gk()})),this.rVt}async EUt(t){const s=await this.OUt();try{await this.NUt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.eVt=s,await this.T$(mG.E$._$.I$.DUt,null),this.eVt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.T$(mG.E$._$.I$.$Ut,null)}}async PUt(t){try{const s=await this.NUt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.FUt(s),this.eVt=s,await this.T$(mG.E$._$.I$.LUt,null),this.eVt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.T$(mG.E$._$.I$.kUt,null)}}async OUt(){const t={c3save:!0,version:1,rt:{time:this.fN(),timeRaw:this.cUt(),walltime:this.pN(),timescale:this.gN(),tickcount:this.Mtt(),next_uid:this.rjt,running_layout:this.BN().C0(),start_time_offset:Date.now()-this.Fjt},types:{},layouts:{},events:this.Odt.s3(),timelines:this.r9.s3(),user_script_data:null};for(const s of this.zWt)s.w0()||s.nAt()||(t.types[s.C0().toString()]=s.s3());for(const s of this.o3.qN())t.layouts[s.C0().toString()]=s.s3();const s=this.BUt("save");return s.saveData=null,await this.q4(s),t.user_script_data=s.saveData,JSON.stringify(t)}B4(){return this.Qjt}async FUt(t){const s=this.VN(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.jTt(),this.CRt.dispatchEvent(mG.Un(mG.Event,"beforeload"));for(const t of this.mHt())t.IV().nAt()||t.p6();const e=i.rt;this.jjt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.Vjt.Set(e.timeRaw),this.Hjt.Set(e.walltime),this.GAt=e.timescale,this.Gjt=e.tickcount,this.Fjt=Date.now()-e.start_time_offset;const n=e.running_layout;this.Qjt=!0;let r=!1;if(n!==this.BN().C0()){const t=s.O5(n);if(!t)return;await this.sUt(t),r=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),n=s.O5(i);n&&n.i3(e)}const h=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.dY(i);!e||e.w0()||e.nAt()||e.i3(s,h)}for(const t of this.o3.qN())for(const s of t.oj())s.e3();if(this.jW(),this.X4(),this.Qjt=!1,r){for(const t of this.mHt())t.W4();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.dY(i);!e||e.w0()||e.nAt()||e.lAt(s)}}this.rjt=e.next_uid,this.Odt.i3(i.events);for(const t of this.zWt)if(!t.w0()&&t.NV())for(const s of t.PW()){const i=s.jV();s.nOt();for(const e of t.f4().K4()){if(e===t)continue;const n=e.PW();if(i<0||i>=n.length)throw new Error("missing sibling instance");s.Z4(n[i])}}this.r9.i3(i.timelines),s.W5(),s.j5();for(const t of h)t.mOt();this.VTt(),this.CRt.dispatchEvent(mG.Un(mG.Event,"afterload")),this.G5(this.BUt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.dY(s);i&&i.aAt()}const o=this.BUt("load");o.saveData=i.user_script_data,await this.q4(o),this.m$()}WUt(t,s){return s.a$().bFt()-t.a$().bFt()}rLt(t,s){t.a$()&&(this.EVt.has(t)||(this.EVt.set(t,s),this.RVt.push(t)))}jTt(){this.EVt=new WeakMap,mG.bh(this.RVt)}VTt(t="full",s=null){this.RVt.sort(this.WUt);const i=this.RVt.length;for(const i of this.RVt)i.g6(this.EVt.get(i),t,s);for(const i of this.RVt)i.bOt(this.EVt.get(i),t,s);if(this.jTt(),i){this.jW(),this.X4();for(const t of this.o3.qN())for(const s of t.oj())s.f0(),s.p$()}}async jUt(t){const s=await Promise.all(t.map((async t=>{if(this.sWt()&&this.YK.dK()||"playable-ad-single-file"===this.SB()){const s=await this.YK.no(t);return URL.createObjectURL(s)}return new URL(t,location.href).toString()})));this.wVt.VUt(s)}HUt(t,s){this.wVt.UUt(t,s)}qUt(t,s){this.wVt.zUt(t,s)}JUt(t,s,i,e){return this.wVt.JUt(t,s,i,null,null,e)}YUt(t,s,i,e){return this.wVt.YUt(t,s,i,e)}XUt(){return this.wVt.KUt()}s$(t,s){this.Wc("runtime","invoke-download",{url:t,filename:s})}async jBt(t,s,i,e,n,r){if(e=e||s,n=n||i,this.xk())return(await this.y$("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:n,imageBitmapOpts:r})).imageBitmap;{const h=await self.C3_RasterSvgImageBlob(t,s,i,e,n);return r?await self.createImageBitmap(h,r):h}}async ZUt(t){return this.xk()?await this.y$("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}QUt(){this.lVt||(this.lVt=!0,this.Wc("runtime","enable-device-orientation"))}tqt(){this.uVt||(this.uVt=!0,this.Wc("runtime","enable-device-motion"))}$N(){return this.Djt()}sqt(t){this.Djt=t}MVt(){const t=this.pM();return{fps:this.SN(),tps:this.vN(),cpu:this.xN(),gpu:this.TN(),layout:this.BN()?this.BN().Ec():"",renderer:t.Bv()?t.uD():t.yBt()}}ugt(){return!!this.yH()&&gG.ugt()}igt(t){return this.zGt()?gG.igt(t):Promise.resolve()}NSt(){return!!this.zGt()&&gG.iqt()}eqt(t){this.yWt=!!t,this.nqt()}rqt(){return this.yWt}zGt(){return this.wWt}SY(t){t?this.SWt--:this.SWt++,this.nqt()}nqt(){this.wWt=this.yH()&&this.yWt&&0===this.SWt}iwt(){return this.yH()&&gG.iwt()}u2(){return this.yH()&&this.pM().sD()&&gG.u2()}async KHt(t){if(t)for(const s of t)await this.igt(s)}QHt(t){return this.KHt(this.CRt.Ef(t))}nmt(t){return this.Odt.nmt(t.name,t.params)}S$(t){if(this.xk())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}HB(){return this.CVt}BUt(t){const s=mG.Un(mG.Event,t,!1);return s.runtime=this.CVt,s}WVt(){this.CVt=new self.rk(this),this.pVt={pretick:this.BUt("pretick"),tick:this.BUt("tick"),tick2:this.BUt("tick2")}}HVt(){const t={};for(const s of this.zWt)t[s.Pmt()]={value:s.dW(),enumerable:!0,writable:!1};this.CVt.Lk(t)}UVt(){const t={};for(const s of this.$k().$mt())t[s.Pmt()]=s.Amt();this.CVt.kk(t)}XN(){return this._Vt}aW(t,s){this.IVt.set(t,s)}uj(t){return this.IVt.get(t)}fB(t){if(!(t instanceof self.yW))throw new TypeError("expected IObjectClass");const s=this.uj(t);if(!(s&&s instanceof mG.rut))throw new Error("invalid IObjectClass");return s}_W(t){if(!(t instanceof self.CV))throw new TypeError("expected IInstance");const s=this.uj(t);if(!(s&&s instanceof mG.Instance))throw new Error("invalid IInstance");return s}o$(t){if(!(t instanceof self.cq))throw new TypeError("expected IWorldInstance");const s=this.uj(t);if(!(s&&s instanceof mG.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=mG.iWt.AT,self.C3_InitRuntime=(t,s)=>t.IAt(s)}{const vG=self.Is;vG.SVt=class extends vG.Vn{constructor(t,s){super(),this.Nc=t,this.hqt=new Map,this.oqt=0,this.aqt=s.inputPort,s.outputPort.onmessage=t=>this.lqt(t),this.uqt=s.maxNumWorkers,this.cqt=1,this.fqt=!1,this.dqt=!1}KUt(){return this.uqt}VUt(t){this.aqt.postMessage({type:"_import_scripts",scripts:t})}UUt(t,s){this.aqt.postMessage({type:"_send_blob",blob:t,id:s})}zUt(t,s){this.aqt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}JUt(t,s,i,e,n,r){if(i||(i=[]),"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const h=this.oqt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:h,params:s,transferables:i},a=new Promise(((t,s)=>{this.hqt.set(h,{resolve:t,progress:e,reject:s,pqt:!1,mqt:r})}));return n&&n.Yf((()=>this.gqt(h))),this.aqt.postMessage(o,i),this.yqt(),a}YUt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const n={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.oqt++,params:s,transferables:i};this.aqt.postMessage(n,i)}gqt(t){const s=this.hqt.get(t);s&&(s.pqt=!0,s.resolve=null,s.progress=null,s.reject=null,this.aqt.postMessage({type:"_cancel",jobId:t}))}lqt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.wqt(e,s.result);break;case"progress":this.Sqt(e,s.progress);break;case"error":this.bqt(e,s.error);break;case"ready":this.vqt();break;default:throw new Error(`unknown message from worker '${i}'`)}}wqt(t,s){const i=this.hqt.get(t);if(!i)throw new Error("invalid job ID");i.pqt||i.resolve(s),this.hqt.delete(t)}Sqt(t,s){const i=this.hqt.get(t);if(!i)throw new Error("invalid job ID");!i.pqt&&i.progress&&i.progress(s)}bqt(t,s){const i=this.hqt.get(t);if(!i)throw new Error("invalid job ID");i.pqt||i.reject(s),this.hqt.delete(t)}vqt(){this.fqt&&(this.fqt=!1,this.cqt++,this.cqt<this.uqt?this.yqt():this.aqt.postMessage({type:"_no_more_workers"}))}Mqt(){let t=0;const s=[...this.hqt.values()].sort(((t,s)=>(t.mqt||1/0)-(s.mqt||1/0)));for(const i of s)t<(i.mqt||1/0)&&t++;return t}async yqt(){if(!(this.cqt>=this.uqt||this.fqt||this.dqt||this.Mqt()<=this.cqt))try{this.fqt=!0,(await this.Nc.y$("runtime","create-job-worker")).outputPort.onmessage=t=>this.lqt(t)}catch(t){this.dqt=!0,this.fqt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.cqt} so far)`,t)}}}}self.C3_Shaders={};{let MG=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};ForEachOrdered_SortInstances=MG;const xG=self.Is;let GG=null,TG="",CG="",IG=[],_G="",EG="",RG="";const PG=xG.Un(xG.Ept);xG.E$._$=class extends xG.WCt{constructor(t){super(t),this.Gpt=this.Nc.$k().yY(),this.udt=this.Nc.$k().Zk(),this.xqt=0,this.Gqt=0,this.Tqt=new Map}qn(){super.qn()}m$(){this.Nc.m$()}lH(t){this.Nc.lH(t,null,null)}Cqt(t,s){return GG&&t===TG&&s===CG||(GG=new RegExp(t,s),TG=t,CG=s),GG.lastIndex=0,GG}Iqt(t,s,i){if(t===_G&&s===EG&&i===RG)return IG;const e=this.Cqt(s,i);return IG=t.match(e),_G=t,EG=s,RG=i,IG}async _qt(t,s){if(!s.length)return;this.xqt+=s.length;const i=[];for(const e of s)i.push(t.y4(e));await xG.jh(i,(()=>{this.Gqt++})),this.Gqt++,this.Gqt===this.xqt&&(this.Gqt=0,this.xqt=0,this.Nc.lH(xG.E$._$.I$.Eqt,null,null))}AK(){return 0===this.xqt?1:this.Gqt/this.xqt}Rqt(t,s){for(const i of s)0===i.DW()&&t.v4(i)}Pqt(){return PG}Aqt(t){const s=this.Nc.$k(),i=s.Zk(),e=i.mY(),n=e.Uk(),r=n.pY(),h=e.upt(),o=i.gY(n),a=s.yY(),l=a.gY();if(l.Ipt(t),h)for(let i=0;i<t&&!l.CY();++i)s.vY(r),l.GY(i),n.MY(e,o),s.xY(r);else for(let s=0;s<t&&!l.CY();++s)l.GY(s),n.MY(e,o);return i.IY(),a.IY(),!1}*Oqt(t){const s=this.Nc.$k(),i=s.Zk(),e=i.mY(),n=e.Uk(),r=n.pY(),h=e.upt(),o=i.gY(n),a=s.yY(),l=a.gY();if(l.Ipt(t),h)for(let i=0;i<t&&!l.CY();++i)s.vY(r),l.GY(i),yield*n.YSt(e,o),s.xY(r);else for(let s=0;s<t&&!l.CY();++s)l.GY(s),yield*n.YSt(e,o);return i.IY(),a.IY(),!1}Dqt(){const t=this.Nc.$k(),s=t.Zk(),i=s.mY(),e=i.Uk(),n=e.pY(),r=i.upt(),h=s.gY(e),o=t.yY(),a=o.gY();if(r)for(let s=0;!a.CY();++s)t.vY(n),a.GY(s),e.MY(i,h)||a.Sz(),t.xY(n);else for(let t=0;!a.CY();++t)a.GY(t),e.MY(i,h)||a.Sz();return s.IY(),o.IY(),!1}*Fqt(){const t=this.Nc.$k(),s=t.Zk(),i=s.mY(),e=i.Uk(),n=e.pY(),r=i.upt(),h=s.gY(e),o=t.yY(),a=o.gY();if(r)for(let s=0;!a.CY();++s)t.vY(n),a.GY(s),(yield*e.YSt(i,h))||a.Sz(),t.xY(n);else for(let t=0;!a.CY();++t)a.GY(t),(yield*e.YSt(i,h))||a.Sz();return s.IY(),o.IY(),!1}Lqt(t,s,i){const e=this.Nc.$k(),n=e.Zk(),r=n.mY(),h=r.Uk(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY();if(c.wY(t),c.Ipt(i),i<s)if(a)for(let t=s;t>=i&&!c.CY();--t)e.vY(o),c.GY(t),h.MY(r,l),e.xY(o);else for(let t=s;t>=i&&!c.CY();--t)c.GY(t),h.MY(r,l);else if(a)for(let t=s;t<=i&&!c.CY();++t)e.vY(o),c.GY(t),h.MY(r,l),e.xY(o);else for(let t=s;t<=i&&!c.CY();++t)c.GY(t),h.MY(r,l);return n.IY(),u.IY(),!1}*kqt(t,s,i){const e=this.Nc.$k(),n=e.Zk(),r=n.mY(),h=r.Uk(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY();if(c.wY(t),c.Ipt(i),i<s)if(a)for(let t=s;t>=i&&!c.CY();--t)e.vY(o),c.GY(t),yield*h.YSt(r,l),e.xY(o);else for(let t=s;t>=i&&!c.CY();--t)c.GY(t),yield*h.YSt(r,l);else if(a)for(let t=s;t<=i&&!c.CY();++t)e.vY(o),c.GY(t),yield*h.YSt(r,l),e.xY(o);else for(let t=s;t<=i&&!c.CY();++t)c.GY(t),yield*h.YSt(r,l);return n.IY(),u.IY(),!1}Nqt(t){const s=t.AW(),i=s.PW();if(0===i.length)return!1;const e=this.Nc.$k(),n=e.Zk(),r=n.mY(),h=r.Uk(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY(),f=t.NV(),d=PG.gY();if(xG.Th(d,i),c.Ipt(d.length),a)for(let s=0,i=d.length;s<i&&!c.CY();++s){e.vY(o);const i=d[s];t.AW().Gdt(i),f&&i.awt(),c.GY(s),h.MY(r,l),e.xY(o)}else{s.vdt(!1);const t=s.Mdt();xG.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.CY();++s){const i=d[s];t[0]=i,f&&i.awt(),c.GY(s),h.MY(r,l)}}return n.IY(),u.IY(),xG.bh(d),PG.IY(),!1}*$qt(t){const s=t.AW(),i=s.PW();if(0===i.length)return!1;const e=this.Nc.$k(),n=e.Zk(),r=n.mY(),h=r.Uk(),o=h.pY(),a=r.upt(),l=n.gY(h),u=e.yY(),c=u.gY(),f=t.NV(),d=PG.gY();if(xG.Th(d,i),c.Ipt(d.length),a)for(let s=0,i=d.length;s<i&&!c.CY();++s){e.vY(o);const i=d[s];t.AW().Gdt(i),f&&i.awt(),c.GY(s),yield*h.YSt(r,l),e.xY(o)}else{s.vdt(!1);const t=s.Mdt();xG.bh(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.CY();++s){const i=d[s];t[0]=i,f&&i.awt(),c.GY(s),yield*h.YSt(r,l)}}return n.IY(),u.IY(),xG.bh(d),PG.IY(),!1}Bqt(t,s){const i=t.AW(),e=i.PW();if(0===e.length)return!1;const n=this.Nc.$k(),r=n.Zk(),h=n.Mmt(),o=r.mY(),a=o.Uk(),l=a.pY(),u=o.upt(),c=r.gY(a),f=n.yY(),d=f.gY(),p=t.NV(),m=PG.gY();xG.bh(m),d.Ipt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.cxt(1,t)]);if(m.sort(MG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.CY();++s){n.vY(l);const i=m[s][0];t.AW().Gdt(i),p&&i.awt(),d.GY(s),a.MY(o,c),n.xY(l)}else{i.vdt(!1);const t=i.Mdt();xG.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.CY();++s){const i=m[s][0];t[0]=i,p&&i.awt(),d.GY(s),a.MY(o,c)}}return r.IY(),f.IY(),xG.bh(m),PG.IY(),!1}*Wqt(t,s){const i=t.AW(),e=i.PW();if(0===e.length)return!1;const n=this.Nc.$k(),r=n.Zk(),h=n.Mmt(),o=r.mY(),a=o.Uk(),l=a.pY(),u=o.upt(),c=r.gY(a),f=n.yY(),d=f.gY(),p=t.NV(),m=PG.gY();xG.bh(m),d.Ipt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],h.cxt(1,t)]);if(m.sort(MG),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.CY();++s){n.vY(l);const i=m[s][0];t.AW().Gdt(i),p&&i.awt(),d.GY(s),yield*a.YSt(o,c),n.xY(l)}else{i.vdt(!1);const t=i.Mdt();xG.bh(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.CY();++s){const i=m[s][0];t[0]=i,p&&i.awt(),d.GY(s),yield*a.YSt(o,c)}}return r.IY(),f.IY(),xG.bh(m),PG.IY(),!1}jqt(t,s){let i=this.Tqt.get(t);return i||(s?(i={Vqt:null,Hqt:new Map},this.Tqt.set(t,i),i):null)}Uqt(t,s,i,e,n){s.Vk().cbt(i,s.Jk()),e&&t.xY(n)}*qqt(t,s,i,e,n){yield*s.Vk().fbt(i,s.Jk()),e&&t.xY(n)}}}{const AG=self.Is;AG.E$._$.nPt=class extends AG.Vn{constructor(t){super(),this.idt=t,this.Nc=t.L$(),this.CIt=t.SW()}uIt(){}qn(){this.idt=null,this.Nc=null,this.CIt=null}}}{const OG=self.Is;OG.E$._$.Instance=class extends OG.Vn{constructor(t,s){super(),this.di=t,this.idt=this.di.IV(),this.AIt=this.idt.jxt(),this.Nc=this.di.L$()}qn(){this.di=null,this.idt=null,this.AIt=null,this.Nc=null}}}{const DG=self.Is,FG=[];DG.E$._$.I$={zqt:()=>!0,J4:()=>!0,e5:()=>!0,EHt:()=>!0,RHt:()=>!0,hN(){return this.Nc.hN()},qwt(){const t=this.Nc.vmt();return!t.rpt()&&!t.ept()},Jqt(){const t=this.Nc.Mmt().KMt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.Mtt();return t.set("TriggerOnce_lastTick",i),this.Nc.vUt()||s!==i-1},Yqt(t){const s=this.Nc.Mmt().KMt(),i=s.get("Every_lastTime")||0,e=this.Nc.fN();s.has("Every_seconds")||s.set("Every_seconds",t);const n=s.get("Every_seconds");return e>=i+n?(s.set("Every_lastTime",i+n),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},ayt(t){const s=this.Nc.$k().Vmt(t);return s&&s.ayt()},QBt(){return this.Nc.QBt()},oi:()=>DG.Zs.oi,lHt:()=>!0,C$:()=>!0,Xqt:()=>!0,DUt:()=>!0,$Ut:()=>!0,LUt:()=>!0,kUt:()=>!0,Kqt(t){return!!this.Nc.e$(t)},Zqt(t){switch(t){case 0:return"browser"===DG.Zs.ri;case 1:return"iOS"===DG.Zs.Qs;case 2:return"Android"===DG.Zs.Qs;case 8:return"cordova"===DG.Zs.ri;case 9:return"scirra-arcade"===this.Nc.SB();case 10:return"nwjs"===DG.Zs.ri;case 13:return"windows-uwp"===this.Nc.SB();default:return!1}},Qqt(t,s,i){return this.Cqt(s,i).test(t)},tzt:(t,s,i)=>DG.compare(t,s,i),szt:(t,s,i)=>t>=s&&t<=i,izt:(t,s,i)=>DG.compare(t.Aet(),s,i),ezt:t=>!!t.Aet(),nzt(t,s){const i=this.Nc.fN();if(0===t){const t=this.Nc.Mmt().KMt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return DG.compare(i,t,s)},rzt:t=>isNaN(t),lCt:(t,s,i)=>DG.hr(DG.Qn(t),DG.Qn(i))<=DG.Qn(s),uCt:(t,s)=>DG.lr(DG.Qn(t),DG.Qn(s)),SGt(t,s,i){let e=DG.Qn(t),n=DG.Qn(s),r=DG.Qn(i);return DG.lr(r,n)?DG.lr(e,n)&&!DG.lr(e,r):!(!DG.lr(e,n)&&DG.lr(e,r))},hzt:(t,s)=>"number"==typeof t?0===s:1===s,ozt:t=>!!t,Bgt(t){return t.toLowerCase()===this.Nc.$k().Hgt()},azt(t,s,i,e){if(!t)return!1;const n=this.Pqt(),r=n.gY(),h=t.AW();DG.Th(r,h.PW()),h.pdt()&&DG.bh(h.xdt());const o=this.Nc.Mmt();let a=0;for(let t=0,n=r.length;t<n;++t){const n=r[t];r[a]=n,s=o.cxt(1,t),e=o.cxt(3,t),DG.compare(s,i,e)?++a:h.bdt(n)}DG.Sh(r,a),h.Tdt(r);const l=!!r.length;return DG.bh(r),n.IY(),t.nbt(),l},lzt(t,s){if(!t)return!1;const i=this.Pqt(),e=i.gY(),n=t.AW();DG.Th(e,n.PW()),n.pdt()&&DG.bh(n.xdt());const r=this.Nc.Mmt();let h=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[h]=s,r.cxt(1,t)?++h:n.bdt(s)}DG.Sh(e,h),n.Tdt(e);const o=!!e.length;return DG.bh(e),i.IY(),t.nbt(),o},uzt(t,s,i){if(!t)return!1;const e=t.AW(),n=e.PW();if(0===n.length)return!1;const r=this.Nc.Mmt();let h=null,o=0;for(let t=0,e=n.length;t<e;++t){const e=n[t];i=r.cxt(2,t),(null===h||0===s&&i<o||1===s&&i>o)&&(o=i,h=e)}return e.Rdt(h),t.nbt(),!0},czt(t,s){if(!t)return!1;const i=t.AW(),e=i.PW();if((s=Math.floor(s))>=e.length)return!1;const n=e[s];return i.Rdt(n),t.nbt(),!0},fzt(t){if(!t)return!1;const s=t.AW(),i=s.PW(),e=Math.floor(this.Nc.$N()*i.length);if(e>=i.length)return!1;const n=i[e];return s.Rdt(n),t.nbt(),!0},dzt:t=>!!t&&(!!t.DW()&&(t.AW().vdt(!0),t.nbt(),!0)),pzt(t,s,i){if(!t)return!1;const e=t.AW(),n=e.PW(),r=this.Nc.Uk().Pdt(),h=this.Nc.Mmt().qMt();e.pdt()?(DG.Th(FG,n),e.ddt(),e.vdt(!1)):r?(DG.Th(FG,e.xdt()),DG.bh(e.xdt())):(DG.Th(FG,e.Mdt()),DG.bh(e.Mdt()));for(let t=0,n=FG.length;t<n;++t){const n=FG[t];DG.xor(n.a$().SU(s,i),h)?e.Sdt(n):e.bdt(n)}return t.nbt(),DG.xor(!!e.Mdt().length,h)},mzt(t){if(!t)return!1;const s=t.w0();let i=null;const e=this.Nc.JPt();for(let n=e.length-1;n>=0;--n){const r=e[n];if(s){if(r.IV().Jxt(t)){i=r;break}}else if(r.IV()===t){i=r;break}}if(!i){const s=t.PW();s.length&&(i=s.at(-1))}return!!i&&(t.AW().Rdt(i),t.nbt(),!0)},gzt(t){return this.Nc.zGt()?this.Oqt(t):this.Aqt(t)},yzt(){return this.Nc.zGt()?this.Fqt():this.Dqt()},wzt(t,s,i){return this.Nc.zGt()?this.kqt(t,s,i):this.Lqt(t,s,i)},Vd(t){return this.Nc.zGt()?this.$qt(t):this.Nqt(t)},Szt(t,s,i){return this.Nc.zGt()?this.Wqt(t,i):this.Bqt(t,i)},bzt:t=>!!t&&t.Fj(),vzt:t=>!!t&&t.Vj(),Mzt:t=>!!t&&t.Bj(),xzt:t=>!!t&&!t.DW(),Gzt:(t,s,i)=>!!t&&DG.compare(100*t.sO(),s,i),Tzt(t){const s=this.Nc.BN();return!!s&&s.s4(t)},Eqt:()=>!0,Czt(){return this.xqt>0},Izt(t,s){const i=this.Nc.eOt();return!!i&&!!s&&!!i.nut(t,s)}}}{let LG=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},kG=function(t,s){return t[1]-s[1]};SortZOrderList=LG,SortInstancesByValue=kG;const NG=self.Is,$G=[],BG=[],WG=NG.Un(NG.Rect),jG=NG.Un(NG.Go),VG=[];NG.E$._$.hrt={_zt(t,s){t.pnt(s)},Ezt(t,s){t.Qi()&&"number"!=typeof s&&(s=parseFloat(s)),t.pnt(t.Aet()+s)},Rzt(t,s){t.Qi()&&t.pnt(t.Aet()-s)},Pzt(t,s){t.pnt(!!s)},Azt(t){t.pnt(!t.Aet())},Ozt(t){t.pnt(t.bmt())},Dzt(t){this.Nc.$k().Wmt(t)},Fzt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.LW(t,s,i,e,n,r);if(!h)return;n&&s.kW(h);const o=this.Nc.$k();o.NW(!0),h.$W(),o.NW(!1);const a=new Map;h.JAt(a,t,n);for(const[t,s]of a)t.AW().Cdt(s)},Lzt(t,s,i,e,n,r){if(!t||!s)return;const h=this.Nc.pHt(t);h&&NG.E$._$.hrt.Fzt.call(this,h,s,i,e,n,r)},g0(t,s,i,e,n,r,h,o,a,l,u){if(!t)return;const c=this.Nc.h$();let f=c;if(r){const t=this.Nc.VN().A5(r);if(!t)return;f=t}let d=null;if(("number"!=typeof h||h>=0)&&(d=f.l$(h),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.l$(o),!p))return;WG.set(s,i,e,n);const m=f.g0(t,WG,d,p,a,l,u);t.AW().Tdt(m),t.nbt()},kzt(){const t=this.Gpt;t.bpt()&&t.wpt().Sz()},lyt(t,s){const i=this.Nc.$k().Vmt(t);i&&(0===s?i.lyt(!1):1===s?i.lyt(!0):i.lyt(!i.ayt()))},Nzt(t){this.Nc.yN(t)},$zt(t,s){if(s<0&&(s=0),!t)return;const i=t.AW().PW();for(const t of i)t.yN(s)},Bzt(t){if(!t)return;const s=t.AW().PW();for(const t of s)t.zV()},ph(t,s){if(t<0)return;const i=this.Nc.$k().xgt();return s?i.ACt(t):i.OCt(t),!0},eN(t){return this.Nc.$k().xgt().DCt(t),!0},Wzt(){const t=this.Nc.$k();return t.xgt().FCt(t.$gt()),!0},sN(t){this.Nc.$k().sN(t)},async G$(t,s,i,e,n,r){const h=this.Nc.x$();h&&(this.m$(),await h.G$(0===t?"image/png":"image/jpeg",s/100,i,e,n,r),await this.Nc.T$(NG.E$._$.I$.C$,null))},jzt(t,s){if(t<=0||s<=0)return;this.Nc.iBt(t,s),this.Nc.h$().z2();const i=this.Nc.x$();i&&("off"===i.Y$t()||this.Nc.gHt(t,s),i.GR(i.SJ(),i.bJ(),!0),this.Nc.m$())},Vzt(t){const s=this.Nc.x$();s&&"off"!==s.Y$t()&&(s.lBt(0!==t?"high":"low"),s.GR(s.SJ(),s.bJ(),!0))},zit(t){this.Nc.TUt(t)},Hzt(){this.Nc.CUt()},Uzt(t){this.Nc.IUt(t)},qzt(t){this.Nc.WTt(t)},zzt(t){},Jzt(){for(const t of this.Nc.VN().qN())t.f5()},Yzt(t){this.Nc.MUt(0!==t)},Xzt(t,s){this.Nc.DN(1/t),this.Nc.PN(1/s)},Kzt(t,s){this.Nc.PN(t),this.Nc.DN(s)},Zzt(t){this.Nc._N(["vsync","unlimited-tick","unlimited-frame"][t])},Qzt(t,s){if(!t)return;const i=t.AW().PW(),e=$G,n=BG,r=this.Nc.h$(),h=t.w0(),o=t.Ivt();for(let t=0,r=i.length;t<r;++t){const r=i[t],a=r.a$();if(!a)continue;let l;l=h?r.Qrt(s+r.IV().Cvt(o)):r.Qrt(s),e.push([a.l$().ek(),a.u$()]),n.push([r,l])}if(!e.length)return;e.sort(LG),n.sort(kG);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=n[t][0],i=r.c$(e[t][0]),h=e[t][1],o=i.f$();o[h]!==s&&(o[h]=s,s.a$().d$(i,!0),i.p$(s),a=!0)}a&&this.Nc.m$(),NG.bh($G),NG.bh(BG)},aB(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.fk().aB(t,s)},tJt(t){if(this.Nc.Gw())return;const s=this.Nc.VN();s.JN()||s.YN(t)},sJt(t){if(this.Nc.Gw())return;const s=this.Nc.VN();if(s.JN())return;const i=s.A5(t);i&&s.YN(i)},iJt(t){if(this.Nc.Gw())return;const s=this.Nc.VN();if(s.JN())return;const i=s.qN(),e=i.indexOf(s.BN());if(t&&0===e)return;if(!t&&e===i.length-1)return;const n=i[e+(t?-1:1)];s.YN(n)},eJt(){if(this.Nc.Gw())return;const t=this.Nc.VN();t.JN()||(t.YN(t.BN()),this.Nc.$k().zmt())},nJt(t,s){t&&t.Oj(s)},rJt(t,s){t&&t.Nj(s)},hJt(t,s){t&&t.Wj(s)},oJt(t,s){t&&t.eO(s/100)},aJt(t,s){t&&t.Hj(s)},lJt(t,s){t&&t.zj(s)},uJt(t,s){t&&t.XW(NG.Qn(+s))},cJt(t,s,i){t&&(t.dV(!0),t.ZW(s),t.tj(i))},fJt(t){t&&t.dV(!1)},dJt(t,s,i){t&&t.K0(s/100,i/100)},pJt(t,s){t&&t.KM(+s)},mJt(t,s){t&&t.eV(1===s)},gJt(t,s){if(!t)return;jG.Qo(s),jG.Kn();const i=t.fV();i.Uo(jG)||(i.ko(jG),this.m$())},yJt(t,s){t&&t.hV(s)},wJt(t,s){t&&t.DM(s)},SJt(t,s,i){if(!t)return;const e=t.HW().Bnt(i);if(!e)return;const n=1===s;e.Qyt()!==n&&(e.TLt(n),t.Fq(),this.Nc.m$())},bJt(t,s,i,e){if(!t)return;const n=t.HW(),r=n.Bnt(s);if(!r)return;i=Math.floor(i);const h=r.PC().OC(i);h&&("color"===h?(jG.Qo(e),e=jG):"percent"===h&&(e/=100),n.kq(r.ek(),i,e)&&r.Qyt()&&this.Nc.m$())},vJt(t,s){t&&t.lV(s)},MJt(t){this.Nc.h$().JW(+t)},xJt(t){this.Nc.h$().XW(NG.Qn(+t))},GJt(t,s){const i=this.Nc.h$(),e=i.HW().Bnt(s);if(!e)return;const n=1===t;e.Qyt()!==n&&(e.TLt(n),i.Fq(),this.Nc.m$())},TJt(t,s,i){const e=this.Nc.h$().HW(),n=e.Bnt(t);if(!n)return;s=Math.floor(s);const r=n.PC().OC(s);r&&("color"===r?(jG.Qo(i),i=jG):"percent"===r&&(i/=100),e.kq(n.ek(),s,i)&&n.Qyt()&&this.Nc.m$())},CJt(t,s){this.Nc.h$().Sj(t/100,s/100)},IJt(t){const s=this.Nc.h$();0===t?s.Mj():s.xj()},_Jt(t){this.Nc.h$().ZW(t)},EJt(t){this.Nc.h$().tj(t)},RJt(t,s){const i=this.Nc.h$();i.ZW(t),i.tj(s)},PJt(t){if(!t)return;const s=t.FGt();if(!s)return;const i=s.a$();if(!i)return;const e=this.Nc.h$();e.ZW(i.UM()),e.tj(i.JM())},cj(t,s,i){const e=this.Nc.h$();try{e.cj(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},dj(t,s,i){if(!t)return;const e=this.Nc.h$();try{e.dj(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},mj(t){t&&this.Nc.h$().mj(t)},yj(){this.Nc.h$().yj()},async AJt(t){const s=this.Nc.BN();if(!s||!t||this.Nc.Gw())return;const i=t.w0()?t.Xwt():[t];await this._qt(s,i)},async OJt(t){await NG.E$._$.hrt.AJt.call(this,this.Nc.pHt(t))},DJt(t){const s=this.Nc.BN();if(!s||!t)return;const i=t.w0()?t.Xwt():[t];this.Rqt(s,i)},FJt(t){NG.E$._$.hrt.DJt.call(this,this.Nc.pHt(t))},LJt(){const t=this.Nc.BN();if(!t)return;const s=t.d4();this.Rqt(t,s)},async kJt(t){const s=this.Nc.BN();t&&s&&!this.Nc.Gw()&&await this._qt(s,t.u4())},async NJt(t){const s=this.Nc.BN(),i=this.Nc.VN().A5(t);i&&s&&!this.Nc.Gw()&&await this._qt(s,i.u4())},tN(t){const s=this.udt.Kk();if(s)switch(s.Qk()){case 1:"number"==typeof t&&s.tN(t);break;case 2:"string"==typeof t&&s.tN(t);break;case 3:s.tN(t)}},$Jt(t,s,i){const e=this.jqt(t.toLowerCase(),!0),n=e.Hqt,r=s.toLowerCase();n.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const h=NG.Bh(n.values())||e.Vqt;h&&0!==h.Yk()!=(0!==i.Yk())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):n.set(r,i)},BJt(t,s){const i=this.jqt(t.toLowerCase(),!0);i.Vqt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=NG.Bh(i.Hqt.values())||i.Vqt;e&&0!==e.Yk()!=(0!==s.Yk())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.Vqt=s},WJt(t,s,i){const e=this.Nc,n=e.zGt()?VG:null;i=Math.floor(i);const r=this.jqt(t.toLowerCase(),!1);if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),n;let h=r.Hqt.get(s.toLowerCase());if(!h){if(!r.Vqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),n;h=r.Vqt,i=0}if(!h.Cu())return n;if(0!==h.Yk())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),n;const o=e.$k(),a=o.Uk(),l=a.Hk(),u=l.length>0;u&&(h.Jk()?o.vY(l):o.vgt(l));const c=[],f=o.myt(a);if(f){const t=f.yyt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Aet())}const d=h.yyt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].bmt());return e.zGt()?this.qqt(o,h,c,u,l):this.Uqt(o,h,c,u,l)}}}{const HG=self.Is;HG.E$._$.ort={jJt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},R:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.$N()*t:this.Nc.$N()*(s-t)+t},cvt(...t){return t[Math.floor(this.Nc.$N()*t.length)]},VJt:(t,...s)=>("number"!=typeof t&&(t=0),s[t=HG.Kn(Math.floor(t),0,s.length-1)]),HJt:()=>Math.PI,UJt:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),qJt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(HG.Qn(t)),cos:t=>Math.cos(HG.Qn(t)),tan:t=>Math.tan(HG.Qn(t)),asin:t=>HG.tr(Math.asin(t)),acos:t=>HG.tr(Math.acos(t)),atan:t=>HG.tr(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Kn:(t,s,i)=>HG.Kn(t,s,i),vt:(t,s,i,e)=>HG.er(t,s,i,e),angle:(t,s,i,e)=>HG.tr(HG.rr(t,s,i,e)),It:(t,s,i)=>HG.It(t,s,i),mr:(t,s,i)=>HG.mr(t,s,i),yr:(t,s,i,e)=>HG.yr(t,s,i,e),wr:(t,s,i,e,n)=>HG.wr(t,s,i,e,n),Sr:(t,s,i)=>HG.Sr(t,s,i),zJt:(t,s)=>HG.tr(HG.hr(HG.Qn(t),HG.Qn(s))),JJt:(t,s,i)=>HG.tr(HG.ur(HG.Qn(t),HG.Qn(s),i)),YJt:(t,s,i)=>HG.tr(HG.ar(HG.Qn(t),HG.Qn(s),HG.Qn(i))),XJt:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,KJt:(t,s)=>(t|=0)^1<<s,ZJt:(t,s)=>(t|=0)&1<<(s|=0)?1:0,QJt:()=>"\n",tYt:t=>"string"==typeof t?t.toUpperCase():"",sYt:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",iYt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},eYt:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(HG.Ki(s),"i")):-1,nYt:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(HG.Ki(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(HG.Ki(s),"gi"),i):"string"==typeof t?t:"",rYt(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},hYt(t,s,i){const e=this.Cqt(s,i);return t?t.search(e):-1},oYt(t,s,i,e){const n=this.Cqt(s,i);return t?t.replace(n,e):""},aYt(t,s,i){const e=this.Iqt(t.toString(),s,i);return e?e.length:0},lYt(t,s,i,e){e=Math.floor(e);const n=this.Iqt(t.toString(),s,i);return!n||e<0||e>=n.length?"":n[e]},uYt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},cYt:t=>encodeURIComponent(t),fYt:t=>decodeURIComponent(t),oN(){return this.Nc.c8()},dYt(){return this.Nc.f8()},pYt(){return this.Nc.gN()},mYt(){return(Date.now()-this.Nc.uUt())/1e3},gYt:()=>Date.now(),time(){return this.Nc.fN()},yYt(){return this.Nc.Mtt()},wYt(){return this.Nc.dUt()},wN(){return this.Nc.SN()},SYt(){return this.Nc.xN()},bYt(){return this.Nc.TN()},vYt(){return this.Nc.x$().DB()},MYt(){return this.Nc.x$().kB()},xYt(){return this.Nc.Tk()},GYt(){return this.Nc.Ik()},TYt(){return this.Nc.Tk()},CYt(){return this.Nc.Ik()},IYt(){return this.Nc.h$().QW()},_Yt(){return this.Nc.h$().sj()},EYt(){return this.Nc.h$().Ec()},RYt(){return this.Nc.h$().YW()},PYt(){return HG.tr(this.Nc.h$().KW())},AYt(){return this.Nc.h$().jg()},OYt(){return this.Nc.h$().Zg()},DYt(){return 100*this.Nc.h$().H0()},FYt(){return 100*this.Nc.h$().U0()},LYt(t){const s=this.Nc.h$().l$(t);return s?s.V0().Za():0},kYt(t){const s=this.Nc.h$().l$(t);return s?s.V0().Qa():0},NYt(t){const s=this.Nc.h$().l$(t);return s?s.V0().tl():0},$Yt(t){const s=this.Nc.h$().l$(t);return s?s.V0().sl():0},BYt(t){const s=this.Nc.h$().l$(t);return s?s.V0().width():0},WYt(t){const s=this.Nc.h$().l$(t);return s?s.V0().height():0},jYt(t){const s=this.Nc.h$().l$(t);if(s){const t=s.V0();return(t.Za()+t.tl())/2}return 0},VYt(t){const s=this.Nc.h$().l$(t);if(s){const t=s.V0();return(t.Qa()+t.sl())/2}return 0},HYt(t,s,i){const e=this.Nc.h$().l$(t);return e?e.yV(s,i)[0]:0},UYt(t,s,i){const e=this.Nc.h$().l$(t);return e?e.yV(s,i)[1]:0},qYt(t,s,i){const e=this.Nc.h$().l$(t);return e?e.SV(s,i)[0]:0},zYt(t,s,i){const e=this.Nc.h$().l$(t);return e?e.SV(s,i)[1]:0},JYt(t,s,i,e){const n=this.Nc.h$(),r=n.l$(t),h=n.l$(s);if(!r||!h||r===h)return i;const[o,a]=r.SV(i,e);return h.yV(o,a)[0]},YYt(t,s,i,e){const n=this.Nc.h$(),r=n.l$(t),h=n.l$(s);if(!r||!h||r===h)return e;const[o,a]=r.SV(i,e);return h.yV(o,a)[1]},XYt(t){const s=this.Nc.h$().l$(t);return s?s.Uj():0},KYt(t){const s=this.Nc.h$().l$(t);return s?HG.tr(s.Yj()):0},ZYt(t){const s=this.Nc.h$().l$(t);return s?100*s.sO():0},QYt(t){const s=this.Nc.h$().l$(t);return s?s.Jj():0},tXt(t){const s=this.Nc.h$().l$(t);return s?s.QW():0},sXt(t){const s=this.Nc.h$().l$(t);return s?s.sj():0},iXt(t){const s=this.Nc.h$().l$(t);return s?100*s.Zj():0},eXt(t){const s=this.Nc.h$().l$(t);return s?100*s.sV():0},nXt(t){const s=this.Nc.h$().l$(t);return s?s.XM():0},rXt(t){const s=this.Nc.h$().l$(t);return s?s.ek():-1},hXt(){const t=this.Nc.x$();return t?t.DBt():""},oXt(t){const s=this.Gpt;if(!s.bpt())return 0;if(t){const i=s.Mpt(t);return i?i.ek():0}return s.wpt().ek()},aXt(){return this.Nc._Ut()},lXt(t,s,...i){const e=this.jqt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let n=e.Hqt.get(s.toLowerCase());if(!n){if(!e.Vqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;n=e.Vqt}const r=n.Yk(),h=n.Wk();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!n.Cu())return h;const o=this.Nc.$k(),a=o.Uk().Hk(),l=a.length>0;l&&(n.Jk()?o.vY(a):o.vgt(a));const u=n.yyt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].bmt());const c=n.Vk(),f=c.zk(c.Hk(),n.Jk(),r,h,...i);return l&&o.xY(a),f},uXt(){return this.Nc.lk().LN()},cXt(){return this.AK()},AI(){return this.Nc.gBt()?"webgpu":"webgl"},fXt(){return this.Nc.gBt()?this.Nc.gBt().yBt():this.Nc.mBt().uD()},dXt(){let t=this.Nc.pM().Vv();return Math.round(100*t/1048576)/100},pXt:(t,s,i)=>HG.Ir(t,s,i),mXt:(t,s,i)=>HG.Er(t/100,s/100,i/100),gXt:(t,s,i,e)=>HG._r(t/100,s/100,i/100,e/100),yXt:(t,s,i)=>HG.Er(t/255,s/255,i/255),wXt:(t,s,i,e)=>HG._r(t/255,s/255,i/255,e/255),SXt(){return this.Nc.gk()},bXt(){return this.Nc.wk()},vXt(){return this.Nc.Uk().Q3().Ec()},MXt(){return this.Nc.Uk().pSt()}}}{const UG=self.Is;UG.E$.Touch=class extends UG.WCt{constructor(t){super(t)}qn(){super.qn()}}}{let qG=function(){return YG.gW().yq()};GetTouchSdkInstance=qG;const zG=self.Is,JG=self.Ns;zG.E$.Touch.nPt=class extends zG.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}cIt(){return self.xXt}};let YG=null;self.xXt=class extends self.yW{constructor(t){super(t),YG=t,t.L$().XN().ZN=this}requestPermission(t){JG.ue(t);const s=qG();if("orientation"===t)return s.GXt(0);if("motion"===t)return s.GXt(1);throw new Error("invalid type")}}}{const XG=self.Is,KG="touch";XG.E$.Touch.Instance=class extends XG.RIt{constructor(t,s){super(t,KG),this.TXt=new Map,this.CXt=!1,this.IXt=!1,this._Xt=0,this.EXt=0,this.RXt=0,this.PXt=0,this.AXt=0,this.OXt=0,this.DXt=0,this.FXt=0,this.LXt=0,this.kXt=0,this.NXt=0,this.$Xt=0,this.BXt=0,this.WXt=0,this.jXt=0,this.VXt=0,this.HXt=0,this.UXt=[],s&&(this.CXt=s[0]),this.BIt("permission-result",(t=>this.qXt(t)));const i=this.L$().wf();this.Xf=new XG.zf(XG.Wf.qf(i,"pointerdown",(t=>this.zXt(t.data))),XG.Wf.qf(i,"pointermove",(t=>this.JXt(t.data))),XG.Wf.qf(i,"pointerup",(t=>this.YXt(t.data,!1))),XG.Wf.qf(i,"pointercancel",(t=>this.YXt(t.data,!0))),XG.Wf.qf(i,"deviceorientation",(t=>this.XXt(t.data))),XG.Wf.qf(i,"deviceorientationabsolute",(t=>this.KXt(t.data))),XG.Wf.qf(i,"devicemotion",(t=>this.ZXt(t.data))),XG.Wf.qf(i,"tick2",(t=>this.h6())))}qn(){this.TXt.clear(),super.qn()}zXt(t){if("mouse"===t.pointerType){if(!this.CXt)return;this.IXt=!0}const s=t.pointerId;if(this.TXt.has(s))return;const i=t.pageX-this.Nc.CB(),e=t.pageY-this.Nc._B(),n=performance.now(),r=this.TXt.size;this.NXt=r,this.$Xt=s;const h=XG.Un(XG.E$.Touch.QXt);h.IAt(n,i,e,s,r),this.TXt.set(s,h),this.lH(XG.E$.Touch.I$.tKt),this.lH(XG.E$.Touch.I$.sKt),this.WXt=i,this.jXt=e,this.HXt=0,this.lH(XG.E$.Touch.I$.iKt)}JXt(t){if("mouse"===t.pointerType&&!this.IXt)return;const s=this.TXt.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.RD()<2)return;const e=t.pageX-this.Nc.CB(),n=t.pageY-this.Nc._B();s.PZ(i,e,n,t.width,t.height,t.pressure)}YXt(t,s){if("mouse"===t.pointerType){if(!this.IXt)return;this.IXt=!1}const i=performance.now(),e=t.pointerId,n=this.TXt.get(e);if(n){if(this.NXt=n.eKt(),this.$Xt=n.Jz(),!s){const s=t.pageX-this.Nc.CB(),i=t.pageY-this.Nc._B();this.WXt=s,this.jXt=i,this.HXt=1,this.lH(XG.E$.Touch.I$.iKt)}if(this.lH(XG.E$.Touch.I$.nKt),this.lH(XG.E$.Touch.I$.rKt),!s){const t=n.hKt(i);"single-tap"===t?(this.lH(XG.E$.Touch.I$.oKt),this.WXt=n.UM(),this.jXt=n.JM(),this.lH(XG.E$.Touch.I$.aKt)):"double-tap"===t&&(this.lH(XG.E$.Touch.I$.lKt),this.WXt=n.UM(),this.jXt=n.JM(),this.lH(XG.E$.Touch.I$.uKt))}n.qn(),this.TXt.delete(e)}}GXt(t){return this.HIt("request-permission",{type:t}),new Promise(((s,i)=>{this.UXt.push({type:t,resolve:s,reject:i})}))}qXt(t){const s=t.result,i=t.type;this.BXt=i;const e=this.UXt.filter((t=>t.type===i));for(const t of e)t.resolve(s?"granted":"denied");this.UXt=this.UXt.filter((t=>t.type!==i)),s?(this.lH(XG.E$.Touch.I$.cKt),0===i?this.Nc.QUt():this.Nc.tqt()):this.lH(XG.E$.Touch.I$.fKt)}XXt(t){"number"==typeof t.webkitCompassHeading?this._Xt=t.webkitCompassHeading:t.absolute&&(this._Xt=t.alpha),this.EXt=t.alpha,this.RXt=t.beta,this.PXt=t.gamma}KXt(t){this._Xt=t.alpha}ZXt(t){const s=t.acceleration;s&&(this.AXt=s.x,this.OXt=s.y,this.DXt=s.z);const i=t.accelerationIncludingGravity;i&&(this.FXt=i.x,this.LXt=i.y,this.kXt=i.z)}h6(){const t=performance.now();let s=0;for(const i of this.TXt.values())i.RD()<=t-50&&i.dKt(t),i.pKt(t)&&(this.NXt=i.eKt(),this.$Xt=i.Jz(),this.VXt=s,this.lH(XG.E$.Touch.I$.mKt),this.WXt=i.UM(),this.jXt=i.JM(),this.lH(XG.E$.Touch.I$.gKt),this.VXt=0),++s}yKt(t){t=Math.floor(t);for(const s of this.TXt.values()){if(0===t)return s;--t}return null}wKt(t,s){return t>=0&&s>=0&&t<this.Nc.yHt()&&s<this.Nc.wHt()}QIt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.TXt.values()].map((t=>({name:"$"+t.Jz(),value:t.UM()+", "+t.JM()})))}]}}}{const ZG=self.Is;ZG.E$.Touch.I$={sKt:()=>!0,rKt:()=>!0,SKt(){return this.TXt.size>0},iKt(t,s){return!!t&&s===this.HXt&&!!this.wKt(this.WXt,this.jXt)&&this.Nc.fk().akt(t,[[this.WXt,this.jXt]],!1)},bKt(t){if(!t)return!1;const s=this.Nc.Mmt().qMt(),i=[...this.TXt.values()].filter((t=>this.wKt(t.UM(),t.JM()))).map((t=>[t.UM(),t.JM()]));return ZG.xor(this.Nc.fk().akt(t,i,s),s)},vKt(t,s,i){const e=this.yKt(t);return!!e&&ZG.compare(e.$q(),s,i)},MKt:()=>!0,xKt:()=>!0,GKt(t,s,i){this.Nc.QUt();let e=0;return e=0===t?this.EXt:1===t?this.RXt:this.PXt,ZG.compare(e,s,i)},TKt(t,s,i){this.Nc.tqt();let e=0;return e=0===t?this.FXt:1===t?this.LXt:2===t?this.kXt:3===t?this.AXt:4===t?this.OXt:this.DXt,ZG.compare(e,s,i)},tKt(t){return(t=Math.floor(t))===this.NXt},nKt(t){return(t=Math.floor(t))===this.NXt},CKt(t){return t=Math.floor(t),this.TXt.size>=t+1},mKt:()=>!0,oKt:()=>!0,lKt:()=>!0,gKt(t){return!!t&&!!this.wKt(this.WXt,this.jXt)&&this.Nc.fk().akt(t,[[this.WXt,this.jXt]],!1)},aKt(t){return!!t&&!!this.wKt(this.WXt,this.jXt)&&this.Nc.fk().akt(t,[[this.WXt,this.jXt]],!1)},uKt(t){return!!t&&!!this.wKt(this.WXt,this.jXt)&&this.Nc.fk().akt(t,[[this.WXt,this.jXt]],!1)},cKt(t){return this.BXt===t},fKt(t){return this.BXt===t}}}self.Is.E$.Touch.hrt={IKt(t){this.GXt(t)}};{const QG=self.Is;QG.E$.Touch.ort={_Kt(){return this.TXt.size},QTt(t){const s=this.yKt(this.VXt);return s?s.EKt(this.Nc.h$(),t,!0):0},tCt(t){const s=this.yKt(this.VXt);return s?s.EKt(this.Nc.h$(),t,!1):0},RKt(t,s){const i=this.yKt(t);return i?i.EKt(this.Nc.h$(),s,!0):0},PKt(t,s){const i=this.yKt(t);return i?i.EKt(this.Nc.h$(),s,!1):0},AKt(t,s){const i=this.TXt.get(t);return i?i.EKt(this.Nc.h$(),s,!0):0},OKt(t,s){const i=this.TXt.get(t);return i?i.EKt(this.Nc.h$(),s,!1):0},DKt(){const t=this.yKt(0);return t?t.UM():0},FKt(){const t=this.yKt(0);return t?t.JM():0},LKt(t){const s=this.yKt(t);return s?s.UM():0},kKt(t){const s=this.yKt(t);return s?s.JM():0},NKt(t){const s=this.TXt.get(t);return s?s.UM():0},$Kt(t){const s=this.TXt.get(t);return s?s.JM():0},BKt(t){const s=this.yKt(t);return s?s.$q():0},WKt(t){const s=this.TXt.get(t);return s?s.$q():0},jKt(t){const s=this.yKt(t);return s?QG.tr(s.KW()):0},VKt(t){const s=this.TXt.get(t);return s?QG.tr(s.KW()):0},HKt(){return this.Nc.QUt(),this._Xt},UKt(){return this.Nc.QUt(),this.EXt},qKt(){return this.Nc.QUt(),this.RXt},zKt(){return this.Nc.QUt(),this.PXt},JKt(){return this.Nc.tqt(),this.FXt},YKt(){return this.Nc.tqt(),this.LXt},XKt(){return this.Nc.tqt(),this.kXt},KKt(){return this.Nc.tqt(),this.AXt},ZKt(){return this.Nc.tqt(),this.OXt},QKt(){return this.Nc.tqt(),this.DXt},tZt(){return this.NXt},sZt(){return this.$Xt},iZt(t){const s=this.TXt.get(t);return s?s.jg():0},eZt(t){const s=this.TXt.get(t);return s?s.Zg():0},nZt(t){const s=this.TXt.get(t);return s?s.rZt():0}}}{const tT=self.Is,sT=15,iT=500,eT=333,nT=25;let rT=-1e3,hT=-1e3,oT=-1e4;tT.E$.Touch.QXt=class extends tT.Vn{constructor(){super(),this.hZt=0,this.NI=0,this.Fjt=0,this.CF=0,this.oZt=0,this.aZt=0,this.lZt=0,this.Ea=0,this.Ra=0,this.uZt=0,this.cZt=0,this.Ey=0,this.Ry=0,this.fZt=0,this.dZt=!1,this.pZt=!1}qn(){}IAt(t,s,i,e,n){this.hZt=e,this.NI=n,this.CF=t,this.oZt=t,this.Fjt=t,this.aZt=s,this.lZt=i,this.Ea=s,this.Ra=i,this.uZt=s,this.cZt=i}PZ(t,s,i,e,n,r){this.oZt=this.CF,this.CF=t,this.uZt=this.Ea,this.cZt=this.Ra,this.Ea=s,this.Ra=i,this.Ey=e,this.Ry=n,this.fZt=r,!this.pZt&&tT.er(this.aZt,this.lZt,this.Ea,this.Ra)>=15&&(this.pZt=!0)}Jz(){return this.hZt}eKt(){return this.NI}RD(){return this.CF}dKt(t){this.oZt=t}UM(){return this.Ea}JM(){return this.Ra}$q(){const t=tT.er(this.Ea,this.Ra,this.uZt,this.cZt),s=(this.CF-this.oZt)/1e3;return s>0?t/s:0}KW(){return tT.rr(this.uZt,this.cZt,this.Ea,this.Ra)}jg(){return this.Ey}Zg(){return this.Ry}rZt(){return this.fZt}pKt(t){return!this.dZt&&t-this.Fjt>=500&&!this.pZt&&tT.er(this.aZt,this.lZt,this.Ea,this.Ra)<15&&(this.dZt=!0,!0)}hKt(t){return this.dZt?"":t-this.Fjt<=333&&!this.pZt&&tT.er(this.aZt,this.lZt,this.Ea,this.Ra)<15?t-oT<=666&&tT.er(rT,hT,this.Ea,this.Ra)<25?(rT=-1e3,hT=-1e3,oT=-1e4,"double-tap"):(rT=this.Ea,hT=this.Ra,oT=t,"single-tap"):""}EKt(t,s,i){if(void 0===s)return t.c$(0).X2(this.Ea,this.Ra)[i?0:1];{const e=t.l$(s);return e?e.yV(this.Ea,this.Ra)[i?0:1]:0}}}}{const aT=self.Is;aT.E$.si=class extends aT.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const lT=self.Is;lT.E$.si.nPt=class extends lT.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const uT=self.Is,cT="browser";uT.E$.si.Instance=class extends uT.RIt{constructor(t,s){super(t,cT),this.mZt="",this.gZt=!1,this.yZt="",this.wZt="",this.SZt=!1,this.bZt=0,this.vZt=0,this.MZt=0,this.xZt=0,this.GZt=!1,this.TZt=!1,this.CZt=new Map,this.IZt=!1,this._Zt="",this.EZt=!1,this.WIt([["online-state",t=>this.RZt(t)],["backbutton",()=>this.PZt()],["sw-message",t=>this.AZt(t)],["hashchange",t=>this.OZt(t)],["install-available",()=>this.DZt()],["app-installed",t=>this.FZt(t)]]);const i=this.L$().wf();this.Xf=new uT.zf(uT.Wf.qf(i,"afterfirstlayoutstart",(()=>this.LZt())),uT.Wf.qf(i,"window-resize",(()=>this.y$t())),uT.Wf.qf(i,"window-focus",(()=>this.TVt())),uT.Wf.qf(i,"window-blur",(()=>this.GVt())),uT.Wf.qf(i,"suspend",(()=>this.kZt())),uT.Wf.qf(i,"resume",(()=>this.NZt()))),this.Nc.v$(this.VIt("get-initial-state",{exportType:this.Nc.SB()}).then((t=>{this.mZt=t.location,this.gZt=t.isOnline,this.yZt=t.referrer,this.wZt=t.title,this.SZt=t.isCookieEnabled,this.bZt=t.screenWidth,this.vZt=t.screenHeight,this.MZt=t.windowOuterWidth,this.xZt=t.windowOuterHeight,this.GZt=t.windowHasFocus,this.TZt=t.isConstructArcade})))}qn(){super.qn()}LZt(){this.jIt("ready-for-sw-messages")}async RZt(t){const s=!!t.isOnline;this.gZt!==s&&(this.gZt=s,this.gZt?await this.T$(uT.E$.si.I$.$Zt):await this.T$(uT.E$.si.I$.BZt))}async y$t(){await this.T$(uT.E$.si.I$.WZt)}async TVt(){this.GZt=!0,await this.T$(uT.E$.si.I$.jZt)}async GVt(){this.GZt=!1,await this.T$(uT.E$.si.I$.VZt)}kZt(){this.lH(uT.E$.si.I$.HZt)}NZt(){this.lH(uT.E$.si.I$.UZt)}async PZt(){await this.T$(uT.E$.si.I$.qZt)}AZt(t){const s=t.type;"downloading-update"===s?this.lH(uT.E$.si.I$.zZt):"update-ready"===s||"update-pending"===s?this.lH(uT.E$.si.I$.JZt):"offline-ready"===s&&this.lH(uT.E$.si.I$.YZt)}OZt(t){this.mZt=t.location,this.lH(uT.E$.si.I$.XZt)}DZt(){this.IZt=!0,this.lH(uT.E$.si.I$.KZt)}FZt(t){this.IZt=!1,this.lH(uT.E$.si.I$.ZZt)}QZt(){return this.EZt}tQt(t){t=!!t,this.EZt!==t&&(this.EZt=t,this.jIt("set-warn-on-close",{enabled:t}))}QIt(){const t="plugins.browser.debugger";return[{title:"plugins.browser.name",properties:[{name:t+".user-agent",value:navigator.userAgent},{name:t+".is-online",value:this.gZt},{name:t+".is-fullscreen",value:this.Nc.x$().eBt()}]}]}}}{const fT=self.Is;fT.E$.si.I$={sQt(){return this.gZt},$Zt:()=>!0,BZt:()=>!0,WZt:()=>!0,jZt:()=>!0,VZt:()=>!0,iQt(){return this.GZt},eQt(){return this.SZt},nQt(){return this.Nc.x$().eBt()},qZt:()=>!0,rQt(t){return(this.Nc.x$().SJ()<=this.Nc.x$().bJ()?0:1)===t},zZt:()=>!0,JZt:()=>!0,YZt:()=>!0,XZt:()=>!0,KZt:()=>!0,hQt(){return this.IZt},oQt(t){switch(t){case 0:return"accepted"===this._Zt;case 1:return"dismissed"===this._Zt;case 2:return"error"===this._Zt;case 3:return!0;default:return!1}},ZZt:()=>!0,aQt(t){const s=this.Nc.x$().rBt();switch(t){case 0:return"browser"===s;case 1:return"minimal-ui"===s;case 2:return"standalone"===s;case 3:return"fullscreen"===s;default:return!1}},lQt(){return this.QZt()},uQt(){return!this.Nc.hN()},HZt:()=>!0,UZt:()=>!0,cQt:()=>!1,fQt:()=>!1,dQt:()=>!1,pQt:()=>!1,mQt:()=>!1,gQt:()=>!0,yQt:()=>!0}}{const C3=self.Is,ORIENTATIONS=["portrait","landscape","portrait-primary","portrait-secondary","landscape-primary","landscape-secondary"];C3.E$.si.hrt={wQt(t){this.jIt("alert",{message:t.toString()})},SQt(){this.TZt||(this.Nc.yH()?self.wH.bQt():this.jIt("close"))},vQt(){this.jIt("set-focus",{isFocus:!0})},MQt(){this.jIt("set-focus",{isFocus:!1})},xQt(){this.TZt||this.jIt("navigate",{type:"back"})},GQt(){this.TZt||this.jIt("navigate",{type:"forward"})},TQt(){},CQt(){this.TZt||(this.Nc.yH()?this.Nc.FVt({type:"reload"}):this.jIt("navigate",{type:"reload"}))},IQt(t,s){this.HIt("navigate",{type:"url",url:t,target:s,exportType:this.Nc.SB()})},_Qt(t,s){this.HIt("navigate",{type:"new-window",url:t,tag:s,exportType:this.Nc.SB()})},EQt(t,s){t>=2&&(t+=1),6===t&&(t=2),1===t&&(t=0);const i=C3.Kkt.cBt(t);this.Nc.x$().oBt(i),this.HIt("request-fullscreen",{navUI:s})},RQt(){this.HIt("exit-fullscreen")},PQt(t){const s=t.split(",");for(let t=0,i=s.length;t<i;++t)s[t]=parseInt(s[t],10);this.HIt("vibrate",{pattern:s})},async s$(t,s){if(!t||!s)return;const i=await this.Nc.lk().j$(t);this.Nc.s$(i,s)},AQt(t,s,i){if(!i)return;const e=`data:${s},${encodeURIComponent(t)}`;this.Nc.s$(e,i)},OQt(t,s){s=s.toString(),0===t?console.log(s):1===t?console.warn(s):2===t&&console.error(s)},DQt(t){console.group(t)},FQt(){console.groupEnd()},LQt(jsStr){try{eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}},kQt(t){if((t=Math.floor(t))<0||t>=ORIENTATIONS.length)return;const s=ORIENTATIONS[t];this.HIt("lock-orientation",{orientation:s})},NQt(){this.HIt("unlock-orientation")},tB(t){this.Nc.lk().tB(t)},async $Qt(t,s,i,e){await this.VIt("set-document-css-style",{prop:C3.vo(t),value:s,selector:i,"is-all":0!==e})},async BQt(t,s,i){const e=await this.VIt("get-document-css-style",{prop:t,selector:s});e.isOk&&this.CZt.set(i.toLowerCase(),e.result.trim())},WQt(t){this.jIt("set-hash",{hash:t})},jQt(t,s){this.jIt("set-window-size",{windowWidth:t,windowHeight:s})},VQt(t,s){this.jIt("set-window-position",{windowX:t,windowY:s})},async HQt(){const t=await this.VIt("request-install");this._Zt=t.result,this.lH(C3.E$.si.I$.oQt)},UQt(t){this.tQt(t)}}}{const C3=self.Is;C3.E$.si.ort={URL(){return this.Nc.xk()?this.mZt:location.toString()},qQt(){return this.Nc.xk()?new URL(this.mZt).protocol:location.protocol},zQt(){return this.Nc.xk()?new URL(this.mZt).hostname:location.hostname},Port(){return this.Nc.xk()?new URL(this.mZt).port:location.port},JQt(){return this.Nc.xk()?new URL(this.mZt).pathname:location.pathname},YQt(){return this.Nc.xk()?new URL(this.mZt).hash:location.hash},Ys(){return this.Nc.xk()?new URL(this.mZt).search:location.search},XQt(t){const s=this.Nc.xk()?new URL(this.mZt).search:location.search,i=RegExp("[?&]"+t+"=([^&]*)").exec(s);return i?decodeURIComponent(i[1].replace(/\+/g," ")):""},KQt(){return this.yZt},ZQt(){return this.wZt},QQt:()=>navigator.language,Zs:()=>navigator.platform,t0t:()=>navigator.userAgent,s0t(jsStr){let result=0;try{result=eval(jsStr)}catch(t){console.error("Error executing JavaScript: ",t)}return"number"==typeof result||"string"==typeof result?result:"boolean"==typeof result&&result?1:0},CSSStyleValue(t){return this.CZt.get(t)||""},i0t:()=>navigator.appName,e0t:()=>navigator.appVersion,n0t:()=>navigator.product,r0t:()=>navigator.vendor,h0t:()=>1,o0t:()=>1/0,a0t(){const t=navigator.connection;return t&&(t.downlink||t.downlinkMax||t.bandwidth)||1/0},ConnectionType(){const t=navigator.connection;return t&&t.type||"unknown"},l0t:()=>self.devicePixelRatio,u0t(){return this.bZt},c0t(){return this.vZt},f0t(){return this.Nc.x$().SJ()},d0t(){return this.Nc.x$().bJ()},p0t(){return this.MZt},m0t(){return this.MZt},g0t(){return this.Nc.x$().rBt()},y0t(){return this._Zt}}}{const dT=self.Is;dT.E$.Text=class extends dT.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const pT=self.Is;pT.E$.Text.nPt=class extends pT.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}g4(t){}M4(){}}}{const mT=self.Is,gT=self.Ns,yT=[0,0,0],wT=0,ST=1,bT=2,vT=3,MT=4,xT=5,GT=6,TT=7,CT=8,IT=9,_T=10,ET=11,RT=12,PT=13,AT=15,OT=["left","center","right"],DT=["top","center","bottom"],FT=["ltr","rtl"],LT=["word","cjk","character"],kT=new mT.Rect,NT=new mT._l,$T=new mT.Go,BT=mT.Un(mT._a),WT=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]);mT.E$.Text.Instance=class extends mT.n_t{constructor(t,s){if(super(t),this.$c="",this.w0t=!0,this.S0t="Arial",this.b0t=12,this.v0t=0,this.lE=!1,this.uE=!1,this.PM=mT.Un(mT.Go),this.gE=0,this.yE=0,this.bE="word",this.vE=0,this.M0t="auto",this.x0t=1,this.G0t=null,this.T0t="",this.C0t=!1,this.I0t=!1,this._0t=null,this.E0t=-1,this.R0t=-1,this.P0t=0,this.A0t=mT.Un(mT.kw.qv,this.Nc.pM(),{timeout:5}),this.A0t.JE=()=>this.Nc.m$(),this.O0t=()=>this.D0t(),this.F0t=!1,s){this.$c=s[wT],this.w0t=!!s[ST],this.S0t=s[bT],this.b0t=s[vT],this.v0t=s[MT],this.lE=!!s[xT],this.uE=!!s[GT],this.gE=s[CT],this.yE=s[IT],this.bE=LT[s[_T]],this.vE=s[ET],this.L0t(this.Nc.dY(s[RT]));const t=s[TT];this.PM.Ro(t[0],t[1],t[2]),this.a$().Oj(s[PT]),this.I0t=!!s[AT]}this.k0t(),this.N0t()}qn(){this.L0t(null),this.$0t(),this._0t&&(this._0t.qn(),this._0t=null),this.A0t.qn(),this.A0t=null,super.qn()}k0t(){const t=this.A0t;t.jc(this.$c),t.ZE(this.w0t),this.A0t.iE()&&this.G0t?this.A0t.Bg(this.L$().xUt(this.G0t)):this.A0t.Bg(null),t.QE("nearest"!==this.Nc._k()),t.tR(this.S0t),t.nR(this.v0t),t.hR(this.lE),t.aR(this.uE),t.FM(this.PM),t.mR(OT[this.gE]),t.yR(DT[this.yE]),t.SR(this.bE),t.vR(FT[this.vE])}B0t(){const t=this.a$();this.A0t.sR(this.b0t),this.A0t.eR(t.KDt());const s=t.l$();let i;"auto"===this.M0t?i=s.U1(t.KH()):"fixed"===this.M0t&&(i=this.x0t),t.hq()&&i!==this.A0t.TR()&&t.QFt(!0),this.A0t.GR(t.jg(),t.Zg(),i)}L0t(t){t&&(t.w0()||t.SW().constructor!==mT.E$.Vnt)||t!==this.G0t&&(this.G0t&&this.G0t.wf().removeEventListener("animationframeimagechange",this.O0t),this.G0t=t,this.G0t&&this.G0t.wf().addEventListener("animationframeimagechange",this.O0t),this.k0t(),this.C0t=!1,this.Nc.m$())}D0t(){this.Nc.GUt(this.G0t),this.Nc.m$(),this.F0t=!0}N0t(){if(this.I0t){let t=this.$c;this.w0t&&(t=mT.pn.Dg(t)),this._0t?this._0t.jc(t):this._0t=mT.Un(mT.kc,this.Nc,t)}else this._0t&&(this._0t.qn(),this._0t=null)}Bx(t){const s=this.a$();this.B0t(),this.F0t&&(this.F0t=!1,this.A0t.iE()&&this.G0t&&this.A0t.Bg(this.L$().xUt(this.G0t)));const i=this.A0t.fT();if(!i)return;const e=s.l$();if(0===s.KW()&&0===e.KW()&&0===s.KH()&&!s.hq()&&e.n1()){const n=s.iU(),[r,h]=e.xV(n.$r(),n.Br()),[o,a]=e.xV(n.Vr(),n.Hr()),l=r-Math.round(r),u=h-Math.round(h);kT.set(r,h,o,a),kT.offset(-l,-u),NT.Yl(kT);const[c,f]=t.bO(t.$O());this.Nc.x$().dX(t,c,f),t.hO(i),t.ev(NT,this.A0t.sP()),e.mX(t)}else t.hO(i),s.hq()?this.W0t(s,t):this.j0t(s,t)}j0t(t,s){let i=t.iU();this.Nc.Rk()&&(i=this.V0t(i)),s.ev(i,this.A0t.sP())}W0t(t,s){const i=t.ZFt();if(t.tLt()){t.QH(kT,NT,!1);let s=NT;this.Nc.Rk()&&(s=this.V0t(s)),i.$x(t.oq(),s,this.A0t.sP()),t.QFt(!1)}i.Bx(s)}V0t(t){const s=t.$r()-Math.round(t.$r()),i=t.Br()-Math.round(t.Br());return 0===s&&0===i?t:(NT.S(t),NT.offset(-s,-i),NT)}d_t(){const t=this.A0t.fT();return t?[t.jg(),t.Zg()]:[100,100]}p_t(){return this.A0t.sP()}y_t(){return!1}hx(){const t={t:this.$c,c:this.PM.toJSON(),fn:this.S0t,ps:this.b0t};return this.w0t&&(t.bbc=this.w0t),0!==this.gE&&(t.ha=this.gE),0!==this.yE&&(t.va=this.yE),"word"!==this.bE&&(t.wr=this.bE),0!==this.v0t&&(t.lho=this.v0t),this.lE&&(t.b=this.lE),this.uE&&(t.i=this.uE),-1!==this.R0t&&(t.tw={st:this.E0t,en:this.R0t,l:this.P0t}),this.G0t&&(t.ioc=this.G0t.C0()),"fixed"===this.M0t&&(t.fs=this.x0t),t}ox(t){if(this.$0t(),this.$c=t.t,this.PM.wa(t.c),this.S0t=t.fn,this.b0t=t.ps,this.w0t=!!t.hasOwnProperty("bbc")&&t.bbc,this.gE=t.hasOwnProperty("ha")?t.ha:0,this.yE=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.bE="boolean"==typeof s?s?"word":"character":s}else this.bE="word";if(this.v0t=t.hasOwnProperty("lho")?t.lho:0,this.lE=!!t.hasOwnProperty("b")&&t.b,this.uE=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const s=t.tw;this.E0t=s.st,this.R0t=s.en,this.P0t=s.l}if(t.hasOwnProperty("ioc")){const s=this.L$().dY(t.ioc);s&&this.L0t(s)}else this.L0t(null);t.hasOwnProperty("fs")?(this.M0t="fixed",this.x0t=t.fs):this.M0t="auto",this.k0t(),this.N0t(),this.C0t=!1,-1!==this.R0t&&this.YIt()}Hrt(t){switch(t){case wT:return this.xR();case ST:return this.w0t;case bT:return this.H0t();case vT:return this.U0t();case MT:return this.q0t();case xT:return this.z0t();case GT:return this.J0t();case TT:return yT[0]=this.PM.No(),yT[1]=this.PM.$o(),yT[2]=this.PM.Bo(),yT;case CT:return this.Y0t();case IT:return this.X0t();case _T:return this.K0t();case AT:return this.Z0t()}}Xrt(t,s){switch(t){case wT:this.Q0t(s);break;case ST:if(this.w0t===!!s)return;this.w0t=!!s,this.k0t();break;case bT:this.t1t(s);break;case vT:this.s1t(s);break;case MT:this.i1t(s);break;case xT:this.e1t(s);break;case GT:this.n1t(s);break;case TT:const t=this.PM,i=s;if(t.No()===i[0]&&t.$o()===i[1]&&t.Bo()===i[2])return;this.PM.Ro(i[0],i[1],i[2]),this.k0t();break;case CT:this.r1t(s);break;case IT:this.h1t(s);break;case _T:this.o1t(s)}}t_t(t,s,i,e){0===s&&0===i&&0===e||t!==TT||(this.PM.Po(s,i,e),this.k0t())}Q0t(t){this.$c!==t&&(this.$c=t,this.A0t.jc(t),this.N0t(),this.C0t=!1,this.Nc.m$())}xR(){return this.$c}a1t(t,s){this.B0t(),this.Q0t(t),this.E0t=this.Nc.pN(),this.R0t=this.E0t+s/this.Vz().UV(),this.P0t=this.A0t.ER(),this.A0t.uR(0),this.YIt()}$0t(){this.E0t=-1,this.R0t=-1,this.P0t=0,this.A0t.uR(-1),this.OIt()}l1t(){-1!==this.R0t&&(this.$0t(),this.lH(mT.E$.Text.I$.u1t),this.Nc.m$())}t1t(t){this.S0t!==t&&(this.S0t=t,this.A0t.tR(t),this.Nc.m$())}H0t(){return this.S0t}e1t(t){t=!!t,this.lE!==t&&(this.lE=t,this.A0t.hR(t),this.Nc.m$())}z0t(){return this.lE}n1t(t){t=!!t,this.uE!==t&&(this.uE=t,this.A0t.aR(t),this.Nc.m$())}J0t(){return this.uE}s1t(t){this.b0t!==t&&(this.b0t=t,this.Nc.m$())}U0t(){return this.b0t}c1t(t){this.PM.Uo(t)||(this.PM.ko(t),this.A0t.FM(this.PM),this.Nc.m$())}f1t(){return this.PM}i1t(t){this.v0t!==t&&(this.v0t=t,this.k0t(),this.Nc.m$())}q0t(){return this.v0t}r1t(t){this.gE!==t&&(this.gE=t,this.k0t(),this.Nc.m$())}Y0t(){return this.gE}h1t(t){this.yE!==t&&(this.yE=t,this.k0t(),this.Nc.m$())}X0t(){return this.yE}d1t(t){this.o1t(LT[t])}o1t(t){this.bE!==t&&(this.bE=t,this.k0t(),this.Nc.m$())}K0t(){return this.bE}p1t(t){this.vE!==t&&(this.vE=t,this.k0t(),this.Nc.m$())}m1t(){return this.vE}g1t(t){this.I0t=!!t,this.N0t()}Z0t(){return this.I0t}y1t(t){this.M0t!==t&&(this.M0t=t,this.Nc.m$())}w1t(){return this.M0t}S1t(t){this.x0t!==t&&(this.x0t=t,"fixed"===this.M0t&&this.Nc.m$())}b1t(){return this.x0t}v1t(){return this.B0t(),this.A0t.CR()}M1t(){return this.B0t(),this.A0t._R()}x1t(t,s){this.B0t();const i=this.a$();BT.set(t-i.UM(),s-i.JM()),BT.rotate(-i.KW()),BT.offset(i.jg()*i.VH(),i.Zg()*i.qH()),BT.St(i.jg(),i.Zg()),BT.scale(this.A0t.jg(),this.A0t.Zg());const e=this.A0t.PR(BT.Oa(),BT.Fa());if(e){const t=e.Hy("tag");if(t)return t._g}return""}G1t(t,s,i){const e=this.x1t(s,i);return e&&mT.Ze(t,e)}T1t(t,s){this.B0t(),s=Math.floor(s);const i=this.A0t.OR(t,s);if(!i)return null;const e=this.a$(),n=this.A0t.dR(),r=i.$y(),h=i.Wy()-(i.Zg()-i.ty())*n,o=i.jg()*n/this.A0t.jg()*e.jg(),a=i.Zg()*n/this.A0t.Zg()*e.Zg();return BT.set(r,h),BT.St(this.A0t.jg(),this.A0t.Zg()),BT.scale(e.jg(),e.Zg()),BT.offset(-e.jg()*e.VH(),-e.Zg()*e.qH()),BT.rotate(e.KW()),BT.offset(e.UM(),e.JM()),{x:BT.Oa(),y:BT.Fa(),width:o,height:a}}C1t(t){return this.B0t(),this.A0t.DR(t)}I1t(t){let s=WT.get(t);return null===s?"":(s||(s="span"),`</${s||"span"}>`)}_1t(t,s){let i=WT.get(t);if(null===i)return"";switch(i||(i="span"),t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async E1t(){if(this.C0t)return this.T0t;const t=new mT.pn(this.$c,{dg:!0}).Cg(),s=new Map;let i='<span class="c3-text"';const e=[];e.push(`font-family: '${this.H0t()}';`),this.z0t()&&e.push("font-weight: bold;"),this.J0t()&&e.push("font-style: italic;"),"character"===this.K0t()&&e.push("word-break: break-all;"),i+=` style="${e.join(" ")}">`;const n=this.G0t?this.L$().xUt(this.G0t):null;if(this.G0t){const i=mT.Un(mT.Hd),e=[],r=new Map;for(const s of t)if(s.Xg()){const t=s.Xy(n);if(t){const s=t.Ow().iz().WEt();if(r.has(s))continue;r.set(s,null),e.push(i.$u((async()=>{const t=await s.cZ();r.set(s,t)})))}}await Promise.all(e);const h=[];for(const e of t)if(e.Xg()){const t=e.Xy(n);if(t){const e=t.Ow(),n=e.iz().WEt();h.push(i.$u((async()=>{const i=await e.iz().VEt(r.get(n));s.set(t,i)})))}}await Promise.all(h);for(const t of r.values())t instanceof ImageBitmap&&t.close&&t.close()}const r=new Map;for(const e of t){const t=e.qy();let h=[...r.keys()];h.reverse();for(const s of h)t.has(s)&&t.get(s)===r.get(s)||(r.delete(s),i+=this.I1t(s));for(const[s,e]of t)r.has(s)||(r.set(s,e),i+=this._1t(s,e));if(e.Jg()&&(i+=mT.Em(mT.Im(e.yy().join("")),"\n","<br>")),e.Xg()&&n){const r=e.Xy(n);if(r){const n=s.get(r);if(n){const s=[];let h="0.2em";const o=t.get("iconoffsety");if(o){let t=o.trim();h=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}s.push(`top: ${h}`),"nearest"===this.Nc._k()&&s.push("image-rendering: pixelated"),i+=`<img class="c3-text-icon" data-icon="${e.Yy()}" width="${r.jg()}" height="${r.Zg()}" style="${s.join(";")}" src="${n}">`}}}}const h=[...r.keys()];h.reverse();for(const t of h)i+=this.I1t(t);return i+="</span>",this.T0t=i,this.C0t=!0,this.T0t}d8(){const t=this.Nc.pN();if(t>=this.R0t)this.$0t(),this.lH(mT.E$.Text.I$.u1t),this.Nc.m$();else{let s=mT.gr(this.E0t,this.R0t,t,0,this.P0t);s=Math.floor(s),s!==this.A0t.cR()&&(this.A0t.uR(s),this.Nc.m$())}}QIt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.xR(),R1t:t=>this.Q0t(t)},{name:t+".properties.font.name",value:this.H0t(),R1t:t=>this.t1t(t)},{name:t+".properties.size.name",value:this.U0t(),R1t:t=>this.s1t(t)},{name:t+".properties.line-height.name",value:this.q0t(),R1t:t=>this.i1t(t)},{name:t+".properties.bold.name",value:this.z0t(),R1t:t=>this.e1t(t)},{name:t+".properties.italic.name",value:this.J0t(),R1t:t=>this.n1t(t)}]}]}cIt(){return self.P1t}};const jT=new WeakMap,VT=new Map([["left",0],["center",1],["right",2]]),HT=new Map([["top",0],["center",1],["bottom",2]]),UT=["ltr","rtl"];self.P1t=class extends self.cq{constructor(){super(),jT.set(this,self.CV.RV().yq())}get text(){return jT.get(this).xR()}set text(t){gT.ue(t);const s=jT.get(this);s.$0t(),s.Q0t(t)}A1t(t,s){gT.ue(t),gT.he(s);const i=jT.get(this);i.$0t(),i.a1t(t,s)}O1t(){jT.get(this).l1t()}set yX(t){gT.ue(t),jT.get(this).t1t(t)}get yX(){return jT.get(this).H0t()}set SX(t){jT.get(this).e1t(t)}get SX(){return jT.get(this).z0t()}set bX(t){jT.get(this).n1t(t)}get bX(){return jT.get(this).J0t()}set wX(t){gT.he(t),jT.get(this).s1t(t)}get wX(){return jT.get(this).U0t()}set D1t(t){if(gT.Te(t),t.length<3)throw new Error("expected 3 elements");$T.Ro(t[0],t[1],t[2]),jT.get(this).c1t($T)}get D1t(){const t=jT.get(this).f1t();return[t.No(),t.$o(),t.Bo()]}set lineHeight(t){gT.he(t),jT.get(this).i1t(t)}get lineHeight(){return jT.get(this).q0t()}set xX(t){gT.ue(t);const s=VT.get(t);if(void 0===s)throw new Error("invalid mode");jT.get(this).r1t(s)}get xX(){return OT[jT.get(this).Y0t()]}set verticalAlign(t){gT.ue(t);const s=HT.get(t);if(void 0===s)throw new Error("invalid mode");jT.get(this).h1t(s)}get verticalAlign(){return DT[jT.get(this).X0t()]}set GX(t){if(!LT.includes(t))throw new Error("invalid mode");jT.get(this).o1t(t)}get GX(){return jT.get(this).K0t()}set TX(t){gT.ue(t);const s=UT.indexOf(t);if(-1===s)throw new Error("invalid text direction");jT.get(this).p1t(s)}get TX(){return UT[jT.get(this).m1t()]}set F1t(t){jT.get(this).g1t(!!t)}get F1t(){return jT.get(this).Z0t()}L1t(t){gT.he(t);const s=jT.get(this);s.y1t("fixed"),s.S1t(t)}k1t(){jT.get(this).y1t("auto")}get _X(){return jT.get(this).v1t()}get EX(){return jT.get(this).M1t()}N1t(){const t=jT.get(this);return[t.v1t(),t.M1t()]}$1t(t,s,i){return gT.ue(t),gT.he(s),gT.he(i),jT.get(this).G1t(t,s,i)}B1t(t,s){return gT.he(t),gT.he(s),jT.get(this).x1t(t,s)}W1t(t,s=0){return gT.ue(t),gT.he(s),jT.get(this).T1t(t,s)}j1t(t){return gT.ue(t),jT.get(this).C1t(t)}V1t(t){const s=jT.get(this),i=s.L$().fB(t);s.L0t(i)}H1t(){return jT.get(this).E1t()}}}{const qT=self.Is;qT.E$.Text.I$={U1t(t,s){return s?this.$c===t:qT.Ze(this.$c,t)},q1t(){return-1!==this.R0t},u1t:()=>!0,z1t(t,s,i){return this.G1t(t,s,i)}}}{const zT=self.Is,JT=zT.Un(zT.Go);zT.E$.Text.hrt={jc(t){this.$0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.Q0t(t.toString())},J1t(t){this.$0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.Q0t(this.$c+t)},Y1t(t,s){this.$0t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.a1t(t.toString(),s)},X1t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.S0t&&i===this.lE&&e===this.uE||(this.t1t(t),this.e1t(i),this.n1t(e))},sR(t){this.s1t(t)},K1t(t){JT.Qo(t),JT.Kn(),this.c1t(JT)},Z1t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},Q1t(t){this.a$().DM(t),this.Nc.m$()},t2t(){this.l1t()},nR(t){this.i1t(t)},s2t(t){this.r1t(t)},i2t(t){this.h1t(t)},e2t(t){this.d1t(t)},vR(t){this.p1t(t)},n2t(t){this.L0t(t)},r2t(){return this.E1t()},h2t(t){this.g1t(t)},o2t(t,s){this.y1t(["auto","fixed"][t]),this.S1t(s)}}}{const YT=self.Is;YT.E$.Text.ort={Text(){return this.$c},a2t(){return this.w0t?YT.pn.Dg(this.$c):this.$c},l2t(){return this.S0t},u2t(){return this.b0t},c2t(){return this.v1t()},f2t(){return this.M1t()},d2t(){return this.v0t},p2t(t,s){return this.x1t(t,s)},m2t(t){return this.C1t(t)},g2t(t,s){const i=this.T1t(t,s);return i?i.x:0},y2t(t,s){const i=this.T1t(t,s);return i?i.y:0},w2t(t,s){const i=this.T1t(t,s);return i?i.width:0},S2t(t,s){const i=this.T1t(t,s);return i?i.height:0},b2t(){return this.T0t}}}{const XT=self.Is;XT.E$.Vnt=class extends XT.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const KT=self.Is,ZT=self.Ns,QT=[];KT.E$.Vnt.nPt=class extends KT.TIt{constructor(t){super(t),this.KRt=t.LPt()}qn(){KT.bh(this.KRt),super.qn()}uIt(){for(const t of this.KRt)t.ZEt(this.Nc)}g4(t){const s={Kx:this.Nc._k()};return Promise.all(this.KRt.map((i=>i.QEt(t,s))))}M4(){for(const t of this.KRt)t.tRt()}S4(){this.v2t()}v2t(){for(const t of this.idt.RW())t.yq().M2t()}nxt(t){KT.E$.Vnt.SCt(this,t)}Vxt(t){QT.push({EIt:null,x2t:!1,vW:[]})}G2t(t,s,i){const e=QT.at(-1);e.EIt=t,e.x2t=i,e.vW.push(s)}Hxt(t){const s=QT.pop(),i=s.EIt,e=s.x2t;if(!i)return;const n=new Map;for(const t of s.vW)t.JAt(n,i,e);for(const[t,s]of n)t.AW().Cdt(s)}T2t(t){const s=this.IV().WPt(t),i=this.L$();return s.sRt(0).iz().rX(i.pM(),{Kx:i._k()}).then((()=>this.v2t())),s}C2t(t){for(const s of this.idt.RW())s.yq().I2t(t);this.IV().jPt(t)}_2t(t,s){const i=this.idt.$Pt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.rRt(s);e<0&&(e+=i.Jq()+1);const n=KT.YEt.KEt(this.L$());i.iRt(n,e);const r=this.L$();n.iz().rX(r.pM(),{Kx:r._k()}).then((()=>this.v2t()));for(const t of this.idt.RW())t.yq().E2t();return n}R2t(t,s){const i=this.idt.$Pt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Jq())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.rRt(s);e<0&&(e+=i.Jq()),i.eRt(e);for(const t of this.idt.RW())t.yq().E2t()}cIt(){return self.P2t}};const tC=new WeakMap;self.P2t=class extends self.yW{constructor(t){super(t),tC.set(this,t.jxt())}A2t(t){ZT.ue(t);const s=tC.get(this).IV().$Pt(t);return s?s.hRt():null}O2t(){return tC.get(this).IV().NPt().map((t=>t.hRt()))}D2t(t){return ZT.ue(t),tC.get(this).T2t(t).hRt()}F2t(t){ZT.ue(t),tC.get(this).C2t(t)}L2t(t,s){if(ZT.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return tC.get(this)._2t(t,s).Kq()}k2t(t,s){if(ZT.ue(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");tC.get(this).R2t(t,s)}}}{const sC=self.Is,iC=self.Ns,eC=0,nC=1,rC=2,hC=3,oC=sC.Un(sC.Rect),aC=sC.Un(sC._l),lC=sC.Un(sC._a),uC=1,cC=2,fC=4;sC.E$.Vnt.Instance=class extends sC.n_t{constructor(t,s){super(t);let i=!0,e="",n=0,r=!0;s&&(i=!!s[eC],e=s[nC],n=s[rC],r=s[hC]),this.N2t=this.idt.$Pt(e)||this.idt.LPt()[0],this.$2t=sC.Kn(n,0,this.N2t.Jq()-1),this.B2t=this.N2t.sRt(this.$2t);const h=this.B2t.iz();this.W2t=h.fT(),this.j2t=h.sP(),this.V2t=h.g_t(),this.a_t(),t.qAt(cC,!0),t.qAt(uC,this.N2t.$q()>=0),this.H2t=Math.abs(this.N2t.$q()),this.U2t=this.N2t.Uq(),this.q2t=sC.Un(sC.Qf),this.z2t=0,this.J2t=0,this.Y2t="",this.X2t=-1,this.K2t="",this.Z2t=0;const o=this.a$();this.Q2t=o.iU(),o.Oj(i),o.wU(r),o.HH(this.B2t.VH()),o.zH(this.B2t.qH()),o.WFt(this.B2t.fz()),o.NH(),1===this.idt.kPt()&&1===this.idt.LPt()[0].Jq()||0===this.H2t||this.YIt()}qn(){this.N2t=null,this.B2t=null,this.W2t=null,this.q2t=null,super.qn()}f_t(){return this.B2t.iz()}vit(){return!0}oZ(){this.W2t=null}c_t(){this.M2t()}Bx(t){const s=this.W2t;if(null===s)return;t.hO(s);const i=this.a$();i.hq()?this.W0t(i,t):this.j0t(i,t)}j0t(t,s){let i=this.Q2t;this.Nc.Rk()&&(i=t.DFt(i)),s.gO(i,this.V2t)}W0t(t,s){const i=t.ZFt();if(t.tLt()){t.QH(oC,aC,!1);let s=aC;this.Nc.Rk()&&(s=t.DFt(s)),i.$x(t.oq(),s,this.V2t),t.QFt(!1)}i.Bx(s)}t3t(){return this.q2t.qs()}s3t(){return this.di.zAt(cC)}i3t(t){this.di.qAt(cC,t)}e3t(){return this.di.zAt(uC)}n3t(t){this.di.qAt(uC,t)}r3t(){return this.di.zAt(fC)}h3t(t){this.di.qAt(fC,t)}d8(){this.K2t&&this.o3t(),this.X2t>=0&&this.a3t();const t=this.H2t;if(!this.s3t()||0===t)return void this.OIt();const s=this.Nc.aN(this.di);this.q2t.$u(s);const i=this.t3t(),e=this.B2t,n=e.ez()/t;if(i<this.z2t+n)return;const r=this.N2t,h=this.U2t,o=r.Jq(),a=r.Vq(),l=r.Wq(),u=r.zq();this.e3t()?this.$2t++:this.$2t--,this.z2t+=n,this.$2t>=o&&(u?(this.n3t(!1),this.$2t=o-2):l?this.$2t=h:(this.J2t++,this.J2t>=a?this.l3t(!1):this.$2t=h)),this.$2t<0&&(u?(this.$2t=1,this.n3t(!0),l||(this.J2t++,this.J2t>=a&&this.l3t(!0))):l?this.$2t=h:(this.J2t++,this.J2t>=a?this.l3t(!0):this.$2t=h)),this.$2t=sC.Kn(this.$2t,0,o-1);const c=r.sRt(this.$2t);i>this.z2t+c.ez()/t&&(this.z2t=i),this.u3t(e,c)}l3t(t){this.$2t=t?0:this.N2t.Jq()-1,this.i3t(!1),this.Y2t=this.N2t.Ec(),this.h3t(!0),this._It("animationend",!1,{animationName:this.Y2t}),this.lH(sC.E$.Vnt.I$.c3t),this.lH(sC.E$.Vnt.I$.f3t),this.h3t(!1),this.J2t=0}u3t(t,s,i){if(t===s)return;const e=this.a$(),n=t.iz(),r=s.iz(),h=n.jg(),o=n.Zg(),a=r.jg(),l=r.Zg();i&&i.d3t?i.d3t(e,h,o,a,l):(h!==a&&e.Yg(e.jg()*(a/h)),o!==l&&e.Vg(e.Zg()*(l/o))),e.HH(s.VH()),e.zH(s.qH()),e.WFt(s.fz()),e.NH(),this.B2t=s,this.W2t=r.fT(),this.j2t=r.sP(),this.V2t=r.g_t();const u=this.Vz().knt();for(let i=0,e=u.length;i<e;++i)u[i].iEt(t,s);this._It("framechange",!1,{animationName:this.N2t.Ec(),p3t:this.$2t}),this.lH(sC.E$.Vnt.I$.m3t),this.Nc.m$()}g3t(t){this.i3t(!0),this.z2t=this.t3t(),1===t&&0!==this.$2t&&(this.X2t=0,this.r3t()||this.a3t()),this.YIt()}y3t(t,s,i){this.K2t=t,this.Z2t=s,this.YIt(),!i&&this.r3t()||this.o3t()}w3t(){return this.N2t}S3t(){return this.K2t?this.K2t:this.N2t.Ec()}I2t(t){sC.Ze(t,this.S3t())&&this.y3t(this.idt.VPt().Ec(),1,!0)}b3t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.idt.$Pt(this.S3t());if(!s)return;if(-1===(t=s.nRt(t)))return}isFinite(t)&&(this.X2t=t,this.r3t()||this.a3t())}E2t(){if(this.K2t||-1!==this.X2t)return;const t=this.B2t,s=this.N2t.sRt(sC.Kn(this.$2t,0,this.N2t.Jq()-1));t!==s&&this.u3t(t,s),this.N2t.Jq()>1&&this.H2t>0&&this.YIt()}v3t(){return this.$2t}M3t(){return this.B2t.gz()}x3t(t){this.H2t=Math.abs(t),this.n3t(t>=0),this.H2t>0&&this.YIt()}G3t(){return this.e3t()?this.H2t:-this.H2t}T3t(t){"string"==typeof t&&-1===(t=this.N2t.nRt(t))||(t=sC.Kn(Math.floor(t),0,this.N2t.Jq()-1),this.U2t=t)}C3t(){return this.U2t}o3t(t){const s=this.B2t,i=this.idt.$Pt(this.K2t);if(this.K2t="",!i)return;if(i===this.N2t&&this.s3t())return;this.N2t=i,this.n3t(i.$q()>=0),this.H2t=Math.abs(i.$q()),this.U2t=i.Uq(),this.$2t=sC.Kn(this.$2t,0,this.N2t.Jq()-1),1===this.Z2t&&(this.$2t=0),this.i3t(!0),this.z2t=this.t3t();const e=this.N2t.sRt(this.$2t);this.u3t(s,e,t)}a3t(t){const s=this.B2t,i=this.$2t;if(this.$2t=sC.Kn(Math.floor(this.X2t),0,this.N2t.Jq()-1),this.X2t=-1,!t&&i===this.$2t)return;const e=this.N2t.sRt(this.$2t);this.u3t(s,e),this.z2t=this.t3t()}M2t(){const t=this.B2t.iz();this.W2t=t.fT(),this.j2t=t.sP(),this.V2t=t.g_t(),this.a$().QFt(!0)}fT(){return this.W2t}sP(){return this.j2t}g_t(){return this.V2t}rz(){return this.B2t.rz()}nGt(t){const s=this.B2t,i=this.a$();let e=null;if("string"==typeof t)e=s.uz(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.lz(t-1)}let n=i.KH();if(!e)return[i.UM(),i.JM(),n];if(lC.S(e.yRt()),i.hq()){const[t,s,e]=i.oq().qx(lC.Oa(),lC.Fa());lC.set(t,s),n+=e}return lC.offset(-s.VH(),-s.qH()),lC.scale(i.jg(),i.Zg()),lC.rotate(i.KW()),lC.offset(i.UM(),i.JM()),[lC.Oa(),lC.Fa(),n]}I3t(){return this.a$().qFt().pu()}_3t(t){t=Math.floor(t);const s=this.a$(),i=s.qFt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const n=i.du();return[n[2*t+0]+s.UM(),n[2*t+1]+s.JM()]}QIt(){const t=sC.E$.Vnt.hrt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.N2t.Ec(),R1t:s=>this.s_t(t.E3t,s,0)},{name:s+".current-frame",value:this.$2t,R1t:s=>this.s_t(t.R3t,s)},{name:s+".is-playing",value:this.s3t(),R1t:s=>s?this.s_t(t.P3t,0):this.s_t(t.A3t)},{name:s+".speed",value:this.H2t,R1t:s=>this.s_t(t.O3t,s)},{name:s+".repeats",value:this.J2t,R1t:t=>this.J2t=t}]}]}hx(){const t={a:this.N2t.C0()};0!==this.z2t&&(t.fs=this.z2t);const s=this.t3t();0!==s&&(t.at=s),0!==this.$2t&&(t.f=this.$2t),0!==this.H2t&&(t.cas=this.H2t),1!==this.J2t&&(t.ar=this.J2t),0!==this.U2t&&(t.rt=this.U2t),this.s3t()||(t.ap=this.s3t()),this.e3t()||(t.af=this.e3t());const i=this.a$();return i.yU()&&(t.ce=i.yU()),t}ox(t){const s=this.IV().BPt(t.a);s&&(this.N2t=s),this.z2t=t.hasOwnProperty("fs")?t.fs:0,this.q2t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.$2t=sC.Kn(i,0,this.N2t.Jq()-1),this.H2t=t.hasOwnProperty("cas")?t.cas:0,this.J2t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.U2t=sC.Kn(e,0,this.N2t.Jq()-1),this.i3t(!t.hasOwnProperty("ap")||!!t.ap),this.n3t(!t.hasOwnProperty("af")||!!t.af);const n=this.N2t.sRt(this.$2t);this.B2t=n,this.M2t();const r=this.a$();r.HH(n.VH()),r.zH(n.qH()),r.WFt(n.fz()),r.wU(!!t.ce),this.s3t()&&this.YIt()}Hrt(t){const s=this.a$();switch(t){case hC:return s.yU();case rC:return sC.Kn(this.$2t,0,this.N2t.Jq()-1);case nC:return this.N2t.Ec()}}Xrt(t,s,i){const e=this.a$();switch(t){case hC:e.wU(!!s);break;case rC:{this.i3t(!1);const t=this.N2t.Jq()-1,e=s=sC.Kn(s,0,t),n=this.N2t.sRt(this.$2t),r=this.N2t.sRt(e);this.u3t(n,r,i),this.$2t=sC.Kn(e,0,t);break}case nC:this.K2t=s,this.o3t(i),this.N2t.Jq()>1&&this.N2t.$q()>0?this.YIt():this.OIt()}}cIt(){return self.D3t}};const dC=new WeakMap,pC=new Map([["current-frame",0],["beginning",1]]);self.D3t=class extends self.cq{constructor(){super(),dC.set(this,self.CV.RV().yq())}nz(){return dC.get(this).rz()}hz(t){return this.oz(t)[0]}az(t){return this.oz(t)[1]}F3t(t){return this.oz(t)[2]}oz(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return dC.get(this).nGt(t)}cz(){return dC.get(this).I3t()}dz(t){return iC.he(t),dC.get(this)._3t(t)[0]}mz(t){return iC.he(t),dC.get(this)._3t(t)[1]}pz(t){return iC.he(t),dC.get(this)._3t(t)}L3t(){dC.get(this).i3t(!1)}k3t(t="current-frame"){iC.ue(t);const s=pC.get(t);if(void 0===s)throw new Error("invalid mode");dC.get(this).g3t(s)}N3t(t,s="beginning"){iC.ue(t),iC.ue(s);const i=pC.get(s);if(void 0===i)throw new Error("invalid mode");const e=dC.get(this);if(!e.IV().$Pt(t))throw new Error(`animation name "${t}" does not exist`);e.y3t(t,i)}A2t(t){iC.ue(t);const s=dC.get(this).IV().$Pt(t);return s?s.hRt():null}get animation(){return dC.get(this).w3t().hRt()}get animationName(){return dC.get(this).S3t()}set p3t(t){iC.he(t),dC.get(this).b3t(t)}get p3t(){return dC.get(this).v3t()}set $3t(t){iC.ue(t),dC.get(this).b3t(t)}get $3t(){return dC.get(this).M3t()}set B3t(t){iC.he(t),dC.get(this).x3t(t)}get B3t(){return dC.get(this).G3t()}set W3t(t){iC.he(t),dC.get(this).T3t(t)}get W3t(){return dC.get(this).C3t()}get imageWidth(){return dC.get(this).f_t().jg()}get imageHeight(){return dC.get(this).f_t().Zg()}j3t(){const t=dC.get(this).f_t();return[t.jg(),t.Zg()]}async V3t(t){iC.$e(t,Blob);const s=dC.get(this),i=s.L$(),e=s.f_t(),n=sC.Un(sC.vEt);if(n.FEt(i,t),await n.rX(i.pM(),{Kx:i._k()}),s.zn())return void n.qn();e.LEt(n);const r=s.jxt();r.v2t(),r.IV().wf().dispatchEvent(new sC.Event("animationframeimagechange")),i.m$()}H3t(t,s){iC.ue(s),dC.get(this).a$().RFt(!!t,s)}}}{const mC=self.Is;mC.E$.Vnt.I$={U3t(t){return mC.Ze(this.S3t(),t)},q3t(t,s){return mC.compare(this.$2t,t,s)},z3t(t,s){if("string"!=typeof s)return!1;const i=this.B2t.gz();return mC.compare(i.toLowerCase(),t,s.toLowerCase())},J3t(t,s){return mC.compare(this.G3t(),t,s)},f3t(t){return mC.Ze(this.Y2t,t)},c3t:()=>!0,m3t:()=>!0,Y3t(){return this.a$().jg()<0},X3t(){return this.a$().Zg()<0},K3t:()=>!0,Z3t:()=>!0,yU(){return this.a$().yU()}}}{const gC=self.Is;gC.E$.Vnt.hrt={Q3t(t,s,i,e,n){if(!t||!s)return;const[r,h]=this.nGt(i),o=this.Nc.LW(t,s,r,h,e,n);if(!o)return;if(e&&s.kW(o),t.SW().QB()){const t=o.a$();t.XW(this.a$().KW()),t.NH()}const a=this.Nc.$k();a.NW(!0),o.$W(),a.NW(!1),t!==this.Nc.Gmt().IV()&&this.AIt.G2t(t,o,e)},A3t(){this.i3t(!1)},P3t(t){this.g3t(t)},E3t(t,s){this.y3t(t,s)},R3t(t){this.b3t(t)},O3t(t){this.x3t(t)},t4t(t){this.T3t(t)},s4t(t,s){try{0===t?this.jxt().T2t(s):this.jxt().C2t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},i4t(t,s,i){try{0===t?this.jxt()._2t(s,i):this.jxt().R2t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},e4t(t){const s=this.a$(),i=s.jg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Yg(e),s.NH())},n4t(t){const s=this.a$(),i=s.Zg(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Vg(e),s.NH())},JW(t){const s=this.B2t.iz(),i=this.a$(),e=i.jg()<0?-1:1,n=i.Zg()<0?-1:1,r=s.jg()*t*e,h=s.Zg()*t*n;i.jg()===r&&i.Zg()===h||(i.GR(r,h),i.NH())},async r4t(t,s,i){const e=this.B2t.iz(),n=this.a$(),r=this.Nc,h=this.AIt;if(e.TK()===t)return 0===s&&(n.GR(e.jg(),e.Zg()),n.NH()),void this.lH(gC.E$.Vnt.I$.K3t);const o=gC.Un(gC.vEt);try{if(await o.DEt(r,t),!o.sZ())throw new Error("image failed to load");if(this.zn())return void o.qn();await o.rX(r.pM(),{Kx:r._k()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.zn()||this.lH(gC.E$.Vnt.I$.Z3t))}this.zn()?o.qn():(e.LEt(o),h.v2t(),h.IV().wf().dispatchEvent(new gC.Event("animationframeimagechange")),r.m$(),0===s&&(n.GR(e.jg(),e.Zg()),n.NH()),await this.T$(gC.E$.Vnt.I$.K3t))},h4t(t){this.a$().wU(t)},RFt(t,s){this.a$().RFt(0===t,s)},Q1t(t){this.a$().DM(t),this.Nc.m$()}}}self.Is.E$.Vnt.ort={o4t(){return this.v3t()},a4t(){return this.M3t()},l4t(){return this.N2t.Jq()},u4t(){return this.N2t.Ec()},c4t(){return this.G3t()},f4t(){return this.N2t.$q()},d4t(t){return this.nGt(t)[0]},p4t(t){return this.nGt(t)[1]},m4t(t){return this.nGt(t)[2]},g4t(){return this.rz()},y4t(){return this.f_t().jg()},w4t(){return this.f_t().Zg()},S4t(t){return this._3t(t)[0]},b4t(t){return this._3t(t)[1]},v4t(){return this.I3t()}};{const yC=self.Is;yC.E$.Keyboard=class extends yC.WCt{constructor(t){super(t)}qn(){super.qn()}}}{let wC=function(){return bC.gW().yq()};GetKeyboardSdkInstance=wC;const SC=self.Is;self.Ns,SC.E$.Keyboard.nPt=class extends SC.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}cIt(){return self.M4t}};let bC=null;self.M4t=class extends self.yW{constructor(t){super(t),bC=t,t.L$().XN().keyboard=this}x4t(t){const s=wC();if("string"==typeof t)return s.G4t(t);if("number"==typeof t)return s.T4t(t);throw new TypeError("expected string or number")}}}{const vC=self.Is,MC="keyboard";vC.E$.Keyboard.Instance=class extends vC.RIt{constructor(t,s){super(t,MC),this.C4t=new Set,this.I4t=new Set,this._4t=0,this.E4t="",this.R4t="",this.P4t=!1;const i=this.L$().wf();this.Xf=new vC.zf(vC.Wf.qf(i,"keydown",(t=>this.A4t(t.data))),vC.Wf.qf(i,"keyup",(t=>this.O4t(t.data))),vC.Wf.qf(i,"window-blur",(()=>this.D4t())),vC.Wf.qf(i,"keyboard-blur",(()=>this.D4t()))),this.Nc.v$(this.HM())}qn(){super.qn()}async HM(){const t=await this.VIt("init");this.P4t=t.isKeyboardLockSupported}A4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.C4t.has(i)||(this.C4t.add(i),this.I4t.add(s),this.E4t=i,this._4t=s,this.R4t=e,this.lH(vC.E$.Keyboard.I$.F4t),this.lH(vC.E$.Keyboard.I$.L4t),this.lH(vC.E$.Keyboard.I$.k4t),this.lH(vC.E$.Keyboard.I$.N4t))}O4t(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.C4t.delete(i),this.I4t.delete(s),this.E4t=i,this._4t=s,this.R4t=e,this.lH(vC.E$.Keyboard.I$.$4t),this.lH(vC.E$.Keyboard.I$.B4t),this.lH(vC.E$.Keyboard.I$.W4t),this.lH(vC.E$.Keyboard.I$.j4t)}D4t(){for(const t of this.I4t)this.I4t.delete(t),this._4t=t,this.lH(vC.E$.Keyboard.I$.$4t),this.lH(vC.E$.Keyboard.I$.B4t),this.lH(vC.E$.Keyboard.I$.j4t);this.C4t.clear()}G4t(t){return this.C4t.has(t)}T4t(t){return this.I4t.has(t)}hx(){return{tk:this._4t,tkk:this.R4t}}ox(t){this._4t=t.tk,t.hasOwnProperty("tkk")&&(this.R4t=t.tkk)}QIt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this._4t},{name:t+".debugger.last-key-string",value:vC.E$.Keyboard.ort.V4t(this._4t)},{name:t+".debugger.last-typed-key",value:this.R4t}]}]}}}{const xC=self.Is,GC=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];xC.E$.Keyboard.I$={G4t(t){return this.I4t.has(t)},L4t(t){return this._4t===t},F4t:()=>!0,$4t:()=>!0,B4t(t){return this._4t===t},T4t(t){return t=Math.floor(t),this.I4t.has(t)},N4t(t){return this._4t===t},j4t(t){return this._4t===t},k4t(t){const s=GC[t];return this.E4t===s},W4t(t){const s=GC[t];return this.E4t===s},H4t(t){const s=GC[t];return this.C4t.has(s)},U4t(){return this.P4t},q4t:()=>!0,z4t:()=>!0}}{const TC=self.Is;TC.E$.Keyboard.hrt={async J4t(t){if(!this.P4t)return;let s=[];t&&(s=t.split(",")),(await this.VIt("lock-keyboard",{keysArr:s})).isOk?this.lH(TC.E$.Keyboard.I$.q4t):this.lH(TC.E$.Keyboard.I$.z4t)},Y4t(){this.P4t&&this.VIt("unlock-keyboard")}}}{let CC=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};StringFromCharCode=CC,self.Is.E$.Keyboard.ort={X4t(){return this._4t},V4t:t=>CC(t),K4t(){return this.R4t}}}{const IC=self.Is,_C="text-input";IC.E$.Z4t=class extends IC.gIt{constructor(t){super(t,_C),this.bIt("click",((t,s)=>t.Q4t(s))),this.bIt("dblclick",((t,s)=>t.t5t(s))),this.bIt("change",((t,s)=>t.s5t(s)))}qn(){super.qn()}}}{const EC=self.Is;EC.E$.Z4t.nPt=class extends EC.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const RC=self.Is,PC=self.Ns,AC=0,OC=1,DC=2,FC=3,LC=4,kC=5,NC=6,$C=7,BC=8,WC=9,jC=10,VC="text-input",HC=["text","password","email","number","tel","url","textarea","search"];RC.E$.Z4t.Instance=class extends RC.b_t{constructor(t,s){super(t,VC),this.$c="",this.i5t="",this.e5t="",this.xbt=!0,this.n5t=!1,this.r5t=!1,this.qc="text",this.G_t=!0,this.h5t=-1,this.Bc="",this.o5t="",s&&(this.$c=s[AC],this.i5t=s[OC],this.e5t=s[DC],this.a$().Oj(s[FC]),this.xbt=s[LC],this.n5t=s[kC],this.r5t=s[NC],this.qc=HC[s[$C]],this.G_t=s[BC],this.Bc=s[WC],this.o5t=s[jC]),this.F_t({type:this.qc,id:this.Bc,className:this.o5t})}qn(){super.qn()}L_t(){return{text:this.$c,placeholder:this.i5t,title:this.e5t,isEnabled:this.xbt,isReadOnly:this.n5t,spellCheck:this.r5t,maxLength:this.h5t}}async Q4t(t){this._It("click",!0),await this.T$(RC.E$.Z4t.I$.a5t)}async t5t(t){this._It("dblclick",!0),await this.T$(RC.E$.Z4t.I$.l5t)}async s5t(t){this.$c=t.text,this._It("change",!0),await this.T$(RC.E$.Z4t.I$.u5t)}Q0t(t){this.$c!==t&&(this.$c=t,this.$_t())}c5t(){return this.$c}f5t(t){this.i5t!==t&&(this.i5t=t,this.$_t())}d5t(){return this.i5t}p5t(t){this.e5t!==t&&(this.e5t=t,this.$_t())}m5t(){return this.e5t}bTt(t){t=!!t,this.xbt!==t&&(this.xbt=t,this.$_t())}MTt(){return this.xbt}g5t(t){t=!!t,this.n5t!==t&&(this.n5t=t,this.$_t())}y5t(){return this.n5t}w5t(t){t=Math.max(+t,-1),this.h5t!==t&&(this.h5t=t,this.$_t())}S5t(){return this.h5t}b5t(){Promise.resolve().then((()=>this.A_t("scroll-to-bottom")))}Bx(t){}hx(){return{t:this.$c,p:this.i5t,ti:this.e5t,e:this.xbt,r:this.n5t,sp:this.r5t,ml:this.h5t,type:this.qc,id:this.Bc}}ox(t){this.$c=t.t,this.i5t=t.p,this.e5t=t.ti,this.xbt=t.e,this.n5t=t.r,this.r5t=t.sp,this.h5t=t.hasOwnProperty("ml")?t.ml:-1,this.qc=t.type,this.Bc=t.id,this.$_t()}Hrt(t){switch(t){case AC:return this.$c;case OC:return this.i5t;case DC:return this.e5t;case LC:return this.xbt;case kC:return this.n5t;case NC:return this.r5t;case BC:return this.G_t}}Xrt(t,s){switch(t){case AC:if(this.$c===s)return;this.$c=s,this.$_t();break;case OC:if(this.i5t===s)return;this.i5t=s,this.$_t();break;case DC:if(this.e5t===s)return;this.e5t=s,this.$_t();break;case LC:if(this.xbt===!!s)return;this.xbt=!!s,this.$_t();break;case kC:if(this.n5t===!!s)return;this.n5t=!!s,this.$_t();break;case NC:if(this.r5t===!!s)return;this.r5t=!!s,this.$_t();break;case BC:this.G_t=!!s}}QIt(){const t=RC.E$.Z4t.hrt,s="plugins.textbox";return[{title:s+".name",properties:[{name:s+".properties.text.name",value:this.$c,R1t:s=>this.s_t(t.jc,s)},{name:s+".properties.enabled.name",value:this.xbt,R1t:s=>this.s_t(t.wCt,s)},{name:s+".properties.read-only.name",value:this.n5t,R1t:s=>this.s_t(t.v5t,s)}]}]}cIt(){return self.M5t}};const UC=new WeakMap;self.M5t=class extends self.pq{constructor(){super(),UC.set(this,self.CV.RV().yq())}set text(t){PC.ue(t),UC.get(this).Q0t(t)}get text(){return UC.get(this).c5t()}set placeholder(t){PC.ue(t),UC.get(this).f5t(t)}get placeholder(){return UC.get(this).d5t()}set x5t(t){PC.ue(t),UC.get(this).p5t(t)}get x5t(){return UC.get(this).m5t()}set isEnabled(t){UC.get(this).bTt(t)}get isEnabled(){return UC.get(this).MTt()}set G5t(t){UC.get(this).g5t(t)}get G5t(){return UC.get(this).y5t()}set maxLength(t){PC.he(t),UC.get(this).w5t(t)}get maxLength(){return UC.get(this).S5t()}T5t(){UC.get(this).b5t()}}}{const qC=self.Is;qC.E$.Z4t.I$={U1t(t,s){return 0===s?qC.Ze(this.$c,t):this.$c===t},u5t:()=>!0,a5t:()=>!0,l5t:()=>!0}}self.Is.E$.Z4t.hrt={jc(t){this.Q0t(t.toString())},J1t(t){""!==t&&this.Q0t(this.c5t()+t)},C5t(t){this.f5t(t)},I5t(t){this.p5t(t)},v5t(t){this.g5t(0===t)},_5t(){this.b5t()},E5t(t){this.w5t(t)}},self.Is.E$.Z4t.ort={Text(){return this.c5t()},R5t(){return this.S5t()}};{const zC=self.Is;zC.E$.PlatformInfo=class extends zC.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const JC=self.Is;JC.E$.PlatformInfo.nPt=class extends JC.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const YC=self.Is,XC="platform-info";YC.E$.PlatformInfo.Instance=class extends YC.RIt{constructor(t,s){super(t,XC),this.bZt=0,this.vZt=0,this.MZt=0,this.xZt=0,this.P5t=[0,0,0,0],this.A5t=!1,this.O5t=!1,this.WIt([["window-resize",t=>this.y$t(t)],["wake-lock-acquired",t=>this.D5t(t)],["wake-lock-error",t=>this.F5t(t)],["wake-lock-released",t=>this.L5t(t)]]),navigator.connection&&navigator.connection.addEventListener("change",(()=>this.k5t())),this.Nc.v$(this.VIt("get-initial-state").then((t=>{this.bZt=t.screenWidth,this.vZt=t.screenHeight,this.MZt=t.windowOuterWidth,this.xZt=t.windowOuterHeight,this.P5t=t.safeAreaInset,this.A5t=t.supportsWakeLock})))}qn(){super.qn()}y$t(t){this.MZt=t.windowOuterWidth,this.xZt=t.windowOuterHeight,this.P5t=t.safeAreaInset}async k5t(){await this.T$(YC.E$.PlatformInfo.I$.N5t)}async D5t(){this.O5t=!0,await this.T$(YC.E$.PlatformInfo.I$.$5t)}async F5t(){this.O5t=!1,await this.T$(YC.E$.PlatformInfo.I$.B5t)}async L5t(){this.O5t=!1,await this.T$(YC.E$.PlatformInfo.I$.W5t)}}}{const KC=self.Is;KC.E$.PlatformInfo.I$={j5t:()=>KC.Zs.oi,V5t:()=>"Windows"===KC.Zs.Qs,H5t:()=>"macOS"===KC.Zs.Qs,U5t:()=>"Linux"===KC.Zs.Qs,q5t:()=>"Chrome OS"===KC.Zs.Qs,z5t:()=>"Android"===KC.Zs.Qs,J5t:()=>"iOS"===KC.Zs.Qs,Y5t(){const t=this.Nc.SB();return"html5"===t||"scirra-arcade"===t||"preview"===t||"instant-games"===t},X5t(){return this.Nc.sWt()},K5t(){return this.Nc.bB()},Z5t(){return"windows-uwp"===this.Nc.SB()},Q5t(){return this.Nc.vB()},t6t(){return"macos-wkwebview"===this.Nc.SB()},s6t(){return"linux-cef"===this.Nc.SB()},N5t:()=>!0,$5t:()=>!0,B5t:()=>!0,W5t:()=>!0,i6t(){return this.O5t},e6t(){return this.A5t}}}self.Is.E$.PlatformInfo.hrt={n6t(){this.A5t&&this.HIt("request-wake-lock")},r6t(){this.A5t&&(this.O5t=!1,this.jIt("release-wake-lock"))}},self.Is.E$.PlatformInfo.ort={h6t(){return this.Nc.x$().MB()},o6t(){return this.Nc.x$().GB()},l0t(){return this.Nc.NB()},u0t(){return this.bZt},c0t(){return this.vZt},f0t(){return this.Nc.x$().SJ()},d0t(){return this.Nc.x$().bJ()},p0t(){return this.MZt},m0t(){return this.xZt},a6t(){return this.Nc.x$().RB()},l6t(){return this.Nc.x$().AB()},u6t(){return this.Nc.x$().DB()},c6t(){return this.Nc.x$().kB()},f6t:()=>navigator.connection&&navigator.connection.downlink||0,d6t:()=>navigator.connection&&navigator.connection.downlinkMax||0,ConnectionType:()=>navigator.connection&&navigator.connection.type||"unknown",p6t:()=>navigator.connection&&navigator.connection.effectiveType||"unknown",m6t:()=>navigator.connection&&navigator.connection.rtt||0,g6t:()=>navigator.hardwareConcurrency||0,y6t:()=>navigator.deviceMemory||0,w6t(){return this.P5t[0]},S6t(){return this.P5t[1]},b6t(){return this.P5t[2]},v6t(){return this.P5t[3]},M6t(){return this.Nc.SN()},x6t(){return this.Nc.vN()}};{const ZC=self.Is;ZC.E$.Date=class extends ZC.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const QC=self.Is;QC.E$.Date.nPt=class extends QC.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const tI=self.Is;tI.E$.Date.Instance=class extends tI.RIt{constructor(t,s){super(t)}}}{const sI=self.Is,iI=[];iI[0]=[t=>sI.E$.Date.ort.G6t(t),t=>sI.E$.Date.ort.T6t(t),t=>sI.E$.Date.ort.C6t(t),t=>sI.E$.Date.ort.I6t(t),t=>sI.E$.Date.ort._6t(t),t=>sI.E$.Date.ort.E6t(t),t=>sI.E$.Date.ort.R6t(t),t=>sI.E$.Date.ort.P6t(t)],iI[1]=[t=>sI.E$.Date.ort.A6t(t),t=>sI.E$.Date.ort.O6t(t),t=>sI.E$.Date.ort.D6t(t),t=>sI.E$.Date.ort.F6t(t),t=>sI.E$.Date.ort.L6t(t),t=>sI.E$.Date.ort.k6t(t),t=>sI.E$.Date.ort.N6t(t),t=>sI.E$.Date.ort.$6t(t)];const eI=t=>sI.E$.Date.ort.B6t(t);sI.E$.Date.I$={W6t:(t,s,i)=>sI.compare(t,s,i),j6t:(t,s,i)=>sI.compare(eI(t),s,eI(i)),V6t:(t,s,i,e)=>sI.compare(iI[1][e](t),s,iI[1][e](i)),H6t:(t,s,i,e,n)=>sI.compare(iI[n][e](eI(t)),s,iI[n][e](eI(i)))}}self.Is.E$.Date.hrt={};{const nI=self.Is,rI=self.Intl,hI=new Map;hI.set("local",new Map([["year",t=>new Date(t).getFullYear()],["month",t=>new Date(t).getMonth()],["date",t=>new Date(t).getDate()],["day",t=>new Date(t).getDay()],["hours",t=>new Date(t).getHours()],["minutes",t=>new Date(t).getMinutes()],["seconds",t=>new Date(t).getSeconds()],["milliseconds",t=>new Date(t).getMilliseconds()]])),hI.set("universal",new Map([["year",t=>new Date(t).getUTCFullYear()],["month",t=>new Date(t).getUTCMonth()],["date",t=>new Date(t).getUTCDate()],["day",t=>new Date(t).getUTCDay()],["hours",t=>new Date(t).getUTCHours()],["minutes",t=>new Date(t).getUTCMinutes()],["seconds",t=>new Date(t).getUTCSeconds()],["milliseconds",t=>new Date(t).getUTCMilliseconds()]]));const oI=new Map;oI.set("local",new Map([["year",(t,s)=>new Date(t).setFullYear(s)],["month",(t,s)=>new Date(t).setMonth(s)],["date",(t,s)=>new Date(t).setDate(s)],["hours",(t,s)=>new Date(t).setHours(s)],["minutes",(t,s)=>new Date(t).setMinutes(s)],["seconds",(t,s)=>new Date(t).setSeconds(s)],["milliseconds",(t,s)=>new Date(t).setMilliseconds(s)]])),oI.set("universal",new Map([["year",(t,s)=>new Date(t).setUTCFullYear(s)],["month",(t,s)=>new Date(t).setUTCMonth(s)],["date",(t,s)=>new Date(t).setUTCDate(s)],["hours",(t,s)=>new Date(t).setUTCHours(s)],["minutes",(t,s)=>new Date(t).setUTCMinutes(s)],["seconds",(t,s)=>new Date(t).setUTCSeconds(s)],["milliseconds",(t,s)=>new Date(t).setUTCMilliseconds(s)]]));const aI=function(t,s,i,e){i.includes(t)&&(e[s]=t)},lI=function(t,s){t&&("12"===t?s.hour12=!0:"24"===t&&(s.hour12=!1))},uI=function(t){try{return rI.getCanonicalLocales(t)}catch(t){return self.navigator.language}},cI=["full","long","medium","short"],fI=["full","long","medium","short"],dI=["long","short","narrow"],pI=["numeric","2-digit"],mI=["numeric","2-digit","long","short","narrow"],gI=["numeric","2-digit"],yI=["numeric","2-digit"],wI=["numeric","2-digit"],SI=["numeric","2-digit"];nI.E$.Date.ort={U6t:t=>new Date(t).toString(),q6t:t=>new Date(t).toDateString(),z6t:t=>new Date(t).toTimeString(),J6t:t=>new Date(t).toLocaleString(),Y6t:t=>new Date(t).toLocaleDateString(),X6t:t=>new Date(t).toLocaleTimeString(),K6t:t=>new Date(t).toUTCString(),B6t:t=>Date.parse(t),qs:(t,s,i,e,n,r,h)=>Date.UTC(t,s,i,e,n,r,h),Z6t:()=>Date.now(),Q6t(){return this.L$().bk()},t8t:()=>new Date(Date.now()).getTimezoneOffset(),G6t:t=>hI.get("local").get("year")(t),A6t:t=>hI.get("universal").get("year")(t),T6t:t=>hI.get("local").get("month")(t),O6t:t=>hI.get("universal").get("month")(t),C6t:t=>hI.get("local").get("date")(t),D6t:t=>hI.get("universal").get("date")(t),I6t:t=>hI.get("local").get("day")(t),F6t:t=>hI.get("universal").get("day")(t),_6t:t=>hI.get("local").get("hours")(t),L6t:t=>hI.get("universal").get("hours")(t),E6t:t=>hI.get("local").get("minutes")(t),k6t:t=>hI.get("universal").get("minutes")(t),R6t:t=>hI.get("local").get("seconds")(t),N6t:t=>hI.get("universal").get("seconds")(t),P6t:t=>hI.get("local").get("milliseconds")(t),$6t:t=>hI.get("universal").get("milliseconds")(t),s8t:(t,s)=>oI.get("local").get("year")(t,s),i8t:(t,s)=>oI.get("universal").get("year")(t,s),e8t:(t,s)=>oI.get("local").get("month")(t,s),n8t:(t,s)=>oI.get("universal").get("month")(t,s),r8t:(t,s)=>oI.get("local").get("date")(t,s),h8t:(t,s)=>oI.get("universal").get("date")(t,s),o8t(t,s){const i=nI.E$.Date.ort.G6t(t),e=nI.E$.Date.ort.T6t(t),n=nI.E$.Date.ort.C6t(t),r=nI.E$.Date.ort._6t(t),h=nI.E$.Date.ort.E6t(t),o=nI.E$.Date.ort.R6t(t),a=nI.E$.Date.ort.P6t(t),l=nI.E$.Date.ort.I6t(t);return new Date(i,e,n+(s-l),r,h,o,a).getTime()},a8t(t,s){const i=nI.E$.Date.ort.A6t(t),e=nI.E$.Date.ort.O6t(t),n=nI.E$.Date.ort.D6t(t),r=nI.E$.Date.ort.L6t(t),h=nI.E$.Date.ort.k6t(t),o=nI.E$.Date.ort.N6t(t),a=nI.E$.Date.ort.$6t(t),l=s-nI.E$.Date.ort.F6t(t);return nI.E$.Date.ort.qs(i,e,n+l,r,h,o,a)},l8t:(t,s)=>oI.get("local").get("hours")(t,s),u8t:(t,s)=>oI.get("universal").get("hours")(t,s),c8t:(t,s)=>oI.get("local").get("minutes")(t,s),f8t:(t,s)=>oI.get("universal").get("minutes")(t,s),d8t:(t,s)=>oI.get("local").get("seconds")(t,s),p8t:(t,s)=>oI.get("universal").get("seconds")(t,s),m8t:(t,s)=>oI.get("local").get("milliseconds")(t,s),g8t:(t,s)=>oI.get("universal").get("milliseconds")(t,s),y8t:(t,s)=>s-t,w8t:t=>Math.trunc(nI.E$.Date.ort.S8t(t)),b8t:t=>Math.trunc(nI.E$.Date.ort.v8t(t))%60,M8t:t=>Math.trunc(nI.E$.Date.ort.x8t(t))%60,G8t:t=>t%1e3,S8t:t=>t/36e5,v8t:t=>t/6e4,x8t:t=>t/1e3,T8t(t,s,i,e,n){const r=uI(t);if(!r)return;let h={};return aI.call(this,i,"dateStyle",cI,h),aI.call(this,e,"timeStyle",fI,h),lI.call(this,n,h),new rI.DateTimeFormat(r,h).format(s)},C8t(t,s,i,e,n,r,h,o,a,l){const u=uI(t);if(!u)return;const c={};return aI.call(this,i,"weekday",dI,c),aI.call(this,e,"year",pI,c),aI.call(this,n,"month",mI,c),aI.call(this,r,"day",gI,c),aI.call(this,h,"hour",yI,c),aI.call(this,o,"minute",wI,c),aI.call(this,a,"second",SI,c),lI.call(this,l,c),new rI.DateTimeFormat(u,c).format(s)}}}{const bI=self.Is;bI.E$.I8t=class extends bI.WCt{constructor(t){super(t)}qn(){super.qn()}}}{let vI=function(){return GI.gW().yq()};GetMouseSdkInstance=vI;const MI=self.Is,xI=self.Ns;MI.E$.I8t.nPt=class extends MI.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}cIt(){return self._8t}};let GI=null;self._8t=class extends self.yW{constructor(t){super(t),GI=t,t.L$().XN().KN=this}E8t(t){return vI().R8t(t)[0]}P8t(t){return vI().R8t(t)[1]}A8t(t){return vI().R8t(t)}O8t(t){return vI().D8t(t)}F8t(t){xI.ue(t),vI().L8t(t)}k8t(t){const s=vI(),i=s.L$().fB(t);s.N8t(i)}}}{const TI=self.Is,CI="mouse";let II=null;TI.E$.I8t.Instance=class extends TI.RIt{constructor(t,s){super(t,CI),this.$8t=[!1,!1,!1,!1,!1],this.B8t=0,this.W8t=0,this.j8t=0,this.HXt=0,this.V8t=0,this.H8t=0,this.U8t=0,this.q8t=0,this.z8t=!1,this.J8t=0,this.Y8t=0,this.WIt([["pointer-lock-change",t=>this.X8t(t)],["pointer-lock-error",t=>this.K8t(t)]]);const i=this.L$().wf();this.Xf=new TI.zf(TI.Wf.qf(i,"pointermove",(t=>this.JXt(t.data))),TI.Wf.qf(i,"pointerdown",(t=>this.zXt(t.data))),TI.Wf.qf(i,"pointerup",(t=>this.YXt(t.data))),TI.Wf.qf(i,"dblclick",(t=>this.t5t(t.data))),TI.Wf.qf(i,"wheel",(t=>this.Z8t(t.data))),TI.Wf.qf(i,"window-blur",(()=>this.GVt())))}qn(){super.qn()}zXt(t){"mouse"===t.pointerType&&(this.B8t=t.pageX-this.Nc.CB(),this.W8t=t.pageY-this.Nc._B(),this.Q8t(t.lastButtons,t.buttons))}JXt(t){this.J8t=t.movementX,this.Y8t=t.movementY,this.lH(TI.E$.I8t.I$.t7t),this.J8t=0,this.Y8t=0,"mouse"===t.pointerType&&(this.B8t=t.pageX-this.Nc.CB(),this.W8t=t.pageY-this.Nc._B(),this.Q8t(t.lastButtons,t.buttons))}YXt(t){"mouse"===t.pointerType&&this.Q8t(t.lastButtons,t.buttons)}Q8t(t,s){this.s7t(t,s,1,0),this.s7t(t,s,4,1),this.s7t(t,s,2,2),this.s7t(t,s,8,3),this.s7t(t,s,16,4)}s7t(t,s,i,e){!(t&i)&&s&i?this.i7t(e):t&i&&!(s&i)&&this.e7t(e)}i7t(t){this.$8t[t]=!0,this.lH(TI.E$.I8t.I$.n7t),this.j8t=t,this.HXt=0,this.lH(TI.E$.I8t.I$.r7t),this.lH(TI.E$.I8t.I$.h7t)}e7t(t){this.$8t[t]&&(this.$8t[t]=!1,this.j8t=t,this.lH(TI.E$.I8t.I$.o7t))}t5t(t){this.j8t=t.button,this.HXt=1,this.lH(TI.E$.I8t.I$.r7t),this.lH(TI.E$.I8t.I$.h7t)}Z8t(t){this.V8t=t.deltaY<0?1:0,this.H8t=t.deltaX,this.U8t=t.deltaY,this.q8t=t.deltaZ,this.lH(TI.E$.I8t.I$.a7t)}GVt(){for(let t=0,s=this.$8t.length;t<s;++t){if(!this.$8t[t])return;this.$8t[t]=!1,this.j8t=t,this.lH(TI.E$.I8t.I$.o7t)}}R8t(t){const s=this.Nc.BN(),i=this.B8t,e=this.W8t;if(void 0===t)return s.c$(0).X2(i,e);{const n=s.l$(t);return n?n.yV(i,e):[0,0]}}D8t(t){return t=Math.floor(t),!!this.$8t[t]}l7t(){return this.B8t>=0&&this.W8t>=0&&this.B8t<this.Nc.yHt()&&this.W8t<this.Nc.wHt()}L8t(t){II!==t&&(II=t,this.jIt("cursor",t))}async N8t(t){if(TI.Zs.oi||!t)return;const s=t.FGt();if(!s)return;const i=s.a$(),e=s.f_t();if(!i||!e)return;if(II===e)return;II=e;const n=`url(${await e.VEt()}) ${Math.round(i.VH()*e.jg())} ${Math.round(i.qH()*e.Zg())}, auto`;this.jIt("cursor",n)}X8t(t){this.u7t(t["has-pointer-lock"])}K8t(t){this.u7t(t["has-pointer-lock"]),this.lH(TI.E$.I8t.I$.c7t)}u7t(t){this.z8t!==t&&(this.z8t=t,this.z8t?this.lH(TI.E$.I8t.I$.f7t):this.lH(TI.E$.I8t.I$.d7t))}QIt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.B8t+","+this.W8t},{name:t+".debugger.left-button",value:this.$8t[0]},{name:t+".debugger.middle-button",value:this.$8t[1]},{name:t+".debugger.right-button",value:this.$8t[2]},{name:t+".debugger.button-4",value:this.$8t[3]},{name:t+".debugger.button-5",value:this.$8t[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Nc.BN().hj().map((t=>({name:"$"+t.Ec(),value:t.yV(this.B8t,this.W8t).join(", ")})))}]}}}{const _I=self.Is;_I.E$.I8t.I$={r7t(t,s){return this.j8t===t&&this.HXt===s},n7t:()=>!0,p7t(t){return this.$8t[t]},o7t(t){return this.j8t===t},m7t(t){const s=this.Nc.Mmt().qMt(),i=[];return this.l7t()&&i.push([this.B8t,this.W8t]),_I.xor(this.Nc.fk().akt(t,i,s),s)},h7t(t,s,i){if(t!==this.j8t||s!==this.HXt)return!1;if(!this.l7t())return!1;const e=this.B8t,n=this.W8t;return this.Nc.fk().akt(i,[[e,n]],!1)},a7t(t){return 2===t||this.V8t===t},f7t:()=>!0,d7t:()=>!0,c7t:()=>!0,g7t(){return this.z8t},t7t:()=>!0}}{const EI=self.Is,RI=["auto","pointer","text","crosshair","move","help","wait","none"],PI=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];EI.E$.I8t.hrt={y7t(t){this.L8t(RI[t])},w7t(t){this.L8t(PI[t])},S7t(t){this.N8t(t)},b7t(t){this.HIt("request-pointer-lock",{unadjustedMovement:t})},v7t(){this.jIt("release-pointer-lock")}}}self.Is.E$.I8t.ort={QTt(t){return this.R8t(t)[0]},tCt(t){return this.R8t(t)[1]},DKt(){return this.B8t},FKt(){return this.W8t},M7t(){return this.J8t},x7t(){return this.Y8t},G7t(){return this.H8t},T7t(){return this.U8t},C7t(){return this.q8t}};{const AI=self.Is;AI.E$.I7t=class extends AI.WCt{constructor(t){super(t)}qn(){super.qn()}}}{const OI=self.Is;OI.E$.I7t.nPt=class extends OI.TIt{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const DI=self.Is,FI="localstorage";DI.E$.I7t.Instance=class extends DI.RIt{constructor(t,s){super(t,FI),this._7t="",this.xI="",this.E7t=[],this.R7t="",this.P7t=!1,this.A7t=0,this.O7t=0,this.D7t=!1,s&&(this.D7t=s[0]);const i=this.Nc.BB();this.$B=null,this.D7t?this.$B=i.Ci({Ii:!0}):this.$B=i,this.F7t=new Map,this.L7t=!1,this.Nc.v$(this.HM())}async HM(){const t=await Promise.race([this.VIt("init"),DI.ph(3e3)]);t&&(this.P7t=t.isPersistent)}qn(){super.qn()}async k7t(t){this.R7t=this.N7t(t),await this.T$(DI.E$.I7t.I$.$7t)}N7t(t){return t?"string"==typeof t?t:"string"==typeof t.message?t.message:"string"==typeof t.name?t.name:"string"==typeof t.data?t.data:"unknown error":"unknown error"}QIt(){return this.L7t||this.B7t(),[{title:"plugins.localstorage.name",properties:[...this.F7t.entries()].map((t=>({name:"$"+t[0],value:t[1],R1t:s=>this.$B.setItem(t[0],s)})))}]}async B7t(){this.L7t=!0;try{const t=await this.$B.keys();t.sort(((t,s)=>{const i=t.toLowerCase(),e=s.toLowerCase();return i<e?-1:e<i?1:0}));const s=await Promise.all(t.map((t=>this.$B.getItem(t))));this.F7t.clear();for(let i=0,e=t.length;i<e;++i)this.F7t.set(t[i],s[i])}catch(t){console.warn("[C3 debugger] Error displaying local storage: ",t)}finally{this.L7t=!1}}}}{const LI=self.Is;LI.E$.I7t.I$={W7t(t){return this._7t===t},j7t:()=>!0,V7t(t){return this._7t===t},H7t:()=>!0,U7t(t){return this._7t===t},q7t:()=>!0,z7t:()=>!0,J7t:()=>!0,$7t:()=>!0,Y7t(t){return this._7t===t},X7t(t){return this._7t===t},K7t(t,s){return LI.compare(this._7t,t,s)},Z7t(t,s){return LI.compare(this.xI,t,s)},Q7t(){return this.O7t>0},t9t(){return this.A7t>0},s9t:()=>!0,i9t:()=>!0,e9t(){return this.P7t}}}{let kI=function(t){return"string"==typeof t||"number"==typeof t};IsExpressionType=kI;const NI=self.Is;NI.E$.I7t.hrt={async n9t(t,s){this.O7t++;try{const i=await this.$B.setItem(t,s);await this.$It((async()=>{this._7t=t,this.xI=i,await this.T$(NI.E$.I7t.I$.j7t),await this.T$(NI.E$.I7t.I$.W7t)}))}catch(t){await this.k7t(t)}finally{this.O7t--,0===this.O7t&&await this.T$(NI.E$.I7t.I$.s9t)}},async r9t(t,s){if(!s)return;const i=s.FGt(this.di);if(!i)return;const e=i.yq();if(!e)return;const n=e.h9t();this.O7t++;try{await this.$B.setItem(t,n),await this.$It((async()=>{this._7t=t,this.xI="",await this.T$(NI.E$.I7t.I$.j7t),await this.T$(NI.E$.I7t.I$.W7t)}))}catch(t){await this.k7t(t)}finally{this.O7t--,0===this.O7t&&await this.T$(NI.E$.I7t.I$.s9t)}},async o9t(t){this.A7t++;try{const s=await this.$B.getItem(t);await this.$It((async()=>{this._7t=t,this.xI=kI(s)?s:"",await this.T$(NI.E$.I7t.I$.H7t),await this.T$(NI.E$.I7t.I$.V7t)}))}catch(t){await this.k7t(t)}finally{this.A7t--,0===this.A7t&&await this.T$(NI.E$.I7t.I$.i9t)}},async a9t(t,s){if(!s)return;const i=s.FGt(this.di);if(!i)return;const e=i.yq();this.A7t++;try{let s=await this.$B.getItem(t);s=s instanceof ArrayBuffer?s:new ArrayBuffer(0),await this.$It((async()=>{this.xI="",this._7t=t,e.l9t(s),await this.T$(NI.E$.I7t.I$.H7t),await this.T$(NI.E$.I7t.I$.V7t)}))}catch(t){await this.k7t(t)}finally{this.A7t--,0===this.A7t&&await this.T$(NI.E$.I7t.I$.i9t)}},async u9t(t){try{const s=await this.$B.getItem(t);await this.$It((async()=>{this._7t=t,null==s?(this.xI="",await this.T$(NI.E$.I7t.I$.X7t)):(this.xI=kI(s)?s:"",await this.T$(NI.E$.I7t.I$.Y7t))}))}catch(t){await this.k7t(t)}},async Dc(t){try{await this.$B.removeItem(t),await this.$It((async()=>{this._7t=t,this.xI="",await this.T$(NI.E$.I7t.I$.q7t),await this.T$(NI.E$.I7t.I$.U7t)}))}catch(t){await this.k7t(t)}},async c9t(){try{await this.$B.clear(),await this.$It((async()=>{this._7t="",this.xI="",NI.bh(this.E7t),await this.T$(NI.E$.I7t.I$.z7t)}))}catch(t){await this.k7t(t)}},async f9t(){try{const t=await this.$B.keys();await this.$It((async()=>{this.E7t=t,await this.T$(NI.E$.I7t.I$.J7t)}))}catch(t){await this.k7t(t)}},async d9t(){const t=await this.VIt("request-persistent");t.isOk&&(this.P7t=t.isPersistent)},p9t(t){if(!this.D7t)return;let s;try{s=JSON.parse(t)}catch(t){return void console.error("[Local Storage] Failed to parse memory storage JSON: ",t)}s&&s["is-c3-storage"]&&Array.isArray(s.items)||console.error("[Local Storage] Failed to load memory storage JSON: invalid data"),this.$B.Ti(new Map(s.items))}}}self.Is.E$.I7t.ort={m9t(){return this.xI},g9t(){return this._7t},y9t(){return this.E7t.length},w9t(t){return(t=Math.floor(t))<0||t>=this.E7t.length?"":this.E7t[t]},S9t(){return this.R7t},b9t(){return this.D7t?JSON.stringify({"is-c3-storage":!0,items:[...this.$B.Gi()]}):""}};{const $I=self.Is;$I.slt.v9t=class extends $I.W_t{constructor(t){super(t)}qn(){super.qn()}}}{const BI=self.Is;BI.slt.v9t.nPt=class extends BI.q_t{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const WI=self.Is,jI=self.Ns,VI=self.Mq,HI=0,UI=1,qI=2,zI=3,JI=4,YI=5,XI=6,KI=7,ZI=8,QI=0,t_=1,s_=2,i_=3,e_=4,n_=5,r_=6,h_=7,o_=8,a_=9,l_=0,u_=1,c_=2,f_=3,d_=4,p_=2*Math.PI,m_=Math.PI/2,g_=3*Math.PI/2,y_=[0,1,8,3,4,2,5,6,9,7];WI.slt.v9t.Instance=class extends WI.J_t{constructor(t,s){super(t),this.M9t=0,this.x9t=0,this.G9t=0,this.T9t=0,this.C9t=0,this.xbt=!0,this.I9t=0,this._9t=0,this.E9t=0,this.R9t=0,this.P9t=0,this.A9t=0,this.Jbt=0,this.O9t=0,this.D9t=0,this.F9t=0,this.L9t=0,s&&(this.x9t=y_[s[HI]],this.G9t=s[UI],this.R9t=this.Nc.$N()*s[zI],this.I9t=s[qI],this.T9t=s[qI],this.T9t+=this.R9t,this._9t=s[JI],0!==this.T9t&&(this.P9t=this.Nc.$N()*s[YI],this.M9t=s[JI]/this.T9t*p_,this.M9t+=this.P9t/this.T9t*p_),this.A9t=this.Nc.$N()*s[KI],this.E9t=s[XI],this.C9t=s[XI],this.C9t+=this.A9t,this.xbt=!!s[ZI]),this.x9t===n_&&(this.C9t=WI.Qn(this.C9t)),this.IAt(),this.xbt&&this.YIt()}qn(){super.qn()}hx(){return{i:this.M9t,e:this.xbt,mv:this.x9t,w:this.G9t,p:this.T9t,mag:this.C9t,iv:this.Jbt,iv2:this.O9t,r:this.L9t,lkv:this.D9t,lkv2:this.F9t}}ox(t){this.M9t=t.i,this.bTt(t.e),this.x9t=t.mv,this.G9t=t.w,this.T9t=t.p,this.C9t=t.mag,this.Jbt=t.iv,this.O9t=t.iv2,this.L9t=t.r,this.D9t=t.lkv,this.F9t=t.lkv2}IAt(){const t=this.di.a$();switch(this.x9t){case QI:this.Jbt=t.UM();break;case t_:this.Jbt=t.JM();break;case s_:this.Jbt=t.jg(),this.L9t=t.Zg()/t.jg();break;case i_:this.Jbt=t.jg();break;case e_:this.Jbt=t.Zg();break;case n_:this.Jbt=t.KW();break;case r_:this.Jbt=t.sO();break;case h_:this.Jbt=0;break;case o_:this.Jbt=t.UM(),this.O9t=t.JM();break;case a_:this.Jbt=t.XM()}this.D9t=this.Jbt,this.F9t=this.O9t}k9t(t){switch(t%=p_,this.G9t){case l_:return Math.sin(t);case u_:return t<=m_?t/m_:t<=g_?1-2*(t-m_)/Math.PI:(t-g_)/m_-1;case c_:return 2*t/p_-1;case f_:return-2*t/p_+1;case d_:return t<Math.PI?-1:1}return 0}d8(){const t=this.Nc.aN(this.di);this.xbt&&0!==t&&(0===this.T9t?this.M9t=0:this.M9t=(this.M9t+t/this.T9t*p_)%p_,this.N9t())}N9t(){const t=this.di.a$();switch(this.x9t){case QI:t.UM()!==this.D9t&&(this.Jbt+=t.UM()-this.D9t),t.qM(this.Jbt+this.k9t(this.M9t)*this.C9t),this.D9t=t.UM();break;case t_:t.JM()!==this.D9t&&(this.Jbt+=t.JM()-this.D9t),t.YM(this.Jbt+this.k9t(this.M9t)*this.C9t),this.D9t=t.JM();break;case s_:t.Yg(this.Jbt+this.k9t(this.M9t)*this.C9t),t.Vg(t.jg()*this.L9t);break;case i_:t.Yg(this.Jbt+this.k9t(this.M9t)*this.C9t);break;case e_:t.Vg(this.Jbt+this.k9t(this.M9t)*this.C9t);break;case n_:t.KW()!==this.D9t&&(this.Jbt=WI.Zn(this.Jbt+(t.KW()-this.D9t))),t.XW(this.Jbt+this.k9t(this.M9t)*this.C9t),this.D9t=t.KW();break;case r_:t.eO(this.Jbt+this.k9t(this.M9t)*this.C9t/100);break;case o_:t.UM()!==this.D9t&&(this.Jbt+=t.UM()-this.D9t),t.JM()!==this.F9t&&(this.O9t+=t.JM()-this.F9t),t.qM(this.Jbt+Math.cos(t.KW())*this.k9t(this.M9t)*this.C9t),t.YM(this.O9t+Math.sin(t.KW())*this.k9t(this.M9t)*this.C9t),this.D9t=t.UM(),this.F9t=t.JM();break;case a_:t.KM(this.Jbt+this.k9t(this.M9t)*this.C9t)}t.NH()}$9t(t,s){}B9t(t){this.T9t=t}W9t(){return this.T9t}j9t(t){this.C9t=t}V9t(t){5===this.x9t&&(t=WI.Qn(t)),this.j9t(t)}H9t(){return this.C9t}U9t(){let t=this.H9t();return 5===this.x9t&&(t=WI.tr(t)),t}q9t(t){5===this.x9t&&5!==t&&(this.C9t=WI.tr(this.C9t)),this.x9t=t,this.IAt()}z9t(){return this.x9t}J9t(t){this.G9t=t}Y9t(){return this.G9t}X9t(t){this.M9t=WI.Kn(t,0,2*Math.PI),this.N9t()}K9t(){return this.M9t}bTt(t){this.xbt=!!t,this.xbt?this.YIt():this.OIt()}MTt(){return this.xbt}Hrt(t){switch(t){case HI:return this.x9t;case UI:return this.G9t;case qI:return this.I9t;case XI:return this.E9t;case ZI:return this.xbt}}Xrt(t,s){switch(t){case HI:this.x9t=y_[s],this.IAt();break;case UI:this.G9t=s;break;case qI:this.I9t=s,this.T9t=this.I9t+this.R9t,this.xbt||(0!==this.T9t?(this.M9t=this._9t/this.T9t*p_,this.M9t+=this.P9t/this.T9t*p_):this.M9t=0);break;case XI:this.E9t=s,this.C9t=this.E9t+this.A9t,this.x9t===n_&&(this.C9t=WI.Qn(this.C9t));break;case ZI:this.xbt=!!s}}QIt(){const t="behaviors.sin";return[{title:"$"+this.Iq().Ec(),properties:[{name:t+".properties.enabled.name",value:this.MTt(),R1t:t=>this.bTt(t)},{name:t+".properties.period.name",value:this.W9t(),R1t:t=>this.B9t(t)},{name:t+".properties.magnitude.name",value:this.U9t(),R1t:t=>this.V9t(t)},{name:t+".debugger.value",value:this.k9t(this.K9t())*this.U9t()}]}]}cIt(){return self.Z9t}};const w_=new WeakMap,S_=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],b_=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Z9t=class extends VI{constructor(){super(),w_.set(this,VI.RV().yq())}set Q9t(t){jI.he(t),w_.get(this).B9t(t)}get Q9t(){return w_.get(this).W9t()}set tts(t){jI.he(t),w_.get(this).j9t(t)}get tts(){return w_.get(this).H9t()}set sts(t){w_.get(this).X9t(t)}get sts(){return w_.get(this).K9t()}set its(t){jI.ue(t);const s=S_.indexOf(t);if(-1===s)throw new Error("invalid movement");w_.get(this).q9t(s)}get its(){return S_[w_.get(this).z9t()]}set ets(t){jI.ue(t);const s=b_.indexOf(t);if(-1===s)throw new Error("invalid wave");w_.get(this).J9t(s)}get ets(){return b_[w_.get(this).Y9t()]}get value(){const t=w_.get(this);return t.k9t(t.K9t())*t.H9t()}nts(){w_.get(this).IAt()}set isEnabled(t){w_.get(this).bTt(!!t)}get isEnabled(){return w_.get(this).MTt()}}}{const v_=self.Is;v_.slt.v9t.I$={Cu(){return this.MTt()},rts(t){return this.z9t()===t},hts(t,s){return v_.compare(this.W9t(),t,s)},ots(t,s){return v_.compare(this.U9t(),t,s)},ats(t){return this.Y9t()===t}}}self.Is.slt.v9t.hrt={wCt(t){this.bTt(0!==t)},lts(t){this.B9t(t)},uts(t){this.V9t(t)},cts(t){this.q9t(t)},fts(t){this.G9t=t},dts(t){const s=2*Math.PI;this.X9t(t*s%s)},pts(){this.IAt()}},self.Is.slt.v9t.ort={mts(){return this.K9t()/(2*Math.PI)},gts(){return this.W9t()},yts(){return this.U9t()},wts(){return this.k9t(this.K9t())*this.U9t()}};{const M_=self.Is;M_.slt.Sts=class extends M_.W_t{constructor(t){super(t)}qn(){super.qn()}}}{const x_=self.Is;x_.slt.Sts.nPt=class extends x_.q_t{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const G_=self.Is;G_.slt.Sts.Instance=class extends G_.J_t{constructor(t,s){super(t),this.bts=null,this.vts=-1,this.Mts="",this.xts=new Set,this.Gts=0,this.Tts=0,this.Cts=0,this.Its=0,this._ts=0,this.Ets=0,this.Rts=0,this.Pts=0,this.Ats=0,this.Ots=0,this.Dts=!1,s&&(this.Dts=s[0]);const i=this.Nc.wf();this.Xf=new G_.zf(G_.Wf.qf(i,"instancedestroy",(t=>this.Fts(t._q))),G_.Wf.qf(i,"afterload",(t=>this.g6())))}qn(){this.bts=null,super.qn()}Lts(t){t?(this.bts=t,this.KIt()):(this.bts=null,this.DIt())}kts(t,s,i){if(!t)return;const e=t.FGt(this.di);if(!e)return;this.Mts=s,this.Lts(e);const n=this.di.a$(),r=e.a$();if("properties"===this.Mts){const t=this.xts;t.clear();for(const s of i)t.add(s);this.Its=n.UM()-r.UM(),this._ts=n.JM()-r.JM(),this.Pts=n.KW()-r.KW(),this.Ots=n.KW(),this.Ats=n.XM()-r.XM(),t.has("x")&&t.has("y")&&(this.Tts=G_.rr(r.UM(),r.JM(),n.UM(),n.JM())-r.KW(),this.Gts=G_.er(r.UM(),r.JM(),n.UM(),n.JM())),t.has("width-abs")?this.Ets=n.jg()-r.jg():t.has("width-scale")&&(this.Ets=n.jg()/r.jg()),t.has("height-abs")?this.Rts=n.Zg()-r.Zg():t.has("height-scale")&&(this.Rts=n.Zg()/r.Zg())}else this.Gts=G_.er(r.UM(),r.JM(),n.UM(),n.JM())}hx(){const t=this.xts,s=this.Mts,i={uid:this.bts&&!this.bts.OJ()?this.bts.BV():-1,m:s,d:this.Dts};return"rope"===s||"bar"===s?i.pd=this.Gts:"properties"===s&&(i.ps=[...this.xts],t.has("imagepoint")?i.ip=this.Cts:t.has("x")&&t.has("y")?(i.pa=this.Tts,i.pd=this.Gts):(t.has("x")&&(i.dx=this.Its),t.has("y")&&(i.dy=this._ts)),t.has("angle")&&(i.da=this.Pts,i.lka=this.Ots),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.Ets),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Rts),t.has("z")&&(i.dz=this.Ats)),i}ox(t){const s=t.m,i=this.xts;if(i.clear(),this.vts=t.uid,"number"!=typeof s){if(this.Mts=s,t.hasOwnProperty("d")&&(this.Dts=!!t.d),"rope"===s||"bar"===s)this.Gts=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.Cts=t.ip:i.has("x")&&i.has("y")?(this.Tts=t.pa,this.Gts=t.pd):(i.has("x")&&(this.Its=t.dx),i.has("y")&&(this._ts=t.dy)),i.has("angle")&&(this.Pts=t.da,this.Ots=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.Ets=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Rts=t.dh),i.has("z")&&(this.Ats=t.dz)}}else this.Nts(t)}Nts(t){const s=this.xts,i=t.msa,e=t.tsa,n=t.pa,r=t.pd;switch(t.m){case 0:this.Mts="properties",s.add("x").add("y").add("angle"),this.Tts=n,this.Gts=r,this.Pts=i-e,this.Ots=t.lka;break;case 1:this.Mts="properties",s.add("x").add("y"),this.Tts=n,this.Gts=r;break;case 2:this.Mts="properties",s.add("angle"),this.Pts=i-e,this.Ots=t.lka;break;case 3:this.Mts="rope",this.Gts=t.pd;break;case 4:this.Mts="bar",this.Gts=t.pd}}g6(){-1===this.vts?this.Lts(null):(this.Lts(this.Nc.e$(this.vts)),this.vts=-1)}Fts(t){this.bts===t&&(this.Lts(null),this.Dts&&this.Nc.OV(this.di))}JIt(){const t=this.bts;if(!t||t.OJ())return;const s=t.a$(),i=this.di.a$(),e=this.Mts;let n=!1;if("rope"===e||"bar"===e){const t=G_.er(i.UM(),i.JM(),s.UM(),s.JM());if(t>this.Gts||"bar"===e&&t<this.Gts){const t=G_.rr(s.UM(),s.JM(),i.UM(),i.JM());i.$H(s.UM()+Math.cos(t)*this.Gts,s.JM()+Math.sin(t)*this.Gts),n=!0}}else{const e=this.xts;let r=0;if(e.has("imagepoint")){const[s,e]=t.nGt(this.Cts);i.iGt(s,e)||(i.$H(s,e),n=!0)}else if(e.has("x")&&e.has("y")){const t=s.UM()+Math.cos(s.KW()+this.Tts)*this.Gts,e=s.JM()+Math.sin(s.KW()+this.Tts)*this.Gts;i.iGt(t,e)||(i.$H(t,e),n=!0)}else r=s.UM()+this.Its,e.has("x")&&r!==i.UM()&&(i.qM(r),n=!0),r=s.JM()+this._ts,e.has("y")&&r!==i.JM()&&(i.YM(r),n=!0);e.has("angle")&&(this.Ots!==i.KW()&&(this.Pts=G_.Zn(this.Pts+(i.KW()-this.Ots))),r=G_.Zn(s.KW()+this.Pts),r!==i.KW()&&(i.XW(r),n=!0),this.Ots=i.KW()),e.has("width-abs")&&(r=s.jg()+this.Ets,r!==i.jg()&&(i.Yg(r),n=!0)),e.has("width-scale")&&(r=s.jg()*this.Ets,r!==i.jg()&&(i.Yg(r),n=!0)),e.has("height-abs")&&(r=s.Zg()+this.Rts,r!==i.Zg()&&(i.Vg(r),n=!0)),e.has("height-scale")&&(r=s.Zg()*this.Rts,r!==i.Zg()&&(i.Vg(r),n=!0)),e.has("z")&&(r=s.XM()+this.Ats,r!==i.XM()&&(i.KM(r),this.Nc.m$()))}n&&i.NH()}QIt(){const t="behaviors.pin.debugger";return[{title:"$"+this.Iq().Ec(),properties:[{name:t+".is-pinned",value:!!this.bts},{name:t+".pinned-uid",value:this.bts?this.bts.BV():0}]}]}}}self.Is.slt.Sts.I$={$ts(){return!!this.bts},Bts(){return this.Dts}},self.Is.slt.Sts.hrt={Wts(t,s){this.kts(t,0===s?"rope":"bar")},jts(t,s,i,e,n,r,h){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),h&&o.push("z"),1===n?o.push("width-abs"):2===n&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.kts(t,"properties",o)},Vts(t,s,i,e,n,r){const h=["imagepoint"];i&&h.push("angle"),r&&h.push("z"),1===e?h.push("width-abs"):2===e&&h.push("width-scale"),1===n?h.push("height-abs"):2===n&&h.push("height-scale"),this.Cts=s,this.kts(t,"properties",h)},Hts(t){"rope"!==this.Mts&&"bar"!==this.Mts||(this.Gts=Math.max(t,0))},Uts(t){this.Dts=t},qts(){this.Lts(null),this.Mts="",this.xts.clear(),this.Cts=""},Sts(t,s){switch(s){case 0:this.kts(t,"properties",["x","y","angle"]);break;case 1:this.kts(t,"properties",["x","y"]);break;case 2:this.kts(t,"properties",["angle"]);break;case 3:this.kts(t,"rope");break;case 4:this.kts(t,"bar")}}},self.Is.slt.Sts.ort={zts(){return this.bts?this.bts.BV():-1}};{const T_=self.Is;T_.slt.Jts=class extends T_.W_t{constructor(t){super(t);const s=this.Nc.wf();this.Xf=new T_.zf(T_.Wf.qf(s,"pointerdown",(t=>this.zXt(t.data))),T_.Wf.qf(s,"pointermove",(t=>this.JXt(t.data))),T_.Wf.qf(s,"pointerup",(t=>this.YXt(t.data,!1))),T_.Wf.qf(s,"pointercancel",(t=>this.YXt(t.data,!0))))}qn(){this.Xf.qn(),this.Xf=null,super.qn()}zXt(t){"mouse"===t.pointerType&&0!==t.button||this.Yts(t.pointerId.toString(),t.pageX-this.Nc.CB(),t.pageY-this.Nc._B())}JXt(t){1&t.lastButtons&&!(1&t.buttons)?this.Xts(t.pointerId.toString()):this.Kts(t.pointerId.toString(),t.pageX-this.Nc.CB(),t.pageY-this.Nc._B())}YXt(t,s){"mouse"===t.pointerType&&0!==t.button||this.Xts(t.pointerId.toString())}async Yts(t,s,i){const e=this.PW();let n=null,r=null,h=0,o=0;for(const t of e){const e=t.rlt(T_.slt.Jts);if(!e.Cu()||e.Zts()||t.OJ())continue;const a=t.a$(),l=a.l$(),[u,c]=l.yV(s,i,a.KH());if(!l.Vj()||!a.SU(u,c))continue;if(!n){n=t,r=e,h=u,o=c;continue}const f=n.a$();(l.ek()>f.l$().ek()||l.ek()===f.l$().ek()&&a.u$()>f.u$())&&(n=t,r=e,h=u,o=c)}n&&await r.Qts(t,h,o)}Kts(t,s,i){const e=this.PW();for(const n of e){const e=n.rlt(T_.slt.Jts);if(!e.Cu()||!e.Zts()||e.Zts()&&e.tss()!==t)continue;const r=n.a$(),h=r.l$(),[o,a]=h.yV(s,i,r.KH());e.sss(o,a)}}async Xts(t){const s=this.PW();for(const i of s){const s=i.rlt(T_.slt.Jts);s.Zts()&&s.tss()===t&&await s.iss()}}}}{const C_=self.Is;C_.slt.Jts.nPt=class extends C_.q_t{constructor(t){super(t)}qn(){super.qn()}uIt(){}}}{const I_=self.Is,__=(self.Ns,self.Mq),E_=0,R_=1;I_.slt.Jts.Instance=class extends I_.J_t{constructor(t,s){super(t),this.ess=!1,this.Its=0,this._ts=0,this.nss="<none>",this.rss=0,this.xbt=!0,s&&(this.rss=s[E_],this.xbt=s[R_])}qn(){super.qn()}hx(){return{a:this.rss,e:this.xbt}}ox(t){this.rss=t.a,this.xbt=t.e,this.ess=!1}bTt(t){this.xbt=!!t,this.xbt||(this.ess=!1)}Cu(){return this.xbt}hss(t){this.rss=t}oss(){return this.rss}ass(){this.ess&&this.iss()}Zts(){return this.ess}tss(){return this.nss}async Qts(t,s,i){const e=this.a$();this.Its=s-e.UM(),this._ts=i-e.JM(),this.ess=!0,this.nss=t,this._It("dragstart"),await this.T$(I_.slt.Jts.I$.lss)}sss(t,s){const i=this.a$(),e=t-this.Its,n=s-this._ts;0===this.rss?i.UM()===e&&i.JM()===n||(i.$H(e,n),i.NH()):1===this.rss?i.UM()!==e&&(i.qM(e),i.NH()):2===this.rss&&i.JM()!==n&&(i.YM(n),i.NH())}async iss(){this.ess=!1,this._It("drop"),await this.T$(I_.slt.Jts.I$.uss)}Hrt(t){switch(t){case E_:return this.oss();case R_:return this.Cu()}}Xrt(t,s){switch(t){case E_:this.hss(s);break;case R_:this.bTt(!!s)}}QIt(){const t="behaviors.dragndrop",s=t+".properties.axes";let i="";return 0===this.rss?i=s+".items.both":1===this.rss?i=s+".items.horizontal-only":2===this.rss&&(i=s+".items.vertical-only"),[{title:"$"+this.Iq().Ec(),properties:[{name:t+".debugger.is-dragging",value:this.Zts()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.Cu(),R1t:t=>this.bTt(t)}]}]}cIt(){return self.css}};const P_=new WeakMap,A_=["both","horizontal","vertical"];self.css=class extends __{constructor(){super(),P_.set(this,__.RV().yq())}set axes(t){const s=A_.indexOf(t);if(-1===s)throw new Error("invalid axes");P_.get(this).hss(s)}get axes(){return A_[P_.get(this).oss()]}drop(){P_.get(this).ass()}get fss(){return P_.get(this).Zts()}get isEnabled(){return P_.get(this).Cu()}set isEnabled(t){P_.get(this).bTt(t)}}}self.Is.slt.Jts.I$={Zts(){return this.Zts()},lss:()=>!0,uss:()=>!0,Cu(){return this.Cu()}},self.Is.slt.Jts.hrt={wCt(t){this.bTt(!!t)},dss(t){this.hss(t)},pss(){this.ass()}},self.Is.slt.Jts.ort={};{let O_=function(t){return"number"==typeof t?-t:t},D_=function(t,s){return"number"==typeof t&&"number"==typeof s},F_=function(t,s){return D_(t,s)?t+s:t},L_=function(t,s){return D_(t,s)?t-s:t},k_=function(t,s){return D_(t,s)?t*s:t},N_=function(t,s){return D_(t,s)?t/s:t},$_=function(t,s){return D_(t,s)?t%s:t},B_=function(t,s){return D_(t,s)?Math.pow(t,s):t},W_=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},j_=function(t,s){return D_(t,s)?t||s?1:0:t};unaryminus=O_,bothNumbers=D_,add=F_,subtract=L_,multiply=k_,divide=N_,mod=$_,pow=B_,and=W_,or=j_;const V_=self.Is;self.kvt=[t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt();return()=>s()+" - "+i()+" - (C) Wild Haired Science Teacher - Find More at whscience.org"},()=>0,t=>{const s=t.zvt(0),i=t.zvt(1);return()=>s.Svt()+i.Svt()/2+2},()=>"",()=>-4,t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).Lvt();return()=>Math.ceil(s()/i.Aet())+4},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).Lvt();return()=>s()*i.Aet()},()=>360,t=>{const s=t.zvt(0).Lvt();return()=>s.Aet()},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).Lvt(),e=t.zvt(2).Lvt();return()=>(999-s()*i.Aet()/e.Aet())%1},t=>{const s=t.zvt(0).dvt();return()=>1+s(3)},t=>{const s=t.zvt(0).Lvt();return()=>1/s.Aet()},t=>{const s=t.zvt(0).dvt();return()=>100+s(150)},t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).Lvt();return()=>s.Aet()*i.Aet()},t=>{const s=t.zvt(0).dvt();return()=>s(1)},t=>{const s=t.zvt(0).dvt();return()=>10+s(90)},()=>"Amplitude",()=>8,()=>"Frequency",()=>"Speed",()=>"Period",()=>"Hold Z to zoom in on the mouse cursor.",t=>{const s=t.zvt(0).dvt();return()=>s()+"Data"},t=>{const s=t.zvt(0).dvt();return()=>s()},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2).dvt(),n=t.zvt(3).dvt();return()=>V_.er(s.Svt(),i.Svt(),e(),n())},()=>48,()=>"Purple",()=>4,()=>"Orange",()=>6,()=>"Pause",()=>"Unpause",()=>-1023,t=>{const s=t.zvt(0);return()=>s.Svt()},t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).dvt(),e=t.zvt(2);return()=>Math.abs(s.Aet()/40-i(e.Svt()))},()=>.4,()=>"Wavelength",()=>1,t=>{const s=t.zvt(0).dvt();return()=>s(255,128,0)},t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).dvt(),e=t.zvt(2);return()=>Math.abs(s.Aet()-i(e.Svt()))},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1),e=t.zvt(2).dvt(),n=t.zvt(3);return()=>Math.abs(1/s(i.Svt())-e(n.Svt()))},()=>.1,t=>{const s=t.zvt(0).dvt(),i=t.zvt(1),e=t.zvt(2).dvt(),n=t.zvt(3),r=t.zvt(4).dvt(),h=t.zvt(5);return()=>Math.abs(s(i.Svt())-e(n.Svt())*r(h.Svt()))},()=>.8,()=>"Feedback",t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).Lvt(),e=t.zvt(2).Lvt(),n=t.zvt(3).Lvt(),r=t.zvt(4).Lvt(),h=t.zvt(5).Lvt(),o=t.zvt(6).Lvt(),a=t.zvt(7).Lvt();return()=>"Great job. Try another one.\nWavelength: "+(s.Aet()?W_(W_(Math.round(i.Aet()/40*100)/100,"   Period: "),Math.round(100*e.Aet())/100):"")+(n.Aet()?W_(W_("   Frequency: ",Math.round(100*r.Aet())/100)+"\n   Speed: ",Math.round(h.Aet()/40*100)/100):"")+(o.Aet()?"":W_("   Amplitude: ",Math.round(a.Aet()/40*100)/100))},t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).Lvt();return()=>W_(W_(s.Aet(),";"),i.Aet())},()=>2,t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt(),n=t.zvt(3).dvt(),r=t.zvt(4).dvt(),h=t.zvt(5).Lvt(),o=t.zvt(6).Lvt(),a=t.zvt(7).Lvt(),l=t.zvt(8).Lvt(),u=t.zvt(9).Lvt(),c=t.zvt(10).Lvt(),f=t.zvt(11).Lvt(),d=t.zvt(12).Lvt(),p=t.zvt(13).Lvt(),m=t.zvt(14).Lvt();return()=>W_("That's still not right. You don't have to be exact, but "+s(i(e(n(r(Math.abs(h.Aet()).toString(),"1","one"),"2","two"),"3","most"),"4","almost all"),"5","all")+" of your answers "+(1===Math.abs(o.Aet())?"is":"are")+" very off. The correct answers are:\nWavelength: ",Math.round(a.Aet()/40*100)/100)+(l.Aet()?W_("   Period: ",Math.round(100*u.Aet())/100):"")+(c.Aet()?W_(W_("   Frequency: ",Math.round(100*f.Aet())/100)+"\nSpeed: ",Math.round(d.Aet()/40*100)/100):"")+(p.Aet()?"":W_("   Amplitude: ",Math.round(m.Aet()/40*100)/100))},()=>"Try Again",()=>"Enter a number for all before checking",()=>"You already tried those numbers. Check your work.",()=>"font-size",t=>{const s=t.zvt(0).dvt();return()=>W_(Math.round(s()/36),"pt")},()=>"font-family",()=>"Courier New",t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).Lvt();return()=>W_(W_("Streak: ",s.Aet())+"\nScore: ",i.Aet())},()=>5,t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt(),n=t.zvt(3).dvt(),r=t.zvt(4).dvt(),h=t.zvt(5).dvt(),o=t.zvt(6).dvt(),a=t.zvt(7).dvt(),l=t.zvt(8).dvt();return()=>W_(0===s(i())?12:e(n())%12,":")+r(h(o()),2)+" "+a(l())},()=>"Zoom",t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt();return()=>V_.Kn(s.Aet(),i()/4,e()*(3/4))},t=>{const s=t.zvt(0).dvt();return()=>s()/2},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt();return()=>s(i(e(),0,";"))},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).dvt(),e=t.zvt(2).dvt();return()=>s(i(e(),1,";"))},()=>"ToggleButton",t=>{const s=t.zvt(0).dvt(),i=t.zvt(1);return()=>s(i.Tvt(),";")-1},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1),e=t.zvt(2).dvt();return()=>s(i.Tvt(),e(),";")},t=>{const s=t.zvt(0).dvt(),i=t.zvt(1),e=t.zvt(2).Lvt(),n=t.zvt(3).dvt(),r=t.zvt(4);return()=>s(i.Tvt(),(e.Aet()+1)%n(r.Tvt(),";"),";")},()=>"Button",t=>{const s=t.zvt(0);return()=>Math.floor(.875*s.Tvt())},t=>{const s=t.zvt(0);return()=>s.Tvt()},()=>"Stopwatch Events",t=>{const s=t.zvt(0).dvt(),i=t.zvt(1).Lvt(),e=t.zvt(2).dvt(),n=t.zvt(3).Lvt(),r=t.zvt(4).Lvt();return()=>s(Math.floor(i.Aet()),2)+"."+e(Math.floor(100*(n.Aet()-Math.floor(r.Aet()))),2)},t=>{const s=t.zvt(0);return()=>s.xvt()},()=>"Start",()=>"Stop",t=>{const s=t.zvt(0).dvt(),i=t.zvt(1);return()=>s(i.xvt())},t=>{const s=t.zvt(0),i=t.zvt(1).dvt();return()=>s.xvt()+i()},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2).dvt(),n=t.zvt(3).dvt(),r=t.zvt(4);return()=>V_.tr(V_.rr(s.Svt(),i.Svt(),e(),n()))-r.Svt()},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2).dvt(),n=t.zvt(3).dvt(),r=t.zvt(4),h=t.zvt(5),o=t.zvt(6);return()=>Math.round((V_.tr(V_.rr(s.Svt(),i.Svt(),e(),n()))-r.xvt())/h.xvt())*o.xvt()},()=>-1,t=>{const s=t.zvt(0).Lvt(),i=t.zvt(1).dvt();return()=>s.Aet()*i()},()=>90,()=>180,t=>{const s=t.zvt(0).dvt();return()=>s()-72},()=>72,t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2);return()=>s.Svt()+i.xvt()*Math.cos(V_.Qn(e.Svt()))},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2);return()=>s.Svt()+i.xvt()*Math.sin(V_.Qn(e.Svt()))},t=>{const s=t.zvt(0),i=t.zvt(1).dvt();return()=>V_.Kn(s.Svt(),0,i()-24)},t=>{const s=t.zvt(0),i=t.zvt(1).dvt();return()=>V_.Kn(s.Svt(),24,i()-24)},t=>{const s=t.zvt(0),i=t.zvt(1).dvt();return()=>V_.Kn(s.Svt(),24,i())},t=>{const s=t.zvt(0);return()=>s.Svt()-1},t=>{const s=t.zvt(0).dvt();return()=>s()+.3},t=>{const s=t.zvt(0);return()=>s.Svt()+1},t=>{const s=t.zvt(0).dvt();return()=>s()+.02},()=>"AlertEvents",t=>{const s=t.zvt(0),i=t.zvt(1);return()=>s.xvt()+i.xvt()},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2),n=t.zvt(3),r=t.zvt(4),h=t.zvt(5),o=t.zvt(6).dvt();return()=>V_.It(100,s.xvt(),V_.mr(i.xvt()+e.xvt(),n.xvt()+r.xvt()+h.xvt(),o()))},t=>{const s=t.zvt(0),i=t.zvt(1),e=t.zvt(2);return()=>s.xvt()+i.xvt()+e.xvt()},()=>100]}}}),import_c3runtime=__toESM(require_c3runtime()),C32=self.Is;self.jVt=function(){return[C32.E$.Touch,C32.E$.si,C32.E$.Text,C32.E$.Vnt,C32.slt.v9t,C32.slt.Sts,C32.slt.Jts,C32.E$.Keyboard,C32.E$.Z4t,C32.E$.PlatformInfo,C32.E$.Date,C32.E$.I8t,C32.E$.I7t,C32.E$._$.I$.J4,C32.E$.Text.hrt.jc,C32.E$._$.ort.SXt,C32.E$._$.ort.bXt,C32.E$._$.hrt.ph,C32.E$.Vnt.hrt.qM,C32.E$.Text.ort.QTt,C32.E$.Text.ort.c2t,C32.E$.si.I$.zZt,C32.E$.si.I$.JZt,C32.E$.si.hrt.CQt,C32.E$._$.I$.wzt,C32.E$._$.ort.AYt,C32.E$._$.hrt.Fzt,C32.E$._$.ort.oXt,C32.E$._$.I$.ezt,C32.slt.v9t.hrt.cts,C32.E$._$.I$.qwt,C32.slt.v9t.hrt.uts,C32.slt.v9t.hrt.lts,C32.slt.v9t.hrt.dts,C32.E$._$.hrt._zt,C32.E$._$.ort.random,C32.E$._$.hrt.Pzt,C32.E$.Z4t.hrt.jc,C32.E$.Text.hrt.$Tt,C32.E$._$.I$.tzt,C32.E$.Text.I$.U1t,C32.E$.Text.hrt.Oj,C32.E$.Z4t.hrt.Oj,C32.E$.Vnt.hrt.OTt,C32.E$.I7t.hrt.u9t,C32.E$.si.ort.JQt,C32.slt.Sts.hrt.jts,C32.E$.Vnt.hrt.AGt,C32.E$.Touch.I$.oKt,C32.E$.Touch.I$.lKt,C32.E$.Vnt.I$.tGt,C32.E$.Touch.ort.QTt,C32.E$.Touch.ort.tCt,C32.E$.Vnt.ort.QTt,C32.E$.Vnt.ort.tCt,C32.E$._$.I$.dzt,C32.E$.Vnt.hrt.E3t,C32.E$.Vnt.hrt.GR,C32.E$.Vnt.hrt.PGt,C32.E$.Touch.I$.aKt,C32.E$.Touch.I$.uKt,C32.E$.Text.I$.Fj,C32.E$._$.hrt.eJt,C32.slt.v9t.hrt.wCt,C32.E$.Text.hrt.K1t,C32.E$.Text.I$.GTt,C32.E$.Z4t.I$.Fj,C32.E$.Z4t.I$.U1t,C32.E$.Z4t.ort.JTt,C32.E$._$.ort.float,C32.E$.Z4t.ort.Text,C32.E$._$.hrt.Rzt,C32.E$._$.ort.yXt,C32.E$._$.hrt.Ezt,C32.E$.I7t.hrt.n9t,C32.E$._$.I$.izt,C32.E$._$.ort.replace,C32.E$.Z4t.hrt.fCt,C32.E$.PlatformInfo.ort.a6t,C32.E$.si.I$.WZt,C32.E$._$.I$.Yqt,C32.E$.Date.ort._6t,C32.E$.Date.ort.Z6t,C32.E$._$.ort.uYt,C32.E$.Date.ort.E6t,C32.E$.Date.ort.q6t,C32.E$.Z4t.I$.u5t,C32.E$._$.I$.ayt,C32.E$.Keyboard.I$.G4t,C32.E$._$.I$.Jqt,C32.E$.I8t.ort.QTt,C32.E$.I8t.ort.tCt,C32.E$._$.hrt.MJt,C32.E$._$.hrt.RJt,C32.E$._$.ort.OYt,C32.E$.Touch.I$.SKt,C32.E$.Touch.I$.rKt,C32.E$.I8t.I$.n7t,C32.E$.I7t.I$.Y7t,C32.E$._$.ort.jJt,C32.E$._$.ort.iYt,C32.E$.I7t.ort.m9t,C32.E$.Touch.I$.gKt,C32.E$.Keyboard.I$.L4t,C32.E$._$.I$.QBt,C32.E$._$.ort.eYt,C32.E$.Text.ort.Text,C32.E$.Text.I$.DTt,C32.E$._$.I$.Vd,C32.E$.Text.hrt.LTt,C32.E$.Text.ort.u2t,C32.E$.Touch.I$.bKt,C32.E$.Text.I$.xTt,C32.E$.Text.hrt.sR,C32.E$._$.hrt.tN,C32.E$._$.ort.oN,C32.E$.Touch.I$.sKt,C32.E$.Vnt.I$.xTt,C32.E$.Vnt.hrt.LTt,C32.E$.Vnt.ort.cCt,C32.E$.Touch.ort.sZt,C32.E$.Vnt.hrt.XW,C32.E$.Text.I$.Xxt,C32.E$.Vnt.hrt.NTt,C32.E$.Vnt.I$.lCt,C32.E$.Vnt.hrt.kTt,C32.E$.Text.I$.Kxt,C32.E$.Text.hrt.sGt,C32.E$.Text.hrt.XW,C32.slt.Jts.I$.uss,C32.E$.Vnt.hrt.sGt,C32.E$._$.ort.time,C32.E$.Vnt.hrt.YM,C32.E$._$.I$.nzt,C32.E$._$.ort.mYt,C32.E$.Text.hrt.eO]},self.uHt=[{Touch:0},{si:0},{mss:0},{gss:0},{yss:0},{wss:0},{Sss:0},{bss:0},{vss:0},{Mss:0},{Vnt:0},{ey:0},{xss:0},{Gss:0},{i0t:0},{Sts:0},{Tss:0},{Css:0},{Iss:0},{_ss:0},{Ess:0},{Rss:0},{Pss:0},{Ass:0},{selected:0},{Oss:0},{Dss:0},{Fss:0},{Lss:0},{kss:0},{Nss:0},{Keyboard:0},{$ss:0},{Bss:0},{PlatformInfo:0},{Wss:0},{jss:0},{Vss:0},{Hss:0},{Uss:0},{qss:0},{zss:0},{active:0},{startTime:0},{wQt:0},{Jss:0},{Yss:0},{Date:0},{Xss:0},{Ink:0},{I8t:0},{Kss:0},{I7t:0},{Zss:0},{Qss:0},{tis:0},{sis:0},{iis:0},{eis:0},{speed:0},{gts:0},{frequency:0},{nis:0},{ris:0},{his:0},{ois:0},{ais:0},{lis:0},{uis:0},{cis:0},{fis:0},{dis:0},{pis:0},{mis:0},{gis:0},{yis:0},{wis:0},{Sis:0},{bis:0},{vis:0},{Mis:0},{xis:0},{Gis:0},{Tis:0},{Cis:0},{Text:0}],self.Iis={Touch:class extends self.CV{},si:class extends self.CV{},yss:class extends self.P1t{},Sss:class extends self.P1t{},bss:class extends self.D3t{},vss:class extends self.P1t{},Vnt:class extends self.D3t{},ey:class extends self.D3t{},xss:class extends self.P1t{},Gss:class extends self.P1t{},Tss:class extends self.P1t{},Ess:class extends self.P1t{},Rss:class extends self.P1t{},Pss:class extends self.P1t{},Nss:class extends self.D3t{},Keyboard:class extends self.CV{},$ss:class extends self.M5t{},Bss:class extends self.P1t{},PlatformInfo:class extends self.CV{},Wss:class extends self.M5t{},jss:class extends self.M5t{},Vss:class extends self.M5t{},Hss:class extends self.M5t{},wQt:class extends self.P1t{},Jss:class extends self.P1t{},Yss:class extends self.P1t{},Date:class extends self.CV{},Ink:class extends self.D3t{},I8t:class extends self.CV{},Kss:class extends self.P1t{},I7t:class extends self.CV{},Zss:class extends self.P1t{},Qss:class extends self.D3t{},tis:class extends self.P1t{},sis:class extends self.P1t{},iis:class extends self.M5t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/