// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let P=function(t){bh=t},k=function(t){return t*Ph},F=function(t,s){return Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},j=function(){var t=new bh(4);return bh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},z=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},B=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},U=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},W=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Q=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},J=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},V=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},Y=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},H=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},q=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},Z=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},X=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},K=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},$=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new bh(6);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new bh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new bh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],u=i[1],l=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*u,t[1]=h*a+n*u,t[2]=e*l+r*c,t[3]=h*l+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},Mt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Tt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},bt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},vt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Ct=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},Gt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],u=s[2],l=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Th*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Th*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-u)<=Th*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(r-l)<=Th*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(n-c)<=Th*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new bh(9);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},_t=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Dt=function(t){var s=new bh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Nt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Et=function(t,s,i,e,h,r,n,o,a){var u=new bh(9);return u[0]=t,u[1]=s,u[2]=i,u[3]=e,u[4]=h,u[5]=r,u[6]=n,u[7]=o,u[8]=a,u},At=function(t,s,i,e,h,r,n,o,a,u){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t},Lt=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Rt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=(s=s[8])*n-o*u,c=-s*r+o*a,f=u*r-n*a,d=i*l+e*c+h*f;return d?(t[0]=l*(d=1/d),t[1]=(-s*e+h*u)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-u*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Pt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],s=s[8];return t[0]=n*s-o*u,t[1]=h*u-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*u-n*a,t[7]=e*a-i*u,t[8]=i*n-e*r,t},kt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],M=i[7],i=i[8];return t[0]=c*e+f*n+d*u,t[1]=c*h+f*o+d*l,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*u,t[4]=p*h+m*o+g*l,t[5]=p*r+m*a+g*s,t[6]=y*e+M*n+i*u,t[7]=y*h+M*o+i*l,t[8]=y*r+M*a+i*s,t},Ft=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+u,t[7]=c*h+i*o+l,t[8]=c*r+i*a+s,t},jt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=u,t[7]=l,t[8]=s,t},zt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Ut=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Qt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Jt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+l,t[1]=r+s,t[4]=1-i-e,t[7]=a-u,t[2]=o-l,t[5]=a+u,t[8]=1-i-n,t},Vt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-M*(c=c*s-d*m)+w*C+S*(l=l*s-d*p)-T*v+b*x)?(t[0]=(o*f-a*c+u*C)*(d=1/d),t[1]=(a*l-n*f-u*v)*d,t[2]=(n*c-o*l+u*x)*d,t[3]=(h*c-e*f-r*C)*d,t[4]=(i*f-h*l+r*v)*d,t[5]=(e*l-i*c-r*x)*d,t[6]=(m*b-g*T+s*S)*d,t[7]=(g*w-p*b-s*M)*d,t[8]=(p*T-m*w+s*y)*d,t):null},Yt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Ht=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},qt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Zt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Xt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Kt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],t=t[8],l=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-l)<=Th*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-c)<=Th*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Th*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Th*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Th*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Th*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Th*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(u-y)<=Th*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new bh(16);return bh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new bh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m){var g=new bh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=u,g[10]=l,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,u,l,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=u,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,_=f*s-d*g,D=y*_-M*I+w*G+S*C-T*v+b*x;return D?(t[0]=(o*_-a*I+u*G)*(D=1/D),t[1]=(h*I-e*_-r*G)*D,t[2]=(m*b-g*T+s*S)*D,t[3]=(f*T-c*b-d*S)*D,t[4]=(a*C-n*_-u*v)*D,t[5]=(i*_-h*C+r*v)*D,t[6]=(g*w-p*b-s*M)*D,t[7]=(l*b-f*w+d*M)*D,t[8]=(n*I-o*C+u*x)*D,t[9]=(e*C-i*I-r*x)*D,t[10]=(p*T-m*w+s*y)*D,t[11]=(c*w-l*T-d*y)*D,t[12]=(o*v-n*G-a*x)*D,t[13]=(i*G-e*v+h*x)*D,t[14]=(m*M-p*S-g*y)*D,t[15]=(l*S-c*M+f*y)*D,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],u=s[7],l=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,M=i*a-h*n,w=i*u-r*n,S=e*a-h*o,T=e*u-r*o,b=h*u-r*a,x=l*m-c*p,v=l*g-f*p,C=l*(s=s[15])-d*p,G=c*g-f*m,I=c*s-d*m,_=f*s-d*g;return t[0]=o*_-a*I+u*G,t[1]=h*I-e*_-r*G,t[2]=m*b-g*T+s*S,t[3]=f*T-c*b-d*S,t[4]=a*C-n*_-u*v,t[5]=i*_-h*C+r*v,t[6]=g*w-p*b-s*M,t[7]=l*b-f*w+d*M,t[8]=n*I-o*C+u*x,t[9]=e*C-i*I-r*x,t[10]=p*T-m*w+s*y,t[11]=c*w-l*T-d*y,t[12]=o*v-n*G-a*x,t[13]=i*G-e*v+h*x,t[14]=m*M-p*S-g*y,t[15]=l*S-c*M+f*y,t},us=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],u=t[10],l=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*l,y=o*f-u*l,M=a*f-u*c;return t[7]*(s*M-i*y+e*g)-t[3]*(h*M-r*y+n*g)+t[15]*(o*m-a*p+u*d)-t[11]*(l*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],M=i[0],w=i[1],S=i[2],T=i[3];return t[0]=M*e+w*o+S*c+T*m,t[1]=M*h+w*a+S*f+T*g,t[2]=M*r+w*u+S*d+T*y,t[3]=M*n+w*l+S*p+T*s,t[4]=(M=i[4])*e+(w=i[5])*o+(S=i[6])*c+(T=i[7])*m,t[5]=M*h+w*a+S*f+T*g,t[6]=M*r+w*u+S*d+T*y,t[7]=M*n+w*l+S*p+T*s,t[8]=(M=i[8])*e+(w=i[9])*o+(S=i[10])*c+(T=i[11])*m,t[9]=M*h+w*a+S*f+T*g,t[10]=M*r+w*u+S*d+T*y,t[11]=M*n+w*l+S*p+T*s,t[12]=(M=i[12])*e+(w=i[13])*o+(S=i[14])*c+(T=i[15])*m,t[13]=M*h+w*a+S*f+T*g,t[14]=M*r+w*u+S*d+T*y,t[15]=M*n+w*l+S*p+T*s,t},ls=function(t,s,i){var e,h,r,n,o,a,u,l,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=u,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+u*g+d*i+s[14],t[15]=n*m+l*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,u,l,c,f,d,p,m,g,y,M,w,S,T,b,x,v=e[0],C=e[1],e=e[2],G=Math.hypot(v,C,e);return G<Th?null:(v*=G=1/G,C*=G,e*=G,G=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],l=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],M=v*C*(h=1-i)-e*G,w=C*C*h+i,S=e*C*h+v*G,T=v*e*h+C*G,b=C*e*h-v*G,x=e*e*h+i,t[0]=r*(i=v*v*h+i)+(u=s[4])*(y=C*v*h+e*G)+(d=s[8])*(e=e*v*h-C*G),t[1]=n*i+l*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*M+u*w+d*S,t[5]=n*M+l*w+p*S,t[6]=o*M+c*w+m*S,t[7]=a*M+f*w+g*S,t[8]=r*T+u*b+d*x,t[9]=n*T+l*b+p*x,t[10]=o*T+c*b+m*x,t[11]=a*T+f*b+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+u*e,t[6]=n*i+l*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=u*i-r*e,t[10]=l*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],u=s[9],l=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-u*e,t[2]=n*i-l*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+u*i,t[10]=n*e+l*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],u=s[5],l=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+u*e,t[2]=n*i+l*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=u*i-r*e,t[6]=l*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Th?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ts=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(l=e+e),o=e*(c=(u=s[1])+u),e=e*r,a=u*c,u=u*r,l=(s=s[3])*l,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=u+l,t[7]=0,t[8]=e+c,t[9]=u-l,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},bs=function(t,s){var i=new bh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+l*e+a*r-u*h)/c,i[1]=2*(a*n+l*h+u*e-o*r)/c,i[2]=2*(u*n+l*r+o*h-a*e)/c):(i[0]=2*(o*n+l*e+a*r-u*h),i[1]=2*(a*n+l*h+u*e-o*r),i[2]=2*(u*n+l*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},u=function(t,s){var i=new bh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(l=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*l,u=s[6]*i,e=s[8]*e,l=s[9]*l,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(u-l)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(u-l)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(u+l)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(u+l)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],u=e[8],l=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(u,l,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,u=u*c,c=l*f,l=e*i,e=0;return 0<(f=s+(o=o*f)+l)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(u-r)/e,t[2]=(h-n)/e):o<s&&l<s?(e=2*Math.sqrt(1+s-o-l),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(u+r)/e):l<o?(e=2*Math.sqrt(1+o-s-l),t[3]=(u-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+l-s-o),t[3]=(h-n)/e,t[0]=(u+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},vs=function(t,s,i,e){var h=(n=s[0])*(l=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(u=s[2])+u),o=a*c,a=a*f,u=u*f,l=(s=s[3])*l,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+u))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+u))*d,t[6]=(a+l)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-l)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Cs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(u=s[1])+u),o=o*(d=(l=s[2])+l),a=u*f,u=u*d,l=l*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+l))*d,M=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+l))*p,l=(u+c)*p,p=(o+f)*e,o=(u-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=M,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=l,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(M*m+s*g+o*h),t[14]=i[2]+h-(d*m+l*g+f*h),t[15]=1,t},Gs=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(u=i+i),r=(n=s[1])*u,n=n*(l=n+n),o=e*u,a=e*l,u=(s=s[3])*u,l=s*l,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-l,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+u,t[7]=0,t[8]=o+l,t[9]=a-u,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),u=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*u,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*u,t[15]=0,t},l=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},_s=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Ds=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),u=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*u,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*u,t[15]=1,t},Ns=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Es=function(t,s,i,e){var h,r,n,o,a=s[0],u=s[1],s=s[2],l=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Th&&Math.abs(u-d)<Th&&Math.abs(s-i)<Th?p(t):(f=a-f,d=u-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-l*i,l=l*d-c*f,(o=Math.hypot(h,e,l))?(h*=o=1/o,e*=o,l*=o):l=e=h=0,c=d*l-i*e,r=i*h-f*l,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=l,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*u+l*s),t[13]=-(c*a+r*u+n*s),t[14]=-(f*a+d*u+i*s),t[15]=1,t)},As=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],u=r-i[1],l=a*a+u*u+(i=s-i[2])*i,c=(0<l&&(a*=l=1/Math.sqrt(l),u*=l,i*=l),o*i-e*u);return 0<(l=c*c+(e=e*a-n*i)*e+(n=n*u-o*a)*n)&&(c*=l=1/Math.sqrt(l),e*=l,n*=l),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=u*n-i*e,t[5]=i*c-a*n,t[6]=a*e-u*c,t[7]=0,t[8]=a,t[9]=u,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Ls=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Rs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Ps=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},ks=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Fs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},js=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},zs=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],u=t[7],l=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],M=s[1],w=s[2],S=s[3],T=s[4],b=s[5],x=s[6],v=s[7],C=s[8],G=s[9],I=s[10],_=s[11],D=s[12],N=s[13],E=s[14],s=s[15];return Math.abs(i-y)<=Th*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-M)<=Th*Math.max(1,Math.abs(e),Math.abs(M))&&Math.abs(h-w)<=Th*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-S)<=Th*Math.max(1,Math.abs(r),Math.abs(S))&&Math.abs(n-T)<=Th*Math.max(1,Math.abs(n),Math.abs(T))&&Math.abs(o-b)<=Th*Math.max(1,Math.abs(o),Math.abs(b))&&Math.abs(a-x)<=Th*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-v)<=Th*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-C)<=Th*Math.max(1,Math.abs(l),Math.abs(C))&&Math.abs(c-G)<=Th*Math.max(1,Math.abs(c),Math.abs(G))&&Math.abs(f-I)<=Th*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-_)<=Th*Math.max(1,Math.abs(d),Math.abs(_))&&Math.abs(p-D)<=Th*Math.max(1,Math.abs(p),Math.abs(D))&&Math.abs(m-N)<=Th*Math.max(1,Math.abs(m),Math.abs(N))&&Math.abs(g-E)<=Th*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new bh(3);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Bs=function(t){var s=new bh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Us=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new bh(3);return e[0]=t,e[1]=s,e[2]=i,e},Ws=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Qs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Js=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Vs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},Ys=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Hs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},qs=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},Zs=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Xs=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Ks=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},$s=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},M=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(M(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},ui=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,u=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*u+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*u+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*u+h[2]*n,t},li=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,u=o*n;return t[0]=s[0]*u+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*u+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*u+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,u=e*n-h*r,l=h*u-c*a,c=c*o-e*u,e=e*a-h*o;return a*=h=2*i[3],u*=h,c*=2,e*=2,t[0]=r+(o*=h)+(l*=2),t[1]=n+a+c,t[2]=s+u+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Mi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&M(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Si=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ti=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},bi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Th*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Th*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},S=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new bh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},vi=function(t,s,i,e){var h=new bh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ci=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Gi=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},_i=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Di=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ni=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ei=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ai=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Li=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Ri=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Pi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},ki=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Fi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},ji=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},T=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},b=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},zi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Bi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Ui=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Wi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],u=s[1],l=s[2],s=s[3];return t[0]=u*i-l*a+s*o,t[1]=-e*i+l*n-s*r,t[2]=e*a-u*n+s*h,t[3]=-e*o+u*r-l*h,t},Qi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},Ji=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(r=2*Oh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Vi=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},Yi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],u=(i=i[3])*e+o*r-a*h,l=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=u*i+(e=-n*e-o*h-a*r)*-n+l*-a-c*-o,t[1]=l*i+e*-o+c*-n-u*-a,t[2]=c*i+e*-a+u*-o-l*-n,t[3]=s[3],t},Hi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},qi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Xi=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Th*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Th*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Th*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},v=function(){var t=new bh(4);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Ki=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},C=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},$i=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Th<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=Jh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},G=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},D=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},N=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return N(t,s),Qh(t,t,i),D(t,t),t},E=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],u=i[0],l=i[1],c=i[2],f=n*u+o*l+a*c+s*(i=i[3]);return f<0&&(f=-f,u=-u,l=-l,c=-c,i=-i),f=Th<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*u,t[1]=r*o+f*l,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},A=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Rh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),u=Math.cos(i),l=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"xzy":t[0]=n*u*c-o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c+n*a*l;break;case"yxz":t[0]=n*u*c+o*a*l,t[1]=o*a*c-n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;case"yzx":t[0]=n*u*c+o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c-n*a*l;break;case"zxy":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l+n*a*c,t[3]=o*u*c-n*a*l;break;case"zyx":t[0]=n*u*c-o*a*l,t[1]=o*a*c+n*u*l,t[2]=o*u*l-n*a*c,t[3]=o*u*c+n*a*l;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ue=function(t,s){return Math.abs(x(t,s))>=1-Th},le=function(){var t=new bh(8);return bh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new bh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new bh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new bh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},L=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=v(),e=(u(i,s),new bh(3));return a(e,s),L(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Me=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Se=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Te=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},be=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],u=s[4],l=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+u,t[5]=n*a+r*o-e*i+l,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return G(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},ve=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return I(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ce=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],u=s[6],l=o*n+(d=s[7])*e+a*r-u*h,c=a*n+d*h+u*e-o*r,f=u*n+d*r+o*h-a*e,d=d*n-o*e-a*h-u*r;return _(t,s,i),e=t[0],t[4]=l*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-l*r,t[6]=f*n+d*r+l*h-c*e,t[7]=d*n-l*e-c*h-f*r,t},Ge=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],u=s[3];return t[0]=n*i+u*e+o*r-a*h,t[1]=o*i+u*h+a*e-n*r,t[2]=a*i+u*r+n*h-o*e,t[3]=u*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(u=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+u*h+a*e-n*r,t[6]=a*i+u*r+n*h-o*e,t[7]=u*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],u=i[3];return t[0]=e*u+s*n+h*a-r*o,t[1]=h*u+s*o+r*n-e*a,t[2]=r*u+s*a+e*o-h*n,t[3]=s*u-e*n-h*o-r*a,t[4]=e*(u=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*u+s*o+r*n-e*a,t[6]=r*u+s*a+e*o-h*n,t[7]=s*u-e*n-h*o-r*a,t},_e=function(t,s,i,e){var h,r,n,o,a,u;return Math.abs(e)<Th?O(t,s):(u=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/u,r=n*i[1]/u,n=n*i[2]/u,i=Math.cos(e),u=s[0],t[0]=u*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-u*n,t[2]=a*i+e*n+u*r-o*h,t[3]=e*i-u*h-o*r-a*n,t[4]=(e=s[4])*i+(u=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+u*r+a*h-e*n,t[6]=a*i+u*n+e*r-o*h,t[7]=u*i-e*h-o*r-a*n,t)},De=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ne=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],u=i[6],l=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*l+n*o+h*u-r*a+c*i+s*p+f*g-d*m,t[5]=h*l+n*a+r*o-e*u+f*i+s*m+d*p-c*g,t[6]=r*l+n*u+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*l-e*o-h*a-r*u+s*i-c*p-f*m-d*g,t},Ee=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ae=function(t,s,i,e){var h=1-e;return Zh(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Le=function(t,s){var i=Xh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Re=function(t,s){var i,e,h,r,n,o,a,u,l=Xh(s);return 0<l&&(l=Math.sqrt(l),u=(i=s[0]/l)*(n=s[4])+(e=s[1]/l)*(o=s[5])+(h=s[2]/l)*(a=s[6])+(r=s[3]/l)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*u)/l,t[5]=(o-e*u)/l,t[6]=(a-h*u)/l,t[7]=(s-r*u)/l),t},Pe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},ke=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Fe=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],u=s[0],l=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-u)<=Th*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-l)<=Th*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-c)<=Th*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Th*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Th*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Th*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Th*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))},R=function(){var t=new bh(2);return bh!=Float32Array&&(t[0]=0,t[1]=0),t},je=function(t){var s=new bh(2);return s[0]=t[0],s[1]=t[1],s},ze=function(t,s){var i=new bh(2);return i[0]=t,i[1]=s,i},Be=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ue=function(t,s,i){return t[0]=s,t[1]=i,t},We=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Qe=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},Ye=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},qe=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},Ze=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ke=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},$e=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},uh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},lh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Mh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},Sh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Th*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Th*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,u,m,g,y,M,w,S,x,v,C,G,I,_,D,N,E,A,L,O,R,Th=1e-6,bh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Rh="zyx",Ph=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),kh={__proto__:null,EPSILON:Th,get g(){return bh},M:Oh,S:Rh,T:P,C:k,equals:F},Fh=Object.freeze({__proto__:null,create:j,clone:z,G:B,identity:U,I:W,set:Q,_:J,D:V,N:Y,A:H,multiply:t,rotate:q,scale:Z,L:X,O:K,R:$,P:tt,F:st,add:it,j:s,B:et,equals:ht,U:rt,W:nt,mul:t,sub:s}),jh=Object.freeze({__proto__:null,create:ot,clone:at,G:ut,identity:lt,I:ct,set:ft,D:dt,A:pt,multiply:i,rotate:mt,scale:gt,translate:yt,L:Mt,O:wt,J:St,R:Tt,P:bt,add:xt,j:e,U:vt,W:Ct,B:Gt,equals:It,mul:i,sub:e}),zh=Object.freeze({__proto__:null,create:h,V:_t,clone:Dt,G:Nt,I:Et,set:At,identity:Lt,_:Ot,D:Rt,N:Pt,A:kt,multiply:r,translate:Ft,rotate:jt,scale:zt,J:Bt,L:Ut,O:Wt,Y:Qt,H:Jt,Z:Vt,X:Yt,R:Ht,P:qt,add:Zt,j:n,U:Xt,W:Kt,B:$t,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,G:es,I:hs,set:rs,identity:p,_:ns,D:os,N:as,A:us,multiply:o,translate:ls,scale:cs,rotate:fs,K:ds,$:ps,tt:ms,J:gs,O:ys,L:Ms,it:ws,et:Ss,ht:Ts,nt:f,ot:bs,ut:a,lt:d,ct:u,ft:xs,dt:vs,gt:Cs,H:Gs,yt:Is,Mt:l,perspective:l,St:_s,Tt:Ds,bt:c,ortho:c,xt:Ns,vt:Es,Ct:As,R:Ls,P:Os,add:Rs,j:Ps,U:ks,W:Fs,B:js,equals:zs,mul:o,sub:Ps}),qh=Vs,Kh=Ys,Wh=Hs,$h=ii,tr=ei,Bh=Us,sr=hi,Lh=m(),vh=Object.freeze({__proto__:null,create:m,clone:Bs,length:Us,I:g,G:Ws,set:Qs,add:Js,j:Vs,multiply:Ys,Gt:Hs,ceil:qs,floor:Zs,min:Xs,max:Ks,round:$s,scale:ti,It:si,_t:ii,Dt:ei,Nt:hi,Et:ri,inverse:ni,normalize:y,At:M,Lt:w,Ot:oi,Rt:ai,Pt:ui,kt:li,random:ci,Ft:fi,jt:di,zt:pi,K:mi,$:gi,tt:yi,angle:Mi,Bt:wi,R:Si,B:Ti,equals:bi,sub:qh,mul:Kh,div:Wh,Ut:$h,Wt:tr,Qt:Bh,Jt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Lh[0]=t[n],Lh[1]=t[n+1],Lh[2]=t[n+2],h(Lh,Lh,r),t[n]=Lh[0],t[n+1]=Lh[1],t[n+2]=Lh[2];return t}}),qh=_i,Kh=Di,Wh=Ni,$h=Fi,tr=ji,sr=T,ir=b,Ah=S(),Uh=Object.freeze({__proto__:null,create:S,clone:xi,I:vi,G:Ci,set:Gi,add:Ii,j:_i,multiply:Di,Gt:Ni,ceil:Ei,floor:Ai,min:Li,max:Oi,round:Ri,scale:Pi,It:ki,_t:Fi,Dt:ji,length:T,Nt:b,Et:zi,inverse:Bi,normalize:Ui,At:x,Lt:Wi,Ot:Qi,random:Ji,Ft:Vi,zt:Yi,Bt:Hi,R:qi,B:Zi,equals:Xi,sub:qh,mul:Kh,div:Wh,Ut:$h,Wt:tr,Qt:sr,Jt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ah[0]=t[n],Ah[1]=t[n+1],Ah[2]=t[n+2],Ah[3]=t[n+3],h(Ah,Ah,r),t[n]=Ah[0],t[n+1]=Ah[1],t[n+2]=Ah[2],t[n+3]=Ah[3];return t}}),qh=xi,Kh=vi,Wh=Ci,$h=Gi,tr=Ii,sr=se,Qh=Pi,Jh=x,ir=Qi,er=Vh=T,hr=Yh=b,Hh=Ui,rr=Zi,Dh=m(),Nh=g(1,0,0),Eh=g(0,1,0),nr=function(t,s,i){var e=M(s,i);return e<-.999999?(w(Dh,Nh,s),Bh(Dh)<1e-6&&w(Dh,Eh,s),y(Dh,Dh),C(t,Dh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Dh,s,i),t[0]=Dh[0],t[1]=Dh[1],t[2]=Dh[2],t[3]=1+e,Hh(t,t))},Ih=v(),_h=v(),or=function(t,s,i,e,h,r){return E(Ih,s,h,r),E(_h,i,e,r),E(t,Ih,_h,2*r*(1-r)),t},Gh=h(),qh=Object.freeze({__proto__:null,create:v,identity:Ki,Vt:C,Yt:$i,Ht:te,multiply:se,K:G,$:I,tt:_,qt:ie,exp:D,Zt:N,pow:ee,Rt:E,random:he,D:re,Xt:ne,Kt:A,$t:oe,R:ae,clone:qh,I:Kh,G:Wh,set:$h,add:tr,mul:sr,scale:Qh,At:Jh,Ot:ir,length:Vh,Qt:er,Nt:Yh,Jt:hr,normalize:Hh,B:rr,equals:ue,ts:nr,ss:or,es:function(t,s,i,e){return Gh[0]=i[0],Gh[3]=i[1],Gh[6]=i[2],Gh[1]=e[0],Gh[4]=e[1],Gh[7]=e[2],Gh[2]=-s[0],Gh[5]=-s[1],Gh[8]=-s[2],Hh(t,A(t,Gh))}}),Zh=Jh,Kh=Xh=Yh,$h=Object.freeze({__proto__:null,create:le,clone:ce,I:fe,hs:de,nt:L,J:pe,L:me,V:ge,G:O,identity:ye,set:Me,rs:Wh,ns:we,os:Wh,us:Se,ut:Te,translate:be,K:xe,$:ve,tt:Ce,ls:Ge,cs:Ie,ds:_e,add:De,multiply:Ne,mul:Ne,scale:Ee,At:Zh,Ot:Ae,D:Le,Xt:Oe,length:Vh,Qt:Vh,Nt:Xh,Jt:Kh,normalize:Re,R:Pe,B:ke,equals:Fe}),tr=ih,sr=Qe,ir=Je,er=Ve,hr=th,rr=sh,nr=eh,Ch=R(),or=Object.freeze({__proto__:null,create:R,clone:je,I:ze,G:Be,set:Ue,add:We,j:Qe,multiply:Je,Gt:Ve,ceil:Ye,floor:He,min:qe,max:Ze,round:Xe,scale:Ke,It:$e,_t:th,Dt:sh,length:ih,Nt:eh,Et:hh,inverse:rh,normalize:nh,At:oh,Lt:ah,Ot:uh,random:lh,gs:ch,ys:fh,jt:dh,Ft:ph,rotate:mh,angle:gh,Bt:yh,R:Mh,B:wh,equals:Sh,Qt:tr,sub:sr,mul:ir,div:er,Ut:hr,Wt:rr,Jt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Ch[0]=t[n],Ch[1]=t[n+1],h(Ch,Ch,r),t[n]=Ch[0],t[n+1]=Ch[1];return t}}),globalThis.Ms=kh,globalThis.Ms.ws=Fh,globalThis.Ms.Ss=jh,globalThis.Ms.Ts=zh,globalThis.Ms.bs=xh,globalThis.Ms.xs=qh,globalThis.Ms.vs=$h,globalThis.Ms.Cs=or,globalThis.Ms.Gs=vh,globalThis.Ms.Is=Uh}var Ch,Gh,Ih,_h,Dh,Nh,Eh,Ah,Lh,Th,bh,Oh,Rh,Ph,kh,Fh,jh,zh,xh,Bh,vh,Uh,Wh,Qh,Jh,Vh,Yh,Hh,qh,Zh,Xh,Kh,$h,tr,sr,ir,er,hr,rr,nr,or,O,R,P,k;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},v=function(t,s,i){return 0<=o(t,s,i)},C=function(t,s,i){return o(t,s,i)<0},G=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=R,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},_=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},D=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(_(t,s-1),_(t,s),_(t,s+1))&&(u(t),!0)},u=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},N=function(t,s){return C(_(t,s-1),_(t,s),_(t,s+1))},l=function(t,s,i){var e,h=P,r=k;if(v(_(t,s+1),_(t,s),_(t,i))&&G(_(t,s-1),_(t,s),_(t,i)))return!1;for(var n=I(_(t,s),_(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&v(_(t,s),_(t,i),_(t,o+1))&&G(_(t,s),_(t,i),_(t,o))&&(h[0]=_(t,s),h[1]=_(t,i),r[0]=_(t,o),r[1]=_(t,o+1),e=a(h,r),I(_(t,s),e)<n))return!1;return!0},E=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(_(t,s),_(t,i),_(t,e),_(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(N(t,r))for(var n=0;n<t.length;++n)if(l(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([_(t,r),_(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},A=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},L=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],u=[0,0],l=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],M=[],w=t,S=t;if(!(S.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var T=0;T<t.length;++T)if(N(w,T)){i.push(w[T]);for(var l=c=Number.MAX_VALUE,b=0;b<t.length;++b)x(_(w,T-1),_(w,T),_(w,b))&&G(_(w,T-1),_(w,T),_(w,b-1))&&(u=A(_(w,T-1),_(w,T),_(w,b),_(w,b-1)),C(_(w,T+1),_(w,T),u))&&(f=I(w[T],u))<c&&(c=f,a=u,m=b),x(_(w,T+1),_(w,T),_(w,b+1))&&G(_(w,T+1),_(w,T),_(w,b))&&(u=A(_(w,T+1),_(w,T),_(w,b),_(w,b+1)),x(_(w,T-1),_(w,T),u))&&(f=I(w[T],u))<l&&(l=f,o=u,p=b);if(m===(p+1)%t.length)u[0]=(a[0]+o[0])/2,u[1]=(a[1]+o[1])/2,e.push(u),T<p?(D(y,w,T,p+1),y.push(u),M.push(u),0!==m&&D(M,w,m,w.length),D(M,w,0,T+1)):(0!==T&&D(y,w,T,w.length),D(y,w,0,p+1),y.push(u),M.push(u),D(M,w,m,T+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(b=m;b<=p;++b)v(_(w,T-1),_(w,T),_(w,b))&&G(_(w,T+1),_(w,T),_(w,b))&&(f=I(_(w,T),_(w,b)))<d&&E(w,T,b)&&(d=f,g=b%t.length);T<g?(D(y,w,T,g+1),0!==g&&D(M,w,g,S.length),D(M,w,0,T+1)):(0!==T&&D(y,w,T,S.length),D(y,w,0,g+1),D(M,w,g,T+1))}return y.length<M.length?(L(y,s,i,e,h,r,n),L(M,s,i,e,h,r,n)):(L(M,s,i,e,h,r,n),L(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(_(t,e-1),_(t,e),_(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,v,C,G,r,I,_,n,D,u,N,l,E,c,f,d,A,L,m,g,O=[],R=[],P=[],k=[],self._s={Ds:s,Ns:L,Es:i,As:e,Ls:p,Os:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Rs=class{constructor(){throw TypeError("static class can't be instantiated")}static Ps(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static ks(){t=!0}static Fs(){return t}static js(){s=!0}static zs(){return s}static Bs(t){i=t}static Us(){return i}static Ws(){return"final"===i}};r.isDebug=!1,r.Qs=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Js={}}{const s=self.Rs;s.Vs=class{constructor(t){this.Ys=t,this.Hs=new Map,this.qs()}qs(){let t=this.Ys,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.Zs(i)}Zs(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Hs.set(i,e)}else this.Hs.set(t,null)}Xs(){for(const t of this.Hs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Ks(t){return this.Hs.has(t)}$s(t){const s=this.Hs.get(t);return void 0===s?null:s}ti(){history.replaceState("",document.title,location.pathname+location.search)}si(t){this.Ys=t,this.Hs.clear(),this.qs()}},s.ii=new s.Vs(location.search),s.ei=new s.Vs(location.hash),s.ii.Ks("perf")&&(s.hi=!0),"dev"!==s.ii.$s("mode")&&s.Bs("final")}{let e=function(t){const s=parseFloat(t),i=B.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Rs,z="(unknown)",B=(a.ri={ni:z,oi:z,ai:z,li:z,ci:NaN,fi:z,di:"browser",mi:!0,gi:!1,yi:!1,Mi:!1,wi:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),U=navigator.userAgent,W=navigator.userAgentData;if(W&&0<W.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=Q.get(r.brand),o=(!s&&n&&(s=n,i=r.version),J.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.ri.ai="Chromium",a.ri.li=h),a.ri.ai=s||z,a.ri.li=i||z,a.ri.fi=e||z};s,a.ri.ni=W.platform,a.ri.gi=W.mobile,a.ri.mi=!a.ri.gi;const Q=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),J=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(W.brands);let i=!1;a.ri.wi=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.ri.ni?a.ri.oi=e(t.platformVersion):a.ri.oi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(U);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.ri.ni="Windows";const s=t[1];a.ri.oi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.ri.ni="macOS",a.ri.oi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.ri.ni="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.ri.ni="Linux"}),t(/android/i,()=>{a.ri.ni="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.ri.ni="Android",a.ri.oi=t[1]}),a.ri.ni===z&&(t(/(iphone|ipod|ipad)/i,t=>{a.ri.ni="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.ri.ni="iOS",a.ri.oi=t[1].replace(/_/g,".")}));const V=/chrome\//i.test(U),Y=/chromium\//i.test(U),H=/edg\//i.test(U),q=/OPR\//.test(U),Z=/nwjs/i.test(U),X=/safari\//i.test(U),K=/webkit/i.test(U),$=(H||q||t(/chrome\/([\d\.]+)/i,t=>{a.ri.ai="Chrome",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.ri.ai="Edge",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.ri.ai="Opera",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.ri.ai="Chromium",a.ri.li=t[1],a.ri.fi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.ri.ai="NW.js",a.ri.li=t[1],a.ri.fi="Chromium",a.ri.di="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.ri.ai="Firefox",a.ri.li=t[1],a.ri.fi="Gecko"}),!X||V||Y||H||q||Z||(a.ri.ai="Safari",a.ri.fi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.ri.li=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.ri.ai="Chrome for iOS",a.ri.li=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.ri.ai="Firefox for iOS",a.ri.li=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.ri.ai="Edge for iOS",a.ri.li=t[1]})),a.ri.fi===z&&K&&(a.ri.fi="WebKit"),"Android"===a.ri.ni&&"Safari"===a.ri.ai&&(a.ri.ai="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=$.has(a.ri.ni)||"nwjs"===a.ri.di;a.ri.mi=tt,a.ri.gi=!tt}"Chrome"===a.ri.ai&&"browser"===a.ri.di&&/wv\)/.test(U)&&(a.ri.di="webview"),"nwjs"!==a.ri.di&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.ri.di="webapp"),a.ri.ci=parseFloat(a.ri.li);const i="macOS"===a.ri.ni&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.ri.ni="iOS",a.ri.oi=a.ri.li,a.ri.mi=!1,a.ri.gi=!0,a.ri.Mi=!0),a.ri.yi="macOS"===a.ri.ni||"iOS"===a.ri.ni}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return F(t,s)},s=function(t,s){return F(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function F(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),F(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Si=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Si,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class ut{constructor(t){this.Ti=t,this.bi=!this.Ti,this.bi||"undefined"!=typeof indexedDB||(this.bi=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.xi=new Map}vi(t){if(!this.bi)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.bi=!0;break}}async Ci(t){const s=this.xi.get(t),i=await h(s);return void 0===i?null:i}async Gi(t,s){s=await h(s),this.xi.set(t,s)}Ii(t){this.xi.delete(t)}_i(){this.xi.clear()}Di(){return Array.from(this.xi.keys())}Ni(){return this.bi}Ei(){return this.xi}Ai(t){this.xi=t}async getItem(s,t){if(e(t),this.bi)return this.Ci(s);let i;try{i=await this.Ti.get(s)}catch(t){return this.vi(t),this.bi?this.Ci(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.bi)await this.Gi(s,i);else try{await this.Ti.set(s,i)}catch(t){if(this.vi(t),!this.bi)throw t;await this.Gi(s,i)}}async removeItem(s,t){if(e(t),this.bi)this.Ii(s);else try{await this.Ti.delete(s)}catch(t){this.vi(t),this.bi?this.Ii(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.bi)this._i();else try{await this.Ti.clear()}catch(t){this.vi(t),this.bi?this._i():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.bi)return this.Di();let s=[];try{s=await this.Ti.keys()}catch(t){if(this.vi(t),this.bi)return this.Di();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.bi?Promise.resolve(!0):this.Ti.ready()}Li(t){if(t.forceInMemoryFallback)return new ut(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new ut(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}Oi(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Ri(t){i("localforage.defineDriver()")}Pi(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new ut(new ot("localforage"))}{const e=self.Rs;if(e.ki={},e.ki.Fi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.ki.ji="undefined"!=typeof HTMLDialogElement,e.ki.Bi=!!self.requestIdleCallback,e.ki.ImageBitmap=!!self.createImageBitmap,e.ki.ImageBitmapOptions=!1,e.ki.Ui=!1,e.ki.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.ki.ImageBitmapOptions=!0}).catch(()=>{e.ki.ImageBitmapOptions=!1})}catch(t){e.ki.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.ki.Ui=10===t.width&&10===t.height}).catch(()=>{e.ki.Ui=!1})}catch(t){e.ki.Ui=!1}}if(e.ki.Wi=!(!navigator.clipboard||!navigator.clipboard.readText),e.ki.Qi=!(!navigator.permissions||!navigator.permissions.query),e.ki.Ji=!1,e.ki.Qi){const lt={name:"clipboard-read"};navigator.permissions.query(lt).then(()=>{e.ki.Ji=!0}).catch(()=>{e.ki.Ji=!1})}e.ki.Vi=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.ki.Yi="undefined"!=typeof Proxy,e.ki.Hi=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.ki.Zi="function"==typeof fetch,e.ki.Xi=!!(self.isSecureContext&&"Opera"!==e.ri.ai&&navigator.storage&&navigator.storage.persist),e.ki.Ki=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.ki.$i=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.ri.ni)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.ki.ImageDecoder=void 0!==self.ImageDecoder,e.ki.te=!!self.VideoEncoder,e.ki.ie=!!self.showOpenFilePicker,e.ki.he=!!self.queryLocalFonts,e.ki.UserActivation=!!navigator.userActivation,e.ki.re=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.ki.re=i&&"image/webp"===i.type}catch(t){e.ki.re=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Rs;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ne(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.oe||(Set.prototype.oe=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ae(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Rs;self.assert=function(t,s){t||i(s)}}{const h=self.Rs,mt=self.Js,gt=(h.ue=function(t){return"number"==typeof t},h.le=function(t){return h.ue(t)&&isFinite(t)},h.fe=function(t){if(!h.ue(t))throw new TypeError("expected number")},h.de=function(t){h.pe(t)},h.me=function(t,s,i){if(!h.ue(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.ge=function(...s){for(let t of s);},h.ye=function(t){if(!h.le(t))throw new TypeError("expected finite number")},h.Me=function(t){h.pe(t)},h.we=function(...s){for(let t of s);},h.Se=function(t){return"string"==typeof t},h.Te=function(t){if(!h.Se(t))throw new TypeError("expected string")},h.xe=function(t){h.pe(t)},h.ve=function(...s){for(let t of s);},h.Ce=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Ge=function(t){if(!h.Ce(t))throw new TypeError("expected simple object")},h.Ie=function(t){if(!h.pe(t)&&!h.Ce(t))throw new TypeError("expected simple object")},h._e=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.De=function(t){if(!h._e(t))throw new TypeError("expected object")},h.Ne=function(t){h.pe(t)},h.Ee=function(...s){for(let t of s);},h.Ae=function(t){return h.Le(t,Blob)&&"string"==typeof t.name},h.Oe=function(t){if(!h.Ae(t))throw new TypeError("expected file")},h.Re=function(t){h.pe(t)},h.Pe=function(t){return Array.isArray(t)},h.ke=function(t){if(!h.Pe(t))throw new TypeError("expected array")},h.Fe=function(t){h.pe(t)},h.je=function(...s){for(let t of s);},h.Be=function(t){return!(!h.Pe(t)||t.length&&!h.Pe(t[0]))},h.Ue=function(s){if(!h.Be(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Pe(t))throw new TypeError("expected 2d array")},h.We=function(t){h.pe(t)},h.Qe=function(t){return"function"==typeof t},h.Je=function(t,s){if(!h.Qe(t))throw new TypeError("expected function");if(!h.pe(s)&&t!==s)throw new TypeError("expected same function reference")},h.Ve=function(t){h.pe(t)},h.Ye=function(...s){for(let t of s);},h.He=function(s,...i){if(!h.Qe(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.pe(t)&&s===t)return;throw new TypeError("expected same function reference")},h.qe=function(...s){if(!h.pe(s))for(let t of s);},h.Ze=function(t,s){return t instanceof s},h.Xe=function(s,...i){for(let t of i)if(h.Ze(s,t))return!0;return!1},h.Ke=function(t,s){if(!h.Ze(t,s))throw new TypeError("unexpected type")},h.$e=function(t,s){h.pe(t)},h.th=function(t,...s){for(let t of s);},h.ih=function(t,...s){if(!h.Xe(t,...s))throw new TypeError("unexpected type")},h.eh=function(t,...s){if(!h.pe(t)&&!h.Xe(t,...s))throw new TypeError("unexpected type")},h.hh=function(s,i){for(let t of s)if(!h.Ze(t,i))return!1;return!0},h.rh=function(s){for(let t of s)if(!h.le(t))return!1;return!0},h.nh=function(s,t){for(let t of s);},h.oh=function(s,t){if(!h.pe(s))for(let t of s);},h.ah=function(s,t){if(!h.pe(s))for(let t of s);},h.uh=function(s){for(let t of s);},h.lh=function(s){if(!h.pe(s))for(let t of s);},h.fh=function(t,s){return!(h.pe(t)||!h.Se(t.nodeName))&&(!s||h.ph(t.nodeName,s))},h.mh=function(t,s){if(h.pe(t)||!h.Se(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.ph(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.gh=function(t,s){h.pe(t)},h.yh=function(t,s){return!(h.pe(t)||!h.Se(t.tagName))&&(!s||h.ph(t.tagName,s))},h.Mh=function(t,s){if(h.pe(t)||!h.Se(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.ph(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.wh=function(t,s){h.pe(t)},h.Sh=function(t){return h.yh(t,"img")||h.yh(t,"canvas")||h.yh(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Th=function(t){if(!h.Sh(t))throw new TypeError("expected drawable")},h.bh=function(t){h.pe(t)},h.xh=function(t){return t instanceof ImageData||h.Sh(t)},h.Ch=function(t){if(!h.xh(t))throw new TypeError("expected drawable or image data")},h.Gh=function(t){if(!h.pe(t)&&!h.xh(t))throw new TypeError("expected drawable or image data")},h.Ih=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h._h},h.Dh=function(t){if(!h.Ih(t))throw new TypeError("expected string-like")},h.Nh=function(t){h.pe(t)},h.Eh=function(...s){for(let t of s);},h.Ah=function(){throw new Error("must be overridden")},h.Lh=function(){throw new Error("not yet implemented")},h.Oh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.pe=function(t){return null==t},h.Rh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Ph=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.kh=function(t){return h.Ze(t,gt)},h.Fh=function(t){},h.jh=function(t){h.zh(t,gt)},h.Bh=function(t,...s){if(!h.Uh(t,...s))throw new TypeError("unexpected type")},h.Uh=function(t,...s){for(const i of s)if(h.Le(t,i))return!0;return!1},h.zh=function(t,s){if(!h.Le(t,s))throw new TypeError("unexpected type")},h.Le=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.fe=h.fe,mt.de=h.de,mt.ye=h.ye,mt.Me=h.Me,mt.Te=h.Te,mt.xe=h.xe,mt.De=h.De,mt.Ne=h.Ne,mt.ke=h.ke,mt.Fe=h.Fe,mt.Je=h.Je,mt.Ve=h.Ve,mt.Ke=h.Ke,mt.$e=h.$e,mt.pe=h.pe}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ae())},i=function(){if(f=-1,0<a.size||0<u.size){let t=new Set([...a.keys()].map(t=>p.Wh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),u.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Qh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Wh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Rs,yt=new Map;p.Jh=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.Vh=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.Yh=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,Hh:0,qh:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.Hh.toPrecision(3)} :: calls => `+this.qh}})},p.Zh=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.Hh=i.total/i.qh,console.log(i.toString()),i.qh++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ae=function(){return(new Error).stack},p.Xh=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Wh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ue(t)?"<number>":p.Se(t)?"<string>":p.Pe(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Qe(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),u=new Map,l=new WeakMap,c=new WeakMap;p.Kh={};const Mt=new Set(["then","splice"]);p.Kh.get=function(t,s){return s in t||"symbol"==typeof s||Mt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Wh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!Mt.has(s)&&h(`Accessed property '${s}' on a released object '${p.Wh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.Kh.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Wh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Wh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Wh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.Kh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Wh(t)}'`)},p.Kh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Wh(t)}'`)},p.Kh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Wh(t)}'`)};let f=-1,d=(p.$h=class{constructor(){if(p.Qs&&p.ki.Yi){let t=Object.create(new.target.prototype),s=new Proxy(t,p.Kh);return a.set(t,s),u.set(s,t),l.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.tr=function(s){if(p.Qs&&p.ki.Yi&&s instanceof p.$h){if(u.has(s)){let t=u.get(s);u.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.ir=function(t,...s){let i;try{i=new t(...s)}catch(t){throw u.clear(),a.clear(),t}return p.Qs&&n(t,i),p.tr(i)},p.er=function(t){let s=l.get(t);s&&c.set(s,p.ae())},p.hr=function(t){let s=l.get(t);return!!s&&!!c.get(s)},new Map);p.rr=class{constructor(t){this.nr="",t&&this.start(t)}start(t){p.hi&&(this.nr=t,performance.mark(this.nr+"-Start"))}end(){p.hi&&(performance.mark(this.nr+"-End"),performance.measure(this.nr,this.nr+"-Start",this.nr+"-End"))}next(t){p.hi&&(this.end(),this.nr=t,performance.mark(this.nr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Rs,wt=2*Math.PI,St=Math.PI/180,Tt=180/Math.PI,bt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.ur=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.lr=function(t,s,i){return t<s?s:i<t?i:t},y.cr=function(t){return(t%=wt)<0&&(t+=wt),t},y.dr=function(t){return t*St},y.pr=function(t){return t*Tt},y.mr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.gr=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.yr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Mr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Sr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.cr(t+i):y.cr(t-i):y.cr(s)},y.Tr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.br=function(t,s,i,e=0){let h=y.Mr(t,s),r=wt*e;return y.Tr(s,t)?y.cr(t+(h+r)*i):y.cr(t-(h+r)*i)},y.vr=function(t,s,i,e=0){const h=y.Mr(t,s),r=wt*e;return y.Tr(s,t)?y.cr(t+(h+r)*i):y.cr(t+(wt-h+r)*i)},y.Cr=function(t,s,i,e=0){const h=y.Mr(t,s),r=wt*e;return y.Tr(s,t)?y.cr(t-(-wt+h-r)*i):y.cr(t-(h+r)*i)},y.Gr=function(t,s){const i=y.Mr(t,s);return y.Tr(t,s)?y.cr(s-i):y.cr(s+i)},y.Ot=function(t,s,i){return t+i*(s-t)},y.Ir=function(t,s,i){return t===s?0:(i-t)/(s-t)},y._r=function(t,s,i,e,h){return y.Ot(e,h,y.Ir(t,s,i))},y.Dr=function(t,s,i,e){return y.Ot(y.Ot(t,s,e),y.Ot(s,i,e),e)},y.Nr=function(t,s,i,e,h){return y.Ot(y.Dr(t,s,i,h),y.Dr(s,i,e,h),h)},y.Er=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Ar=function(t){return 0<t&&0==(t-1&t)},y.Lr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Or=function(t,s){return Math.round(t*s)/s},y.Rr=function(t,s){return Math.floor(t*s)/s},y.Pr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.kr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.Fr=function(t,s,i){return y.lr(t,0,255)|y.lr(s,0,255)<<8|y.lr(i,0,255)<<16},1024),xt=16384,vt=8191,Ct=(y.jr=function(t,s,i,e){return t=y.lr(Math.floor(1024*t),-8192,vt),s=y.lr(Math.floor(1024*s),-8192,vt),i=y.lr(Math.floor(1024*i),-8192,vt),e=y.lr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*bt+s*xt*bt+i*bt+e)},y.zr=function(t,s,i){return y.jr(t,s,i,1)},y.Br=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*bt));return t>vt&&(t-=xt),t/1024}},y.Ur=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*bt)/(xt*bt));return t>vt&&(t-=xt),t/1024}},y.Wr=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*bt)/bt);return t>vt&&(t-=xt),t/1024}},y.Qr=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%bt);return s/1023}},y.Jr=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.Vr=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Ct){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.Jr(i,e);return[i/t,e/t]},y.Yr=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),u=Math.max(t,i),l=Math.min(h,n),c=Math.max(h,n);if(u<l||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,M=i-t,w=e-s,S=n-h,T=o-r,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.Hr=function(t,s,i,e,h,r,n,o,a,u,l,c){const f=Math.min(a,l),d=Math.max(a,l);if(r<f||d<h)return!1;const p=Math.min(u,c),m=Math.max(u,c);if(o<p||m<n)return!1;const g=a-t+l-i,y=u-s+c-e,M=i-t,w=e-s,S=l-a,T=c-u,b=Math.abs(w*S-T*M),x=S*y-T*g;if(Math.abs(x)>b)return!1;const v=M*y-w*g;return Math.abs(v)<=b},y.qr=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),u=h.Zr(),l=h.Xr(),c=h.Kr(),f=h.$r(),d=h.tn(),p=h.sn(),m=h.hn(),g=h.rn();return y.Hr(t,s,i,e,r,n,o,a,u,l,c,f)||y.Hr(t,s,i,e,r,n,o,a,c,f,d,p)||y.Hr(t,s,i,e,r,n,o,a,d,p,m,g)||y.Hr(t,s,i,e,r,n,o,a,m,g,u,l)},y.nn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),u=Math.max(i,h),l=0;for(let t=r.length-4;l<=t;l+=2)if(y.Hr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[l+2],r[l+3]))return!0;return y.Hr(s,i,e,h,n,o,a,u,r[l],r[l+1],r[0],r[1])};y.an=function(t,s,i,e,h,r,n,o){const a=i-t,u=e-s,l=n-h,c=o-r,f=a*c-u*l;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.un=function(t,s,i,e,h,r,n,o,a){const u=(n-h)*a,l=(o-r)*a;return y.an(t,s,i,e,h-u,r-l,n+u,o+l)},y.ln=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=a*f+u*d,y=l*l+c*c,M=l*f+c*d,w=1/(p*y-m*m),S=(y*g-m*M)*w,T=(p*M-m*g)*w;return 0<=S&&0<=T&&S+T<=1},y.cn=function(t,s,i,e,h,r,n,o){const a=h-i,u=r-e,l=n-i,c=o-e,f=t-i,d=s-e,p=a*a+u*u,m=a*l+u*c,g=l*l+c*c,y=f*a+d*u,M=f*l+d*c,w=p*g-m*m,S=(g*y-m*M)/w,T=(p*M-m*y)/w,b=1-S-T;return[b,S,T]},y.dn=function(t,s,i,e,h,r,n,o,a,u,l,c){return[t*e+s*n+i*u,t*h+s*o+i*l,t*r+s*a+i*c]}}{let u=self.Rs,s=null,i="";if("undefined"!=typeof document){const Gt=(s=document).querySelector("base");(i=Gt&&Gt.hasAttribute("href")?Gt.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}u.pn=function(){return i},u.mn=function(){if(!s)return"";const t=s.location;return u.gn(t.origin+t.pathname)+i},u.gn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},u.yn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},u.Mn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},u.wn=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},u.Sn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},u.Tn=function(t){return t.replace(/\\/g,"/")},u.bn=function(t,s){const i=t?u.Mn(t).slice(1):"";return s===i},u.xn=function(t,s){let i,e;return u.Ae(t)&&(i=u.Sn(t.name)),u.Se(t)&&(i=u.Sn(t)),u.Ae(s)&&(e=u.Sn(s.name)),u.Se(s)&&(e=u.Sn(s)),i===e},u.vn=function(t){t=u.Tn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Cn:h,name:r,root:s,ext:n,Gn:a}},u.In=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},u._n=function(t){try{t()}catch(t){u.isDebug&&console.warn("Swallowed exception: ",t)}},u.Dn=function(){},u.ph=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},u.Nn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},u.En=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},u.An=function(t,s){t.length=s},u.Ln=function(t){t&&0!==t.length&&u.An(t,0)},u.On=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];u.An(t,0)}u.An(i,0)}},u.Rn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},u.Pn=function(t,s,i){const e=t.length;(s|=0)<e?u.An(t,s):e<s&&u.Rn(t,s,i)},u.kn=function(t,s){u.Ln(t),u.Qh(t,s)},u.Qh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},u.Fn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];u.An(i,s)}},u.jn=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},u.zn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},u.Bn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return u.An(i,r),h},u.Un=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return u.An(i,h),t-h},u.Wn=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},u.Qn=function(t,s){if(!u.Wn(t,s))throw new RangeError("array index out of bounds")},u.Jn=function(t){return t.slice()},u.Vn=function(t,i){let e=[];for(let s of t)if(u._e(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else u.Pe(s)?e.push(u.Vn(s,i)):e.push(s);return e},u.Yn=function(s){let i=[];for(let t of s)i.push(t.slice());return i},u.Hn=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},u.qn=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},u.Zn=function(t,s){return t.union?t.union(s):new Set([...t,...s])},u.Xn=function(t,s){for(const i of s)t.add(i);return t},u.first=function(s){for(let t of s)return t;return null},u.xor=function(t,s){return!t!=!s},u.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},u.Kn=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},u.$n=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(u.io=function(t){e.push(t)},u.eo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},u.ho=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},u.ro=function(t){r.delete(t)},u.no=u.ho,u.ao=function(){return new Promise(t=>u.no(t))},new Set);u.uo=function(s){const i=self.requestAnimationFrame(async t=>{await u.ao(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},u.lo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Rs;r.co=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.fo=function(t){return!r.co(t)},r.do=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.po=function(t,s){return fetch(t,s).then(t=>(r.do(t),t))},r.mo=function(t){return r.po(t).then(t=>t.text())},r.yo=function(t){return r.po(t).then(t=>t.json())},r.Mo=function(t){return r.po(t).then(t=>t.blob())},r.wo=function(t){return r.po(t).then(t=>t.arrayBuffer())},r.So=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.To=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.bo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.xo=function(t){return r.bo(t).then(t=>JSON.parse(t))},r.vo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.So(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Co=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Go=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.lr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Io=function(t,s,i){const e=r.Co(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Go(e,s,i)},r._o=function(t,s,i){if(r.ki.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Io(t,s,i));if(r.ki.ImageBitmap)return createImageBitmap(t).then(t=>r.Io(t,s,i));{const e=r.Co(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Go(e,s,i)}},r.Do=function(t,s){t.clear();for(const i of s)t.add(i)},r.No=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Eo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Ao=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Lo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Oo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Ro=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Po=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},u=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,u;const l=self.Rs,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,_t=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;l.ko=class{constructor(t,s,i,e){this.Fo=NaN,this.jo=NaN,this.zo=NaN,this.Bo=NaN,this.Fo=0,this.jo=0,this.zo=0,this.Bo=0,t instanceof l.ko?this.set(t):this.Uo(t||0,s||0,i||0,e||0)}Wo(t,s,i){return this.Fo=+t,this.jo=+s,this.zo=+i,this.lr(),this}Uo(t,s,i,e){return this.Fo=+t,this.jo=+s,this.zo=+i,this.Bo=+e,this.lr(),this}set(t){return this.Fo=t.Fo,this.jo=t.jo,this.zo=t.zo,this.Bo=t.Bo,this}G(t){return this.set(t)}add(t){this.Fo+=t.Fo,this.jo+=t.jo,this.zo+=t.zo,this.Bo+=t.Bo,this.lr()}Qo(t,s,i,e=0){this.Fo+=+t,this.jo+=+s,this.zo+=+i,this.Bo+=+e,this.lr()}Jo(t){this.Vo(Math.max(this.Fo,t.Fo)-Math.min(this.Fo,t.Fo)),this.Yo(Math.max(this.jo,t.jo)-Math.min(this.jo,t.jo)),this.Ho(Math.max(this.zo,t.zo)-Math.min(this.zo,t.zo)),this.qo(Math.max(this.Bo,t.Bo)-Math.min(this.Bo,t.Bo)),this.lr()}Zo(t){this.Fo=t.Fo,this.jo=t.jo,this.zo=t.zo}Vo(t){this.Fo=l.lr(+t,0,1)}Xo(){return this.Fo}Yo(t){this.jo=l.lr(+t,0,1)}Ko(){return this.jo}Ho(t){this.zo=l.lr(+t,0,1)}$o(){return this.zo}qo(t){this.Bo=l.lr(+t,0,1)}ta(){return this.Bo}clone(){return l.ir(l.ko,this.Fo,this.jo,this.zo,this.Bo)}toArray(){return[this.Fo,this.jo,this.zo,this.Bo]}ia(){return new Float64Array(this.toArray())}ea(t,s){t[s++]=this.Fo,t[s++]=this.jo,t[s++]=this.zo,t[s]=this.Bo}ra(t,s){t[s++]=this.Fo,t[s++]=this.jo,t[s]=this.zo}equals(t){return this.Fo===t.Fo&&this.jo===t.jo&&this.zo===t.zo&&this.Bo===t.Bo}na(t){return this.Fo===t.Fo&&this.jo===t.jo&&this.zo===t.zo}oa(t,s,i){return this.Fo===t&&this.jo===s&&this.zo===i}aa(t,s,i,e){return this.Fo===t&&this.jo===s&&this.zo===i&&this.Bo===e}ua(t,s){return t[s]===Math.fround(this.Fo)&&t[s+1]===Math.fround(this.jo)&&t[s+2]===Math.fround(this.zo)&&t[s+3]===Math.fround(this.Bo)}la(t,s){return t[s]===Math.fround(this.Fo)&&t[s+1]===Math.fround(this.jo)&&t[s+2]===Math.fround(this.zo)}multiply(t){this.Fo*=t.Fo,this.jo*=t.jo,this.zo*=t.zo,this.Bo*=t.Bo}ca(t){this.Fo*=t,this.jo*=t,this.zo*=t,this.Bo*=t}fa(){return this.Fo*=this.Bo,this.jo*=this.Bo,this.zo*=this.Bo,this}ma(){return this.Fo/=this.Bo,this.jo/=this.Bo,this.zo/=this.Bo,this}lr(){return this.Fo=l.lr(this.Fo,0,1),this.jo=l.lr(this.jo,0,1),this.zo=l.lr(this.zo,0,1),this.Bo=l.lr(this.Bo,0,1),this}ga(t){this.Fo=l.Br(t),this.jo=l.Ur(t),this.zo=l.Wr(t),this.Bo=l.Qr(t)}ya(t,s,i){const e=l.le(t)?t:this.Xo(),h=l.le(s)?s:this.Ko(),r=l.le(i)?i:this.$o();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Ma(t,s,i,e){const h=l.le(t)?t:this.Xo(),r=l.le(s)?s:this.Ko(),n=l.le(i)?i:this.$o(),o=l.le(e)?e:this.ta();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}wa(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.$o());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Sa(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Vo(s),isFinite(i)&&this.Yo(i),isFinite(e)&&this.Ho(e),this.qo(1),!0}Ta(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.$o());return t+`, ${s}, `+i}ba(){const t=Math.round(255*this.Xo()),s=Math.round(255*this.Ko()),i=Math.round(255*this.$o());return[t,s,i]}xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Vo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Ho(h),this.qo(1),!0}Ca(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Vo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Ho(h),this.qo(1),!0}Ga(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.Vo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Ho(h),isFinite(r)&&this.qo(r),!0}Ia(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.Vo(i),isFinite(e)&&this.Yo(e),isFinite(h)&&this.Ho(h),isFinite(r)&&this.qo(r),!0}_a(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ca(t):this.xa(t);if(t.startsWith("rgba("))return t.includes("%")?this.Ia(t):this.Ga(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Da(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ca(t):4===s.length&&this.Ia(t):3===s.length?this.xa(t):4===s.length&&this.Ga(t)}}return this.Sa(t)}toJSON(){return[this.Fo,this.jo,this.zo,this.Bo]}Na(t,s,i,e){let h,r,n;if(t%=360,s=l.lr(s,0,100),i=l.lr(i,0,100),e=l.lr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=u(a,o,t+1/3),r=u(a,o,t),n=u(a,o,t-1/3)}return this.Vo(h),this.Yo(r),this.Ho(n),this.qo(e),this}Da(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=_t.exec(s);return i&&4===i.length?(this.Na(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Na(+i[1],+i[2],+i[3],+i[4]),0))}Ea(){const t=this.Fo,s=this.jo,i=this.zo,e=this.Bo,h=l.ko.Aa(t,s,i),r=l.ko.La(t,s,i),n=l.ko.Oa(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Ra(){const t=this.Fo,s=this.jo,i=this.zo;return[l.ko.Aa(t,s,i),l.ko.La(t,s,i),l.ko.Oa(t,s,i),this.Bo]}Pa(t){!Array.isArray(t)||t.length<3||(this.Fo=t[0],this.jo=t[1],this.zo=t[2],this.Bo=4<=t.length?t[3]:1)}set r(t){this.Vo(t)}get r(){return this.Xo()}set ka(t){this.Yo(t)}get ka(){return this.Ko()}set b(t){this.Ho(t)}get b(){return this.$o()}set a(t){this.qo(t)}get a(){return this.ta()}Fa(t,s){switch(t){case 0:this.Vo(s);break;case 1:this.Yo(s);break;case 2:this.Ho(s);break;case 3:this.qo(s);break;default:throw new RangeError("invalid color index")}}ja(t){switch(t){case 0:return this.Xo();case 1:return this.Ko();case 2:return this.$o();case 3:return this.ta();default:throw new RangeError("invalid color index")}}static za(t,s){let i,e;if(Array.isArray(t))(i=new l.ko).Pa(t);else{if(!(t instanceof l.ko))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new l.ko).Pa(s);else{if(!(s instanceof l.ko))throw new Error("unexpected type");e=s}return i.equals(e)}static Ba(t,s){return l.lr(Math.max(t,s)-Math.min(t,s),0,1)}static Ua(t,s){const i=new l.ko;return i.Vo(Math.max(t.Fo,s.Fo)-Math.min(t.Fo,s.Fo)),i.Yo(Math.max(t.jo,s.jo)-Math.min(t.jo,s.jo)),i.Ho(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i.qo(Math.max(t.Bo,s.Bo)-Math.min(t.Bo,s.Bo)),i}static Wa(t,s){const i=new l.ko(0,0,0,1);return i.Vo(Math.max(t.Fo,s.Fo)-Math.min(t.Fo,s.Fo)),i.Yo(Math.max(t.jo,s.jo)-Math.min(t.jo,s.jo)),i.Ho(Math.max(t.zo,s.zo)-Math.min(t.zo,s.zo)),i}static Aa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static La(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Oa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},l.ko.Qa=Object.freeze(l.ir(l.ko,1,1,1,1)),l.ko.Ja=Object.freeze(l.ir(l.ko,0,0,0,1)),l.ko.Va=Object.freeze(l.ir(l.ko,0,0,0,0))}{const Dt=self.Rs;Dt.Ya=class{constructor(t,s){this.Ha=0,this.qa=0,t instanceof Dt.Ya?this.G(t):this.set(t||0,s||0)}set(t,s){this.Ha=+t,this.qa=+s}G(t){this.Ha=t.Ha,this.qa=t.qa}equals(t){return this.Ha===t.Ha&&this.qa===t.qa}Za(t,s){return this.Ha===t&&this.qa===s}ua(t,s){return t[s]===Math.fround(this.Ha)&&t[s+1]===Math.fround(this.qa)}Xa(t){this.Ha=+t}Ka(){return this.Ha}$a(t){this.qa=+t}tu(){return this.qa}toArray(){return[this.Ha,this.qa]}ia(){return new Float64Array(this.toArray())}ea(t,s){t[s++]=this.Ha,t[s]=this.qa}offset(t,s){this.Ha+=+t,this.qa+=+s}scale(t,s){this.Ha*=t,this.qa*=s}Gt(t,s){this.Ha/=t,this.qa/=s}round(){this.Ha=Math.round(this.Ha),this.qa=Math.round(this.qa)}floor(){this.Ha=Math.floor(this.Ha),this.qa=Math.floor(this.qa)}ceil(){this.Ha=Math.ceil(this.Ha),this.qa=Math.ceil(this.qa)}angle(){return Dt.yr(0,0,this.Ha,this.qa)}su(){return this.Ha*this.Ha+this.qa*this.qa}length(){return Math.hypot(this.Ha,this.qa)}iu(t,s){const i=this.Ha*s-this.qa*t;this.qa=this.qa*s+this.Ha*t,this.Ha=i}rotate(t){0!==t&&this.iu(Math.sin(t),Math.cos(t))}eu(t,s,i){0===t||s===this.Ha&&i===this.qa||(this.Ha-=s,this.qa-=i,this.iu(Math.sin(t),Math.cos(t)),this.Ha+=+s,this.qa+=+i)}move(t,s){0!==s&&(this.Ha+=Math.cos(t)*s,this.qa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ha/=t,this.qa/=t)}lr(t,s){this.Ha=Dt.lr(this.Ha,t,s),this.qa=Dt.lr(this.qa,t,s)}At(t){return this.Ha*t.Ha+this.qa*t.qa}reverse(){this.Ha=-this.Ha,this.qa=-this.qa}hu(){let t=this.Ha;return this.Ha=this.qa,this.qa=-t,this}}}{const Nt=self.Rs;Nt.Rect=class{constructor(t,s,i,e){this.ru=NaN,this.nu=NaN,this.ou=NaN,this.au=NaN,this.ru=0,this.nu=0,this.ou=0,this.au=0,t instanceof Nt.Rect?this.G(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.ru=+t,this.nu=+s,this.ou=+i,this.au=+e}uu(t,s,i,e){s=+s,this.ru=t=+t,this.nu=s,this.ou=t+ +i,this.au=s+ +e}G(t){this.ru=+t.ru,this.nu=+t.nu,this.ou=+t.ou,this.au=+t.au}clone(){return new Nt.Rect(this.ru,this.nu,this.ou,this.au)}static lu(t,s){const i=new Nt.Rect;return i.cu(Math.min(t.ru,s.ru)),i.fu(Math.min(t.nu,s.nu)),i.du(Math.max(t.ou,s.ou)),i.pu(Math.max(t.au,s.au)),i}static mu(t){return new Nt.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.ru===t.ru&&this.nu===t.nu&&this.ou===t.ou&&this.au===t.au}gu(t,s,i,e){return this.ru===t&&this.nu===s&&this.width()===i&&this.height()===e}ua(t,s){return t[s]===Math.fround(this.ru)&&t[s+1]===Math.fround(this.nu)&&t[s+2]===Math.fround(this.ou)&&t[s+3]===Math.fround(this.au)}cu(t){this.ru=+t}yu(){return this.ru}fu(t){this.nu=+t}Mu(){return this.nu}du(t){this.ou=+t}wu(){return this.ou}pu(t){this.au=+t}Su(){return this.au}toArray(){return[this.ru,this.nu,this.ou,this.au]}ia(){return new Float64Array(this.toArray())}Tu(){return new DOMRect(this.ru,this.nu,this.width(),this.height())}static bu(t){return Nt.ir(Nt.Rect,t.left,t.top,t.right,t.bottom)}ea(t,s){t[s++]=this.ru,t[s++]=this.nu,t[s++]=this.ou,t[s]=this.au}xu(t,s){t[s++]=this.ru,t[s++]=this.nu,t[s++]=this.ou,t[s++]=this.nu,t[s++]=this.ou,t[s++]=this.au,t[s++]=this.ru,t[s]=this.au}vu(t,s,i){t[s++]=this.ru,t[s++]=this.nu,t[s++]=i,t[s++]=this.ou,t[s++]=this.nu,t[s++]=i,t[s++]=this.ou,t[s++]=this.au,t[s++]=i,t[s++]=this.ru,t[s++]=this.au,t[s]=i}width(){return this.ou-this.ru}height(){return this.au-this.nu}Cu(){return(this.ru+this.ou)/2}Gu(){return(this.nu+this.au)/2}offset(t,s){s=+s,this.ru+=t=+t,this.nu+=s,this.ou+=t,this.au+=s}offsetLeft(t){this.ru+=+t}offsetTop(t){this.nu+=+t}Iu(t){this.ou+=+t}_u(t){this.au+=+t}Du(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.nu<this.au?this.ru<this.ou?this.au=this.nu+this.width():this.au=this.nu-this.width():this.ru<this.ou?this.au=this.nu-this.width():this.au=this.nu+this.width()}Nu(t,s){s=+s,this.ru-=t=+t,this.nu-=s,this.ou+=t,this.au+=s}Eu(t,s){s=+s,this.ru+=t=+t,this.nu+=s,this.ou-=t,this.au-=s}multiply(t,s){this.ru*=t,this.nu*=s,this.ou*=t,this.au*=s}Gt(t,s){this.ru/=t,this.nu/=s,this.ou/=t,this.au/=s}Au(t){this.ru=+t-this.ru,this.ou=+t-this.ou}Lu(t){this.nu=+t-this.nu,this.au=+t-this.au}Ou(t,s){const i=this.width(),e=this.height(),h=this.yu()+i*t,r=this.Mu()+e*s;this.uu(h-e*s,r-i*t,e,i)}Ru(){const t=this.ru;this.ru=this.ou,this.ou=t}Pu(){const t=this.nu;this.nu=this.au,this.au=t}ku(t){const s=this.nu;this.nu=+t-this.au,this.au=+t-s}round(){this.ru=Math.round(this.ru),this.nu=Math.round(this.nu),this.ou=Math.round(this.ou),this.au=Math.round(this.au)}Fu(){this.ru=Math.ceil(this.ru),this.nu=Math.ceil(this.nu),this.ou=Math.floor(this.ou),this.au=Math.floor(this.au)}ju(){this.ru=Math.floor(this.ru),this.nu=Math.floor(this.nu),this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au)}floor(){this.ru=Math.floor(this.ru),this.nu=Math.floor(this.nu),this.ou=Math.floor(this.ou),this.au=Math.floor(this.au)}ceil(){this.ru=Math.ceil(this.ru),this.nu=Math.ceil(this.nu),this.ou=Math.ceil(this.ou),this.au=Math.ceil(this.au)}lr(t,s,i,e){this.ru=Math.max(this.ru,+t),this.nu=Math.max(this.nu,+s),this.ou=Math.min(this.ou,+i),this.au=Math.min(this.au,+e)}zu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.ru=Nt.lr(this.ru,t,i),this.nu=Nt.lr(this.nu,s,e),this.ou=Nt.lr(this.ou,t,i),this.au=Nt.lr(this.au,s,e)}normalize(){this.ru>this.ou&&this.Ru(),this.nu>this.au&&this.Pu()}Bu(t){return!(t.ou<this.ru||t.au<this.nu||t.ru>this.ou||t.nu>this.au)}Uu(t,s,i){return!(t.ou+s<this.ru||t.au+i<this.nu||t.ru+s>this.ou||t.nu+i>this.au)}Wu(t,s){return t>=this.ru&&t<=this.ou&&s>=this.nu&&s<=this.au}Qu(t){return t.ru>=this.ru&&t.nu>=this.nu&&t.ou<=this.ou&&t.au<=this.au}Ju(t){t.ru<this.ru&&(this.ru=+t.ru),t.nu<this.nu&&(this.nu=+t.nu),t.ou>this.ou&&(this.ou=+t.ou),t.au>this.au&&(this.au=+t.au)}Vu(t){this.ru=Nt.Ot(t.ru,t.ou,this.ru),this.nu=Nt.Ot(t.nu,t.au,this.nu),this.ou=Nt.Ot(t.ru,t.ou,this.ou),this.au=Nt.Ot(t.nu,t.au,this.au)}}}{const Et=self.Rs;Et.Yu=class{constructor(t,s,i,e,h,r,n,o){this.Hu=NaN,this.qu=NaN,this.Zu=NaN,this.Xu=NaN,this.Ku=NaN,this.$u=NaN,this.tl=NaN,this.sl=NaN,this.Hu=0,this.qu=0,this.Zu=0,this.Xu=0,this.Ku=0,this.$u=0,this.tl=0,this.sl=0,t instanceof Et.Yu?this.G(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.Hu=+t,this.qu=+s,this.Zu=+i,this.Xu=+e,this.Ku=+h,this.$u=+r,this.tl=+n,this.sl=+o}il(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}G(t){this.Hu=t.Hu,this.qu=t.qu,this.Zu=t.Zu,this.Xu=t.Xu,this.Ku=t.Ku,this.$u=t.$u,this.tl=t.tl,this.sl=t.sl}equals(t){return this.Hu===t.Hu&&this.qu===t.qu&&this.Zu===t.Zu&&this.Xu===t.Xu&&this.Ku===t.Ku&&this.$u===t.$u&&this.tl===t.tl&&this.sl===t.sl}el(t){this.Hu=+t}Zr(){return this.Hu}hl(t){this.qu=+t}Xr(){return this.qu}rl(t){this.Zu=+t}Kr(){return this.Zu}nl(t){this.Xu=+t}$r(){return this.Xu}ol(t){this.Ku=+t}tn(){return this.Ku}al(t){this.$u=+t}sn(){return this.$u}ul(t){this.tl=+t}hn(){return this.tl}ll(t){this.sl=+t}rn(){return this.sl}cl(){return new DOMQuad(new DOMPoint(this.Hu,this.qu),new DOMPoint(this.Zu,this.Xu),new DOMPoint(this.Ku,this.$u),new DOMPoint(this.tl,this.sl))}static fl(t){return Et.ir(Et.Yu,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Hu,this.qu,this.Zu,this.Xu,this.Ku,this.$u,this.tl,this.sl]}ia(){return new Float64Array(this.toArray())}ea(t,s){t[s++]=this.Hu,t[s++]=this.qu,t[s++]=this.Zu,t[s++]=this.Xu,t[s++]=this.Ku,t[s++]=this.$u,t[s++]=this.tl,t[s]=this.sl}dl(t,s,i){t[s++]=this.Hu,t[s++]=this.qu,t[s++]=i,t[s++]=this.Zu,t[s++]=this.Xu,t[s++]=i,t[s++]=this.Ku,t[s++]=this.$u,t[s++]=i,t[s++]=this.tl,t[s++]=this.sl,t[s]=i}offset(t,s){s=+s,this.Hu+=t=+t,this.qu+=s,this.Zu+=t,this.Xu+=s,this.Ku+=t,this.$u+=s,this.tl+=t,this.sl+=s}round(){this.Hu=Math.round(this.Hu),this.qu=Math.round(this.qu),this.Zu=Math.round(this.Zu),this.Xu=Math.round(this.Xu),this.Ku=Math.round(this.Ku),this.$u=Math.round(this.$u),this.tl=Math.round(this.tl),this.sl=Math.round(this.sl)}floor(){this.Hu=Math.floor(this.Hu),this.qu=Math.floor(this.qu),this.Zu=Math.floor(this.Zu),this.Xu=Math.floor(this.Xu),this.Ku=Math.floor(this.Ku),this.$u=Math.floor(this.$u),this.tl=Math.floor(this.tl),this.sl=Math.floor(this.sl)}ceil(){this.Hu=Math.ceil(this.Hu),this.qu=Math.ceil(this.qu),this.Zu=Math.ceil(this.Zu),this.Xu=Math.ceil(this.Xu),this.Ku=Math.ceil(this.Ku),this.$u=Math.ceil(this.$u),this.tl=Math.ceil(this.tl),this.sl=Math.ceil(this.sl)}pl(t){this.Hu=t.ru,this.qu=t.nu,this.Zu=t.ou,this.Xu=t.nu,this.Ku=t.ou,this.$u=t.au,this.tl=t.ru,this.sl=t.au}ml(t,s){0===s?this.pl(t):this.gl(t,Math.sin(s),Math.cos(s))}gl(t,s,i){const e=t.ru*s,h=t.nu*s,r=t.ou*s,n=t.au*s,o=t.ru*i,a=t.nu*i,u=t.ou*i,l=t.au*i;this.Hu=o-h,this.qu=a+e,this.Zu=u-h,this.Xu=a+r,this.Ku=u-n,this.$u=l+r,this.tl=o-n,this.sl=l+e}yl(t){t.set(Math.min(this.Hu,this.Zu,this.Ku,this.tl),Math.min(this.qu,this.Xu,this.$u,this.sl),Math.max(this.Hu,this.Zu,this.Ku,this.tl),Math.max(this.qu,this.Xu,this.$u,this.sl))}Wu(t,s){let i=this.Zu-this.Hu,e=this.Xu-this.qu,h=this.Ku-this.Hu,r=this.$u-this.qu,n=t-this.Hu,o=s-this.qu,a=i*i+e*e,u=i*h+e*r,l=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-u*u),p=(c*l-u*f)*d,m=(a*f-u*l)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.tl-this.Hu)*i+(e=this.sl-this.qu)*e)*f-(u=i*h+e*r)*(l=i*n+e*o))*(d=1/(a*c-u*u)),0<=(p=(c*l-u*f)*d)&&0<m&&p+m<1)}Cu(){return(this.Hu+this.Zu+this.Ku+this.tl)/4}Gu(){return(this.qu+this.Xu+this.$u+this.sl)/4}Ml(t,s,i,e){return!(!this.Wu(t,s)&&!this.Wu(i,e))||Et.qr(t,s,i,e,this)}wl(t){let s=t.Cu(),i=t.Gu();if(this.Wu(s,i))return!0;if(s=this.Cu(),i=this.Gu(),t.Wu(s,i))return!0;const e=this.Hu,h=this.qu,r=this.Zu,n=this.Xu,o=this.Ku,a=this.$u,u=this.tl,l=this.sl;return Et.qr(e,h,r,n,t)||Et.qr(r,n,o,a,t)||Et.qr(o,a,u,l,t)||Et.qr(u,l,e,h,t)}Sl(){const t=this.Hu,s=this.qu;this.Hu=this.Zu,this.qu=this.Xu,this.Zu=this.Ku,this.Xu=this.$u,this.Ku=this.tl,this.$u=this.sl,this.tl=t,this.sl=s}Tl(){this.bl(0,2),this.bl(1,3),this.bl(6,4),this.bl(7,5)}xl(){this.bl(0,6),this.bl(1,7),this.bl(2,4),this.bl(3,5)}vl(){this.bl(2,6),this.bl(3,7)}bl(t,s){const i=this.Cl(t);this.Gl(t,this.Cl(s)),this.Gl(s,i)}Cl(t){switch(t){case 0:return this.Hu;case 1:return this.qu;case 2:return this.Zu;case 3:return this.Xu;case 4:return this.Ku;case 5:return this.$u;case 6:return this.tl;case 7:return this.sl;default:throw new RangeError("invalid quad point index")}}Gl(t,s){switch(s=+s,t){case 0:this.Hu=s;break;case 1:this.qu=s;break;case 2:this.Zu=s;break;case 3:this.Xu=s;break;case 4:this.Ku=s;break;case 5:this.$u=s;break;case 6:this.tl=s;break;case 7:this.sl=s;break;default:throw new RangeError("invalid quad point index")}}}}{const At=self.Rs,Lt=[0,0,1,0,1,1,0,1],Ot=At.ir(At.Yu);At.Il=class extends At.$h{constructor(t,s=!0){super(),t=t||Lt,this._l=Float64Array.from(t),this.Dl=new At.Rect,this.Nl=!0,this.El=s}er(){}Al(){return this._l}Ll(){return this._l.length/2}Ol(t){this._l.length===t.length?this._l.set(t):this._l=Float64Array.from(t),this.Nl=!0}Rl(){this.Ol(Lt)}G(t){this.Ol(t._l)}Pl(){this.Nl=!0}kl(){if(this.Nl){let i=this._l,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Dl.set(e,h,r,n),this.Nl=!1}}pl(t,s,i){let e=this._l;8!==e.length&&(e=new Float64Array(8),this._l=e),e[0]=t.yu()-s,e[1]=t.Mu()-i,e[2]=t.wu()-s,e[3]=t.Mu()-i,e[4]=t.wu()-s,e[5]=t.Su()-i,e[6]=t.yu()-s,e[7]=t.Su()-i,this.Dl.G(t),0===s&&0===i||this.Dl.offset(-s,-i),this.Nl=!1}Fl(t,s,i){Ot.G(t),Ot.offset(s,i),this.Ol(Ot.toArray()),this.Nl=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.jl(t,s,e,h)}jl(i,e,h,r){const n=this._l;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,u=n[o]*e;n[t]=a*r-u*h,n[o]=u*r+a*h}this.Nl=!0}offset(i,e){const h=this._l;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}Wu(i,e){const h=this._l;if(i===h[0]&&e===h[1])return!0;this.kl();let t=this.Dl,r=t.yu()-110,n=t.Mu()-101,o=t.wu()+131,a=t.Su()+120,u=0,l=0,c,f,d=0,p=0,m,g,y=(c=r<i?(u=r,i):(u=i,r),f=n<e?(l=n,e):(l=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),M=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,S=h[t],T=h[t+1],b=h[w],x=h[1+w];At.Hr(r,n,i,e,u,c,l,f,S,T,b,x)&&++y,At.Hr(o,a,i,e,d,m,p,g,S,T,b,x)&&++M}return y%2==1||M%2==1}zl(t,c,f){const d=t._l,p=this._l;if(this.Wu(d[0]+c,d[1]+f))return!0;if(t.Wu(p[0]-c,p[1]-f))return!0;for(let s=0,l=p.length;s<l;s+=2){let t=(s+2)%l,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,u;a=i<h?(n=i,h):(n=h,i),u=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,M=d[m]+c,w=d[1+m]+f;if(At.Hr(i,e,h,r,n,a,o,u,g,y,M,w))return!0}}return!1}Ml(i,e,h,r,n,o){if(this.Wu(h-i,r-e))return!0;if(this.Wu(n-i,o-e))return!0;let a=0,u=0,l,c;l=h<n?(a=h,n):(a=n,h),c=r<o?(u=r,o):(u=o,r);const f=this._l;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(At.Hr(h,r,n,o,a,l,u,c,p,m,g,y))return!0}return!1}Tl(i){const e=this._l;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Nl=!0}xl(i){const e=this._l;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Nl=!0}vl(){const i=this._l;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Nl=!0}Bl(){let i=this._l,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Ll()}Ul(){let i=this._l,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Ll()}Wl(){return this._l}Ql(){return this.Ll()}Jl(){return this.El}}}{const Rt=self.Rs;Rt.Vl=class extends Rt.$h{constructor(t){if(super(),this.Yl=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}er(){this.Hl(),this.Yl=null}ql(){return 0===this.Yl.size}Hl(){const t=this.Yl;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Yl,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}$s(t,s){const i=this.Yl.get(t);return i&&i.get(s)}Ks(t,s){const i=this.Yl.get(t);return!!i&&i.has(s)}Zl(t,s){const i=this.Yl,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Xl(t){const s=this.Yl,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}Kl(){let t=0;for(const s of this.Yl.values())t+=s.size;return t}*values(){for(const t of this.Yl.values())yield*t.values()}*$l(){for(const[t,s]of this.Yl.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Yl.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Pt=self.Rs;Pt.tc=class extends Pt.$h{constructor(){super(),this.sc=new Set,this.ic=[],this.ec=!1}er(){this.Hl()}Hl(){this.sc.clear(),Pt.Ln(this.ic),this.ec=!1}hc(t){this.sc.has(t)||(this.sc.add(t),this.ec)||this.ic.push(t)}Ks(t){return this.sc.has(t)}Zl(t){this.sc.delete(t)&&(this.ec=!0)}Kl(){return this.sc.size}ql(){return 0===this.sc.size}rc(){return this.ec&&(this.nc(),this.ec=!1),this.ic}nc(){const t=this.ic;Pt.Ln(t);for(const s of this.sc)t.push(s)}}}{const kt=self.Rs,Ft=new Map,jt=new Map,zt=new Map,Bt=new Map,Ut=new Map,Wt=new Map,Qt=new Map,Jt=new Map,Vt=new Map,Yt=(Vt.set("linear","noease"),Vt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Ht=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],qt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),Zt=(self.oc=class hs{constructor(){}static ac(){return"default"}static uc(){return"noease"}static lc(t){return qt.get(t)}static cc(s,...i){this.fc();let t,e=(s?(zt.has(s)||zt.set(s,new Map),[...(t=zt.get(s)).keys()].filter(t=>!hs.dc(t,s)||hs.dc(t,s).transition.IsForAnyPurpose())):[...(t=Ut).keys()]).sort();return[...jt.keys()].concat(e).filter(t=>!i.includes(t))}static mc(){this.fc();const t=[...Ut.keys()];return t.sort(),[...jt.keys()].concat(t)}static yc(){this.fc();const t=[...Ut.keys()];return t.sort(),t}static Mc(t){for(const s of Yt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Ht){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static wc(t){return this.fc(),[...jt.keys()].includes(t)}static Sc(t){const s=Vt.get(t);return s?Ft.get(s):hs.wc(t)?Ft.get(t):Qt.has(t)?Qt.get(t):void 0}static Tc(t){return this.fc(),Jt.get(t)}static xc(t,s){this.fc();const i=hs.Sc(t);if(i)return i;if(s)return zt.get(s).get(t);throw new Error("missing ease function")}static dc(t,s){this.fc();const i=Bt.get(s);if(i)return i.get(t)}static vc(t,s){this.fc();const i=hs.Sc(t);return!!i||!!zt.get(s).get(t)}static Cc(t){this.fc();const s=hs.Sc(t);return s||Ut.get(t)}static Gc(t){return this.fc(),Wt.get(t)}static Ic(t){this.fc();const s=this.mc();return s[t]}static _c(t,s){this.fc();const i=this.cc(s);return i.indexOf(t)}static Dc(t){return this._c(t)}static fc(){0===Ft.size&&(this.Nc("default",()=>{}),this.Nc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Nc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Nc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Nc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Nc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Nc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Nc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Nc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Nc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Nc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Nc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Nc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Nc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Nc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Nc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Nc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Nc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Nc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Nc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Nc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Nc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Nc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Nc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Nc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Ec("cubicbezier",this.Ac),this.Ec("spline",this.Lc))}static Nc(t,s,i=!1){if("function"==typeof s)hs.Oc(t,s,"predefined");else{if(!kt.Pe(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=kt.ir(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Oc(t,(t,s,i,e)=>h.Rc(t,s,i,e),"predefined"),Jt.set(t,h)}else{const r=kt.ir(kt.Pc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.kc(i),hs.Oc(t,(t,s,i,e)=>r.Rc(t,s,i,e),"predefined")}}}static Ec(t,s){hs.Oc(t,s,"private")}static Fc(t,s,i,e){this.fc(),hs.Oc(t,s,"custom",i,e)}static jc(t,s){if(!this.wc(t)&&![...Qt.keys()].includes(t)){const i=zt.get(s),e=(i&&i.delete(t),Bt.get(s));e&&e.delete(t)}}static Oc(t,s,i,e,h){switch(i){case"predefined":Ft.set(t,s),jt.set(t,s);break;case"custom":if(e){zt.has(e)||zt.set(e,new Map),Bt.has(e)||Bt.set(e,new Map);const r=zt.get(e),n=(r.set(t,s),Bt.get(e));n.set(t,h)}else Ut.set(t,s),Wt.set(t,h);break;case"private":Ft.set(t,s),Qt.set(t,s);break;default:throw new Error("unexpected ease mode")}}static zc(t,s,i,e){return 0===e?s:i*t/e+s}static Ac(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static Lc(t,s,i,e,h,r,n,o,a,u){if(e===h&&r===n)return t;const l=es(t,s,e,r,o,u),c=Kt(i,h,n,a),f=$t(i,h,n,a),d=ts(i,h,n,a);return ss(l,c,f,d)}static Bc(t,s,i,e){const h=[],r=Kt(t,s,i,e),n=$t(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<Zt;++t){const a=ss(t*Xt,r,n,o);h.push(a)}return h}},11),Xt=1/(Zt-1),Kt=(t,s,i,e)=>e-3*i+3*s-t,$t=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],u=Zt-1;for(Zt;r!=u&&a<=n;)r++,a=h[r],o+=Xt;r--;let l=(n-(a=h[r]))/(h[r+1]-a),c=o+l*Xt,f=Kt(t,s,i,e),d=$t(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Xt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Se(t)};o;const rs=self.Rs;rs.Uc=class{constructor(t){this.Wc=[],this.nr=t||"",this.Qc=0}er(){this.Hl(),this.Wc=null}Jc(){return this.nr}Hl(){rs.On(this.Wc),this.Qc=0}Vc(){return this.Qc}Yc(t=Math.random()*this.Vc()){let s=0;for(const[i,e]of this.Wc)if(t<(s+=i))return e;return 0}Hc(t,s){o(s),this.Qc+=t,this.Wc.push([t,s])}qc(s,i){o(i);const e=0===s;for(let t=0;t<this.Wc.length;t++){const h=this.Wc[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.Wc.splice(t,1),this.Qc-=h[0];break}}}Zc(){return JSON.stringify(this.Wc)}static Xc(t,s){const i=new rs.Uc(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.Hc(r,n)}return i}}}{let t=self.Rs,i=0;t.Kc=class{constructor(t,s){this.$c=t,this.tf=s,this.if=i++,this.$c.ef("runtime","screen-reader-text",{type:"create",id:this.if,text:this.tf})}er(){this.$c.ef("runtime","screen-reader-text",{type:"release",id:this.if}),this.$c=null,this.tf="",this.if=-1}hf(t){this.tf!==t&&(this.tf=t,this.$c.ef("runtime","screen-reader-text",{type:"update",id:this.if,text:this.tf}))}}}{const ns=self.Rs;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.rf=!1,this.nf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.nf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.rf=!0}}}{const os=self.Rs;os.Event.uf=class extends os.$h{constructor(t){super(),this.lf=t,this.cf=[],this.ff=new Set,this.df=[],this.pf=new Set,this.mf=0,this.gf=[]}er(){0<this.mf||(os.Ln(this.cf),this.ff.clear(),os.Ln(this.df),this.pf.clear(),os.Ln(this.gf),os.er(this))}yf(t,s){this.Mf()?this.gf.push({wf:"add",Sf:t,capture:s}):s?this.ff.has(t)||(this.cf.push(t),this.ff.add(t)):this.pf.has(t)||(this.df.push(t),this.pf.add(t))}Tf(t,s){this.Mf()?this.gf.push({wf:"remove",Sf:t,capture:s}):s?this.ff.has(t)&&(this.ff.delete(t),os.jn(this.cf,t)):this.pf.has(t)&&(this.pf.delete(t),os.jn(this.df,t))}bf(){return!this.cf.length&&!this.df.length}Mf(){return 0<this.mf}xf(){const t=new Set,s=new Set;for(const i of this.gf)if("add"===i.wf)this.yf(i.Sf,i.capture),(i.capture?s:t).delete(i.Sf);else{if("remove"!==i.wf)throw new Error("invalid op");(i.capture?(this.ff.delete(i.Sf),s):(this.pf.delete(i.Sf),t)).add(i.Sf)}os.Un(this.df,t),os.Un(this.cf,s),os.Ln(this.gf)}vf(i){this.Cf();let e=!1;for(let t=0,s=this.cf.length;t<s;++t)if(this.cf[t](i),i.rf){e=!0;break}if(!e)for(let t=0,s=this.df.length;t<s&&(this.df[t](i),!i.rf);++t);return this.Gf(),!i.defaultPrevented}If(i){this.Cf();for(let t=0,s=this.cf.length;t<s;++t)this.cf[t](i);for(let t=0,s=this.df.length;t<s;++t)this.df[t](i);return this.Gf(),!0}Cf(){this.mf++}Gf(){this.mf--,0===this.mf&&0<this.gf.length&&this.xf()}_f(t){t?this.Cf():this.Gf()}Df(i){let e=[];for(let s=0,t=this.cf.length;s<t;++s){let t=this.cf[s];e.push(os.Nf(()=>t(i)))}for(let s=0,t=this.df.length;s<t;++s){let t=this.df[s];e.push(os.Nf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Ef(i){const e=[];this.Cf();for(let t=0,s=this.cf.length;t<s;++t){const h=this.cf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.df.length;t<s;++t){const r=this.df[t](i);r instanceof Promise&&e.push(r)}return this.Gf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async Af(t){return this.Ef(t)}async Lf(i){this.Cf();for(let t=0,s=this.cf.length;t<s;++t){const e=this.cf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.df.length;t<s;++t){const h=this.df[t](i);h instanceof Promise&&await h}return this.Gf(),!i.defaultPrevented}*Of(i){this.Cf();for(let t=0,s=this.cf.length;t<s;++t){const e=this.cf[t](i);os.Ro(e)&&(yield*e)}for(let t=0,s=this.df.length;t<s;++t){const h=this.df[t](i);os.Ro(h)&&(yield*h)}this.Gf()}}}{const as=self.Rs;as.Event.Rf=class extends as.$h{constructor(){super(),this.Pf=new Map,this.kf=!1}er(){if(this.kf)throw new Error("already released");this.Ff(),this.kf=!0,as.er(this)}hr(){return this.kf}Ff(){if(this.Pf){for(let t of this.Pf.values())t.er();this.Pf.clear()}}jf(t,s){let i=this.Pf.get(t);return i||(s?(i=as.ir(as.Event.uf,t),this.Pf.set(t,i),i):null)}zf(t){return this.Pf.has(t)}addEventListener(t,s,i){let e=this.jf(t,!0);e.yf(s,!!i)}removeEventListener(t,s,i){let e=this.jf(t,!1);e&&(e.Tf(s,!!i),e.bf())&&this.Pf.delete(t)}dispatchEvent(t){const s=this.jf(t.type,!1);return!s||(t.cancelable?s.vf(t):s.If(t))}Bf(t){const s=this.jf(t.type,!1);return s?(t.nf=!0,s.Df(t)):Promise.resolve(!0)}async Uf(t){const s=this.jf(t.type,!1);if(!s)return!0;this.Pf.delete(t.type),t.nf=!0;const i=await s.Df(t);return s.er(),i}async Wf(t){const s=this.jf(t.type,!1);return!s||s.Af(t)}Qf(t){const s=this.jf(t.type,!1);return!s||s.Ef(t)}async Jf(t){const s=this.jf(t.type,!1);return!s||s.Lf(t)}Vf(t){const s=this.jf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Of(t)}_f(t){for(const s of this.Pf.values())s._f(t)}}}{let r=function(t){c=u&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,l.length){let i=performance.now(),e=i,t=0,s;for(;n(l.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,l.length&&(u&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&l.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Sf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Rs),o=12,a=16,i=35,u="undefined"!=typeof requestIdleCallback,l=[],c=-1,f=0,h=t.ii.Ks("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Nf=function(i){let e=null;return t.isDebug&&(e=t.ae()),new Promise((t,s)=>{l.push({Sf:i,resolve:t,reject:s,stack:e}),h?n(l.pop()):-1===c&&r(a)})},t.Nf.Yf=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.Hf(i)){let t=s.qf();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Rs),e=1e3,h=100,r=-1,n=(i.Zf=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.Xf=class{constructor(t,s){this.Kf=t,this.$f=1e3*s,this.t0=0,this.s0=!1}i0(){let t=i.Zf();this.t0=t+this.$f,this.s0||(a.add(this),this.s0=!0),-1===n?(o=this.t0,n=self.setTimeout(s,this.$f+h)):this.t0<o&&o>t+e&&(self.clearTimeout(n),o=this.t0,n=self.setTimeout(s,this.$f+h))}Hf(t){return!(t>=this.t0)||(this.Kf()?(this.t0=t+this.$f,!0):this.s0=!1)}qf(){return this.t0}e0(){this.s0&&(a.delete(this),this.s0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}er(){this.e0(),this.Kf=null}}}{const us=self.Rs;us.h0=class ls{constructor(t){this.r0=!1,this.n0=t}o0(){this.r0||(this.r0=!0,this.n0&&(this.n0(),this.n0=null))}a0(){return this.r0}er(){this.o0()}static er(t){return new ls(()=>t.er())}static u0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new us.l0;for(let t of i)s.addEventListener(t,e,h),r.hc(us.ir(us.h0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),us.ir(us.h0,()=>s.removeEventListener(i,e,h))}},us.c0=class extends us.h0{f0(t){this.n0=t}},us.l0=class extends us.h0{constructor(...s){super(),this.d0=new Set;for(let t of s)this.hc(t)}hc(...s){if(this.r0)throw new Error("already disposed");for(let t of s)this.d0.add(t)}p0(t){if(this.r0)throw new Error("already disposed");this.d0.delete(t)}m0(){if(this.r0)throw new Error("already disposed");if(this.d0){for(let t of this.d0)t.o0();this.d0.clear()}}a0(){return this.r0}o0(){if(this.r0)throw new Error("already disposed");this.r0=!0;for(let t of this.d0)t.o0();this.d0.clear(),this.d0=null}er(){this.o0()}}}{const cs=self.Rs;cs.g0=class extends cs.$h{constructor(){super(),this.y0=0,this.qa=0,this.M0=0,this.w0=0}hc(t){this.qa=(t=+t)-this.y0,this.M0=this.w0+this.qa,this.y0=this.M0-this.w0-this.qa,this.w0=this.M0}S0(t){this.w0-=+t}$s(){return this.w0}i0(){this.y0=0,this.qa=0,this.M0=0,this.w0=0}Set(t){this.y0=0,this.qa=0,this.M0=0,this.w0=+t}T0(t){this.y0=t.y0,this.qa=t.qa,this.M0=t.M0,this.w0=t.w0}er(){}}}{const fs=self.Rs,n={};n.b0=function(t){this.x0=t,this.right=this.x0.v0,this.left=this.x0.v0,this.parent=null,this.color=!1,this.key=null},n.C0=function(t){this.size=0,this.v0=new n.b0(this),this.v0.color=!1,this.root=this.v0,this.root.parent=this.v0,this.compare=t||this.G0},n.C0.prototype.G0=function(t,s){return t<s?-1:s<t?1:0},n.C0.prototype.clone=function(){var t=new n.C0(this.compare);return t.I0(this),t},n.C0.prototype.clear=function(){this.size=0,this.v0=new n.b0(this),this.v0.color=!1,this.root=this.v0,this.root.parent=this.v0},n.C0.prototype._0=function(t){var s=t.right;t.right=s.left,s.left!=this.v0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.v0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.C0.prototype.D0=function(t){var s=t.left;t.left=s.right,s.right!=this.v0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.v0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.C0.prototype.N0=function(t){if(this.contains(t))this.E0(t).key=t;else{for(var s=new n.b0(this),i=(s.key=t,this.v0),e=this.root;e!=this.v0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.v0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.v0,s.right=this.v0,s.color=!0,this.A0(s),this.size++}},n.C0.prototype.A0=function(t){for(;t!=this.v0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this._0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.v0&&this.D0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.D0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.v0&&this._0(t.parent.parent))}this.root.color=!1},n.C0.prototype.L0=function(t){var s=t.left==this.v0||t.right==this.v0?t:this.O0(t),i=s.left!=this.v0?s.left:s.right;i.parent=s.parent,s.parent==this.v0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.R0(i),this.size--},n.C0.prototype.R0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this._0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.D0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this._0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.D0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this._0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.D0(t.parent),this.root))}t.color=!1},n.C0.prototype.remove=function(t){var s;return(t=this.E0(t))!=this.v0?(s=t.key,this.L0(t),s):null},n.C0.prototype.P0=function(t,s){this.remove(s)},n.C0.prototype.min=function(t){for(;t.left!=this.v0;)t=t.left;return t},n.C0.prototype.max=function(t){for(;t.right!=this.v0;)t=t.right;return t},n.C0.prototype.O0=function(t){if(t.right!=this.v0)return this.min(t.right);for(var s=t.parent;s!=this.v0&&t==s.right;)s=(t=s).parent;return s},n.C0.prototype.k0=function(t){if(t.left!=this.v0)return this.max(t.left);for(var s=t.parent;s!=this.v0&&t==s.left;)s=(t=s).parent;return s},n.C0.prototype.F0=function(t){if(0<this.size){var s=this.E0(t);if(s==this.v0)return null;if(s.right!=this.v0)return this.min(s.right).key;for(var i=s.parent;i!=this.v0&&s==i.right;)i=(s=i).parent;return i!=this.v0?i.key:null}return null},n.C0.prototype.j0=function(t){if(0<this.size){var s=this.E0(t);if(s==this.v0)return null;if(s.left!=this.v0)return this.max(s.left).key;for(var i=s.parent;i!=this.v0&&s==i.left;)i=(s=i).parent;return i!=this.v0?i.key:null}return null},n.C0.prototype.z0=function(){return this.min(this.root).key},n.C0.prototype.B0=function(){return this.max(this.root).key},n.C0.prototype.E0=function(t){for(var s=this.root;s!=this.v0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.C0.prototype.contains=function(t){return null!=this.E0(t).key},n.C0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.C0.prototype.I0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.N0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.N0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.N0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.N0(t[e])},n.C0.prototype.U0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.P0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.C0.prototype.W0=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.C0.prototype.range=function(t,s){var i=[];return this.Q0(function(t){i.push(t)},t,s),i},n.C0.prototype.J0=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.v0;){if(t.call(s,i.key,this))return;i=this.O0(i)}},n.C0.prototype.Y0=function(t,s,i){if(!this.V0())for(var e=this.E0(s);e!=this.v0;){if(t.call(i,e.key,this))return;e=this.O0(e)}},n.C0.prototype.H0=function(t,s,i){if(!this.V0())for(var e=this.min(this.root),h=this.E0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.O0(e)}},n.C0.prototype.Q0=function(t,s,i,e){if(!this.V0())for(var h=this.E0(s),r=this.E0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.O0(h)}},n.C0.prototype.q0=function(t,s){if(!this.V0())for(var i=this.max(this.root);i!=this.v0;){if(t.call(s,i.key,this))return;i=this.k0(i)}},n.C0.prototype.forEach=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.v0;i=this.O0(i))t.call(s,i.key,i.key,this)},n.C0.prototype.some=function(t,s){if(!this.V0())for(var i=this.min(this.root);i!=this.v0;i=this.O0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.C0.prototype.every=function(t,s){if(this.V0())return!1;for(var i=this.min(this.root);i!=this.v0;i=this.O0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.C0.prototype.map=function(t,s){var i=[];if(!this.V0())for(var e=this.min(this.root);e!=this.v0;e=this.O0(e))i.push(t.call(s,e.key,e.key,this));return i},n.C0.prototype.filter=function(t,s){var i=[];if(!this.V0())for(var e=this.min(this.root);e!=this.v0;e=this.O0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.C0.prototype.getCount=function(){return this.size},n.C0.prototype.V0=function(){return 0==this.size},n.C0.prototype.oe=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.V0())return!0;for(var e=this.min(this.root);e!=this.v0;e=this.O0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.C0.prototype.Z0=function(t){var s=new n.C0(this.compare);if(!this.V0())for(var i=this.min(this.root);i!=this.v0;i=this.O0(i))t.contains.call(t,i.key,i.key,this)&&s.N0(i.key);return s},fs.C0=class extends fs.$h{constructor(t){super(),this.X0=new n.C0(t),this.K0=!1,this.$0=new Set,this.t1=new Set}hc(t){this.K0?this.X0.contains(t)?this.t1.delete(t):this.$0.add(t):this.X0.N0(t)}p0(t){this.K0?this.X0.contains(t)?this.t1.add(t):this.$0.delete(t):this.X0.remove(t)}Ks(t){return this.K0?!!this.$0.has(t)||!this.t1.has(t)&&this.X0.contains(t):this.X0.contains(t)}Hl(){this.X0.clear(),this.$0.clear(),this.t1.clear()}toArray(){if(this.K0)throw new Error("cannot be used in queueing mode");return this.X0.getValues()}Kl(){return this.X0.getCount()+this.$0.size-this.t1.size}ql(){return 0===this.Kl()}s1(){if(this.ql())throw new Error("empty set");if(this.K0)throw new Error("cannot be used in queueing mode");const t=this.X0,s=t.min(t.root);return s.key}i1(){if(this.ql())throw new Error("empty set");if(this.K0)throw new Error("cannot be used in queueing mode");const t=this.s1();return this.p0(t),t}e1(t){if(this.K0!==(t=!!t)&&!(this.K0=t)){for(const s of this.t1)this.X0.remove(s);this.t1.clear();for(const i of this.$0)this.X0.N0(i);this.$0.clear()}}h1(t){this.X0.forEach(t)}*values(){if(!this.ql()){const s=this.X0;for(let t=s.min(s.root);t!=s.v0;t=s.O0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Rs;ds.n1=class{constructor(t=ds.hardwareConcurrency){this.o1=t,this.a1=[],this.u1=0}hc(i){return new Promise((t,s)=>{this.a1.push({Sf:i,resolve:t,reject:s}),this.l1()})}c1(i){for(let t=0,s=this.a1.length;t<s;++t)if(this.a1[t].Sf===i)return t;return-1}f1(t,s){const i=this.c1(t);if(-1===i)throw new Error("cannot find promise to resolve");this.a1[i].resolve(s),this.a1.splice(i,1)}d1(t,s){const i=this.c1(t);if(-1===i)throw new Error("cannot find promise to reject");this.a1[i].reject(s),this.a1.splice(i,1)}async l1(){if(this.a1.length&&!(this.u1>=this.o1)){this.u1++;const s=this.a1.shift();try{const t=await s.Sf();s.resolve(t)}catch(t){s.reject(t)}this.u1--,this.l1()}}static async m1(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Rs;ps.g1=class{constructor(t,s,i){this.Kf=t,this.M1=s,this.w1=i||2*s,this.S1=-1,this.T1=-1/0,this.b1=()=>this.v1(),this.C1=!1,this.G1=!1,this.I1=null}_1(t){this.G1=!!t}D1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.w1:this.M1}N1(...e){if(-1===this.S1){this.I1=e;let t=ps.Zf(),s=t-this.T1,i=this.D1();i<=s&&this.G1?(this.T1=t,this.E1()):this.S1=self.setTimeout(this.b1,Math.max(i-s,4))}}E1(){this.C1=!0;const t=this.I1;this.I1=null,t?this.Kf(...t):this.Kf(),this.C1=!1}i0(){this.C1||(this.A1(),this.I1=null,this.T1=ps.Zf())}v1(){this.S1=-1,this.T1=ps.Zf(),this.E1()}A1(){-1!==this.S1&&(self.clearTimeout(this.S1),this.S1=-1)}er(){this.A1(),this.Kf=null,this.I1=null,this.b1=null}}}{const ms=self.Rs;ms.L1=class{constructor(){this.O1=new Map,this.R1=!1,this.P1=null,this.F1=null,this.j1=null,this.z1=null}B1(t){this.R1=!!t}U1(){return this.R1}W1(t){this.P1=t}Q1(t){if(this.P1)return this.P1(t);throw new Error("no get base size callback set")}J1(t){this.F1=t}V1(t,s,i,e,h,r){if(this.F1)return this.F1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}Y1(t){this.j1=t}H1(t){if(!this.j1)throw new Error("no release result callback set");this.j1(t)}q1(t){this.z1=t}Z1(){if(!this.z1)throw new Error("no redraw callback set");this.z1()}X1(t){let s=this.O1.get(t);return s||(s=ms.ir(ms.K1,this,t),this.O1.set(t,s)),s.td(),s}sd(t){this.O1.delete(t.ed())}hd(){for(const t of this.O1.values())t.rd(),t.nd()}}}{const gs=self.Rs;gs.K1=class{constructor(t,s){this.od=t,this.ad=s,this.ud=0,this.ld=0,this.fd=0,this.dd=this.od.Q1(s).then(t=>{this.od&&(this.ld=t[0],this.fd=t[1],this.od.Z1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.md=!0,this.od&&this.od.Z1()}),this.gd=0,this.yd=0,this.Md=0,this.wd=0,this.Sd=!1,this.Td=null,this.bd=!1,this.md=!1}er(){if(this.ud<=0)throw new Error("already released");this.ud--,0===this.ud&&this.xd()}rd(){this.Td&&(this.od.H1(this.Td),this.Td=null)}xd(){this.rd(),this.od.sd(this),this.od=null}ed(){return this.ad}td(){this.ud++}vd(){return 0<this.ud}Cd(){return this.Td}nd(){this.bd=!0}async Gd(e,h,r){if(0!==h&&0!==r&&!this.md&&!this.Sd){let t=gs.Lr(Math.ceil(h)),s=gs.Lr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.od.U1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.gd&&s<=this.yd)||this.bd){this.Sd=!0,this.gd=t,this.yd=s;const u=await this.od.V1(this.ad,e,this.gd,this.yd,h,r);this.od&&(this.rd(),this.Td=u,this.Md=h,this.wd=r,this.Sd=!1,this.bd=!1,this.od.Z1())}}}Id(){return this.dd}_d(){return this.ld}Dd(){return this.fd}Nd(){return this.Md}Ed(){return this.wd}Ad(){return this.md}}}{let s=function(t){return Ss.get(t)};s;const c=self.Rs,ys=(c.Ld="\ufeff",new Set("0123456789")),Ms=(c.Od=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.Rd=function(t){return Ms.has(t)},c.Pd=function(t){return[...t].filter(t=>!c.Rd(t)).join("")},c.kd=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.Fd=function(t){for(const s of t)if(!c.Rd(s))return!1;return!0},c.jd=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.zd=function(t){return[...t].filter(t=>!c.jd(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.Bd=function(t){return!c.Rd(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),Ss=(c.Ud=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.Wd=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.Od(t))break;--i}return s.substr(0,i)},c.Qd=function(t){let s=c.Wd(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ts=/[&<>"']/g,bs=(c.Jd=function(t){return t.replace(Ts,s)},c.Vd=function(t){let s=c.Yd(t,"\\","\\\\");return s=c.Yd(s,'"','\\"'),s=c.Yd(s,"\t","\\t"),s=c.Yd(s,"\r",""),c.Yd(s,"\n","\\n")},c.Hd=function(t){let s=c.Yd(t,"&","&amp;");return s=c.Yd(s,"<","&lt;"),s=c.Yd(s,">","&gt;"),c.Yd(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ne=function(t){return t.replace(bs,"\\$&")},c.qd=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Zd=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.Yd=function(t,s,i){return t.replaceAll(s,()=>i)},c.Xd=function(t,s,i){return t.replace(new RegExp(c.ne(s),"gi"),()=>i)},c.Kd=function(t,s){"string"==typeof s?t.textContent=s:s.$d()?t.textContent=s.toString():(t.innerHTML=s.tp(),s instanceof c._h&&s.sp(t))},c.ep=function(t,s){return t instanceof c.HtmlString||t instanceof c._h?t.equals(s):s instanceof c.HtmlString||s instanceof c._h?s.equals(t):t===s},c.hp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.rp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.np=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.op=function(t,s){return s<t?1:t<s?-1:0},c.up=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),vs=(c.lp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.cp=function*(t){for(const s of xs.segment(t))yield s.segment},c.fp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Cs=1024*vs,Gs={pp:!(c.mp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<vs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Cs){let t=s/vs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Cs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),gp:!0,yp:!0,Mp:!0,wp:!0};c.Sp=function(t,s){s=Object.assign({},Gs,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.gp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.yp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Mp){const a=Math.floor(t/60);(0<a||i.length||!s.wp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.wp){const u=Math.floor(t%60);i.push(h(".seconds",null,u))}const r=(s.pp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Tp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.bp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.xp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Pn(i,4,"0"),c.Pn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.vp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Cp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Gp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${l++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===u.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=u.length)throw new Error("invalid bbcode tip substitution");let t=u[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Yd(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Rs),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,u=null,l=0,e=/\n/g;f._h=class{constructor(t,s){if(this.Ip=s&&s._p?t:f.Jd(t),this.Dp="",this.Np=!1,this.Ep=[],this.Ap=[],s){if(this.Np=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Ep=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.Ap=s.tips}}this.Lp=this.Ip.includes("["),this.Op=this.Np&&this.Ip.includes("\n"),this.Rp=!this.Lp&&!this.Op&&!this.Ip.includes("&"),this.Pp=!1,this.kp=[]}toString(){return this.Ip}valueOf(){return this.Ip}$d(){return this.Rp}Fp(){return this.Lp?this.Ip.replace(i,""):this.Ip}tp(){if(this.Rp)return this.Ip;if(!this.Dp&&this.Ip){let t=this.Ip;this.Lp&&(l=0,a=this.Ep,u=this.Ap,t=t.replace(i,s),a=null,u=null),this.Op&&(t=t.replace(e,"<br>")),this.Dp=t}return this.Dp}sp(i){if(this.Ep.length)for(let t=0,s=this.Ep.length;t<s;++t){const e=this.Ep[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.tp()===t.tp():t instanceof f._h?this.Ip===t.Ip:this.Ip===t}jp(){if(!this.Pp){let e=[],t=this.Ip,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],u=t.substring(s,r);if(s=r+n.length,u&&e.push({text:u,zp:h.slice(0)}),a)if(o){const l=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===l){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,zp:h.slice(0)})}else h.push({tag:t,Bp:s})}}}s<t.length&&e.push({text:t.substring(s),zp:h.slice(0)});for(const c of e)c.text&&(c.text=this.Up(c.text));this.kp=e.map(t=>t.icon?f.ir(f.Wp,{icon:t.icon,zp:t.zp}):f.ir(f.Qp,{Jp:f.lp(t.text),zp:t.zp})),this.Pp=!0}return this.kp}Up(t){return t=f.Yd(t,"\\[","["),f.Yd(t,"\\\\","\\")}static Vp(t){return f.ir(f._h,t,{_p:!0}).Fp()}static Yp(t){return t.replace(p,"")}}}{let u=function(t){return" "!==t&&" "!==t&&M.Rd(t)},a=function(t){return Is.has(t)},l=function(t){return M.Bd(t)&&!a(t)},c=function(t){for(;0<t.length&&u(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};u,a,l,c,y;const M=self.Rs,Is=new Set("〈《「『【〔〖〘〚〝");M.Hp=class{constructor(){this.qp=[],this.Zp=null}Xp(){return this.qp}Kp(){return this.qp.length}$p(t){this.Zp=t}tm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.im()){const a=s(o);o.hm(a.height),o.rm(a.fontBoundingBoxAscent||0),o.nm(a.fontBoundingBoxDescent||0),o.om(a.am||0),o.um()?o.lm(a.width):o.fm()&&o.dm(this.Zp)}i+=o.im(),e=Math.max(e,o.pm()),h=Math.max(h,o.gm()),r=Math.max(r,o.ym()),n=Math.max(n,o.Mm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,am:n}}wm(t,s,i,e,h,r){this.qp.push(M.ir(M.Hp.Sm,{Tm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,am:r}))}Hp(s,r,n,i,o){if("string"==typeof s&&(s=[M.ir(M.Qp,{Jp:M.lp(s)})]),M.Ln(this.qp),!(!s.length||1===s.length&&s[0].um()&&s[0].ql()||n<2)){if(1===s.length){const a=s[0];if(a.um()&&a.xm()<=100&&!a.vm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,am:h}=r(a);if(t+=o,a.lm(t),a.hm(s),a.rm(i||0),a.nm(e||0),a.om(h||0),t<=n)return void this.wm([a],t,s,i,e,h)}}let t;t="word"===i?this.Cm(s):"cjk"===i?this.Gm(s):this.Im(s),this._m(t,r,n,o)}}Cm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Dm();if(h.fm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Nm())if(y(n))0<i.length&&s.push(i),s.push([M.ir(M.Qp,{Jp:["\n"],zp:r})]),i=[];else if(0===i.length)i.push(M.ir(M.Qp,{Jp:[n],zp:r})),e=u(n);else{const o=u(n);if(o===e){const a=i.at(-1);a.Dm()===r?a.Em(n):i.push(M.ir(M.Qp,{Jp:[n],zp:r}))}else s.push(i),i=[M.ir(M.Qp,{Jp:[n],zp:r})],e=o}}return 0<i.length&&s.push(i),s}Gm(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Dm();if(h.fm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.Nm())if(y(n))0<i.length&&s.push(i),s.push([M.ir(M.Qp,{Jp:["\n"],zp:r})]),i=[];else{if(0===i.length)i.push(M.ir(M.Qp,{Jp:[n],zp:r}));else if(e||l(n)){const o=i.at(-1);o.Dm()===r?o.Em(n):i.push(M.ir(M.Qp,{Jp:[n],zp:r}))}else s.push(i),i=[M.ir(M.Qp,{Jp:[n],zp:r})];e=a(n)}}return 0<i.length&&s.push(i),s}Im(t){const s=[];for(const i of t)if(i.um()){const e=i.Nm();M.Qh(s,e.map(t=>[M.ir(M.Qp,{Jp:[t],zp:i.Dm()})]))}else s.push([i]);return s}Am(t){return t.map(t=>t.Lm())}Om(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.um()&&i[0].um()&&i[0].Dm()===t.Dm()&&(t.Rm(i[0].Nm()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.Lm())}}_m(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,u=0;for(const l of t)if(1===l.length&&l[0].um()&&1===l[0].xm()&&y(l[0].Nm()[0])){if(0===n){const c=M.ir(M.Qp,{Jp:[" "],zp:l[0].Dm()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,u=f.am||0}this.wm(h,r,n,o,a,u),h=[],r=0,n=0,o=0,a=0,u=0}else{const d=this.Am(h),p=(this.Om(d,l),this.tm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.wm(h,r,n,o,a,u),h=[],l[0].um()&&M.Fd(l[0].Nm()))r=0,n=0,o=0,a=0,u=0;else{this.Om(h,l);const g=this.tm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,u=g.am}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,u=p.am}0<h.length&&this.wm(h,r,n,o,a,u),this.Pm(s,e)}Pm(s,i){for(const e of this.qp){const h=e.km();if(h.length){let t=h.at(-1);if(t.um()){const r=t.Nm(),n=r.slice(0);if(c(n),0===n.length)e.Fm(-t.im()),h.pop();else if(n.length<r.length){t.jm(n);const o=s(t).width,a=t.im()-o;t.lm(o),e.Fm(-a)}0!==i&&0<h.length&&((t=h.at(-1)).Fm(i),e.Fm(i))}}}}Hl(){M.Ln(this.qp)}zm(){return this.qp.reduce((t,s)=>Math.max(t,s.im()),0)}Bm(){return this.qp.reduce((t,s)=>t+s.pm(),0)}}}{const _s=self.Rs;_s.Hp.Sm=class{constructor(t){this.kp=t.Tm||[],this.Um=t.width||-1,this.Wm=t.height||-1,this.Qm=t.fontBoundingBoxAscent||-1,this.Jm=t.fontBoundingBoxDescent||-1,this.Vm=t.am||-1,this.Ym=0,this.Hm=0}Tm(){return this.kp.values()}*qm(){const s=this.kp;for(let t=s.length-1;0<=t;--t)yield s[t]}km(){return this.kp}Fm(t){this.Um+=t}im(){return this.Um}pm(){return this.Wm}Zm(){return this.Qm}ym(){return this.Jm}Mm(){return this.Vm}Xm(t){this.Ym=t}Km(){return this.Ym}$m(t){this.Hm=t}tg(){return this.Hm}}}{const Ds=self.Rs;Ds.sg=class{constructor(t){this.ig=t.zp||[],this.Um=t.width||-1,this.Wm=t.height||-1,this.Qm=t.fontBoundingBoxAscent||-1,this.Jm=t.fontBoundingBoxDescent||-1,this.Vm=t.am||-1,this.Ym=0,this.Hm=0}um(){return!1}fm(){return!1}Dm(){return this.ig}eg(s){const i=this.ig;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}hg(t){return!!this.eg(t)}rg(){const t=new Map;for(const s of this.ig)t.set(s.tag,s.Bp);return t}Fm(t){this.Um+=t}lm(t){this.Um=t}im(){return this.Um}hm(t){this.Wm=t}pm(){return this.Wm}rm(t){this.Qm=t}gm(){return this.Qm}nm(t){this.Jm=t}ym(){return this.Jm}om(t){this.Vm=t}Mm(){return this.Vm}Xm(t){this.Ym=t}Km(){return this.Ym}$m(t){this.Hm=t}tg(){return this.Hm}}}{const Ns=self.Rs;Ns.Qp=class extends Ns.sg{constructor(t){super(t),this.ng=t.Jp}um(){return!0}Rm(t){Ns.Qh(this.ng,t),this.Um=-1,this.Wm=-1,this.Qm=-1,this.Jm=-1,this.Vm=-1}Em(t){this.ng.push(t)}Lm(){return Ns.ir(Ns.Qp,{Jp:this.ng.slice(0),zp:this.ig,width:this.Um,height:this.Wm,fontBoundingBoxAscent:this.Qm,fontBoundingBoxDescent:this.Jm,am:this.Vm})}Nm(){return this.ng}jm(t){this.ng=t}xm(){return this.ng.length}ql(){return 0===this.ng.length}vm(){return this.ng.includes("\n")}}}{const Es=self.Rs;Es.Wp=class extends Es.sg{constructor(t){super(t),this.og=t.icon}fm(){return!0}ag(){return this.og}Lm(){return Es.ir(Es.Wp,{icon:this.og,zp:this.ig,width:this.Um,height:this.Wm,fontBoundingBoxAscent:this.Qm,fontBoundingBoxDescent:this.Jm,am:this.Vm})}ug(t){if(!t)return null;let s=Number(this.og);return String(s)===this.og?(s=Math.floor(s),t.lg(s)):t.fg(this.og)}dm(t){const s=this.ug(t);this.Um=s?this.Wm*s.im()/s.pm():0}dg(t){const s=this.ug(t);return s?s.dg():null}xm(){return 1}}}{const As=self.Rs;As.pg=class{constructor(t){this.mg=new Map,this.gg=t.yg,this.Mg=t.wg}er(){for(const t of this.mg.values())t.er();this.mg.clear()}Sg(t){let s=this.mg.get(t);if(!s){const i=this.gg(t);s=As.ir(As.Tg,this,{source:t,bg:i}),this.mg.set(t,s)}return s}xg(t){return this.mg.has(t)}vg(t){const s=this.mg.get(t);s&&s.er(),this.mg.delete(t)}async Cg(t){return this.Mg(t)}}}{const Ls=self.Rs;Ls.Tg=class{constructor(t,s){this.Gg=t,this.Ig=s.source,this._g=[],this.Dg=new Map,this.Ng=!1,this.Eg=!1,this.Ag=null;const i=s.bg.Lg;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Ls.ir(Ls.Og,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this._g.push(h),e.tag&&this.Dg.set(e.tag.toLowerCase(),h)}}er(){for(const t of this._g)t.er();Ls.Ln(this._g),this.Dg.clear(),this.Gg=null,this.Ig=null}Rg(){return this.Ng}Pg(){return this.Eg}kg(){return this.Ag||(this.Ag=this.Fg()),this.Ag}async Fg(){if(!this.Ng){this.Ng=!0,this.Eg=!0;const t=await this.Gg.Cg(this.Ig);if(this.Gg){const i=t.Lg;for(let t=0,s=Math.min(i.length,this._g.length);t<s;++t){const e=i[t].jg;this._g[t].zg(e)}this.Eg=!1}}}lg(t){return(t=Math.floor(t))<0||t>=this._g.length?null:this._g[t]}fg(t){return this.Dg.get(t.toLowerCase())||null}}}{const Os=self.Rs;Os.Og=class{constructor(t,s){this.Bg=t,this.Ig=s.source||null,this.Ug=s.index,this.Wg=s.tag,this.Um=s.width,this.Wm=s.height,this.Qg=null}er(){this.Um=0,this.Wm=0,this.Bg=null}Jg(){return this.Ig}im(){return this.Um}pm(){return this.Wm}zg(t){this.Qg=t}dg(){return this.Qg}}}{let e=function(t,s,i,e){const h=js;vh.j(ks,i,s),vh.j(Fs,t,s),vh.Lt(h,ks,Fs),vh.normalize(h,h),e.set(h[0],h[1],h[2],vh.At(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,u=n.z,l=n.w,c=n.Vg,f=n.Yg,d=n.Hg,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+u*i*d+u*r*g;if(l<=y)return!0;const M=o*e*c+o*t*p+a*h*f+a*s*m+u*r*d+u*i*g;return l<M},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Rs=self.Rs,Ps=self.Ms,vh=Ps.Gs,Uh=Ps.Is,xh=Ps.bs,ks=vh.create(),Fs=vh.create(),js=vh.create(),zs=Uh.create(),Bs=xh.create(),Us=vh.create(),Ws=vh.create(),Qs=vh.create(),Js=vh.create(),Vs=vh.create(),Ys=vh.create(),Hs=vh.create(),qs=vh.create(),Zs=Uh.I(0,0,1,1);Rs.qg={Zg(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],u=e[2]*t+e[6]*s+e[10]*i+e[14],l=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*u+h[12]*l,f=h[1]*o+h[5]*a+h[9]*u+h[13]*l,d=h[2]*o+h[6]*a+h[10]*u+h[14]*l,p=h[3]*o+h[7]*a+h[11]*u+h[15]*l;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Xg(t,s,i,e,h,r,n){const o=Bs,a=zs;return xh.multiply(o,h,e),null!==xh.D(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Uh.Ft(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Kg(t,s,i,e,h,r,n){const o=ks,a=Fs;if(!Rs.qg.Xg(t,s,0,e,h,r,o))return!1;if(!Rs.qg.Xg(t,s,1,e,h,r,a))return!1;let u=Fs,l=(vh.j(u,a,o),js),c=(vh.set(l,0,0,1),-i),f=vh.At(l,u),d=0;if(0===f){const p=vh.At(l,o)+c;if(0!==p)return!1}else if((d=-(vh.At(o,l)+c)/f)<0)return!1;return vh.It(n,o,u,d),!0}};class Xs{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Vg=NaN,this.Yg=NaN,this.Hg=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Vg=0<t?1:0,this.Yg=0<s?1:0,this.Hg=0<i?1:0}}Rs.qg.$g=class{constructor(){this.ty=new Xs,this.iy=new Xs,this.ey=new Xs,this.hy=new Xs,this.ny=new Xs,this.oy=new Xs}uy(t,s){const i=Zs;Rs.qg.Xg(0,1,0,t,s,i,Us),Rs.qg.Xg(1,1,0,t,s,i,Ws),Rs.qg.Xg(0,0,0,t,s,i,Qs),Rs.qg.Xg(1,0,0,t,s,i,Js),Rs.qg.Xg(0,1,1,t,s,i,Vs),Rs.qg.Xg(1,1,1,t,s,i,Ys),Rs.qg.Xg(0,0,1,t,s,i,Hs),Rs.qg.Xg(1,0,1,t,s,i,qs),e(Qs,Us,Vs,this.ty),e(Us,Ws,Ys,this.iy),e(Ws,Js,qs,this.ey),e(Js,Qs,Hs,this.hy),e(Hs,Vs,Ys,this.oy),e(Js,Ws,Us,this.ny)}ly(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.ty)&&n(t,s,i,e,h,r,this.iy)&&n(t,s,i,e,h,r,this.ey)&&n(t,s,i,e,h,r,this.hy)&&n(t,s,i,e,h,r,this.ny)&&n(t,s,i,e,h,r,this.oy)}my(t,s,i){return!h(t,s,i,this.ny)}}}{const Ks=self.Rs,$s=self.Ms,vh=$s.Gs,Uh=$s.Is,xh=$s.bs,ti=xh.create(),si=vh.I(0,0,0),ii=vh.I(0,0,0),ei=vh.I(0,0,0),hi=vh.I(0,1,0),ri=(Uh.I(0,0,0,0),new Ks.Yu),ni=new Ks.Rect,oi=new Ks.Yu(0,0,1,0,1,1,0,1),ai={gy:1,yy:1e4},ui=xh.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Ks.qg.My=class{constructor(t){t=Object.assign({},ai,t),this.Um=0,this.Wm=0,this.wy=Ks.dr(45),this.Sy=Math.tan(this.wy/2),this.Ty=xh.create(),this.by=xh.create(),this.xy=!1,this.vy=t.gy,this.Cy=t.yy,this.Gy=[],this.Iy=new Map,this._y=null,this.Dy=null,this.Ny=null,this.Ey=null,this.Ay=null,this.Ly=null,this.Oy=null,this.Ry=null,this.Py=null,this.ky=null,this.Fy=null,this.jy=null,this.zy=new Map,this.By=null,this.Uy=[],this.Wy=new Map,this.Qy=0,this.Jy=0,this.Vy=1,this.Yy=[this.Vy],this.Hy=1,this.qy=[this.Hy],this.Zy=.5,this.Xy=[this.Zy],this.Ky=0,this.$y=!0,this.tM=!1}sM(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}iM(){this.Qy=0,this.Jy=0,this._y=null,this.Dy=null,this.Ny=null,this.Ey=null,this.Ay=null,this.Ly=null,this.Oy=null,this.Ry=null,this.Py=null,this.ky=null,this.Fy=null,this.jy=null,this.eM()}hM(){this.iM(),this.By=null}rM(){for(const t of this.Gy)t.er();this.iM()}im(){return this.Um}pm(){return this.Wm}nM(t){return this.oM()?100:t/(2*this.aM())}uM(t){if(this.oM()){const s=t/(2*this.aM());return s/this.nM(t)}return 1}lM(t){this.vy=t}cM(){return this.vy}fM(t){this.Cy=t}dM(){return this.Cy}pM(t){this.wy=t,this.Sy=Math.tan(this.wy/2)}mM(){return this.wy}aM(){return this.Sy}gM(){this.xy=!1}yM(){this.xy=!0}oM(){return!this.xy}MM(){return this.xy}wM(t,s,i=.5,e=.5){const h=this.cM(),r=this.dM(),n=this.mM();if(.5===i&&.5===e)this.SM()?xh.St(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,u=2*e-2,l=2*e,c=this.aM()*h,f=c*s;xh.yt(t,o*f,a*f,u*c,l*c,h,r),this.SM()&&xh.mul(t,ui,t)}}TM(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.nM(i)*h*this.aM()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,u=n,l=-o,c=o;this.SM()?xh.xt(t,a,u,l,c,this.cM(),this.dM()):xh.ortho(t,a,u,l,c,this.cM(),this.dM())}bM(t,s,i,e,h,r=1){let n=1;this.oM()&&(n=200*this.aM()/h);const o=ei,a=(vh.set(o,n,-n,1),si),u=ii;vh.multiply(a,s,o),vh.multiply(u,i,o),xh.vt(t,a,u,e||hi),o[2]=r,xh.scale(t,t,o)}xM(t,s,i,e,h,r,n,o){return vh.set(si,t,s,i),vh.set(ii,e,h,r),this.bM(ti,si,ii,hi,n,o),ti}vM(t){this.Gy.push(t),this.Iy.set(t.Jc(),t)}CM(t){const s=this.Gy.indexOf(t);-1!==s&&this.Gy.splice(s,1),this.Iy.delete(t.Jc())}eM(){Ks.Ln(this.Gy),this.Iy.clear()}GM(t){return this.Iy.get(t)||null}IM(){return this._y}_M(){this.DM(this._y)}NM(){return this.Dy}EM(){this.DM(this.Dy)}AM(){this.DM(this.Ny)}LM(){this.DM(this.Ey)}OM(){this.DM(this.Ay)}RM(){this.DM(this.Ly)}PM(){this.DM(this.Oy)}kM(){this.DM(this.Ry)}FM(){this.DM(this.Py)}jM(){this.DM(this.ky)}zM(){this.DM(this.Fy)}BM(){this.DM(this.jy)}UM(t){this.By=t}WM(){return this.By}QM(t,s,i,e){let h=Ks.qg.VM.JM(t,s,i,e),r=this.zy.get(h);return r||(r=Ks.ir(Ks.qg.VM,this,t,s,i,e),this.zy.set(h,r)),r.YM(),r}HM(t){t.qM(),0===t.ZM()&&(this.By===t&&(this.By=null),this.zy.delete(t.XM()),t.er())}KM(t){Ks.Ln(this.Uy),this.Wy.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.Uy.push([h,r]),this.Wy.set(e,{number:s,$M:h,iw:r}),s++}}ew(t){return this.Uy[t]}hw(t){return this.ew(t)[0]}rw(t){return this.ew(t)[1]}ow(t){const s=this.Wy.get(t);if(void 0===s)throw new Error("invalid blend name");return s}aw(t){const s=this.Wy.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}uw(t){this.Qy=t}lw(){return this.Qy}cw(t){this.Jy=t,this.By=null}fw(){return this.Jy}Sm(t,s,i,e){const h=Ks.yr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.Vy,a=r*o,u=n*o,l=this.Hy;2===l?this.pw(t,s,0,i,e,0,a,u):1===l?this.mw(t,s,0,i,e,0,a,u):this.gw(t,s,0,i,e,0,a,u)}yw(t,s,i,e,h,r){const n=Ks.yr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),u=.5*this.Vy,l=o*u,c=a*u,f=this.Hy;2===f?this.pw(t,s,i,e,h,r,l,c):1===f?this.mw(t,s,i,e,h,r,l,c):this.gw(t,s,i,e,h,r,l,c)}pw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=u+n,g=l-o,y=u-n+d,M=l+o+p,w=c+n,S=f-o,T=c-n-d,b=f+o-p;this.Mw(m,g,i,w,S,r,T,b,r,y,M,i,oi)}mw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a-o,l=s+a-n,c=e+a+o,f=h+a+n,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Mw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}gw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a,l=s+a,c=e+a,f=h+a,d=u+n,p=l-o,m=u-n,g=l+o,y=c+n,M=f-o,w=c-n,S=f+o;this.Mw(d,p,i,y,M,r,w,S,r,m,g,i,oi)}ww(t,s,i,e,h,r){const n=Ks.yr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),u=.5*this.Vy,l=o*u,c=a*u,f=this.Hy;2===f?this.Sw(t,s,i,e,l,c,h,r):1===f?this.Tw(t,s,i,e,l,c,h,r):this.bw(t,s,i,e,l,c,h,r)}Sw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=u+h,g=l-r,y=u-h+d,M=l+r+p,w=c+h,S=f-r,T=c-h-d,b=f+r-p;ri.set(m,g,w,S,T,b,y,M),ni.set(n,0,o,0),this.xw(ri,ni)}Tw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a-r,l=s+a-h,c=i+a+r,f=e+a+h,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.xw(ri,ni)}bw(t,s,i,e,h,r,n,o){const a=this.Zy,u=t+a,l=s+a,c=i+a,f=e+a,d=u+h,p=l-r,m=u-h,g=l+r,y=c+h,M=f-r,w=c-h,S=f+r;ri.set(d,p,y,M,w,S,m,g),ni.set(n,0,o,0),this.xw(ri,ni)}Cw(t,s,i,e){const h=.5*this.Vy,r=this.Hy;2===r?this.Gw(t,s,i,e,h):1===r?this.Iw(t,s,i,e,h):this._w(t,s,i,e,h)}Gw(t,s,i,e,h){this.pw(t,s,0,i,s,0,0,h),this.pw(i,s,0,i,e,0,h,0),this.pw(i,e,0,t,e,0,0,-h),this.pw(t,e,0,t,s,0,-h,0)}Iw(t,s,i,e,h){this.mw(t,s,0,i,s,0,0,h),this.mw(i,s,0,i,e,0,h,0),this.mw(i,e,0,t,e,0,0,-h),this.mw(t,e,0,t,s,0,-h,0)}_w(t,s,i,e,h){this.gw(t,s,0,i,s,0,0,h),this.gw(i,s,0,i,e,0,h,0),this.gw(i,e,0,t,e,0,0,-h),this.gw(t,e,0,t,s,0,-h,0)}Dw(t){this.Cw(t.yu(),t.Mu(),t.wu(),t.Su())}Nw(t){const s=Ks.yr(t.Zr(),t.Xr(),t.Kr(),t.$r()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Vy,r=i*h,n=e*h,o=this.Hy;2===o?this.Ew(t,r,n):1===o?this.Aw(t,r,n):this.Lw(t,r,n)}Ew(t,s,i){this.pw(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,s,i),this.pw(t.Kr(),t.$r(),0,t.tn(),t.sn(),0,i,-s),this.pw(t.tn(),t.sn(),0,t.hn(),t.rn(),0,-s,-i),this.pw(t.hn(),t.rn(),0,t.Zr(),t.Xr(),0,-i,s)}Aw(t,s,i){this.mw(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,s,i),this.mw(t.Kr(),t.$r(),0,t.tn(),t.sn(),0,i,-s),this.mw(t.tn(),t.sn(),0,t.hn(),t.rn(),0,-s,-i),this.mw(t.hn(),t.rn(),0,t.Zr(),t.Xr(),0,-i,s)}Lw(t,s,i){this.gw(t.Zr(),t.Xr(),0,t.Kr(),t.$r(),0,s,i),this.gw(t.Kr(),t.$r(),0,t.tn(),t.sn(),0,i,-s),this.gw(t.tn(),t.sn(),0,t.hn(),t.rn(),0,-s,-i),this.gw(t.hn(),t.rn(),0,t.Zr(),t.Xr(),0,-i,s)}Ow(t){this.Vy=t,this.Yy[this.Yy.length-1]=t}Rw(){return this.Vy}Pw(t){if(100<=this.Yy.length)throw new Error("pushed too many line widths - check push/pop pairs");this.Yy.push(t),this.Vy=t}kw(){if(this.Yy.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.Yy.pop(),this.Vy=this.Yy.at(-1)}Fw(){this.Hy=0,this.qy[this.qy.length-1]=0}jw(){this.Hy=1,this.qy[this.qy.length-1]=0}zw(){this.Hy=2,this.qy[this.qy.length-1]=0}Bw(t){if("butt"===t)this.Uw();else if("square"===t)this.Ww();else{if("zag"!==t)throw new Error("invalid line cap");this.Qw()}}Uw(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(0),this.Hy=0}Ww(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(1),this.Hy=1}Qw(){if(100<=this.qy.length)throw new Error("pushed too many line caps - check push/pop pairs");this.qy.push(2),this.Hy=2}Jw(){if(this.qy.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.qy.pop(),this.Hy=this.qy.at(-1)}Vw(t){this.Zy=t,this.Xy[this.Xy.length-1]=t}Yw(){return this.Zy}Hw(t){if(100<=this.Xy.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Xy.push(t),this.Zy=t}qw(){if(this.Xy.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Xy.pop(),this.Zy=this.Xy.at(-1)}Zw(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],u=s[4+n],l=s[5+n];if(t===e)this.Xw(h,r,o,a,u,l,u,l);else{const c=s[6+n],f=s[7+n];this.Xw(h,r,o,a,u,l,c,f)}}}Kw(){return 3}$w(){this.tS(!0),this.Ky++}sS(){return this.Ky}iS(){this.Ky++}eS(t){this.$y=!!t}hS(){return this.$y}rS(t){this.tM=!!t}nS(){return this.tM}oS(){return!1}SM(){return!1}aS(){}uS(){}lS(){}cS(){return this.aS()+this.uS()+this.lS()}fS(){return Ks.ir(Ks.qg.dS,this)}}}{const li=self.Rs;li.qg.pS=class{constructor(t,s){this.nr=s.name,this.mS=t,this.gS=s.extendBoxHorizontal||0,this.yS=s.extendBoxVertical||0,this.MS=!!s.crossSampling,this.wS=!!s.mustPreDraw,this.SS=!!s.preservesOpaqueness,this.TS=!!s.supports3dDirectRendering,this.bS=!!s.animated,this.xS=!!s.blendsBackground,this.vS=!!s.usesDepth,this.CS=!1,this.GS=this.MS||this.xS||0!==this.gS||0!==this.yS}er(){this.mS=null}IS(){return this.mS}Jc(){return this.nr}_S(){return 0!==this.gS||0!==this.yS}DS(){return this.gS}NS(){return this.yS}ES(){return this.MS}AS(){return this.wS}LS(){return this.SS}OS(){return this.TS}RS(){return this.bS}PS(){return this.xS}kS(){return this.vS}FS(){return this.CS}jS(){return this.GS}zS(){return!1}}}{const ci=self.Rs;ci.qg.VM=class{constructor(t,s,i,e,h){this.mS=t,this.ud=0,this.BS=null,this.US="",this.WS=i,this.QS=ci.ir(ci.ko),this.QS.set(e),this.JS=h,"string"==typeof s?this.US=s:(this.BS=s,this.US=this.BS.Jc())}er(){if(0<this.ud)throw new Error("releasing state group still in use");this.mS=null,this.BS=null,this.US=""}VS(){const t=this.mS;t.DM(this.BS),t.YS(this.WS),t.HS(this.QS),t.cw(this.JS),t.UM(this)}XM(){return ci.qg.VM.JM(this.US,this.WS,this.QS,this.JS)}YM(){++this.ud}qM(){--this.ud}ZM(){return this.ud}qS(){this.BS=null}ZS(t){if(this.BS=t.GM(this.US),!this.BS)throw new Error("failed to restore shader program")}static JM(t,s,i,e){const h="string"==typeof t?t:t.Jc();return h+","+s+","+i.Xo()+","+i.Ko()+","+i.$o()+","+i.ta()+","+e}}}{let e=function(t,s,i){const e=i.Zr(),h=i.Xr(),r=i.Kr()-e,n=i.$r()-h,o=i.hn()-e,a=i.rn()-h,u=r*t,l=n*t,c=o*s,f=a*s;return[e+u+c,h+l+f]};e;const G=self.Rs,fi=G.ir(G.Yu);G.qg.XS=class{constructor(t,s,i){this.KS=t,this.$S=s,this.tT=i,this.Ha=NaN,this.qa=NaN,this.JS=NaN,this.sT=NaN,this.iT=NaN,this.Ha=0,this.qa=0,this.JS=0,this.sT=0,this.iT=0}eT(t,s,i,e){this.Ha=t,this.qa=s,this.sT=i,this.iT=e}hT(){return this.Ha}rT(t){this.Ha!==t&&(this.Ha=t,this.KS.nT())}oT(){return this.qa}aT(t){this.qa!==t&&(this.qa=t,this.KS.nT())}uT(){return this.JS}lT(t){this.JS!==t&&(this.JS=Math.max(t,0),this.KS.nT())}cT(){return this.sT}fT(t){this.sT=t}dT(){return this.iT}pT(t){this.iT=t}mT(t,s,i){[this.Ha,this.qa]=e(t.Ha,t.qa,s),this.JS=t.JS,this.sT=G.Ot(i.yu(),i.wu(),t.sT),this.iT=G.Ot(i.Mu(),i.Su(),t.iT)}gT(t,s,i){[this.Ha,this.qa]=e(t.Ha,t.qa,s),this.JS=t.JS,[this.sT,this.iT]=e(t.sT,t.iT,i)}yT(){return{x:this.hT(),y:this.oT(),z:this.uT(),u:this.cT(),v:this.dT()}}MT(t){this.rT(t.x),this.aT(t.y),t.hasOwnProperty("z")&&this.lT(t.z),this.fT(t.u),this.pT(t.v)}wT(){return this.KS}ST(){return this.$S}TT(){return this.tT}},G.qg.bT=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.xT=i,this.vT=t,this.CT=s||null,this.GT=[],this.IT=0,this._T=0,this.DT=1,this.NT=1,this.ET=0,this.AT=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=G.ir(G.qg.XS,this,t,s),o=t/e,a=s/h;n.eT(o,a,o,a),r.push(n)}this.GT.push(r)}}er(){G.Ln(this.GT)}LT(){return this.xT}OT(){return this.vT}RT(){return this.CT}PT(){return this.GT}nT(){this.AT=!0}kT(){if(this.AT){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.GT)for(const n of r){const o=n.hT(),a=n.oT();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.uT())}this.IT=t,this._T=s,this.DT=i,this.NT=e,this.ET=h,this.AT=!1}}FT(){return this.kT(),this.IT}jT(){return this.kT(),this._T}zT(){return this.kT(),this.DT}BT(){return this.kT(),this.NT}UT(){return this.kT(),this.ET}WT(){return 0<this.UT()}QT(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.xT||s<0||s>=this.vT?null:this.GT[s][t]}JT(t,i,e){const h=e instanceof G.Rect;if(t.LT()!==this.LT()||t.OT()!==this.OT())throw new Error("source mesh wrong size");const r=t.GT,n=this.GT;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const u=o[t],l=a[t];h?l.mT(u,i,e):l.gT(u,i,e)}}}VT(r){let n=this.GT,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],u=i[t];fi.set(e.cT(),e.dT(),a.cT(),a.dT(),u.cT(),u.dT(),h.cT(),h.dT()),r.Mw(e.hT(),e.oT(),e.uT(),a.hT(),a.oT(),a.uT(),u.hT(),u.oT(),u.uT(),h.hT(),h.oT(),h.uT(),fi),e=a,h=u}o=i}}YT(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.GT,u=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=u[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const l=u[t],c=i[t],[f,d,p]=a(e.hT(),e.oT(),e.uT()),[m,g,y]=a(l.hT(),l.oT(),l.uT()),[M,w,S]=a(c.hT(),c.oT(),c.uT()),[T,b,x]=a(h.hT(),h.oT(),h.uT());o.yw(f,d,p,m,g,y),o.yw(f,d,p,M,w,S),o.yw(f,d,p,T,b,x),t===s-1&&o.yw(m,g,y,M,w,S),r===n-1&&o.yw(T,b,x,M,w,S),e=l,h=c}u=i}}HT(t){let i=.99999999,e=t.Al(),h=[],r=this.LT()-1,n=this.OT()-1,o=1/r,a=1/n,u=r-1,l=n-1,c=e[0],f=e[1],d=G.lr(Math.floor(c*r),0,u),p=G.lr(Math.floor(f*n),0,l),m=!0,g=0,y=0,M=0,w=-1,S=()=>{c=G.lr(G.Ot(c,g,M),0,1),f=G.lr(G.Ot(f,y,M),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=G.lr(Math.floor(c*r),0,u),p=G.lr(Math.floor(f*n),0,l);const T=(t+2)%s;for(g=e[T],y=e[1+T],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const b=d*o,x=p*a,v=(d+1)*o,C=(p+1)*a;if(m=G.ln(c,f,b,x,v,x,v,C),0!==w&&0<=(M=G.un(c,f,g,y,b,x,v,C,-.001))&&M<=i)S(),m=!m,w=0;else if(0<p&&2!==w&&0<=(M=G.un(c,f,g,y,b,x,v,x,.001))&&M<=i)S(),p--,m=!1,w=4;else if(d<u&&3!==w&&0<=(M=G.un(c,f,g,y,v,x,v,C,.001))&&M<=i)S(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(M=G.un(c,f,g,y,b,x,b,C,.001))&&M<=i)S(),d--,m=!0,w=3;else{if(!(p<l&&4!==w&&0<=(M=G.un(c,f,g,y,b,C,v,C,.001))&&M<=i))break;S(),p++,m=!0,w=2}}}return G.ir(G.Il,h)}qT(t,s){const i=this.ZT(t);this.XT(i),s.Ol(i)}ZT(t){const i=[],e=t.Al();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.KT(h,r);i.push(n,o)}return i}KT(t,s){const i=this.LT()-1,e=this.OT()-1,h=1/i,r=1/e,n=G.lr(Math.floor(t*i),0,i-1),o=G.lr(Math.floor(s*e),0,e-1),a=n*h,u=o*r,l=(n+1)*h,c=(o+1)*r,f=this.QT(n,o),d=this.QT(n+1,o+1),p=G.ln(t,s,a,u,l,u,l,c),m=p?a+h:a,g=p?u:u+r,y=this.QT(n+(p?1:0),o+(p?0:1)),[M,w,S]=G.cn(t,s,a,u,m,g,l,c);return G.dn(M,w,S,f.hT(),f.oT(),f.uT(),y.hT(),y.oT(),y.uT(),d.hT(),d.oT(),d.uT())}XT(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,u=i[a],l=i[1+a],c=u-h,f=l-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=u,r=l,n=c,o=f}6<=e.length&&e.length<i.length&&G.kn(i,e)}yT(){return{cols:this.LT(),rows:this.OT(),points:this.GT.map(t=>t.map(t=>t.yT()))}}MT(t){const i=this.LT(),e=this.OT();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.QT(t,s);n.MT(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{$T:i,t2:e,format:h,type:r}};d;const di=self.Rs,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Mi={s2:"clamp-to-edge",i2:"clamp-to-edge",e2:"trilinear",h2:0,n2:"rgba8",o2:!0,a2:"default",premultiplyAlpha:!0,u2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},Si=new Set;di.qg.l2=class{constructor(t){this.mS=t,this.c2=null,this.Um=0,this.Wm=0,this.f2=!0,this.d2="clamp-to-edge",this.m2="clamp-to-edge",this.g2="trilinear",this.M2=0,this.w2="rgba8",this.S2=!1,this.T2="default",this.ud=0}b2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Mi,t),this.c2)throw new Error("already created texture");if(this.d2=t.s2,this.m2=t.i2,this.g2=t.e2,this.M2=t.h2,this.w2=t.n2,this.S2=!!t.o2&&this.mS.hS(),this.T2=t.a2,!yi.has(this.d2)||!yi.has(this.m2))throw new Error("invalid wrap mode");if(!mi.has(this.g2))throw new Error("invalid sampling");if(!pi.has(this.w2))throw new Error("invalid pixel format");if(!gi.has(this.T2))throw new Error("invalid mipmap quality");if(this.f2=!0,s instanceof ArrayBuffer||null===s||t.u2){if(this.Um=t.width,this.Wm=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.Um*this.Wm*4)throw new Error("ArrayBuffer wrong size")}else this.Um=s.width,this.Wm=s.height;if(this.Um<=0||this.Wm<=0)throw new Error("invalid texture data size");if(t.u2){const o=di.Co(this.Um,this.Wm),a=o.getContext("2d");a.drawImage(s,0,0,this.Um,this.Wm),s=o}const i=di.Ar(this.Um)&&di.Ar(this.Wm),e=this.mS.v2();if(this.Um>e||this.Wm>e)throw new Error("texture data exceeds maximum texture size");const h=this.mS.C2(),r=this.mS.G2(),n=(this.c2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.c2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.w2,h));if(this.mS.I2()||i||!this._2())if(2<=r){let t;t=this.S2?Math.floor(Math.log2(Math.max(this.Um,this.Wm))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.$T,this.Um,this.Wm),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.Um,this.Wm,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.t2,this.Um,this.Wm,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.t2,this.Um,this.Wm,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.t2,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.Um,this.Wm):s)instanceof ImageData){const c=di.Co(this.Um,this.Wm),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const u=di.Co(di.Lr(this.Um),di.Lr(this.Wm)),l=u.getContext("2d");l.imageSmoothingEnabled="nearest"!==this.g2,l.drawImage(s,0,0,this.Um,this.Wm,0,0,u.width,u.height),h.texImage2D(h.TEXTURE_2D,0,n.t2,n.format,n.type,u)}null!==s&&this.D2(h),h.bindTexture(h.TEXTURE_2D,null),this.mS.N2(),this.ud=1,Si.add(this)}E2(t,s,i){if(i=Object.assign({},Mi,i),this.c2)throw new Error("already created texture");if(this.d2=i.s2,this.m2=i.i2,this.g2=i.e2,this.w2=i.n2,this.S2=!!i.o2&&this.mS.hS(),this.T2=i.a2,!yi.has(this.d2)||!yi.has(this.m2))throw new Error("invalid wrap mode");if(!mi.has(this.g2))throw new Error("invalid sampling");if(!pi.has(this.w2))throw new Error("invalid pixel format");if(!gi.has(this.T2))throw new Error("invalid mipmap quality");this.f2=!1,this.Um=Math.floor(t),this.Wm=Math.floor(s);const e=di.Ar(this.Um)&&di.Ar(this.Wm),h=this.mS.v2();if(this.Um<=0||this.Wm<=0)throw new Error("invalid texture size");if(this.Um>h||this.Wm>h)throw new Error("texture exceeds maximum texture size");if(!this.mS.I2()&&this._2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.mS.C2(),n=this.mS.G2(),o=(this.c2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.c2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.w2,r)),a=2<=n?o.$T:o.t2;r.texImage2D(r.TEXTURE_2D,0,a,this.Um,this.Wm,0,o.format,o.type,null),this.D2(r),r.bindTexture(r.TEXTURE_2D,null),this.mS.N2(),this.ud=1,Si.add(this)}A2(t){if("default"===this.T2)return this.f2?t.NICEST:t.FASTEST;if("low"===this.T2)return t.FASTEST;if("high"===this.T2)return t.NICEST;throw new Error("invalid mipmap quality")}_2(){return"clamp-to-edge"!==this.d2||"clamp-to-edge"!==this.m2}L2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}D2(t){const s=di.Ar(this.Um)&&di.Ar(this.Wm);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.L2(t,this.d2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.L2(t,this.m2)),"nearest"===this.g2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.S2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.mS.I2())&&this.S2){t.hint(t.GENERATE_MIPMAP_HINT,this.A2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.g2&&!this.mS.nS();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.S2=!1;const i=this.mS.O2();i&&0<this.M2&&"nearest"!==this.g2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.M2,this.mS.R2()))}P2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.c2||this.ud<=0)throw new Error("texture not created");if(this.f2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.mS.G2(),r=this.mS.C2(),n=(r.bindTexture(r.TEXTURE_2D,this.c2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.w2,r)),o=2<=h?n.$T:n.t2;try{if(this.Um===i&&this.Wm===e){const a=di.Ar(this.Um)&&di.Ar(this.Wm);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.mS.I2())&&this.S2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.A2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.Um=i,this.Wm=e;const u=di.Ar(this.Um)&&di.Ar(this.Wm);if(!this.mS.I2()&&this._2()&&!u)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(u||this.mS.I2())&&this.S2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.A2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.mS.N2()}F2(){if(0<this.ud)throw new Error("texture still has references");if(!this.c2)throw new Error("already deleted texture");Si.delete(this);const t=this.mS.C2();t.deleteTexture(this.c2),this.c2=null}j2(){return!!this.c2}z2(){return this.c2}IS(){return this.mS}B2(){this.ud++}U2(){if(this.ud<=0)throw new Error("no more references");this.ud--}W2(){return this.ud}im(){return this.Um}pm(){return this.Wm}Q2(){return this.f2}J2(){let t=this.Um*this.Wm;switch(this.w2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.S2&&(t+=Math.floor(t/3)),t}static qS(){Si.clear()}static V2(){return Si.values()}}}{const Ti=self.Rs,bi=self.Ms,vh=bi.Gs,xh=bi.bs,xi=new Set(["nearest","bilinear","trilinear"]),vi={e2:"trilinear",alpha:!0,depth:!1,Y2:!0,H2:!0,q2:0},Ci=new Set;Ti.qg.Z2=class{constructor(t){this.mS=t,this.X2=null,this.K2=null,this.c2=null,this.tb=null,this.Um=0,this.Wm=0,this.sb=!0,this.g2="trilinear",this.ib=!0,this.eb=!1,this.hb=!0,this.rb=0,this.nb=xh.create(),this.ob=0,this.ab=0,this.ub=0}lb(t,s,i){i=Object.assign({},vi,i);const e=this.mS.G2();if(this.c2||this.tb)throw new Error("already created render target");if(this.g2=i.e2,this.ib=!!i.alpha,this.eb=!!i.depth,this.hb=!!i.Y2,this.sb=!!i.H2,this.rb=i.q2,!xi.has(this.g2))throw new Error("invalid sampling");if(0<this.rb&&(e<2||this.hb))throw new Error("invalid use of multisampling");if(e<2&&(this.hb=!0),this.Um=t,this.Wm=s,this.Um<=0||this.Wm<=0)throw new Error("invalid render target size");this.cb();const h=this.mS.C2();if(this.X2=h.createFramebuffer(),this.eb&&(this.K2=h.createFramebuffer()),this.hb){this.c2=this.mS.fb(this.Um,this.Wm,{e2:this.g2,n2:this.ib?"rgba8":"rgb8",o2:!1});const n=this.c2.z2();h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.eb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.K2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.tb=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.tb);const o=this.ib?h.RGBA8:h.RGB8;if(0<this.rb){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const u=a[0];this.rb>u&&(this.rb=u)}else this.rb=0}0===this.rb?h.renderbufferStorage(h.RENDERBUFFER,o,this.Um,this.Wm):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.rb,o,this.Um,this.Wm),h.bindFramebuffer(h.FRAMEBUFFER,this.X2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.tb),this.eb&&(h.bindFramebuffer(h.FRAMEBUFFER,this.K2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.tb)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.mS.pb();this.eb&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.X2),this.mS.mb()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ci.add(this)}gb(t,s){if(this.Um!==t||this.Wm!==s){this.Um=t,this.Wm=s,this.cb();const i=this.mS.C2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.X2),this.c2?this.c2.P2(new ImageData(this.Um,this.Wm)):(i.bindRenderbuffer(i.RENDERBUFFER,this.tb),i.renderbufferStorage(i.RENDERBUFFER,this.ib?i.RGBA8:i.RGB8,this.Um,this.Wm),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.mS.pb());this.eb&&e&&(this.mS.mb()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}F2(){if(!this.c2&&!this.tb)throw new Error("already deleted render target");Ci.delete(this);const t=this.mS.C2(),s=(this.c2?(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.eb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.K2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.mS.yb(this.c2),this.c2=null):this.tb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.X2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.eb&&(t.bindFramebuffer(t.FRAMEBUFFER,this.K2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.tb),this.tb=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.mS.G2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.X2),this.eb&&t.deleteFramebuffer(this.K2),this.mS.Mb());s.wb=null,this.X2=s.Sb=null}cb(){this.mS.wM(this.nb,this.Um/this.Wm),this.ob=this.mS.mM(),this.ab=this.mS.cM(),this.ub=this.mS.dM()}Tb(){return this.X2}bb(){return this.K2}IS(){return this.mS}xb(){return this.c2}vb(){return this.mS.mM()===this.ob&&this.mS.cM()===this.ab&&this.mS.dM()===this.ub||this.cb(),this.nb}Cb(){return"nearest"!==this.g2}Gb(){return this.ib}Ib(){return this.hb}_b(){return this.eb}im(){return this.Um}pm(){return this.Wm}Db(){return this.sb}Nb(){return this.rb}Eb(){const t={e2:this.g2,alpha:this.ib,Y2:this.hb};return this.sb||(t.width=this.Um,t.height=this.Wm),t}Ab(t){return"nearest"!==(t=Object.assign({},vi,t)).e2===this.Cb()&&!!t.alpha===this.Gb()&&!!t.depth===this._b()&&!(2<=this.mS.G2()&&!!t.Y2!==this.Ib())&&("number"==typeof t.width||"number"==typeof t.height?!this.Db()&&this.im()===Math.floor(t.width)&&this.pm()===Math.floor(t.height):this.Db())}Lb(){return this.c2?this.c2.z2():null}J2(){return this.c2?this.c2.J2():this.Um*this.Wm*(this.ib?4:3)}static async Ob(t,s){const i=await t.Rb(s,!0);return Ti._o(i)}static qS(){Ci.clear()}static Pb(){return Ci.values()}static kb(t,s){for(const i of Ci)i.Db()&&i.gb(t,s)}}}{const m=self.Rs,Gi=self.Ms,vh=Gi.Gs,xh=Gi.bs,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.qg.Fb=class extends m.qg.pS{static async jb(t,s){const i=t.C2(),e=s.src,h=s.zb,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),u=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Bb());if(u?await t.Ub(()=>i.getProgramParameter(a,u.COMPLETION_STATUS_KHR)):await m.In(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const l=m.zd(i.getProgramInfoLog(a)||"").trim();return l&&!m.kd(l)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,l),i.deleteShader(n),i.deleteShader(o),a}static async Wb(t,s){const i=await m.qg.Fb.jb(t,s);return new m.qg.Fb(t,i,s)}constructor(t,s,i){super(t,i);const e=t.C2(),h=t.Mb(),r=(t.tS(),e.useProgram(s),this.Qb=e,this.BS=s,this.Jb="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.Vb=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Yb),e.vertexAttribPointer(r,t.Kw(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Hb),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.Vb&&(e.bindBuffer(e.ARRAY_BUFFER,t.qb),e.vertexAttribPointer(this.Vb,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Vb)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Zb=new m.qg.Xb(this,"matP","mat4"),this.Kb=new m.qg.Xb(this,"matMV","mat4"),this.$b=new m.qg.Xb(this,"color","vec4"),this.tx=new m.qg.Xb(this,"samplerFront","sampler"),this.ix=new m.qg.Xb(this,"pointTexStart","vec2"),this.hx=new m.qg.Xb(this,"pointTexEnd","vec2"),this.nx=new m.qg.Xb(this,"zElevation","float"),this.ox=new m.qg.Xb(this,"tileSize","vec2"),this.ux=new m.qg.Xb(this,"tileSpacing","vec2"),this.lx=new m.qg.Xb(this,"color2_","vec4"),this.mx=new m.qg.Xb(this,"outlineThickness","float"),this.gx=new m.qg.Xb(this,"samplerBack","sampler"),this.yx=new m.qg.Xb(this,"samplerDepth","sampler"),this.Mx=new m.qg.Xb(this,"destStart","vec2"),this.wx=new m.qg.Xb(this,"destEnd","vec2"),this.Sx=new m.qg.Xb(this,"srcStart","vec2"),this.Tx=new m.qg.Xb(this,"srcEnd","vec2"),this.bx=new m.qg.Xb(this,"srcOriginStart","vec2"),this.xx=new m.qg.Xb(this,"srcOriginEnd","vec2"),this.vx=new m.qg.Xb(this,"pixelSize","vec2"),this.Cx=new m.qg.Xb(this,"seconds","float"),this.Gx=new m.qg.Xb(this,"devicePixelRatio","float"),this.Ix=new m.qg.Xb(this,"layerScale","float"),this._x=new m.qg.Xb(this,"layerAngle","float"),this.Dx=new m.qg.Xb(this,"layoutStart","vec2"),this.Nx=new m.qg.Xb(this,"layoutEnd","vec2"),this.Ex=new m.qg.Xb(this,"zNear","float"),this.Ax=new m.qg.Xb(this,"zFar","float"),this.Lx=!!(this.vx.Ox()||this.Cx.Ox()||this.gx.Ox()||this.Mx.Ox()||this.wx.Ox()||this.Sx.Ox()||this.Tx.Ox()||this.bx.Ox()||this.xx.Ox()||this.Gx.Ox()||this.Ix.Ox()||this._x.Ox()||this.Dx.Ox()||this.Nx.Ox()),i.parameters||[]);this.Rx=[],this.CS=this.vx.Ox()||this.Sx.Ox()||this.Tx.Ox()||this.bx.Ox()||this.xx.Ox(),this.Px=!1,this.kx=!1,this.$b.Fx(1,1,1,1),this.lx.Fx(1,1,1,1),this.tx.jx(0),this.gx.jx(1),this.yx.jx(2),this.ix.zx(0,0),this.hx.zx(1,1),this.nx.Bx(0),this.ox.zx(0,0),this.ux.zx(0,0),this.Mx.zx(0,0),this.wx.zx(1,1),this.Sx.zx(0,0),this.Tx.zx(0,0),this.bx.zx(0,0),this.xx.zx(0,0),this.vx.zx(0,0),this.Gx.Bx(1),this.Ex.Bx(t.cM()),this.Ax.Bx(t.dM()),this.Ix.Bx(1),this._x.Bx(0),this.Cx.Bx(0),this.Dx.zx(0,0),this.Nx.zx(0,0),this.mx.Bx(1);for(const u of o){const l=u[0],c=u[2],f=new m.qg.Xb(this,l,c);"color"===c?f.Ux(0,0,0):f.Bx(0),this.Rx.push(f)}this.Jb?this.Wx(h.Qx):(this.Jx(h.Qx,!0),this.Vx(h.Yx,!0));const a=h.Hx;e.useProgram(a?a.BS:null)}er(){this.Qb.deleteProgram(this.BS),this.BS=null,this.mS.CM(this),this.Qb=null,super.er()}qx(){return this.Qb}Zx(){return this.BS}Xx(){return this.Rx.length}Kx(t){return t<0||t>=this.Rx.length?null:this.Rx[t].$x()}tv(i){for(let t=0,s=i.length;t<s;++t)if(!this.Rx[t].sv(i[t]))return!1;return!0}hv(i){for(let t=0,s=i.length;t<s;++t)this.Rx[t].rv(i[t])}nv(t,s,i,e,h,r,n,o,a,u){return!this.gx.Ox()&&!(this.vx.Ox()&&!this.vx.ov(h,r)||this.Mx.Ox()&&!this.Mx.ov(t.yu(),t.Mu())||this.wx.Ox()&&!this.wx.ov(t.wu(),t.Su())||this.Gx.Ox()&&!this.Gx.av(n)||this.Ix.Ox()&&!this.Ix.av(o)||this._x.Ox()&&!this._x.av(a)||this.Sx.Ox()&&!this.Sx.ov(s.yu(),s.Mu())||this.Tx.Ox()&&!this.Tx.ov(s.wu(),s.Su())||this.bx.Ox()&&!this.bx.ov(i.yu(),i.Mu())||this.xx.Ox()&&!this.xx.ov(i.wu(),i.Su())||this.Dx.Ox()&&!this.Dx.ov(e.yu(),e.Mu())||this.Nx.Ox()&&!this.Nx.ov(e.Mu(),e.Su())||this.Cx.Ox()&&!this.Cx.av(u))}uv(t,s,i,e,h,r,n,o,a,u){this.gx.Ox()||(this.vx.Ox()&&this.vx.lv(h,r),this.Mx.Ox()&&this.Mx.lv(t.yu(),t.Mu()),this.wx.Ox()&&this.wx.lv(t.wu(),t.Su()),this.Gx.Ox()&&this.Gx.cv(n),this.Ix.Ox()&&this.Ix.cv(o),this._x.Ox()&&this._x.cv(a),this.Sx.Ox()&&this.Sx.lv(s.yu(),s.Mu()),this.Tx.Ox()&&this.Tx.lv(s.wu(),s.Su()),this.bx.Ox()&&this.bx.lv(i.yu(),i.Mu()),this.xx.Ox()&&this.xx.lv(i.wu(),i.Su()),this.Dx.Ox()&&this.Dx.lv(e.yu(),e.Mu()),this.Nx.Ox()&&this.Nx.lv(e.Mu(),e.Su()),this.Cx.Ox()&&this.Cx.cv(u))}Jx(t,s){this.Px&&!s||this.Jb||(this.Zb.Ox()&&this.Zb.dv(t),this.Px=!0)}pv(){this.Px=!1}Vx(t,s){this.kx&&!s||this.Jb||(this.Kb.Ox()&&this.Kb.dv(t),this.kx=!0)}mv(){this.kx=!1}Wx(t){if(!this.Jb)throw new Error("not device transform shader");this.Zb.dv(t);const s=this.mS,i=s.im()/2,e=s.pm()/2,h=s.xM(i,e,s.nM(s.pm()),i,e,0,s.pm());this.Kb.dv(h)}gv(t){this.$b.Ox()&&this.$b.yv(t[0],t[1],t[2],t[3])}static Mv(){return Ii}static wv(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Sv(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static Tv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static bv(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xv(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static vv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static Cv(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Gv(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Iv(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static _v(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Dv(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static Nv(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static Ev(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Av(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static Lv(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static Ov(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static Rv(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static Pv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static kv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static Fv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static jv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static zv(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const _i=self.Rs,Di=self.Ms,xh=Di.bs,Ni=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);_i.qg.Xb=class{constructor(t,s,i){if(!Ni.has(i))throw new Error("invalid uniform type");this.CT=t,this.Qb=this.CT.qx(),this.nr=s,this.lf=i,this.Bv="color"===this.lf,this.Uv=this.Qb.getUniformLocation(this.CT.Zx(),s),this.Wv=!!this.Uv;const e=Ni.get(i);this.Qv=new Float32Array(e),this.Jv=new Float32Array(e)}er(){this.CT=null,this.Qb=null,this.Uv=null}Ox(){return this.Wv}$x(){return this.lf}Vv(){return this.Bv}Bx(t){this.Ox()&&(this.Qv[0]=t,this.Jv.set(this.Qv),this.Qb.uniform1f(this.Uv,t))}jx(t){this.Ox()&&(this.Qv[0]=t,this.Jv.set(this.Qv),this.Qb.uniform1i(this.Uv,t))}zx(t,s){this.Ox()&&(this.Qv[0]=t,this.Qv[1]=s,this.Jv.set(this.Qv),this.Qb.uniform2f(this.Uv,t,s))}Ux(t,s,i){this.Ox()&&(this.Qv[0]=t,this.Qv[1]=s,this.Qv[2]=i,this.Jv.set(this.Qv),this.Qb.uniform3f(this.Uv,t,s,i))}Fx(t,s,i,e){this.Ox()&&(this.Qv[0]=t,this.Qv[1]=s,this.Qv[2]=i,this.Qv[3]=e,this.Jv.set(this.Qv),this.Qb.uniform4f(this.Uv,t,s,i,e))}Yv(t){t=Math.fround(t);const s=this.Qv;s[0]!==t&&(s[0]=t,this.Qb.uniform1f(this.Uv,t))}Hv(t){const s=this.Qv;s[0]!==t&&this.Qb.uniform1i(this.Uv,s[0]=t)}qv(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.Qv;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Qb.uniform2f(this.Uv,t,s))}Zv(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.Qv;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Qb.uniform3f(this.Uv,t,s,i))}yv(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.Qv;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Qb.uniform4f(this.Uv,t,s,i,e))}dv(t){const s=this.Qv;xh.B(s,t)||(_i.En(s,t,0),this.Qb.uniformMatrix4fv(this.Uv,!1,t))}sv(t){const s=this.Jv;return this.Vv()?s[0]===Math.fround(t.Xo())&&s[1]===Math.fround(t.Ko())&&s[2]===Math.fround(t.$o()):s[0]===Math.fround(t)}rv(t){const s=this.Jv;this.Vv()?(s[0]=t.Xo(),s[1]=t.Ko(),s[2]=t.$o()):s[0]=t}av(t){return this.Jv[0]===Math.fround(t)}ov(t,s){const i=this.Jv;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}cv(t){this.Jv[0]=t}lv(t,s){const i=this.Jv;i[0]=t,i[1]=s}}}{const Ei=self.Rs,Ai=self.Ms,Uh=Ai.Is,xh=Ai.bs;Ei.qg.Xv=class{constructor(t){this.renderer=t,this.Yx=xh.create(),this.Qx=xh.create(),this.wb=null,this.Sb=null,this.Kv=!1,this.$v=Uh.I(1,1,1,1),this.Hx=null,this.tC=new Ei.Rect,this.clearColor=Ei.ir(Ei.ko,0,0,0,0)}},Ei.qg.sC=class{constructor(t){const s=new ArrayBuffer(96);this.lf=0,this.iC=t,this.Qb=t.renderer.C2(),this.eC=0,this.hC=0,this.rC=null,this.nC=new Float32Array(s,0,16),this.oC=new Float32Array(s,64,4),this.aC=new Float32Array(s,80,4),this.uC=[]}lC(t,s){this.lf=1,this.eC=t,this.hC=s}cC(){const t=this.Qb;t.drawElements(t.TRIANGLES,this.hC,t.UNSIGNED_SHORT,this.eC)}fC(t){this.lf=2,this.rC=t}dC(){const t=this.Qb,s=this.rC;t.bindTexture(t.TEXTURE_2D,s?s.z2():null)}pC(t){this.lf=3,t.ea(this.oC,0)}mC(){const t=this.oC,s=this.iC;Uh.G(s.$v,t),s.Hx.gv(t)}gC(t){this.lf=21,t.ea(this.oC,0)}yC(){const t=this.oC,s=this.iC.Hx;s.lx.Ox()&&s.lx.yv(t[0],t[1],t[2],t[3])}MC(t,s){this.lf=4,this.eC=t,this.hC=s}wC(){this.Qb.blendFunc(this.eC,this.hC)}SC(t,s,i,e){this.lf=5;const h=this.oC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}TC(){const t=this.oC;this.Qb.viewport(t[0],t[1],t[2],t[3])}bC(t){this.lf=6,xh.G(this.nC,t)}xC(){const t=this.iC,i=t.renderer.Gy,e=t.Hx,h=this.nC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Jx(h,!0):r.pv()}xh.G(t.Qx,h)}vC(t){this.lf=7,xh.G(this.nC,t)}CC(){const t=this.iC,i=t.renderer.Gy,e=t.Hx,h=this.nC;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.Vx(h,!0):r.mv()}xh.G(t.Yx,h)}GC(t){this.lf=8,this.rC=t}IC(){const t=this.Qb,s=this.rC,i=this.iC;s?(i.wb=s.Tb(),i.Sb=s.bb(),i.Kv&&i.Sb?t.bindFramebuffer(t.FRAMEBUFFER,i.Sb):t.bindFramebuffer(t.FRAMEBUFFER,i.wb)):(i.wb=null,i.Sb=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}_C(t){this.lf=9,t.ea(this.nC,0)}DC(t,s,i,e){this.lf=9;const h=this.nC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}NC(){const t=this.Qb,s=this.nC,i=this.iC,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.aa(h,r,n,o)||(t.clearColor(h,r,n,o),e.Uo(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}EC(t){this.lf=15,t.ea(this.nC,0)}AC(){const t=this.nC;this.iC.tC.set(t[0],t[1],t[2],t[3])}LC(t,s){this.lf=10,this.eC=t,this.hC=1,this.nC[0]=s}OC(){const t=this.Qb,s=this.iC,i=s.renderer,e=i.Dy,h=(t.useProgram(e.BS),e.Jx(s.Qx,!1),e.Vx(s.Yx,!1),s.tC),r=(e.ix.Ox()&&e.ix.qv(h.yu(),h.Mu()),e.hx.Ox()&&e.hx.qv(h.wu(),h.Su()),this.nC[0]);if(e.nx.Ox()&&e.nx.Yv(r),e.$b.Ox()){const n=s.$v;e.$b.yv(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.eC/4,this.hC),t.useProgram(s.Hx.BS)}RC(t){this.lf=11,this.rC=t}PC(){const t=this.Qb,s=this.iC,i=this.rC;if(s.Hx=i,t.useProgram(i.BS),i.Jx(s.Qx,!1),i.Vx(s.Yx,!1),i.$b.Ox()){const e=s.$v;i.$b.yv(e[0],e[1],e[2],e[3])}}kC(){this.lf=12}FC(){const t=this.iC.Hx,s=this.Qb,i=this.nC,e=this.oC,h=this.aC;if(t.gx.Ox()){const r=this.iC.renderer,n=this.rC;r.jC!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.z2():null),r.jC=n,s.activeTexture(s.TEXTURE0))}t.vx.Ox()&&t.vx.qv(i[0],i[1]),t.Mx.Ox()&&t.Mx.qv(i[2],i[3]),t.wx.Ox()&&t.wx.qv(i[4],i[5]),t.Gx.Ox()&&t.Gx.Yv(this.hC),t.Ix.Ox()&&t.Ix.Yv(i[6]),t._x.Ox()&&t._x.Yv(i[7]),t.Sx.Ox()&&t.Sx.qv(i[12],i[13]),t.Tx.Ox()&&t.Tx.qv(i[14],i[15]),t.bx.Ox()&&t.bx.qv(h[0],h[1]),t.xx.Ox()&&t.xx.qv(h[2],h[3]),t.Dx.Ox()&&t.Dx.qv(e[0],e[1]),t.Nx.Ox()&&t.Nx.qv(e[2],e[3]),t.Cx.Ox()&&t.Cx.Yv(this.eC)}zC(){this.lf=13}BC(){const t=this.iC.Hx,i=t.Rx,e=this.uC;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.Vv()?h.Zv(r.Xo(),r.Ko(),r.$o()):h.Yv(r)}}UC(t){this.lf=14,this.rC=t}WC(){const t=this.Qb,s=this.rC,i=this.iC.wb;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}QC(t,s,i){this.lf=17;const e=this.nC,h=this.iC.renderer,r=(e[0]=t.im(),e[1]=t.pm(),e[2]=(s||h).im(),e[3]=(s||h).pm(),e[4]=t.Cb()?1:0,e[5]="stretch"===i,this.uC);Ei.Ln(r),r.push(t.Tb()),r.push(s?s.Tb():null)}JC(){const t=this.nC,s=this.uC,i=this.Qb,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],u=s[0],l=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,u),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,l),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}VC(t){this.lf=18,this.rC=t}YC(){this.rC.HC(),this.rC=null}qC(t){this.lf=19,this.rC=t}ZC(){this.rC.XC(),this.rC=null}KC(t,s,i){this.lf=20;const e=this.nC;e[0]=t,e[1]=s,e[2]=i}$C(){const t=this.iC.Hx,s=this.nC;t.vx.Ox()&&t.vx.qv(s[0],s[1]),t.mx.Ox()&&t.mx.Yv(s[2])}tG(t,s,i,e,h,r,n){this.lf=16;const o=this.nC;t.ea(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}sG(){const t=this.iC.Hx,s=this.nC;t.Sx.Ox()&&t.Sx.qv(s[0],s[1]),t.vx.Ox()&&t.vx.qv(s[4],s[5]),t.ox.Ox()&&t.ox.qv(s[6],s[7]),t.ux.Ox()&&t.ux.qv(s[8],s[9])}iG(t,s,i,e,h,r,n){this.lf=29;const o=this.nC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}eG(){const t=this.iC.Hx,s=this.nC;t.vx.Ox()&&t.vx.qv(s[0],s[1]),t.ox.Ox()&&t.ox.qv(s[2],s[3]),t.mx.Ox()&&t.mx.Yv(s[4]),t.ux.Ox()&&t.ux.qv(s[5],s[6])}hG(t){this.lf=22,this.eC=t?1:0}rG(){const t=this.Qb,s=0!==this.eC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}nG(t){this.lf=23,this.eC=t?1:0}oG(){const t=this.Qb;0===this.eC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}aG(t){this.lf=24,this.eC=t?1:0}uG(){const t=this.Qb,s=this.iC,i=s.renderer,e=0!==this.eC;s.Kv=e,t.activeTexture(t.TEXTURE2),e?(s.Sb&&t.bindFramebuffer(t.FRAMEBUFFER,s.Sb),t.bindTexture(t.TEXTURE_2D,i.pb())):(t.bindTexture(t.TEXTURE_2D,null),s.Sb&&t.bindFramebuffer(t.FRAMEBUFFER,s.wb)),t.activeTexture(t.TEXTURE0)}lG(){this.lf=25}cG(){const t=this.Qb;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}fG(){this.lf=26}dG(){const t=this.Qb;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}pG(){this.lf=27}mG(){const t=this.Qb;t.disable(t.STENCIL_TEST)}gG(t,s,i,e,h){this.lf=28,this.eC=t?1:0;const r=this.nC;r[0]=s,r[1]=i,r[2]=e,r[3]=h}yG(){const t=this.Qb,s=this.nC;1===this.eC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}MG(){switch(this.lf){case 1:return void this.cC();case 2:return void this.dC();case 3:return void this.mC();case 4:return void this.wC();case 5:return void this.TC();case 6:return void this.xC();case 7:return void this.CC();case 8:return void this.IC();case 9:return void this.NC();case 10:return void this.OC();case 11:return void this.PC();case 12:return void this.FC();case 13:return void this.BC();case 14:return void this.WC();case 15:return void this.AC();case 16:return void this.sG();case 17:return void this.JC();case 18:return void this.YC();case 19:return void this.ZC();case 20:return void this.$C();case 21:return void this.yC();case 22:return void this.rG();case 23:return void this.oG();case 24:return void this.uG();case 25:return void this.cG();case 26:return void this.dG();case 27:return void this.mG();case 28:return void this.yG();case 29:return void this.eG()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Li=self.Rs,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Ri={timeout:60},Pi=new Li.ko(0,0,0,1),ki=new Set(["left","center","right"]),Fi=new Set(["top","center","bottom"]),ji=new Set(["word","cjk","character"]),zi=new Set(["ltr","rtl"]),Bi=new Set;Li.FontManager&&Li.FontManager.addEventListener("fontload",t=>{const s=t.font.Jc();for(const i of Bi)(i.wG()||Li.ph(i.SG(),s))&&i.TG()});let s=!1,i=!1;Li.qg.dS=class{constructor(t,s){s=Object.assign({},Ri,s),this.mS=t,this.bG="Arial",this.xG=16,this.vG=1,this.CG=0,this.GG=!1,this.IG=!1,this._G="black",this.DG=!1,this.Zp=null,this.NG=!0,this.EG=null,this.AG=new Set,this.LG="left",this.OG="top",this.tf="",this.PG=null,this.kG=Li.ir(Li.Hp),this.FG="word",this.jG="ltr",this.zG=!1,this.BG=!1,this.UG=!1,this.WG=-1,this.QG=0,this.JG=0,this.VG=0,this.Um=0,this.Wm=0,this.YG=1,this.HG=null,this.qG=null,this.ZG=null,this.XG=null,this.KG=-1,this.$G=-1,this.tI="",this.sI="",this.iI="",this.eI=1,this.hI=1,this.rI=t=>this.nI(t),this.c2=null,this.oI=new Li.Rect,this.aI=1,this.uI=new Li.Xf(()=>{this.lI(),this.cI(8,8)},s.timeout),this.fI=null,this.dI=!1,Bi.add(this)}er(){this.EG=null,this.AG.clear(),this.Zp=null,this.PG=null,this.HG=null,this.qG=null,this.ZG=null,this.XG=null,this.rI=null,this.uI.er(),this.fI=null,this.lI(),this.kG.Hl(),this.kG=null,this.mS=null,this.dI=!0,Bi.delete(this)}pI(){this.UG=!0}mI(){this.pI(),this.BG=!0}TG(){this.mI(),this.zG=!0}gI(t){if(this.DG!==(t=!!t)){this.DG=t;const s=this.DG?"alphabetic":"top";this.qG&&(this.qG.textBaseline=s),this.ZG&&(this.ZG.textBaseline=s),this.TG()}}wG(){return this.DG}$p(t){this.Zp!==t&&(this.Zp=t,this.kG.$p(t),this.Zp&&this.Zp.Pg()&&this.Zp.kg().then(()=>this.pI()),this.TG())}yI(t){this.NG!==(t=!!t)&&(this.NG=t,this.pI())}MI(t){this.bG!==(t=t||"serif")&&(this.bG=t,this.TG())}SG(){return this.bG}wI(t){this.xG!==(t=t<.1?.1:t)&&(this.xG=t,this.TG())}SI(){return this.xG}TI(t){this.vG!==t&&(this.vG=t,this.TG())}bI(t){this.CG!==t&&(this.CG=t,this.mI())}xI(){return this.CG}vI(t){this.GG!==(t=!!t)&&(this.GG=t,this.TG())}CI(){return this.GG}GI(t){this.IG!==(t=!!t)&&(this.IG=t,this.TG())}II(){return this.IG}_I(t){t=Math.floor(t),this.WG!==t&&(this.WG=t,this.pI())}DI(){return this.WG}NI(t,s){let i=[];(this.GG||s.hg("b"))&&i.push("bold"),(this.IG||s.hg("i"))&&i.push("italic");const e=s.eg("size"),h=(e?parseFloat(e.Bp):this.xG)*this.vG;i.push(t?h+"pt":h*this.EI()+"pt");let r=this.bG,n=s.eg("font");return n&&n.Bp&&(r=n.Bp,this.EG)&&!this.AG.has(r)&&(this.EG(r),this.AG.add(r)),r&&(Oi.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}HS(t){t instanceof Li.ko&&(t=t.ya()),this._G!==t&&(this._G=t,this.pI())}AI(t,s,i){Pi.Wo(t,s,i),this.HS(Pi)}LI(t){if(!ki.has(t))throw new Error("invalid horizontal alignment");this.LG!==t&&(this.LG=t,this.mI())}OI(){return this.LG}RI(t){if(!Fi.has(t))throw new Error("invalid vertical alignment");this.OG!==t&&(this.OG=t,this.mI())}kI(){return this.OG}FI(t){if(!ji.has(t))throw new Error("invalid word wrap mode");this.FG!==t&&(this.FG=t,this.TG())}jI(){return this.FG}zI(t){if(!zi.has(t))throw new Error("invalid text direction");this.jG!==t&&(this.jG=t,this.qG&&(this.qG.direction=this.jG),this.ZG&&(this.ZG.direction=this.jG),this.TG())}BI(){return this.jG}hf(t){this.tf!==t&&(this.tf=t,this.TG())}UI(){return this.tf}EI(){return this.aI*this.YG*self.devicePixelRatio}WI(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.JG===r&&this.VG===n&&this.YG===o)){let t=this.JG,s=(this.JG=r,this.VG=n,this.YG=o,self.devicePixelRatio),i=(this.Um=this.JG*this.YG*s,this.Wm=this.VG*this.YG*s,Math.max(this.Um,this.Wm)),e=Math.min(this.mS.v2(),4096),h=1;e<i&&(h=e/i,this.Um=Math.min(this.Um*h,e),this.Wm=Math.min(this.Wm*h,e)),this.aI=h,this.JG!==t?this.TG():this.mI()}}im(){return this.Um}pm(){return this.Wm}QI(){return this.YG}JI(){return this.VI(),this.kG.zm()}YI(){return this.VI(),this.kG.Bm()+this.kG.Kp()*(this.CG+4)-this.CG}HI(){this.VI();let t=0;for(const s of this.kG.Xp())for(const i of s.Tm())t+=i.xm();return t}xb(){return this.uI.i0(),this.qI(),this.c2}ZI(t,s){this.VI();const i=this.EI(),e=this.kG.Xp();for(const h of e){const r=h.ym()*i;if(s>=h.tg()-h.pm()*i+r&&s<h.tg()+r)for(const n of h.Tm())if(t>=n.Km()&&t<n.Km()+n.im()*i)return n}return null}*XI(t){this.VI();const s=this.kG.Xp();for(const i of s)for(const e of i.Tm()){const h=e.eg("tag");h&&Li.ph(h.Bp,t)&&(yield e)}}KI(t,s){for(const i of this.XI(t)){if(0===s)return i;--s}return null}$I(t){let s=0;for(const i of this.XI(t))++s;return s}qI(){this.c2&&!this.UG&&!this.BG&&!this.zG||this.dI||this.Um<=0||this.Wm<=0||(this.UG=!1,this.t_())}t_(){this.dI||(this.VI(),this.cI(Math.max(Li.Lr(Math.ceil(this.Um)),128),Math.max(Li.Lr(Math.ceil(this.Wm)),64)),this.s_(),this.i_(),this.uI.i0())}cI(t,s){this.HG||(this.HG=Li.Co(16,16));let i=!1;this.KG===t&&this.$G===s||(this.KG=t,this.$G=s,this.HG.width=t,this.HG.height=s,i=!0),this.qG||(this.qG=this.HG.getContext("2d"),i=!0),i?(this.qG.textBaseline=this.DG?"alphabetic":"top",this.qG.direction=this.jG,this.qG.font=this.tI,this.qG.fillStyle=this.iI,this.qG.strokeStyle=this.iI,this.qG.globalAlpha=this.eI,this.qG.lineWidth=this.hI):this.qG.clearRect(0,0,t,s)}e_(){this.ZG||(this.ZG=Li.Co(16,16).getContext("2d"),this.XG=Li.Co(16,16).getContext("2d"),this.ZG.textBaseline=this.DG?"alphabetic":"top",this.XG.textBaseline="top",this.ZG.direction=this.jG,this.XG.direction=this.jG)}h_(t){this.sI!==t&&(this.sI=t,this.ZG.font=t,this.XG.font=t)}r_(){if(!s){s=!0,this.e_();const t=this.ZG.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}VI(){this.n_(),this.o_()}n_(){this.zG&&(this.e_(),!this.DG||this.PG&&this.PG.toString()===this.tf||(this.PG=new Li._h(this.tf,{_p:!0})),this.kG.Hp(this.DG?this.PG.jp():this.tf,this.rI,this.JG,this.FG,0),this.zG=!1)}o_(){this.BG&&(this.a_(),this.BG=!1)}nI(t){let s=t.um()?t.Nm().join(""):" ",i=(this.h_(this.NI(!0,t)),t.eg("size")),e=(i?parseFloat(i.Bp):this.xG)*this.vG,h=this.ZG.measureText(s),r=0;if(this.DG&&this.r_()){const n=this.XG.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,am:r}}u_(t){this.tI!==t&&(this.tI=t,this.qG.font=t)}l_(t){this.iI!==t&&(this.iI=t,this.qG.fillStyle=t,this.qG.strokeStyle=t)}c_(t){this.eI!==t&&(this.eI=t,this.qG.globalAlpha=t)}f_(t){this.hI!==t&&(this.hI=t,this.qG.lineWidth=t)}a_(){let e=this.EI(),h=(4+this.CG)*e,r=0,n=this.kG.Xp();if(0!==n.length){for(const s of n){s.Xm(NaN),s.$m(NaN);for(const o of s.Tm())o.Xm(NaN),o.$m(NaN)}let t=this.DG&&this.r_(),i=n[0].pm()*e;if("center"===this.OG){const a=n.reduce((t,s)=>t+s.pm()*e+h,0)-h;r=Math.max(this.Wm/2-a/2,0),t&&(i=n[0].Mm()*e)}else if("bottom"===this.OG){const u=n.reduce((t,s)=>t+s.pm()*e+h,0)-this.CG*e,l=t?n.at(-1).ym()*e:0;r=this.Wm-u-l-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.pm()*e,d=r;if(this.DG){if(r+=0===t?i:f,0<t&&r>this.Wm-4*e)break}else if(0<t&&r>=this.Wm-f)break;0<=d&&this.d_(c,r,e),this.DG||(r+=f),r+=h}}}d_(t,s,i){let e=0;"center"===this.LG?e=Math.floor((this.Um-t.im()*i)/2):"right"===this.LG&&(e=this.Um-t.im()*i),t.Xm(e),t.$m(s);for(const h of"ltr"===this.jG?t.Tm():t.qm())this.p_(h,e,s,i),e+=h.im()*i}p_(t,s,i,e){const h=t.eg("offsetx"),r=(s+=h?o(h.Bp,t.pm())*e:0,t.eg("offsety"));if(i+=r?o(r.Bp,t.pm())*e:0,t.fm()){const n=t.eg("iconoffsety");i+=n?o(n.Bp,t.pm())*e:.2*t.pm()*e}t.Xm(s),t.$m(i)}s_(){this.qG.imageSmoothingEnabled=this.NG,this.qG.imageSmoothingQuality="high",this.QG=0;const t=this.EI(),s=this.kG.Xp();for(const i of s)this.m_(i,t)}m_(t,s){const i=t.Km(),e=t.tg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.jG?t.Tm():t.qm())this.g_(h,s,t.pm())}g_(n,o,a){const u=this.qG,l=n.Km(),c=n.tg();if(Number.isFinite(l)&&Number.isFinite(c)){let t=a/16,s=n.im()*o,i=n.pm()*o,e=n.pm()/16,h=(4+this.CG)*o,r=n.um()?n.Nm():null;if(-1!==this.WG){if(this.QG>=this.WG)return;n.um()&&this.QG+r.length>this.WG&&(r=r.slice(0,this.WG-this.QG),s=this.nI(n).width*o),this.QG+=n.xm()}const f=n.eg("background"),d=n.hg("u"),p=n.hg("s");if((!n.um()||!Li.Fd(r)||f||d||p)&&!n.hg("hide")){const m=n.eg("color"),g=n.eg("opacity"),y=(this.c_(g?parseFloat(g.Bp)/100:1),f&&(this.l_(f.Bp),u.fillRect(l,c-i,s,i+h)),n.eg("linethickness")),M=y?parseFloat(y.Bp):1,w=n.hg("stroke");if(w&&this.f_(.5*e*M*this.EI()),n.um()){const S=r.join("");if(this.u_(this.NI(!1,n)),!w){this.f_(.5*e*M*this.EI());const T=n.eg("outlineback");T&&(this.l_(T.Bp),this.y_(!0,S,l,c,s))}if(this.l_(m?m.Bp:this._G),this.y_(w,S,l,c,s),!w){this.f_(.5*e*M*this.EI());const b=n.eg("outline");b&&(this.l_(b.Bp),this.y_(!0,S,l,c,s))}}else if(n.fm()&&0<n.im()){const x=n.dg(this.Zp);x&&u.drawImage(x,l,c-i,s,i)}if(this.l_(m?m.Bp:this._G),d&&I(u,w,l,c+o*t,s,o*t*M),p){const v=c-i/4,C=o*e,G=v+C/2;u.fillRect(l,G-C*M/2,s,C*M)}}}}y_(t,s,i,e,h){"rtl"===this.jG&&(i+=h),t?"Gecko"===Li.ri.fi?this.qG.strokeText(s,i,e,h):this.qG.strokeText(s,i,e):"Gecko"===Li.ri.fi?this.qG.fillText(s,i,e,h):this.qG.fillText(s,i,e)}i_(){this.mS.M_()||(this.c2||(this.c2=this.mS.fb(this.HG.width,this.HG.height,{o2:!0,a2:"high"})),this.mS.w_(this.HG,this.c2),this.oI.set(0,0,this.Um/this.c2.im(),this.Wm/this.c2.pm()),this.fI&&this.fI())}S_(){return this.oI}lI(){this.c2&&(this.mS.M_()||this.mS.yb(this.c2),this.c2=null)}static qS(){for(const t of Bi)t.lI()}static T_(){return Bi.values()}}}{const Ui=self.Rs;class Wi{constructor(t){this.Qb=t.C2(),this.b_=t.G2(),this.x_=t.v_(),this.C_=null,this.s0=!1,this.G_=!1,this.I_=0,1===this.b_?this.C_=this.x_.createQueryEXT():this.C_=this.Qb.createQuery()}er(){this.__(),this.Qb=null,this.x_=null,this.G_=!1}__(){this.C_&&(1===this.b_?this.x_.deleteQueryEXT(this.C_):this.Qb.deleteQuery(this.C_),this.C_=null)}HC(){if(this.s0)throw new Error("query already active");1===this.b_?this.x_.beginQueryEXT(this.x_.TIME_ELAPSED_EXT,this.C_):this.Qb.beginQuery(this.x_.TIME_ELAPSED_EXT,this.C_),this.s0=!0}XC(){if(!this.s0)throw new Error("query not active");1===this.b_?this.x_.endQueryEXT(this.x_.TIME_ELAPSED_EXT):this.Qb.endQuery(this.x_.TIME_ELAPSED_EXT),this.s0=!1}D_(){if(this.C_&&!this.G_&&!this.s0){let t;t=1===this.b_?this.x_.getQueryObjectEXT(this.C_,this.x_.QUERY_RESULT_AVAILABLE_EXT):this.Qb.getQueryParameter(this.C_,this.Qb.QUERY_RESULT_AVAILABLE);const s=this.Qb.getParameter(this.x_.GPU_DISJOINT_EXT);t&&!s&&(1===this.b_?this.I_=this.x_.getQueryObjectEXT(this.C_,this.x_.QUERY_RESULT_EXT):this.I_=this.Qb.getQueryParameter(this.C_,this.Qb.QUERY_RESULT),this.I_/=1e9,this.G_=!0),(t||s)&&this.__()}}N_(){return this.G_}E_(){if(this.G_)return this.I_;throw new Error("no result available")}}Ui.qg.A_=class{constructor(t){this.mS=t,this.Ky=t.sS(),this.s0=!1,this.L_=null,this.O_=!1,this.R_=null,this.P_=[]}er(){for(const t of this.P_)t instanceof Wi&&t.er();Ui.Ln(this.P_),this.L_=null,this.R_=null,this.mS=null}HC(){if(this.s0)throw new Error("query already active");const t=this.mS.k_();0<t.length?(this.O_=!0,this.L_=t.at(-1),this.L_.F_(),this.L_.P_.push(this)):(this.O_=!1,this.L_=null),this.s0=!0,t.push(this),this.j_()}XC(){if(!this.s0)throw new Error("query not active");const t=this.mS.k_().pop();if(t!==this)throw new Error("can only end most nested query");this.s0=!1,this.F_(),this.L_&&(this.L_.j_(),this.L_=null)}j_(){this.R_=Ui.ir(Wi,this.mS),this.P_.push(this.R_),this.R_.HC()}F_(){this.R_.XC(),this.R_=null}D_(){for(const t of this.P_)t.D_()}z_(){return this.O_}N_(){return this.P_.every(t=>t.N_())}E_(){return this.P_.reduce((t,s)=>t+s.E_(),0)}sS(){return this.Ky}}}{const Qi=self.Rs;Qi.qg.B_=class{constructor(t,s=1e3){this.mS=t,this.U_=s,this.W_=[],this.mS.Q_(this)}er(){this.Hl(),this.mS.J_(this),this.mS=null}Hl(){for(const t of this.W_)t.er();Qi.Ln(this.W_)}V_(){const t=new Qi.qg.A_(this.mS);if(this.W_.push(t),this.W_.length>this.U_){const s=this.W_.shift();s.er()}return t}Y_(t){for(const s of this.W_){if(s.sS()>=t)return;if(s.z_())return;s.D_()}}H_(t,s){if(s<=t)return NaN;let i=0;for(const e of this.W_){if(e.sS()>=s)break;if(!(e.sS()<t)){if(!e.N_())return NaN;i+=e.E_()}}return i}q_(i){for(let t=0,s=this.W_.length;t<s;++t){const e=this.W_[t];if(!(e.sS()<i))return void(0<t&&this.W_.splice(0,t));e.er()}}}}{let i=function(){h=-1;for(const t of e)t.Z_()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},S=(i,self.Rs),t=self.Ms,T=(t.Gs,t.Is),y=t.bs,r={powerPreference:"default",X_:!0,alpha:!1,depth:!1,K_:!1,tD:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new S.Yu(0,0,1,0,1,1,0,1),M=y.create(),w=y.create(),b=new S.Yu,x=new S.Rect,v=null,e=(S.isDebug&&(self.sD=function(){v?v.loseContext():console.warn("WEBGL_lose_context not supported")},self.iD=function(){v?v.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;S.qg.eD=class extends S.qg.My{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.tD&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Qb=e,this.hD=e.getContextAttributes(),this.rD=e.getParameter(e.VERSION),this.b_=h,this.nD=T.create(),this.oD=!1,this.aD=y.create(),this.uD=!!s.depth,this.lD=!(!s.depth||!s.K_),this.cD=this.uD,this.fD=!1,this.dD=null,this.pD=!0,this.mD=0,this.gD=0,this.Yb=null,this.Hb=null,this.yD=null,this.qb=null,this.MD=new Float32Array(8e3*this.Kw()),this.wD=new Uint16Array(12e3),this.SD=new Float32Array(16e3),this.TD=new Float32Array(32e3),this.bD=0,this.xD=0,this.vD=0,this.CD=0,this.GD=null,this.ID=null,this._D=[],this.DD=0,this.ND=0,this.ED=null,this.AD=0,this.iC=S.ir(S.qg.Xv,this),this.LD=S.ir(S.ko,1,1,1,1),this.OD=null,this.jC=null,this.RD=0,this.PD=0,this.kD=new S.Rect,this.FD=S.ir(S.Rect,0,0,-1,-1),this.jD=0,this.zD=-1,this.BD=0,this.UD=0,this.WD=0,this.QD="(unavailable)",this.JD="(unavailable)",this.VD=[],this.YD=!1,this.HD=null,this.qD=null,this.ZD=null,this.XD=null,this.KD=null,this.$D=null,this.tN=0,this.sN=!!s.X_,this.x_=null,this.iN=new Set,this.eN=[],this.sM(this.wD)}oS(){return!0}async hM(){super.hM();const t=this.Qb,s=this.Kw(),i=(this.LD.Uo(1,1,1,1),this.OD=null,this.jC=null,this.bD=0,this.vD=0,this.CD=8e3*s-4*s,S.Ln(this._D),this.DD=0,this.ND=0,this.GD=null,this.ED=null,this.kD.set(0,0,1,1),this.AD=0,this.iC),e=(i.Hx=null,i.wb=null,i.Sb=null,T.set(i.$v,1,1,1,1),i.clearColor.Uo(0,0,0,0),i.tC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.RD=t.ONE,this.PD=t.ONE_MINUS_SRC_ALPHA,this.hN(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.uD?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.cD=this.uD,this.fD=!1,this.qb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.qb),t.bufferData(t.ARRAY_BUFFER,this.TD.byteLength,t.DYNAMIC_DRAW),this.Yb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Yb),t.bufferData(t.ARRAY_BUFFER,this.MD.byteLength,t.DYNAMIC_DRAW),this.Hb=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Hb),t.bufferData(t.ARRAY_BUFFER,this.SD.byteLength,t.DYNAMIC_DRAW),this.yD=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.yD),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.wD,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.zD=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.BD=e[0],this.UD=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.WD=h&&r?Math.min(h.precision,r.precision):0,2048<this.UD&&(this.UD=2048),this.VD=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.QD=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.JD=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.HD=t.getExtension("KHR_parallel_shader_compile"),S.isDebug&&(v=t.getExtension("WEBGL_lose_context")),this.sN&&(1===this.G2()?this.x_=t.getExtension("EXT_disjoint_timer_query"):this.x_=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.qD=t.getExtension("EXT_texture_filter_anisotropic"),this.qD?this.tN=t.getParameter(this.qD.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.tN=0,this.G2()<2&&this.uD&&this.lD&&(this.ZD=t.getExtension("WEBGL_depth_texture"),!this.ZD))throw new Error("no depth texture support");this.G2()<2&&(this.XD=t.getExtension("EXT_frag_depth"),this.KD=t.getExtension("OES_standard_derivatives"),this.$D=t.getExtension("EXT_shader_texture_lod"));let o=S.qg.Fb,a=o.wv(!1),u=o.Tv(),l=a,c=o.Nv(),f=o._v(),d=o.vv(),p=o.wv(!0),m=!1;this.uD&&(this.G2()<2?this.XD&&(u=o.bv(),c=o.Ev(),d=o.Cv(),m=!0):(l=o.Sv(),u=o.xv(),c=o.Av(),f=o.Dv(),d=o.Gv(),p=o.Sv(!0)));const g=o.Iv(this.G2(),m,this.KD&&this.$D),y=2<=this.G2()?o.Sv():a,M=[[u,l,"<default>"],[u,l,"<default-device-transform>"],[c,f,"<point>"],[o.Lv(),a,"<fill>"],[o.Ov(),a,"<lineargradient>"],[o.Rv(),a,"<penumbra>"],[o.kv(),a,"<hardellipse>"],[o.Fv(),a,"<hardellipseoutline>"],[o.jv(),a,"<smoothellipse>"],[o.zv(),a,"<smoothellipseoutline>"],[o.Pv(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(M.map(t=>this.rN({src:t[0],zb:t[1],name:t[2]})));this._y=w[0],this.ID=w[1],this.Dy=w[2],this.Ay=w[3],this.Ly=w[4],this.Oy=w[5],this.Ry=w[6],this.Py=w[7],this.ky=w[8],this.Fy=w[9],this.jy=w[10],this.Ny=w[11],this.Ey=w[12],this._M()}async rN(t){const s=await S.qg.Fb.Wb(this,t);return this.vM(s),s}nN(){this.GD=null}WI(t,s,i){if(this.Um!==t||this.Wm!==s||i){this.tS();const e=this.Qb,h=this.iC;this.Um=t,this.Wm=s,this.oN(0,0,t,s),this.wM(this.aD,t/s),this.aN(this.aD),this.ID&&(e.useProgram(this.ID.Zx()),this.ID.Wx(this.Ty),this.GD=this.ID,this.iC.Hx=this.ID),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.OD=null,this.jC=null,this.uD&&this.pD&&this.uN(this.Um,this.Wm),this.ED&&this.ED.gb(this.Um,this.Wm),e.bindFramebuffer(e.FRAMEBUFFER,null),this.ED=null,h.wb=null,h.Sb=null}}uN(t,s){const i=this.Qb;this.dD&&this.mD===t&&this.gD===s||(this.lD?(this.dD&&i.deleteTexture(this.dD),this.dD=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.dD),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.G2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.ZD&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.ZD.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.dD&&i.deleteRenderbuffer(this.dD),this.dD=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.dD),i.renderbufferStorage(i.RENDERBUFFER,2<=this.b_?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.mD=t,this.gD=s)}lN(t,s){this.uD&&(this.pD=!1,this.uN(t,s))}cN(){this.uD&&(this.pD=!0,this.uN(this.Um,this.Wm))}oN(t,s,i,e){const h=this.nD;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.fN();r.SC(t,s,i,e),T.set(h,t,s,i,e),this.ND=0}}pM(t){super.pM(t),this.wM(this.aD,this.Um/this.Wm)}lM(t){super.lM(t),this.wM(this.aD,this.Um/this.Wm)}fM(t){super.fM(t),this.wM(this.aD,this.Um/this.Wm)}aN(t){if(!y.B(this.Ty,t)){const s=this.fN();s.bC(t),y.G(this.Ty,t),this.ND=0,this.oD=!0}}dN(){let t,s,i,e=this.ED;i=(null===e?(t=this.aD,s=this.im(),this):(t=e.vb(),s=e.im(),e)).pm(),this.aN(t),this.oN(0,0,s,i)}pN(t){if(!y.B(this.by,t)){const s=this.fN();s.vC(t),y.G(this.by,t),this.ND=0,this.oD=!0}}mN(){this.oD=!1}gN(){return this.oD}Mb(){return this.iC}fN(){const t=this._D;return this.DD===t.length&&t.push(new S.qg.sC(this.iC)),t[this.DD++]}tS(){0===this.DD||this.M_()||(this.yN(),this.MN(),this.DD=0,this.bD=0,this.xD=0,this.vD=0,this.ND=0)}yN(){const t=this.Qb;0<this.vD&&(t.bindBuffer(t.ARRAY_BUFFER,this.qb),t.bufferSubData(t.ARRAY_BUFFER,0,this.TD.subarray(0,this.vD))),0<this.bD&&(t.bindBuffer(t.ARRAY_BUFFER,this.Yb),t.bufferSubData(t.ARRAY_BUFFER,0,this.MD.subarray(0,this.bD)),t.bindBuffer(t.ARRAY_BUFFER,this.Hb),t.bufferSubData(t.ARRAY_BUFFER,0,this.SD.subarray(0,this.xD)))}MN(){const i=this._D;for(let t=0,s=this.DD;t<s;++t)i[t].MG()}wN(){return this.LD.ta()}SN(t,s,i,e){const h=this.LD;if(!h.aa(t,s,i,e)){h.Uo(t,s,i,e);const r=this.fN();r.pC(h),this.ND=0,this.By=null}}TN(t){const s=this.LD;if(s.ta()!==t){s.qo(t);const i=this.fN();i.pC(s),this.ND=0,this.By=null}}HS(t){const s=this.LD;if(!s.equals(t)){s.set(t);const i=this.fN();i.pC(s),this.ND=0,this.By=null}}bN(){this.SN(1,1,1,1)}xN(){return this.LD}vN(t){if(t!==this.OD){const s=this.fN();s.fC(t),this.OD=t,this.ND=0}}N2(){this.OD=null}YS(t){const s=this.ew(t);this.CN(s[0],s[1])}GN(t){const s=this.ow(t);this.CN(s.$M,s.iw)}CN(t,s){if(t!==this.RD||s!==this.PD){const i=this.fN();i.MC(t,s),this.RD=t,this.PD=s,this.ND=0,this.By=null}}IN(){return this.RD===this.Qb.ONE&&this.PD===this.Qb.ONE_MINUS_SRC_ALPHA}_N(){this.CN(this.Qb.ONE,this.Qb.ONE_MINUS_SRC_ALPHA)}DN(){this.CN(this.Qb.SRC_ALPHA,this.Qb.ONE_MINUS_SRC_ALPHA)}NN(){this.CN(this.Qb.ONE,this.Qb.ZERO)}Rect(t){this.EN(t.yu(),t.Mu(),t.wu(),t.Su())}EN(t,s,i,e){this.Xw(t,s,i,s,i,e,t,e)}AN(){let t=this.bD;if(t>=this.CD&&(this.tS(),t=0),1===this.ND)this._D[this.DD-1].hC+=6;else{const s=this.fN();s.lC(t,6),this.ND=1}}LN(t){t.dl(this.MD,this.bD,this.Qy+this.Jy),this.bD+=12}Yu(t){this.AN(),this.LN(t),c.ea(this.SD,this.xD),this.xD+=8}Xw(t,s,i,e,h,r,n,o){this.AN();let a=this.MD,u=this.bD,l=this.Qy+this.Jy;a[u++]=t,a[u++]=s,a[u++]=l,a[u++]=i,a[u++]=e,a[u++]=l,a[u++]=h,a[u++]=r,a[u++]=l,a[u++]=n,a[u++]=o,a[u++]=l,this.bD=u,c.ea(this.SD,this.xD),this.xD+=8}xw(t,s){this.AN(),this.LN(t),s.xu(this.SD,this.xD),this.xD+=8}ON(t,s){this.AN(),this.LN(t),s.ea(this.SD,this.xD),this.xD+=8}RN(t,s,i,e,h,r,n,o,a,u,l,c,f){this.AN();let d=this.MD,p=this.bD,m=this.Qy+this.Jy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.bD=p,f.xu(this.SD,this.xD),this.xD+=8}Mw(t,s,i,e,h,r,n,o,a,u,l,c,f){this.AN();let d=this.MD,p=this.bD,m=this.Qy+this.Jy;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=u,d[p++]=l,d[p++]=m+c,this.bD=p,f.ea(this.SD,this.xD),this.xD+=8}PN(e,h,r){const n=this.MD,o=this.SD;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],u=r[i++],l=r[i++],c=3*a,f=3*u,d=3*l,p=2*a,m=2*u,g=2*l;this.AN();let t=this.bD,s=this.xD;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.bD=t,this.xD=s}}kN(t,s){this.cw(0),y.G(M,this.Ty),y.G(w,this.by),this.dN();const[i,e]=this.FN(this.ED),h=this.xM(0,0,this.nM(e),0,0,0,e);if(this.pN(h),"crop"===t&&this.ED&&s){const r=this.Um/2,n=this.Wm/2,o=s.im(),a=s.pm(),u=this.ED.im(),l=this.ED.pm(),c=Math.min(u,o),f=Math.min(l,a),d=Math.max(a-l,0),p=Math.max(l-a,0);x.set(-r,n-p,-r+c,n-f-p),b.pl(x),x.set(0,d,c,f+d),x.Gt(o,a),this.xw(b,x)}else{const m=i/2,g=e/2;this.EN(-m,g,m,-g)}this.aN(M),this.pN(w)}jN(t){if(!this.kD.equals(t)){this.kD.G(t);const s=this.fN();s.EC(t),this.ND=0}}zN(){}BN(t,s,i,e){7996<=this.vD&&this.tS();let h=this.vD,r=this.Qy+this.Jy;if(2===this.ND&&this.AD===r)this._D[this.DD-1].hC++;else{const o=this.fN();o.LC(h,r),this.ND=2,this.AD=r}const n=this.TD;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.vD=h}DM(t){if(this.GD!==t){const s=this.fN();s.RC(t),this.GD=t,this.ND=0,this.By=null}}UN(){return this.GD}WN(){this.DM(this.ID)}QN(t){const s=this.fN();s.gC(t),this.ND=0}JN(t,s,i=1){const e=this.fN();e.KC(t,s,i),this.ND=0}VN(t,s,i,e,h,r,n){if(this.GD!==this.Ny)throw new Error("must set tilemap fill mode first");const o=this.fN();o.tG(t,s,i,e,h,r,n),this.ND=0}YN(t,s,i,e,h,r,n){if(this.GD!==this.Ey)throw new Error("must set tile randomization mode first");const o=this.fN();o.iG(t,s,i,e,h,r,n),this.ND=0}HN(t,s,i,e,h,r,n,o,a,u,l){const c=this.GD;if(l%=10800,c.Lx&&!c.nv(s,i,e,h,r,n,o,a,u,l)){const f=this.fN(),d=(f.kC(),c.uv(s,i,e,h,r,n,o,a,u,l),f.nC),p=(d[0]=r,d[1]=n,s.ea(d,2),d[6]=a,d[7]=u,i.ea(d,12),f.oC),m=(h.ea(p,0),p[1]);p[1]=p[3],p[3]=m,e.ea(f.aC,0),f.eC=l,f.hC=o,c.gx.Ox()?f.rC=t?t.xb():null:f.rC=null,this.ND=0}}qN(t){const s=this.GD;if(0!==t.length&&!s.tv(t)){const i=this.fN();i.zC(),s.hv(t),S.kn(i.uC,t),this.ND=0}}ZN(t,s,i,e){const h=this.fN();h.DC(t,s,i,e),this.ND=0}Hl(t){const s=this.fN();s._C(t),this.ND=0}XN(){}$w(){super.$w(),this.Qb.flush()}KN(){if(this.uD&&this.ED&&this.ED._b()){const t=this.fN();t.hG(this.cD),this.ND=0}}$N(t){if(this.cD!==(t=!!t)&&this.uD){this.cD=t;const s=this.fN();s.nG(t),this.ND=0}}tE(){return this.cD}pb(){return this.dD}mb(){return this.lD}sE(t){if(t=!!t,this.lD&&this.fD!==t){if(t&&this.tE())throw new Error("depth still enabled");this.fD=t;const s=this.fN();s.aG(t),this.ND=0}}iE(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.FD.gu(t,s,i,e)){this.FD.uu(t,s,i,e);const r=h||this.FN(this.eE())[1],n=(s=r-s-e,this.fN());n.gG(!0,t,s,i,e),this.ND=0}}hE(){if(-1!==this.FD.wu()){this.FD.set(0,0,-1,-1);const t=this.fN();t.gG(!1,0,0,0,0),this.ND=0}}rE(){for(const t of this.iN)t.Y_(this.Ky)}M_(){return!this.Qb||this.Qb.isContextLost()||this.YD}qS(){super.rM(),S.qg.l2.qS(),S.qg.Z2.qS(),S.qg.dS.qS();for(const t of this.iN)t.Hl();this.VD=[],this.x_=null,this.HD=null,this.qD=null,this.ZD=null,this.XD=null,this.KD=null,this.$D=null,this.tN=0,this.QD="(unavailable)",this.JD="(unavailable)",this.GD=null,this.ID=null,this.dD=null;for(const s of this.zy.values())s.qS()}async ZS(){this.YD=!0,await this.hM(),this.YD=!1;for(const t of this.zy.values())t.ZS(this);this.WI(this.Um,this.Wm,!0)}nE(t,s){if(this.M_())throw new Error("context lost");this.tS();const i=S.ir(S.qg.l2,this);return i.b2(t,s),i}async oE(e,h){if(this.M_())throw new Error("context lost");if(h=Object.assign({},h),S.ki.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.s2&&"clamp-to-edge"!==h.s2||h.i2&&"clamp-to-edge"!==h.i2,i=S.Ar(t.width)&&S.Ar(t.height);return this.I2()||i||!s?h.premultiplyAlpha=!1:S.ki.Ui?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:S.Lr(t.width),resizeHeight:S.Lr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),S.Nf(()=>this.nE(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await S.vo(e);e=t}return S.Nf(()=>this.nE(e,h))}fb(t,s,i){this.tS();const e=S.ir(S.qg.l2,this);return e.E2(t,s,i),e}w_(t,s,i){this.tS(),s.P2(t,i)}yb(t){t&&(t.U2(),0<t.W2()||(this.tS(),t===this.OD&&(this.Qb.bindTexture(this.Qb.TEXTURE_2D,null),this.OD=null),t===this.jC&&(this.Qb.activeTexture(this.Qb.TEXTURE1),this.Qb.bindTexture(this.Qb.TEXTURE_2D,null),this.Qb.activeTexture(this.Qb.TEXTURE0),this.jC=null),t.F2()))}aE(t){let s=this.Um,i=this.Wm,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.tS();const h=S.ir(S.qg.Z2,this);return h.lb(s,i,Object.assign({H2:e},t)),this.ED=null,this.iC.wb=null,this.iC.Sb=null,h}uE(t,s=!0){if(t!==this.ED){t&&t.Db()&&t.gb(this.Um,this.Wm);const i=this.fN();i.GC(t),this.ED=t,this.ND=0,s&&this.dN()}}eE(){return this.ED}FN(t){return t?[t.im(),t.pm()]:[this.Um,this.Wm]}lE(t,s="stretch"){if(this.b_<2||this.ED&&0<this.ED.Nb())this.NN(),this.bN(),this.cE(t,s);else{const i=this.fN();i.QC(t,this.ED,s),this.ND=0}}cE(t,s="stretch"){const i=t.xb();if(!i)throw new Error("not a texture-backed render target");this.vN(i),this.kN(s,i)}fE(t){if(!(this.b_<2)){const s=this.fN();s.UC(t.Tb()),this.ND=0}}dE(t){this.uE(null),this.tS();const s=t.xb();s===this.OD&&(this.Qb.bindTexture(this.Qb.TEXTURE_2D,null),this.OD=null),s===this.jC&&(this.Qb.activeTexture(this.Qb.TEXTURE1),this.Qb.bindTexture(this.Qb.TEXTURE_2D,null),this.Qb.activeTexture(this.Qb.TEXTURE0),this.jC=null),t.F2()}async Rb(t,s,i){this.tS();let e=this.ED,h,r,n,o=(n=t?(h=t.im(),r=t.pm(),t.Tb()):(h=this.im(),r=this.pm(),null),0),a=0,u=h,l=r;if(i){o=S.lr(Math.floor(i.yu()),0,h-1),a=S.lr(Math.floor(i.Mu()),0,r-1);let t=i.width(),s=(t=0===t?h-o:S.lr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:S.lr(Math.floor(s),0,r-a),u=t,l=s,a=r-(a+l)}let c=this.Qb,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.ED=null,this.iC.wb=null,this.iC.Sb=null,this.uE(e)}),d;if(!s&&2<=this.G2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=u*l*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Ub(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(u,l),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(u,l),c.readPixels(o,a,u,l,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}pE(){this.$N(!0);const t=this.fN();t.lG(),this.ND=0,this.jD=1}mE(){this.$N(!1);const t=this.fN();t.fG(),this.ND=0,this.jD=2}gE(){return 2===this.jD}yE(){this.$N(!0);const t=this.fN();t.pG(),this.ND=0,this.jD=0}ME(t){if(this.wE()){const s=this.fN();s.VC(t),this.ND=0}}SE(t){if(this.wE()){const s=this.fN();s.qC(t),this.ND=0}}Ub(s){const t=new Promise(t=>e.add({resolve:t,Z_:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}aS(){return this.Um*this.Wm*(this.hD.alpha?4:3)}uS(){let t=0;for(const s of S.qg.Z2.Pb())s.xb()||(t+=s.J2());return t}lS(){let t=0;for(const s of S.qg.l2.V2())t+=s.J2();return t}TE(){return this.rD}G2(){return this.b_}bE(){return"webgl"+this.G2()}I2(){return 2<=this.G2()}v2(){return this.zD}xE(){return this.BD}vE(){return this.UD}CE(){return 0!==this.WD}GE(){return this.WD}IE(){return this.QD}_E(){return this.JD}DE(){if(2<=this.G2())return"webgl2";{const t=[];return this.XD&&t.push("EXT_frag_depth"),this.KD&&t.push("OES_standard_derivatives"),this.$D&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}NE(){return this.VD}wE(){return!!this.x_}v_(){return this.x_}Bb(){return this.HD}O2(){return this.qD}R2(){return this.tN}Q_(t){this.iN.add(t)}J_(t){this.iN.delete(t)}k_(){return this.eN}C2(){return this.Qb}hN(t){this.KM([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}EE(){return this.fS()}}}{const Ji=self.Rs,Vi={AE:null,LE:null,OE:null,getTime:null,RE:null};Ji.qg.PE=class{constructor(t){t=Object.assign({},Vi,t),this.kE=t.AE,this.FE=t.LE,this.jE=t.OE,this.zE=t.getTime,this.BE=t.RE,this.UE=null,this.WE=new Set}QE(t){this.WE.add(t)}JE(t){this.WE.delete(t)}qS(){this.UE=null;for(const t of this.WE)t.qS()}VE(t){return this.kE?this.kE(t):[t.im(),t.pm()]}eE(t){return this.FE(t)}YE(t,s){this.jE(t,s)}HE(){return this.zE()}Z1(t){this.BE(t)}qE(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.UE||this.UE.im()===s&&this.UE.pm()===i||(t.yb(this.UE),this.UE=null),null===this.UE&&(this.UE=t.nE(null,{width:s,height:i,e2:"nearest",o2:!1})),this.UE}}}{const o=self.Rs,Yi=self.Ms,xh=Yi.bs,Hi=o.ir(o.Rect),qi=o.ir(o.Rect),Zi=o.ir(o.Rect),Xi=o.ir(o.Rect),Ki=xh.create(),$i=xh.create(),te={ZE:null,XE:null,KE:null,$E:!1},se={tA:null,sA:!1,iA:!1,eA:!1,hA:!1,rA:!1,nA:!1};o.qg.oA=class{constructor(t,s){s=Object.assign({},te,s),this.od=t,this.aA=s.ZE,this.uA=s.XE,this.lA=s.KE,this.cA=null,this.fA=[],this.dA=[],this.pA=[],this.mA=!1,this.WS=0,this.gA=!1,this.yA=!1,this.MA=!1,this.wA=!1,this.SA=!1,this.TA=!1,this.oD=!1,this.bA=!1,this.xA=!1,this.vA=!1,this.CA=!1,this.GA=!1,this.IA=0,this._A=[null,null,null],this.DA=!!s.$E,this.NA=0,this.EA=0,this.AA=0,this.LA=0,this.OA=null,this.RA=null,this.PA=o.ir(o.Rect),this.kA=o.ir(o.Rect),this.FA=o.ir(o.Rect),this.jA=o.ir(o.Rect),this.zA=o.ir(o.Rect),this.BA=1,this.UA=1,this.WA=0,this.QA=0,this.JA=null,this.VA=null,this.YA=0,this.HA=0,this.qA=!1,this.nb=xh.create(),this.ZA=xh.create(),this.od.QE(this)}er(){this.od.JE(this),o.Ln(this.pA),o.Ln(this.fA),o.Ln(this.dA),this.OA=null,this.RA=null,this.aA=null,this.uA=null,this.lA=null}qS(){this.mA=!0,o.Ln(this.pA),o.Ln(this.fA),o.Ln(this.dA)}XA(){return this.mA}KA(h,t){if(t=Object.assign({},se,t),o.Ln(this.pA),this.NA=0,this.EA=0,this.gA=!1,this.yA=!1,this.MA=!1,this.wA=!1,this.SA=!1,this.TA=!1,this.IA=0,this.GA=!!t.hA,this.CA=!!t.nA,this.mA=!1,o.kn(this.fA,h),0!==h.length){if(t.tA){if(t.tA.length!==h.length)throw new Error("incorrect indexMap length");o.kn(this.dA,t.tA)}else{o.Ln(this.dA);for(let t=0,s=h.length;t<s;++t)this.dA.push(t)}for(const s of h)this.NA+=s.DS(),this.EA+=s.NS(),s.RS()&&(this.gA=!0),s.kS()&&(this.yA=!0),s.PS()&&(this.MA=!0),s.ES()&&(this.wA=!0),s.zS()&&(this.SA=!0);this.TA=this.$A(h[0].IS());const r=this.tL(h[0],t),n=this.sL(h.at(-1),t);if(1!==h.length||r||n){this.vA=!1;let e=0;r&&(this.IA=1,this.pA.push(o.ir(o.qg.oA.eL.iL,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.IA=Math.max(this.IA,t),this.pA.push(o.ir(o.qg.oA.eL.hL,this,e,t,s)),e=t}else this.IA=1,this.pA.push(o.ir(o.qg.oA.eL.rL,this,-1,1,s)),e=1;n&&this.pA.push(o.ir(o.qg.oA.eL.nL,this,e,0))}else this.vA=!0}}tL(t,s){return!!(s.sA||t.AS()||s.eA&&!t.OS()||t.kS()&&!this.CA||0!==this.NA||0!==this.EA)||(t.IS().oS()?t.PS()&&(s.rA||s.hA)||t.FS()&&s.hA:t.PS()&&!this.TA&&s.rA)}sL(t,s){return!!s.iA||(t.IS().oS()?t.PS()||t.ES():(t.PS()||t.ES())&&this.oL())}$A(t){return t.SM()&&this.MA&&!this.wA}aL(t,s,i){t.SM()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.JA=s,this.OA=i.uL||null,this.RA=i.contextObject||null,this.WS=i.lL||0,this.BA=i.devicePixelRatio||1,this.UA=i.cL||1,this.WA=i.fL||0,this.QA="number"==typeof i.time?i.time:this.od.HE(),this.oD=!1,t.mN(),this.gA&&this.dL();let e=!1;if(this.pL()&&(this.mL(t,i),e=!0,this.VA=this.od.qE(t,this.AA,this.LA),Hi.G(this.kA),Hi.ju(),t.SM()&&t._MaybeDoPendingClearRenderPass(this.JA),t.CopyTextureToTexture(this.JA.xb(),this.VA,Hi.yu(),Hi.Mu(),Hi.width(),Hi.height())),this.vA)this.gL(t,i);else if(e||this.mL(t,i),0!==this.FA.width()||0!==this.FA.height()){t._N(),t.bN(),t.uw(0),t.cw(0),this.cA=i.yL||null,this.YA=i.ML||0,this.HA=i.wL||0,this.qA=!!i.SL,this.TL(t),this._A[0]=s,this._A[1]=1<=this.IA?this.bL():null,this._A[2]=2===this.IA?this.bL():null;for(const h of this.pA){const r=this.xL(h.vL()),n=this.xL(h.CL());t.SM()?h.GL(t,r,n):h.IL(t,r,n)}t.vN(null),this._A[1]&&this._L(this._A[1]),this._A[2]&&this._L(this._A[2]),this._A.fill(null),this.DL(t),this.JA=null,this.VA=null,this.OA=null,this.RA=null,this.cA=null}}mL(t,s){const[i,e]=this.od.VE(t);this.NL(t,i,e),this.EL(s)}NL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.AA===s&&this.LA===i||this.AL(t,s,i,0,0,this.nb,this.ZA),this.AA=s,this.LA=i}AL(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,u=(t.wM(r,s/i),t.xM(o,a,t.nM(i),o,a,0,i));xh.G(n,u)}EL(t){this.PA.G(t.LL),t.OL?this.kA.G(t.OL):this.kA.set(0,0,this.AA,this.LA),this.FA.G(this.kA),this.FA.Gt(this.AA,this.LA);const s=this.UA*this.BA;this.kA.Nu(this.NA*s,this.EA*s),this.zA.G(this.kA),this.zA.Gt(this.AA,this.LA),this.kA.zu(0,0,this.AA,this.LA),this.jA.G(this.kA),this.jA.Gt(this.AA,this.LA)}TL(t){if(this.bA=t.tE(),this.xA=t.gE(),this.CA)t.$N(!1),this.yA&&t.sE(!0);else{if(Hi.G(this.kA),t.oS()){const s=this.UA*this.BA;Hi.Nu(Math.max(this.NA,1)*s,Math.max(this.EA,1)*s),Hi.ju(),Hi.lr(0,0,this.AA,this.LA)}else Hi.ju();t.iE(Hi.yu(),Hi.Mu(),Hi.width(),Hi.height(),this.LA)}}RL(t){t.bN(),this.CA||(this.xA&&t.yE(),t.$N(!1),this.yA&&t.sE(!0)),t.SM()&&t.SetNormalizedCoordsProgramVariant(!0)}DL(t){t.sE(!1),this.xA&&t.mE(),t.$N(this.bA),this.CA||t.hE(),t.SM()&&t.SetNormalizedCoordsProgramVariant(!1),this.oD=t.gN()}PL(){this.zA.lr(0,0,1,1)}xL(t){return t<0?null:this._A[t]}bL(){return this.od.eE(this)}kL(){return this.JA}_L(t){this.od.YE(t,this)}FL(t){return this.fA[t]}jL(t){this.cA?this.cA(this,t,()=>this.aA(t,this)):this.aA(t,this),this.vA||this.RL(t)}zL(t){if(this.CA)return!0;if(0!==this.YA||0!==this.HA)return!1;const[s,i]=t.FN(t.eE());return s===this.AA&&i===this.LA}BL(t,s){let i=this.nb,e=this.ZA;if(s&&!this.zL(t)){i=Ki,e=$i;const[h,r]=t.FN(t.eE());this.AL(t,h,r,this.YA,this.HA,i,e),this.CA||t.hE()}t.aN(i),t.pN(e)}dL(){this.od.Z1(this)}UL(t,s){return this.lA(this.dA[t],s)}WL(t,s){let i=this.zA,e=this.jA,h=this.FA;t.oS()&&(qi.G(i),qi.Lu(1),i=qi,Zi.G(e),Zi.Lu(1),e=Zi,Xi.G(h),Xi.Lu(1),h=Xi),this.QL(t,s,e,h,i,1/this.AA,1/this.LA)}JL(t,s){let e=this.jA,h=this.FA,r=1/this.AA,n=1/this.LA;if(this.uA){let{VL:t,YL:s,HL:i}=this.uA(this.OA);t||(Hi.set(0,0,0,0),t=Hi),s=s||this.AA,i=i||this.LA,e=t,h=t,r=1/s,n=1/i}else t.oS()&&(Zi.G(e),Zi.Lu(1),e=Zi,Xi.G(h),Xi.Lu(1),h=Xi);let i=this.zA;t.oS()&&((i=qi).G(this.zA),i.Lu(1)),this.QL(t,s,e,h,i,r,n),t.SM()&&this.SA&&t.SetProgramParameter_IsSrcTexRotated(this.GA)}qL(t){return this.MA?t.SM()?this.pL()?this.VA:this.JA.xb():this.JA:null}QL(t,s,i,e,h,r,n){t.HN(this.qL(t),h,i,e,this.PA,r,n,this.BA,this.UA,this.WA,this.QA),t.qN(this.UL(s,t))}gL(t,s){const i=this.fA[0],e=t.tE(),h=i.kS();h&&(t.$N(!1),t.sE(!0),this.zA.set(0,0,1,1),this.FA.set(0,0,1,1)),t.DM(i),t.YS(this.WS),t.uE(this.JA);let r=0,n=1;if(this.FA.set(0,0,1,1),i.FS()&&this.uA){const{VL:o,YL:a,HL:u}=this.uA(this.OA);o&&this.FA.G(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(u)?1/u:0}else{const[l,c]=this.od.VE(t);r=1/l,n=1/c}s.LL?this.PA.G(s.LL):this.PA.set(0,0,0,0),t.HN(this.qL(t),this.zA,this.FA,this.FA,this.PA,r,n,this.BA,this.UA,this.WA,this.QA),t.qN(this.UL(0,t)),t.SM()&&this.SA&&t.SetProgramParameter_IsSrcTexRotated(this.GA),t.uw(0),this.jL(t),h&&(t.sE(!1),t.$N(e))}pL(){return this.TA}oL(){return!this.TA}ZL(){return this.MA}XL(){return!!this.vA&&!this.pL()}KL(){return this.CA}$L(){return this.OA}tO(){return this.RA}sO(){return this.WS}iO(){return this.qA}gN(){return this.oD}eO(){return this.kA}hO(){return this.jA}rO(){return this.DA}async nO(t,s,i){}}}{const ie=self.Rs;ie.qg.oA.eL=class{constructor(t,s,i,e=-1){this.oO=t,this.aO=s,this.uO=i,this.Ug=e}lO(){return this.oO}vL(){return this.aO}CL(){return this.uO}cO(){return this.Ug}Zx(){return this.lO().FL(this.cO())}IL(t,s,i){}GL(t,s,i){}}}{const ee=self.Rs;ee.qg.oA.eL.iL=class extends ee.qg.oA.eL{constructor(t,s,i,e){super(t,s,i,e)}IL(t,s,i){const e=this.lO();t._N(),t._M(),t.uE(i,e.iO()),t.ZN(0,0,0,0),e.jL(t),e.PL()}GL(t,s,i){const e=this.lO();t._N(),t._M(),t.uE(i,!1),t.ZN(0,0,0,0),e.jL(t),e.PL()}}}{const he=self.Rs,re=he.ir(he.Rect),ne=he.ir(he.Yu);he.qg.oA.eL.nL=class extends he.qg.oA.eL{constructor(t,s,i,e){super(t,s,i,e)}IL(t,s,i){const e=this.lO();t._M(),t.uE(i),e.BL(t,!0),t.YS(e.sO()),t.vN(s.xb()),ne.pl(e.eO()),re.G(e.hO()),re.Lu(1),t.xw(ne,re),e.rO()&&t.fE(s)}GL(t,s,i){const e=this.lO();t._M(),t.uE(i,!1),e.zL(t)?ne.pl(e.hO()):(t.SetNormalizedCoordsProgramVariant(!1),e.BL(t,!0),ne.pl(e.eO())),t.SetBackTexture(null),t.YS(e.sO()),t.vN(s.xb()),e.KL()?t.kN():t.xw(ne,e.hO())}}}{const oe=self.Rs;oe.qg.oA.eL.rL=class extends oe.qg.oA.eL{constructor(t,s,i,e){super(t,s,i,e)}IL(t,s,i){const e=this.lO();t.uE(i,e.iO()),t.ZN(0,0,0,0),t.NN(),t.DM(this.Zx()),e.JL(t,this.cO()),e.jL(t),e.PL()}GL(t,s,i){const e=this.lO();t.uE(i,!1),t.ZN(0,0,0,0),t.NN(),t.DM(this.Zx()),e.JL(t,this.cO()),e.jL(t),e.PL()}}}{const ae=self.Rs,ue=ae.ir(ae.Rect),le=ae.ir(ae.Yu);ae.qg.oA.eL.hL=class extends ae.qg.oA.eL{constructor(t,s,i,e){super(t,s,i,e)}IL(t,s,i){const e=this.lO(),h=(t.uE(i),0===this.CL());h?t.YS(e.sO()):(t.ZN(0,0,0,0),t.NN()),t.DM(this.Zx()),e.WL(t,this.cO()),t.vN(s.xb()),e.BL(t,h),le.pl(e.eO()),ue.G(e.hO()),ue.Lu(1),t.xw(le,ue),e.rO()&&t.fE(s)}GL(t,s,i){const e=this.lO(),h=(t.uE(i,!1),0===this.CL());h?(t.YS(e.sO()),t.SetBackTexture(null),e.zL(t)?le.pl(e.hO()):(t.SetNormalizedCoordsProgramVariant(!1),e.BL(t,!0),le.pl(e.eO()))):(t.ZN(0,0,0,0),t.NN(),le.pl(e.hO())),t.DM(this.Zx()),e.WL(t,this.cO()),t.vN(s.xb()),e.KL()?t.kN():t.xw(le,e.hO())}}}{let l=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(l,self.Rs),f=self.Js,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.fO=class{constructor(t){d=t,Object.defineProperties(this,{dO:{value:d.mO().pO(),writable:!1},gO:{value:d.MO().yO(),writable:!1},wO:{value:{},writable:!1},SO:{value:{},writable:!1},TO:{value:d.bO(),writable:!1},xO:{value:d.vO(),writable:!1},storage:{value:new self.CO(d),writable:!1},isInWorker:{value:d.GO(),writable:!1},IO:{value:d._O(),writable:!1},DO:{value:d.NO(),writable:!1},e2:{value:d.EO(),writable:!1},AO:{value:d.LO(),writable:!1},OO:{value:new self.RO(t),writable:!1},PO:{value:new self.kO(t),writable:!1}}),d.FO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.FO().addEventListener("keyup",t=>s.delete(t.key)),d.Rf().addEventListener("window-blur",()=>s.clear()),d.GO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}jO(t){Object.defineProperties(this.wO,t)}zO(t){Object.defineProperties(this.SO,t)}addEventListener(t,s){d.FO().addEventListener(t,s)}removeEventListener(t,s){d.FO().removeEventListener(t,s)}BO(t,...s){f.Te(t);const i=d.UO(),e=i.WO(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.Jl())return e.QO();if(s.length<e.JO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.JO()} expected)`);let h=e.VO(),r=h.YO(),n=i.HO();if(n){r=r.slice(0);const a=new Set(r);for(const u of n.YO())a.has(u)||(r.push(u),a.add(u));for(const l of i.qO())a.has(l)||(r.push(l),a.add(l))}const o=h.ZO(r,e.XO(),e.KO(),e.QO(),...s);return o}$O(t){const s=d.s3().t3();if(!s)throw new Error("not in a function which returns a value");switch(s.i3()){case 1:"number"==typeof t&&s.e3(t);break;case 2:"string"==typeof t&&s.e3(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.e3(t)}}signal(t){f.Te(t),d.UO().h3(t)}r3(t){return f.Te(t),d.UO().n3(t)}o3(){return[d._O(),d.NO()]}get isSuspended(){return d.a3()}get u3(){return d.l3()}get f3(){return d.d3()}get m3(){return d.g3()}get y3(){return d.M3()}get w3(){return d.S3()}set w3(t){f.ye(t),d.T3(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.b3()}get framesPerSecond(){return d.b3()}get x3(){return d.v3()}get C3(){return d.G3()}get I3(){return d._3()}get D3(){return d.N3()}set D3(t){if(!e.has(t))throw new Error("invalid framerate mode");d.E3(t)}get A3(){return d.L3()}set A3(t){f.ye(t),d.O3(t)}get R3(){return d.P3()}set R3(t){d.F3(t)}random(){return d.j3()}get layout(){const t=d.z3();if(t)return t.B3();throw new Error("no layout is running - make sure a layout is loaded before accessing")}U3(t){let s=d.W3(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.Q3(t))return i.B3();throw new Error("invalid layout")}J3(){return d.W3().V3().map(t=>t.B3())}Y3(t){let s=d.W3(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.Q3(t)))throw new Error("invalid layout");s.H3()||s.q3(i)}get keyboard(){const t=d.Z3().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get X3(){const t=d.Z3().X3;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get K3(){const t=d.Z3().K3;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get t4(){const t=d.Z3().t4;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}s4(t,s){f.Te(t),f.Te(s),d.i4(t,s)}e4(t){f.ye(t);const s=d.h4(t);return s?s.r4():null}n4(t,e){f.Je(e);const h=d.o4();for(const s of t){const i=d.a4(s),r=i.u4();p.push([r.l4().cO(),r.c4()]),m.push(i)}if(0!==p.length){p.sort(l),m.sort((t,s)=>e(t.r4(),s.r4()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.f4(p[t][0]),a=p[t][1],u=o.d4();u[a]!==n&&((u[a]=n).u4().m4(o,!0),o.g4(n),i=!0)}i&&d.y4(),c.Ln(p),c.Ln(m)}}async M4(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.w4("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.w4("runtime","alert",{message:t+(d.GO()?" [via Web Worker]":"")})}S4(t){return f.ye(t),d.T4(t)}b4(t){d.x4(t)}}}{let s=self.Rs,n=null;self.v4=class{constructor(t){n=t,Object.defineProperties(this,{C4:{value:n.G4("audio/webm; codecs=opus"),writable:!1}})}I4(t){const s=self.D4._4(t);if(!s)throw new Error("invalid IImageInfo");s.N4(n.E4())}A4(t){return n.mo(t)}L4(t){return n.yo(t)}O4(t){return n.Mo(t)}R4(t){return n.wo(t)}P4(t){return n.F4(t)}j4(t){return"flat"===n.z4()&&s.fo(t)&&(t=t.toLowerCase()),n.B4(t)}get U4(){return n.W4()}async Q4(t,s){if(this.C4)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.E4().J4(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}V4(...t){return n.Y4(...t)}H4(t){return n.q4(t)}Z4(t){return n.X4(t)}}}{let n=self.Rs,i=self.Js,o=null;self.K4=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.E4(),writable:!1}})}tR(t,s){const i=o.E4(),e=i.a4(t),h=i.a4(s);return o.sR(e,h)}iR(t,s){const i=o.E4(),e=i.a4(t);for(const h of s){const r=i.a4(h);if(o.sR(e,r))return h}return null}eR(t){const s=o.E4().a4(t),i=o.hR(s);return i?i.r4():null}rR(t,s){if(i.ye(t),i.ye(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.nR(t,s)}oR(){return o.aR()}uR(t,s){let i=o.E4(),e;e=Array.isArray(t)?t.map(t=>i.lR(t)):[i.lR(t)];const h=n.Rect.mu(s),r=[];return o.cR(null,e,h,r),r.map(t=>t.r4())}}}{let s=self.Rs,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.RO=class{constructor(t){i=t,Object.defineProperties(this,{fR:{value:s.ri.gi,writable:!1},dR:{value:e.get(s.ri.ni)||"unknown",writable:!1},pR:{value:s.ri.oi,writable:!1},mR:{value:h.get(s.ri.ai)||"unknown",writable:!1},gR:{value:s.ri.li,writable:!1},yR:{value:r.get(s.ri.fi)||"unknown",writable:!1}})}get exportType(){let t=i.MR();return i.wR()?t="nwjs":i.SR()?t="windows-webview2":"cordova"===t?t="Android"===s.ri.ni?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.bR().TR()}get xR(){return i.bR().vR()}get CR(){return i.bR().GR()}get IR(){return i.bR()._R()}get DR(){return i.bR().NR()}get ER(){return i.bR().AR()}get devicePixelRatio(){return i.LR()}}}{const ce=self.Js;self.CO=class{constructor(t){this.OR=t.RR()}getItem(t){return ce.Te(t),this.OR.getItem(t)}setItem(t,s){return ce.Te(t),this.OR.setItem(t,s)}removeItem(t){return ce.Te(t),this.OR.removeItem(t)}clear(){return this.OR.clear()}keys(){return this.OR.keys()}}}{const fe=self.Rs,de=fe.Ps();self.PR=class{#kR;constructor(){const t=fe.jR.FR(de);this.#kR=t,Object.defineProperties(this,{runtime:{value:t.E4().zR(),writable:!1},BR:{value:t.UR(),writable:!1},WR:{value:t.QR(),writable:!1},JR:{value:t.VR(),writable:!1},YR:{value:t.HR(),writable:!1},qR:{value:t.ZR(),writable:!1},KR:{value:t.$R(),writable:!1},tP:{value:t.sP(),writable:!1},iP:{value:t.eP(),writable:!1}})}static hP(t){if(!t)return null;const s=fe.jR.rP(t);return s?s.nP():null}oP(){return this.#kR.uP().aP()}lP(){return this.#kR.cP().r4()}}}{const pe=self.Rs,me=self.Js,ge=pe.Ps();self.fP=class{#kR;constructor(){const t=pe.jR.FR(ge);this.#kR=t,Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},runtime:{value:t.E4().zR(),writable:!1},dP:{value:t.pP().nP(),writable:!1}}),t.E4().mP(this,t)}addEventListener(t,s){me.Te(t),me.Je(s),this.#kR.FO().addEventListener(t,s)}removeEventListener(t,s){me.Te(t),me.Je(s),this.#kR.FO().removeEventListener(t,s)}gP(){return[...this.instances()]}yP(){return pe.first(this.instances())}MP(){return[...this.wP()]}SP(){return pe.first(this.wP())}TP(t){const s=this.#kR,i=s.E4().bP(t),e=s.xP(i);return e?e.r4():null}*instances(){for(const t of this.#kR.vP())yield t.r4()}*wP(){for(const t of this.#kR.GP().CP())yield t.r4()}IP(t){me.Je(t);const s=this.#kR;if(0<s._P())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.DP(t)}Li(t,s,i,e,h){if(me.fe(s),me.fe(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#kR,n=r.E4(),o=n.z3().l4(t);if(!o)throw new Error("invalid layer");const a=n.NP(r,o,s,i,e,h),u=(e&&o.EP(a),n.UO());return u.AP(!0),a.LP(),u.AP(!1),u.OP()||n.W3().RP()||n.PP(),a.r4()}}}{const ye=self.Js,u=new WeakMap,Me=["above","below","top-sublayer","bottom-sublayer"];self.kP=class{constructor(t){u.set(this,t);const s=[],i=t.FP(),e=i.jP().length;for(let t=0;t<e;++t)s.push(new self.zP(i,t));Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},index:{value:t.cO(),writable:!1},BP:{value:s,writable:!1}})}addEventListener(t,s){ye.Te(t),ye.Je(s),u.get(this).FO().addEventListener(t,s)}removeEventListener(t,s){ye.Te(t),ye.Je(s),u.get(this).FO().removeEventListener(t,s)}get width(){return u.get(this).im()}set width(t){ye.ye(t),u.get(this).lm(t)}get height(){return u.get(this).pm()}set height(t){ye.ye(t),u.get(this).hm(t)}UP(t,s){ye.ye(t),ye.ye(s);const i=u.get(this);i.lm(t),i.hm(s)}getSize(){const t=u.get(this);return[t.im(),t.pm()]}set scale(t){ye.ye(t),u.get(this).WP(t)}get scale(){return u.get(this).QP()}set angle(t){ye.ye(t),u.get(this).JP(t)}get angle(){return u.get(this).VP()}set scrollX(t){ye.fe(t),u.get(this).YP(t)}get scrollX(){return u.get(this).HP()}set scrollY(t){ye.fe(t),u.get(this).qP(t)}get scrollY(){return u.get(this).ZP()}scrollTo(t,s){ye.fe(t),ye.fe(s);const i=u.get(this);i.YP(t),i.qP(s)}XP(){const t=u.get(this);return[t.HP(),t.ZP()]}KP(t){let s=u.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.l4(t))?i.$P():null}sk(){return u.get(this).ik().map(t=>t.$P())}*ek(){for(const t of u.get(this).ek())yield t.$P()}hk(t,s,i){const e=u.get(this),h=self.rk,r=(ye.Te(t),ye.$e(s,h),s?e.E4().nk(s):null),n=Me.indexOf(i);if(n<0)throw new Error("invalid location");e.ak(t,r,n)}uk(t,s,i){const e=u.get(this),h=e.E4(),r=self.rk,n=(ye.Ke(t,r),h.nk(t));if(!n)throw new Error("invalid layer");ye.$e(s,r);const o=s?h.nk(s):null,a=Me.indexOf(i);if(a<0)throw new Error("invalid location");e.lk(n,o,a)}ck(t){const s=u.get(this),i=self.rk,e=(ye.Ke(t,i),s.E4().nk(t));if(!e)throw new Error("invalid layer");const h=e.E4();s.fk(e),h.UO().OP()||h.PP()}dk(){const t=u.get(this),s=t.E4();t.pk(),s.UO().OP()||s.PP()}mk(t,s){ye.ye(t),ye.ye(s),u.get(this).gk(t,s)}yk(){return u.get(this).Mk()}set X(t){ye.Te(t);const s=u.get(this);if("perspective"===t)s.wk();else{if("orthographic"!==t)throw new Error("invalid projection");s.Sk()}}get X(){return u.get(this).Tk()?"orthographic":"perspective"}}}{const we=self.Rs,f=self.Js,d=new WeakMap,Se=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Te=new Map([...Se.entries()].map(t=>[t[1],t[0]])),be=we.ir(we.ko);self.rk=class{constructor(t){d.set(this,t);const s=[],i=t.FP(),e=i.jP().length;for(let t=0;t<e;++t)s.push(new self.zP(i,t));Object.defineProperties(this,{name:{value:t.Jc(),writable:!1},layout:{value:t.Q3().B3(),writable:!1},BP:{value:s,writable:!1}}),t.E4().mP(this,t)}get bk(){const t=d.get(this).xk();return t?t.$P():null}*vk(){for(const t of d.get(this).vk())yield t.$P()}*Ck(){for(const t of d.get(this).Gk())yield t.$P()}*Ik(){for(const t of d.get(this).Gk())for(const s of t._k())yield s.$P()}get index(){return d.get(this).cO()}get isVisible(){return d.get(this).Dk()}set isVisible(t){d.get(this).Nk(t)}get Ek(){return d.get(this).Ak()}get isInteractive(){return d.get(this).Lk()}set isInteractive(t){d.get(this).Ok(t)}get Rk(){return d.get(this).Pk()}set Rk(t){d.get(this).kk(!!t)}get Fk(){return d.get(this).jk()}get opacity(){return d.get(this).wN()}set opacity(t){t=we.lr(+t,0,1),isNaN(t)||d.get(this).TN(t)}set scale(t){f.ye(t),d.get(this).zk(t)}get scale(){return d.get(this).Bk()}set scaleRate(t){f.ye(t),d.get(this).Uk(t)}get scaleRate(){return d.get(this).Wk()}set angle(t){f.ye(t),d.get(this).JP(t)}get angle(){return d.get(this).Qk()}set parallaxX(t){f.ye(t),d.get(this).Jk(t)}get parallaxX(){return d.get(this).Vk()}set parallaxY(t){f.ye(t),d.get(this).Yk(t)}get parallaxY(){return d.get(this).Hk()}set qk(t){f.ye(t),d.get(this).lT(t)}get qk(){return d.get(this).uT()}set Zk(t){d.get(this).Xk(t)}get Zk(){return d.get(this).Kk()}set $k(t){d.get(this).tF(t)}get $k(){return d.get(this).sF()}set lL(t){f.Te(t);const s=Se.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");d.get(this).YS(s)}get lL(){return Te.get(d.get(this).iF())}set backgroundColor(t){if(f.ke(t),t.length<3)throw new Error("expected 3 elements");be.Wo(t[0],t[1],t[2]);const s=d.get(this),i=s.eF();i.na(be)||(i.Zo(be),s.E4().y4())}get backgroundColor(){const t=d.get(this).eF();return[t.Xo(),t.Ko(),t.$o()]}set scrollX(t){f.fe(t);const s=d.get(this);s.hF(!0),s.YP(t)}get scrollX(){return d.get(this).HP()}set scrollY(t){f.fe(t);const s=d.get(this);s.hF(!0),s.qP(t)}get scrollY(){return d.get(this).ZP()}scrollTo(t,s){f.fe(t),f.fe(s);const i=d.get(this);i.hF(!0),i.YP(t),i.qP(s)}XP(){const t=d.get(this);return[t.HP(),t.ZP()]}rF(){d.get(this).hF(!1)}getViewport(){return d.get(this).nF().Tu()}oF(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),h=e.E4();return e.aF(t-h.uF(),s-h.lF(),i)}cF(t,s,i=0){f.fe(t),f.fe(s),f.fe(i);const e=d.get(this),h=e.E4(),[r,n]=e.fF(t,s,i);return[r+h.uF(),n+h.lF()]}dF(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).pF(t,s,i)}mF(t,s,i=0){return f.fe(t),f.fe(s),f.fe(i),d.get(this).gF(t,s,i)}get yF(){return d.get(this).MF()}}}{let e=function(t){let s=Ce.get(t);return s||(s=xe.ir(xe.Event.Rf),Ce.set(t,s)),s};e;const xe=self.Rs,ve=self.Js,Ce=new WeakMap,Ge=xe.Ps();self.wF=class{#kR;constructor(){const t=xe.jR.FR(Ge),s={runtime:{value:(this.#kR=t).E4().zR(),writable:!1},SF:{value:t.TF().aP(),writable:!1},dP:{value:t.pP().nP(),writable:!1}};t.bF(s),t.xF(s),Object.defineProperties(this,s),t.E4().mP(this,t)}static vF(){return xe.jR.CF()}GF(){const t=Ce.get(this);t&&(t.er(),Ce.delete(this))}addEventListener(t,s,i){ve.Te(t),ve.Je(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ve.Te(t),ve.Je(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}IF(){const t=this.#kR,s=t.E4();s._F(t),s.UO().OP()||s.W3().RP()||s.UO().DF()||s.PP()}NF(){const t=this.#kR.EF();return t?t.map(t=>t.r4()):[]}*AF(){const t=this.#kR;if(t.LF())for(const s of t.OF())yield s.r4()}get uid(){return this.#kR.RF()}get PF(){return this.#kR.kF()}set w3(t){ve.ye(t),this.#kR.T3(t)}get w3(){return this.#kR.FF()}jF(){this.#kR.zF()}get u3(){const t=this.#kR;return t.E4().l3(t)}BF(...t){ve.ke(t);const s=new Set(t),i=this.#kR.UF();return s.oe(i)}WF(t){ve.Ke(t,Set),this.#kR.QF(t)}JF(){return new Set(this.#kR.UF())}signal(t){ve.Te(t);const s=this.#kR;s.E4().UO().VF(s,t)}r3(t){ve.Te(t);const s=this.#kR;return s.E4().UO().YF(s,t)}}}{const Ie=self.Rs,_e=self.Js,De=Ie.Ps();self.HF=class extends self.wF{#kR;#qF=!1;#ZF=null;#XF=!1;#KF=null;#$F;#tj;constructor(t){super(),this.#kR=Ie.jR.FR(De),this.#qF=!1,this.#ZF=null,this.#XF=!1,this.#KF=null,this.#$F=t?.domComponentId,this.#tj=t?.wrapperComponentId}GF(){this.sj(!1),this.ij(!1),super.GF()}ej(){return Ie.jR.hj()}rj(t){const s=this.#kR;s.E4().nj(t,s)}oj(t){const s=this.#kR;return s.E4().aj(t,s)}uj(t,s){if(_e.Te(t),_e.Je(s),!this.#$F)throw new Error("no DOM component id set");const i=this.#kR.E4();i.lj(this.#$F,t,s)}cj(t){_e.ke(t);for(const[s,i]of t)this.uj(s,i)}fj(t,s){if(_e.Te(t),!this.#$F)throw new Error("no DOM component id set");const i=this.#kR.E4();i.ef(this.#$F,t,s)}dj(t,s){if(_e.Te(t),!this.#$F)throw new Error("no DOM component id set");const i=this.#kR.E4();return i.w4(this.#$F,t,s)}pj(t,s){const i=this.#kR.E4();if(!i.GO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#$F,handler:t,data:s,responseId:null});this.fj(t,s)}sj(t){if(this.#qF!==(t=!!t)){this.#qF=t;const s=this.#kR.E4();t?(this.#ZF||(this.#ZF=()=>this.mj()),s.Rf().addEventListener("tick",this.#ZF)):s.Rf().removeEventListener("tick",this.#ZF)}}gj(){return this.#qF}mj(){}ij(t){if(this.#XF!==(t=!!t)){this.#XF=t;const s=this.#kR.E4();t?(this.#KF||(this.#KF=()=>this.yj()),s.Rf().addEventListener("tick2",this.#KF)):s.Rf().removeEventListener("tick2",this.#KF)}}Mj(){return this.#XF}yj(){}wj(){return[]}Sj(){return null}Tj(t){}bj(){if(!this.#tj)throw new Error("no wrapper component id set");const t=this.#kR.E4();return t.xj(this.#tj)}vj(t,s){if(_e.Te(t),_e.Je(s),!this.#tj)throw new Error("no wrapper component id set");const i=this.#kR.E4();i.Cj(this.#tj,t,s)}Gj(t){_e.ke(t);for(const[s,i]of t)this.vj(s,i)}Ij(t,s){if(!this.#tj)throw new Error("no wrapper component id set");this.runtime.PO._j(this.#tj,t,s)}Dj(t,s){if(this.#tj)return this.runtime.PO.Nj(this.#tj,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#Ej;#Aj;constructor(t){super(t);const s=Ne.jR.FR(Oe),i=s.u4(),e=(this.#Ej=s,this.#Aj=i,Le.set(this,s),[]),h=i.Lj();if(h){const n=i.TF().FP().jP().length;for(let t=0;t<n;++t)e.push(new self.zP(h,t))}const r={BP:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#Aj.Q3().B3()}get Oj(){return this.#Aj.l4().$P()}get x(){return this.#Aj.hT()}set x(t){t=+t;const s=this.#Aj;isNaN(t)||s.hT()===t||(s.rT(t),s.Rj())}get y(){return this.#Aj.oT()}set y(t){t=+t;const s=this.#Aj;isNaN(t)||s.oT()===t||(s.aT(t),s.Rj())}setPosition(t,s){t=+t,s=+s;const i=this.#Aj;isNaN(t)||isNaN(s)||i.hT()===t&&i.oT()===s||(i.Pj(t,s),i.Rj())}kj(){const t=this.#Aj;return[t.hT(),t.oT()]}Fj(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#Aj;i.jj(t,s),i.Rj()}}get qk(){return this.#Aj.uT()}set qk(t){t=+t;const s=this.#Ej,i=this.#Aj;isNaN(t)||i.uT()===t||(i.lT(t),s.E4().y4())}get zj(){return this.#Aj.Bj()}get width(){return this.#Aj.im()}set width(t){t=+t;const s=this.#Aj;isNaN(t)||s.im()===t||(s.lm(t),s.Rj())}get height(){return this.#Aj.pm()}set height(t){t=+t;const s=this.#Aj;isNaN(t)||s.pm()===t||(s.hm(t),s.Rj())}UP(t,s){t=+t,s=+s;const i=this.#Aj;isNaN(t)||isNaN(s)||i.im()===t&&i.pm()===s||(i.WI(t,s),i.Rj())}getSize(){const t=this.#Aj;return[t.im(),t.pm()]}get angle(){return this.#Aj.VP()}set angle(t){t=Ne.cr(+t);const s=this.#Aj;isNaN(t)||s.VP()===t||(s.JP(t),s.Rj())}get Uj(){return Ne.pr(this.angle)}set Uj(t){this.angle=Ne.dr(t)}yl(){return this.#Aj.Wj().Tu()}Qj(){return this.#Aj.Jj().cl()}Vj(){return this.#Aj.Yj()}get isVisible(){return this.#Aj.Ak()}set isVisible(t){t=!!t;const s=this.#Ej,i=this.#Aj;i.Ak()!==t&&(i.Nk(t),s.E4().y4())}get opacity(){return this.#Aj.wN()}set opacity(t){t=Ne.lr(+t,0,1);const s=this.#Ej,i=this.#Aj;isNaN(t)||i.wN()===t||(i.TN(t),s.E4().y4())}set Hj(t){if(Ee.ke(t),t.length<3)throw new Error("expected 3 elements");ke.Wo(t[0],t[1],t[2]);const s=this.#Ej,i=this.#Aj;i.qj().na(ke)||(i.Zj(ke),s.E4().y4())}get Hj(){const t=this.#Aj.qj();return[t.Xo(),t.Ko(),t.$o()]}set lL(t){Ee.Te(t);const s=Re.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#Ej,e=this.#Aj;e.YS(s),i.E4().y4()}get lL(){return Pe.get(this.#Aj.iF())}Xj(){this.#Aj.Kj()}$j(){this.#Aj.t5()}s5(t){Ee.Ke(t,Ae);const s=this.#Ej,i=s.E4().nk(t);if(!i)throw new Error("invalid layer");s.u4().i5(i)}e5(t,s){Ee.Ke(t,h),this.#Aj.h5(Le.get(t),s)}get zIndex(){return this.#Aj.c4()}get r5(){return this.#Aj.n5()}set r5(t){this.#Aj.o5(!!t)}Wu(t,s){return Ee.fe(t),Ee.fe(s),this.#Aj.a5(+t,+s)}tR(t){Ee.Ke(t,h);const s=this.#Ej,i=Le.get(t);return s.E4().MO().sR(s,i)}eR(){const t=this.#Ej,s=t.E4().MO().hR(t);return s?s.r4():null}getParent(){const t=this.#Ej.u5();return t?t.r4():null}l5(){const t=this.#Ej.c5();return t?t.r4():null}*f5(){for(const t of this.#Ej.f5())yield t.r4()}d5(){return this.#Ej.p5()}m5(t){const s=this.#Ej.g5(t);return s?s.r4():null}*children(){for(const t of this.#Ej.children())yield t.r4()}*y5(){for(const t of this.#Ej.y5())yield t.r4()}M5(t,s){Ee.Ke(t,h),Ee.Ne(s),s=s||{};const i=this.#Ej,e=Le.get(t);i.w5(e,s)}removeChild(t){Ee.Ke(t,h);const s=this.#Ej,i=Le.get(t);s.S5(i)}T5(){const t=this.#Ej;if(t.b5()){const s=t.u5();s.S5(t)}}x5(){const t=this.#Aj;return{v5:t.C5(),G5:t.I5(),_5:t.D5(),N5:t.E5(),A5:t.L5(),O5:t.R5(),P5:t.k5(),F5:t.j5(),z5:t.B5()}}U5(t,s){Ee.ye(t),Ee.ye(s),this.#Aj.W5(t,s)}Q5(){const t=this.#Aj;t.J5(),t.Rj()}V5(t,s,i){Ee.ye(t),Ee.ye(s),Ee.De(i);const e=this.#Aj;e.Y5(t,s,i)&&e.Rj()}H5(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#Aj;if(o.q5()){const a=o.Z5(),u=a.QT(t,s);null!==u&&(i=u.hT(),e=u.oT(),h=u.uT(),r=u.cT(),n=u.dT())}return{x:i,y:e,qk:h,u:r,v:n}}X5(){const t=this.#Aj;if(!t.q5())return[0,0];const s=t.Z5();return[s.LT(),s.OT()]}}};0;const Ne=self.Rs,Ee=self.Js,Ae=self.rk,Le=new WeakMap,Oe=Ne.Ps(),Re=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Pe=new Map([...Re.entries()].map(t=>[t[1],t[0]])),ke=Ne.ir(Ne.ko);self.K5=t(self.wF),self.sz=t(self.HF)}{const Fe=self.Js;self.iz=class extends self.K5{#kR;constructor(){super(),this.#kR=self.wF.vF()}ez(){return this.#kR.rz().hz()}focus(){this.#kR.rz().nz()}blur(){this.#kR.rz().oz()}az(t,s){Fe.Te(t),this.#kR.rz().uz(t,s)}}}{let e=function(t){let s=Be.get(t);return s||(s=je.ir(je.Event.Rf),Be.set(t,s)),s};e;const je=self.Rs,ze=self.Js,Be=new WeakMap,Ue=je.Ps();self.lz=class{#kR;constructor(){const t=je.jR.FR(Ue),s={runtime:{value:(this.#kR=t).E4().zR(),writable:!1},behavior:{value:t.fz().cz(),writable:!1},pz:{value:t.gz().mz(),writable:!1}};Object.defineProperties(this,s),t.E4().mP(this,t)}static vF(){return je.jR.CF()}get yz(){return this.#kR.Mz().r4()}GF(){const t=Be.get(this);t&&(t.er(),Be.delete(this))}addEventListener(t,s,i){ze.Te(t),ze.Je(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){ze.Te(t),ze.Je(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const We=self.Rs,Qe=We.Ps();self.wz=class{constructor(){const t=We.jR.FR(Qe),s={runtime:{value:t.E4().zR(),writable:!1},behavior:{value:t.fz().cz(),writable:!1},name:{value:t.Jc(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Rs,Ve=Je.Ps();self.Sz=class{#kR;constructor(){const t=Je.jR.FR(Ve),s={runtime:{value:(this.#kR=t).E4().zR(),writable:!1}};Object.defineProperties(this,s)}gP(){return this.#kR.CP().map(t=>t.r4())}static hP(t){if(!t)return null;const s=Je.jR.Tz(t);return s?s.cz():null}}}{const Ye=self.Rs,He=self.Js,qe=Ye.ir(Ye.ko);self.zP=class{#kR;constructor(t,s){this.#kR=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#kR.jP();return t[this.index].Jc()}get isActive(){return this.#kR.bz(this.index)}set isActive(t){t=!!t;const s=this.#kR;s.bz(this.index)!==t&&(s.xz(this.index,t),s.vz(),s.E4().y4())}setParameter(t,s){He.ye(t),t=Math.floor(+t);const i=this.#kR,e=i.Cz(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Ye.ko){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");qe.Wo(s[0],s[1],s[2]),s=qe}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.Gz(this.index,t,s);h&&i.bz(this.index)&&i.E4().y4()}getParameter(t){He.ye(t),t=Math.floor(+t);const s=this.#kR,i=s.Cz(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Ye.ko?[i.Xo(),i.Ko(),i.$o()]:i}}}self.Iz=class{#kR;constructor(t){this.#kR=t,Object.defineProperties(this,{name:{value:t.Jc(),writable:!1}})}get speed(){return this.#kR._z()}get Dz(){return this.#kR.Nz()}get repeatCount(){return this.#kR.Ez()}get Az(){return this.#kR.Lz()}get Oz(){return this.#kR.Rz()}get frameCount(){return this.#kR.Pz()}kz(){return this.#kR.Fz().map(t=>t.jz())}*frames(){for(const t of this.#kR.Fz())yield t.jz()}};self.D4=class{#kR;constructor(t){this.#kR=t}static _4(t){return t.#kR}get width(){return this.#kR.im()}get height(){return this.#kR.pm()}getSize(){const t=this.#kR;return[t.im(),t.pm()]}zz(t){return t.Bz(this)}Uz(){return this.#kR.S_().Tu()}};{const Ze=self.Js;self.Wz=class extends self.D4{#kR;constructor(t){super(t.Qz()),this.#kR=t,Object.defineProperties(this,{duration:{value:t.Jz(),writable:!1},Vz:{value:t.Yz(),writable:!1},qz:{value:t.Zz(),writable:!1}})}Xz(){const t=this.#kR;return[t.Yz(),t.Zz()]}Kz(){return this.#kR.$z()}tB(t){return this.sB(t)[0]}iB(t){return this.sB(t)[1]}sB(t){let s=this.#kR,i=null;if("number"==typeof t)i=s.eB(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.hB(t)}return i?[i.hT(),i.oT()]:this.Xz()}rB(){const t=this.#kR.nB();return t?t.Ll():0}oB(t){return this.aB(t)[0]}uB(t){return this.aB(t)[1]}aB(t){Ze.ye(t),t=Math.floor(t);const s=this.#kR.nB();if(!s||t<0||t>=s.Ll())return[0,0];const i=s.Al(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#kR.lB()}}}{let s=function(t){const s=Ke.get(t);if(s.cB())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Xe=self.Js,Ke=new WeakMap;self.fB=class{constructor(t){Ke.set(this,t),t.E4().mP(this,t)}pause(){s(this).dB()}resume(){s(this).pB()}stop(){s(this).i0()}BF(t){return s(this).mB(t)}set time(t){Xe.ye(t),s(this).gB(t)}get time(){return s(this).HE()}set totalTime(t){Xe.ye(t),s(this).yB(t)}get totalTime(){return s(this).MB()}set Dz(t){s(this).wB(!!t)}get Dz(){return s(this).SB()}set Oz(t){s(this).TB(!!t)}get Oz(){return s(this).bB()}set playbackRate(t){Xe.ye(t),s(this).xB(t)}get playbackRate(){return s(this).vB()}get progress(){const t=s(this);return t.HE()/t.MB()}get tags(){return s(this).CB()}get finished(){return s(this).GB()}get isPlaying(){return s(this).IsPlaying()}get IB(){return s(this)._B()}get DB(){return Ke.get(this).cB()}}}{let i=new WeakMap;self.NB=class extends self.fB{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Jc(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.cB())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Js),h=new WeakMap,r=new WeakMap,n=null;self.EB=class extends self.fB{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}AB(t){e.Te(t);const s=self.oc.Ic(n(t));i(this).LB(s)}get yz(){const t=i(this).OB();return t?t.r4():null}get RB(){return i(this).PB()}set RB(t){i(this).kB(!!t)}get value(){const t=i(this);if("value"!==t.jB())throw new Error("not a value tween");return t.BB("value").zB()}}}self.UB=class extends self.PR{constructor(){super()}};{const $e=self.Rs,th=self.Js,sh=$e.Ps();self.WB=class extends self.UB{#kR;#$F;#QB=0;#JB=new Map;constructor(t){if(super(),this.#kR=$e.jR.FR(sh),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#$F=t.domComponentId,this.VB("elem-focused",t=>t.YB()),this.VB("elem-blurred",t=>{t&&t.HB()})}qB(t){const s=this.#QB++;return this.#JB.set(s,t),s}ZB(t){this.#JB.delete(t)}VB(t,i){const s=this.#kR.E4();s.lj(this.#$F,t,t=>{const s=this.#JB.get(t.elementId);i(s,t)})}XB(t){th.ke(t);for(const[s,i]of t)this.XB(s,i)}}}{const ih=self.Rs,eh=(new WeakMap,ih.Ps());self.KB=class extends self.fP{#kR;constructor(){super(),this.#kR=ih.jR.FR(eh)}$B(){}tU(){return this.#kR.Qz().sU()}iU(t){}eU(t){}hU(){}rU(t){}}}{const hh=self.Rs,rh=(new WeakMap,hh.Ps());self.nU=class extends self.sz{#kR;#oU=null;#aU=null;constructor(t){super(t),this.#kR=hh.jR.FR(rh)}GF(){if(super.GF(),this.#oU){const t=this.#kR.E4().Rf();t.removeEventListener("renderercontextlost",this.#oU),t.removeEventListener("renderercontextrestored",this.#aU),this.#oU=null,this.#aU=null}}uU(){if(!this.#oU){this.#oU=()=>this.lU(),this.#aU=()=>this.cU();const t=this.#kR.E4().Rf();t.addEventListener("renderercontextlost",this.#oU),t.addEventListener("renderercontextrestored",this.#aU)}}lU(){}cU(){}fU(t){}}}{const nh=self.Rs,oh=nh.ir(nh.Rect),ah=new WeakMap,uh=nh.Ps();self.dU=class extends self.nU{#pU=-1;#mU=!0;#gU=!1;#yU=!1;#MU=-.2;#wU=nh.ir(nh.Rect,0,0,-1,-1);#SU=0;#TU=0;#bU=-1;#xU=-1;#vU=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=nh.jR.FR(uh),i=(ah.set(this,s),this.#pU=this.dP.qB(this),s.E4().bR());this.#SU=i.CU(),this.#TU=i.GU(),this.sj(!0)}GF(){super.GF(),this.dP.ZB(this.#pU),this.IU("destroy"),this.#pU=-1,ah.delete(this)}_U(){const t=ah.get(this).E4();if(t.GO())throw new Error("not valid in worker mode");return this.DU("get-element")}IU(t,s){(s=s||{}).elementId=this.#pU,this.fj(t,s)}DU(t,s){return(s=s||{}).elementId=this.#pU,this.pj(t,s)}NU(t,s){return(s=s||{}).elementId=this.#pU,this.dj(t,s)}EU(t){t=t||{};const s=ah.get(this).u4();t.elementId=this.#pU,t.isVisible=s.Ak(),t.htmlIndex=s.l4().AU(),t.htmlZIndex=s.LU(),Object.assign(t,this.OU()),this.#mU=!!t.isVisible,this.pj("create",t),this.RU(!0)}PU(t){this.#mU!==(t=!!t)&&(this.#mU=t,this.IU("set-visible",{isVisible:t}))}mj(){this.RU(!1)}kU(){const t=ah.get(this).E4(),s=t.bR().FU();return"Android"===nh.ri.ni&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}RU(l){const c=ah.get(this);if(!c.jU()){let t=c.u4(),s=t.l4(),i=t.Wj(),[e,h]=s.fF(i.yu(),i.Mu()),[r,n]=s.fF(i.wu(),i.Su()),o=c.E4().bR(),a=o.GR(),u=o._R();if(t.Ak()&&s.Ak())if(!this.kU()&&(r<=0||n<=0||a<=e||u<=h))this.PU(!1);else{oh.set(e,h,r,n);const f=o.CU(),d=o.GU(),p=s.AU(),m=t.LU();if(!l&&oh.equals(this.#wU)&&this.#SU===f&&this.#TU===d&&this.#bU===p&&this.#xU===m)this.PU(!0);else{this.#wU.G(oh),this.#SU=f,this.#TU=d,this.#bU=p,this.#xU=m,this.PU(!0);let t=null;this.#yU&&(t=s.zU()+this.#MU),this.IU("update-position",{left:Math.round(this.#wU.yu()),top:Math.round(this.#wU.Mu()),width:Math.round(this.#wU.width()),height:Math.round(this.#wU.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.PU(!1)}}BU(){this.DU("focus",{focus:!0})}UU(){this.DU("focus",{focus:!1})}YB(){this.#gU=!0}HB(){this.#gU=!1}WU(){return this.#gU}QU(t,s){this.postToDOMElement("set-css-style",{prop:nh.Oo(t),val:s})}JU(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}VU(t){this.postToDOMElement("remove-attribute",{name:t})}YU(){this.#vU||(this.#vU=!0,Promise.resolve().then(()=>{this.#vU=!1,this.IU("update-state",this.OU())}))}OU(){}HU(){return this.#pU}}}self.qU=class extends self.Sz{constructor(){super()}};self.ZU=class extends globalThis.wz{constructor(){super()}$B(){}};{const lh=self.Rs,ch=new WeakMap,fh=lh.Ps();self.XU=class extends self.lz{#qF=!1;#XF=!1;#KU=!1;constructor(){super(),ch.set(this,lh.jR.FR(fh))}GF(){super.GF(),this.sj(!1),this.ij(!1),this.$U(!1),ch.delete(this)}ej(){return lh.jR.hj()}t6(){}rj(t){const s=ch.get(this);s.E4().nj(t,s.Mz(),s.gz())}oj(t){const s=ch.get(this);return s.E4().aj(t,s.Mz(),s.gz())}sj(t){if(this.#qF!==(t=!!t)){this.#qF=t;const s=ch.get(this).E4();t?s.s6(this):s.i6(this)}}gj(){return this.#qF}mj(){}ij(t){if(this.#XF!==(t=!!t)){this.#XF=t;const s=ch.get(this).E4();t?s.e6(this):s.h6(this)}}Mj(){return this.#XF}yj(){}$U(t){if(this.#KU!==(t=!!t)){this.#KU=t;const s=ch.get(this).E4();t?s.r6(this):s.n6(this)}}o6(){return this.#KU}a6(){}wj(){return[]}Sj(){return null}Tj(t){}}}{let e=self.Js,h=null;self.kO=class{constructor(t){h=t}b4(t){h.x4(t)}_j(t,s,i){e.Te(t),e.Te(s),e.Fe(i),h.u6(t,s,i)}Nj(t,s,i){return e.Te(t),e.Te(s),e.Fe(i),h.l6(t,s,i)}c6(t){return e.xe(t),new self.f6(h,t)}set d6(t){h.p6(!!t)}get d6(){return h.m6()}g6(t){h.y6(!!t)}M6(t){e.fe(t);const s=h.w6(t);return s?s.aP():null}}}self.f6=class{#S6;#T6;#b6;#x6;#v6;#C6;constructor(t,s){const i=(this.#S6=t).UO(),e=t.HO(),h=(this.#T6=e,this.#b6=e.G6(),t.s3()),r=(this.#x6=h.I6(),this.#v6=h._6(e),i.D6()),n=r._6();this.#C6=n,s&&n.N6(s),t.E6(!1)}A6(){const t=this.#S6.UO(),s=this.#b6,i=this.#C6;t.L6(s),this.#T6.O6(this.#x6,this.#v6),t.R6(s),i.P6(i.cO()+1)}get k6(){return this.#C6.F6()}release(){const t=this.#S6,s=t.s3(),i=t.UO().D6();t.E6(!0),i.j6(),s.j6()}};{let d=self.Rs,h=self.Js,p=null,r=null;self.z6=class{constructor(t,s){r=t,p=s}B6(){p._N()}U6(t){p.GN(t)}W6(){p.OM()}Q6(){p._M()}J6(){p.BM()}setColor(t){p.SN(t[0],t[1],t[2],t[3])}V6(t,s,i,e){p.SN(t,s,i,e)}Y6(){p.bN()}H6(t){p.TN(t)}q6(t){p.cw(t)}Z6(){p.fw()}rect(t){p.EN(t.left,t.top,t.right,t.bottom)}X6(t,s,i,e){p.EN(t,s,i,e)}K6(t){p.Yu(d.Yu.fl(t))}tW(t,s,i,e,h,r,n,o){p.Xw(t,s,i,e,h,r,n,o)}sW(t,s){p.xw(d.Yu.fl(t),d.Rect.bu(s))}iW(t,s){p.ON(d.Yu.fl(t),d.Yu.fl(s))}eW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.RN(t,s,i,e,h,r,n,o,a,u,l,c,d.Rect.bu(f))}hW(t,s,i,e,h,r,n,o,a,u,l,c,f){p.Mw(t,s,i,e,h,r,n,o,a,u,l,c,d.Yu.fl(f))}rW(t,s,i){p.PN(t,s,i)}nW(t){p.Zw(t)}line(t,s,i,e){p.Sm(t,s,i,e)}oW(t,s,i,e,h,r){p.ww(t,s,i,e,h,r)}aW(t,s,i,e){p.Cw(t,s,i,e)}uW(t){p.Dw(d.Rect.bu(t))}lW(t){p.Nw(d.Yu.fl(t))}cW(t){p.Pw(t)}fW(){p.kw()}dW(t){p.Bw(t)}pW(){p.Jw()}mW(t){h.$e(t,self.gW);const s=t?r.nk(t):null;p.vN(s)}yW(t,s){const i=self.D4._4(t);if(i)return i.MW(p,{s2:s?.s2??"clamp-to-edge",i2:s?.i2??"clamp-to-edge",e2:s?.e2??"trilinear",o2:s?.o2??!0});throw new Error("invalid IImageInfo")}wW(t){const s=self.D4._4(t);if(!s)throw new Error("invalid IImageInfo");s.lI()}Bz(t){const s=self.D4._4(t);if(!s)throw new Error("invalid IImageInfo");const i=s.xb();return self.gW.SW(r,i)}TW(t,s,i){h.ye(t),h.ye(s);const e=p.fb(t,s,{s2:i?.s2??"clamp-to-edge",i2:i?.i2??"clamp-to-edge",e2:i?.e2??"trilinear",o2:i?.o2??!0});return self.gW.SW(r,e)}bW(t,s,i){h.Ke(s,self.gW);const e=r.nk(s);p.w_(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.Ke(t,self.gW);const s=r.nk(t);p.yb(s)}xW(){const t=p.fS();return new self.vW(r,t)}GW(){r.bR().IW(p)}_W(t){h.Ke(t,globalThis.rk);const s=r.nk(t);s.DW(p)}}}{const dh=new WeakMap,ph=new WeakMap;self.gW=class{constructor(t,s){dh.set(this,{runtime:t,NW:s}),ph.set(s,this),t.mP(this,s),Object.defineProperties(this,{width:{value:s.im(),writable:!1},height:{value:s.pm(),writable:!1}})}static SW(t,s){if(!s)return null;const i=ph.get(s);return i||new self.gW(t,s)}}}{let e=function(t){return gh.get(t).EW};e;const mh=self.Js,gh=new WeakMap;self.vW=class{constructor(t,s){gh.set(this,{runtime:t,EW:s}),t.mP(this,s)}release(){e(this).er()}set AW(t){mh.Te(t),e(this).MI(t)}get AW(){return e(this).SG()}set LW(t){mh.ye(t),e(this).wI(t)}get LW(){return e(this).SI()}set lineHeight(t){mh.ye(t),e(this).bI(t)}get lineHeight(){return e(this).xI()}set OW(t){e(this).vI(t)}get OW(){return e(this).CI()}set RW(t){e(this).GI(t)}get RW(){return e(this).II()}setColor(t){mh.ke(t),this.PW(t[0],t[1],t[2])}PW(t,s,i){e(this).AI(t,s,i)}kW(t){mh.Te(t),e(this).HS(t)}set FW(t){e(this).LI(t)}get FW(){return e(this).OI()}set verticalAlign(t){e(this).RI(t)}get verticalAlign(){return e(this).kI()}set jW(t){e(this).FI(t)}get jW(){return e(this).jI()}set zW(t){e(this).zI(t)}get zW(){return e(this).BI()}set text(t){mh.Te(t),e(this).hf(t)}get text(){return e(this).UI()}UP(t,s,i){mh.ye(t),mh.ye(s),mh.ye(i),e(this).WI(t,s,i)}zz(){const{runtime:t,EW:s}=gh.get(this),i=s.xb();return self.gW.SW(t,i)}Uz(){return e(this).S_().Tu()}BW(t){mh.Je(t),e(this).fI=t}UW(){e(this).lI()}get WW(){return e(this).JI()}get QW(){return e(this).YI()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Mh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const g=self.Rs,yh=new Set(["local","remote"]),Mh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);g.JW=class extends g.$h{constructor(t,s){super();const i=s.exportType,e=(this.$c=t,this.VW="folders",this.YW=new Map,this.HW="cordova"===i,this.qW=!!s.isiOSCordova,this.ZW=!!s.isFileProtocol,this.XW=s.swClientId,this.KW=s.supportedAudioFormats||{},this.$W=new Map,this.tQ=!1,this.sQ=s.scriptFolder,this.iQ="",this.eQ="",this.hQ="",this.rQ=s.fileMap||new Map,this.nQ=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.oQ=e?"remote":"local",this.aQ=new Map,this.uQ=[],this.lQ=[],this.cQ=!1,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=!1,this.gQ=g.ir(g.g1,()=>this.yQ(),50),this.MQ=g.ir(g.n1,Math.max(g.hardwareConcurrency,8)),this.wQ=g.ir(g.n1,20),this.SQ=new self.v4(this)}er(){for(const t of this.aQ.values())t.er();this.aQ.clear(),g.Ln(this.lQ),this.$c=null}E4(){return this.$c}TQ(t){this.VW=t}z4(){return this.VW}bQ(){return this.sQ}xQ(t){this.iQ=t}W4(){return this.iQ}vQ(t){this.eQ=t}CQ(){return this.eQ}GQ(t){this.hQ=t}IQ(){return this.hQ}_Q(){return this.ZW}Mo(t,s){return s=s||this.oQ,g.fo(t)?("flat"===this.VW&&(t=t.toLowerCase()),this.HW&&this.ZW?this.DQ(t):"playable-ad-single-file"===this.$c.MR()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.MQ:this.wQ).hc(()=>g.Mo(t))):g.Mo(t)}wo(t){return g.fo(t)?("flat"===this.VW&&(t=t.toLowerCase()),this.HW&&this.ZW?this.NQ(t):"playable-ad-single-file"===this.$c.MR()?g.To(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.oQ?this.MQ:this.wQ).hc(()=>g.wo(t))):g.wo(t)}mo(t){return g.fo(t)?("flat"===this.VW&&(t=t.toLowerCase()),this.HW&&this.ZW?this.EQ(t):"playable-ad-single-file"===this.$c.MR()?g.bo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.oQ?this.MQ:this.wQ).hc(()=>g.mo(t))):g.mo(t)}async yo(t){const s=await this.mo(t);return JSON.parse(s)}AQ(t,s){return"flat"===this.VW&&(t=t.toLowerCase()),this.$c.w4("runtime","cordova-fetch-local-file",{filename:t,as:s})}EQ(t){return this.AQ(t,"text")}async DQ(t){const s=await this.AQ(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async LQ(t){"flat"===this.VW&&(t=t.toLowerCase());let s=this.YW.get(t);if(!s){const i=await this.DQ(t);s=URL.createObjectURL(i),this.YW.set(t,s)}return s}NQ(t){return this.AQ(t,"buffer")}B4(t){"flat"===this.VW&&(t=t.toLowerCase());let s=this.iQ+t;return"Gecko"===g.ri.fi&&"preview"===this.$c.MR()?this.OQ(s):s}F4(t){return g.co(t)?Promise.resolve(t):this.HW&&this.ZW?this.LQ(t):"playable-ad-single-file"===this.$c.MR()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.VW&&(t=t.toLowerCase()),Promise.resolve(t))}RQ(s){if(g.co(s)||"preview"!==this.$c.MR()||!this.XW||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.XW),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}PQ(t){return this.F4(t)}kQ(t){if(t.FQ&&!yh.has(t.FQ))throw new Error("invalid load policy");let s=this.aQ.get(t.url);return s||(s=g.ir(g.jQ,this,{url:t.url,size:t.size||0,FQ:t.FQ||this.oQ}),this.aQ.set(s.zQ(),s),this.cQ)||(this.fQ+=s.Kl(),this.lQ.push(s.BQ().then(()=>this.UQ(s.Kl())))),s}WQ(t){this.aQ.delete(t.zQ())}async QQ(){try{await Promise.all(this.lQ),this.pQ=1}catch(t){console.error("Error loading: ",t),this.mQ=!0,this.yQ()}}JQ(){this.cQ=!0}VQ(){return this.mQ}UQ(t){this.dQ+=t,this.gQ.N1()}yQ(){const t=g.ir(g.Event,"loadingprogress");this.pQ=g.lr(this.dQ/this.fQ,0,1),t.progress=this.pQ,this.$c.Rf().dispatchEvent(t)}YQ(){return this.pQ}HQ(t){g.kn(this.uQ,t),this.uQ.length&&this.lQ.push(this.qQ())}async qQ(){const t=[],s=[];for(const[i,e,h]of this.uQ)this.fQ+=h,t.push(this.ZQ(i,e,s).then(()=>this.UQ(h)));await Promise.all(t),this.$c.GO()&&0<s.length&&await this.$c.w4("runtime","load-webfonts",{webfonts:s})}async ZQ(s,i,e){try{let t=await this.F4(i);"Gecko"===g.ri.fi&&(s=`'${s}'`),("Gecko"===g.ri.fi&&"preview"===this.$c.MR()||"playable-ad-single-file"===this.$c.MR())&&(t=this.OQ(t));const h=new FontFace(s,`url('${t}')`);(this.$c.GO()?self:document).fonts.add(h),await h.load(),this.$c.GO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}G4(t){return!!this.KW[t]}XQ(t,s){this.tQ=!!s;for(const[i,e,h]of t)this.$W.set(i,{fileName:i,KQ:e.map(t=>({type:t[0],$Q:t[1],tJ:i+t[1],fileSize:t[2]})),sJ:h})}iJ(t){"flat"===this.VW&&(t=t.toLowerCase());const s=this.$W.get(t);if(!s)return null;let i=null;for(const e of s.KQ)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.G4(e.type))return e;return i}eJ(t){const s=this.iJ(t);return s?{url:this.B4(s.tJ),type:s.type}:null}hJ(){if(this.tQ){const t=[];for(const s of this.$W.values())if(!s.sJ){const i=this.iJ(s.fileName);i&&t.push({rJ:s.fileName,url:this.B4(i.tJ),type:i.type,fileSize:i.fileSize})}return t}return[]}nJ(t){return"preview"===this.$c.MR()&&(t=new URL(t,location.href).toString()),this.rQ.get(t)||null}OQ(t){let s=this.nQ.get(t);if(!s){const i=this.nJ(t);if(!i)return t;s=URL.createObjectURL(i),this.nQ.set(t,s)}return s}pO(){return this.SQ}async Y4(...t){const s=await Promise.all(t.map(t=>this.F4(t)));if(this.$c.GO())if(1===t.length){const i=t[0];await import((g.fo(i)?"./":"")+i)}else{const e=t.map(t=>`import "${g.fo(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async q4(t){if(WebAssembly.compileStreaming){const s=await this.F4(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await g.wo(t);return WebAssembly.compile(i)}}async X4(t){const s=await this.F4(t);return this.$c.w4("runtime","add-stylesheet",{url:s})}}}{const wh=self.Rs;wh.oJ=class extends wh.$h{constructor(t,s){super(),this.aJ=t,this.$c=t.E4(),this.uJ=s.url||"",this.lJ=s.size,this.cJ=s.FQ,this.fJ=s.blob||null,this.dJ=!!this.fJ,this.Ag=null}er(){this.Ag=null,this.aJ=null,this.$c=null,this.fJ=null}zQ(){return this.uJ}Kl(){return this.lJ}BQ(){return"local"===this.cJ||this.fJ?(this.dJ=!0,Promise.resolve()):(this.Ag||(this.Ag=this.aJ.Mo(this.uJ,this.cJ).then(t=>(this.dJ=!0,this.Ag=null,this.fJ=t)).catch(t=>{console.error("Error loading resource: ",t),this.Ag=null})),this.Ag)}pJ(){return this.dJ}mJ(){return this.fJ?Promise.resolve(this.fJ):this.Ag||this.aJ.Mo(this.uJ,this.cJ)}}}{const Sh=self.Rs,ar=new Sh.n1,ur=new Set;Sh.jQ=class extends Sh.oJ{constructor(t,s){super(t,s),this.gJ=null,this.yJ=null,this.ud=0,this.MJ=-1,this.wJ=-1,ur.add(this)}er(){if(0!==this.ud)throw new Error("released image asset which still has texture references");this.aJ.WQ(this),this.gJ=null,ur.delete(this),super.er()}static SJ(){for(const t of ur)t.gJ=null,t.yJ=null,t.ud=0}MW(t,s){return s=s||{},this.ud++,this.yJ?Promise.resolve(this.yJ):(this.gJ||(s.h2=this.$c.bR().TJ(),this.gJ=this.bJ(t,s)),this.gJ)}async bJ(s,i){try{const e=await this.mJ();return 0===this.ud?this.gJ=null:await ar.hc(async()=>{const t=await s.oE(e,i);return this.gJ=null,0===this.ud?(s.yb(t),null):(this.yJ=t,this.MJ=t.im(),this.wJ=t.pm(),this.yJ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}lI(){if(this.ud<=0)throw new Error("texture released too many times");if(this.ud--,0===this.ud&&this.yJ){const t=this.yJ.IS();t.yb(this.yJ),this.yJ=null}}xJ(){return this.ud}xb(){return this.yJ}im(){return this.MJ}pm(){return this.wJ}async vJ(){const t=await this.mJ();return Sh.ki.ImageBitmap?createImageBitmap(t):Sh.vo(t)}}}{let t=function(t,s){return t.u4().CJ()-s.u4().CJ()};t;const lr=self.Rs;lr.GJ=class extends lr.$h{constructor(t,s,i){super(),this.IJ=t,this.Ha=s,this.qa=i,this._J=[],this.DJ=!0,this.NJ=new Set,this.EJ=!1}er(){lr.Ln(this._J),this.NJ.clear(),this.IJ=null}i0(){lr.Ln(this._J),this.DJ=!0,this.NJ.clear(),this.EJ=!1}AJ(){this.DJ=!1}ql(){if(this._J.length){if(this._J.length>this.NJ.size)return!1;this.LJ()}return!0}OJ(t){this.NJ.has(t)?(this.NJ.delete(t),0===this.NJ.size&&(this.EJ=!1)):(this._J.push(t),this.DJ=1===this._J.length)}p0(t){this.NJ.add(t),this.EJ=!0,50<=this.NJ.size&&this.LJ()}LJ(){this.EJ&&(this._J.length===this.NJ.size?this.i0():(lr.Un(this._J,this.NJ),this.NJ.clear(),this.EJ=!1))}RJ(){this.DJ||(this._J.sort(t),this.DJ=!0)}PJ(t){this.LJ(),this.RJ(),this._J.length&&t.push(this._J)}}}{const cr=self.Rs;cr.kJ=class extends cr.$h{constructor(t,s){super(),this.FJ=t,this.jJ=s,this.zJ=cr.ir(cr.Vl)}er(){this.zJ.er(),this.zJ=null}BJ(t,s,i){let e=this.zJ.$s(t,s);return e||(i?(e=cr.ir(cr.GJ,this,t,s),this.zJ.Set(t,s,e),e):null)}UJ(t){return Math.floor(t/this.FJ)}WJ(t){return Math.floor(t/this.jJ)}QJ(e,h,r){if(h)for(let i=h.yu(),t=h.wu();i<=t;++i)for(let t=h.Mu(),s=h.Su();t<=s;++t)if(!r||!r.Wu(i,t)){const n=this.BJ(i,t,!1);n&&(n.p0(e),n.ql())&&this.zJ.Zl(i,t)}if(r)for(let i=r.yu(),t=r.wu();i<=t;++i)for(let t=r.Mu(),s=r.Su();t<=s;++t)h&&h.Wu(i,t)||this.BJ(i,t,!0).OJ(e)}JJ(t,s){let i=this.UJ(t.yu()),e=this.WJ(t.Mu()),h=this.UJ(t.wu()),r=this.WJ(t.Su());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.BJ(i,t,!1);n&&n.PJ(s)}}VJ(t){let s=t.yu(),i=t.Mu(),e=t.wu(),h=t.Su();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.BJ(s,t,!1);r&&r.AJ()}}}}{let n=function(t,s){return t.u4().CJ()-s.u4().CJ()},t=function(t,s){return t.u4().uT()-s.u4().uT()};n,t;const w=self.Rs,fr=new w.Rect,dr=new w.Yu,pr=[],mr=(new w.Rect,new w.Rect,self.Ms),vh=mr.Gs,Uh=mr.Is,xh=mr.bs,gr=xh.create(),yr=vh.create(),Mr=Uh.create(),wr=vh.create(),Sr=vh.create(),Tr=vh.create(),br=w.ir(w.Ya),xr=(w.ir(w.Rect),[]),vr=[],Cr=[],Gr={name:"",sid:-1,YJ:!1,isVisible:!0,isInteractive:!0,Rk:!1,backgroundColor:[1,1,1,1],Zk:!0,HJ:[1,1],opacity:1,$k:!1,qJ:!1,ZJ:!1,XJ:!1,scaleRate:1,lL:0,qk:0,KJ:[],$J:[],t8:[]};w.s8=class extends w.$h{constructor(t,s,i){super(),i=Object.assign({},Gr,i),this.i8=t,this.$c=t.E4(),this.e8=s,this.nr=i.name,this.Ug=-1,this.h8=!!i.Rk,this.r8=-1,this.n8=i.sid,this.o8=!!i.YJ,this.a8=!!i.isVisible,this.u8=!!i.isInteractive,this.l8=w.ir(w.ko),this.l8.Pa(i.backgroundColor),this.c8=!!i.Zk,this.f8=i.HJ[0],this.d8=i.HJ[1],this.QS=w.ir(w.ko,1,1,1,i.opacity),this.p8=w.ir(w.ko),this.m8=!!i.$k,this.g8=!!i.qJ,this.y8=!!i.ZJ,this.M8=!!i.XJ,this.w8=i.scaleRate,this.WS=i.lL,this.S8=null,this.T8=1,this.JS=i.qk,this.b8=0,this.x8=0,this.v8=0,this.C8=!1,this.nD=w.ir(w.Rect),this.G8=w.ir(w.Rect),this.I8=w.ir(w.Rect),this._8=!0,this.nb=xh.create(),this.D8=!0,this.ZA=xh.create(),this.N8=!0,this.E8=w.ir(w.qg.$g),this.A8=!0,this.L8=[],this.O8=i.KJ,this.P8=[],this.k8=[],this.F8=new Map,this._J=[],this.j8=!1,this.z8=!1,this.B8=!1;const h=this.$c.bR();this.U8=w.ir(w.W8,this,i.$J),this.oO=w.ir(w.qg.oA,h.Q8(),{ZE:(t,s)=>{const i=s.$L(),e=i.eE();t.HS(i.J8()),t.cE(e),t.fE(e),h.V8(e)},KE:t=>this.FP().Y8(t)}),this.H8=!0,this.q8=!0,this.Z8=null,this.X8=[],this.K8=!1,this.tV=w.ir(w.Rect,0,0,-1,-1),this.sV=w.ir(w.Rect,0,0,-1,-1),this.iV=new self.rk(this),this.eV(),this.hV()&&(this.Z8=w.ir(w.kJ,this.$c._O(),this.$c.NO())),this.rV=i.t8.map(t=>w.s8.nV(this.i8,this,t))}oV(){for(const t of this.O8){const s=this.$c.aV(t[1]);this.i8.uV(s),s.lV()||(s.cV(t),s.fV(this.Ug)),this.P8.push(t),this.F8.set(t[2],t)}w.kn(this.L8,this.P8),this.O8=null}static nV(t,s,i){return w.ir(w.s8,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],Rk:i[19],backgroundColor:i[4].map(t=>t/255),Zk:i[5],HJ:[i[6],i[7]],opacity:i[8],$k:i[9],qJ:i[17],ZJ:i[18],XJ:i[10],scaleRate:i[11],lL:i[12],qk:i[16],KJ:i[14],$J:i[15],t8:i[20]})}er(){for(const t of this.rV)t.er();w.Ln(this.rV);for(const s of this._J)this.$c._F(s);w.Ln(this._J),this.U8.er(),this.U8=null,this.oO.er(),this.oO=null,this.iV=null,this.e8=null,this.i8=null,this.$c=null}dV(t){return this.F8.get(t)}pV(h){let r=this.i8.mV(),n=0,o=this.P8;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.$c.aV(t[1]),i=!0;if(!s.gV()||r){const a=this.$c.yV(t,this,!0);h.push(a),s.MV()&&(i=!1,this.k8.push(a.RF()))}i&&(o[n]=o[e],++n)}w.An(o,n),this.$c.PP(),this.g4()}wV(t,s){if(!t.pP().QR())throw new Error("instance is not of world type");const i=t.u4();if(i.l4()!==this)throw new Error("instance added to wrong layer");this._J.push(t),0!==i.uT()&&(this.B8=!0),s&&this.hV()&&t.u4().Rj(),this.g4(t)}SV(t){this._J.includes(t)||(this._J.push(t),0!==t.u4().uT()&&(this.B8=!0),this.g4(t))}TV(t,s){const i=t.u4();if(i.l4()!==this)throw new Error("instance added to wrong layer");this._J.unshift(t),0!==i.uT()&&(this.B8=!0),this.g4(t),s&&this.hV()&&t.u4().Rj()}bV(t,s){const i=this._J.indexOf(t);i<0||(s&&this.hV()&&t.u4().xV(),this._J.splice(i,1),this.g4(t),this.vV())}CV(){this.B8=!0}vV(){0===this._J.length&&(this.B8=!1)}GV(t){if(t){const s=new Set;for(const i of this._J){const e=i.u4().CJ();0<=e&&s.add(e)}let t=-1;for(const h of this._J){const r=h.u4();if(!(0<=r.CJ())){for(++t;s.has(t);)++t;r.IV(t)}}}this._J.sort(n)}_V(){}DV(){for(const t of this._J)t.TF().MV()||this.$c._F(t);this.$c.PP(),w.Ln(this._J),this.B8=!1,this.g4()}NV(s,t,i,e,h,r){const n=this.$c.UO(),o=this.$c.EV(),a=s.AV(),u=[];for(const l of this.P8){const c=l[0],f=c[0],d=c[1];if(t.Wu(f,d)){const p=o[l[1]];if(p!==s){if(!a)continue;if(!s.LV(p))continue}let t=h;if(!t){const y=this.$c.o4();t=this.Q3()===y?this:(t=y.OV(this.Jc()))||y.f4(this.cO())}const m=this.$c.yV(l,t,!1,void 0,void 0,!1,r),g=(t.EP(m),m.u4());g.jj(i,e),g.Rj(),n.AP(!0),m.LP(),n.AP(!1),u.push(m)}}return u}_P(){return this._J.length}Q3(){return this.i8}Jc(){return this.nr}RV(t){this.Ug=t}cO(){return this.Ug}PV(t){this.r8=t}AU(){return this.r8}Pk(){return this.h8}kk(t){this.h8!==(t=!!t)&&(this.h8=t,this.i8.kV(),this.$c.y4())}FV(){let t=this.xk();return(t?t.Gk():this.Q3().jV()).indexOf(this)}zV(){return this.n8}E4(){return this.$c}BV(){return this.o8}UV(){for(const t of this.vk())if(t.BV())return!0;return!1}LR(){return this.$c.LR()}FP(){return this.U8}lO(){return this.WV(),this.oO}WV(){const t=this.QV();if(this.H8||t!==this.q8||this.oO.XA()){const s=this.FP().JV();this.oO.KA(s.map(t=>t.Zx()),{tA:s.map(t=>t.cO()),sA:!t,nA:!0}),this.H8=!1,this.q8=t}}vz(){this.FP().vz(),this.H8=!0}hV(){return this.M8&&!this.y8}VV(){return this.Z8}YV(){this.K8=!1}Ak(){for(const t of this.HV())if(!t.Dk())return!1;return!0}Dk(){return this.a8}Nk(t){this.a8!==(t=!!t)&&(this.a8=t,this.$c.y4())}Ok(t){this.u8=!!t}Lk(){return this.u8}jk(){for(const t of this.HV())if(!t.Lk())return!1;return!0}hF(t){if(this.C8!==(t=!!t)){if(this.C8=t){const s=this.Q3();this.x8=s.HP(),this.v8=s.ZP()}this.qV(),this.$c.y4()}}ZV(){return this.C8}YP(t){const s=this.Q3(),i=s.XV(),e=s.KV();this.x8!==(t=(t=e<t?e:t)<i?i:t)&&(this.x8=t,this.ZV())&&(this.qV(),this.$c.y4())}qP(t){const s=this.Q3(),i=s.$V(),e=s.tY();this.v8!==(t=(t=e<t?e:t)<i?i:t)&&(this.v8=t,this.ZV())&&(this.qV(),this.$c.y4())}HP(){return this.ZV()?this.x8:this.Q3().HP()}ZP(){return this.ZV()?this.v8:this.Q3().ZP()}nF(){return this.sY(),this.nD}iY(){return this.sY(),this.G8}eY(){return this.sY(),this.I8}Mk(){const t=this.Q3();return[t.hY(),t.rY()]}nM(t){return this.$c.nM(t)}nY(c,e){const h=this.iY();if(0===c)e.G(h);else{let o=h.Cu(),a=h.Gu(),t=this.aY(c),s=h.width()/t,i=h.height()/t,[u,l]=this.Mk();if(.5!==u||.5!==l){let t=this.uY(),s=this.$c,i=this.nM()/t,e=(u-.5)*s.lY()/i,h=(l-.5)*s.cY()/i,r=this.VP(),n=(0!==r&&(br.set(e,h),br.rotate(r),e=br.Ka(),h=br.tu()),w.Ir(t,0,c));o+=w.Ot(e,0,n),a+=w.Ot(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}wN(){return this.QS.ta()}TN(t){t=w.lr(t,0,1),this.QS.ta()!==t&&(this.QS.qo(t),this.eV(),this.$c.y4())}eV(){this.p8.G(this.QS),this.p8.fa()}J8(){return this.p8}QV(){return this.QS.aa(1,1,1,1)}Wk(){return this.w8}Uk(t){this.w8!==t&&(this.w8=t,this.qV(),this.$c.y4())}Vk(){return this.f8}Hk(){return this.d8}fY(t,s){this.f8===t&&this.d8===s||(this.f8=t,this.d8=s,this.qV(),this.$c.y4())}Jk(t){this.fY(t,this.Hk())}Yk(t){this.fY(this.Vk(),t)}lT(t){this.JS!==t&&(this.JS=t,this.$c.y4())}uT(){return this.JS}JP(t){t=w.cr(t),this.b8!==t&&(this.b8=t,this.qV(),this.$c.y4())}VP(){return w.cr(this.i8.VP()+this.b8)}Qk(){return this.b8}dY(){return 0<this._J.length}d4(){return this._J}pY(){return this.mY()&&this.y8?(w.kn(Cr,this.d4()),Cr.sort((t,s)=>this.gY(t,s)),Cr):this.d4()}yY(t){w.Qh(t,this.pY());for(const s of this.rV)s.Ak()&&0<s.wN()&&s.yY(t)}gY(t,s){const i=this.Q3().MY(),e=i[0],h=i[1],r=i[2],n=t.u4(),o=s.u4(),a=n.hT()-e,u=n.oT()-h,l=n.uT()-r,c=o.hT()-e,f=o.oT()-h,d=o.uT()-r;return c*c+f*f+d*d-(a*a+u*u+l*l)}eF(){return this.l8}Kk(){return this.c8}Xk(t){this.c8!==(t=!!t)&&(this.c8=t,this.$c.y4())}sF(){return this.m8}tF(t){this.m8!==(t=!!t)&&(this.m8=t,this.$c.y4())}wY(){return!this.E4().SY()||!this.g8}mY(){return!this.wY()}TY(){return this.mY()&&this.Q3().bY()}xY(){if(!this.TY())return!1;for(const t of this.rV)if(!t.xY())return!1;return!0}YS(t){this.WS!==t&&(this.WS=t,this.$c.y4())}iF(){return this.WS}vY(){return!this.e8}xk(){return this.e8}CY(t){this.e8=t}Gk(){return this.rV}GY(){return 0<this.rV.length}IY(t,s=!0){s?this.rV.push(t):this.rV.unshift(t)}_Y(t,s,i){let e=this.rV.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.rV.splice(e,0,t)}DY(t){const s=this.rV.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.rV.splice(s,1)}NY(){for(const t of this.rV)if(t.EY())return!0;return!1}*_k(){for(const t of this.rV)yield*t._k();yield this}*vk(){let t=this.xk();for(;t;)yield t,t=t.xk()}*HV(){yield this,yield*this.vk()}AY(t){for(const s of this.vk())if(s===t)return!0;return!1}LY(t){return this===t||this.f8===t.f8&&this.d8===t.d8&&this.T8===t.T8&&this.w8===t.w8&&this.b8===t.b8&&this.HP()===t.HP()&&this.ZP()===t.ZP()}OY(){return{parallaxX:this.Vk(),parallaxY:this.Hk(),scale:this.Bk(),scaleRate:this.Wk(),angle:this.Qk(),hasOwnScroll:this.ZV(),scrollX:this.HP(),scrollY:this.ZP()}}RY(t){this.fY(t.parallaxX,t.parallaxY),this.zk(t.scale),this.Uk(t.scaleRate),this.JP(t.angle),this.hF(t.hasOwnScroll),this.YP(t.scrollX),this.qP(t.scrollY),this.sY()}PY(t){if(0!==t.size){const s=w.Un(this._J,t);0<s&&(this.vV(),this.g4())}}g4(t){this.j8=!1,this.K8=!1,t&&!t.TF().pP().VR()||(this.z8=!1)}kY(){if(!this.j8){if(this._J.sort(t),this.hV())for(let t=0,s=this._J.length;t<s;++t){const i=this._J[t].u4();i.IV(t),this.Z8.VJ(i.FY())}else for(let t=0,s=this._J.length;t<s;++t)this._J[t].u4().IV(t);this.j8=!0}}jY(){if(!this.z8){let t=this.i8.zY(this.AU()),s=t.map(t=>[...t._k()]).flat(),i=0;for(const e of s){for(const h of e.d4())h.TF().pP().VR()&&h.u4().BY(i++);e.UY()}}}UY(){this.z8=!0}WY(){return{isVisible:this.Ak(),opacity:this.wN(),isInteractive:this.Lk()}}QY(t,s,i){const e=t.u4(),h=s.u4();if(e.l4()!==this||h.l4()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.c4(),n=h.c4();return r!==n+(i?1:-1)&&(w.Fn(this._J,r),r<n&&n--,i&&n++,n===this._J.length?this._J.push(t):this._J.splice(n,0,t),this.g4(t),!0)}JY(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.u4().CJ()<a.u4().CJ()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}VY(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.JY(h,r))}return e%2==1&&i.push(s[e-1]),i}YY(t){for(;1<t.length;)t=this.VY(t);return t[0]}HY(){return this.kY(),w.Ln(pr),this.Z8.JJ(this.nF(),pr),pr.length?1===pr.length?pr[0]:this.YY(pr):[]}EY(){return this.Ak()&&0<this.wN()&&this.qY()}qY(){if(this.dY()||!this.Kk())return!0;for(const t of this.rV)if(t.qY())return!0;return!1}ZY(){return this.sF()||!this.QV()||0!==this.iF()||this.U8.XY()}KY(){if(this.ZY())return!0;for(const t of this.rV)if(t.KY())return!0;return!1}eE(){return this.S8}aY(t){if(this.i8.Tk())return 1;{const s=this.$Y();return s/(s-t)}}tH(t){const s=this.$c.MF();if(this.i8.Tk())return s;{const i=this.$Y(),e=this.nM();return e/Math.abs(i-t)*s}}qV(){this.N8=!0,this.A8=!0,this._8=!0}sH(t){return this.N8&&(this.iH(t,this.ZA,0,0,null),this.N8=!1),this.ZA}uY(t){return this.nM(t)/this.eH()}$Y(){return this.TY()?this.Q3().MY()[2]:this.uY()}hH(){if(this.TY()){const t=this.Q3().MY();return[t[0],t[1],t[2]]}return this.rH()}rH(t=0,s=0,h=0){let r=this.$c,i=this.Q3(),e=r.nH(),n=r.oH(),o=(this.HP()-e)*this.f8+e,a=(this.ZP()-n)*this.d8+n,u=(r.LO()&&(o=Math.round(o),a=Math.round(a)),o+t),l=a+s,c=i.Tk()?this.nM(h):this.uY(h),[f,d]=this.Mk();if(.5!==f||.5!==d){let t=this.nM(h)/c,s=(f-.5)*r.lY()/t,i=(d-.5)*r.cY()/t,e=this.VP();0!==e&&(br.set(s,i),br.rotate(e),s=br.Ka(),i=br.tu()),u+=s,l+=i}return[u,l,c]}iH(t,s,i,e,h){const r=this.$c,n=this.Q3();if(this.TY()){vh.G(wr,n.MY()),vh.G(Sr,n.aH()),vh.G(Tr,n.uH());const o=r.nH(),a=r.oH(),u=Sr[0]-wr[0],l=Sr[1]-wr[1],c=Sr[2]-wr[2];wr[0]=(wr[0]-o)*this.f8+o,wr[1]=(wr[1]-a)*this.d8+a,wr[2]*=Math.max(this.f8,this.d8),Sr[0]=wr[0]+u,Sr[1]=wr[1]+l,Sr[2]=wr[2]+c}else{const[f,d,p]=this.rH(i,e,h),m=(vh.set(wr,f,d,p),vh.set(Sr,f,d,p-100),this.VP());0===m?vh.set(Tr,0,1,0):vh.set(Tr,Math.sin(m),Math.cos(m),0)}t.bM(s,wr,Sr,Tr,h||r.cY())}lH(){this.D8=!0,this.A8=!0,this._8=!0}cH(t){return this.D8&&(this.fH(t),this.D8=!1),this.nb}fH(t){const s=this.$c.bR(),[i,e]=this.Mk();if(this.i8.Tk())t.TM(this.nb,s.dH(),s.pH());else if(.5===i&&.5===e)xh.G(this.nb,s.mH());else{const h=s.dH(),r=s.pH();t.wM(this.nb,h/r,i,e)}}DW(t,s=!0,i=0,e=0,h=0){s&&t.aN(this.cH(t));let r;r=0===i&&0===e&&0===h?this.sH(t):(this.iH(t,gr,i,e,h),gr),t.pN(r)}gH(t){this.DW(t),t.uw(this.uT())}yH(t){let s=null;if(t.oS()&&this.$c.MH()){const i=this.$c.bR().wH(this);i&&(s=i.V_(),t.ME(s))}return s}SH(t){if(t.SM()&&this.$c.MH()){const s=2*(this.cO()+1);t.StartMeasuringRenderPassTime(s,1+s)}}VT(t,s,i){let e=this.$c.bR(),h=this.ZY(),r=null,n=this.yH(t);if(this.SH(t),h){const o={e2:this.$c.EO(),Y2:!0,TH:!!t.SM()&&this.$c.bH()};"low"===e.xH()&&(o.width=e.dH(),o.height=e.pH()),r=this.$c.vH(o),this.S8=r,t.uE(r),this.Kk()&&t.ZN(0,0,0,0)}else this.S8=s,t.uE(s);if(this.Kk()||t.Hl(this.l8),this.i8.CH(t,this.S8,this.rV,h&&this.Kk()),this.SH(t),this.DW(t),t.uw(this.uT()),t.$N(this.mY()),this.eH()>Number.EPSILON){this.kY();const a=this.hV()&&0===this.uT()&&!this.B8;this.TY()?this.GH(t):a?this.IH(t):this._H(t,this.pY())}t.uw(0),t.cw(0),h&&(t.$N(!1),this.DH(t,r,s,i)),n&&t.SE(n),this.S8=null}_H(i,e){let h=this.nF(),r=this.S8,n=this.Q3().Tk(),o=this.Q3().NH(),a=null;for(let t=0,s=e.length;t<s;++t){const u=e[t];if(u!==a){const l=(a=u).u4();l.Ak()&&l.EH(h,o,n)&&this.AH(u,l,i,r)}}}GH(e){const h=this.S8,r=this.LH(),n=xr,o=vr,a=this.pY();for(let s=0,i=a.length;s<i;){const u=a[s],l=u.u4();if(l.Ak()&&l.OH(r)){(!u.RH()||0<l.PH())&&o.push(u);const c=u.u4().Bj();n.push(u);let t=s+1;for(;t<i;++t){const f=a[t],d=f.u4();if(d.Ak()&&d.OH(r)){if(d.Bj()!==c)break;(f.RH()?(0<d.PH()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].kH()){this.FH(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.u4();m.jH(!0),this.AH(p,m,e,h),m.jH(!1)}}else{this.AH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==u){const y=g.u4(),M=y.l4();M.AH(g,y,e,h)}}}s=t,w.Ln(n),w.Ln(o)}else++s}}FH(i,e){const h=this.S8;i.pE();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.u4();n.zH(!0),this.BH(r,n,i)}i.mE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.u4();this.AH(o,a,i,h),a.zH(!1)}i.yE()}IH(t){let s=this.Z8,i=this.sV,e=this.tV,h=this.nF(),r;i.set(s.UJ(h.yu()),s.WJ(h.Mu()),s.UJ(h.wu()),s.WJ(h.Su())),this.K8&&i.equals(e)?r=this.X8:(r=this.HY(),this.K8=!0,e.G(i)),this._H(t,r),r!==this.X8&&w.kn(this.X8,r)}AH(t,s,i,e){s.XY()?this.UH(t,s,i,e):this.BH(t,s,i)}BH(t,s,i){const e=s.WH();i.WM()!==e&&e.VS(),t.VT(i)}UH(t,s,i,e){this.QH(t,s,i,e,null)&&this.DW(i)}QH(t,s,i,e,h){const r=s.Lj().lO();return r.aL(i,e,{uL:t,lL:s.iF(),devicePixelRatio:this.$c.JH(),time:t.VH(),cL:this.$c.YH()*this.eH(),fL:this.VP(),LL:s.Wj(),OL:r.XL()?null:this.HH(s),yL:h&&h.yL,ML:h&&h.ML,wL:h&&h.wL,SL:h&&h.SL}),i.uw(this.uT()),r.gN()}DH(t,s,i,e){const h=this.U8.JV(),r=this.$c;0===h.length?(t.uE(i),t._M(),e&&0===this.WS&&this.QV()?t.lE(s):(t.YS(this.WS),t.HS(this.p8),t.cE(s)),t.fE(s),r.V8(s)):this.lO().aL(t,i,{uL:this,lL:this.iF(),devicePixelRatio:r.JH(),cL:r.YH()*this.eH(),fL:this.VP(),LL:this.nF(),OL:null,$E:!0})}Bk(){return this.T8}zk(t){this.T8!==t&&(this.T8=t,this.i8.qH(),this.qV(),this.$c.y4())}MF(){return this.eH()*this.$c.MF()}zU(){return this.eH()*this.$c.zU()}eH(){return(this.T8*this.i8.QP()-1)*this.w8+1}sY(){if(this._8){this._8=!1;let t=this.$c.nH(),s=this.$c.oH(),i=(this.HP()-t)*this.f8+t,e=(this.ZP()-s)*this.d8+s,h=this.eH(),r=this.$c.lY()/h,n=this.$c.cY()/h,o=i-r/2,a=e-n/2;this.$c.LO()&&(o=Math.round(o),a=Math.round(a));const u=this.G8,l=(u.set(o,a,o+r,a+n),this.VP()),c=(0!==l&&(fr.G(u),fr.offset(-u.Cu(),-u.Gu()),dr.ml(fr,l),dr.yl(fr),fr.offset(u.Cu(),u.Gu()),u.G(fr)),this.JS);this.nY(c,this.nD),this.TY()?this.ZH(c,this.I8):this.I8.G(this.nD)}}ZH(t,s){let i=this.$c.bR(),e=i.GR(),h=i._R(),[r,n]=this.aF(0,0,t),[o,a]=this.aF(e,0,t),[u,l]=this.aF(e,h,t),[c,f]=this.aF(0,h,t),d=Math.min(r,o,u,c),p=Math.min(n,a,l,f),m=Math.max(r,o,u,c),g=Math.max(n,a,l,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}aF(t,s,i=0){return this.XH(t,s,i,this.zU())}pF(t,s,i=0){return this.XH(t,s,i,this.MF()*this.LR())}XH(t,s,i,e){const h=this.$c,r=h.IS(),n=this.eH(),o=h.lY()/n,a=h.cY()/n,u=Mr,l=(Uh.set(u,0,0,o,a),t/=e,s=u[3]-s/e,this.cH(r)),c=this.sH(r),f=yr,d=w.qg.Kg(t,s,i,c,l,u,f);return d?[f[0],f[1]]:[NaN,NaN]}KH(t,s){const i=this.T8,e=this.w8,h=this.f8,r=this.d8,n=this.b8,o=(this.T8=1,this.w8=1,this.f8=1,this.d8=1,this.b8=0,this.qV(),this.aF(t,s));return this.T8=i,this.w8=e,this.f8=h,this.d8=r,this.b8=n,this.qV(),o}fF(t,s,i=0){return this.$H(t,s,i,this.zU())}gF(t,s,i=0){return this.$H(t,s,i,this.MF()*this.LR())}$H(t,s,i,e){const h=this.$c,r=h.IS(),n=this.eH(),o=h.lY()/n,a=h.cY()/n,u=Mr,l=(Uh.set(u,0,0,o,a),this.cH(r)),c=this.sH(r),f=yr,d=w.qg.Zg(t,s,i,c,l,u,f);return d?[f[0]*e,(u[3]-f[1])*e]:[NaN,NaN]}t7(t,s){return t*=this.MF()*this.LR(),0!==s&&(t*=this.aY(s)),t}HH(t){const s=t.Wj(),i=t.Bj(),e=t.PH(),u=i+e,l=s.yu(),c=s.Mu(),f=s.wu(),d=s.Su();if(this.TY()){if(this.s7(l,c,i)||this.s7(f,c,i)||this.s7(f,d,i)||this.s7(l,d,i))return null;if(0<e&&(this.s7(l,c,u)||this.s7(f,c,u)||this.s7(f,d,u)||this.s7(l,d,u)))return null}else if(u>=this.uY())return null;let[p,m]=this.gF(l,c,i),[g,y]=this.gF(f,d,i);if(0!==this.VP()||0<e||this.TY()){const[M,w]=this.gF(f,c,i),[S,T]=this.gF(l,d,i);if(0<e){let[t,s]=this.gF(l,c,u),[i,e]=this.gF(f,c,u),[h,r]=this.gF(f,d,u),[n,o]=this.gF(l,d,u),a=Math.min(p,g,M,S,t,i,h,n);g=Math.max(p,g,M,S,t,i,h,n),p=a,a=Math.min(m,y,w,T,s,e,r,o),y=Math.max(m,y,w,T,s,e,r,o),m=a}else{let t=Math.min(p,g,M,S);g=Math.max(p,g,M,S),p=t,t=Math.min(m,y,w,T),y=Math.max(m,y,w,T),m=t}}return fr.set(p,m,g,y),fr}LH(){return this.A8&&(this.i7(),this.A8=!1),this.E8}i7(){const t=this.$c.IS(),s=this.cH(t),i=this.sH(t);this.E8.uy(i,s)}s7(t,s,i){return this.LH().my(t,s,i)}e7(){const t={d:this.BV(),s:this.Bk(),a:this.Qk(),v:this.Dk(),i:this.Lk(),html:this.Pk(),bc:this.l8.toJSON(),t:this.Kk(),sx:this.x8,sy:this.v8,hosp:this.C8,px:this.Vk(),py:this.Hk(),c:this.QS.toJSON(),sr:this.Wk(),fx:this.U8.yT(),cg:this.k8};return t}h7(t){this.o8=!!t.d,this.T8=t.s,this.b8=t.a,this.a8=!!t.v,this.u8=!t.hasOwnProperty("i")||t.i,this.h8=!!t.html,this.l8.Pa(t.bc),this.c8=!!t.t,t.hasOwnProperty("sx")&&(this.x8=t.sx),t.hasOwnProperty("sy")&&(this.v8=t.sy),t.hasOwnProperty("hosp")&&(this.C8=!!t.hosp),this.f8=t.px,this.d8=t.py,this.QS.Pa(t.c),this.eV(),this.w8=t.sr,w.kn(this.k8,t.cg),w.kn(this.P8,this.L8);let i=new Set(this.k8),e=0;for(let t=0,s=this.P8.length;t<s;++t)i.has(this.P8[t][2])||(this.P8[e]=this.P8[t],++e);w.An(this.P8,e),this.U8.MT(t.fx),this.H8=!0}r7(){this.GV(!1),this.g4(),this.qV(),this.lH()}$P(){return this.iV}EP(t,s=!1){if(this._J.includes(t))s&&this._J.sort((t,s)=>{const i=t.u4().n7(),e=s.u4().n7();return i-e});else if(t.o7()){const i=[...t.y5()];i.push(t),i.sort((t,s)=>{const i=t.u4().n7(),e=s.u4().n7();return i-e});for(const e of i)if(e.LF())for(const h of e.OF())if(!i.includes(h)){const r=[...h.y5()];r.push(h),r.sort((t,s)=>{const i=t.u4().n7(),e=s.u4().n7();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.pP().QR()&&this.wV(n,!0)}else if(t.pP().QR()&&this.wV(t,!0),t.LF())for(const o of t.OF()){const a=[...o.y5()];if(a.push(o),a.sort((t,s)=>{const i=t.u4().n7(),e=s.u4().n7();return i-e}),a&&a.length)for(const u of a)u.pP().QR()&&this.wV(u,!0)}}}}{let u=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},T=function(t,s){I!==t&&(t.gH(s),I=t)},b=(u,T,self.Rs),e=self.C3Debugger,h=(b.ir(b.Rect),b.ir(b.Rect),b.ir(b.Rect)),x=b.ir(b.ko),t=self.Ms,l=t.Gs,a=[],v=[],C=[],G=[],I=null;b.a7=class extends b.$h{constructor(t,s,i){super(),this.u7=t,this.$c=t.E4(),this.nr=i[0],this.l7=i[1],this.c7=i[2],this.Um=i[1],this.Wm=i[2],this.f7=!!i[3],this.d7=!!i[4],this.p7=i[5],this.m7=i[6],this.g7=i[7],this.y7=null,this.n8=i[8],this.Ug=s,this.x8=0,this.v8=0,this.T8=1,this.b8=0,this.M7=new Set,this.w7=new Set,this.S7=new Set,this.T7=[],this.b7=[],this.x7=new Map,this.v7=new Map,this.C7=[],this.G7=!1,this.I7=l.create(),this._7=l.create(),this.D7=l.create(),this.N7=[],this.E7=[],this.A7=new Map,this.L7=new Map,this.O7=-1;const h=this.$c.bR();this.U8=b.ir(b.W8,this,i[11]),this.oO=b.ir(b.qg.oA,h.Q8(),{ZE:(t,s)=>{const i=s.$L(),e=i.eE();t.bN(),t.cE(e),t.fE(e),h.V8(e)},KE:t=>this.FP().Y8(t)}),this.H8=!0,this.R7=!1,this.S8=null,this.P7={},this.k7=new Map,this.F7=!0,this.j7=new self.kP(this),this.z7=b.ir(b.Event.Rf);for(const e of i[9])this.N7.push(b.s8.nV(this,null,e));this.B7();for(const r of this.ek())r.oV();for(const n of i[10]){const o=this.$c.aV(n[1]);if(!o)throw new Error("missing nonworld object class");o.lV()||o.cV(n),this.C7.push(n),this.uV(o)}}er(){for(const t of this.E7)t.er();b.Ln(this.E7),this.S7.clear(),this.y7=null,this.u7=null,this.$c=null}E4(){return this.$c}Jc(){return this.nr}zV(){return this.n8}cO(){return this.Ug}FP(){return this.U8}lO(){return this.WV(),this.oO}WV(){const t="low"===this.$c.bR().xH();if(this.H8||this.R7!==t||this.oO.XA()){const s=this.FP().JV();this.oO.KA(s.map(t=>t.Zx()),{tA:s.map(t=>t.cO()),iA:t,nA:!0}),this.H8=!1,this.R7=t}}vz(){this.FP().vz(),this.H8=!0}U7(){let i=this.E7[0].eH();for(let t=1,s=this.E7.length;t<s;++t){const e=this.E7[t];0===e.Vk()&&0===e.Hk()||(i=Math.min(i,e.eH()))}return i}W7(){return.5*this.$c.lY()/this.U7()}Q7(){return.5*this.$c.cY()/this.U7()}XV(){return this.J7()?-1/0:this.W7()}KV(){return this.J7()?1/0:this.im()-this.W7()}$V(){return this.J7()?-1/0:this.Q7()}tY(){return this.J7()?1/0:this.pm()-this.Q7()}YP(t){const s=this.XV(),i=this.KV();this.x8!==(t=(t=i<t?i:t)<s?s:t)&&(this.x8=t,this.V7(),this.$c.y4())}HP(){return this.x8}qP(t){const s=this.$V(),i=this.tY();this.v8!==(t=(t=i<t?i:t)<s?s:t)&&(this.v8=t,this.V7(),this.$c.y4())}ZP(){return this.v8}J7(){return this.f7}qH(){this.YP(this.HP()),this.qP(this.ZP());for(const t of this.E7)t.ZV()&&(t.YP(t.HP()),t.qP(t.ZP()))}gk(t,s){this.p7===t&&this.m7===s||(this.p7=t,this.m7=s,this.Y7()&&(this.H7(),this.V7(),this.$c.y4()))}hY(){return this.Tk()?.5:this.p7}rY(){return this.Tk()?.5:this.m7}NH(){const t=this.hY(),s=this.rY();return t<0||1<t||s<0||1<s}wk(){this.d7&&(this.d7=!1,this.H7(),this.V7(),this.$c.y4())}Sk(){this.d7||(this.d7=!0,this.H7(),this.V7(),this.$c.y4())}Tk(){return this.d7}Y7(){return!this.Tk()}q7(t){this.G7!==(t=!!t)&&(this.G7=t,this.V7(),this.$c.y4())}bY(){return this.G7}Z7(t,s,i,e,h,r,n,o,a){u(this.I7,t,s,i)&&u(this._7,e,h,r)&&u(this.D7,n,o,a)||(l.set(this.I7,t,s,i),l.set(this._7,e,h,r),l.set(this.D7,n,o,a),this.X7())}X7(){this.V7(),this.$c.y4()}MY(){return this.I7}aH(){return this._7}uH(){return this.D7}QP(){return this.T8}WP(t){this.T8!==t&&(this.T8=t,this.V7(),this.qH(),this.$c.y4())}JP(t){t=b.cr(t),this.b8!==t&&(this.b8=t,this.V7(),this.$c.y4())}VP(){return this.b8}im(){return this.Um}lm(t){!isFinite(t)||t<1||(this.Um=t)}pm(){return this.Wm}hm(t){!isFinite(t)||t<1||(this.Wm=t)}K7(){return this.y7}jV(){return this.N7}*ek(){for(const t of this.N7)yield*t._k()}ik(){return this.E7}t9(){return this.E7.length}l4(t){return"number"==typeof t?this.f4(t):this.OV(t.toString())}f4(t){return t=b.lr(Math.floor(t),0,this.E7.length-1),this.E7[t]}OV(t){return this.A7.get(t.toLowerCase())||null}s9(t){return!!this.OV(t)}i9(t){return this.L7.get(t)||null}H7(){for(const t of this.E7)t.lH()}V7(){for(const t of this.E7)t.qV()}ak(t,s,i){if(this.s9(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.xk(),h=b.ir(b.s8,this,e,{name:t,sid:Math.floor(1e15*Math.random()),YJ:!0});this.e9(h,s,i),this.E4().y4(),this.kV()}lk(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.h9(t),this.e9(t,s,i),this.E4().y4(),this.kV())}fk(t){if(this.h9(t)){const s=this.$c.UO();s.AP(!0),t.er(),s.AP(!1),this.E4().y4(),this.kV()}}pk(){const t=new Set;for(const s of this.ek())s.BV()&&!s.UV()&&t.add(s);if(0!==t.size){const i=this.$c.UO();i.AP(!0);for(const e of t)this.h9(e),e.er();i.AP(!1),this.E4().y4(),this.kV()}}e9(s,i,e){if(2<=e)if(i){if(i===s||i.AY(s))throw new Error(`cannot move layer '${s.Jc()}' to sub-layer of itself`);i.IY(s,2===e),s.CY(i)}else 2===e?this.N7.push(s):this.N7.unshift(s),s.CY(null);else{const t=i.xk();if(t){if(i.AY(s))throw new Error(`cannot move layer '${s.Jc()}' to sub-layer of itself`);t._Y(s,i,0===e),s.CY(t)}else{let t=this.N7.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.N7.splice(t,0,s),s.CY(null)}}}h9(t){const s=t.xk();if(s)return s.DY(t),!0;if(1<this.N7.length){const i=this.N7.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.N7.splice(i,1),!0}return!1}B7(){this.E7=[...this.ek()],this.A7.clear(),this.L7.clear();for(let t=0,s=this.E7.length;t<s;++t){const i=this.E7[t];i.RV(t),this.A7.set(i.Jc().toLowerCase(),i),this.L7.set(i.zV(),i)}}r9(){let t=0;for(const s of this.N7){for(const i of s._k())i.PV(t);s.Pk()&&t++}}n9(){return this.N7.at(-1).AU()+1}async kV(){this.B7(),this.r9(),this.O7=this.n9()}o9(){return this.O7}a9(){this.O7=-1}zY(t){const s=[];for(const i of this.N7){const e=i.AU();if(e===t)s.push(i);else if(t<e)break}return s}OY(){return{scrollX:this.HP(),scrollY:this.ZP(),scale:this.QP(),angle:this.VP(),vpX:this.hY(),vpY:this.rY()}}RY(t){this.YP(t.scrollX),this.qP(t.scrollY),this.WP(t.scale),this.JP(t.angle),this.gk(t.vpX,t.vpY)}u9(){let t=this.N7.filter(t=>t.EY())[0];for(;t;){if(!t.Kk())return x.Zo(t.eF()),x.qo(1),x;if(t.ZY())return x.Uo(0,0,0,0),x;t=t.Gk().filter(t=>t.EY())[0]}return x.Uo(0,0,0,0),x}mV(){return this.F7}l9(){return[...this.M7]}uV(t){if(t.LF())for(const s of t.f9().c9())this.M7.add(s);else this.M7.add(t)}d9(){return[...this.w7]}p9(t,s){if(t===this||!s)return Promise.resolve();t&&(b.Do(this.w7,t.w7),t.w7.clear());const i=[];for(const e of this.M7)this.w7.has(e)||(i.push(e.m9(s)),this.w7.add(e));return Promise.all(i)}async g9(t){if(t.AV())throw new Error("cannot load textures for family");const s=this.$c.IS();if(s&&!s.M_()&&!this.w7.has(t)){this.w7.add(t);const i=t.m9(s);this.y9(i),await i,t.M9(),this.$c.y4()}}y9(t){this.S7.add(t),t.then(()=>this.S7.delete(t)).catch(()=>this.S7.delete(t))}w9(){return Promise.all([...this.S7])}S9(t){if(t.AV()||0<t._P())throw new Error("cannot unload textures");const s=this.$c.IS();s&&this.w7.has(t)&&(this.w7.delete(t),t.T9(s))}b9(t,s){if(t!==this&&s)for(const i of this.w7)i.MV()||t.M7.has(i)||(i.T9(),this.w7.delete(i))}x9(){this.w7.clear()}async v9(t){const s=this.$c,i=this.u7,e=s.UO(),h=(this.g7&&(this.y7=e.C9(this.g7),this.y7.G9()),i.I9(this),this.Um=this.l7,this.Wm=this.c7,this.x8=s._O()/2,this.v8=s.NO()/2,this.qH(),this.H7(),this.V7(),this.r9(),await this.$c.bR()._9(this.n9(),!0),this.D9(t),this.$c.N9(!0),this.E9(),this.F7||this.A9(),this.L9(this.T7),this.L9(this.b7),this.O9(),i.R9(),s.PP(),this.$c.N9(!1),this.$c.P9());if(await Promise.all(h),b.Ln(h),!s.k9()){for(const r of this.T7)r.F9();for(const n of this.b7)n.j9(this.x7,this.v7);for(const[o,a]of Object.entries(this.P7)){const u=this.$c.w6(parseInt(o,10));u&&!u.AV()&&u.gV()&&b.Ln(a)}for(const l of this.T7)l.z9();for(const c of this.b7)c.z9()}b.Ln(this.T7),b.Ln(this.b7),this.x7.clear(),this.v7.clear(),await Promise.all([...this.M7].map(t=>t.B9(this.$c.IS()))),t&&(s.Rf().dispatchEvent(new b.Event("beforefirstlayoutstart")),await s.U9(new b.Event("beforeprojectstart"))),await this.W9(new b.Event("beforeanylayoutstart")),s.Rf().dispatchEvent(new b.Event("beforelayoutstart")),await this.U9(new b.Event("beforelayoutstart")),s.k9()||await s.aj(b.Y9.V9.J9.Q9,null,null),s.Rf().dispatchEvent(new b.Event("afterlayoutstart")),await this.U9(new b.Event("afterlayoutstart")),await this.W9(new b.Event("afteranylayoutstart")),t&&(s.Rf().dispatchEvent(new b.Event("afterfirstlayoutstart")),await s.U9(new b.Event("afterprojectstart"))),e.H9(i),await this.w9(),this.F7=!1}D9(t){for(const s of this.$c.EV())if(!s.AV()&&s.QR())for(const i of s.CP()){const e=i.u4(),h=e.l4(),r=b.lr(h.cO(),0,this.E7.length-1),n=this.E7[r];e.m4(n,!0),n.SV(i)}if(!t)for(const o of this.E7)o.GV(!1)}E9(){for(const t of this.E7)t.pV(this.T7),t._V()}A9(){let s=!1;for(const[t,i]of Object.entries(this.P7)){const e=this.$c.w6(parseInt(t,10));if(e&&!e.AV()&&e.gV())for(const h of i){let t=null;if(!e.QR()||(t=h.hasOwnProperty("instJson")?this.i9(h.instJson.w.l):this.i9(h.w.l))){const r=this.$c.yV(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.MT(h.instJson):r.MT(h),s=!0,this.b7.push(r),h.hasOwnProperty("instJson")&&(this.x7.set(r,h),this.v7.set(h.index,r))}}}for(const n of this.E7)n.GV(!0),n.g4();s&&(this.$c.PP(),this.$c.q9())}L9(s){for(const i of s)if(i.LF()){const e=i.u4(),t=i.Z9();for(const h of i.TF().f9().X9())if(h!==i.TF()){const r=h.CP();if(r.length>t)i.K9(r[t]);else{let t;t=e?this.$c.yV(h,e.l4(),!0,e.hT(),e.oT(),!0):this.$c.yV(h,null,!0,0,0,!0),this.$c.PP(),h.tq(),i.K9(t),s.push(t)}}}}O9(){for(const t of this.C7){const s=this.$c.aV(t[1]);s.LF()||this.$c.yV(t,null,!0)}}sq(){let i=[],e=this.C7,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.$c.aV(r[1]);n.MV()?n.LF()&&n.f9().iq()||i.push(this.$c.yV(r,null,!0)):(e[h]=r,++h)}b.An(e,h),this.$c.PP(),this.L9(i)}NV(t,s,i,e,h,r,n){if(i)return i.NV(t,s,h,r,e,n);{const o=[];for(const a of this.E7)o.push(a.NV(t,s,h,r,e,n));return o.flat()}}async eq(){const t=this.u7;this.$c.k9()||(await this.W9(new b.Event("beforeanylayoutend")),await this.U9(new b.Event("beforelayoutend")),await this.$c.aj(b.Y9.V9.J9.hq,null,null),await this.U9(new b.Event("afterlayoutend")),await this.W9(new b.Event("afteranylayoutend"))),t.rq(!0),this.$c.UO().nq(),this.F7||this.oq();for(const s of this.E7)s.DV();for(const i of this.$c.EV())if(!(i.MV()||i.QR()||i.pP().UR()||i.AV())){for(const e of i.CP())this.$c._F(e);this.$c.PP()}t.rq(!1),t.z3()===this&&t.I9(null)}aq(t,s){const i=t.TF().zV().toString(),e=(this.P7.hasOwnProperty(i)||(this.P7[i]=[]),this.P7[i]),h={index:s,instJson:t.yT(),sceneGraphJson:{children:[]}};e.push(h),this.k7.set(t,h)}uq(t){const s=this.k7.get(t);for(const i of t.lq()){const e=this.k7.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:b.fq.cq(i.u4())})}}oq(){this.k7.clear();let t=0;for(const s of this.E7){s.kY();for(const i of s.d4()){const e=i.TF();!e.MV()&&e.gV()&&(this.aq(i,t),t++)}}for(const h of this.E7)for(const r of h.d4()){const n=r.TF();!n.MV()&&n.gV()&&this.uq(r)}this.k7.clear()}pq(){this.P7={},this.F7=!0}eE(){return this.S8}ZY(){const t=this.$c,s=t.IS().oS();return"low"===t.bR().xH()||s&&t.bH()||this.U8.XY()||s&&t.SY()}mq(t){const s=this.$c.bR();if(this.ZY()){t.uE(null),t.ZN(0,0,0,0);const i={e2:this.$c.EO(),Y2:t.SM()||this.$c.bH()||this.U8.XY(),TH:!!t.SM()&&this.$c.bH()};"low"===s.xH()&&(i.width=s.dH(),i.height=s.pH()),this.S8=this.$c.vH(i)}else this.S8=null}gq(t){this.$c.yq(t)&&(t.$N(!1),t.uE(null),t._M(),t.lE(this.S8))}Mq(t){this.ZY()&&(t.$N(!1),this.wq(t,this.S8))}Sq(t){t.uE(this.S8),t.Hl(this.u9()),this.$c.SY()&&t.KN();const s=this.zY(0);this.CH(t,this.S8,s,!0),t.SM()&&t.StartMeasuringRenderPassTime(0,1),this.Mq(t),this.S8=null}Tq(t,s){let i=null;this.$c.yq(t)&&(i=this.S8),t.uE(i),t.ZN(0,0,0,0),this.$c.SY()&&t.KN();const e=this.zY(s);this.CH(t,i,e,!0),this.gq(t),t.tS(),this.$c.bR().bq(s)}CH(t,e,s,h){const r=s.filter(t=>t.EY());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.xY()&&!n.KY()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.xY()||o.KY())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].NY()){this.xq(t,e,a),s+=a.length,b.Ln(a);continue}b.Ln(a)}n.VT(t,e,h&&0===s),++s}}wq(t,s){const i=this.U8.JV(),e=this.$c;0===i.length?(t.uE(null),t._M(),t.lE(s),t.fE(s),e.V8(s)):(h.set(0,0,e.lY(),e.cY()),this.lO().aL(t,null,{uL:this,lL:3,devicePixelRatio:this.$c.JH(),cL:this.$c.YH()*this.QP(),fL:this.VP(),LL:h,OL:null,$E:!0}))}xq(e,h,t){t[0].Kk()||(x.Zo(t[0].eF()),x.qo(1),e.Hl(x)),this.$c.bR(),e.$N(!0);const r=v,n=C,o=G;for(const a of t)a.kY(),a.yY(r);const s=t[0],i=s.yH(e);s.SH(e);for(let s=0,i=r.length;s<i;){const u=r[s],l=u.u4(),c=l.l4();if(l.Ak()&&l.OH(c.LH())){(!u.RH()||0<l.PH())&&o.push(u);const f=u.u4().Bj();n.push(u);let t=s+1;for(;t<i;++t){const d=r[t],p=d.u4();if(p.Ak()&&p.OH(p.l4().LH())){if(p.Bj()!==f)break;(d.RH()?(0<p.PH()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].kH()){this.vq(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.u4(),y=g.l4();g.jH(!0),T(y,e),y.AH(m,g,e,h),g.jH(!1)}}else{T(c,e),c.AH(u,l,e,h);for(let t=0,s=o.length;t<s;++t){const M=o[t];if(M!==u){const w=M.u4(),S=w.l4();T(S,e),S.AH(M,w,e,h)}}}s=t,b.Ln(n),b.Ln(o)}else++s}i&&e.SE(i),b.Ln(r),I=null}vq(i,e,h){i.pE();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.u4(),o=n.l4();n.zH(!0),T(o,i),o.BH(r,n,i)}i.mE();for(let t=0,s=h.length;t<s;++t){const a=h[t],u=a.u4(),l=u.l4();T(l,i),l.AH(a,u,i,e),u.zH(!1)}i.yE()}e7(){const t={sx:this.HP(),sy:this.ZP(),s:this.QP(),a:this.VP(),w:this.im(),h:this.pm(),ortho:this.Tk(),vpX:this.hY(),vpY:this.rY(),fv:this.F7,persist:this.P7,fx:this.U8.yT(),layers:{},dynamicLayers:[]};for(const s of this.E7)if(s.BV()){const i=s.xk();t.dynamicLayers.push({sid:s.zV(),name:s.Jc(),parentSid:i?i.zV():null,siblingIndex:s.FV(),data:s.e7()})}else t.layers[s.zV().toString()]=s.e7();return t}h7(t){this.x8=t.sx,this.v8=t.sy,this.T8=t.s,this.b8=t.a,this.Um=t.w,this.Wm=t.h,this.d7=!!t.ortho,t.hasOwnProperty("vpX")&&(this.p7=t.vpX),t.hasOwnProperty("vpY")&&(this.m7=t.vpY),this.F7=!!t.fv,this.P7=t.persist,this.U8.MT(t.fx),this.H8=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.i9(e);h&&h.h7(i)}if(t.hasOwnProperty("dynamicLayers")){this.pk(),this.$c.PP();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,u=o.name,l=o.parentSid,c=o.siblingIndex,f=o.data;if(this.B7(),!this.s9(u)&&!this.i9(a)){let t,s;if(null===l)t=null,s=this.N7;else{if(!(t=this.i9(l)))continue;s=t.Gk()}const d=b.ir(b.s8,this,t,{name:u,sid:a,YJ:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({Oj:d,siblingIndex:c}),d.h7(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.Oj,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.kV(),this.H7(),this.V7()}B3(){return this.j7}FO(){return this.z7}Cq(t){t.layout=this.B3();const s=this.$c,i=s.Gq()&&!s.UO().OP();i&&e.StartMeasuringScriptTime(),this.z7.dispatchEvent(t),i&&e.AddScriptTime()}U9(t){return t.layout=this.B3(),this.z7.Wf(t)}W9(t){return t.layout=this.B3(),this.$c.U9(t)}Iq(){this._q(this.N7)}_q(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Jc()),this._q(e.Gk(),s+1)}}}{const Ir=self.Rs;Ir.Dq=class extends Ir.$h{#S6;#Nq=[];#Eq=new Map;#Aq=new Map;#Lq=null;#Oq=[];#Rq=null;#Pq=0;#kq=null;constructor(t){super(),this.#S6=t}er(){this.#S6=null,this.#Lq=null,this.#Rq=null,this.#kq=null,Ir.Ln(this.#Nq),this.#Eq.clear(),this.#Aq.clear(),Ir.Ln(this.#Oq)}Wb(t){const s=Ir.ir(Ir.a7,this,this.#Nq.length,t);this.#Nq.push(s),this.#Eq.set(s.Jc().toLowerCase(),s),this.#Aq.set(s.zV(),s)}E4(){return this.#S6}Fq(t){this.#Rq=t}jq(){if(this.#Rq)return this.#Rq;if(this.#Nq.length)return this.#Nq[0];throw new Error("no first layout")}zq(t){return this.#Eq.get(t.toLowerCase())||null}Bq(t){return this.#Aq.get(t)||null}Uq(t){return t=Ir.lr(Math.floor(t),0,this.#Nq.length-1),this.#Nq[t]}Q3(t){return"number"==typeof t?this.Uq(t):this.zq(t.toString())}V3(){return this.#Nq}I9(t){this.#Lq=t}z3(){return this.#Lq}Wq(t){if(this.#Oq.includes(t))throw new Error("layout already running");this.#Oq.push(t)}Qq(t){const s=this.#Oq.indexOf(t);if(-1===s)throw new Error("layout not running");this.#Oq.splice(s,1)}*Jq(){this.#Lq&&(yield this.#Lq),this.#Oq.length&&(yield*this.#Oq)}Vq(t){return this.#Lq===t||this.#Oq.includes(t)}rq(t){if(t)this.#Pq++;else{if(this.#Pq<=0)throw new Error("already unset");this.#Pq--}}RP(){return 0<this.#Pq}q3(t){this.#kq=t}R9(){this.#kq=null}H3(){return!!this.#kq}Yq(){return this.#kq}Hq(){const t=this.z3();t&&t.H7()}qq(){const t=this.z3();t&&t.V7()}}}{const S=self.Rs,_r=new RegExp("<(.+?)>","g");S.Zq=class extends S.$h{constructor(t){super(),this.$c=t,this.Xq=S.ir(S.Kq),this.$q=null,this.tZ=[],this.sZ=new Map,this.iZ=new Map,this.eZ=new Map,this.hZ=[],this.rZ=[],this.nZ=[],this.oZ=!1,this.aZ=!1,this.uZ=!1,this.lZ=()=>this.cZ(),this.fZ=()=>this.dZ(),this.pZ=()=>this.mZ(),this.gZ=()=>this.yZ(),this.MZ=t=>this.wZ(t.yz),this.SZ=t=>this.TZ(),this.bZ=t=>this.xZ(),this.vZ=t=>this.CZ(),this.GZ=[],this.IZ=0}er(){this._Z(),this.lZ=null,this.fZ=null,this.pZ=null,this.gZ=null,this.MZ=null,this.bZ=null;for(const t of this.tZ)t.dB(),t.er();S.Ln(this.tZ),this.tZ=null,this.Xq.er(),this.Xq=null,S.Ln(this.hZ),this.hZ=null,S.Ln(this.rZ),this.rZ=null,S.Ln(this.nZ),this.nZ=null,this.sZ.clear(),this.sZ=null,this.iZ.clear(),this.iZ=null,this.eZ.clear(),this.eZ=null,S.Ln(this.GZ),this.GZ=null,this.$c=null}DZ(){const t=this.$c.Rf();t.addEventListener("pretick",this.lZ),t.addEventListener("tick2",this.fZ),t.addEventListener("beforelayoutchange",this.pZ),t.addEventListener("layoutchange",this.gZ),t.addEventListener("instancedestroy",this.MZ),t.addEventListener("beforeload",this.SZ),t.addEventListener("afterload",this.bZ),t.addEventListener("afterlayoutstart",this.vZ)}_Z(){const t=this.$c.Rf();t.removeEventListener("pretick",this.lZ),t.removeEventListener("tick2",this.fZ),t.removeEventListener("beforelayoutchange",this.pZ),t.removeEventListener("layoutchange",this.gZ),t.removeEventListener("instancedestroy",this.MZ),t.removeEventListener("beforeload",this.SZ),t.removeEventListener("afterload",this.bZ),t.removeEventListener("afterlayoutstart",this.vZ)}Wb(t){this.Xq.hc(t);const s=S.EZ.NZ(t,this);this.hc(s),this.AZ(s),this.eZ.set(s.Jc(),0)}LZ(t){const s=this.OZ(),i=t.kF(),e=s.$s(i),h=S.EZ.LZ(i+":"+this.eZ.get(i),e,this);return this.RZ(i),this.hc(h),h}RZ(t){this.eZ.set(t,this.eZ.get(t)+1)}PZ(){for(const t of this.tZ)if(!t.kZ()){const s=t.kF();this.RZ(s)}}FZ(){for(const t of this.eZ.keys())this.eZ.set(t,0)}hc(t){this.tZ.push(t),this.sZ.set(t.Jc().toLowerCase(),t)}p0(t){t.jZ(),t.kZ()||(S.jn(this.tZ,t),S.jn(this.hZ,t),S.jn(this.rZ,t),S.jn(this.nZ,t),this.sZ.delete(t.Jc().toLowerCase()),this.zZ(t),t.cB())||t.er()}nj(t){this.$c.nj(t,this.$q,null)}E4(){return this.$c}OZ(){return this.Xq}BZ(t){this.$q=t}UZ(){return this.$q}*WZ(){for(const t of this.tZ)yield t}*QZ(){for(const t of this.rZ)yield t}JZ(t,s){this.iZ.has(t)||this.iZ.set(t,new Set),this.iZ.get(t).add(s)}AZ(t){for(const s of t.VZ())this.JZ(s,t)}zZ(t){for(const[s,i]of this.iZ.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.iZ.delete(s)}YZ(t){if(this.iZ.has(t))return this.iZ.get(t)}HZ(t,s){if(s)for(const i of this.tZ){const e=s.every(t=>i.qZ(t.yz,t.trackId));if(e&&i.Jc().includes(t.Jc()))return i}}ZZ(t){return this.sZ.get(t.toLowerCase())||null}XZ(t){for(const s of this.hZ)if(s.Jc()===t)return s;for(const i of this.rZ)if(i.Jc()===t)return i;return null}*KZ(i){if(_r.test(i)){_r.lastIndex=0;let t,s=new Set;do{if(t=_r.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.ZZ(r);n&&(yield n)}s.clear()}else{const t=this.ZZ(i);t&&(yield t)}}*$Z(t){for(const s of this.tZ)s.mB(t)&&(yield s)}tX(t){this.hZ.includes(t)||this.hZ.push(t),this.sX()}iX(t){S.jn(this.rZ,t),this.eX()}hX(t){this.rZ.includes(t)?(t.rX(!0),t.nX(!1),t.aX(!1)):(t.rX(!1),t.nX(!0),t.aX(!1),this.hZ.includes(t)||this.hZ.push(t)),this.sX()}uX(t){t.rX(!1),t.nX(!1),t.lX(),S.jn(this.hZ,t),this.eX()}cX(t){t.rX(!1),t.nX(!1),this.rZ.includes(t)&&(t.aX(!0),this.nZ.push(t),S.jn(this.rZ,t)),this.hZ.includes(t)&&t.aX(!0)}fX(t){t.rX(!1),t.nX(!1),t.aX(!1),t.xB(1),S.jn(this.rZ,t)}dX(t){this.cX(t),t.lX()}cZ(){if(!this.E4().k9()&&this.oZ&&!this.aZ){for(this.uZ=!0;this.hZ.length;){const t=this.hZ.pop();(t.pX()?(t.mX(),this.nZ):(t.gX(),this.rZ)).push(t),0!==t.yX()&&(this.IZ=1)}const s=this.$c.MX(),i=this.$c.wX(),e=this.$c.S3();for(let t=this.rZ.length-1;0<=t;t--){const h=this.rZ[t];h&&h.SX(s,e,i)}this.uZ=!1,0!==this.IZ&&this.E4().y4()}}dZ(){if(!this.E4().k9()&&this.oZ&&!this.aZ){let i;for(let t=0,s=this.nZ.length;t<s;t++){const e=this.nZ[t];i=i||new Set,e.jZ(),this.TX(e),i.add(e)}if(i){S.Un(this.nZ,i);for(let t=this.IZ=0,s=this.rZ.length;t<s;t++)if(0!==this.rZ[t].yX()){this.IZ=1;break}}this.eX()}}TX(t){t.cB()||t.bX()&&t.xX()&&t.vX()&&t.CX()}sX(){this.oZ||(this.oZ=!0)}eX(){this.nZ.length||this.rZ.length||this.hZ.length||this.uZ||(this.oZ=!1)}mZ(){for(this.aZ=!0;this.hZ.length;)this.uX(this.hZ.pop());const t=new Set;for(const s of this.rZ){const i=s.mZ();i&&(s.jZ(),t.add(s))}S.Un(this.rZ,t),t.clear();for(const e of this.nZ){const h=e.mZ();h&&(e.jZ(),t.add(e))}S.Un(this.nZ,t),this.eX();for(const r of this.tZ)r.GX()}yZ(){this.aZ=!1}wZ(t){const s=t.TF(),i=this.YZ(s);if(i)if(this.$c.k9())this.GZ.push(t);else for(const e of i)e.kZ()||(e.cB()?this.p0(e):e.bX()||(this.TX(e),this.p0(e)))}TZ(){for(const t of this.hZ.map(t=>t))this.TX(t),this.p0(t);for(const s of this.rZ.map(t=>t))this.TX(s),this.p0(s)}xZ(){for(const t of this.GZ)this.wZ(t);S.Ln(this.GZ);for(const s of this.tZ)s.xZ()}CZ(){const t=this.$c.W3(),s=t.z3();if(s)for(const i of this.tZ){const e=i.IX();e&&s.Jc()===e&&this.hX(i)}}e7(){return{timelinesJson:this._X(),scheduledTimelinesJson:this.DX(),playingTimelinesJson:this.NX(),markedForRemovalTimelinesJson:this.EX(),hasRuntimeListeners:this.oZ,changingLayout:this.aZ,isTickingTimelines:this.uZ}}h7(t){t&&(this.FZ(),this.AX(t.timelinesJson),this.LX(t.scheduledTimelinesJson),this.OX(t.playingTimelinesJson),this.RX(t.markedForRemovalTimelinesJson),this.oZ=!t.hasRuntimeListeners,this.aZ=!!t.changingLayout,this.uZ=!!t.isTickingTimelines,this.PZ(),this.sX(),this.eX())}_X(){return this.tZ.map(t=>t.e7())}AX(t){for(const s of t){let t=this.ZZ(s.name);if(t)t.h7(s);else{const i=this.PX(s);if(!i)continue;const e=this.ZZ(i);(t=this.LZ(e)).h7(s)}t.kX()||this.p0(t)}}PX(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}DX(){return this.FX(this.hZ)}LX(t){this.jX(t,this.hZ)}NX(){return this.FX(this.rZ)}OX(t){this.jX(t,this.rZ)}EX(){return this.FX(this.nZ)}RX(t){this.jX(t,this.nZ)}zX(t,s){if(s)for(const i of s)if(i===t.Jc())return!0;return!1}FX(t){return t.map(t=>t.Jc())}jX(t,s){const i=new Set;for(const e of s)this.zX(e,t)||i.add(e);if(S.Un(s,i),t)for(const h of t){const r=this.ZZ(h);if(r){const n=s.find((s=>t=>t.Jc()===s)(h));n||s.push(r)}}}}}{const Dr=self.Rs,Nr=[0,0],Er=[0,0],Ar=[0,0],Lr=[0,0,0,0,0],Or=new Array(4),Rr=[{x:0,y:0,t:0,_t:0},{x:0,y:0,t:0,_t:0},{x:0,y:0,t:0,_t:0}],Pr={x:0,y:0,t:0,_t:0};Dr.BX=class{constructor(t,s){this.UX=!1,this.WX=t,this.QX=[];let i=null;if(i=s?this.WX.JX(s):Dr.first(this.WX.VX())){const e=i.BB("offsetX"),h=i.BB("offsetY");if(e&&h){this.YX=e,this.HX=h;const r=e.qX(),n=h.qX();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.ZX(),o.XX()),u=n[t],l=(u.ZX(),u.XX());a&&"cubic-bezier"===a.KX()&&l&&"cubic-bezier"===l.KX()?this.QX.push(Dr.ir(Dr.$X,a,l,o,u,this.QX.length)):(a&&"line"===a.KX()&&l&&l.KX(),this.QX.push(Dr.ir(Dr.tK,o,u,this.QX.length)))}this.UX=!0}}}er(){for(const t of this.QX)t.er();Dr.Ln(this.QX),this.QX=null,this.WX=null,this.YX=null,this.HX=null}sK(){return this.UX}iK(){return this.QX}eK(t){const s="relative"===this.YX.hK()?t.hT():0,i="relative"===this.HX.hK()?t.oT():0;for(const e of this.QX)e.eK(s,i)}Zg(s,i,t){let e=NaN,h=this.QX.length;for(let t=0;t<h;t++){const r=this.QX[t];if("cubic-bezier"===r.$x()){const n=r.Zg(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Ar[0]=n[2],Ar[1]=r.cO())}}return Ar}rK(s,i,t){const e=t.tRange;Dr.le(e[0])||(e[0]=0),Dr.le(e[1])||(e[1]=1);let h=NaN,r=this.QX.length;for(let t=0;t<r;t++){const n=this.QX[t];if("cubic-bezier"===n.$x()){const o=n.nK(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Ar[0]=o[2],Ar[1]=n.cO())}}return Ar}oK(t,s){return this.QX[s].oK(t)}aK(t,s){return this.QX[s].aK(t)}},Dr.$X=class{constructor(t,s,i,e,h){this.Ug=h;const r=t.uK("cubic-bezier"),n=i.uK("cubic-bezier"),o=s.uK("cubic-bezier"),a=e.uK("cubic-bezier");this.lK=t.cK(),this.fK=s.cK(),this.dK=t.cK()+r.pK(),this.mK=s.cK()+o.pK(),this.gK=i.cK()+n.yK(),this.MK=e.cK()+a.yK(),this.wK=i.cK(),this.SK=e.cK(),this.TK=0,this.bK=0,this.xK=0,this.vK=0,this.CK=0,this.GK=0,this.IK=0,this._K=0,this.DK=0,this.NK=0,this.EK=0,this.AK=0,this.LK=0,this.RK=0,this.PK=0,this.kK=0,this.FK=0,this.jK=0,this.zK=0,this.BK=0,this.UK=NaN,this.UX=!1,this.WK=100,this.QK=new Array(this.WK+1),this.QK[0]=0,this.JK=0,this.VK=[],this.YK=[];for(let t=0;t<100;t++)this.YK.push({x:0,y:0,t:0,_t:0});this.HK()}er(){Dr.Ln(this.QK),this.QK=null,Dr.Ln(this.VK),this.VK=null,Dr.Ln(this.YK),this.YK=null}$x(){return"cubic-bezier"}cO(){return this.Ug}qK(){return Math.floor(this.JK/25)}ZK(){return 1/this.qK()}eK(t,s){this.XK=t,this.KK=s,this.QK=new Array(this.WK+1),this.QK[0]=0,this.HK(),this.TK=this.lK+this.XK,this.bK=this.fK+this.KK,this.xK=this.dK+this.XK,this.vK=this.mK+this.KK,this.CK=this.gK+this.XK,this.GK=this.MK+this.KK,this.IK=this.wK+this.XK,this._K=this.SK+this.KK,this.DK=3*(this.xK-this.TK),this.NK=3*(this.vK-this.bK),this.EK=3*(this.CK-this.xK),this.AK=3*(this.GK-this.vK),this.LK=3*(this.IK-this.CK),this.RK=3*(this._K-this.GK),this.PK=3*(this.xK-this.TK),this.kK=3*(this.TK+this.CK-2*this.xK),this.FK=this.IK-this.TK+3*(this.xK-this.CK),this.jK=3*(this.vK-this.bK),this.zK=3*(this.bK+this.GK-2*this.vK),this.BK=this._K-this.bK+3*(this.vK-this.GK)}Map(t){if(!this.UX)return NaN;const s=this.$K(t);return Er[0]=this.t$(s),Er[1]=this.s$(s),Er}Zg(t,s){const i=this.i$(100),e=this.e$(t,s,i),h=this.h$(t,s,i,e);return Lr[0]=h.x,Lr[1]=h.y,Lr[2]=h.t,Lr[3]=h._t,Lr}nK(t,s,i){const e=this.i$(100),h=this.r$(t,s,e,i),r=this.h$(t,s,e,h);return Lr[0]=r.x,Lr[1]=r.y,Lr[2]=r.t,Lr[3]=r._t,Lr}oK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.DK+e*this.EK+h*this.LK,n=i*this.NK+e*this.AK+h*this.RK,o=Math.hypot(r,n);return Nr[0]=r/o,Nr[1]=n/o,Nr}aK(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.DK+e*this.EK+h*this.LK,n=i*this.NK+e*this.AK+h*this.RK;return Math.atan2(n,r)}$K(h){if(this.UX){let t=h*this.QK[this.WK],s=0,i=this.WK,e=0;for(;s<i;)e=s+((i-s)/2|0),this.QK[e]<t?s=e+1:i=e;this.QK[e]>t&&e--;const r=this.QK[e];return r===t?e/this.WK:(e+(t-r)/(this.QK[e+1]-r))/this.WK}}t$(t){return this.UX?self.oc.Cc("cubicbezier")(t,this.lK+this.XK,this.dK+this.XK,this.gK+this.XK,this.wK+this.XK):NaN}s$(t){return this.UX?self.oc.Cc("cubicbezier")(t,this.fK+this.KK,this.mK+this.KK,this.MK+this.KK,this.SK+this.KK):NaN}i$(s){if(!(this.VK.length>=(s=s||100))){this.VK=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.PK*i,n=this.kK*e,o=this.FK*h,a=this.jK*i,u=this.zK*e,l=this.BK*h,c=this.TK+r+n+o,f=this.bK+a+u+l;this.YK[t].x=c,this.YK[t].y=f,this.YK[t].t=i,this.YK[t]._t=0,this.VK[t]=this.YK[t]}}return this.VK}e$(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.UK))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n._t=o*o+a*a,n._t<h&&(h=n._t,r=t)}else{for(let t=this.UK;t<this.UK+5&&!(t>=e.length);t++){const u=e[t],l=u.x-s,c=u.y-i;u._t=l*l+c*c,u._t<h&&(h=u._t,r=t)}for(let t=this.UK;t>this.UK-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f._t=d*d+p*p,f._t<h&&(h=f._t,r=t)}}return this.UK=r}r$(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.UK))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,u=o.y-i;o._t=a*a+u*u,o.t>=h[0]&&o.t<=h[1]&&o._t<r&&(r=o._t,n=t)}else{for(let t=this.UK;t<this.UK+5&&!(t>=e.length);t++){const l=e[t],c=l.x-s,f=l.y-i;l._t=c*c+f*f,l.t>=h[0]&&l.t<=h[1]&&l._t<r&&(r=l._t,n=t)}for(let t=this.UK;t>this.UK-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d._t=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d._t<r&&(r=d._t,n=t)}}return this.UK=n}h$(n,o,a,u){let l=a[u],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===u?0:u-1,i=u===t-1?t-1:u+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.PK*f,g=this.kK*d,y=this.FK*p,M=this.jK*f,w=this.zK*d,S=this.BK*p,T=this.TK+m+g+y,b=this.bK+M+w+S,x=T-n,v=b-o,C=x*x+v*v;if(C<c){c=C,u=t,Pr.x=T,Pr.y=b,Pr.t=f,Pr._t=C,l=Pr;break t}const G=Rr[t-1];G.x=T,G.y=b,G.t=f,G._t=C,Or[t]=G}Or[3]=a[i],a=Or}while(t++<20);return l}HK(){this.UX=!0;let s=this.t$(0),i=this.s$(0),e=0;for(let t=1;t<=this.WK;t++){const h=this.t$(.01*t),r=this.s$(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.QK[t]=e,s=h,i=r}this.JK=e}},Dr.tK=class{constructor(t,s,i){this.Ug=i,this.n$=t.cK(),this.o$=s.cK(),this.XK=0,this.KK=0}er(){}$x(){return"line"}cO(){return this.Ug}eK(t,s){this.XK=t,this.KK=s}hT(){return this.n$+this.XK}oT(){return this.o$+this.KK}}}{const T=self.Rs;T.EZ=class extends T.$h{constructor(t,s,i){super(),this.$c=i.E4(),this.a$=i,this.u$=s,this.nr=t,this.l$=[],this.c$=0,this.f$=null,this.d$=0,this.p$(),this.m$=null,this.g$=null,this.y$=0,this.M$=0,this.w$=1,this.S$=0,this.T$=1,this.b$=!1,this.x$=!1,this.v$=!1,this.C$=!0,this.G$=!1,this.I$=!1,this._$=-1,this.D$=!1,this.N$=!1,this.E$=!1,this.A$=!1,this.L$=NaN,this.O$=[""],this.R$="",this.P$=!1,this.IZ=0,this.k$=0,this.F$=null}static NZ(t,s){const i=s.OZ(),e=i.j$(),h=i.$s(t[e]),r=T.ir(T.EZ,t[e],h,s);return r.z$(!0),r}static LZ(t,s,i){return T.ir(T.EZ,t,s,i)}er(){if(!this.cB()){const t=this.$c.Rf();this.a$.uX(this),this.a$.dX(this);for(const s of this.l$)s.er();T.Ln(this.l$),this.l$=null,this.$c=null,this.a$=null,this.u$=null,this.G$=!0,this.m$=null,this.g$=null,this.B$(t)}}B$(t){const s=T.ir(T.Event,"timelinestatereleased");s.U$=this,t.dispatchEvent(s)}$x(){return 0}p$(){for(const t of this.u$.Q$().W$())this.c$=this.l$.push(T.J$.Wb(this,t))}V$(){return this.a$}E4(){return this.$c}VX(){return this.l$}Y$(e,h,r,n){if(this.k$){let i;for(let s=0;s<this.l$.length;s++){let t=this.l$[s];if(e===t.OB()){const o=t.BB(r);o&&h.constructor===o.H$().constructor&&o.hK()===n.hK()&&(i=i||[]).push(o)}}return i}}kX(){return!!this.l$.length}JX(t){for(const s of this.l$)if(T.ph(s.jB(),t))return s;return null}q$(t){for(const s of this.l$)if(!s.Z$()&&T.ph(s.Jc(),t))return s;return null}N6(t){this.nr=t}Jc(){return this.nr}X$(){return this.u$}kF(){return this.u$.Jc()}MB(){return this.u$.MB()}yB(t){this.u$.yB(t)}K$(){return this.u$.K$()}$$(t){this.u$.$$(t)}ttt(){return this.u$.ttt()}stt(t){this.u$.stt(t)}hK(){return this.u$.hK()}itt(t){this.u$.hK(t)}LB(t){for(const s of this.VX())s.LB(t)}SB(){return this.u$.SB()}wB(t){return this.u$.wB(t)}bB(){return this.u$.bB()}TB(t){return this.u$.TB(t)}Ez(){return this.u$.Ez()}ett(t){return this.u$.ett(t)}xB(t){return this.w$=t}vB(){return this.w$}IX(){return this.u$.IX()}htt(){return this.u$.htt()}ntt(){return this.u$.ntt()}ott(){return this.S$}att(){return!this.IsPlaying()||0<this.w$}GB(){return this.m$||(this.m$=new Promise(t=>{this.g$=t})),this.m$}lX(){this.m$&&(this.g$(),this.m$=null,this.g$=null)}utt(t){this.O$=T.EZ.ltt(t),this.P$=!0}CB(){return this.O$}ctt(){return this.P$&&(this.R$=this.O$.join(" ")),this.P$=!1,this.R$}mB(t){if(!this.O$)return!1;if(!this.O$.length)return!1;const s=T.EZ.ltt(t);return!!s&&!!s.length&&s.every(T.EZ.ftt,this)}dtt(){T.Y9.Timeline&&this.constructor===T.EZ&&(T.Y9.Timeline.J9.PushTriggerTimeline(this),this.a$.nj(T.Y9.Timeline.J9.OnTimelineStarted),this.a$.nj(T.Y9.Timeline.J9.OnTimelineStartedByName),this.a$.nj(T.Y9.Timeline.J9.OnTimelineStartedByTags),this.a$.nj(T.Y9.Timeline.J9.OnAnyTimelineStarted),T.Y9.Timeline.J9.PopTriggerTimeline())}ptt(){this._$=this.$c.mtt()}CX(){this.E$||(this.E$=!0,T.Y9.Timeline&&this.constructor===T.EZ&&(T.Y9.Timeline.J9.PushTriggerTimeline(this),this.a$.nj(T.Y9.Timeline.J9.OnTimelineFinished),this.a$.nj(T.Y9.Timeline.J9.OnTimelineFinishedByName),this.a$.nj(T.Y9.Timeline.J9.OnTimelineFinishedByTags),this.a$.nj(T.Y9.Timeline.J9.OnAnyTimelineFinished),T.Y9.Timeline.J9.PopTriggerTimeline()))}rX(t){this.b$=t}gtt(){return this._$===this.$c.mtt()}IsPlaying(t=!1){return!!this.gtt()||!(!this.ytt()||t)||this.b$}Mtt(){return this.IsPlaying(!0)}_B(){return this.wtt()}wtt(){return!(this.cB()||this.ytt()||this.Mtt()||this.xX())}nX(t){this.x$=t}ytt(){return this.x$}Stt(t){this.C$=t;const s=this.HE();(s<=0||s>=this.MB())&&(this.C$=!0)}xX(){return this.C$}cB(){return this.G$}aX(t){this.I$=t}pX(){return this.I$}Ttt(t){this.D$=t}btt(){return this.D$}z$(t){this.N$=!!t}kZ(){return this.N$}vX(){return this.v$}HE(){return this.y$}gB(t){const s=this.HE();this.xtt(t),this.Stt(!1),this.xX()||this.Ttt(!0),!this.Mtt()&&!this.ytt()&&this.v$||(this.Mtt()||this.ytt()||this.v$?this.Mtt()?this.dB():this.ytt()&&(this.a$.uX(this),this.vtt()):this.vtt()),this.Ctt(),this.Gtt(this.HE(),!1,!0,!0,s),this.Itt(),this.IZ&&this.E4().y4(),this._tt()}xtt(t){(t=T.le(t)?t:this.MB())<0?this.y$=0:t>=this.MB()?this.y$=this.MB():this.y$=t}Dtt(t){(t=T.le(t)?t:this.MB())<0?this.y$=0:t>=this.MB()?this.y$=this.MB():this.y$=t;for(const s of this.l$)s.Ntt()}_tt(){T.Y9.Timeline&&this.constructor===T.EZ&&(T.Y9.Timeline.J9.PushTriggerTimeline(this),this.a$.nj(T.Y9.Timeline.J9.OnTimeSet),this.a$.nj(T.Y9.Timeline.J9.OnTimeSetByName),this.a$.nj(T.Y9.Timeline.J9.OnTimeSetByTags),T.Y9.Timeline.J9.PopTriggerTimeline())}Ett(){if(!this.SB())if(this.bB()&&1===this.S$){if(this.att()){if(this.HE()>=this.MB())return!1}else if(this.HE()<=0)return!1}else if(!this.SB()&&!this.bB())if(this.att()){if(this.HE()>=this.MB())return!1}else if(this.HE()<=0)return!1;return!0}pB(){this.cB()||this.Ett()&&this.Play(!0)}Play(t=!1){return!this.cB()&&!this.ytt()&&(this.Mtt()&&this.gtt()?this.Att():!this.Mtt()&&!!(this.xX()||t||this.btt())&&this.Ltt())}Att(){return this.Ttt(!1),this.a$.iX(this),this.a$.hX(this),this.GB(),!0}Ltt(){return this.Ttt(!1),this.a$.hX(this),this.GB(),!0}dB(t=!1){this.cB()||(this.Stt(t),this.a$.cX(this),this.xX()&&this.lX())}i0(t=!0,s=!1){if(!this.cB()){if(!this.Mtt()&&this.ytt())return this.a$.uX(this);if(!this.xX()){this.dB(!0),this.att()?this.xtt(0):this.xtt(this.MB());const i=this.HE();this.Ctt(),s?this.Ott(i):this.Gtt(i,!1,!1,!0),t&&this._tt(),this.Itt(),this.IZ&&t&&this.E4().y4()}}}Rtt(){this.i0(!1,!0)}Ott(t){this.Gtt(t,!1,!1,!0,NaN,!1,!0)}mZ(){if(!this.cB()){if(!this.E4().k9()&&this.Ptt())return!1;this.a$.fX(this),this.E4().k9()||this.Rtt()}return!0}vtt(){this.gX(!0)}mX(){this.gX(!1,!0),this.rX(!1),this.nX(!1)}gX(t=!1,s=!1){if(!this.pX()||s){if(t){this.E$=!1,this.v$=!0,this.A$=!0,this.Ctt();for(const i of this.l$)i.gX()}else if(this.rX(!0),this.nX(!1),this.dtt(),this.xX()){this._$=-1,0!==this.S$&&(this.w$=Math.abs(this.w$)),this.S$=0,this.T$=1,this.C$=!1,this.E$=!1,this.v$=!0,this.A$=!0,this.att()?this.xtt(0):this.xtt(this.MB()),this.Ctt();for(const e of this.l$)e.gX()}else{this.A$=!0,this.E$=!1,this.Ctt();for(const h of this.l$)h.ktt()}this.Itt()}}yX(){return this.IZ}Ctt(){this.k$=0;for(const t of this.l$)t.z_()&&(this.k$=1)}Itt(){this.IZ=0;for(const t of this.l$)t.Ftt(),0===this.IZ&&1===t.yX()&&(this.IZ=1),this.f$||1!==t.jtt()||(this.f$||(this.f$=[]),this.d$=this.f$.push(t))}SX(t,s,i){if(this.ntt()){if(0===t&&0===this.L$)return;this.L$=t,t=i}else{if(0===i&&0===this.L$)return;t=this.L$=i,s=1}const e=this.y$+this.M$,h=t*s*this.w$,r=e+h,n=this.u$.ztt;r<0?(this.y$=0,this.M$=-r):n<=r?(this.y$=n,this.M$=this.y$-r):(this.y$=r,this.M$=0);let o=!1,a=!1,u=this.SB(),l=this.bB();u||l?u&&!l?0<this.w$?this.y$>=n&&(this.Dtt(0),a=!0):this.y$<=0&&(this.Dtt(n),a=!0):!u&&l?0<this.w$?this.y$>=n&&(this.xtt(n),this.xB(-1*this.vB()),a=!0,1===this.S$?this.T$<this.Ez()?(this.T$++,this.S$=0):o=!0:0===this.S$&&(this.S$=1)):this.y$<=0&&(this.xtt(0),this.xB(-1*this.vB()),a=!0,1===this.S$?this.T$<this.Ez()?(this.T$++,this.S$=0):o=!0:0===this.S$&&(this.S$=1)):u&&l&&(0<this.w$?this.y$>=n&&(this.xtt(n),this.xB(-1*this.vB()),a=!0,this.S$++,T.wrap(this.S$,0,2)):this.y$<=0&&(this.xtt(0),this.xB(-1*this.vB()),a=!0,this.S$++,T.wrap(this.S$,0,2))):0<this.w$?this.y$>=n&&(this.T$<this.Ez()?(this.T$++,this.Dtt(0),a=!0):(this.xtt(n),o=!0)):this.y$<=0&&(this.T$<this.Ez()?(this.T$++,this.Dtt(n),a=!0):(this.xtt(0),o=!0));let c,f=this.c$;if(o){for(c=0;c<f;c++)this.l$[c].Btt();this.dB(!0),this.ptt()}else{const d=this.d$;for(c=0;c<d;c++)this.f$[c].Utt();if(1===this.k$)for(c=0;c<f;c++){const p=this.l$[c],m=p.Wtt(),g=this.y$-m,y=e-m;g<0&&0<y?(this.y$=m<0?0:n<=m?n:m,p.Rc(m,!0,!1,a,this.A$,!1)):p.Rc(this.y$,!0,!1,a,this.A$,!1)}else for(c=0;c<f;c++)this.l$[c].Rc(this.y$,!0,!1,a,this.A$,!1);for(c=0;c<d;c++)this.f$[c].Qtt();this.A$&&(this.A$=!1)}}Gtt(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.l$)o.Utt();for(const a of this.l$){let t=s;if("number"==typeof r&&!isNaN(r)){const u=this.HE(),l=u-a.Wtt(),c=r-a.Wtt();l<0&&0<c&&(t=a.Wtt(),this.xtt(t))}a.Rc(t,i,e,h,this.A$,n)}for(const f of this.l$)f.Qtt();this.A$&&t&&(this.A$=!1)}Jtt(){const t=this.u$.Q$().Vtt(),s=T.J$.Wb(this,t);return this.c$=this.l$.push(s),s}jZ(){if(!this.cB())for(const t of this.l$)t.Ytt()}GX(){for(const t of this.l$)t.GX()}Htt(){for(const t of this.l$)t.qtt()}Ztt(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.l$[i];return e?(e.Xtt(s),void this.a$.JZ(s.TF(),this)):void 0}for(const h of this.l$)if(h.Z$())if(t){if(h.jB()===t){h.Xtt(s),this.a$.JZ(s.TF(),this);break}}else if(!h.Ktt()){h.Xtt(s),this.a$.JZ(s.TF(),this);break}}}qZ(t,s){for(const i of this.l$)if(i.Z$())if(s){if(s===i.jB()&&t===i.OB())return!0}else if(t===i.OB())return!0;return!1}bX(){return this.l$.some(t=>!t.Z$()||t.$tt())}Ptt(){return this.l$.some(t=>{if(t.Z$()){if(!t.$tt())return!1;const s=t.TF();return!!s&&s.MV()}return!1})}BB(t){for(const s of this.VX())for(const i of s.tst())if(i.sst()===t)return i}ist(t){for(const s of this.l$)if(t===s.OB())return s;return null}est(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.VX())for(const h of e.hst()){const r=s.every(t=>h.rst(t));if(r)return h}}VZ(){const t=[];for(const s of this.VX())t.push(s.TF());return t.filter(t=>t)}xZ(){for(const t of this.VX())t.xZ()}e7(){return{tracksJson:this.nst(),name:this.nr,playheadTime:this.HE(),playbackRate:this.w$,pingPongState:this.S$,currentRepeatCount:this.T$,isPlaying:this.b$,isScheduled:this.x$,initialStateSet:this.v$,finishedTriggers:this.E$,complete:this.C$,released:this.G$,markedForRemoval:this.I$,completedTick:this._$,implicitPause:this.D$,isTemplate:this.N$,tags:this.O$.join(" "),stringTags:this.R$,tagsChanged:this.P$,firstTick:this.A$}}h7(t){t&&(this.ost(t.tracksJson),this.nr=t.name,this.y$=t.playheadTime,this.w$=t.playbackRate,this.S$=t.pingPongState,this.T$=t.currentRepeatCount,this.b$=!!t.isPlaying,this.x$=!!t.isScheduled,this.v$=!!t.initialStateSet,this.E$=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.C$=!!t.complete,this.G$=!!t.released,this.I$=!!t.markedForRemoval,this._$=t.completedTick,this.D$=!!t.implicitPause,this.N$=!!t.isTemplate,this.O$=t.tags.split(" "),this.R$=t.stringTags,this.P$=!!t.tagsChanged,this.A$=!!t.firstTick)}nst(){return this.l$.map(t=>t.e7())}ost(t){this.Htt(),t.forEach((t,s)=>{const i=this.l$[s];i.h7(t)}),this.l$.filter(t=>t.$tt())}static ftt(t){const s=this.CB();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static ltt(t){if(T.Pe(t))return t.slice(0);if(T.Se(t))return t.split(" ");throw new Error("invalid tags")}ast(){return this.F$||(this.F$=T.ir(self.NB,this)),this.F$}}}{const kr=self.Rs;kr.J$=class extends kr.$h{constructor(t,s){super(),this.WX=t,this.ust=s,this.lst=s.Q$(),this.cst=NaN,this.fst=NaN,this.dst=null,this.pst=null,this.mst=!1,this.O_=0<s.Wtt(),this.gst=!1,this.yst=!1,this.Mst=NaN,this.wst=null,this.Sst=this.ust.bst().Tst(),this.xst=[],this.vst(),this.Cst=0,this.IZ=0,this.Gst=0}static Wb(t,s){return kr.ir(kr.J$,t,s)}er(){this.Sst=null;for(const t of this.xst)t.er();kr.Ln(this.xst),this.xst=null,this.WX=null,this.dst=null,this.pst=null,this.ust=null,this.wst=null}vst(){for(const t of this.ust._st().Ist())this.xst.push(kr.Dst.Wb(this,t))}Ytt(){for(const t of this.xst)t.Ytt()}GX(){for(const t of this.xst)t.GX();this.dst=null,this.pst=null}Nst(){return this.WX}E4(){return this.WX.E4()}hst(){return this.Sst||(this.Sst=this.ust.bst().Tst()),this.Sst}tst(){return this.xst}BB(s){for(let t=0;t<this.xst.length;t++){const i=this.xst[t];if(i.sst()===s)return i}}Est(){this.dst||this.OB()}Ast(){return!!this.dst&&!this.dst.jU()}$tt(){if(!this.Z$())return!1;const t=this.Lst(),s=this.E4().h4(t);return!!s&&!s.jU()}TF(){if(this.Z$()){const t=this.Ost();if(-1!==t)return this.E4().aV(t)}}Rst(){return this.WX.VX().indexOf(this)}qtt(){this.dst=null,this.cst=NaN,this.pst=null,this.fst=NaN,this.mst=!0}Ktt(){return!!this.dst}OB(){if(!this.mst){if(!this.dst||!this.Ast()){const t=this.Lst();this.dst=this.E4().h4(t)}return this.dst}}Xtt(t){if(this.mst=!1,this.dst!==t){this.GX(),this.dst=t,this.fst=t.TF().cO(),this.cst=t.RF(),this.pst=t.u4();for(const s of this.Pst()){const i=s.kst,e=s.Fst,h=i.jst();switch(h){case"instance-variable":{e.zst();const r=t.TF(),n=r.Bst(s.name),o=r.Ust(n),a=r.Wst(n);o===s.name&&a===s.type&&e.Qst(n);break}case"behavior":{const u=s.pz,l=this.TF(),c=t.TF(),f=e.gz(c);if(u&&f){const d=u.Jc();l.Jst(d),c.Jst(d),e.zst(),e.Vst(f.zV())}break}}}}}*Pst(){for(const t of this.xst){const s=t.H$(),i=this.TF(),e={kst:t,Fst:s};switch(t.jst()){case"world-instance":e.property=t.sst();break;case"instance-variable":{const h=s.zst();e.name=i.Ust(h),e.type=i.Wst(h);break}case"effect":{const r=i.FP(),n=s.Yst(r);e.Hst=n;break}case"behavior":{const o=s.gz(i);e.pz=o;break}case"plugin":e.dP=i.pP()}yield e}}u4(){if(!this.pst||!this.Ast()){const t=this.OB();t&&(this.pst=t.u4())}return this.pst}qst(){return this.ust}Lst(){return isNaN(this.cst)?this.ust.Lst():this.cst}Zst(t){this.ust.Zst(t)}ttt(){return this.ust.ttt()}stt(t){this.ust.stt(t)}hK(){return this.ust.hK()}jB(){return this.ust.jB()}Wtt(){return this.ust.Wtt()}Xst(){return this.ust.Xst()}Kst(t){this.ust.Kst(t)}itt(t){this.ust.itt(t)}LB(t){for(const s of this.hst())s.LB(t);for(const i of this.tst())i.LB(t)}$st(){return this.ust.$st()}tit(t){this.ust.tit(t)}Ost(){return isNaN(this.fst)?this.ust.Ost():this.fst}sit(t){this.ust.sit(t)}iit(t){this.ust.iit(t)}eit(){const t=this.OB();if(t){const s=t.rz();if(s.hit())return t.rz().eit()}return this.ust.eit()}rit(t){this.ust.rit(t)}nit(){const t=this.OB();if(t){const s=t.rz();if(s.hit())return t.rz().nit()}return this.ust.nit()}$x(){return this.ust.$x()}Jc(){return this.ust.Jc()}Z$(){return 0===this.$x()}oit(){return 1===this.$x()}ait(){return 2===this.$x()}uit(){return this.Cst}yX(){return this.IZ}jtt(){return this.Gst}z_(){return this.O_}Ntt(){for(const t of this.xst)t.Ntt()}gX(){if(this.Est(),this.Ast()||!this.Z$()){const t=this.Nst(),s=t.att(),i=s?0:this.Xst();for(const h of this.xst)h.gX(i),0===this.Cst&&1===h.uit()&&(this.Cst=1),0===this.IZ&&1===h.yX()&&(this.IZ=1);this.Gst=0;const e=this.xst.some(t=>t.jtt());e&&(this.Gst=1),this.wst=this.lit(i),this.gst=!1,this.yst=!1,this.Rc(i),this.cit(this.lit(i))}}ktt(){if(this.Est(),this.Ast()||!this.Z$()){this.WX.att();const t=this.WX.HE()-this.Wtt();this.wst=this.lit(t);for(const s of this.xst)s.ktt(t)}}Btt(){if(!this.Nst().xX()&&(this.Est(),this.Ast()||!this.Z$())&&!this.O_){const t=this.WX.HE(),s=this.Wtt()+this.Xst();s<=t?this.Rc(this.Xst(),!0,!1,!0,!1,!1,!0):t<=0&&this.Rc(0,!0,!1,!0,!1,!1,!0)}}Ftt(){for(let t=0,s=this.xst.length;t<s;t++){const i=this.xst[t];i.Ftt(),0===this.Cst&&1===i.uit()&&(this.Cst=1),0===this.IZ&&1===i.yX()&&(this.IZ=1)}}Utt(){const s=this.xst.length;for(let t=0;t<s;t++)this.xst[t].Utt()}Rc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.dst||this.OB();const o=this.dst&&!this.dst.jU(),a=0===this.ust.lf;if((o||!a)&&!(r&&a&&this.TF().MV()||(i-=this.Wtt())<0)){this.fit(i,t),this.dit(i,t,s);for(let t=0,s=this.xst.length;t<s;t++)this.xst[t].Rc(i,e,h,n);this.pit(i,t),0!==this.Cst&&(this.pst||(this.pst=this.dst.u4()),this.pst)&&this.pst.Rj()}}Qtt(){const s=this.xst.length;for(let t=0;t<s;t++)this.xst[t].Qtt()}fit(t,s){if(s&&this.O_&&!this.gst){const i=this.Nst();if(i.att()){if(t<0)return}else if(t>this.Xst())return;for(const e of this.xst)e.gX();this.gst=!0}}pit(t,s){if(s&&this.O_&&!this.yst){const i=this.Nst();if(i.att()){if(t>=this.Xst()){for(const e of this.xst)e.Rc(this.Xst(),!1,!0);this.yst=!0}}else if(t<=0){for(const h of this.xst)h.Rc(0,!1,!0);this.yst=!0}}}dit(t,s,i){if(!i&&s&&kr.Y9.Timeline){const e=this.Nst(),h=this.wst.ZX(),r=this.wst.HE(),n=h?h.HE():e.MB();if(t<=r||n<=t)if(this.wst=this.lst.mit(t,this.ust),e.att())h&&this.cit(this.wst);else{const o=this.wst.ZX();o&&this.cit(o)}}}lit(t){const s=this.lst.git(t,this.ust);return s||this.lst.mit(t,this.ust)}cit(t){if(kr.Y9.Timeline){const s=this.Nst(),i=s.V$();kr.Y9.Timeline.J9.PushTriggerTimeline(s),kr.Y9.Timeline.J9.PushTriggerKeyframe(t),i.nj(kr.Y9.Timeline.J9.OnAnyKeyframeReached),i.nj(kr.Y9.Timeline.J9.cit),kr.Y9.Timeline.J9.PopTriggerTimeline(s),kr.Y9.Timeline.J9.PopTriggerKeyframe(t)}}yit(){const t=this.ust.bst(),s=t.Mit();return s}wit(){const t=this.ust._st(),s=t.Sit(),i=kr.Dst.Wb(this,s);return this.xst.push(i),i}Tit(t){const s=this.ust.bst();s.bit(t)}xit(t){for(const s of this.xst)s.xit(t)}vit(){for(const t of this.xst)t.vit()}Cit(){if(this.Est(),this.Ast()||!this.Z$())for(const t of this.xst)t.Cit()}Git(){if(this.Est(),this.Ast()||!this.Z$()){let t=!1;for(const s of this.xst){const i=s.Git();!t&&i&&(t=!0)}if(t){const e=this.yit();e.gB(this.Nst().HE()),e.LB("noease"),e.tit(!0),e.utt("")}}}xZ(){isNaN(this.Mst)||this.Iit(this.Mst),this.Mst=NaN}e7(){const t=this.OB(),s=t?t.RF():this.Lst();return{propertyTracksJson:this._it(),lastKeyframeDataItemJson:this.Dit(),initialStateOfNestedSet:this.gst,endStateOfNestedSet:this.yst,instanceUid:s,cleared:this.mst}}h7(t){if(t){this.Nit(t.propertyTracksJson),this.Eit(t.lastKeyframeDataItemJson),this.Mst=t.instanceUid,this.gst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.gst=t.initialStateOfNestedSet),this.yst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.yst=t.endStateOfNestedSet),this.mst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.xst)0===this.Cst&&1===s.uit()&&(this.Cst=1),0===this.IZ&&1===s.yX()&&(this.IZ=1);this.Gst=0,this.xst.some(t=>t.jtt())&&(this.Gst=1)}}Dit(){const t=this.ust.bst();return t.Ait(this.wst)}_it(){return this.xst.map(t=>t.e7())}Nit(t){t.forEach((t,s)=>{const i=this.xst[s];i.h7(t)})}Iit(t){if(kr.le(t)){const s=this.E4().h4(t);if(s){const i=this.Nst();i.Ztt(this.ust.jB(),s,this.Rst())}}}Eit(t){const s=this.ust.bst();this.wst=s.Lit(t)}}}{const Fr=self.Rs;Fr.Dst=class extends Fr.$h{constructor(t,s){super(),this.Oit=t,this.Rit=s,this.Pit=s._st(),this.Cst=0,this.IZ=0,this.Gst=0,this.kit=this.H$(),this.Fit=this.Rit.zit().jit(),this.Bit=null,this.Uit=null}static Wb(t,s){return Fr.ir(Fr.Dst,t,s)}er(){this.Oit=null,this.kit&&(this.kit.er(),this.kit=null),this.Fit=null,this.Rit=null,this.Pit=null}uit(){return this.Cst}yX(){return this.IZ}jtt(){return this.Gst}Wit(){return!!this.Uit}Qit(t){this.Uit=t}Jit(){return this.Uit}Vit(){return this.Oit}Yit(){return this.Rit}_st(){return this.Pit}Nst(){return this.Oit.Nst()}E4(){return this.Oit.E4()}OB(){return this.Oit.OB()}H$(){if(!this.kit){let t=this.Rit.jst(),s;switch(t){case"behavior":s=new Fr.Dst.Hit(this);break;case"effect":s=new Fr.Dst.qit(this),this.IZ=1;break;case"instance-variable":s=new Fr.Dst.Zit(this);break;case"plugin":s=new Fr.Dst.Xit(this),this.IZ=1;break;case"world-instance":s=new Fr.Dst.Kit(this),this.IZ=1,this.Cst=1;break;case"value":s=new Fr.Dst.$it(this);break;case"audio":s=new Fr.Dst.tet(this)}this.kit=s}return this.kit}jst(){return this.Rit.jst()}iet(t){this.Rit.iet(t)}eet(){return this.Rit.het()}ret(t){this.Rit.net(t)}zB(){return this.H$().oet()}sst(){return this.Rit.aet()}uet(t){this.Rit.let(t)}cet(){return this.Rit.$x()}fet(t){this.Rit.det(t)}pet(){return this._st().met(this.Rit).$x()}yet(){return this.Rit.yet()}Met(t){this.Rit.Met(t)}wet(){return this.Rit.wet()}Tet(t){this.Rit.Tet(t)}$st(){return this.Rit.$st()}tit(t){this.Rit.tit(t)}ttt(){return this.Rit.ttt()}stt(t){this.Rit.stt(t)}hK(){return this.Rit.hK()}itt(t){this.Rit.itt(t)}LB(t){for(const s of this.bet())s.LB(t)}xet(){return this.Rit.xet()}bet(){return this.Fit||(this.Fit=this.Rit.zit().jit()),this.Fit}qX(){return this.Rit.zit().qX()}vet(t){return this.Pit.vet(t,this.Rit)}Cet(t){return this.Pit.Cet(t,this.Rit)}Get(t){let s=this.Pit.vet(t,this.Rit),i;return i=s?this.Pit.Iet(t,this.Rit):(s=this.Pit.Cet(t,this.Rit),this.Pit._et(t,this.Rit)),{start:s,end:i}}*Det(){for(const t of this.bet())yield t.cK()}*Net(){for(const t of this.bet())yield t.HE()}Ytt(){this.H$().Ytt()}GX(){this.H$().GX()}Eet(){return this.H$().Eet()}Ntt(){this.H$().Ntt()}gX(t){this.H$().gX(),this.Bit=this.Aet(t),this.Ftt()}ktt(t){this.H$().ktt(),this.Bit=this.Aet(t)}Ftt(){const t=this.Vit();if(this.Gst=0,t.Z$()){const s=this.Nst(),i=t.OB(),e=this.H$(),h=this.sst(),r=e.Let();if(r){const n=s.Y$(i,e,h,this);n&&n.length&&(this.Gst=1)}else this.Gst=0}}Aet(t){const s=this.Nst(),i=this.Pit.vet(t,this.Rit);return i||(s.att()?this.Pit.Cet(t,this.Rit):this.Pit._et(t,this.Rit))}Utt(){this.kit.Utt()}Rc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.Pit.Cet(t,this.Rit);else{if(this.Bit){const o=this.Nst(),a=this.Bit.ZX(),u=this.Bit.HE(),l=a?a.HE():o.MB();(t<=u||l<=t)&&(this.Bit=this.Pit.Cet(t,this.Rit),n=!0)}else this.Bit=this.Pit.Cet(t,this.Rit),n=!0;h=this.Bit}h&&(r=h.ZX()),this.kit.Rc(t,h,r,s,i,e,n)}Oet(t){if(this.Bit){const e=this.Nst(),h=this.Bit.ZX(),r=this.Bit.HE(),n=h?h.HE():e.MB();(t<=r||n<=t)&&(this.Bit=this.Pit.Cet(t,this.Rit))}else this.Bit=this.Pit.Cet(t,this.Rit);const s=this.Bit,i=s.ZX();return this.kit.Oet(t,s,i)}Ret(t,s,i){return this.kit.Oet(t,s,i)}Qtt(){this.kit.Qtt()}static Pet(t,s){const i=s.Yit(),e=s.Pit;return e.Cet(t,i)}static ket(t,s){const i=s.Yit(),e=s.Pit;return e._et(t,i)}Fet(){const t=this.Rit.zit(),s=t.jet();return this.Bit=null,s}xit(t){this.Bit=null;const s=this.Rit.zit();s.zet(t)}vit(){this.H$().vit()}Cit(){const t=this.H$().Cit();if(t){const s=this.Pit.met(this.Rit),i=this.H$().Eet();s.Bet(i)}}Git(){const t=this.H$().Git();return t&&this.Uet(),this.H$().Wet(),t}Uet(){const t=this.Nst().HE(),s=this.H$(),i=Fr.Dst.Pet(t,this),e=this.Fet();e.det(i.$x()),e.gB(t),e.LB(i.Qet()),e.tit(!0),e.Jet(s.Vet()),e.Bet(s.Eet())}e7(){return{sourceAdapterJson:this.H$().e7()}}h7(t){t&&this.H$().h7(t.sourceAdapterJson)}}}{const jr=self.Rs,zr=jr.Dst;zr.Kit=class{constructor(t){this.Yet=t,this.Het=null,this.qet()}er(){this.Het&&(this.Het.er(),this.Het=null),this.Yet=null}Let(){return this.Het.Let()}BB(){return this.Yet}Ytt(){this.Het&&this.Het.Ytt()}GX(){this.Het&&this.Het.GX()}qet(){return this.Het||(this.Het=this.Zet()),this.Het}zst(){}cO(){return this.zst()}Xet(){}Ntt(){this.qet().Ntt()}gX(){this.qet().gX()}ktt(){this.qet().ktt()}Utt(){this.Het.Ket()}Rc(t,s,i,e,h,r,n){let o=this.Yet.pet(),a;switch(o){case"numeric":a=zr.$et.Rc(t,s,i,this.Yet);break;case"angle":a=zr.tht.Rc(t,s,i,this.Yet);break;case"boolean":a=zr.sht.Rc(t,s,i,this.Yet);break;case"color":a=zr.iht.Rc(t,s,i,this.Yet);break;case"text":a=zr.eht.Rc(t,s,i,this.Yet)}this.Het.hht(t,a,s,i,e,h,r,n)}Oet(t,s,i){switch(this.Yet.pet()){case"numeric":return zr.$et.Rc(t,s,i,this.Yet);case"angle":return zr.tht.Rc(t,s,i,this.Yet);case"boolean":return zr.sht.Rc(t,s,i,this.Yet);case"color":return zr.iht.Rc(t,s,i,this.Yet);case"text":return zr.eht.Rc(t,s,i,this.Yet)}}Qtt(){this.Het.rht()}vit(){this.qet().nht()}Wet(){this.qet().Wet()}Eet(){return this.qet().Eet()}Cit(){return this.qet().Cit()}Git(){return this.qet().Git()}Vet(){const t=this.Yet,s=t.Vit(),i=s.Nst().HE(),e=zr.Pet(i,t),h=e.ZX(),r=t.pet();switch(r){case"numeric":return zr.$et.Rc(i,e,h,t);case"angle":return zr.tht.Rc(i,e,h,t);case"boolean":return zr.sht.Rc(i,e,h,t);case"color":return zr.iht.Rc(i,e,h,t);case"text":return zr.eht.Rc(i,e,h,t)}}Zet(){const t=this.Yet,s=t.xet()?t.pet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new zr.aht.oht(this);case"numeric":case"number":case"angle":return new("combo"===this.Yet.cet()?zr.aht.oht:zr.aht.uht)(this);case"color":case"offsetColor":return new zr.aht.lht(this);default:return new zr.aht.uht(this)}}e7(){return{propertyAdapterJson:this.qet().e7()}}h7(t){t&&this.qet().h7(t.propertyAdapterJson)}}}{const Br=self.Rs;class Ur extends Br.Dst.Kit{constructor(t){super(t),this.cht=NaN}zst(){return this.Yet.Yit().het()[0]}cO(){return this.cht||super.cO()}Xet(){return this.Yet.Vit().OB()}Qst(t){const s=this.Yet.Yit().het()[0];s!==t&&(this.cht=t)}Rc(t,s,i,e,h,r,n){this.qet().fht(s.oet())&&super.Rc(t,s,i,e,h,r,n)}Oet(t,s,i){if(this.qet().fht(s.oet()))return super.Oet(t,s,i)}e7(){return Object.assign(super.e7(),{index:this.cht})}h7(t){t&&(super.h7(t),this.cht=t.index)}}Br.Dst.Zit=Ur}{const Wr=self.Rs;class Qr extends Wr.Dst.Kit{constructor(t){super(t),this.n8=NaN}zst(){const t=this.Yet.Yit();return t.het()[1]}Xet(){const t=this.Yet.Yit(),s=this.Yet.Vit(),i=this.n8||t.het()[0],e=s.OB(),h=e.dht(i),r=e.pht()[h];return r.rz()}gz(t){const s=this.Yet.Yit(),i=s.het()[2];return t.mht(i)}Vst(t){const s=this.Yet.Yit();s.het()[0]!==t&&(this.n8=t)}Rc(t,s,i,e,h,r,n){const o=this.Yet.Vit(),a=o.OB();this.gz(a.TF())&&super.Rc(t,s,i,e,h,r,n)}Oet(t,s,i){const e=this.Yet.Vit(),h=e.OB();if(this.gz(h.TF()))return super.Oet(t,s,i)}e7(){return Object.assign(super.e7(),{sid:this.n8})}h7(t){t&&(super.h7(t),this.n8=t.sid)}}Wr.Dst.Hit=Qr}{const Jr=self.Rs;class Vr extends Jr.Dst.Kit{constructor(t){super(t)}zst(){return this.Yet.Yit().het()[1]}Xet(){const t=this.Yet,s=t.Vit(),i=s.u4(),e=i.Lj(),h=e.FP(),r=this.Yst(h),n=r.cO();return e.bz(n)?e.ght(n):null}Yst(t){const s=this.Yet,i=s.Yit().het()[0];return t.yht(i)}Rc(t,s,i,e,h,r,n){this.Mht()&&super.Rc(t,s,i,e,h,r,n)}Oet(t,s,i){if(this.Mht())return super.Oet(t,s,i)}Mht(){const t=this.Yet,s=t.Vit(),i=s.u4(),e=i.Lj(),h=e.FP(),r=this.Yst(h);if(r){const n=r.cO();return e.bz(n)}}}Jr.Dst.qit=Vr}{const Yr=self.Rs;class Hr extends Yr.Dst.Kit{constructor(t){super(t)}zst(){return this.Yet.Yit().het()[0]}Xet(){return this.Yet.Vit().OB().rz()}Rc(t,s,i,e,h,r,n){const o=this.Yet.Vit(),a=o.TF().pP(),u=o.OB().TF().pP();a===u&&super.Rc(t,s,i,e,h,r,n)}Oet(t,s,i){const e=this.Yet.Vit(),h=e.TF().pP(),r=e.OB().TF().pP();if(h===r)return super.Oet(t,s,i)}wht(){const t=this.Yet.Vit(),s=t.TF().pP();if(Yr.Y9.Sht&&s instanceof Yr.Y9.Sht&&("initial-frame"===this.Yet.sst()||"initial-animation"===this.Yet.sst()))switch(this.Yet.hK()){case"relative":case"absolute":return null}}}Yr.Dst.Xit=Hr}{const qr=self.Rs;class Zr extends qr.Dst.Kit{constructor(t){super(t),this.Tht=0,this.bht=!1}Let(){return!1}gX(){let t=this.Yet._st(),s=this.Yet.Yit();s=t.met(s),this.Tht=s.cK()}ktt(){}oet(){return this.bht||this.Yet.Rc(0),this.Tht}Rc(t,s,i,e,h,r,n){this.Tht=qr.Dst.$et.Rc(t,s,i,this.Yet),this.bht=!0}vit(){}Wet(){}Eet(){return this.Tht}Cit(){return!1}Git(){return!1}e7(){return{value:this.Tht,init:this.bht}}h7(t){t&&(this.Tht=t.value,this.bht=!t.hasOwnProperty("init")||t.init)}}qr.Dst.$it=Zr}{const Xr=self.Rs;class Kr extends Xr.Dst.Kit{constructor(t){super(t),this.xht=!1,this.vht=null,this.Cht=null,this.Ght=null,this.WX=this.Yet.Nst(),this.Oit=this.Yet.Vit(),this.Iht=this.Yet.eet(),this._ht=this.Iht[0],this.Dht=this.Iht[1],this.Iht[3]?this.Nht=this.Iht[3]:this.Nht=Math.random().toString(36).slice(2),this.Eht=NaN,this.Aht=NaN,this.Lht=NaN,this.Oht=null,this.Rht()}er(){super.er(),this.vht=null,this.Cht=null,this.Ght=null,this.WX=null,this.Oit=null,this.Iht=null,this._ht=null,this.Oht=null}Rht(){if(self.Rs.Y9.Audio){const t=this.Yet.E4(),s=t.Pht(self.Rs.Y9.Audio);s&&(this.vht=s.cP().rz()),this.Cht=self.Rs.Y9.Audio.kht,this.Ght=self.Rs.Y9.Audio.Fht}}jht(){if(!this.Oht){const t=this.Yet.Vit(),s=t.BB("audioSource");s&&(this.Oht=s.H$())}}zht(){const t=this.Yet.Vit(),s=t.BB("volume");return(s?s.H$():this).Aht}Ytt(){super.Ytt(),this.xht=!1,this.vht&&(this.Ght&&(this.Eht=this.Ght.PlaybackTime.call(this.vht,this.Nht),this.Aht=this.Ght.Volume.call(this.vht,this.Nht)),this.Cht)&&this.Cht.dB.call(this.vht,this.Nht)}Bht(){return this.Nht}Uht(){return this.Lht}Wht(t){this.Lht=t}gX(){super.gX(),this.Eht=NaN,this.xht=!1}ktt(){super.ktt();const t=this.Yet.Nst(),s=t.HE();switch(this.Eht=s-this.Dht,this.Yet.sst()){case"audioSource":break;case"volume":this.Aht=this.Yet.Oet(s)}this.xht=!1}Rc(t,s,i,e,h,r,n){if(this.vht)switch(this.Yet.sst()){case"audioSource":{if(!this.WX.att())return;if(e)return void(this.Cht&&this.Cht.dB.call(this.vht,this.Nht));if(t<this.Dht)return void(this.xht=!1);const o=this.Ght.PlaybackRate.call(this.vht,this.Nht),a=this.WX.vB();if(a!==o&&this.Cht.xB.call(this.vht,this.Nht,a),this.xht)return;if(!this.Yet.Nst().IsPlaying())return;if(this.xht=!0,isNaN(this.Eht)){const u=self.performance.now(),l=t-this.Dht,c=this.vht.GetAudioContextState();if("suspended"===c)return void(this.xht=!1);const f=self.performance.now(),d=(f-u)/1e3,p=l+d;if(this.Cht){let t=this.Uht();isNaN(t)?(this.Wht(0),t=0):this.Wht(t),this.Cht.PlayFromTimeline.call(this.vht,this._ht,t,this.Nht,p)}}else{const m=this.Eht,g=(this.Eht=NaN,this.zht()),y=(this.Aht=NaN,this.vht.GetAudioContextState());if("suspended"===y)return void(this.xht=!1);this.Cht&&(this.Wht(g),this.Cht.PlayFromTimeline.call(this.vht,this._ht,g,this.Nht,m))}break}case"volume":this.jht(),super.Rc(t,s,i,e,h,r,n)}}Oet(t,s,i){if(this.vht)switch(this.Yet.sst()){case"audioSource":return;case"volume":return this.jht(),super.Oet(t,s,i)}}Qht(t,s){return this.Oht?this.Oht.Uht():0}Jht(t,s,i,e){this.Oht&&this.Oht.Wht(this.Qht()+s),this.Cht&&this.Oht&&this.Cht.Wht.call(this.vht,this.Oht.Bht(),this.Oht.Uht())}Vht(t,s,i){this.Oht&&this.Oht.Wht(s),this.Cht&&this.Oht&&this.Cht.Wht.call(this.vht,this.Oht.Bht(),this.Oht.Uht())}Yht(){return!0}e7(){return{audioPlaybackStarted:this.xht,audioTag:this.Nht,pauseTime:this.Eht,pauseVolume:this.Aht,volume:this.Lht}}h7(t){t&&(this.xht=t.audioPlaybackStarted,this.Nht=t.audioTag,this.Eht=t.pauseTime,this.Aht=t.pauseVolume,this.Lht=t.volume,this.Rht())}}Xr.Dst.tet=Kr}{const $r=self.Rs;$r.Dst.aht=class{constructor(t){this.kit=t,this.Yet=t.BB(),this.pst=this.Yet.Vit().u4(),this.Hht=this.Yet.sst(),this.qht=!1,this.Zht=null,this.Xht=null}er(){this.kit=null,this.Yet=null,this.pst=null,this.Zht=null,this.Xht=null}Let(){return!1}Ytt(){}GX(){this.pst=null,this.Zht=null,this.Xht=null}H$(){return this.kit}BB(){return this.Yet}u4(){return this.pst||(this.pst=this.Yet.Vit().u4()),this.pst}Kht(t){this.qht=!!t}$ht(){return this.qht}Ntt(){}gX(){}ktt(){}nht(){this.Zht=this.Eet()}Wet(){this.Zht=null}Eet(){}Cit(){}Git(){}fht(t){const s=typeof this.trt(),i=typeof t;return s==i}Ket(){}hht(t,s,i,e,h,r,n,o){}rht(){}srt(){const t=this.irt(()=>{const t=this.Yet.Yit(),s=this.Yet._st();return s.met(t)},()=>{const t=this.Yet.Yit(),s=this.Yet._st();return s.ert(t)});return t.hrt()}rrt(){const t=this.Yet.Nst(),e=t.HE()-this.Yet.Vit().Wtt(),s=this.irt(()=>{const t=this.Yet.Yit(),s=this.Yet._st();return s.Cet(e,t)},()=>{const t=this.Yet.Yit(),s=this.Yet._st(),i=s._et(e,t);return i||s.ert(t)});return s.hrt()}irt(t,s){const i=this.Yet.Nst();return(i.att()?t:s)()}nrt(t,s){const i=this.Yet.hK();return("relative"===i?t:s)()}ort(t,s){return(this.$ht()?(this.Kht(!1),t):s)()}art(t){}urt(){return this.kit.cO()}lrt(){return this.Xht||(this.Xht=this.kit.Xet()),this.Xht}crt(t,s,i,e,h,r){const n=this.Yet.jst();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}e7(){return{firstAbsoluteUpdate:this.qht,saveState:this.Zht}}h7(t){t&&(this.qht=t.firstAbsoluteUpdate,this.Zht=t.saveState)}frt(t,s=!1){const i=[];for(const e of t){const h=e.Vit().Wtt();for(const r of e.bet())(s&&0===r.HE()||!s)&&i.push({time:h+r.HE(),value:r.hrt()})}return i.sort((t,s)=>t.time-s.time)}drt(t,s,i){return this.prt(s,i)}prt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const tn=self.Rs,sn=new Map,en=[0,0,0];class hn extends tn.Dst.aht{constructor(t){super(t)}Ntt(){}gX(){}ktt(){}Eet(){const t=this.Yet.jst(),s=this.lrt(),i=this.urt();switch(t){case"behavior":return this.mrt(s.grt(i));case"effect":return this.mrt(s[i]);case"plugin":return this.mrt(s.grt(i));case"world-instance":return this.mrt(this.trt())}}Cit(){const t=this.srt();return!this.yrt(t,this.trt())}Git(){return!tn.pe(this.Zht)&&!this.yrt(this.Zht,this.trt())}yrt(t,s){return t=this.Mrt(t),s=this.Mrt(s),t.na(s)}srt(){const t=super.srt();return this.Mrt(t)}rrt(){const t=super.rrt();return this.Mrt(t)}art(t){}mrt(t){return(tn.Ze(t,tn.ko)?t.toArray():t).slice(0,3)}Mrt(t){return tn.Ze(t,tn.ko)?t:new tn.ko(t[0],t[1],t[2],1)}fht(t){return!0}Let(){return!0}Ket(){const t=this.Yet.Nst(),s=this.Yet.OB(),i=this.Yet.H$(),e=t.Y$(s,i,this.Hht,this.Yet);if(e&&1<e.length){sn.has(s)||sn.set(s,new Map);const h=sn.get(s),r=this.Yet.jst(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Hht)||n.set(this.Hht,{wrt:!1,color:new tn.ko(0,0,0,1)})}}Srt(t,s,i){const e=sn.get(t).get(s).get(i);return e.wrt=!0,e.color}hht(t,s,i,e,h,r,n,o){const a=this.Yet.Nst(),u=this.Yet.Vit(),l=this.Yet.OB(),c=this.Yet.H$(),f=this.Yet.jst(),d=this.Hht,p=a.Y$(l,c,d,this.Yet);if(p&&1<p.length){const m=this.frt(p,!0),g=this.drt(a,a.HE(),m);if(g){const y=u.Wtt(),M=g.time-y;if(0==M)this.Srt(l,f,this.Hht).Qo(s[0],s[1],s[2]);else if(!(M<0)){const w=s[0],S=s[1],T=s[2],b=this.Yet.Rc(M,!1,!0),x=tn.ko.Ba(w,b[0]),v=tn.ko.Ba(S,b[1]),C=tn.ko.Ba(T,b[2]);this.Srt(l,f,this.Hht).Qo(x,v,C)}}}else this.Trt(s[0],s[1],s[2])}rht(){const t=this.Yet.OB();if(sn.has(t)){const s=sn.get(t),i=this.Yet.jst();if(s.has(i)){const e=s.get(i);if(e.has(this.Hht)){const h=e.get(this.Hht),r=h.wrt,n=h.color;r&&this.Trt(n.Xo(),n.Ko(),n.$o()),0===e.size&&s.delete(i),0===s.size&&sn.delete(t)}}}}trt(){const t=this.Yet.jst(),s=this.lrt(),i=this.urt();switch(t){case"behavior":return this.Mrt(s.grt(i));case"effect":return s[i].clone();case"plugin":return this.Mrt(s.grt(i));case"world-instance":return this.u4().qj().clone()}}Trt(t,s,i){const e=this.Yet.jst(),h=this.lrt(),r=this.urt();switch(e){case"behavior":en[0]=t,en[1]=s,en[2]=i,h.brt(r,en);break;case"effect":h[r].Wo(t,s,i);break;case"plugin":en[0]=t,en[1]=s,en[2]=i,h.brt(r,en);break;case"world-instance":this.u4().xrt(t,s,i)}}e7(){}h7(t){}}tn.Dst.aht.lht=hn}{const rn=self.Rs,nn=rn.Dst;class on extends rn.Dst.aht{constructor(t){super(t)}Ntt(){}gX(){}ktt(){}Eet(){return this.trt()}Cit(){const t=this.srt();return t!==this.Eet()}Git(){return!rn.pe(this.Zht)&&this.Zht!==this.Eet()}Let(){return!1}hht(t,s,i,e,h,r,n,o){const a=this.Yet,u=a.Vit(),l=a.jst(),c=a.Nst(),f=u.OB(),d=a.H$(),p=this.Hht,m=c.Y$(f,d,p,a);if(m&&1<m.length){const y=this.frt(m),M=t+u.Wtt(),w=this.drt(c,M,y);w&&(s=w.value)}const g=a.pet();switch(g){case"numeric":if(nn.$et.vrt(this.urt(),this.lrt(),s,l))break;return;case"angle":if(nn.tht.vrt(this.urt(),this.lrt(),s,l))break;return;case"boolean":if(nn.sht.vrt(this.urt(),this.lrt(),s,l))break;return;case"color":if(nn.iht.vrt(this.urt(),this.lrt(),s,l))break;return;case"text":if(!nn.eht.vrt(this.urt(),this.lrt(),s,l))return}this.Trt(s)}trt(){const t=this.Yet.jst(),s=this.lrt(),i=this.urt();switch(t){case"behavior":return s.grt(i);case"effect":return s[i];case"instance-variable":return s.Crt(i);case"plugin":return s.grt(i)}}Trt(t){const s=this.Yet.jst(),i=this.lrt(),e=this.urt();switch(s){case"behavior":i.brt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Grt(e,t);break;case"plugin":i.brt(e,t)}}}rn.Dst.aht.oht=on}{const an=self.Rs,un=(an.Dst.aht,new Map),ln=(t,s,i,e,h,r=!1,n=null,o=null)=>{un.set(t,{Irt:s,_rt:i,Drt:e,round:h,Nrt:r,init:n,reset:o})};ln("offsetX",(t,s,i,e)=>{"relative"===e.Yet.hK()?t.Ert(s,i.Nst().htt()):t.Ert(s)},(t,s)=>t.rT(s),t=>t.hT(),!0),ln("offsetY",(t,s,i,e)=>{"relative"===e.Yet.hK()?t.Art(s,i.Nst().htt()):t.Art(s)},(t,s)=>t.aT(s),t=>t.oT(),!0),ln("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Yet.hK(),u=1===i.Lrt.$x();if((h||u)&&s.b5()&&s.D5()){if(isNaN(i.Ort)){let e=[],t=s.u5();for(;t;)e.push(t),t=t.u5();e.reverse();let a=(t,s)=>s.Nst().ist(t.OB()),h=(t,s)=>{const i=a(t,s);if(i)return i.eit();const e=t.OB().rz();return e.hit()?e.eit():t.Prt().Rrt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.BB(i);if(!r)return e;const n=r.Yit().zit();if(!n)return e;const o=n.ert();return o?o.oet():e},n;if(u){let t=e[e.length-1];n=t.im()}else{let s=e[0],t=s.Prt().Rrt(),i=s.Prt().krt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const l=(s=e[t]).Prt().krt();n=(n=(n*=l)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.Ort=0===n?Number.EPSILON:n}e||s.Fm(t/i.Ort,!0)}else s.Fm(t)}},(t,s)=>t.lm(s),t=>t.im(),!0),ln("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Yet.hK(),a=1===i.Lrt.$x();if((h||a)&&s.b5()&&s.E5()){if(isNaN(i.Ort)){let e=[],t=s.u5();for(;t;)e.push(t),t=t.u5();e.reverse();let h=(t,s)=>{e=t;const i=s.Nst().ist(e.OB());var e;if(i)return i.nit();const h=t.OB().rz();return h.hit()?h.nit():t.Prt().Frt()},r=(t,s,i,e=0)=>{const h=s.Nst().ist(t.OB());if(!h)return e;const r=h.BB(i);if(!r)return e;const n=r.Yit().zit();if(!n)return e;const o=n.ert();return o?o.oet():e},n;if(a){let t=e[e.length-1];n=t.pm()}else{let s=e[0],t=s.Prt().Frt(),i=s.Prt().jrt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const u=(s=e[t]).Prt().jrt();n=(n=(n*=u)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.Ort=0===n?Number.EPSILON:n}e||s.zrt(t/i.Ort,!0)}else s.zrt(t)}},(t,s)=>t.hm(s),t=>t.pm(),!0),ln("offsetAngle",(t,s,i,e,h)=>{t.Brt(s)},(t,s)=>t.JP(s),t=>t.VP(),!1,!0),ln("offsetOpacity",(t,s,i,e,h)=>{const r=e.Urt||1,n=(s/=r,t.wN()),o=n+s;if(0===e.Wrt)1<o?e.Wrt+=o-1:o<0&&(e.Wrt+=o),t.Qrt(s);else{const a=t.wN()+s;0<s&&0<e.Wrt?1<a&&(e.Wrt+=a-1):0<s&&e.Wrt<0?(e.Wrt+=s,0<e.Wrt&&(t.Qrt(e.Wrt),e.Wrt=0)):s<0&&0<e.Wrt?(e.Wrt+=s,e.Wrt<0&&(t.Qrt(e.Wrt),e.Wrt=0)):s<0&&e.Wrt<0&&a<0&&(e.Wrt+=a)}},(t,s)=>{t.TN(s)},t=>t.wN(),!1,!0,(r,h,n)=>{switch(r.Wrt=0,r.Yet.hK()){case"relative":{r.Yet._st();let t=r.Yet.Yit(),s=t.zit(),i=s.jit(),e=r.u4().wN(),h=e;for(const o of i){const a=o.HE(),u=r.Yet.Oet(a);h=e+u,h=an.lr(h,0,1)}r.Jrt=e-h,r.Jrt=Math.round(100*(r.Jrt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const l=i[t].HE(),c=r.Yet.Oet(l);h-=c,h=an.lr(h,0,1)}r.Vrt=h,r.Vrt=Math.round(100*(r.Vrt+Number.EPSILON))/100;break}}const t="relative"===r.Yet.hK(),s=1===r.Lrt.$x();if((t||s)&&h.b5()&&h.k5()){let s=[],t=h.u5();for(;t;)s.push(t),t=t.u5();s.reverse();let i=(t,s,i)=>{const e=s.Nst().ist(t.OB());if(!e)return 0;const h=e.BB(i);if(!h)return 0;const r=h.Yit().zit();if(!r)return 0;const n=r.ert();return n?n.oet():0},e=s[0].Prt().Yrt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.Urt=0===e?1:e}},i=>{switch(i.Yet.hK()){case"relative":{i.Wrt=0;let t=i.u4(),s=t.wN();s=Math.round(100*(s+Number.EPSILON))/100,i.Yet.Nst().att()?(t.TN(s+i.Jrt),i.Qv=0):(t.TN(s-i.Vrt),i.Qv=i.H$().Vet());break}}}),ln("offsetOriginX",(t,s)=>t.Hrt(s),(t,s)=>t.qrt(s),t=>t.Yz(),!1),ln("offsetOriginY",(t,s)=>t.Zrt(s),(t,s)=>t.Xrt(s),t=>t.Zz(),!1),ln("offsetZElevation",(t,s)=>t.Krt(s),(t,s)=>t.lT(s),t=>t.uT(),!0),ln("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.im()<0?-1:1;if("relative"===e.Yet.hK()&&t.b5()&&t.D5()){const r=i.eit()*h*s;isNaN(e.Ort)&&un.get("offsetWidth").Irt(t,1,i,e,!0),t.Fm(r/e.Ort,!0)}else t.Fm(i.eit()*h*s)}},(t,s,i)=>{t.lm(i.eit()*s)},(e,h)=>{const r=e.im()<0?-1:1;if(e.D5()){let t=e.u5(),s=h.Nst().ist(t.OB()),i=NaN;if(s)i=t.im()/s.eit();else{const n=t.OB().rz();i=n.hit()?t.im()/n.eit():1}return e.im()*r/(h.eit()*i)}return e.im()*r/h.eit()},!1),ln("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.pm()<0?-1:1;if("relative"===e.Yet.hK()&&t.b5()&&t.E5()){const r=i.nit()*h*s;isNaN(e.Ort)&&un.get("offsetHeight").Irt(t,1,i,e,!0),t.zrt(r/e.Ort,!0)}else t.zrt(i.nit()*h*s)}},(t,s,i)=>{t.hm(i.nit()*s)},(e,h)=>{const r=e.pm()<0?-1:1;if(e.E5()){let t=e.u5(),s=h.Nst().ist(t.OB()),i=NaN;if(s)i=t.pm()/s.nit();else{const n=t.OB().rz();i=n.hit()?t.pm()/n.nit():1}return e.pm()*r/(h.nit()*i)}return e.pm()*r/h.nit()},!1);class cn extends an.Dst.aht{constructor(t){super(t),this.Qv=0,this.Wrt=0,this.Jrt=0,this.Vrt=0,this.Urt=NaN,this.Ort=NaN,this.$rt=void 0,this.tnt=void 0,this.snt=null,this.int=null,this.ent=null,this.hnt=null,this.rnt=null,this.nnt=null,this.ont=null,this.ant=null,this.unt=!1,this.lnt=!1,an.Ze(this.Yet.Nst(),an.cnt)?this.Lrt=new an.Dst.aht.fnt(this):this.Lrt=new an.Dst.aht.dnt(this);const s=this.Yet.sst();switch(this.Yet.jst()){case"world-instance":{const i=un.get(s);this.snt=i.Drt,this.int=i.Irt,this.ent=i._rt,this.unt=i.round,this.lnt=i.Nrt,this.rnt=i.init,this.hnt=i.reset;break}case"audio":this.nnt=t.Qht,this.ont=t.Jht,this.ant=t.Vht,this.unt=!!t.Yht(),this.lnt=!1}}er(){this.Lrt=null,this.snt=null,this.int=null,this.ent=null,this.hnt=null,this.rnt=null,this.nnt=null,this.ont=null,this.ant=null,super.er()}Let(){return this.Lrt.Let()}pnt(){return this.Qv}mnt(t){this.Qv=t}Ntt(){this.hnt&&this.hnt(this)}gX(){const t=this.Lrt.gX();if("number"==typeof t&&(this.Qv=t),this.rnt){const s=this.u4(),i=this.Yet.Vit();this.rnt(this,s,i)}}ktt(){const t=this.Lrt.ktt();"number"==typeof t&&(this.Qv=t)}Eet(){return this.trt()}Cit(){const t=this.srt();return t!==this.Eet()}Git(){return!an.pe(this.Zht)&&this.Zht!==this.Eet()}Ket(){this.Lrt.Ket()}hht(t,s,i,e,h,r,n,o){return this.Lrt.hht(t,s,i,e,h,r,n,o)}rht(){this.Lrt.rht()}trt(){const t=this.lrt(),s=this.urt(),i=this.u4(),e=this.Yet.Vit(),h=this.Yet.jst();switch(h){case"behavior":return t.grt(s);case"effect":return t[s];case"instance-variable":return t.Crt(s);case"plugin":return t.grt(s);case"world-instance":return this.snt(i,e);case"audio":return this.nnt.call(this.H$(),i,e)}}Trt(t,s,i){const e=this.lrt(),h=this.urt(),r=this.u4(),n=this.Yet.Vit(),o=this.Yet.jst();switch(o){case"behavior":e.gnt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.ynt(h,t);break;case"plugin":e.gnt(h,t,this.H$().wht());break;case"world-instance":this.int(r,t,n,this);break;case"audio":this.ont.call(this.H$(),r,t,n,this)}}Mnt(t,s,i){let e=this.Yet.ttt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const u=this.Yet.Nst(),l=u.HE(),c=this.Yet.vet(l);if(!c)return}const h=this.lrt(),r=this.urt(),n=this.u4(),o=this.Yet.Vit(),a=this.Yet.jst();switch(a){case"behavior":h.brt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.Grt(r,t);break;case"plugin":h.brt(r,t,this.H$().wht());break;case"world-instance":this.ent(n,t,o);break;case"audio":this.ant.call(this.H$(),n,t,o)}}}wnt(t,s,i,e,h,r,n,o){this.Lrt.wnt(t,s,i,e,h,r,n,o)}Snt(t,s,i,e,h){let r=(t="angle"===this.Yet.cet()?an.pr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.trt(),u;switch(u=0===o?this.unt?Math.round(a):this.lnt?"angle"===this.Yet.cet()?an.dr(Math.round(an.pr(a))):Number(an.toFixed(a,2)):a:this.unt?Number(an.toFixed(a,o)):(this.lnt,a),this.Trt(u-a,s,i),this.Yet.sst()){case"offsetWidth":case"offsetScaleX":{const l=this.u4(),c=l.im(),f=Number(an.toFixed(c,2));l.Fm(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.u4(),p=d.pm(),m=Number(an.toFixed(p,2));d.zrt(m-p);break}}}e7(){return Object.assign(super.e7(),{v:this.Qv,a:this.Wrt,fod:this.Jrt,bod:this.Vrt,of:this.Urt,sf:this.Ort,armorf:this.$rt,armandf:this.tnt})}h7(t){t&&(super.h7(t),this.Qv=t.v,this.Wrt=t.a,this.Jrt=an.le(t.fod)?t.fod:0,this.Vrt=an.le(t.bod)?t.bod:0,this.Urt=an.le(t.of)?t.of:NaN,this.Ort=an.le(t.sf)?t.sf:NaN,this.$rt=an.le(t.armorf)?t.armorf:void 0,this.tnt=an.le(t.armandf)?t.armandf:void 0)}}an.Dst.aht.uht=cn}{const fn=self.Rs;class dn{constructor(t){this.Tnt=!1,this.Tht=0,this.bnt=!1,this.xnt=!1,this.xst=t;for(let t=0,s=this.xst.length;t<s;t++)this.xst[t].Qit(this)}tst(){return this.xst}vnt(){this.Tnt=!0}Cnt(){return this.Tnt}Jet(t){this.Tht=t}oet(){return this.Tht}Gnt(t){this.bnt=t}Int(){return this.bnt}Btt(t){this.xnt=t}_nt(){return this.xnt}i0(){this.Tnt=!1,this.Tht=0,this.bnt=!1,this.xnt=!1}}class pn{constructor(t){this.Dnt=t}er(){this.Dnt=null}$x(){return 0}gX(){const t=this.Dnt;return this.Dnt.BB(),t.nrt(()=>t.irt(()=>0,()=>t.H$().Vet()),()=>{})}ktt(){}Let(){this.Dnt;const t=this.Dnt.BB();switch(t.hK()){case"relative":return!1;case"absolute":return!0}}Ket(){this.Dnt;const t=this.Dnt.BB(),s=t.sst();switch(t.hK()){case"relative":break;case"absolute":if(t.Wit()){const i=t.Jit();i.i0()}else{const e=t.Nst(),h=t.OB(),r=t.H$(),n=e.Y$(h,r,s,t);n&&1<n.length&&new dn(n)}}}hht(t,s,i,e,h,r,n,o){const a=this.Dnt,u=this.Dnt.BB();switch(u.hK()){case"relative":{const l=a.pnt();a.Trt(s-l,i,e),r&&this.wnt(t,i,e,h,l,s),a.mnt(s);break}case"absolute":{const c=u.Nst(),f=u.Vit();if(u.OB(),u.H$(),u.Wit()){const d=u.Jit(),p=d.tst(),m=a.frt(p,!0),g=a.drt(c,c.HE(),m);if(g){const y=f.Wtt(),M=g.time-y;if(0==M)d.Btt(n),d.Gnt(o),d.vnt(),d.Jet(d.oet()+s);else{if(M<0)return;const w=u.Oet(M);d.Btt(n),d.Gnt(o),d.vnt(),d.Jet(d.oet()+(s-w))}}}else a.Mnt(s,o,n);break}}}rht(){const t=this.Dnt,s=this.Dnt.BB();switch(s.hK()){case"relative":break;case"absolute":if(s.Wit()){const i=s.Jit();i.Cnt()&&t.Mnt(i.oet(),i.Int(),i._nt())}}}wnt(t,s,i,e,h,r){const n=this.Dnt;e||(s&&t===s.HE()?n.Snt(s.cK(),s,i):i&&t===i.HE()?n.Snt(i.cK(),s,i):r-h==0&&n.Snt(s.cK(),s,i))}}fn.Dst.aht.dnt=pn}{const mn=self.Rs;class gn{constructor(t){this.Dnt=t}er(){this.Dnt=null}$x(){return 1}gX(){const t=this.Dnt;return t.Kht(!0),this.art(t.srt())}ktt(){const t=this.Dnt;if(t.srt()!==t.rrt())return t.Kht(!0),this.art(t.rrt())}Let(){return!1}Ket(){}hht(t,s,i,e,h,r,n,o){const a=this.Dnt,u=a.pnt();switch(a.BB().hK()){case"relative":a.Trt(s-u,i,e),r&&this.wnt(t,i,e,h,u,s,!1,n);break;case"absolute":a.$ht()?(a.Kht(!1),a.Trt(u,i,e)):0===t&&0===a.BB().Nst().MB()?a.Mnt(s,!0,!1):(a.Trt(s-u,i,e),r&&this.wnt(t,i,e,h,u,s,this.Nnt(),n))}a.mnt(s)}rht(){}art(t){const s=this.Dnt;return t-s.Eet()}Nnt(){let t=this.Dnt,s=t.u4().OB(),i=t.BB().E4(),e=i.V$(),h=0;for(const r of e.QZ())0===r.$x()?r.qZ(s)&&h++:1===r.$x()&&r.OB()===s&&h++;return h<=1}wnt(t,s,i,e,h,r,n,o){const a=this.Dnt;e?s&&t===s.HE()?a.Snt(s.cK(),s,i,n,o):i&&t===i.HE()?a.Snt(i.cK(),s,i,n,o):i||a.Snt(s.cK(),s,i,n,o):s&&t===s.HE()?a.Snt(s.cK(),s,i,n,o):i&&t===i.HE()?a.Snt(i.cK(),s,i,n,o):r-h==0&&a.Snt(s.cK(),s,i,n,o)}}mn.Dst.aht.fnt=gn}{const yn=self.Rs,Mn=self.oc;yn.Dst.$et=class{constructor(){}static vrt(t,s,i,e){let h;switch(e){case"behavior":h=s.grt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Crt(t);break;case"plugin":h=s.grt(t)}return h!==i}static Rc(r,n,o,a){if(!o){let t=a.Yit(),s=a._st();return(t=s.ert(t)).cK()}let u=a.ttt();if("default"===u&&(u="continuous"),"discrete"===(u="combo"===a.cet()?"discrete":u))return n.cK();if("continuous"===u||"step"===u){const l=a.Nst().K$();if("step"===u&&0!==l){const g=1/l;r=Math.floor(r*g)/g}const c=n.cK(),f=o.cK(),d=n.uK("cubic-bezier"),p=o.uK("cubic-bezier"),m=d&&d.Ent()&&p&&p.Ant();if(!m&&c===f)return c;let t=n.HE(),s=o.HE(),i=("step"===u&&0!==l&&(r=yn.lr(r,t,s)),yn.normalize(r,t,s)),e=n.Qet(),h;if(m){const y=s-t;h=Mn.Cc(e)(y*i,0,1,y),h=Mn.Cc("cubicbezier")(h,c,c+d.pK(),f+p.yK(),f)}else h=Mn.Cc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.cet()?Math.floor(h):h}}}}{const wn=self.Rs;wn.Dst.tht=class{constructor(){}static vrt(t,s,i,e){let h;switch(e){case"behavior":h=s.grt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Crt(t);break;case"plugin":h=s.grt(t)}return h!==i}static Rc(t,s,i,e){if(!i){let t=e.Yit(),s=e._st();return(t=s.ert(t)).cK()}let h=e.ttt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.cet()?"discrete":h))return s.cK();if("continuous"===h||"step"===h){const r=e.Nst().K$();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.HE(),o=i.HE(),a=s.cK(),u=i.cK(),l=("step"===h&&0!==r&&(t=wn.lr(t,n,o)),s.uK("angle"));if(!l){if(a===u)return a;const f=wn.normalize(t,n,o),d=self.oc.Cc(s.Qet());return wn.br(a,u,d(f,0,1,1))}{const p=l.Lnt();if(a===u&&0===p)return a;const m=wn.normalize(t,n,o),g=self.oc.Cc(s.Qet()),y=g(m,0,1,1);switch(l.Ont()){case"closest":return wn.br(a,u,y,p);case"clockwise":return wn.vr(a,u,y,p);case"anti-clockwise":return wn.Cr(a,u,y,p)}}}}}}{const Sn=self.Rs;Sn.Dst.sht=class{constructor(){}static vrt(t,s,i,e){let h;switch(e){case"behavior":h=s.grt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Crt(t);break;case"plugin":h=s.grt(t)}return!!h!=!!i}static Rc(t,s,i,e){if(i)return s.cK()?1:0;{let t=e.Yit(),s=e._st();return(t=s.ert(t)).cK()?1:0}}}}{const Tn=self.Rs,bn=[0,0,0],xn=[0,0,0],vn=[0,0,0];Tn.Dst.iht=class{constructor(){}static vrt(t,s,i,e){let h;switch(e){case"behavior":h=s.grt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Crt(t);break;case"plugin":h=s.grt(t)}return Array.isArray(i)?(bn[0]=i[0],bn[1]=i[1],bn[2]=i[2]):(vn.xa(i),bn[0]=Math.floor(255*vn.Xo()),bn[1]=Math.floor(255*vn.Ko()),bn[2]=Math.floor(255*vn.$o())),Array.isArray(h)?(xn[0]=h[0],xn[1]=h[1],xn[2]=h[2]):(vn.xa(h),xn[0]=Math.floor(255*vn.Xo()),xn[1]=Math.floor(255*vn.Ko()),xn[2]=Math.floor(255*vn.$o())),bn[0]!==xn[0]||bn[1]!==xn[1]||bn[2]!==xn[2]}static Rc(t,s,i,e){if(!i){let t=e.Yit(),s=e._st(),i=(t=s.ert(t)).cK();return bn[0]=i[0],bn[1]=i[1],bn[2]=i[2],bn}let h=e.ttt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.cK();return bn[0]=r[0],bn[1]=r[1],bn[2]=r[2],bn}if("continuous"===h||"step"===h){const n=e.Nst().K$();if("step"===h&&0!==n){const b=1/n;t=Math.floor(t*b)/b}const o=s.HE(),a=i.HE(),u=s.cK(),l=i.cK(),c=("step"===h&&0!==n&&(t=Tn.lr(t,o,a)),Tn.normalize(t,o,a)),f=s.Qet(),d=u[0],p=u[1],m=u[2],g=l[0],y=l[1],M=l[2],w=self.oc.Cc(f),S=a-o,T=S*c;return bn[0]=d===g?d:w(T,d,g-d,S),bn[1]=p===y?p:w(T,p,y-p,S),bn[2]=m===M?m:w(T,m,M-m,S),bn}}}}{const Cn=self.Rs;Cn.Dst.eht=class{constructor(){}static vrt(t,s,i,e){let h;switch(e){case"behavior":h=s.grt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Crt(t);break;case"plugin":h=s.grt(t)}return h!==i}static Rc(t,s,i,e){if(i)return s.cK();{let t=e.Yit(),s=e._st();return(t=s.ert(t)).cK()}}}}{const Gn=self.Rs;Gn.Kq=class{constructor(){this.Rnt=new Map}er(){for(const t of this.Rnt.values())t.er();this.Rnt.clear(),this.Rnt=null}hc(t){const s=new Gn.Pnt(t),i=s.Jc();this.Rnt.set(i,s)}$s(t){return this.Rnt.get(t)}j$(){return 0}static knt(t,s,i,e){if(s)for(const h of s)Gn.Kq.Fnt("create",h,t,i,e)}static jnt(t,s,i,e){if(s)for(const h of s)Gn.Kq.Fnt("create-including-disabled",h,t,i,e)}static znt(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].h7(t)}):t.forEach(t=>{Gn.Kq.Fnt("load",t,i,s,e)})}static Fnt(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.h7(s),i.push(r);break;case"create":if("function"==typeof r.$st&&!r.$st())return r.er();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const In=self.Rs;In.Pnt=class{constructor(t){this.nr="",this.ztt=NaN,this.Bnt=0,this.Unt="default",this.Wnt="default",this.Qnt=!1,this.Jnt=!1,this.Vnt=1,this.lst=null,this.Ynt="",this.Hnt=!1,this.qnt=!0,t&&(this.nr=t[0],this.ztt=t[1],this.Bnt=t[2],this.Unt=t[3],this.Wnt=t[4],this.Qnt=!!t[6],this.Jnt=!!t[7],this.Vnt=t[8],this.Ynt=t[9],this.Hnt=!!t[10],this.qnt=!!t[11],this.lst=new In.Znt(t[5],this))}er(){this.lst.er(),this.lst=null}Q$(){return this.lst||(this.lst=new In.Znt(null,this)),this.lst}Jc(){return this.nr}N6(t){this.nr=t}MB(){return this.ztt}yB(t){this.ztt=t}K$(){return this.Bnt}$$(t){this.Bnt=t}ttt(){return this.Unt}stt(t){this.Unt=t}hK(){return this.Wnt}itt(t){this.Wnt=t}SB(){return this.Qnt}wB(t){this.Qnt=t}bB(){return this.Jnt}TB(t){this.Jnt=t}Ez(){return this.Vnt}ett(t){this.Vnt=t}IX(){return this.Ynt}htt(){return this.Hnt}ntt(){return this.qnt}e7(){return{trackDataJson:this.lst.e7(),name:this.nr,totalTime:this.ztt,step:this.Bnt,interpolationMode:this.Unt,resultMode:this.Wnt,loop:this.Qnt,pingPong:this.Jnt,repeatCount:this.Vnt,startOnLayout:this.Ynt,transformWithSceneGraph:!!this.Hnt,useSystemTimescale:this.qnt}}h7(t){t&&(this.Q$().h7(t.trackDataJson),this.nr=t.name,this.ztt=t.totalTime,this.Bnt=t.step,this.Unt=t.interpolationMode,this.Wnt=t.resultMode,this.Qnt=t.loop,this.Jnt=t.pingPong,this.Vnt=t.repeatCount,this.Ynt=t.startOnLayout,this.Hnt=!!t.transformWithSceneGraph,this.qnt=!!t.useSystemTimescale)}}}{const _n=self.Rs;class Dn{constructor(t,s){this.lst=s,this.Xnt=null,this.Knt=null,this.cst=NaN,this.fst=NaN,this.Unt="default",this.Wnt="default",this.El=!1,this.$nt=null,this.Pit=null,this.if="",this.tot=null,this.sot=0,this.iot=this.lst.X$().MB(),this.lf=0,this.nr="",t&&(t[0]&&(this.Xnt=t[0],this.cst=t[0][2],this.fst=t[0][1]),this.Unt=t[1],this.Wnt=t[2],this.El=!!t[3],t[6]&&(this.if=t[6]),t[7]&&(this.tot=t[7],this.sot=t[7][0],this.iot=t[7][1]),t[8]&&(this.Knt=t[8]),t[8]&&(this.Knt=t[8]),t[9]&&(this.lf=t[9]),t[10]&&(this.nr=t[10]),this.$nt=new _n.eot(t[4],this),this.Pit=new _n.hot(t[5],this))}er(){this.Xnt=null,this.lst=null,this.$nt&&(this.$nt.er(),this.$nt=null),this.Pit&&(this.Pit.er(),this.Pit=null),this.tot=null}Q$(){return this.lst}bst(){return this.$nt||(this.$nt=new _n.eot(null,this)),this.$nt}_st(){return this.Pit||(this.Pit=new _n.hot(null,this)),this.Pit}rot(){return this.Xnt}Ost(){return this.fst}sit(t){this.fst=t}Lst(){return this.cst}Zst(t){this.cst=t}ttt(){return this.Unt}stt(t){this.Unt=t}hK(){return this.Wnt}itt(t){this.Wnt=t}$st(){return this.El}tit(t){this.El=!!t}jB(){return this.if}Wtt(){return this.sot}Xst(){return this.iot}Kst(t){this.iot=t}eit(){return this.Knt[0]}iit(t){this.Knt||(this.Knt=[]),this.Knt[0]=t}nit(){return this.Knt||(this.Knt=[]),this.Knt[1]}rit(t){this.Knt||(this.Knt=[]),this.Knt[1]=t}$x(){return this.lf}Jc(){return this.nr}e7(){return{keyframeDataJson:this.$nt.e7(),propertyTrackDataJson:this.Pit.e7(),instanceData:this.Xnt,additionalInstanceData:this.Knt,instanceUid:this.cst,objectClassIndex:this.fst,interpolationMode:this.Unt,resultMode:this.Wnt,enabled:this.El,id:this.if,nestedData:this.tot,type:this.lf,name:this.nr}}h7(t){t&&(this.Xnt=t.instanceData,this.cst=t.instanceUid,this.fst=t.objectClassIndex,this.Unt=t.interpolationMode,this.Wnt=t.resultMode,this.El=t.enabled,this.if=t.id,this.lf=t.type||0,this.nr=t.name||"",this.iot=this.lst.X$().MB(),t.nestedData&&(this.tot=t.nestedData,this.sot=this.tot[0],this.iot=this.tot[1]),t.additionalInstanceData&&(this.Knt=t.additionalInstanceData),this.bst().h7(t.keyframeDataJson),this._st().h7(t.propertyTrackDataJson))}}_n.Znt=class{constructor(t,s){this.u$=s,this.not=[],_n.Kq.knt(this.not,t,Dn,this)}er(){this.u$=null;for(const t of this.not)t.er();_n.Ln(this.not),this.not=null}X$(){return this.u$}Vtt(){const t=new Dn(null,this);return this.not.push(t),t}oot(t){return t.bst().Tst()[0]}aot(t){const s=t.bst().Tst();return s.at(-1)}git(s,t){const i=t.bst().Tst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.HE()===s)return h}}uot(s,t){const i=t.bst().Tst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.HE()>s)return h}}lot(s,t){const i=t.bst().Tst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.HE()>=s)return h}}mit(s,t){const i=t.bst().Tst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.HE()<=s)return e}}*W$(){for(const t of this.not)yield t}e7(){return{trackDataItemsJson:this.not.map(t=>t.e7())}}h7(t){t&&_n.Kq.znt(this.not,t.trackDataItemsJson,Dn,this)}}}{const Nn=self.Rs;class En{constructor(t,s){this.Pit=s,this.cot="",this.fot=null,this.Hht=null,this.lf=null,this.dot=NaN,this.pot=NaN,this.Unt="default",this.Wnt="default",this.El=!1,this.mot=null,this.got=!0,t&&(this.cot=t[0][0],this.fot=t[0].slice(1),this.Hht=t[1],this.lf=t[2],this.dot=t[3],this.pot=t[4],this.Unt=t[5],this.Wnt=t[6],this.El=!!t[7],this.mot=new Nn.yot(t[8],this),this.got=t[9])}er(){this.mot.er(),this.mot=null,this.Pit=null,this.fot=null}_st(){return this.Pit}zit(){return this.mot||(this.mot=new Nn.yot(null,this)),this.mot}jst(){return this.cot}iet(t){this.cot=t}het(){return this.fot}net(t){this.fot=t}aet(){return this.Hht}let(t){this.Hht=t}$x(){return this.lf}det(t){this.lf=t}yet(){return this.dot}Met(t){this.dot=t}wet(){return this.pot}Tet(t){this.pot=t}ttt(){return this.Unt}stt(t){this.Unt=t}hK(){return this.Wnt}itt(t){this.Wnt=t}$st(){return this.El}tit(t){this.El=!!t}xet(){return!!this.got}e7(){return{propertyKeyframeDataJson:this.mot.e7(),sourceAdapterId:this.cot,sourceAdapterArguments:this.fot,property:this.Hht,type:this.lf,min:this.dot,max:this.pot,interpolationMode:this.Unt,resultMode:this.Wnt,enabled:this.El,canHavePropertyKeyframes:this.got}}h7(t){t&&(this.cot=t.sourceAdapterId,this.fot=t.sourceAdapterArguments,this.Hht=t.property,this.lf=t.type,this.dot=t.min,this.pot=t.max,this.Unt=t.interpolationMode,this.Wnt=t.resultMode,this.El=t.enabled,this.got=t.canHavePropertyKeyframes,this.zit().h7(t.propertyKeyframeDataJson))}}Nn.hot=class{constructor(t,s){this.ust=s,this.Mot=[],Nn.Kq.knt(this.Mot,t,En,this)}er(){this.ust=null;for(const t of this.Mot)t.er();Nn.Ln(this.Mot),this.Mot=null}qst(){return this.ust}Sit(){const t=new En(null,this);return this.Mot.push(t),t}met(t){const s=t.zit();return s.jit()[0]}ert(t){const s=t.zit(),i=s.jit();return i.at(-1)}vet(s,t){const i=t.zit(),e=i.jit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.HE()===s)return r}}Iet(s,t){const i=t.zit(),e=i.jit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.HE()>s)return r}}_et(s,t){const i=t.zit(),e=i.jit(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.HE()>=s)return r}}Cet(s,t){const i=t.zit(),e=i.jit();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.HE()<=s)return h}}*Ist(){for(const t of this.Mot)yield t}e7(){return{propertyTrackDataItemsJson:this.Mot.map(t=>t.e7())}}h7(t){t&&Nn.Kq.znt(this.Mot,t.propertyTrackDataItemsJson,En,this)}}}{const An=self.Rs;class Ln{constructor(t,s){if(this.$nt=s,this.QA=-1,this.wot="noease",this.Sot=!1,this.O$=null,this.Tot=null,t){this.QA=t[0],this.wot=t[1],this.Sot=!!t[2];const i=t[3];this.O$=i?i.split(" "):[],this.Tot=new Set(this.O$.map(t=>t.toLowerCase())),this.bot=null}}er(){this.$nt=null,An.Ln(this.O$),this.O$=null,this.Tot.clear(),this.Tot=null,this.bot=null}bst(){return this.$nt}ZX(){return this.bot}xot(t){this.bot=t}HE(){return this.QA}gB(t){this.QA=t,this.$nt.vot()}Qet(){return this.wot}LB(t){this.wot=t}$st(){return this.Sot}tit(t){this.Sot=!!t}CB(){return this.O$}utt(t){this.O$=t?t.split(" "):[],this.Tot=new Set(this.O$.map(t=>t.toLowerCase()))}Cot(){return this.Tot}rst(t){return this.Tot.has(t.toLowerCase())}e7(){return{time:this.QA,ease:this.wot,enable:this.Sot,tags:this.O$}}h7(t){t&&(this.QA=t.time,this.wot=t.ease,this.Sot=t.enable,this.O$=t.tags,this.Tot=new Set(this.O$.map(t=>t.toLowerCase())))}}An.eot=class{constructor(t,s){this.ust=s,this.Sst=[],An.Kq.knt(this.Sst,t,Ln,this),this.vot()}er(){this.ust=null;for(const t of this.Sst)t.er();An.Ln(this.Sst),this.Sst=null}vot(){this.Sst.sort((t,s)=>t.HE()-s.HE());for(let t=0;t<this.Sst.length;t++){const s=this.Sst[t];s.xot(this.Sst[t+1])}}qst(){return this.ust}Got(){return this.Sst.length}Tst(){return this.Sst}Mit(){const t=new Ln(null,this);return this.Sst.push(t),this.vot(),t}bit(t){for(const s of this.Sst)if(t(s)){const i=this.Sst.indexOf(s);-1!==i&&(s.er(),this.Sst.splice(i,1))}this.Iot(),this.vot()}Iot(){this.Sst.sort((t,s)=>t.HE()-s.HE())}Ait(t){return this.Sst.indexOf(t)}Lit(t){return this.Sst[t]}*_ot(){for(const t of this.Sst)yield t}*Dot(){for(let t=this.Sst.length-1;0<=t;t--)yield this.Sst[t]}e7(){return{keyframeDataItemsJson:this.Sst.map(t=>t.e7())}}h7(t){t&&(An.Kq.znt(this.Sst,t.keyframeDataItemsJson,Ln,this),this.vot())}}}{const On=self.Rs;class Rn{constructor(t,s){this.mot=s,this.Tht=null,this.Not=null,this.lf="",this.QA=NaN,this.wot="noease",this.Sot=!1,this.Eot=null,this.Aot=void 0,this.Lot="line",t&&(this.Tht=t[0][0],this.Not=t[0][1],this.lf=t[0][2],this.QA=t[1],this.wot=t[2],this.Sot=!!t[3],this.Lot=t[5],this.Eot=null,t[4]&&(this.Eot=new On.Oot(t[4],this)),this.bot=null,this.Rot=null)}er(){this.mot=null,this.Eot&&(this.Eot.er(),this.Eot=null),this.bot=null,this.Rot=null}Pot(){return this.Eot}xot(t){this.bot=t}ZX(){return this.bot}kot(t){this.Rot=t}XX(){return this.Rot}oet(){return this.Tht}Jet(t){"color"===this.lf&&On.le(t)?(this.Tht[0]=On.Br(t),this.Tht[1]=On.Ur(t),this.Tht[2]=On.Wr(t)):this.Tht=t}hrt(){return this.Not}Bet(t){"color"===this.lf&&On.le(t)?(this.Not[0]=On.Br(t),this.Not[1]=On.Ur(t),this.Not[2]=On.Wr(t)):this.Not=t}cK(){const t=this.mot.Yit().hK();return"relative"===t?this.oet():"absolute"===t?this.hrt():void 0}$x(){return this.lf}det(t){this.lf=t}HE(){return this.QA}gB(t){this.QA=t,this.mot.Fot()}Qet(){return this.wot}LB(t){this.wot=t}$st(){return this.Sot}tit(t){this.Sot=!!t}KX(){return this.Lot}uK(s){if(this.Eot){if(!this.Aot&&null!==this.Aot){const i=this.Eot.jot();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.jB()===s)return this.Aot=h,this.Aot}}this.Aot=null}return this.Aot}}e7(){const t=this.Eot;return{addonDataJson:t&&t.e7(),value:this.Tht,aValue:this.Not,type:this.lf,time:this.QA,ease:this.wot,enable:this.Sot}}h7(t){t&&(t.addonDataJson&&this.Eot._SetFromJson(t.addonDataJson),this.Tht=t.value,this.Not=t.aValue,this.lf=t.type,this.QA=t.time,this.wot=t.ease,this.Sot=t.enable)}}On.yot=class{constructor(t,s){this.Rit=s,this.Fit=[],this.zot=[],On.Kq.knt(this.Fit,t,Rn,this),On.Kq.jnt(this.zot,t,Rn,this),this.Fot()}er(){this.Rit=null;for(const t of this.Fit)t.er();On.Ln(this.Fit),this.Fit=null;for(const s of this.zot)s.er();On.Ln(this.zot),this.zot=null}Fot(){let s=this.Fit;s.sort((t,s)=>t.HE()-s.HE());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.xot(s[t+1]),0<=t-1&&i.kot(s[t-1])}(s=this.zot).sort((t,s)=>t.HE()-s.HE());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.xot(s[t+1]),0<=t-1&&e.kot(s[t-1])}}jet(){const t=new Rn(null,this);return this.Fit.push(t),this.Fot(),t}zet(t){for(const s of this.Fit)if(t(s)){const i=this.Fit.indexOf(s);-1!==i&&(s.er(),this.Fit.splice(i,1))}this.Bot(),this.Fot()}Bot(){this.Fit.sort((t,s)=>t.HE()-s.HE())}Yit(){return this.Rit}Uot(){return this.Fit.length}ert(){return this.Fit[this.Fit.length-1]}jit(){return this.Fit}qX(){return this.zot}*Wot(){for(const t of this.Fit)yield t}*Qot(){for(let t=this.Fit.length-1;0<=t;t--)yield this.Fit[t]}e7(){const t=this.Fit,s=this.zot;return{propertyKeyframeDataItemsJson:t.map(t=>t.e7()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.e7())}}h7(t){t&&(On.Kq.znt(this.Fit,t.propertyKeyframeDataItemsJson,Rn,this),On.Kq.znt(this.zot,t.propertyKeyframeDataItemsIncludingDisabledJson,Rn,this),this.Fot())}}}{const Pn=self.Rs;class kn{constructor(t,s){this.Eot=s,this.if=t[0],this.Jot=t[1]}er(){this.Eot=null,this.Jot=null}Pot(){return this.Eot}jB(){return this.if}e7(){return{id:this.if,data:this.Jot}}h7(t){t&&(this.if=t.id,this.Jot=t.data)}}class Fn extends kn{constructor(t,s){super(t,s),this.Vot=this.Jot[0],this.Yot=!!this.Jot[1],this.Hot=this.Jot[2],this.qot=!!this.Jot[3]}er(){super.er()}pK(){return this.Vot}Ent(){return this.Yot}yK(){return this.Hot}Ant(){return this.qot}e7(){return Object.assign(super.e7(),{startAnchor:this.Vot,startEnable:!!this.Yot,endAnchor:this.Hot,endEnable:!!this.qot})}h7(t){t&&(super.h7(t),this.Vot=t.startAnchor,this.Yot=!!t.startEnable,this.Hot=t.endAnchor,this.qot=!!t.endEnable)}}class jn extends kn{constructor(t,s){super(t,s),this.Zot=this.Jot[0],this.Xot=this.Jot[1]}er(){super.er()}Ont(){return this.Zot}Lnt(){return this.Xot}e7(){return Object.assign(super.e7(),{direction:this.Zot,revolutions:this.Xot})}h7(t){t&&(super.h7(t),this.Zot=t.direction,this.Xot=t.revolutions)}}Pn.Oot=class{constructor(t,s){this.Kot=s,this.$ot=[],Pn.Kq.knt(this.$ot,t,{prop:0,map:new Map([["cubic-bezier",Fn],["angle",jn]])},this)}er(){this.Kot=null;for(const t of this.$ot)t.er();Pn.Ln(this.$ot),this.$ot=null}tat(){return this.Kot}jot(){return this.$ot}*sat(){for(const t of this.$ot)yield t}e7(){return{addonDataItemsJson:this.$ot.map(t=>t.e7())}}h7(t){t&&Pn.Kq.znt(this.$ot,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Fn],["angle",jn]])},this)}}}{let m=self.Rs,i=0;m.cnt=class extends m.EZ{constructor(t,s){super("tween-"+i++,t,s),this.if="",this.iat=!1,this.eat="start-value",this.dst=null,this.hat=null,this.rat=null,this.Oit=null,this.nat=null}B$(t){const s=m.ir(m.Event,"tweenstatereleased");s.oat=this,t.dispatchEvent(s)}$x(){return 1}p$(){for(const t of this.u$.Q$().W$())this.l$.push(m.aat.Wb(this,t));this.Oit=this.l$[0]}Jtt(){const t=this.u$.Q$().Vtt(),s=m.aat.Wb(this,t);return this.l$.push(s),this.uat(),s}uat(){this.Oit=this.l$[0]}BB(t){return this.Oit.tst()[0]}fet(t){this.lat=t}OB(){const t=this.VX();if(t&&t.length){const s=t[0];if(this.Oit=s){const i=s.OB();return s.Ast()?i:void 0}}}cat(t){this.rat||(this.rat=[]),this.rat.push(t)}fat(t){this.hat||(this.hat=[]),this.hat.push(t)}dat(t){if(this.rat){const s=this.rat.indexOf(t);-1!==s&&this.rat.splice(s,1)}}pat(t){if(this.hat){const s=this.hat.indexOf(t);-1!==s&&this.hat.splice(s,1)}}mat(t,s){for(const i of this.l$)for(const e of i.xst)if(e.sst()===s){const h=e._st(),r=e.Yit(),n=h.met(r);n.Jet(t),n.Bet(t)}}gat(t){for(const s of this.l$)for(const i of s.xst)if(i.sst()===t)return i}yat(t){for(const s of t){const i=this.gat(s);this.mat(i.Eet(),s)}if(this.att()){const e=this.MB()-this.HE();this.yB(e);for(const h of this.l$)h.Kst(e);this.xtt(0)}else{const r=this.HE();this.yB(r);for(const n of this.l$)n.Kst(r);this.xtt(r)}this.vtt()}Mat(t,s){const i=this.gat(s),e=i._st(),h=i.Yit(),r=e.ert(h);r.gB(this.MB()),r.Jet(t),r.Bet(t)}wat(t){this.if=t}jB(){return this.if}Sat(t){this.eat=t}Tat(){return this.eat}kB(t){this.iat=t}PB(){return this.iat}dtt(){if(this.rat)for(const t of this.rat)t(this);if(!this.xX())for(const s of this.l$)s.Git()}ptt(){this._$=this.$c.mtt()}CX(){if(!this.E$&&(this.E$=!0,this.hat))for(const t of this.hat)t(this)}gB(t){this.bat(),super.gB(t)}Dtt(t){(t=m.le(t)?t:this.MB())<0?this.y$=0:t>=this.MB()?this.y$=this.MB():this.y$=t,this.Oit.Ntt()}gX(t){if(!this.vX()&&"current-state"===this.Tat())for(const s of this.l$)s.Cit();super.gX(t)}dB(t=!1){if(super.dB(t),!this.xX())for(const s of this.l$)s.vit()}i0(t=!0,s=!1){this.bat(),super.i0(t,s)}bat(){for(const t of this.l$){const s=t=>{const s=t.HE(),i=this.MB();return 0!==s&&s!==i};t.Tit(s),t.xit(s)}}mZ(){if(!this.cB()){const t=this.OB();if(t&&t.TF().MV())return!1;this.a$.fX(this),this.Rtt()}return!0}SX(h,t,s){if(this.dst||(this.dst=this.OB()),!this.dst||this.dst.jU())this.dB(!0),this.ptt();else{const i=this.dst.S3();if(0!==(h=-1!==i?s*i:h)||0!==this.L$){this.L$=h;const r=this.y$+this.M$,n=h*this.w$,o=r+n,a=this.u$.ztt;o<0?(this.y$=0,this.M$=-o):a<=o?(this.y$=a,this.M$=this.y$-o):(this.y$=o,this.M$=0);let t=!1,s=!1,i=this.SB(),e=this.bB();i||e?i&&!e?0<this.w$?this.y$>=a&&(this.Dtt(0),this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),s=!0):this.y$<=0&&(this.Dtt(a),this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),s=!0):!i&&e?0<this.w$?this.y$>=a&&(this.xtt(a),this.xB(-1*this.vB()),s=!0,1===this.S$?this.T$<this.Ez()?(this.T$++,this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong),this.S$=0):(this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong),t=!0):0===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong),this.S$=1)):this.y$<=0&&(this.xtt(0),this.xB(-1*this.vB()),s=!0,1===this.S$?this.T$<this.Ez()?(this.T$++,this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong),this.S$=0):(t=!0,this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong)):0===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong),this.S$=1)):i&&e&&(0<this.w$?this.y$>=a&&(this.xtt(a),this.xB(-1*this.vB()),s=!0,0===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong)),1===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong)),this.S$++,this.S$=m.wrap(this.S$,0,2)):this.y$<=0&&(this.xtt(0),this.xB(-1*this.vB()),s=!0,0===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong)),1===this.S$&&(this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),this.xat(m.vat.Tween.J9.OnAnyTweenPingPong),this.xat(m.vat.Tween.J9.OnTweensPingPong)),this.S$++,this.S$=m.wrap(this.S$,0,2))):0<this.w$?this.y$>=a&&(this.T$<this.Ez()?(this.T$++,this.Dtt(0),this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),s=!0):(this.xtt(a),t=!0)):this.y$<=0&&(this.T$<this.Ez()?(this.T$++,this.Dtt(a),this.xat(m.vat.Tween.J9.OnAnyTweenLoop),this.xat(m.vat.Tween.J9.OnTweensLoop),s=!0):(this.xtt(0),t=!0)),t?(this.Oit.Btt(),this.dB(!0),this.ptt()):(this.Oit.Rc(this.y$,!0,!1,s,this.A$,!1),this.A$&&(this.A$=!1))}}}xat(t){const s=this.OB(),i=s.Cat(m.vat.Tween);i.PushTriggerTween(this),this.$c.nj(t,s,i.gz()),i.PopTriggerTween()}e7(){const t=super.e7(),s=this.X$();return Object.assign(t,{tweenDataItemJson:s.e7(),id:this.if,destroyInstanceOnComplete:this.iat,initialValueMode:this.eat})}h7(t){if(t){const s=this.X$();s.h7(t.tweenDataItemJson),super.h7(t),this.if=t.id,this.iat=t.destroyInstanceOnComplete,this.eat=t.initialValueMode,this.uat()}}static IsPlaying(t){return t.IsPlaying()}static _B(t){return t._B()}static Gat(t){return!!t.bB()&&0===t.ott()}static Iat(t){return!!t.bB()&&1===t.ott()}static _at(t){const s=t.runtime.V$(),i=new m.Pnt;if(t.json){i.h7(t.json.tweenDataItemJson);const e=new m.cnt(i,s);return e.h7(t.json),e}{const h=new m.cnt(i,s),r=(m.Pe(t.Dat)||(t.Dat=[t.Dat]),h.wat(t.id),h.utt(t.tags),h.Sat(t.initialValueMode),h.kB(t.releaseOnComplete),h.wB(t.loop),h.TB(t.pingPong),h.yB(t.time),h.$$(0),h.stt("default"),h.itt(t.Dat[0].resultMode),h.ett(t.repeatCount),h.Jtt()),n=(r.Zst(t.yz.RF()),r.stt("default"),r.itt(t.Dat[0].resultMode),r.tit(!0),r.sit(t.yz.TF().cO()),t.yz.rz()),o=n.hit()?n.eit():t.yz.u4().im(),a=n.hit()?n.nit():t.yz.u4().pm(),u=(r.iit(o),r.rit(a),r.yit()),l=(u.gB(0),u.LB("noease"),u.tit(!0),u.utt(""),r.yit());l.gB(t.time),l.LB("noease"),l.tit(!0),l.utt("");for(const c of t.Dat){const f=r.wit(),d=(f.iet(c.sourceId),f.ret(c.sourceArgs),f.uet(c.property),f.fet(c.type),f.Met(NaN),f.Tet(NaN),f.stt("default"),f.itt(c.resultMode),f.tit(!0),f.Fet()),p=(d.det(c.valueType),d.gB(0),d.LB(c.ease),d.tit(!0),d.Jet(c.startValue),d.Bet(c.startValue),f.Fet());p.det(c.valueType),p.gB(t.time),p.LB(c.ease),p.tit(!0),p.Jet(c.endValue),p.Bet(c.endValue),f.H$()}return h}}static Zst(t,s){if(!isNaN(s))for(const i of t.VX())i.Zst(s)}Nat(t,s){return this.nat||(this.nat=m.ir(self.EB,this,t,s)),this.nat}}}{const zn=self.Rs;zn.aat=class extends zn.J${constructor(t,s){super(t,s),this.Eat=null,this.Aat=null}static Wb(t,s){return zn.ir(zn.aat,t,s)}Lat(){1===this.xst.length?this.Eat=this.xst[0]:(this.Eat=this.xst[0],this.Aat=this.xst[1])}vst(){for(const t of this.ust._st().Ist())this.xst.push(zn.Oat.Wb(this,t));this.Lat()}wit(){const t=this.ust._st(),s=t.Sit(),i=zn.Oat.Wb(this,s);return this.xst.push(i),this.Lat(),i}gX(){if(this.Est(),this.Ast()||!this.Z$()){const t=this.Nst(),s=t.att(),i=s?0:this.Xst();for(const h of this.xst)h.gX(i),0===this.Cst&&1===h.uit()&&(this.Cst=1),0===this.IZ&&1===h.yX()&&(this.IZ=1);this.Gst=0;const e=this.xst.some(t=>t.jtt());e&&(this.Gst=1),this.wst=this.lit(i),this.gst=!1,this.yst=!1,this.Rc(i)}}Utt(){}Rc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.dst||this.OB(),this.dst){const o=!this.dst.jU();return o&&(!r||!this.TF().MV())&&((this.Aat?(this.Eat.Rc(t,i,e,n),this.Aat):this.Eat).Rc(t,i,e,n),void(0!==this.Eat.uit()&&(this.pst||(this.pst=this.dst.u4()),this.pst)&&this.pst.Rj()))}}Qtt(){}h7(t){super.h7(t),this.Lat()}}}{const Bn=self.Rs;Bn.Oat=class extends Bn.Dst{constructor(t,s){super(t,s),this.Rat=!1}static Wb(t,s){return Bn.ir(Bn.Oat,t,s)}Rc(t,s=!1,i=!1,e=!1){let h,r;if(this.Rat)h=this.Fit[0],r=this.Fit[1];else{if(s)h=this.Pit.Cet(t,this.Rit);else{if(this.Bit){const n=this.Nst(),o=this.Bit.ZX(),a=this.Bit.HE(),u=o?o.HE():n.MB();(t<=a||u<=t)&&(this.Bit=this.Pit.Cet(t,this.Rit))}else this.Bit=this.Pit.Cet(t,this.Rit);h=this.Bit}r=h.ZX()}this.kit.Rc(t,h,r,s,i,e)}Fet(){const t=this.Rit.zit(),s=t.jet();return this.Bit=null,this.Rat=this.bet().length<=2,s}xit(t){this.Bit=null;const s=this.Rit.zit();s.zet(t),this.Rat=this.bet().length<=2}e7(){return{sourceAdapterJson:this.H$().e7(),basic:this.Rat}}h7(t){t&&(this.H$().h7(t.sourceAdapterJson),this.Rat=t.basic)}}}{const Un=self.Rs,Wn=self.oc;Un.Pc=class extends Un.$h{constructor(t,s=!0){super(),this.nr=t[0],this.Pat=t[2],this.kat=[];for(const i of t[1]){const e=Un.Fat.Wb(this,i);this.kat.push(e)}for(let t=0;t<this.kat.length;t++){const h=this.kat[t],r=this.kat[t+1],n=this.kat[t-1];h.xot(r),h.kot(n)}this.jat=new Map,this.zat=new Map,this.Bat(),s&&Wn.Fc(this.nr,(t,s,i,e)=>this.Rc(t,s,i,e),null,{transition:this})}static Wb(t){return Un.ir(Un.Pc,t)}er(){for(const t of this.kat)t.er();Un.Ln(this.kat),this.kat=null,this.jat.clear(),this.jat=null,this.zat.clear(),this.zat=null}kc(t){this.Pat=!!t}Uat(t){const s=this.zat.get(t);if(s)return s;for(const i of this.kat)if(i.Wat()===t)return this.zat.set(t,i),i}Qat(s){for(let t=this.kat.length-1;0<=t;t--){const i=this.kat[t],e=i.Wat();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.XX();if(!h)break;if(h.Wat()!==t.Wat())break;t=h}return t}}}}Rc(t,s,i,e){let h=t/e;if(this.Pat){const M=this.Uat(0),w=this.Uat(1),S=s+(s+i)*M.Jat(),T=(s+i)*w.Jat(),b=T-S;return 0===e?S+b:Wn.zc(t,S,b,e)}0===e&&(h=1);let r=this.Qat(h),n=r.ZX();if(!n){const x=r.XX(),v=r;r=x,n=v}const o=n.Wat()-r.Wat(),a=Un.ur(h,r.Wat(),n.Wat(),0,o);if(r.Vat()||0==o){const C=s+(s+i)*r.Jat(),G=(s+i)*n.Jat(),I=G-C;return 0==o?1===a?C+I:C:Wn.zc(a,C,I,o)}let u=r.Wat(),l=r.Jat(),c=r.Wat()+r.Yat(),f=r.Jat()+r.Hat(),d=n.Wat()+n.qat(),p=n.Jat()+n.Zat(),m=n.Wat(),g=n.Jat(),y=Wn.Cc("spline")(a,u,l,c,f,d,p,m,g,this.jat.get(r));return(1-(y+=r.Jat()))*s+y*(s+i)}Bat(){this.jat.clear();for(let t=0;t<this.kat.length-1;t++){const s=this.kat[t];if(s.Ent()){const i=s,e=this.kat[t+1];if(e.Ant()){const h=i.Wat(),r=i.Wat()+i.Yat(),n=e.Wat()+e.qat(),o=e.Wat();this.jat.set(i,Wn.Bc(h,r,n,o))}}}}}}{const Qn=self.Rs;Qn.Fat=class extends Qn.$h{constructor(t,s){super(),this.Xat=t,this.Kat=s[0],this.$at=s[1],this.tut=s[2],this.sut=s[3],this.iut=s[4],this.eut=s[5],this.Yot=s[6],this.qot=s[7],this.hut=s[8],this.bot=null,this.Rot=null}er(){this.Xat=null}static Wb(t,s){return Qn.ir(Qn.Fat,t,s)}xot(t){this.bot=t}ZX(){return this.bot}kot(t){this.Rot=t}XX(){return this.Rot}Wat(){return this.Kat}Jat(){return this.$at}Yat(){return this.tut}Hat(){return this.sut}qat(){return this.iut}Zat(){return this.eut}Ent(){return this.Yot}Ant(){return this.qot}Vat(){return"linear"===this.hut}rut(){return"cubic"===this.hut}}}{const Jn=self.Rs;Jn.nut=class extends Jn.$h{constructor(t){super(),this.$c=t,this.out=[]}er(){for(const t of this.out)t.er();Jn.Ln(this.out),this.out=null}Wb(t){this.out.push(Jn.Pc.Wb(t))}}}{const Vn=self.Rs;Vn.aut=class extends Vn.$h{constructor(t){super(),this.$c=t,this.uut=null,this.lut=null,this.MZ=t=>this.wZ(t.yz)}er(){if(this._Z(),this.uut){for(const t of this.uut.values())t.clear();this.uut.clear()}this.uut=null,this.$c=null}Wb(t){if(this.uut||(this.uut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.uut.has(e)||this.uut.set(e,new Map),this.uut.get(e));h.set(i,t)}}DZ(){const t=this.$c.Rf();t&&t.addEventListener("instancedestroy",this.MZ)}_Z(){const t=this.$c.Rf();t&&t.removeEventListener("instancedestroy",this.MZ)}cut(){return!!this.uut&&0!==this.uut.size}fut(t,s){let i;if(i=t instanceof Vn.dut?t.cO():t,this.uut.has(i)){const e=this.uut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}mut(t,s){this.lut||(this.lut=new WeakMap),this.lut.has(t)||this.lut.set(t,s)}gut(t){if(!this.lut)return"";const s=this.lut.get(t);return s||""}wZ(t){this.lut&&this.lut.has(t)&&this.lut.delete(t)}}}{const Yn=self.Rs;Yn.yut=class{constructor(t){this.$c=t,this.Mut=new Yn.wut}er(){this.Mut.er(),this.Mut=null,this.$c=null}E4(){return this.$c}Wb(t){this.Mut.hc(t)}Sut(t){return this.Mut.$s(t)}Tut(){return this.Mut.Tut()}}}{const b=self.Rs;b.but=class{constructor(t,s,i,e,h,r,n){this.$c=h.E4(),this.xut=h,this.vut=t,this.Cut=i,this.Gut=e,this.Wg=s,this.$q=r,this.Iut=n??r.OB().RF(),this._ut(),this.Dut=this.Eut?.Nut()??-1,this.Aut=[],this.Lut=null,this.Out=NaN,this.Rut=null,this.Put=null,this.kut=null,this.Fut="",this.jut=null,this.zut="",this.But="",this.Uut=0,this.Wut=!1,this.G$=!1}er(){this.G$||(b.Ln(this.Aut),this.Aut=null,this.$c=null,this.xut=null,this.Gut=null,this.$q=null,this.Lut=null,this.Out=NaN,this.Rut&&this.Rut.clear(),this.Rut=null,this.Put=null,this.kut=null,this.Fut="",this.jut=null,this.zut="",this.But="",this.G$=!0)}hr(){return this.G$}Qut(){return this.xut}E4(){return this.$c}Jc(){return this.vut}Jut(){return this.Gut}lB(){return this.Wg}UZ(){return this.$q||(this.$q=this.$c.h4(this.Iut).rz()),this.$q}Vut(){return this.Yut(this.Dut)}Hut(){const t=this.Vut();return t?t.lB():""}qut(){const t=this.Vut();return t?t.CB():[]}Zut(t){const s=this.qut();if(!s)return!1;if(!s.length)return!1;const i=b.but.ltt(t);return!(!i||!i.length)&&i.every(b.but.ftt,s)}Xut(t,s){const i=this.qut();if(!i)return!1;if(!i.length)return!1;const e=b.but.ltt(t);return!(!e||!e.length)&&e.every(t=>b.but.Kut.call(i,t,s))}static ftt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static ltt(t){return t.trim().split(" ")}static Kut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>b.compare(t.trim(),i,s.trim()))}$ut(t){const s=this.Vut();if(s){if(b.le(t)){const i=s.tlt(),e=i?i[t]:void 0;if(b.le(e))return this.Yut(e)}if("string"==typeof t)for(const h of s.tlt()){const r=this.Yut(h);if(r.mB(t))return this.Yut(r.Nut())}}}slt(t){const s=this.$ut(t);return s?s.lB():""}ilt(t){const s=this.$ut(t);return s?s.CB():""}elt(t){const s=this.Vut();if(!s)return-1;const i=s.tlt();if(!i)return-1;const e=this.$ut(t);return e?i.indexOf(e.Nut()):-1}hlt(){const t=this.Vut();if(!t)return 0;const s=t.tlt();return s?s.length:0}Yut(t){return this.Gut.Yut(t)}i0(){const t=this.rlt();t.nlt(!0)}nlt(t){if(this.olt()){for(const[s,i]of this.olt().entries())i.nlt(!1);this.olt().clear()}if(this.Rut=null,this.Lut=null,this.ult=null,this.Put=null,this.Fut="",this.jut=null,this.zut="",this.But="",this.Aut=[],t){this.xut.llt(this);const e=this.Eut.Nut();e!==this.Dut&&this.clt(e)}else this.Dut=this.Eut.Nut()}flt(){const t=this.Gut.Yut(this.Dut);return t?t.plt().dlt():0}mlt(t){const s=this.glt(t);return s?s.Jc():""}ylt(t){let s;return b.le(t)&&(s=this.glt(t)),"string"==typeof t&&(s=this.Mlt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.oet():""}wlt(t){let s;if(b.le(t)&&(s=this.glt(t)),s="string"==typeof t?this.Mlt(t):s){const i=s.Slt();b.le(i)&&(this.Aut.push(this.Dut),this.clt(i))}}Tlt(t){const s=this.Gut.blt(t);if(s){const i=this.Gut.Yut(s.Nut());i&&(this.Aut.push(this.Dut),this.clt(i.Nut()))}}xlt(){const t=this.Aut.pop();b.le(t)?this.clt(t):this.vlt()&&(this.xut.llt(this.vlt(),!0,!1,!1),this.vlt().clt(this.Clt()),this.rlt().Glt(this.vlt()))}Ilt(t){const s=this.Vut();if(s){s.Nut();const i=this.$ut(t);i&&(this.Aut.push(this.Dut),this.clt(i.Nut()))}}_lt(s){if(b.le(s)){const t=this.Gut.Yut(this.Dut),i=t.plt().Dlt();return!!i[s]}if("string"==typeof s){const e=this.Gut.Yut(this.Dut),h=e.plt().Dlt();for(let t=0;t<h.length;t++)if(h[t].Jc()===s)return!0}return!1}Nlt(){this.Wut=!0}Elt(){return 0<this.Uut}Alt(){this.Uut++}Llt(){this.Uut--,0===this.Uut&&this.Wut&&this.xut.Olt(this)}clt(t){const i=this.Dut,s=this.UZ().OB();if(this.Alt(),this.xut.Rlt(this),this.$c.nj(b.Y9.Flowchart.J9.OnBeforeAnyNodeChange,s),this.$c.nj(b.Y9.Flowchart.J9.OnBeforeTaggedNodeChange,s),this.$c.nj(b.Y9.Flowchart.J9.OnBeforeAnyNodeChangeInFlowchart,s),this.$c.nj(b.Y9.Flowchart.J9.OnBeforeTaggedNodeChangeInFlowchart,s),this.Dut=t,this.$c.nj(b.Y9.Flowchart.J9.OnAnyNodeChange,s),this.$c.nj(b.Y9.Flowchart.J9.OnTaggedNodeChange,s),this.$c.nj(b.Y9.Flowchart.J9.OnAnyNodeChangeInFlowchart,s),this.$c.nj(b.Y9.Flowchart.J9.OnTaggedNodeChangeInFlowchart,s),this.xut.Plt(),this.Llt(),!this.hr()){const e=this.Yut(this.Dut);if("reference"===e.$x()){const h=e.klt();if(this.Flt(e)){this.Aut.pop();const r=this.jlt(e),n=(this.xut.llt(r,!0,!0,!1),r.zlt(this,i),this.rlt());n.Glt(r)}else{const o=e.Blt();if(h){this.Aut.pop();let s=e.Ult();if(s){let t=this.xut.Wlt(s);for(;t;)s=b.Qd(s),t=this.xut.Wlt(s)}else{s=h+"-ref";let t=this.xut.Wlt(s);for(;t;)s=b.Qd(s),t=this.xut.Wlt(s)}const a=this.xut.Qlt(h,o,s,this.$q,!0),u=(a.zlt(this,i),this.Jlt(e,a),this.rlt());a.Vlt(u),u.Glt(a)}}}}}glt(t){const s=this.Gut.Yut(this.Dut);if(!s)return null;const i=s.plt().Dlt();if(!i)return null;const e=i[t];return e||null}Mlt(t){const s=this.Gut.Yut(this.Dut);if(!s)return null;const i=s.plt().Ylt(t);return i||null}_ut(s){if("number"==typeof s){let t=this.Yut(s);t=t||this.Gut.Hlt(),this.Eut=t}else{let t=this.Gut.blt(this.Cut);t=t||this.Gut.Hlt(),this.Eut=t}}e7(){return this.Wut?null:{flowchartName:this.vut,flowchartTag:this.Wg,startNodeTag:this.Cut,currentNodeId:this.Dut,previousNodeIds:this.Aut,pluginUID:this.$q.OB().RF(),reference:{previousFlowchartTag:this.vlt()?this.vlt().lB():"",previousStartNodeId:b.le(this.Clt())?this.Clt():NaN,referencesJson:this.qlt(),currentReferenceFlowchartTag:this.Zlt()?this.Zlt().lB():"",rootFlowchartTag:this.rlt()?this.rlt().lB():""}}}qlt(){if(!this.Xlt())return null;const t=[];for(const[s,i]of this.olt().entries())t.push({flowchartElementId:s.Nut(),flowchartStateTag:i.lB()});return t.length?t:null}h7(t){if(t){if(this.vut=t.flowchartName,this.Wg=t.flowchartTag,this.Cut=t.startNodeTag,this.Dut=t.currentNodeId,this.Aut=t.previousNodeIds,this.Iut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Fut=s.previousFlowchartTag,this.Out=s.previousStartNodeId,this.jut=s.referencesJson,this.zut=s.currentReferenceFlowchartTag,this.But=s.rootFlowchartTag}this._ut()}}vlt(){return"string"==typeof this.Fut&&this.Fut&&(this.Lut=this.xut.Wlt(this.Fut),this.Fut=""),this.Lut}Clt(){return this.Out}zlt(t,s){this.Lut=t,this.Out=s}Zlt(){return"string"==typeof this.zut&&this.zut&&(this.Put=this.xut.Wlt(this.zut),this.zut=""),this.Put}Glt(t){this.Put=t,this.Put===this&&(this.Put=null)}rlt(){return"string"==typeof this.But&&this.But&&(this.kut=this.xut.Wlt(this.But),this.But=""),this.kut||this}Vlt(t){this.kut=t}Xlt(){return this.Klt(),!!this.Rut}Flt(t){return this.Klt(),this.Rut&&this.Rut.has(t)}Klt(){if(this.jut){this.Rut&&this.Rut.clear(),this.Rut||(this.Rut=new Map);for(const t of this.jut){const s=this.xut.Wlt(t.flowchartStateTag),i=s.Yut(t.flowchartElementId);this.Rut.set(i,s)}this.jut=null}}olt(){return this.Klt(),this.Rut}jlt(t){return this.Klt(),this.Rut.get(t)}Jlt(t,s){this.Rut||(this.Rut=new Map),this.Rut.set(t,s)}}}{const Hn=self.Rs;Hn.$lt=class{constructor(t){this.$c=t,this.tct=new Map,this.sct=null,this.ict=[],this.ect=()=>this.xZ(),this.hct=null}er(){Hn.Ln(this.ict),this.ict=null,this.tct.clear(),this.tct=null,this.sct=null,this.$c=null,this.hct=null}E4(){return this.$c}Qlt(t,s,i,e,h,r){const n=this.$c.Qut().Sut(t);if(n){if(!this.tct.has(i)){const o=new Hn.but(t,i,s,n,this,e,r);return this.tct.set(i,o),h&&this.llt(o,!0),o}{const a=this.tct.get(i);a&&this.Olt(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Olt(t){if(t.Nlt(),!t.Elt()){const s=t.lB();this.tct.delete(s),t.er(),this.sct===t&&(this.sct=null)}}rct(t){t.i0()}Wlt(t){return this.tct.get(t)}Rlt(t){this.ict.push(t)}Plt(){this.ict.pop()}llt(t,s=!1,i=!1,e=!0){if(e){const h=t.Zlt();t=h||t}t!==this.sct&&(this.nct(),this.oct(t,s,i))}uct(t){return"string"==typeof t?this.Wlt(t):this.ict.length?this.ict[this.ict.length-1]:this.sct}nct(){if(this.sct&&!this.sct.hr()){const t=this.sct.UZ().OB();this.sct.Alt(),this.Rlt(this.sct),this.$c.nj(Hn.Y9.Flowchart.J9.OnBeforeFlowchartChange,t),this.Plt(),this.sct.Llt()}}oct(t,s=!1,i=!1){if(this.sct=t,this.sct&&!this.sct.hr()){const e=this.sct.UZ().OB();this.sct.Alt(),this.Rlt(this.sct),this.$c.nj(Hn.Y9.Flowchart.J9.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.sct._ut(i),s&&(this.$c.nj(Hn.Y9.Flowchart.J9.OnAnyNodeChange,e),this.$c.nj(Hn.Y9.Flowchart.J9.OnTaggedNodeChange,e)),this.Plt(),this.sct.Llt()}}e7(){return{flowchartJsonObjects:[...this.tct.values()].map(t=>t.e7()),currentFlowchartTag:this.sct?this.sct.lB():null}}h7(t){if(t){this.hct=t;const s=new Map;for(const i of this.hct.flowchartJsonObjects){const e=i.flowchartTag;if(this.tct.has(e)){const h=this.tct.get(e);h.h7(i),s.set(e,h)}else{const r=this.Qlt(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.h7(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.tct.entries())s.has(n)||o.er();this.tct.clear(),this.tct=s,this.$c.k9()?this.$c.Rf().addEventListener("afterload",this.ect):this.xZ()}}xZ(){this.$c.Rf().removeEventListener("afterload",this.ect);const t=this.tct.get(this.hct.currentFlowchartTag);t&&this.llt(t,!0),this.hct=null}}}{const qn=self.Rs;qn.wut=class{constructor(){this.lct=new Map}er(){for(const t of this.lct.values())t.er();this.lct.clear(),this.lct=null}hc(t){const s=new qn.cct(t),i=s.Jc();this.lct.set(i,s)}$s(t){return this.lct.get(t)}Tut(){return!!this.lct.size}static fct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Zn=self.Rs;Zn.cct=class{constructor(t){this.nr=t[0],this.dct=new Zn.pct(t[1],this)}er(){this.dct.er(),this.dct=null}mct(){return this.dct}Yut(t){return this.dct.Yut(t)}blt(t){return this.dct.blt(t)}Hlt(){return this.dct.Hlt()}Jc(){return this.nr}}}{const Xn=self.Rs;class Kn{constructor(t,s){this.dct=s,this.lf=t[7],this.gct=t[0],this.Wg=t[1],this.Wg?this.O$=this.Wg.trim().split(" ").map(t=>t.trim()):this.O$=[],this.yct=t[2],this.Mct=null,this.wct=null,"dictionary"===this.lf&&(this.Mct=t[3],this.wct=t[4]),this.Sct=t[6],this.Tct=null,this.bct=null,this.xct=null,"reference"===this.lf&&(this.Tct=t[8],this.bct=t[9],this.xct=t[10]),this.vct=new Xn.Cct(t[5],this)}er(){this.dct=null}mct(){return this.dct}plt(){return this.vct}Nut(){return this.gct}lB(){return this.Wg}CB(){return this.O$}mB(t){if(!this.O$)return!1;if(!this.O$.length)return!1;const s=Xn.but.ltt(t);return!(!s||!s.length)&&s.every(Xn.but.ftt,this.O$)}Gct(){return this.Sct}tlt(){return this.yct}Ict(){return this.Mct}_ct(){return this.wct}$x(){return this.lf}klt(){return this.Tct}Blt(){return this.bct}Ult(){return this.xct}}Xn.pct=class{constructor(t,s){this.Gut=s,this.Dct=[],this.Nct=new Map,this.Ect=new Map,this.Act=null,Xn.wut.fct(this.Dct,t,Kn,this);for(const i of this.Dct){const e=i.Nut(),h=i.lB(),r=i.CB(),n=i.Gct();if(this.Nct.set(e,i),h)for(const a of r)this.Ect.has(a)||this.Ect.set(a,new Set),this.Ect.get(a).add(i);n&&(this.Act=i);const o=i.plt();for(const u of o.Lct()){const l=u.Nut();this.Nct.set(l,u)}}}er(){this.Gut=null;for(const t of this.Dct)t.er();Xn.Ln(this.Dct),this.Dct=null}Jut(){return this.Gut}Yut(t){return this.Nct.get(t)}blt(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Ect.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Hlt(){return this.Act}*Oct(){for(const t of this.Dct)yield t}}}{const $n=self.Rs;class to{constructor(t,s){this.vct=s,this.gct=t[0],this.nr=t[1],this.Tht=t[2],this.Rct=t[3]}er(){this.vct=null}plt(){return this.vct}Nut(){return this.gct}Jc(){return this.nr}oet(){return this.Tht}Slt(){return this.Rct}}$n.Cct=class{constructor(t,s){this.Pct=s,this.kct=[],this.Fct=new Map,$n.wut.fct(this.kct,t,to,this);for(const i of this.kct)this.Fct.set(i.Jc(),i)}er(){this.Pct=null;for(const t of this.kct)t.er();$n.Ln(this.kct),this.kct=null}jct(){return this.Pct}dlt(){return this.kct.length}Dlt(){return this.kct}Ylt(t){return this.Fct.get(t)}*Lct(){for(const t of this.kct)yield t}}}{const so=self.Rs;so.zct=class extends so.$h{constructor(t){super(),this.Bct=t,this.Uct=[],this.Uct.push(so.ir(so.Wct,this)),this.Ug=0,this.Qct=this.Uct[0]}er(){for(const t of this.Uct)t.er();so.Ln(this.Uct),this.Qct=null,this.Bct=null}TF(){return this.Bct}GP(){return this.Qct}Jct(){return this.Uct[this.Ug-1]}Hl(){this.GP().Hl()}Vct(){const t=this.Uct,s=++this.Ug;if(s===t.length){const i=so.ir(so.Wct,this);t.push(i),this.Qct=i}else{const e=t[s];e.i0(),this.Qct=e}}Yct(){const t=this.Uct,s=++this.Ug,i=(s===t.length&&t.push(so.ir(so.Wct,this)),t[s]);i.T0(t[s-1]),this.Qct=i}j6(){this.Qct=this.Uct[--this.Ug]}Hct(i){const e=this.Uct;for(let t=0,s=e.length;t<s;++t)e[t].Hct(i)}}}{const io=self.Rs;io.Wct=class extends io.$h{constructor(t){super(),this.Uct=t,this.Bct=this.Uct.TF(),this.qct=this.Bct.E4().s3(),this.Zct=!0,this._J=[],this.Xct=[]}er(){this.Kct(),this.Uct=null,this.Bct=null,this.qct=null}Kct(){io.Ln(this._J),io.Ln(this.Xct)}TF(){return this.Bct}$ct(){return this.Zct}tft(){return this.Zct?!!this.Bct._P():!!this._J.length}CP(){return this.Zct?this.Bct.CP():this._J}ift(){return!!this.Xct.length}eft(){return this.Xct}hft(){const t=this.CP();return t.length?t:this.Xct}i0(){this.Zct=!0,io.Ln(this.Xct)}Hl(){this.Zct=!0}T0(t){t.$ct()?this.i0():(this.Zct=!1,io.kn(this._J,t._J),io.Ln(this.Xct))}rft(t){this._J.push(t)}nft(t){this.Xct.push(t)}oft(t){this.Zct=!!t}aft(){return this._J}uft(){return this.Xct}lft(t){this.Zct=!1,io.Ln(this._J),this._J.push(t)}cft(t){this.Zct=!1,io.kn(this._J,t)}fft(t){this.Zct=!1,io.Ln(this._J);for(const s of t)this._J.push(s)}dft(t,s){for(const i of s)t.has(i)||this.Xct.push(i)}pft(t){for(const s of t)this._J.push(s);io.Un(this.Xct,t)}mft(){io.Ln(this.Xct)}gft(t){if(t)if(this.qct.I6().HO().yft()){this.$ct()&&(io.Ln(this._J),io.kn(this.Xct,t.TF().CP()),this.Zct=!1);const s=this.Xct.indexOf(t);-1!==s&&(this._J.push(this.Xct[s]),this.Xct.splice(s,1))}else this.lft(t)}Hct(t){io.Un(this._J,t),io.Un(this.Xct,t)}}}{const eo=self.Rs;eo.Mft=class extends eo.$h{constructor(t){super(),this.wft=t,this.$c=this.wft.E4(),this.Uct=[],this.Uct.push(eo.ir(eo.Sft,this,null)),this.Ug=0,this.Tft=[]}er(){for(const t of this.Uct)t.er();eo.Ln(this.Uct),eo.Ln(this.Tft),this.wft=null,this.$c=null}UO(){return this.wft}E4(){return this.$c}I6(){return this.Uct[this.Ug]}bft(){return this.Uct}xft(){return this.Ug}_6(t){const s=this.Uct,i=++this.Ug;if(i===s.length){const e=eo.ir(eo.Sft,this,t);return s.push(e),e}{const h=s[i];return h.i0(t),h}}j6(){--this.Ug}vft(t){this.Tft.push(t)}Cft(){this.Tft.pop()}t3(){const t=this.Tft;return 0===t.length?null:t.at(-1)}}}{const ho=self.Rs;ho.Sft=class extends ho.$h{constructor(t,s){super(),this.Uct=t,this.$c=this.Uct.E4(),this.Gft=s,this.Ift=0,this._ft=0,this.Dft=!1,this.Nft=!1,this.Eft=null,this.Aft=0,this.Lft=0,this.Oft=null}er(){this.i0(null),this.Uct=null,this.$c=null}i0(t){this.Gft=t,this.Ift=0,this._ft=0,this.Dft=!1,this.Nft=!1,this.Oft=null}Rft(t,s){this.Gft=t,this.Ift=0,this._ft=s}Pft(){this.Ift=0,this._ft=0}HO(){return this.Gft}kft(t){this.Gft=t}Fft(){return this.Ift}jft(t){this.Ift=t}zft(){return this._ft}Bft(t){this._ft=t}Uft(t){this.Dft=!!t}Wft(){return this.Dft}Qft(t){this.Nft=!!t}Jft(){return this.Nft}Vft(t){this.Eft=t}Yft(){return this.Eft}Hft(t,s){this.Aft=t,this.Lft=s}i3(){return this.Aft}e3(t){this.Lft=t}qft(){return this.Lft}Zft(){const t=this.Gft;return!!t.Xft()||this.Ift<t.Kft()-1&&!!t.G6().length}$ft(t){this.Oft=t}t0t(){return this.Oft}}}{const ro=self.Rs;ro.s0t=class extends ro.$h{constructor(t){super(),this.wft=t,this.$c=this.wft.E4(),this.Uct=[],this.Ug=-1,this.Qct=null,this.i0t=[]}er(){ro.Ln(this.Uct),this.wft=null,this.$c=null}e0t(t){this.i0t=t;const s=this.i0t.slice(0);this.Uct.push(s),this.Ug=0,this.Qct=s}UO(){return this.wft}E4(){return this.$c}h0t(){return this.Qct}_6(){const t=++this.Ug,s=this.Uct;t===s.length?s.push(this.i0t.slice(0)):ro.kn(s[t],this.i0t),this.Qct=s[t]}j6(){this.Qct=this.Uct[--this.Ug]}}}{const no=self.Rs;no.r0t=class extends no.$h{constructor(t){super(),this.wft=t,this.$c=this.wft.E4(),this.Uct=[],this.Ug=-1}er(){no.Ln(this.Uct),this.wft=null,this.$c=null}UO(){return this.wft}E4(){return this.$c}n0t(){return 0<=this.Ug}h0t(){return this.Uct[this.Ug]}_6(){if(++this.Ug,this.Ug===this.Uct.length){const t=no.ir(no.o0t,this);return this.Uct.push(t),t}{const s=this.Uct[this.Ug];return s.i0(),s}}j6(){--this.Ug}a0t(s){const i=this.Uct;for(let t=this.Ug;0<=t;--t){const e=i[t];if(e.Jc()===s)return e}return null}u0t(){return this.Uct.slice(0,this.Ug+1)}}}{const oo=self.Rs;oo.o0t=class extends oo.$h{constructor(t){super(),this.l0t=t,this.nr="",this.Ug=0,this.c0t=!1,this.f0t=NaN}i0(){this.nr="",this.Ug=0,this.c0t=!1,this.f0t=NaN}N6(t){this.nr=t}Jc(){return this.nr}P6(t){this.Ug=t}cO(){return this.Ug}dB(){this.c0t=!0}F6(){return this.c0t}d0t(t){this.f0t=t}p0t(){return this.f0t}}}{const ao=self.Rs;ao.m0t=class extends ao.$h{constructor(){super(),this.Uct=[],this.Ug=-1}er(){ao.Ln(this.Uct)}h0t(){return this.Uct[this.Ug]}_6(){if(++this.Ug,this.Ug!==this.Uct.length)return this.Uct[this.Ug];{const t=[];return this.Uct.push(t),t}}j6(){--this.Ug}}}{let t=function(t,s){return t.cO()-s.cO()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const x=self.Rs;x.g0t=class extends x.$h{constructor(t){super(),this.$c=t,this.y0t=[],this.M0t=new Map,this.w0t=[],this.S0t=new Map,this.T0t=new Map,this.b0t=new Map,this.x0t=new Map,this.v0t=new Map,this.C0t=new Map,this.G0t=0,this.I0t=[],this._0t=[],this.D0t=[],this.N0t=new Map,this.E0t=new Map,this.qct=x.ir(x.Mft,this),this.A0t=x.ir(x.s0t,this),this.l0t=x.ir(x.r0t,this),this.L0t=[],this.O0t=[],this.R0t=[],this.P0t=0,this.k0t=0,this.F0t=0,this.j0t=[],this.z0t=[],this.B0t=[],this.U0t=new Map,this.W0t=new Map,self.c3_callFunction=(t,s)=>this.Q0t(t,s)}er(){this.nq(),this.qct.er(),this.qct=null,this.A0t.er(),this.A0t=null,x.Ln(this.O0t),x.Ln(this.R0t),this.$c=null,x.Ln(this.y0t),this.M0t.clear()}Wb(t){const s=x.ir(x.J0t,this,t);this.y0t.push(s),this.M0t.set(s.Jc().toLowerCase(),s)}V0t(t){this.L0t.push(t)}Y0t(){for(const t of this.E0t.values())t.H0t();for(const s of this.N0t.values())s.Y0t();for(const i of this.E0t.values())i.Y0t();for(const e of this.y0t)e.Y0t();for(const h of this.y0t)h.G9();for(const r of this.L0t)r.Y0t(!1);x.Ln(this.L0t),this.A0t.e0t(this.D0t)}E4(){return this.$c}C9(t){return this.M0t.get(t.toLowerCase())||null}q0t(t){this.w0t.push(t),this.S0t.set(t.Z0t(),t)}X0t(t){this.T0t.set(t.zV(),t)}K0t(t){this.b0t.set(t.zV(),t)}$0t(t){this.x0t.set(t.zV(),t)}t1t(t){switch(t.s1t()){case 0:this.N0t.set(t.i1t().toLowerCase(),t);break;case 1:this.E0t.set(t.i1t().toLowerCase(),t)}}e1t(t){this.C0t.set(t.zV(),t),(t.MV()?this.I0t:this._0t).push(t)}h1t(i){2<=i.length&&i.sort(t);let e=this.v0t.get(i.length);e||(e=[],this.v0t.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}r1t(t){return this.D0t.push(t.n1t()),this.G0t++}s3(){return this.qct}o1t(){return this.s3().I6()}HO(){return this.o1t().HO()}a1t(){const t=this.o1t(),s=t.HO();return s.u1t(t.Fft())}l1t(){const t=this.o1t(),s=t.HO();return s.c1t(t.zft())}f1t(){return this.A0t}D6(){return this.l0t}d1t(t){const s=[];for(t=t.p1t();t;)x.Qh(s,t.m1t()),t=t.p1t();return s}g1t(t){const s={};for(const i of this.d1t(t))s[i.y1t()]=i.M1t();return Object.create(Object.prototype,s)}w1t(t){return this.C0t.get(t)||null}S1t(t){return this.T0t.get(t)||null}T1t(t){return this.b0t.get(t)||null}b1t(t){return this.x0t.get(t)||null}WO(t){return this.N0t.get(t.toLowerCase())||null}x1t(t,s){let i=this.E0t.get((t.Jc()+"."+s).toLowerCase());if(i)return i;if(!t.AV())for(const e of t.v1t())if(i=this.E0t.get((e.Jc()+"."+s).toLowerCase()))return i;return null}C1t(){return this.I0t}G1t(){return this._0t}I1t(t){for(const s of this.I0t)s._1t();if(t)for(const i of this._0t)i.Q2()&&i._1t()}D1t(t){return this.S0t.get(t.toLowerCase())||null}N1t(t){const s=this.T0t.get(t);return s&&s.E1t()?s:null}A1t(){return this.w0t}L1t(){for(const t of this.w0t)t.O1t()}R1t(){for(const t of this.y0t)t.P1t()}k1t(t){this.R1t(),this.P0t++;for(const s of t.Jq()){const i=s.K7();i&&(this.$c.F1t(s),i.MG(),this.$c.j1t())}this.P0t--}async z1t(t){this.R1t(),this.P0t++;for(const s of this.B1t(t))await this.$c.U1t(s);this.P0t--}*B1t(t){for(const s of t.Jq()){const i=s.K7();i&&(this.$c.F1t(s),yield*i.W1t(),this.$c.j1t())}}Q1t(t,s,i,e){let h=!1;if(!t.z3())return this.J1t(s,i,e);this.k0t++;for(const r of t.Jq()){const n=r.K7();if(n){this.$c.F1t(r);for(const a of n.V1t()){const u=a.Q1t(s,i,e);h=h||u}const o=n.Q1t(s,i,e);h=h||o,this.$c.j1t()}}return this.k0t--,h}*Y1t(t,s,i,e){let h=!1;if(!t.z3())return this.J1t(s,i,e);this.k0t++;for(const r of t.Jq()){const n=r.K7();if(n){this.$c.F1t(r);for(const a of n.V1t()){const u=yield*a.Y1t(s,i,e);h=h||u}const o=yield*n.Y1t(s,i,e);h=h||o,this.$c.j1t()}}return this.k0t--,h}J1t(t,s,i){return this.O0t.push([t,s,i]),!1}H1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.R0t.push([t,s,i,e]),h}*q1t(){if(this.$c.Z1t())throw new Error("should not be in breakpoint");const t=this.$c.W3();for(;this.R0t.length;){const[s,i,e,h]=this.R0t.shift(),r=yield*this.Y1t(t,s,i,e);h(r)}}async X1t(){for(const t of this.q1t())await this.$c.U1t(t)}K1t(t,i,e,h){let r=!1,s=t.z3(),n=s.K7();if(n){this.k0t++,this.$c.F1t(s);const o=n.V1t();for(let t=0,s=o.length;t<s;++t){const u=o[t].K1t(i,e,h);r=r||u}const a=n.K1t(i,e,h);return r=r||a,this.$c.j1t(),this.k0t--,r}}*$1t(t,i,e,h){let r=!1,s=t.z3(),n=s.K7();if(n){this.k0t++,this.$c.F1t(s);const o=n.V1t();for(let t=0,s=o.length;t<s;++t){const u=yield*o[t].$1t(i,e,h);r=r||u}const a=yield*n.$1t(i,e,h);return r=r||a,this.$c.j1t(),this.k0t--,r}}tdt(){return this.k0t}sdt(){return 0<this.tdt()}idt(){return++this.k0t}edt(){--this.k0t}hdt(){return 0<this.P0t}OP(){return this.hdt()||this.sdt()}H9(t){for(const[s,i,e]of this.O0t)this.Q1t(t,s,i,e);x.Ln(this.O0t)}AP(t){t?this.F0t++:this.F0t--}DF(){return 0<this.F0t}rdt(i){for(let t=0,s=i.length;t<s;++t)i[t].ndt().Hl()}odt(i){for(let t=0,s=i.length;t<s;++t)i[t].ndt().Vct()}L6(i){for(let t=0,s=i.length;t<s;++t)i[t].ndt().Yct()}R6(i){for(let t=0,s=i.length;t<s;++t)i[t].ndt().j6()}qO(s){const i=new Set,e=this.qct.bft(),h=this.qct.xft();for(let t=0;t<=h;++t){const r=e[t].t0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}adt(t){const s=new Set([...t]),i=this.qO(s);if(0<i.size){for(const e of i)e.ndt().Vct();return[...i]}return null}udt(){const t=x.ir(x.ldt,this);return this.j0t.push(t),t}cdt(){return this.j0t}fdt(){if(this.j0t.length){let i=this.o1t(),e=!1;this.P0t++;for(let t=0,s=this.j0t.length;t<s;++t){const h=this.j0t[t];h.ddt()&&h.pdt(i),h.mdt()&&(e=!0)}e&&(this.gdt(),i.i0(null)),this.P0t--}}async ydt(){if(this.j0t.length){let i=this.o1t(),e=!1;this.P0t++;for(let t=0,s=this.j0t.length;t<s;++t){const h=this.j0t[t];h.ddt()&&await h.Mdt(i),h.mdt()&&(e=!0)}e&&(this.gdt(),i.i0(null)),this.P0t--}}gdt(){const t=x.Bn(this.j0t,t=>t.mdt());for(const s of t)s.er()}nq(){for(const t of this.j0t)t.er();x.Ln(this.j0t)}wdt(t){for(const s of this.j0t)s.Hct(t);for(const i of t){const e=this.W0t.get(i);if(this.W0t.delete(i),e)for(const{resolve:h}of e.Sdt.values())h(!0)}}Tdt(t){this.z0t.push({promise:t,bdt:this.tdt()})}xdt(){x.Ln(this.z0t)}vdt(){const s=this.tdt();this.z0t=this.z0t.filter(t=>t.bdt<=s)}Cdt(){const t=Promise.all(this.z0t.map(t=>t.promise));return this.z0t=[],t}h3(t){const s=t.toLowerCase();this.B0t.push(s),this.$c.nj(x.Y9.V9.J9.Gdt,null),this.B0t.pop();for(const e of this.$c.UO().cdt())e.Idt()&&e._dt()===s&&e.Ddt();const i=this.U0t.get(s);i&&(i.resolve(),this.U0t.delete(s))}n3(t){const i=t.toLowerCase(),s=this.U0t.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.U0t.set(i,{promise:t,resolve:s}),t}}Ndt(){if(0===this.B0t.length)throw new Error("not in a signal");return this.B0t.at(-1)}Edt(t){let s=this.W0t.get(t);return s||(s={Adt:[],Sdt:new Map},this.W0t.set(t,s)),s}VF(t,s){const i=this.Edt(t),e=s.toLowerCase();i.Adt.push(e),this.$c.nj(t.pP().Odt().J9.Ldt,t),i.Adt.pop();for(const r of this.$c.UO().cdt())r.Rdt()&&r._dt()===e&&r.Pdt(t);const h=i.Sdt.get(e);h&&(h.resolve(!1),i.Sdt.delete(e)),0===i.Adt.length&&0===i.Sdt.size&&this.W0t.delete(t)}YF(t,s){const i=this.Edt(t),e=s.toLowerCase(),h=i.Sdt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.Sdt.set(e,{promise:t,resolve:s}),t}}kdt(t){const s=this.Edt(t);if(s&&0!==s.Adt.length)return s.Adt.at(-1);throw new Error("not in a signal")}e7(){return{groups:this.Fdt(),cnds:this.jdt(),acts:this.zdt(),vars:this.Bdt(),waits:this.Udt()}}h7(t){this.Wdt(t.groups),this.Qdt(t.cnds),this.Jdt(t.acts),this.Vdt(t.vars),this.Ydt(t.waits)}Fdt(){const t={};for(const s of this.A1t())t[s.zV().toString()]=s.Hdt();return t}Wdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.N1t(e);h&&h.qdt(i)}}jdt(){const t={};for(const[s,i]of this.b0t){const e=i.e7();e&&(t[s.toString()]=e)}return t}Qdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.b0t)r.h7(s.get(h)||null)}zdt(){const t={};for(const[s,i]of this.x0t){const e=i.e7();e&&(t[s.toString()]=e)}return t}Jdt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.x0t)r.h7(s.get(h)||null)}Bdt(){const t={};for(const[s,i]of this.C0t)i.Zdt()||!i.MV()&&!i.Q2()||(t[s.toString()]=i.oet());return t}Vdt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.w1t(e);h&&h.Jet(i)}}Udt(){return this.j0t.filter(t=>!t.Xdt()).map(t=>t.e7())}Ydt(t){this.nq();for(const s of t){const i=x.ldt.Kdt(this,s);i&&this.j0t.push(i)}}$dt(){return[...this.$c.W3().Jq()].map(t=>t.K7()).filter(t=>t).map(t=>t.tpt())}spt(t){for(;t;){const s=t.p1t();if(s instanceof x.ipt)return s;t=s}return null}Q0t(t,s){Array.isArray(s)||(s=[]);const i=this.WO(t.toLowerCase());if(!i)return null;if(!i.Jl())return i.QO();const e=i.ept();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].n1t()),s.length<e.length;);const h=i.VO();return h.ZO(h.YO(),!1,i.KO(),i.QO(),...s)}}}{const uo=self.Rs;uo.J0t=class extends uo.$h{constructor(t,s){super(),this.wft=t,this.$c=t.E4(),this.nr=s[0],this.hpt=[],this.rpt=new Map,this.npt=new Map,this.opt=new Map,this.apt=!1,this.upt=[],this.lpt=[],this.cpt=new Set;for(const i of s[1])this.fpt(i,null,this.hpt);this.dpt=this.$c.Gq()?{type:"sheet",name:this.nr,ppt:0,children:[]}:null}er(){this.wft=null,this.$c=null}fpt(t,s,i){switch(t[0]){case 0:case 3:this.mpt(t,s,i);break;case 1:this.gpt(t,s,i);break;case 2:this.ypt(t,s,i);break;case 4:this.Mpt(t,s);break;case 5:this.wpt(t,s,i);break;case 6:this.Spt(t,s);break;default:throw new Error("invalid event type")}}mpt(t,s,i){const e=uo.Tpt.Wb(this,s,t);if(e.yft()){i.push(e);const h=e.bpt();for(let t=0,s=h.length;t<s;++t)h[t].xpt()&&this.vpt(e,t)}else e.xpt()?this.vpt(e,0):i.push(e)}Mpt(t,s){const i=uo.ipt.Cpt(this,s,t);this.wft.t1t(i)}Spt(t,s){const i=uo.ipt.Gpt(this,s,t);this.wft.t1t(i)}gpt(t,s,i){const e=uo.Ipt.Wb(this,s,t);i.push(e)}ypt(t,s,i){const e=uo._pt.Wb(this,s,t);i.push(e)}wpt(t,s,i){const e=uo.Dpt.Wb(this,s,t);i.push(e)}vpt(h,r){h.yft()||this.wft.V0t(h);const n=h.u1t(r),o=n.Npt(),a=n.TF();if(n.Ept()){let t=this.npt.get(a),s=(t||(t=new Map,this.npt.set(a,t)),n.Apt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.rpt.get(a),s=(t||(t={Lpt:new Map,Opt:new Map},this.rpt.set(a,t)),n.gz()),i,e=(s?(i=t.Opt.get(s))||(i=new Map,t.Opt.set(s,i)):i=t.Lpt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Y0t(){const i=this.hpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof uo.Tpt&&i[t+1].Rpt();i[t].Y0t(e)}}Ppt(t){this.upt.push(t)}G9(){uo.Ln(this.lpt),this.kpt(this),this.cpt.clear()}kpt(t){const s=t.lpt,i=t.cpt;for(const e of this.upt){const h=e.Fpt();e.jpt()&&t!==h&&!i.has(h)&&(i.add(h),h.kpt(t),s.push(h))}}V1t(){return this.lpt}UO(){return this.wft}E4(){return this.$c}Jc(){return this.nr}zpt(t,s){this.opt.set(s,t)}Bpt(t){return this.opt.get(t)||null}P1t(){this.apt=!1}MG(){if(!this.apt){const t=this.$c,s=t.Upt(),i=s?performance.now():0,e=(this.apt=!0,this.UO()),h=e.o1t();for(const r of this.hpt)r.MG(h),e.rdt(r.G6()),e.xdt(),t.PP();h.i0(null),s&&(this.dpt.ppt+=performance.now()-i)}}*W1t(){if(!this.apt){this.apt=!0;const t=this.$c,s=this.UO(),i=s.o1t();for(const e of this.hpt)yield*e.W1t(i),s.rdt(e.G6()),s.xdt(),t.PP();i.i0(null)}}Q1t(e,h,r){if(!h)return this.Wpt(e,h,null,null);{let t=h.TF(),s=!1,i=this.Wpt(e,h,t,r);s=s||i;for(const n of t.v1t())i=this.Wpt(e,h,n,r),s=s||i}}Wpt(t,s,i,e){const h=this.rpt.get(i);if(!h)return!1;const r=e?h.Opt.get(e):h.Lpt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){const l=this.Qpt(s,a,u);o=o||l}return o}*Y1t(e,h,r){if(!h)return yield*this.Jpt(e,h,null,null);{let t=h.TF(),s=!1,i=yield*this.Jpt(e,h,t,r);s=s||i;for(const n of t.v1t())i=yield*this.Jpt(e,h,n,r),s=s||i}}*Jpt(t,s,i,e){const h=this.rpt.get(i);if(!h)return!1;const r=e?h.Opt.get(e):h.Lpt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,u]of n){let t;t=a.Vpt()?this.Qpt(s,a,u):yield*this.Ypt(s,a,u),o=o||t}return o}K1t(t,s,i){const e=s.TF(),h=this.npt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],u=this.Qpt(null,a[0],a[1]);o=o||u}return o}*$1t(t,s,i){const e=s.TF(),h=this.npt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Vpt()?this.Qpt(null,s,i):yield*this.Ypt(null,s,i),o=o||e}return o}Qpt(t,s,i){let e=this.$c,h=this.wft,r=h.HO(),n=h.s3(),o=h.tdt(),a=!1;r&&h.odt(r.YO()),h.odt(s.YO());const u=1<o,l=(u&&h.f1t()._6(),n._6(s));if(t){const f=s.bpt()[i].TF(),d=f.GP();d.lft(t),t.LF()&&t.Hpt()}let c=!0;if(s.u5()){const p=s.qpt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Zpt(l)){c=!1;break}}return c&&(s.yft()?s.Xpt(l,i):s.MG(l),a=l.Wft()),n.j6(),u&&h.f1t().j6(),h.R6(s.YO()),r&&h.R6(r.YO()),r||1!==o||(h.xdt(),h.DF())||e.PP(),a}*Ypt(t,s,i){let e=this.$c,h=this.wft,r=h.HO(),n=h.s3(),o=h.tdt(),a=!1;r&&h.odt(r.YO()),h.odt(s.YO());const u=1<o,l=(u&&h.f1t()._6(),n._6(s));if(t){const f=s.bpt()[i].TF(),d=f.GP();d.lft(t),t.LF()&&t.Hpt()}let c=!0;if(s.u5()){const p=s.qpt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Kpt(l))){c=!1;break}}return c&&(s.yft()?yield*s.$pt(l,i):yield*s.W1t(l),a=l.Wft()),n.j6(),u&&h.f1t().j6(),h.R6(s.YO()),r&&h.R6(r.YO()),r||1!==o||(h.xdt(),h.DF())||e.PP(),a}tpt(){return this.dpt}}}{let l=function(t,s){return!0};l;const lo=self.Rs,co=[];function*j(t,s){return!0}lo.Tpt=class extends lo.$h{constructor(t,s,i){super(),this.y7=t,this.$c=t.E4(),this.tmt=s,this.smt=null,this.qct=this.$c.UO().s3(),this.imt=[],this.emt=[],this.hmt=!1,this.rmt=!1,this.nmt=!1,this.omt=!1,this.amt=!!i[2],this.umt=!1,this.lmt=null,this.cmt=[],this.Cht=[],this.fmt=[],this.dmt=l,this.pmt=j,this.mmt=!1,this.gmt=!1,this.ymt="",this.Mmt=!1,this.wmt=null,this.dpt=null,this.n8=i[4],this.Smt=i[5],this.y7.zpt(this,this.Smt),this.Tmt=this.$c.Gq()?{bmt:i[3][0],xmt:i[3][1],vmt:!1,Cmt:!1,Gmt:!1,Imt:!1}:null,this.UO().X0t(this),3===i[0]&&this._mt(i[1]);let e=0;for(const h of i[6]){const r=lo.Dmt.Wb(this,h,e++);this.cmt.push(r),this.Nmt(r.TF())}e=0;for(const n of i[7]){const o=lo.Emt.Wb(this,n,e++);this.Cht.push(o)}if(9===i.length){const a=i[8];for(const u of a)this.y7.fpt(u,this,this.fmt)}this.cmt.length&&(this.umt=null===this.cmt[0].TF()&&this.cmt[0].Npt()===lo.Y9.V9.J9.Amt),0===this.cmt.length&&(this.cmt=co),0===this.Cht.length&&(this.Cht=co),0===this.fmt.length&&(this.fmt=co)}static Wb(t,s,i){return lo.ir(lo.Tpt,t,s,i)}_mt(t){this.mmt=!0,this.gmt=!!t[0],this.Mmt=this.gmt,this.ymt=t[1].toLowerCase(),this.wmt=[],this.UO().q0t(this),this.$c.Gq()&&(this.dpt={type:"group",name:t[1],ppt:0,children:[]})}Lmt(t){this.wmt.push(t)}Omt(t,s){for(const i of t.f9().X9())s.includes(i)||s.push(i)}Rmt(t,s){if(t)if(s.includes(t)||s.push(t),t.AV())for(const i of t.Pmt())i.LF()&&this.Omt(i,s);else t.LF()&&this.Omt(t,s)}Nmt(t){this.Rmt(t,this.imt)}kmt(t){this.Rmt(t,this.emt)}Fmt(){this.imt=this.$c.EV()}Y0t(t){this.omt=!!t,this.jmt(),this.zmt();for(const s of this.cmt)s.Y0t();if(0<this.Cht.length){let t=!1;for(const e of this.Cht)e.Y0t(),e.Bmt()&&(t=!0);t?(this.dmt=this.Umt,this.pmt=this.Wmt):(this.dmt=this.Qmt,this.pmt=this.Jmt)}const i=this.fmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof lo.Tpt&&i[t+1].Rpt();i[t].Y0t(h)}this.Tmt&&this.Vmt(),this.dpt&&this.Ymt().tpt().children.push(this.dpt)}tpt(){return this.dpt}Ymt(){let t=this.u5();for(;t;){if(t.E1t())return t;t=t.u5()}return this.y7}Vmt(){const t=this.Tmt;t.vmt=this.cmt.every(t=>t.Vpt()),t.Cmt=this.Cht.every(t=>t.Vpt()),t.Gmt=this.fmt.every(t=>t.Vpt()),t.Imt=t.vmt&&t.Cmt&&t.Gmt}Hmt(){let t=this;for(;t.Vmt(),t=t.u5(););}jmt(){if(this.E1t()){let t=this.u5();for(this.nmt=!0;t;){if(!t.E1t()){this.nmt=!1;break}t=t.u5()}}}qmt(){const t=this.$c.EV();if(this.imt===t)this.emt=t;else{this.emt=lo.Jn(this.imt);let t=this.u5();for(;t;){for(const i of t.imt)this.kmt(i);t=t.u5()}const s=this.UO();this.imt=s.h1t(this.imt),this.emt=s.h1t(this.emt)}}zmt(){if(this.Zmt()){this.lmt=[];let t=this.u5();for(;t;)this.lmt.push(t),t=t.u5();this.lmt.reverse()}}Xmt(){this.rmt=!0,this.tmt&&this.tmt.Xmt()}Xft(){return this.rmt}G6(){return this.imt}YO(){return this.hmt||(this.hmt=!0,this.qmt()),this.emt}Kmt(t){return this.imt.includes(t)}qpt(){return this.lmt}K7(){return this.y7}UO(){return this.y7.UO()}E4(){return this.$c}u5(){return this.tmt}$mt(t){this.smt=t}p1t(){return this.smt||this.tmt}tgt(){return this.Smt}sgt(){return this.Tmt&&this.Tmt.xmt}igt(){return this.sgt()&&this.Tmt.bmt}egt(t){this.Tmt.bmt=!!t,this.Hmt()}E1t(){return this.mmt}hgt(){return this.nmt}Rpt(){return this.umt}rgt(){return this.omt}Z0t(){return this.ymt}Hdt(){return this.Mmt}O1t(){this.qdt(this.gmt)}qdt(t){if(t=!!t,!this.mmt)throw new Error("not a group");if(this.Mmt!==t){this.Mmt=t;for(const s of this.wmt)s.ngt();if(this.wmt.length){const i=this.$c.o4(),e=i.K7();e&&e.G9()}}}zV(){return this.n8}yft(){return this.amt}xpt(){return this.cmt.length&&this.cmt[0].xpt()}ogt(){return this.smt&&this.smt instanceof lo.ipt}Zmt(){return this.ogt()||this.cmt.some(t=>t.xpt())}bpt(){return this.cmt}Kft(){return this.cmt.length}u1t(t){if((t=Math.floor(t))<0||t>=this.cmt.length)throw new RangeError("invalid condition index");return this.cmt[t]}agt(t){return this.u1t(t)}ugt(t){let s=t.cO();if(0!==s){--s;const i=t.lgt()?t.cgt():t.TF();for(;0<=s;--s){const e=this.cmt[s];if(i===e.TF()||e.lgt()&&e.cgt()===i)return!1}}return!0}fgt(){return this.Cht}dgt(){return this.Cht.length}c1t(t){if((t=Math.floor(t))<0||t>=this.Cht.length)throw new RangeError("invalid action index");return this.Cht[t]}pgt(s){s=Math.floor(s);const t=this.Cht.find(t=>t.mgt()===s);if(t)return t;throw new RangeError("invalid action debug index")}ggt(t){return 0<=(t=Math.floor(t))&&t<this.Cht.length}ygt(){return this.fmt}m1t(){return this.fmt.filter(t=>t instanceof lo.Ipt)}Zpt(i){i.kft(this);let e=this.cmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.jft(t),r.Nz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.MG())h=!0;else if(!this.amt)return!1}return!this.amt||h}Xpt(t,s){t.kft(this),t.jft(s),this.cmt[s].MG()&&(this.dmt(t,0)&&this.Mgt(t),t.Uft(!0))}*Kpt(i){i.kft(this);let e=this.cmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.jft(t),r.Nz())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Vpt()?r.MG():yield*r.W1t())h=!0;else if(!this.amt)return!1}return!this.amt||h}*$pt(t,s){t.kft(this),t.jft(s);let i=this.cmt[s];if(i.Vpt()?i.MG():yield*i.W1t())(this.wgt()?this.dmt(t,0):yield*this.pmt(t,0))&&(this.Sgt()?this.Mgt():yield*this.Tgt()),t.Uft(!0)}MG(t){t.kft(this),this.umt||t.Qft(!1),this.amt?this.bgt(t):this.xgt(t)}*W1t(t){(this.igt()||this.$c.vgt())&&(yield this),t.kft(this),this.umt||t.Qft(!1),this.amt?yield*this.Cgt(t):yield*this.Ggt(t)}bgt(i){let e=this.cmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.xpt()){i.jft(t);const n=r.MG();h=h||n}}i.Uft(h),h&&(this.dmt(i,0)&&this.Mgt(i),this.omt)&&i.Qft(!0)}*Cgt(i){let e=this.cmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.xpt()){i.jft(s);let t;t=r.Vpt()?r.MG():yield*r.W1t(),h=h||t}}if(i.Uft(h),h)(this.wgt()?this.dmt(i,0):yield*this.pmt(i,0))&&(this.Sgt()?this.Mgt():yield*this.Tgt()),this.omt&&i.Qft(!0)}xgt(i){const e=this.cmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.jft(t),h.MG());if(!r)return void i.Uft(!1)}i.Uft(!0),this.dmt(i,0)&&this.Mgt(i),i.Wft()&&this.omt&&i.Qft(!0)}*Ggt(i){const e=this.cmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.jft(t);if(!(h.Vpt()?h.MG():yield*h.W1t()))return void i.Uft(!1)}i.Uft(!0);(this.wgt()?this.dmt(i,0):yield*this.pmt(i,0))&&(this.Sgt()?this.Mgt():yield*this.Tgt()),i.Wft()&&this.omt&&i.Qft(!0)}Qmt(i,e){const h=this.Cht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Bft(t),r.MG()}return!0}*Jmt(i,e){const h=this.Cht;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.Bft(t),r.Vpt()?r.MG():yield*r.W1t()}return!0}Umt(i,e){const h=this.UO(),r=this.Cht;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.Bft(t),n.MG());if(n.Igt()&&!0===o)return!1;n._gt()&&o instanceof Promise&&h.Tdt(o)}return!0}*Wmt(i,e){const h=this.UO(),r=this.Cht;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.Bft(s);let t;if(t=n.Vpt()?n.MG():yield*n.W1t(),n.Igt()&&!0===t)return!1;n._gt()&&t instanceof Promise&&h.Tdt(t)}return!0}Dgt(t){this.dmt(t,t.zft())&&this.Mgt()}*Ngt(t){(yield*this.pmt(t,t.zft()))&&(yield*this.Tgt())}Mgt(){if(this.fmt.length){const t=this.E1t()&&this.$c.Upt(),s=t?performance.now():0,i=this.qct,e=i._6(this);this.rmt?this.Egt(e):this.Agt(e),i.j6(),t&&(this.dpt.ppt+=performance.now()-s)}}Egt(e){const h=this.mmt,r=this.nmt,n=this.UO(),o=this.fmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.G6(),l=!r||!h&&t<i;l&&n.L6(u),a.MG(e),l?n.R6(u):n.rdt(u)}}Agt(i){const e=this.fmt;for(let t=0,s=e.length;t<s;++t)e[t].MG(i)}*Tgt(){if(this.fmt.length){const t=this.qct,s=t._6(this);this.rmt?yield*this.Lgt(s):yield*this.Ogt(s),t.j6()}}*Lgt(e){const h=this.mmt,r=this.nmt,n=this.UO(),o=this.fmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],u=a.G6(),l=!r||!h&&t<i;l&&n.L6(u),yield*a.W1t(e),l?n.R6(u):n.rdt(u)}}*Ogt(i){const e=this.fmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].W1t(i)}O6(i,e){e.Pft();const h=this.cmt;if(!this.yft())for(let t=i.Fft()+1,s=h.length;t<s;++t){const r=h[t],n=(e.jft(t),r.MG());if(!n)return!1}return this.dmt(e,0)&&this.Mgt(e),!0}*Rgt(i,e){e.Pft();const h=this.cmt;if(!this.yft())for(let t=i.Fft()+1,s=h.length;t<s;++t){const r=h[t];e.jft(t);if(!(r.Vpt()?r.MG():yield*r.W1t()))return!1}return(this.wgt()?this.dmt(e,0):yield*this.pmt(e,0))&&(this.Sgt()?this.Mgt():yield*this.Tgt()),!0}Vpt(){return!this.igt()&&!this.$c.vgt()&&this.Tmt.Imt}wgt(){return!this.$c.vgt()&&this.Tmt.Cmt}Sgt(){return!this.$c.vgt()&&this.Tmt.Gmt}Pgt(i){if(this.u5()){const e=this.qpt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Zpt(i))return!1}return!0}*kgt(i){if(this.u5()){const e=this.qpt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Kpt(i)))return!1}return!0}Fgt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.$s(0));t.f1t()._6(),this.smt.jgt(e)}else this.smt.zgt(s);else i&&t.f1t()._6()}Bgt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.$c,u=this.qct,l=a.UO(),c=this.smt,f=c._gt(),d=l.idt(),p=1<d;if(this.Fgt(l,s,p),n&&(i?l.L6(t):l.odt(t)),null!==e){if(e.Ugt){const g=i?e.Ugt.GP():e.Ugt.ndt().Jct(),y=e.Wgt.GP();y.cft(g.CP()),y.mft(),i||e.Wgt.Qgt()}else if(e.Jgt){const M=e.Jgt.GP();M.cft(e.Vgt),M.mft()}e.Ygt&&(o=l.adt(t))}const m=u._6(this);return i&&m.$ft(t),this.Pgt(m)&&(m.kft(this),f&&([r,h]=c.Hgt()),this.xgt(m),f)&&c.qgt(r),u.j6(),p&&l.f1t().j6(),null!==o&&l.R6(o),n&&l.R6(t),l.edt(),f||l.vdt(),h}*Zgt(t,s,i,e){let h,r,n=((this.igt()||this.$c.vgt())&&(yield this),0<t.length),o=null,a=this.$c,u=this.qct,l=a.UO(),c=this.smt,f=c._gt(),d=l.idt(),p=1<d;if(this.Fgt(l,s,p),n&&(i?l.L6(t):l.odt(t)),null!==e){if(e.Ugt){const g=i?e.Ugt.GP():e.Ugt.ndt().Jct(),y=e.Wgt.GP();y.cft(g.CP()),y.mft(),i||e.Wgt.Qgt()}else if(e.Jgt){const M=e.Jgt.GP();M.cft(e.Vgt),M.mft()}e.Ygt&&(o=l.adt(t))}const m=u._6(this);return i&&m.$ft(t),(yield*this.kgt(m))&&(m.kft(this),f&&([r,h]=c.Hgt()),yield*this.Ggt(m),f)&&c.qgt(r),u.j6(),p&&l.f1t().j6(),null!==o&&l.R6(o),n&&l.R6(t),l.edt(),f||l.vdt(),h}Xgt(t,s){const i=this.YO(),e=0<i.length,h=this.$c,r=this.qct,n=h.UO(),o=n.idt(),a=1<o,u=(a&&n.f1t()._6(),this.smt.jgt(t),e&&(s?n.L6(i):n.odt(i)),r._6(this));this.Pgt(u)&&(u.kft(this),this.xgt(u)),r.j6(),a&&n.f1t().j6(),e&&n.R6(i),n.edt(),n.vdt()}*Kgt(t,s){(this.igt()||this.$c.vgt())&&(yield this);const i=this.YO(),e=0<i.length,h=this.$c,r=this.qct,n=h.UO(),o=n.idt(),a=1<o,u=(a&&n.f1t()._6(),this.smt.jgt(t),e&&(s?n.L6(i):n.odt(i)),r._6(this));(yield*this.kgt(u))&&(u.kft(this),yield*this.Ggt(u)),r.j6(),a&&n.f1t().j6(),e&&n.R6(i),n.edt(),n.vdt()}ZO(t,s,i,e,...h){let r,n,o=0<t.length,a=this.$c,u=this.qct,l=a.UO(),c=this.smt,f=c._gt(),d=l.idt(),p=1<d,m=(p&&l.f1t()._6(),0<h.length&&this.smt.jgt(h),o&&(s?l.L6(t):l.odt(t)),u._6(this));return m.Hft(i,e),u.vft(m),a.E6(!1),this.Pgt(m)&&(m.kft(this),f&&([n,r]=c.Hgt()),this.xgt(m),f)&&c.qgt(n),a.E6(!0),u.j6(),u.Cft(),p&&l.f1t().j6(),o&&l.R6(t),l.edt(),f||l.vdt(),r||m.qft()}}}{let e=self.Rs,t=[],s=!1;e.Dpt=class extends e.$h{constructor(t,s,i){super();const e=t.E4(),h=t.UO(),r=(this.y7=t,this.wft=h,this.$c=t.E4(),this.tmt=s,e.$gt(i[1]));this.tyt=r,this.Smt=i[2],this.y7.zpt(this,this.Smt),this.Tmt=e.Gq()?{bmt:i[3][0],xmt:i[3][1]}:null}static Wb(t,s,i){return e.ir(e.Dpt,t,s,i)}Y0t(){const t=this.tyt,s=this.$c.UO().g1t(this);this.tyt=t.bind(null,this.$c.zR(),s)}u5(){return this.tmt}p1t(){return this.tmt}K7(){return this.y7}tgt(){return this.Smt}sgt(){return this.Tmt&&this.Tmt.xmt}igt(){return this.sgt()&&this.Tmt.bmt}egt(t){this.Tmt.bmt=!!t}Rpt(){return!1}G6(){return t}YO(){return this.tmt?this.tmt.YO():t}MG(t){t.kft(this),this.wft.Tdt(this.syt())}async syt(){try{await this.tyt()}catch(t){console.error(`Unhandled exception running script %c${this.K7().Jc()}, event ${this.tgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*W1t(t){t.kft(this),(this.igt()||this.$c.vgt())&&(yield this),this.MG(t)}Vpt(){return!this.igt()&&!this.$c.vgt()}static iyt(){return s}static eyt(){s=!0}}}{const fo=self.Rs;fo.ipt=class extends fo.$h{constructor(t,s,i){super(),this.y7=t,this.$c=t.E4(),this.tmt=s,this.hyt=0,this.ryt="",this.nyt=0,this.oyt=[],this.ayt=!0,this.uyt="",this.Bct=null,this.lyt=!1,this.cyt=[],this.fyt=!1,this.dyt=!1,this.pyt=0,this.myt=-1,this.gyt=new Map,this.yyt=fo.Tpt.Wb(t,s,i),this.yyt.$mt(this)}Myt(t){this.hyt=0,this.ryt=t[0],this.nyt=t[1],this.oyt=t[2].map(t=>fo.Ipt.Wb(this.y7,this,t)),this.ayt=t[3],this.dyt=t[4],this.fyt=t[5]}wyt(t){this.hyt=1,this.uyt=t[1],this.Bct=this.$c.aV(t[2]),this.yyt.Nmt(this.Bct),this.ryt=this.Bct.Jc()+"."+this.uyt,this.nyt=t[3],this.oyt=t[4].map(t=>fo.Ipt.Wb(this.y7,this,t)),this.ayt=t[5],this.dyt=t[6],this.fyt=t[7],this.Bct.Syt(this)}static Cpt(t,s,i){const e=fo.ir(fo.ipt,t,s,i),h=i[1];return e.Myt(h),e}static Gpt(t,s,i){const e=fo.ir(fo.ipt,t,s,i),h=i[1];return e.wyt(h),e}H0t(){if(this.Bct&&this.Bct.AV())for(const t of this.Bct.Pmt())if(t.Tyt(this.uyt)){this.lyt=!0;break}}Y0t(){for(const t of this.oyt)t.Y0t();this.yyt.Y0t(!1)}s1t(){return this.hyt}m1t(){return this.oyt}ept(){return this.oyt}JO(){return this.oyt.length}byt(t){this.cyt.push(t)}xyt(){return this.cyt}zgt(i){const e=this.oyt;for(let t=0,s=e.length;t<s;++t)e[t].Jet(i[t].$s(0))}jgt(i){const e=this.oyt;for(let t=0,s=e.length;t<s;++t)e[t].Jet(i[t])}vyt(){return this.oyt.map(t=>t.oet())}u5(){return this.tmt}p1t(){return this.tmt}i1t(){return this.ryt}Cyt(){return this.uyt}Gyt(){return this.lyt}KO(){return this.nyt}TF(){return this.Bct}Jl(){return this.ayt}QO(){switch(this.nyt){case 0:return null;case 2:return"";default:return 0}}VO(){return this.yyt}XO(){return this.fyt}_gt(){return this.dyt}Hgt(){const t=this.pyt++;this.myt=t;let s,i=new Promise(t=>s=t);return this.gyt.set(t,{resolve:s,Iyt:0}),[t,i]}qgt(t){const s=this.gyt.get(t);0===s.Iyt&&(s.resolve(),this.gyt.delete(t)),this.myt=-1}_yt(){const t=this.gyt.get(this.myt);return t.Iyt++,this.myt}Dyt(t){this.myt=t;const s=this.gyt.get(t);s.Iyt--}Nyt(t,s){const i=new Map,e=[];for(const h of this.Bct.GP().CP()){const r=h.TF();if(r.Tyt(this.uyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.yyt.Bgt(t,s,this.fyt,{Jgt:this.Bct,Vgt:e}),0<i.size)for(const[o,a]of i){const u=o.Eyt(this.uyt).VO(),l=[...new Set([...t,...u.G6()])];u.Bgt(l,s,this.fyt,{Jgt:o,Vgt:a})}}*Ayt(t,s){const i=new Map,e=[];for(const h of this.Bct.GP().CP()){const r=h.TF();if(r.Tyt(this.uyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.yyt.Zgt(t,s,this.fyt,{Jgt:this.Bct,Vgt:e})),0<i.size)for(const[o,a]of i){const u=o.Eyt(this.uyt).VO(),l=[...new Set([...t,...u.G6()])];yield*u.Zgt(l,s,this.fyt,{Jgt:o,Vgt:a})}}}}{const po=self.Rs,mo=[];po.Ipt=class extends po.$h{constructor(t,s,i){super();const e=t.UO();this.y7=t,this.wft=e,this.$c=t.E4(),this.tmt=s,this.A0t=e.f1t(),this.nr=i[1],this.lf=i[2],this.Lyt=i[3],this.f2=!!i[4],this.Oyt=!!i[5],this.Ryt=s instanceof po.ipt,this.n8=i[6],this.Pyt=this.$c.y1t(i[8]),this.kyt=t=>this.Jet(t),this.Fyt=()=>this.oet(),this.jyt=!this.tmt||this.f2||this.Oyt,this.Tht=this.Lyt,this.zyt=-1,this.Byt()&&(this.Tht=this.Tht?1:0),!this.Uyt()||this.Q2()||this.Zdt()||(this.zyt=e.r1t(this)),e.e1t(this)}static Wb(t,s,i){return po.ir(po.Ipt,t,s,i)}Y0t(){if(this.Uyt()&&!this.Q2()&&!this.Zdt()&&!this.Wyt()){const t=this.wft.spt(this);t&&t.byt(this)}}Jc(){return this.nr}y1t(){return this.Pyt}u5(){return this.tmt}p1t(){return this.u5()}MV(){return!this.u5()}Uyt(){return!this.MV()}Wyt(){return this.Ryt}Q2(){return this.f2}Zdt(){return this.Oyt}ue(){return 0===this.lf}Se(){return 1===this.lf}Byt(){return 2===this.lf}Rpt(){return!1}zV(){return this.n8}n1t(){return this.Lyt}G6(){return mo}MG(t){!this.Uyt()||this.Q2()||this.Zdt()||this.Jet(this.n1t())}Vpt(){return!0}*W1t(t){this.MG(t)}Jet(t){this.ue()?"number"!=typeof t&&(t=parseFloat(t)):this.Se()?"string"!=typeof t&&(t=t.toString()):this.Byt()&&(t=t?1:0),this.jyt?this.Tht=t:this.A0t.h0t()[this.zyt]=t}oet(){return this.jyt?this.Tht:this.A0t.h0t()[this.zyt]}Qyt(){let t=this.oet();return this.Byt()?!!t:t}_1t(){this.Tht=this.Lyt}M1t(){return{configurable:!1,enumerable:!0,get:this.Fyt,set:this.kyt}}}}{const go=self.Rs,yo=[];go._pt=class extends go.$h{constructor(t,s,i){super();const e=t.UO();this.y7=t,this.wft=e,this.$c=t.E4(),this.tmt=s,this.Jyt=null,this.Vyt=i[1],this.s0=!0}static Wb(t,s,i){return go.ir(go._pt,t,s,i)}Y0t(){this.Jyt=this.wft.C9(this.Vyt),this.y7.Ppt(this);let t=this.u5();for(;t;)t instanceof go.Tpt&&t.E1t()&&t.Lmt(this),t=t.u5();this.ngt(),this.$c.Gq()&&this.y7.tpt().children.push(this.Jyt.tpt())}u5(){return this.tmt}G6(){return yo}Fpt(){return this.Jyt}MG(t){const s=!!this.u5(),i=this.$c.EV();s&&this.wft.odt(i),this.Jyt.MG(),s&&this.wft.R6(i)}*W1t(t){const s=!!this.u5(),i=this.$c.EV();s&&this.wft.odt(i),yield*this.Jyt.W1t(),s&&this.wft.R6(i)}Vpt(){return!1}jpt(){return this.s0}ngt(){let t=this.u5();for(;t;){if(t instanceof go.Tpt&&t.E1t()&&!t.Hdt())return void(this.s0=!1);t=t.u5()}this.s0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const Mo=self.Rs;Mo.Yyt=class extends Mo.$h{constructor(t){super(),this.CT=t,this.$c=t.E4()}Y0t(){}static Hyt(t,s){const i=s[0],e=[xo,To,bo,vo,wo,So];return Mo.ir(e[i],t,s)}};class wo extends Mo.Yyt{constructor(t,s){super(t),this.qyt=this.$c.Zyt(),this.tyt=this.$c.$gt(s[1]),this.tyt!==Mo.Y9.V9.Fht.random&&this.tyt!==Mo.Y9.V9.Fht.Xyt||this.CT.Kyt()}$yt(){return this.qyt.tMt(this.tyt,this.qyt)}}class So extends Mo.Yyt{constructor(t,s){super(t),this.sMt=null,this.ryt=s[1],this.CT.Kyt()}Y0t(){const t=this.$c.UO(),s=(this.sMt=t.WO(this.ryt),this.ryt=null,this.CT.VO()),i=this.sMt.VO();this.iMt=[...new Set([...s.YO(),...i.YO()])],this.iMt=t.h1t(this.iMt)}$yt(){const t=this.sMt;if(t.Jl()){const s=t.VO();return Mo.Tpt.prototype.ZO.bind(s,this.iMt,t.XO(),t.KO(),t.QO())}{const i=t.QO();return()=>i}}}class To extends Mo.Yyt{constructor(t,s){super(t),this.Bct=this.$c.aV(s[1]),this.tyt=this.$c.$gt(s[2]),this.eMt=!!s[3],this.qct=this.$c.UO().s3(),this.CT.hMt(this.Bct)}$yt(){return this.Bct.pP().tMt(this.tyt,this.Bct.cP().rz())}rMt(...t){const s=this.Bct,i=s.GP().hft(),e=i.length;if(0===e)return this.eMt?"":0;const h=a(this.CT.nMt(),e);return this.qct.I6().Vft(s),this.tyt.apply(i[h].rz(),t)}oMt(t,...s){const i=this.Bct,e=i.CP(),h=e.length;if(0===h)return this.eMt?"":0;const r=a(t,h);return this.qct.I6().Vft(i),this.tyt.apply(e[r].rz(),s)}}class bo extends Mo.Yyt{constructor(t,s){super(t),this.Bct=this.$c.aV(s[1]),this.aMt=s[3],this.eMt=!!s[2],this.CT.hMt(this.Bct)}uMt(){const t=this.Bct.GP().hft(),s=t.length;if(0===s)return this.eMt?"":0;const i=a(this.CT.nMt(),s);return t[i].lMt(this.aMt)}cMt(){const t=this.Bct,s=t.GP().hft(),i=s.length;if(0===i)return this.eMt?"":0;const e=a(this.CT.nMt(),i),h=s[e],r=h.TF().fMt(t.dMt());return h.lMt(this.aMt+r)}pMt(t){const s=this.Bct,i=s.CP(),e=i.length;if(0===e)return this.eMt?"":0;let h=a(t,e),r=i[h],n=0;return s.AV()&&(n=r.TF().fMt(s.dMt())),r.lMt(this.aMt+n)}}class xo extends Mo.Yyt{constructor(t,s){super(t),this.Bct=this.$c.aV(s[1]),this.mMt=this.Bct.mht(s[2]),this.gMt=this.Bct.Jst(s[2]),this.tyt=this.$c.$gt(s[3]),this.eMt=!!s[4],this.qct=this.$c.UO().s3(),this.CT.hMt(this.Bct)}yMt(...t){const s=this.Bct,i=s.GP().hft(),e=i.length;if(0===e)return this.eMt?"":0;let h=a(this.CT.nMt(),e),r=(this.qct.I6().Vft(s),i[h]),n=0;return s.AV()&&(n=r.TF().MMt(s.dMt())),this.tyt.apply(r.pht()[this.gMt+n].rz(),t)}wMt(t,...s){const i=this.Bct,e=i.CP(),h=e.length;if(0===h)return this.eMt?"":0;let r=a(t,h),n=(this.qct.I6().Vft(i),e[r]),o=0;return i.AV()&&(o=n.TF().MMt(i.dMt())),this.tyt.apply(n.pht()[this.gMt+o].rz(),s)}}class vo extends Mo.Yyt{constructor(t,s){super(t),this.SMt=null,this.TMt=s[1]}Y0t(){this.SMt=this.$c.UO().w1t(this.TMt)}bMt(){return this.SMt}}}{let r=function(t){const s=self.xMt[t];if(s)return s;throw new Error("invalid expression number")};r;const Co=self.Rs;Co.vMt=class extends Co.$h{constructor(t,s,i){super(),this.CT=t,this.Ug=i,this.lf=s,this.$s=null,this.CMt=!1,this.Oyt=!1}static Wb(t,s,i){const e=s[0],h=[Go,Io,Oo,Do,Eo,_o,Ao,Go,Do,Do,Ro,Po,Oo,Fo,Io,Lo,No,ko,jo,zo,Bo,Uo];return Co.ir(h[e],t,e,i,s)}Y0t(){}Kyt(){this.CMt=!0}hMt(t){this.CMt||!t||t.pP().UR()||(this.CMt=!0)}GMt(){return this.CMt}cO(){return this.Ug}E4(){return this.CT.E4()}VO(){return this.CT.VO()}Zdt(){return this.Oyt}IMt(){return 4===this.lf}};class Go extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this._Mt=0;const h=e[1];this.DMt=h[0],this.NMt=[],this.EMt=null;for(let t=1,s=h.length;t<s;++t)this.NMt.push(Co.Yyt.Hyt(this,h[t]));this.NMt.length?this.$s=this.AMt:(this.$s=r(this.DMt),this.Oyt=!0)}LMt(t){if(t<0||t>=this.NMt.length)throw new RangeError("invalid numbered node");return this.NMt[t]}Y0t(){for(const s of this.NMt)s.Y0t();const t=r(this.DMt);this.NMt.length?this.EMt=t(this):this.EMt=t}nMt(){return this._Mt}AMt(t){return this._Mt=t,this.EMt()}}class Io extends Go{constructor(t,s,i,e){super(t,s,i,e),this.$s=this.OMt,14===s&&(this.VO().Fmt(),this.CT instanceof Co.Emt)&&this.VO().Xmt()}OMt(t){this._Mt=t;const s=this.EMt();return"string"==typeof s?s:""}RMt(){return r(this.DMt)()}}class _o extends Go{constructor(t,s,i,e){super(t,s,i,e),2<=t.PMt()?this.$s=this.$P:this.$s=this.l4,this.Oyt=!1}l4(t){this._Mt=t;const s=this.EMt(),i=this.E4().o4();return i.l4(s)}$P(t){const s=this.l4(t);return s?s.$P():null}}class Do extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.kMt=e[1],this.$s=this.FMt,this.Oyt=!0}FMt(){return this.kMt}}class No extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.jMt=e[1],this.$s=this.zMt,this.Oyt=!0}zMt(){return this.jMt}}class Eo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.Bct=this.E4().aV(e[1]),2<=t.PMt()?this.$s=this.aP:this.$s=this.TF;const h=this.VO();h.Nmt(this.Bct),this.CT instanceof Co.Emt?h.Xmt():h.u5()&&h.u5().Xmt(),this.Oyt=!0}TF(){return this.Bct}aP(){return this.Bct?this.Bct.aP():null}}class Ao extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.i8=this.E4().W3().zq(e[1]),2<=t.PMt()?this.$s=this.B3:this.$s=this.Q3,this.Oyt=!0}Q3(){return this.i8}B3(){return this.i8?this.i8.B3():null}}class Lo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.WX=this.E4().V$().ZZ(e[1]),2<=t.PMt()?this.$s=this.ast:this.$s=this.Nst,this.Oyt=!0}Nst(){return this.WX}ast(){return this.WX?this.WX.ast():null}}class Oo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.BMt=e[1],this.$s=this.UMt,this.Oyt=!0}UMt(){return this.BMt}}class Ro extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.WMt=e[1];const h=this.CT.TF();this.CT instanceof Co.Dmt&&this.CT.Q2()||!h||!h.AV()?(this.$s=this.QMt,this.Oyt=!0):(this.$s=this.JMt,this.Kyt())}QMt(){return this.WMt}JMt(t){t=t||0;let s=this.CT.TF(),i=s.GP(),e=i.CP(),h=null;if(e.length)h=e[t%e.length].TF();else if(i.ift()){const r=i.eft();h=r[t%r.length].TF()}else{if(!(0<s._P()))return 0;{const n=s.CP();h=n[t%n.length].TF()}}return this.WMt+h.fMt(s.dMt())}}class Po extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.TMt=e[1],this.SMt=null,2<=t.PMt()?this.$s=this.VMt:this.$s=this.YMt,this.Oyt=!0}Y0t(){this.SMt=this.E4().UO().w1t(this.TMt)}YMt(){return this.SMt}VMt(){return null}}class ko extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.HMt=e[1],this.sMt=null,2<=t.PMt()?this.$s=this.qMt:this.$s=this.ZMt,this.Oyt=!0}Y0t(){this.sMt=this.E4().UO().WO(this.HMt),this.HMt=null}ZMt(){return this.sMt}qMt(){return null}}class Fo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.XMt=[],this.KMt=[],this.Oyt=!0;for(let t=1,s=e.length;t<s;++t){const h=Co.vMt.Wb(this.CT,e[t],0);this.XMt.push(h),this.KMt.push(0),h.Zdt()||(this.Oyt=!1)}this.$s=this.$Mt}Y0t(){for(const t of this.XMt)t.Y0t()}$Mt(){const i=this.XMt,e=this.KMt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].$s(0);return e}}class jo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.twt=e[1],this.$s=this.Qet,this.Oyt=!0}Qet(){return this.twt}}class zo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.swt=e[1],this.$s=this.iwt,this.Oyt=!0}iwt(){return this.swt}}class Bo extends Go{constructor(t,s,i,e){super(t,s,i,e),this.$s=this.kF,this.Oyt=!1}kF(){return this.EMt()}}class Uo extends Co.vMt{constructor(t,s,i,e){super(t,s,i),this.Gut=this.E4().Qut().Sut(e[1]),this.$s=this.ewt,this.Oyt=!0}ewt(){return this.Gut.Jc()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].$s(0)};e;const Wo=self.Rs,Qo=[],Jo=function(){};Wo.Dmt=class extends Wo.$h{constructor(t,i,s){if(super(),this.yyt=t,this.$c=t.E4(),this.Ug=s,this.tyt=this.$c.$gt(i[1]),this.hwt=0<i[3],this.rwt=2===i[3],this.nwt=!!i[4],this.owt=!!i[5],this.f2=!!i[6],this.n8=i[7],this.awt=this.yyt.yft(),this.Bct=null,this.mMt=null,this.gMt=-1,this.qyt=null,this.MG=Jo,this.W1t=Jo,this.Hs=[],this.uwt=[],this.lwt=!1,this.cwt=null,this.fwt=null,this.Tmt=this.$c.Gq()?{bmt:i[8][0],dwt:i[8][1]}:null,-1===i[0]?this.qyt=this.$c.Zyt():(this.Bct=this.$c.aV(i[0]),i[2]&&(this.mMt=this.Bct.mht(i[2]),this.gMt=this.Bct.Jst(i[2])),this.yyt.u5()&&this.yyt.u5().Xmt()),10===i.length){let s=i[9];for(let t of s)this.Hs.push(Wo.vMt.Wb(this,t,this.Hs.length)),this.uwt.push(0)}0===this.Hs.length&&(this.Hs=Qo,this.uwt=Qo),this.yyt.UO().K0t(this)}static Wb(t,s,i){return Wo.ir(Wo.Dmt,t,s,i)}Y0t(){for(const t of this.Hs)t.Y0t(),t.GMt()&&(this.lwt=!0);this.rwt?(this.MG=this.pwt,this.W1t=this.mwt):this.qyt?(this.gwt(),this.W1t=this.ywt):this.Bct.pP().UR()?(this.Mwt(),this.W1t=this.wwt):this.f2?(this.MG=this.Swt,this.W1t=this.Twt):(this.MG=this.bwt,this.W1t=this.xwt)}gwt(){const t=this.qyt,s=this.qyt;this.vwt(t,s,this.Cwt)}Mwt(){const t=this.Bct.pP(),s=this.Bct.cP().rz();this.vwt(t,s,this.Gwt)}vwt(t,s,i){const e=this.tyt,h=this.owt,r=this.Hs;if(0===r.length){const n=t.tMt(e,s);h?this.MG=function(){return Wo.xor(n(),h)}:this.MG=n}else if(1===r.length){const o=r[0];if(!h&&o.Zdt())this.MG=t.Iwt(e,s,o.$s(0));else{const a=t.tMt(e,s);this.MG=function(){return Wo.xor(a(o.$s(0)),h)}}}else if(2===r.length){const u=r[0],l=r[1];if(!h&&u.Zdt()&&l.Zdt())this.MG=t._wt(e,s,u.$s(0),l.$s(0));else{const c=t.tMt(e,s);this.MG=function(){return Wo.xor(c(u.$s(0),l.$s(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Zdt()&&d.Zdt()&&p.Zdt())this.MG=t.Dwt(e,s,f.$s(0),d.$s(0),p.$s(0));else{const m=t.tMt(e,s);this.MG=function(){return Wo.xor(m(f.$s(0),d.$s(0),p.$s(0)),h)}}}else this.MG=i}zV(){return this.n8}Npt(){return this.tyt}TF(){return this.Bct}gz(){return this.mMt}Nwt(){return this.mMt?this.mMt.fz():this.Bct?this.Bct.pP():null}PMt(){const t=this.Nwt();return t?t.Ewt():1}VO(){return this.yyt}E4(){return this.$c}cO(){return this.Ug}mgt(){return this.cO()}xpt(){return this.hwt}Ept(){return this.rwt}Awt(){return this.owt}Nz(){return this.nwt}Q2(){return this.f2}Lwt(){return this.Tmt.bmt}Owt(){return!!this.qyt}lgt(){return this.Owt()||this.Bct.pP().UR()}cgt(){for(const t of this.Hs)if(t.IMt())return t.TF();return null}Rwt(t){this.Tmt.bmt=!!t,this.yyt.Hmt()}Pwt(){return this.Tmt.dwt}Vpt(){return!this.Lwt()&&!this.$c.vgt()&&!this.Pwt()}kwt(){return this.cwt||(this.cwt=new Map),this.cwt}Fwt(){return this.fwt||(this.fwt=new Map),this.fwt}Cwt(){const t=this.uwt;return e(this.Hs,t),Wo.xor(this.tyt.apply(this.qyt,t),this.owt)}*ywt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const s=this.uwt;e(this.Hs,s);let t=this.tyt.apply(this.qyt,s);return Wo.Ro(t)&&(t=yield*t),Wo.xor(t,this.owt)}return this.MG()}Gwt(){const t=this.uwt,s=(e(this.Hs,t),this.Bct.cP().rz());return Wo.xor(this.tyt.apply(s,t),this.owt)}*wwt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){let t=this.uwt,s=(e(this.Hs,t),this.Bct.cP().rz()),i=this.tyt.apply(s,t);return Wo.Ro(i)&&(i=yield*i),Wo.xor(i,this.owt)}return this.MG()}pwt(){return!0}*mwt(){return(this.Lwt()||this.$c.vgt())&&(yield this),!0}jwt(){if(this.mMt){if(2<=this.mMt.fz().Ewt())throw new Error("not yet implemented");return this.mMt}return 2<=this.Bct.pP().Ewt()?this.Bct.aP():this.Bct}Swt(){const t=this.uwt,s=(e(this.Hs,t),this.tyt.apply(this.jwt(),t));return this.Bct.Qgt(),s}*Twt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const s=this.uwt;e(this.Hs,s);let t=this.tyt.apply(this.jwt(),s);return Wo.Ro(t)&&(t=yield*t),this.Bct.Qgt(),t}return this.MG()}bwt(){const i=this.Hs,e=this.uwt,t=this.Bct.GP();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.GMt()||(e[t]=h.$s(0))}return t.$ct()?this.zwt(t):this.Bwt(t)}*xwt(){return(this.Lwt()||this.$c.vgt())&&(yield this),this.bwt()}Uwt(i){const e=this.Hs,h=this.uwt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.GMt()&&(h[t]=r.$s(i))}}zwt(i){const t=this.Bct,e=t.AV(),h=t.dMt(),r=this.gMt,n=0<=r,o=t.CP(),a=this.lwt,u=this.uwt,l=this.tyt,c=this.owt,f=this.awt&&!this.hwt;i.Kct();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Uwt(s);let t;if(n){const p=e?d.TF().MMt(h):0;t=l.apply(d.pht()[r+p].rz(),u)}else t=l.apply(d.rz(),u);Wo.xor(t,c)?i.rft(d):f&&i.nft(d)}return t.Wwt(!0),i.oft(!1),t.Qgt(),i.tft()}Bwt(t){let s=this.Bct,i=s.AV(),e=s.dMt(),h=s.LF(),r=this.gMt,n=0<=r,o=this.lwt,a=this.uwt,u=this.tyt,l=this.owt,c=this.awt&&!this.hwt,f=t.aft(),d=t.uft(),p=c&&!this.yyt.ugt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.Uwt(s);let t;if(n){const S=i?w.TF().MMt(e):0;t=u.apply(w.pht()[r+S].rz(),a)}else t=u.apply(w.rz(),a);Wo.xor(t,l)?(y=!0,p?(f.push(w),h&&w.Qwt()):(m[g]=w,h&&w.Jwt(g),++g)):p?(m[g]=w,h&&w.Vwt(g),++g):c&&(d.push(w),h)&&w.Ywt()}Wo.An(m,g),h&&s.Hwt(p,g);const M=y;return p&&!y&&(y=this.qwt(f)),s.Wwt(M||c),c?y:t.tft()}qwt(i){const t=this.Bct,e=t.AV(),h=t.dMt(),r=this.lwt,n=this.gMt,o=0<=n,a=this.uwt,u=this.tyt,l=this.owt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Uwt(s);let t;if(o){const f=e?c.TF().MMt(h):0;t=u.apply(c.pht()[n+f].rz(),a)}else t=u.apply(c.rz(),a);if(Wo.xor(t,l))return!0}return!1}Zwt(t,s){return this.Hs[t].$s(s)}Apt(){const t=this.Hs;if(t.length)return t[0].RMt();throw new Error("no parameters")}e7(){if(!this.cwt||!this.cwt.size)return null;const s={};for(const[i,e]of this.cwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].RF(),t[1].RF(),t[2]])),s[i]=t}return{ex:s}}h7(t){if(this.cwt&&(this.cwt.clear(),this.cwt=null),t){const s=this.$c,i=t.ex;if(i){const e=this.kwt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=Wo.ir(Wo.Vl,r.map(t=>[s.h4(t[0]),s.h4(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].$s(0)};h;const Vo=self.Rs,Yo=[],Ho=function(){},qo=function*(){};Vo.Emt=class extends Vo.$h{constructor(t,s,i){super();const e=(this.yyt=t).E4(),h=(this.$c=e,this.Ug=i,this.n8=4<=s.length?s[3]:-1,this.Xwt=5<=s.length?255&s[4]:0,this.Kwt=5<=s.length?s[4]>>8:0,this.tyt=null,this.Bct=null,this.mMt=null,this.gMt=-1,this.qyt=null,this.$wt="",this.tSt=null,this.sSt=null,this.MG=Ho,this.W1t=Ho,this.Hs=[],this.uwt=[],this.lwt=!1,this.cwt=null,this.fwt=null,-3===s[0]),r=h?s[2]:s[5];if(this.Tmt=e.Gq()||h?{bmt:r[0],dwt:r[1],index:r[2]}:null,-1===s[0])this.qyt=e.Zyt(),this.tyt=e.$gt(s[1]);else if(-2===s[0])this.$wt=s[1];else if(h){const n=e.$gt(s[1]);this.tyt=n,this.MG=this.iSt,this.W1t=this.eSt,this.Kwt|=8}else this.Bct=e.aV(s[0]),4&this.Kwt?(this.$wt=s[1],this.tSt=e.aV(s[2])):(s[2]&&(this.mMt=this.Bct.mht(s[2]),this.gMt=this.Bct.Jst(s[2])),this.tyt=e.$gt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Hs.push(Vo.vMt.Wb(this,a,this.Hs.length)),this.uwt.push(0)}0===this.Hs.length&&(this.Hs=Yo,this.uwt=Yo),this.hSt()&&(this.yyt.Fmt(),this.yyt.Xmt()),this.yyt.UO().$0t(this)}static Wb(t,s,i){return Vo.ir(Vo.Emt,t,s,i)}Y0t(){for(const t of this.Hs)t.Y0t(),t.GMt()&&(this.lwt=!0);if(this.qyt)this.gwt(),this.W1t=this.ywt;else if(this.$wt)4&this.Kwt?this.rSt():this.nSt(),this.$wt="",this.tSt=null;else if(this.MG===this.iSt){const s=this.tyt,i=this.$c.UO().g1t(this.yyt);this.tyt=s.bind(null,this.$c.zR(),i)}else this.mMt?this._gt()?(this.MG=this.oSt,this.W1t=this.aSt):(this.MG=this.uSt,this.W1t=this.lSt):this.Bct.pP().UR()?(this.Mwt(),this.W1t=this.wwt):this.Q2()?(this.MG=this.cSt,this.W1t=this.fSt):this._gt()?(this.MG=this.dSt,this.W1t=this.pSt):this.mSt()?(this.MG=this.gSt,this.W1t=this.ySt):this.Hs.length?this.Hs.every(t=>t.GMt())?(this.MG=this.MSt,this.W1t=this.wSt):this.lwt?(this.MG=this.SSt,this.W1t=this.TSt):this.Hs.every(t=>t.Zdt())?(h(this.Hs,this.uwt),this.MG=this.bSt,this.W1t=this.xSt):(this.MG=this.vSt,this.W1t=this.CSt):(this.MG=this.bSt,this.W1t=this.xSt)}gwt(){const t=this.qyt,s=this.qyt;this.vwt(t,s,this.Cwt)}Mwt(){const t=this.Bct.pP(),s=this.Bct.cP().rz();this.vwt(t,s,this.Gwt)}nSt(){const t=this.yyt.UO(),i=t.WO(this.$wt);if(i.Jl()){const e=0!=(2&this.Kwt);this.sSt=i.VO();let s=[...new Set([...this.yyt.YO(),...this.sSt.YO()])];s=t.h1t(s);const h=!i.XO()&&this.GSt()?{Ygt:!0}:null;if(this.MG=Vo.Tpt.prototype.Bgt.bind(this.sSt,s,this.Hs,e,h),this.$c.Gq()){const r=this;this.W1t=function*(){(r.Lwt()||r.$c.vgt())&&(yield r);const t=yield*r.sSt.Zgt(s,r.Hs,e,h);return t}}else this.W1t=qo}else this.MG=Ho,this.W1t=qo}rSt(){const r=this.yyt.UO(),n=r.x1t(this.tSt,this.$wt);if(n.Jl()){const o=0!=(2&this.Kwt);this.sSt=n.VO();let s=[...new Set([...this.yyt.YO(),...this.sSt.YO(),this.Bct,n.TF()])],t=(s=r.h1t(s),!this.Bct.AV()&&!n.TF().AV()),i=!this.Bct.AV()&&n.TF().AV(),e=this.Bct.AV(),h=null;if(!n.XO()&&this.GSt()&&((h=h||{}).Ygt=!0),!i&&o||((h=h||{}).Ugt=this.Bct,h.Wgt=n.TF()),t||i||e&&!n.Gyt()?this.MG=Vo.Tpt.prototype.Bgt.bind(this.sSt,s,this.Hs,o,h):e&&(this.MG=Vo.ipt.prototype.Nyt.bind(n,s,this.Hs)),this.$c.Gq()){const a=this;t||i||e&&!n.Gyt()?this.W1t=function*(){(a.Lwt()||a.$c.vgt())&&(yield a);const t=yield*a.sSt.Zgt(s,a.Hs,o,h);return t}:e&&(this.W1t=function*(){(a.Lwt()||a.$c.vgt())&&(yield a);const t=yield*n.Ayt(s,a.Hs);return t})}else this.W1t=qo}else this.MG=Ho,this.W1t=qo}vwt(t,s,i){const e=this.tyt,h=this.Hs;if(0===h.length)this.MG=t.tMt(e,s);else if(1===h.length){const r=h[0];if(r.Zdt())this.MG=t.Iwt(e,s,r.$s(0));else{const n=t.tMt(e,s);this.MG=function(){return n(r.$s(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Zdt()&&a.Zdt())this.MG=t._wt(e,s,o.$s(0),a.$s(0));else{const u=t.tMt(e,s);this.MG=function(){return u(o.$s(0),a.$s(0))}}}else if(3===h.length){const l=h[0],c=h[1],f=h[2];if(l.Zdt()&&c.Zdt()&&f.Zdt())this.MG=t.Dwt(e,s,l.$s(0),c.$s(0),f.$s(0));else{const d=t.tMt(e,s);this.MG=function(){return d(l.$s(0),c.$s(0),f.$s(0))}}}else this.MG=i}zV(){return this.n8}_gt(){return 0!=(8&this.Kwt)}Igt(){return 0!=(16&this.Kwt)}mSt(){return 1===this.Xwt}Q2(){return 2===this.Xwt}hSt(){return 0!=(1&this.Kwt)}Bmt(){return this._gt()||this.Igt()}TF(){return this.Bct}Nwt(){return this.mMt?this.mMt.fz():this.Bct?this.Bct.pP():null}PMt(){const t=this.Nwt();return t?t.Ewt():1}VO(){return this.yyt}GSt(){let t=this.yyt;do{if(t instanceof Vo.ipt&&t.XO())return!0}while(t=t.p1t());return!1}E4(){return this.$c}cO(){return this.Ug}mgt(){return this.Tmt.index}Lwt(){return this.Tmt.bmt}Rwt(t){this.Tmt.bmt=!!t,this.yyt.Hmt()}Pwt(){return this.Tmt.dwt}Vpt(){return!this.Lwt()&&!this.$c.vgt()&&!this.Pwt()}kwt(){return this.cwt||(this.cwt=new Map),this.cwt}Fwt(){return this.fwt||(this.fwt=new Map),this.fwt}Cwt(){const t=this.uwt;return h(this.Hs,t),this.tyt.apply(this.qyt,t)}*ywt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const t=this.uwt,s=(h(this.Hs,t),yield*this.tyt.apply(this.qyt,t));return s}return this.MG()}Gwt(){const t=this.uwt;return h(this.Hs,t),this.tyt.apply(this.Bct.cP().rz(),t)}*wwt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const t=this.uwt,s=(h(this.Hs,t),yield*this.tyt.apply(this.Bct.cP().rz(),t));return s}return this.MG()}bSt(){const i=this.uwt,e=this.Bct.GP().CP();for(let t=0,s=e.length;t<s;++t)this.tyt.apply(e[t].rz(),i)}*xSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const i=this.uwt,e=this.Bct.GP().CP();for(let t=0,s=e.length;t<s;++t)yield*this.tyt.apply(e[t].rz(),i)}else this.bSt()}vSt(){const i=this.uwt,e=(h(this.Hs,i),this.Bct.GP().CP());for(let t=0,s=e.length;t<s;++t)this.tyt.apply(e[t].rz(),i)}*CSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const i=this.uwt,e=(h(this.Hs,i),this.Bct.GP().CP());for(let t=0,s=e.length;t<s;++t)yield*this.tyt.apply(e[t].rz(),i)}else this.vSt()}MSt(){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);s.apply(n.rz(),h)}}*wSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);yield*s.apply(n.rz(),h)}}else this.MSt()}SSt(){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.GMt()||(h[t]=i.$s(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.GMt()&&(h[t]=o.$s(i))}s.apply(n.rz(),h)}}*TSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.GMt()||(h[t]=i.$s(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.GMt()&&(h[t]=o.$s(i))}yield*s.apply(n.rz(),h)}}else this.SSt()}gSt(){const e=this.Hs,h=this.uwt,s=this.tyt,t=this.Bct,i=t.ISt(),r=t.GP().CP();i._St(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);s.apply(n.rz(),h)}i.DSt(s)}*ySt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const e=this.Hs,h=this.uwt,s=this.tyt,t=this.Bct,i=t.ISt(),r=t.GP().CP();i._St(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);yield*s.apply(n.rz(),h)}i.DSt(s)}else this.gSt()}cSt(){const t=this.uwt;return h(this.Hs,t),this.tyt.apply(this.mMt||this.Bct,t)}*fSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const s=this.uwt;h(this.Hs,s);let t=this.tyt.apply(this.mMt||this.Bct,s);return Vo.Ro(t)?yield*t:t}return this.cSt()}uSt(){const t=this.Bct,s=t.AV(),e=t.dMt(),h=this.Hs,r=this.lwt,n=this.uwt,o=this.tyt,a=this.gMt,u=t.GP().CP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.GMt()||(n[t]=i.$s(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.GMt()&&(n[t]=f.$s(i))}const c=s?l.TF().MMt(e):0;o.apply(l.pht()[a+c].rz(),n)}}*lSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const t=this.Bct,s=t.AV(),e=t.dMt(),h=this.Hs,r=this.lwt,n=this.uwt,o=this.tyt,a=this.gMt,u=t.GP().CP();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.GMt()||(n[t]=i.$s(0))}for(let i=0,t=u.length;i<t;++i){const l=u[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.GMt()&&(n[t]=f.$s(i))}const c=s?l.TF().MMt(e):0;yield*o.apply(l.pht()[a+c].rz(),n)}}else this.uSt()}dSt(){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);n.push(s.apply(o.rz(),h))}return Promise.all(n)}*pSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const e=this.Hs,h=this.uwt,s=this.tyt,r=this.Bct.GP().CP(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].$s(i);n.push(yield*s.apply(o.rz(),h))}return Promise.all(n)}return this.dSt()}oSt(){const t=this.Bct,s=t.AV(),e=t.dMt(),h=this.Hs,r=this.uwt,n=this.tyt,o=this.gMt,a=t.GP().CP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].$s(i);const c=s?l.TF().MMt(e):0;u.push(n.apply(l.pht()[o+c].rz(),r))}return Promise.all(u)}*aSt(){if((this.Lwt()||this.$c.vgt())&&(yield this),this.Pwt()){const t=this.Bct,s=t.AV(),e=t.dMt(),h=this.Hs,r=this.uwt,n=this.tyt,o=this.gMt,a=t.GP().CP(),u=[];for(let i=0,t=a.length;i<t;++i){const l=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].$s(i);const c=s?l.TF().MMt(e):0;u.push(yield*n.apply(l.pht()[o+c].rz(),r))}return Promise.all(u)}return this.oSt()}async iSt(){try{await this.tyt()}catch(t){console.error(`Unhandled exception running script %c${this.yyt.K7().Jc()}, event ${this.yyt.tgt()}, action ${this.mgt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),Vo.Dpt.iyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Vo.Dpt.eyt())}}*eSt(){return(this.Lwt()||this.$c.vgt())&&(yield this),this.iSt()}e7(){return this.cwt&&this.cwt.size?{ex:Vo.Ao(this.cwt)}:null}h7(t){if(this.cwt&&(this.cwt.clear(),this.cwt=null),t){const s=t.ex;s&&(this.cwt=Vo.Lo(s))}}}}{let d=function(t){return t instanceof n?M.nk(t):t.OB()},l=function(t){return d(t).u4()},h=function(t){return M.nk(t)},_=function(t,s,i,e){const h=s.RF(),r=i.RF();h<r?t.Set(s,i,e):t.Set(i,s,e)},D=function(t,s,i){const e=s.RF(),h=i.RF();e<h?t.Zl(s,i):t.Zl(i,s)},N=function(t,s){t.Xl(s)},E=function(t,s,i){const e=s.RF(),h=i.RF();return e<h?t.$s(s,i):t.$s(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.u4(),n=M.MO(),o=M.a1t(),a=o.VO().yft(),u=o.TF(),l=o.Awt(),c=s.GP(),f=u!==s;G=s,C=f&&!l;let d,p=0,m=0,g=I=!1;c.$ct()?(w.G(r.Wj()),w.offset(i,e),n.NSt(r.l4(),s,w,S),d=S):!a||M.ESt()&&!c.uft().length&&c.aft().length?d=c.aft():(d=c.uft(),I=!0),h&&(p=r.hT(),m=r.oT(),r.jj(i,e),r.Rj());for(const y of d)if(n.sR(t,y)){if(g=!0,l)break;f&&O.add(y)}return h&&(r.Pj(p,m),r.Rj()),A.Ln(S),g},i=function(t){const s=M.HO().yft(),i=G.GP(),e=i.aft(),h=i.uft();i.$ct()?(i.fft(O),s&&(A.Ln(h),i.dft(O,G.CP()))):s?I?i.pft(O):(i.dft(O,e),i.fft(O)):i.fft(O),G.Qgt()},T=function(t,s){C&&(s&&i(),O.clear(),G=null,C=!1)},s=function(t,s){const i=M.h4(s);if(i){const e=t.GP();if(e.$ct()||e.aft().includes(i))if(t.AV()){if(i.TF().ASt(t))return e.gft(i),t.Qgt(),!0}else if(i.TF()===t)return e.gft(i),t.Qgt(),!0}return!1},r=function(t,h){const r=t.GP();if(r.$ct()){r.oft(!1),r.Kct();const i=t.CP();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.RF()===h?r.nft(e):r.rft(e)}return t.Qgt(),!!r.aft().length}{let i=r.aft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).RF()===h?r.nft(n):++e}return A.An(i,e),t.Qgt(),!!i.length}},A=(d,l,h,_,D,N,E,e,i,T,s,r,self.Rs),u=new A.ko,b={},x={},v={},M=null,n=(A.LSt=function(t){M=t},self.wF),w=(x.OSt=function(t,s){return A.compare(this.u4().hT(),t,s)},v.OSt=function(t,s){return A.compare(this.x,t,s)},x.RSt=function(t,s){return A.compare(this.u4().oT(),t,s)},v.RSt=function(t,s){return A.compare(this.y,t,s)},x.PSt=function(){return this.u4().Yj()},v.PSt=function(){return this.Vj()},b.kSt=function(){const t=l(this),s=t.Q3(),i=t.Wj();return i.wu()<0||i.Su()<0||i.yu()>s.im()||i.Mu()>s.pm()},b.FSt=function(i,e,h){const t=this.GP(),r=t.CP();if(!r.length)return!1;let n=r[0],o=n.u4(),a=n,u=A.gr(o.hT(),o.oT(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.u4();const l=A.gr(o.hT(),o.oT(),e,h);(0===i&&l<u||1===i&&l>u)&&(u=l,a=n)}return t.gft(a),!0},x.rT=function(t){const s=this.u4();s.hT()!==t&&(s.rT(t),s.Rj())},v.rT=function(t){this.x=+t},x.aT=function(t){const s=this.u4();s.oT()!==t&&(s.aT(t),s.Rj())},v.aT=function(t){this.y=+t},x.jSt=function(t,s){const i=this.u4();i.zSt(t,s)||(i.Pj(t,s),i.Rj())},v.jSt=function(t,s){this.setPosition(t,s)},b.BSt=function(t,s){if(t){const i=d(this),e=t.xP(i);if(e){const[h,r]=e.USt(s),n=i.u4();n.hT()===h&&n.oT()===r||(n.Pj(h,r),n.Rj())}}},b.WSt=function(t){if(0!==t){const s=l(this);s.jj(s.QSt()*t,s.JSt()*t),s.Rj()}},x.VSt=function(t,s){if(0!==s){const i=this.u4();t=A.dr(t),i.jj(Math.cos(t)*s,Math.sin(t)*s),i.Rj()}},v.VSt=function(t,s){0!==s&&(t=A.dr(t),this.Fj(Math.cos(t)*s,Math.sin(t)*s))},x.hT=function(){return this.u4().hT()},v.hT=function(){return this.x},x.oT=function(){return this.u4().oT()},v.oT=function(){return this.y},b.l3=function(){return M.l3(d(this))},x.YSt=function(t,s){return A.compare(this.u4().im(),t,s)},v.YSt=function(t,s){return A.compare(this.width,t,s)},x.HSt=function(t,s){return A.compare(this.u4().pm(),t,s)},v.HSt=function(t,s){return A.compare(this.height,t,s)},x.lm=function(t){const s=this.u4();s.im()!==t&&(s.lm(t),s.Rj())},v.lm=function(t){this.width=t},x.hm=function(t){const s=this.u4();s.pm()!==t&&(s.hm(t),s.Rj())},v.hm=function(t){this.height=t},x.WI=function(t,s){const i=l(this);i.im()===t&&i.pm()===s||(i.WI(t,s),i.Rj())},v.WI=function(t,s){this.UP(t,s)},x.im=function(){return this.u4().im()},v.im=function(){return this.width},x.pm=function(){return this.u4().pm()},v.pm=function(){return this.height},b.qSt=function(){return l(this).Wj().yu()},b.ZSt=function(){return l(this).Wj().Mu()},b.XSt=function(){return l(this).Wj().wu()},b.KSt=function(){return l(this).Wj().Su()},b.$St=function(){const t=l(this).Wj();return(t.yu()+t.wu())/2},b.tTt=function(){const t=l(this).Wj();return(t.Mu()+t.Su())/2},b.sTt=function(t,s){return A.Mr(l(this).VP(),A.dr(s))<=A.dr(t)},b.iTt=function(t){return A.Tr(l(this).VP(),A.dr(t))},b.eTt=function(t,s){const i=A.dr(t),e=A.dr(s),h=l(this).VP(),r=!A.Tr(e,i);return r?!(!A.Tr(h,i)&&A.Tr(h,e)):A.Tr(h,i)&&!A.Tr(h,e)},x.JP=function(t){const s=this.u4(),i=A.cr(A.dr(t));isNaN(i)||s.VP()===i||(s.JP(i),s.Rj())},v.JP=function(t){this.Uj=t},b.hTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.JP(s.VP()+A.dr(t)),s.Rj()}},b.rTt=function(t){if(!isNaN(t)&&0!==t){const s=l(this);s.JP(s.VP()-A.dr(t)),s.Rj()}},b.nTt=function(t,s){const i=l(this),e=i.VP(),h=A.Sr(e,A.dr(s),A.dr(t));isNaN(h)||e===h||(i.JP(h),i.Rj())},b.oTt=function(t,s,i){const e=l(this),h=e.VP(),r=s-e.hT(),n=i-e.oT(),o=Math.atan2(n,r),a=A.Sr(h,o,A.dr(t));isNaN(a)||h===a||(e.JP(a),e.Rj())},b.aTt=function(t,s){const i=l(this),e=i.VP(),h=t-i.hT(),r=s-i.oT(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.JP(n),i.Rj())},x.VP=function(){return A.pr(this.u4().VP())},v.VP=function(){return this.Uj},b.uTt=function(t,s){return A.compare(A.Pr(100*l(this).wN(),6),t,s)},x.Ak=function(){return this.u4().Ak()},v.Ak=function(){return this.isVisible},b.Nk=function(t){const s=l(this);t=2===t?!s.Ak():0!==t,s.Ak()!==t&&(s.Nk(t),M.y4())},b.TN=function(t){const s=A.lr(t/100,0,1),i=l(this);if(i.k5()){if(i.Prt().lTt()===s)return}else if(i.wN()===s)return;i.TN(s),M.y4()},b.cTt=function(t){u.ga(t);const s=l(this);s.qj().na(u)||(s.Zj(u),M.y4())},b.xN=function(){const t=l(this).qj();return A.jr(t.Xo(),t.Ko(),t.$o(),t.ta())},b.wN=function(){return A.Pr(100*l(this).wN(),6)},b.fTt=function(t){return!!t&&l(this).l4()===t},b.dTt=function(i){const t=this.GP(),e=t.CP();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.u4(),o=h.u4(),a=n.l4().cO(),u=o.l4().cO();0===i?(u<a||a===u&&n.c4()>o.c4())&&(h=r):(a<u||a===u&&n.c4()<o.c4())&&(h=r)}return t.gft(h),!0},x.pTt=function(t,s,i){const e=this.u4(),h=0===t?e.uT():e.Bj();return A.compare(h,s,i)},v.pTt=function(t,s,i){const e=0===t?this.qk:this.zj;return A.compare(e,s,i)},x.mTt=function(){this.u4().Kj()},v.mTt=function(){this.Xj()},x.gTt=function(){this.u4().t5()},v.gTt=function(){this.$j()},b.yTt=function(t){t&&l(this).i5(t)},b.MTt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.wTt(e);h&&e.u4().h5(h,i)}},x.lT=function(t){const s=this.u4();s.uT()!==t&&(s.lT(t),M.y4())},v.lT=function(t){this.qk=t},b.STt=function(){return l(this).l4().cO()},b.TTt=function(){return l(this).l4().Jc()},x.bTt=function(){return this.u4().c4()},v.bTt=function(){return this.zIndex},x.xTt=function(){return this.u4().uT()},v.xTt=function(){return this.qk},x.vTt=function(){return this.u4().Bj()},v.vTt=function(){return this.zj},b.CTt=function(t){const s=d(this),i=s.TF().FP().yht(t);if(i){const e=i.cO(),h=s.u4().Lj();return h.bz(e)}},b.GTt=function(t,s){const i=d(this),e=i.TF().FP().yht(s);if(e){const h=e.cO(),r=1===t,n=i.u4().Lj();n.bz(h)!==r&&(n.xz(h,r),n.vz(),M.y4())}},b.ITt=function(t,s,i){const e=d(this),h=e.TF().FP().yht(t);if(h){s=Math.floor(s);const r=h.Zx().Kx(s);if(r){"color"===r?(u.ga(i),i=u):"percent"===r&&(i/=100);const n=h.cO(),o=e.u4().Lj(),a=o.Gz(n,s,i);a&&o.bz(n)&&M.y4()}}},A.ir(A.Rect)),L=[],S=[],C=!1,G=null,I=!1,O=new Set;b._Tt=function(M){if(this.$c.DTt())return function*(M){if(M){let t=this.$c,s=t.MO(),e=t.UO(),i=e.s3(),h=e.a1t(),r=h.TF(),n=h.kwt(),o=h.Fwt(),a=i.I6(),u=t.mtt(),l=u-1,c=a.HO(),f=i._6(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.Vl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>N(d,t.yz))),r.GP()),m=M.GP(),g=p.CP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.$ct()?(s.NSt(w.u4().l4(),M,w.u4().Wj(),L),y=L,s.NTt(w,M,y)):y=m.CP();for(let t=0;t<y.length;++t){const S=y[t];if(s.sR(w,S)||s.ETt(w,S)){let t=E(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(_(d,w,S,u),T){const b=c.G6(),x=(e.L6(b),r.GP()),v=M.GP();if(x.oft(!1),v.oft(!1),r===M){const C=x.aft();A.Ln(C),C.push(w),C.push(S),r.Qgt()}else{const G=x.aft(),I=v.aft();A.Ln(G),A.Ln(I),G.push(w),I.push(S),r.Qgt(),M.Qgt()}yield*c.Rgt(a,f),e.R6(b)}}else D(d,w,S)}A.Ln(L)}i.j6()}return!1}.call(this,M);if(M){let t=this.$c,s=t.MO(),e=t.UO(),i=e.s3(),h=e.a1t(),r=h.TF(),n=h.kwt(),o=h.Fwt(),a=i.I6(),u=t.mtt(),l=u-1,c=a.HO(),f=i._6(c),d=n.get("collmemory"),p=(d||(d=A.ir(A.Vl),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Rf().addEventListener("instancedestroy",t=>N(d,t.yz))),r.GP()),m=M.GP(),g=p.CP(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.$ct()?(s.NSt(w.u4().l4(),M,w.u4().Wj(),L),y=L,s.NTt(w,M,y)):y=m.CP();for(let t=0;t<y.length;++t){const S=y[t];if(s.sR(w,S)||s.ETt(w,S)){let t=E(d,w,S),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const T=!s||i<l;if(_(d,w,S,u),T){const b=c.G6(),x=(e.L6(b),r.GP()),v=M.GP();if(x.oft(!1),v.oft(!1),r===M){const C=x.aft();A.Ln(C),C.push(w),C.push(S),r.Qgt()}else{const G=x.aft(),I=v.aft();A.Ln(G),A.Ln(I),G.push(w),I.push(S),r.Qgt(),M.Qgt()}c.O6(a,f),e.R6(b)}}else D(d,w,S)}A.Ln(L)}i.j6()}return!1},b.ATt=function(t){return e(d(this),t,0,0)},b.LTt=function(t,s,i){return e(d(this),t,s,i)},b.b5=function(){return l(this).b5()},b.o7=function(){return l(this).o7()},b.OTt=function(i,e){const t=this.GP(),h=t.CP();if(0===h.length)return!1;let s=i.GP(),r=s.CP();if(s.$ct()){const a=[...this.$c.RTt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.$ct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];if(1===e)for(const l of u.f5())l.PTt(i)&&(null===n||n.has(l))&&o.add(l);else{let t;if(0===e){if(null===(t=u.u5()))continue}else t=u.c5();t.PTt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.fft(o),i.Qgt(),!0)},b.kTt=function(i,e){const t=this.GP(),h=t.CP();if(0===h.length)return!1;let s=i.GP(),r=s.CP();if(s.$ct()){const a=[...this.$c.RTt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.$ct()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const u=h[t];2!==e||u.o7()||!u.PTt(i)||null!==n&&!n.has(u)||o.add(u);for(const l of 0===e?u.children():u.y5())2===e&&l.o7()||l.PTt(i)&&(null===n||n.has(l))&&o.add(l)}return 0!==o.size&&(s.fft(o),i.Qgt(),!0)},b.FTt=function(i,e,h){const t=this.GP(),r=t.CP();if(0===r.length)return!1;let s=i.GP(),n=s.CP();if(s.$ct()){const u=[...this.$c.RTt(i)];0<u.length&&(n=n.concat(u))}if(0===n.length)return!1;const o=s.$ct()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const l=r[t];if(0===e){const c=l.g5(h);null!==c&&c.PTt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of l.children())if(f.PTt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.cft(a),i.Qgt(),!0)},b.jTt=function(t,s,i){const e=d(this);switch(t){case 0:default:return A.compare(e.p5(),s,i);case 1:return A.compare(e.zTt(),s,i)}},b.w5=function(t,s,i,e,h,r,n,o,a,u){const l=d(this),c=M.l1t().TF();for(const f of t.BTt(l,c)){if(!f.pP().sP())return;l.w5(f,{v5:s,G5:i,_5:e,N5:h,A5:r,P5:n,O5:o,F5:a,z5:u})}},b.S5=function(t){const s=d(this),i=M.l1t().TF();for(const e of t.BTt(s,i))s.S5(e)},b.UTt=function(){const t=d(this);if(t.b5()){const s=t.u5();s.S5(t)}},b.WTt=function(){return d(this).p5()},b.QTt=function(){return d(this).zTt()},b.JTt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=l(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.J5(),i.Rj()):i.W5(t,s)},b.Y5=function(t,s,i,e,h,r,n,o){const a=l(this),u=a.Y5(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,qk:r,u:n,v:o});u&&a.Rj()},b.VTt=function(){const t=l(this);return t.q5()?t.Z5().LT():0},b.YTt=function(){const t=l(this);return t.q5()?t.Z5().OT():0},b.HTt=function(t){const s=l(this);t=2===t?!s.Ak():0!==t,s.Ak()!==t&&s.Nk(t)},b.uz=function(t,s){this instanceof self.wF?this.QU(t,s):this.uz(t,s)},b.qTt=function(t,s){this instanceof self.wF?this.JU(t,""+s):this.qTt(t,""+s)},b.ZTt=function(t){this instanceof self.wF?this.VU(t):this.ZTt(t)},b.XTt=function(){this instanceof self.wF?this.BU():this.nz()},b.KTt=function(){this instanceof self.wF?this.UU():this.oz()},b.$Tt=function(){return this instanceof self.wF?this.WU():this.$Tt()},b.t2t=function(t){this instanceof self.wF?this._setEnabled(0!==t):this.s2t(0!==t)},b.i2t=function(){return this instanceof self.wF?this.ayt():this._IsEnabled()},x.e2t=function(t,s,i){return A.compare(this.OB().Crt(t),s,i)},v.e2t=function(t,s,i){return A.compare(h(this).Crt(t),s,i)},x.h2t=function(t){return!!this.OB().Crt(t)},v.h2t=function(t){return!!h(this).Crt(t)},b.r2t=function(i,e){const t=this.GP(),h=t.CP();if(!h.length)return!1;let r=this.AV(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],u=r?a.TF().fMt(this.dMt()):0,l=a.Crt(u+e);(null===n||0===i&&l<o||1===i&&l>o)&&(o=l,n=a)}return t.gft(n),!0},b.n2t=function(t){return(this.$c.a1t().Awt()?r:s)(this,t)},b.mB=function(t){const s=new Set(A.Hn(t)),i=d(this).UF();return s.oe(i)},b.o2t=function(){return d(this).a2t()},b.u2t=function(){return d(this).UF().size},b.l2t=function(t){return d(this).c2t(t)},b.f2t=function(t,s){const i=A.Hn(s);if(0!==i.length){const e=d(this),h=new Set(e.UF());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.QF(h)}},b.d2t=function(){M._F(d(this))},b.p2t=function(){return!0},b.m2t=function(){return!0},x.g2t=function(t,s){this.OB().Grt(t,s)},v.g2t=function(t,s){h(this).Grt(t,s)},x.y2t=function(t,s){const i=this.OB(),e=i.Crt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Grt(t,e+s)},v.y2t=function(t,s){const i=h(this),e=i.Crt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Grt(t,e+s)},x.M2t=function(t,s){const i=this.OB(),e=i.Crt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Grt(t,e-s))},v.M2t=function(t,s){const i=h(this),e=i.Crt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Grt(t,e-s))},x.w2t=function(t,s){this.OB().Grt(t,s?1:0)},v.w2t=function(t,s){h(this).Grt(t,s?1:0)},x.S2t=function(t){const s=this.OB();s.Grt(t,0===s.Crt(t)?1:0)},v.S2t=function(t){const s=h(this);s.Grt(t,0===s.Crt(t)?1:0)},b.T2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);M.b2t(),i.TZ("state"),i.MT(s,"state"),M.x2t("state",{v2t:!0})},b.C2t=function(){return JSON.stringify(d(this).yT("state"))},b.G2t=function(){return d(this).TF().Jc()},b.I2t=function(){let t=M.o1t().Yft(),s=t._P();for(const i of M.RTt(t))++s;return s},b._2t=function(){return M.o1t().Yft().GP().CP().length},x.Z9=function(){return this.OB().Z9()},v.Z9=function(){return h(this).Z9()},x.RF=function(){return this.OB().RF()},v.RF=function(){return h(this).RF()},b.Ldt=function(t){const s=d(this);return t.toLowerCase()===M.UO().kdt(s)},b.VF=function(t){const s=d(this);M.UO().VF(s,t)},b.D2t=function(t){return M.UO().udt().N2t(this.GP().CP(),t),!0},b.E2t=function(){return d(this).kF()},A.A2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],u=t[8],l=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.J9,M=s.kht,w=s.Fht,S=Object.assign({},b,2<=i?v:x);h&&(y.OSt=S.OSt,y.RSt=S.RSt,y.PSt=S.PSt,y.kSt=S.kSt,y.FSt=S.FSt,M.rT=S.rT,M.aT=S.aT,M.jSt=S.jSt,M.BSt=S.BSt,M.WSt=S.WSt,M.VSt=S.VSt,w.L2t=S.hT,w.O2t=S.oT,w.u3=S.l3),r&&(y.YSt=S.YSt,y.HSt=S.HSt,M.lm=S.lm,M.hm=S.hm,M.WI=S.WI,w.R2t=S.im,w.P2t=S.pm,w.k2t=S.qSt,w.F2t=S.ZSt,w.j2t=S.XSt,w.z2t=S.KSt,w.B2t=S.$St,w.U2t=S.tTt),n&&(y.W2t=S.sTt,y.Q2t=S.iTt,y.eTt=S.eTt,M.JP=S.JP,M.hTt=S.hTt,M.rTt=S.rTt,M.nTt=S.nTt,M.oTt=S.oTt,M.aTt=S.aTt,w.J2t=S.VP),o&&(y.Ak=S.Ak,y.uTt=S.uTt,M.Nk=S.Nk,M.TN=S.TN,M.cTt=S.cTt,w.Opacity=S.wN,w.V2t=S.xN),a&&(y.fTt=S.fTt,y.dTt=S.dTt,y.pTt=S.pTt,M.mTt=S.mTt,M.gTt=S.gTt,M.yTt=S.yTt,M.MTt=S.MTt,M.lT=S.lT,w.STt=S.STt,w.TTt=S.TTt,w.bTt=S.bTt,w.xTt=S.xTt,w.vTt=S.vTt),u&&(y.CTt=S.CTt,M.GTt=S.GTt,M.ITt=S.ITt),d&&(y.b5=S.b5,y.o7=S.o7,y.OTt=S.OTt,y.kTt=S.kTt,y.FTt=S.FTt,y.jTt=S.jTt,M.w5=S.w5,M.S5=S.S5,M.UTt=S.UTt,w.WTt=S.WTt,w.QTt=S.QTt),p&&(M.JTt=S.JTt,M.Y5=S.Y5,w.VTt=S.VTt,w.YTt=S.YTt),l&&(y.Ak=S.Ak,M.Nk=S.HTt,M.Y2t=S.uz,M.H2t=S.qTt,M.q2t=S.ZTt),c&&(y.Z2t=S.$Tt,M.X2t=S.XTt,M.K2t=S.KTt),f&&(y.Jl=S.i2t,M.$2t=S.t2t),m&&(y._Tt=S._Tt,y.ATt=S.ATt,y.LTt=S.LTt,s.tbt=T),e||(y.e2t=S.e2t,y.h2t=S.h2t,y.r2t=S.r2t,y.n2t=S.n2t,y.mB=S.mB,M.g2t=S.g2t,M.y2t=S.y2t,M.M2t=S.M2t,M.w2t=S.w2t,M.S2t=S.S2t,M.f2t=S.f2t,y.p2t=S.p2t,y.m2t=S.m2t,M.d2t=S.d2t,M.T2t||(M.T2t=S.T2t),w.C2t||(w.C2t=S.C2t),w.I2t=S.I2t,w._2t=S._2t,w.sbt=S.Z9,w.ibt=S.RF,w.G2t=S.G2t,w.o2t=S.o2t,w.u2t=S.u2t,w.l2t=S.l2t,y.Ldt=S.Ldt,M.VF=S.VF,M.D2t=S.D2t),g&&(w.E2t=S.E2t)}}{const Zo=self.Rs;Zo.ldt=class extends Zo.$h{constructor(t){super(),this.wft=t,this.lf="",this.QA=-1,this.ebt="",this.hbt=!1,this.rbt=null,this._ft=0,this.imt=[],this.Oft=null,this.nbt=new Map,this.obt=null,this.abt=null,this.ubt=-1,this.oyt=null,this.lbt=null,this.cbt=!1}er(){this.lf="",this.QA=-1,this.ebt="",this.rbt=null,this.abt=null,this.oyt=null,this.lbt=null,this.ubt=-1,Zo.Ln(this.imt),this.Oft&&(this.Oft.clear(),this.Oft=null);for(const t of this.nbt.values())t.er();this.nbt.clear(),this.obt=null}eT(){const t=this.wft,s=t.E4().EV(),i=t.o1t(),e=(this.rbt=i.HO(),this._ft=i.zft()+1,t.spt(this.rbt));e&&(this.abt=e,this.oyt=e.vyt(),this.lbt=e.xyt().map(t=>t.oet()),e._gt())&&(this.ubt=e._yt());for(const r of s){const n=r.GP();n.$ct()&&!this.rbt.Kmt(r)||(this.imt.push(r),this.nbt.set(r,Zo.ir(Zo.fbt,n)))}const h=t.qO();this.Oft=0<h.size?h:null}dbt(t){this.lf="timer",this.eT(),this.QA=this.wft.E4().g3()+t}pbt(t){this.lf="signal",this.eT(),this.ebt=t.toLowerCase()}N2t(t,s){this.lf="instance-signals",this.eT(),this.ebt=s.toLowerCase(),this.obt=new Set(t)}mbt(t){this.lf="promise",this.eT(),t.then(()=>this.Ddt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Ddt()})}gbt(){return"timer"===this.lf}Idt(){return"signal"===this.lf}Rdt(){return"instance-signals"===this.lf}Xdt(){return"promise"===this.lf}_dt(){return this.ebt}ybt(){return this.hbt}Ddt(){this.hbt=!0}Pdt(t){this.obt.delete(t),0===this.obt.size&&this.Ddt()}ddt(){return this.gbt()?this.QA<=this.wft.E4().g3():this.ybt()}Mbt(t){t.Rft(this.rbt,this._ft);for(const[i,e]of this.nbt.entries()){const h=i.GP();e.Rft(h)}this.Oft&&t.$ft([...this.Oft]);const s=this.abt;s&&(s.jgt(this.oyt),s.xyt().map((t,s)=>t.Jet(this.lbt[s])),s._gt())&&s.Dyt(this.ubt)}pdt(t){this.Mbt(t),this.rbt.Dgt(t),this.abt&&this.abt._gt()&&this.abt.qgt(this.ubt),this.wft.rdt(this.imt),this.cbt=!0}async Mdt(t){this.Mbt(t);for(const s of this.rbt.Ngt(t))await this.wft.E4().U1t(s);this.abt&&this.abt._gt()&&this.abt.qgt(this.ubt),this.wft.rdt(this.imt),this.cbt=!0}mdt(){return this.cbt}Hct(t){for(const s of this.nbt.values())s.Hct(t);if("instance-signals"===this.lf){for(const i of t)this.obt.delete(i);0===this.obt.size&&this.Ddt()}}e7(){const t={},s={wt:this.lf,t:this.QA,st:this.ebt,s:this.hbt,ev:this.rbt.zV(),sm:this.imt.map(t=>t.zV()),dsm:this.Oft?[...this.Oft].map(t=>t.zV()):null,sols:t};this.rbt.ggt(this._ft)&&(s.act=this.rbt.c1t(this._ft).zV());for(const[i,e]of this.nbt)t[i.zV().toString()]=e.e7();return"instance-signals"===this.lf&&(s.pi=[...this.obt].map(t=>t.RF())),s}static Kdt(t,s){const i=t.E4(),e=t.S1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.b1t(s.act);if(!n)return null;h=n.cO()}const r=Zo.ir(Zo.ldt,t);r.QA=s.t,s.hasOwnProperty("wt")?r.lf=s.wt:r.lf=-1===r.QA?"signal":"timer",r.ebt=s.st,r.hbt=s.s,r.rbt=e,r._ft=h;for(const o of s.sm){const a=i.w6(o);a&&r.imt.push(a)}if(Array.isArray(s.dsm))for(const u of s.dsm){const l=i.w6(u);l&&(r.Oft||(r.Oft=new Set),r.Oft.add(l))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.w6(d);if(p){const m=Zo.ir(Zo.fbt,null);m.h7(t,f),r.nbt.set(p,m)}}if("instance-signals"===r.lf){r.obt=new Set;for(const g of s.pi){const y=i.h4(g);y&&r.obt.add(y)}}return r}}}{const Xo=self.Rs;Xo.fbt=class extends Xo.$h{constructor(t){super(),this.Bct=null,this.wbt=!0,this._J=[],t&&(this.Bct=t.TF(),this.wbt=t.$ct(),Xo.kn(this._J,t.aft()))}er(){this.Bct=null,Xo.Ln(this._J)}Rft(t){t.oft(this.wbt),Xo.kn(t.aft(),this._J)}Hct(t){Xo.Un(this._J,t)}e7(){return{sa:this.wbt,insts:this._J.map(t=>t.RF())}}h7(t,s){const i=t.E4();this.wbt=!!s.sa,Xo.Ln(this._J);for(const e of s.insts){const h=i.h4(e);h&&this._J.push(h)}}}}{let u=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};u;const Ko=self.Rs;Ko.Sbt=class extends Ko.$h{constructor(t){super(),this.$c=t.runtime,this.Tbt=!!t.BR,this.bbt=!!t.xbt,this.vbt=!!t.YR,this.Cbt=!!t.Gbt,this.Ibt=!!t.qR,this._bt=!!t.Dbt,this.Nbt=!!t.iP,this.Ebt=!!t.JR,this.Abt=!!t.KR,this.Lbt=t.Obt,this.Rbt=null,this.Pbt=new Map,this.kbt=new Map,this.Fbt=new Map,this.jbt=new Map,this.zbt=t.Bbt,this.Ubt=null}er(){this.$c=null}E4(){return this.$c}Wbt(){}Odt(){return(2<=this.Ewt()?this.Ubt:this).constructor}Ewt(){return this.Lbt}Qbt(t=!1){let s=this.zbt;return t&&"function"!=typeof s&&2<=this.Ewt()?globalThis.UB:s}UR(){return this.Tbt}QR(){return this.bbt}VR(){return this.Ebt}$R(){return this.Abt}HR(){return this.vbt}AS(){return this.Cbt}ZR(){return this.Ibt}sP(){return this._bt}eP(){return this.Nbt}tMt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Pbt.get(t);return i||(i=t.bind(s),this.Pbt.set(t,i)),i}Iwt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=u(this.kbt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}_wt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=u(this.Fbt,t),r=u(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}Dwt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=u(this.jbt,t),n=u(r,i),o=u(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Jbt(t){if(!this.UR())throw new Error("must be single-global plugin");this.Rbt=t}uP(){if(this.UR())return this.Rbt;throw new Error("must be single-global plugin")}cP(){if(this.UR())return this.Rbt.cP();throw new Error("must be single-global plugin")}Vbt(){const t=this.Ewt(),s=(Ko.jR.Ybt(this,t),this.Qbt(!0));if(s){if(this.Ubt=new s,!(this.Ubt instanceof self.PR))throw new TypeError("plugin class must derive from IPlugin")}else this.Ubt=new self.PR;Ko.jR.Hbt(t)}nP(){return this.Ubt}}}{const $o=self.Rs;$o.qbt=class extends $o.Sbt{constructor(t,s){super(t),this.Zbt=s,this.Xbt=0,this.Kbt=new Map,this.$bt("elem-focused",t=>t.txt()),this.$bt("elem-blurred",t=>{t&&t.sxt()})}er(){super.er()}ixt(t){const s=this.Xbt++;return this.Kbt.set(s,t),s}hxt(t){this.Kbt.delete(t)}$bt(t,i){this.$c.lj(this.Zbt,t,t=>{const s=this.Kbt.get(t.elementId);i(s,t)})}}}{const ta=self.Rs;ta.rxt=class extends ta.$h{constructor(t){super(),this.Bct=t,this.$c=t.E4(),this.nxt=t.pP()}er(){this.Bct=null,this.$c=null,this.nxt=null}TF(){return this.Bct}E4(){return this.$c}pP(){return this.nxt}Qz(){return this.Bct.Qz()}Wbt(){}Wwt(t){}_St(t){}DSt(t){}m9(t){}T9(){}M9(){}B9(t){}oxt(){}Qbt(){return null}axt(t,s,i){const e=ta.ir(ta.Event,t,s);e.uxt=this,i&&Object.assign(e,i),this.TF().Cq(e)}}}{const sa=self.Rs;sa.lxt=class extends sa.$h{constructor(t,s){super(),this.Ti=t,this.Zbt=s,this.cxt=null,this.$c=t.E4(),this.Bct=this.Ti.TF(),this.fxt=this.Bct.ISt(),this.lZ=null,this.fZ=null,this.gj=!1,this.Mj=!1,this.d0=null,this.dI=!1}er(){this.dI=!0,this.dxt(),this.pxt(),this.lZ=null,this.fZ=null,this.d0&&(this.d0.er(),this.d0=null),this.Ti=null,this.$c=null,this.Bct=null,this.fxt=null}hr(){return this.dI}OB(){return this.Ti}E4(){return this.$c}TF(){return this.Bct}pP(){return this.fxt.pP()}ISt(){return this.fxt}mxt(){return this.Ti.r4()}nj(t){return this.$c.nj(t,this.Ti,null)}gxt(t){return this.$c.gxt(t,this.Ti,null)}aj(t){return this.$c.aj(t,this.Ti,null)}yxt(t,s){return this.$c.yxt(t,this.Ti,s)}Mxt(t,s){return this.$c.Mxt(t,this.Ti,s)}wxt(t){return this.$c.wxt(t)}Sxt(t,s){this.$c.lj(this.Zbt,t,s)}Txt(t){for(const[s,i]of t)this.Sxt(s,i)}bxt(t,s){this.$c.ef(this.Zbt,t,s)}xxt(t,s){return this.$c.w4(this.Zbt,t,s)}vxt(t,s){if(!this.$c.GO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Zbt,handler:t,data:s,responseId:null});this.bxt(t,s)}Cxt(t){if(!t)throw new Error("cannot set empty component id");this.cxt=t}Gxt(){if(this.cxt)return this.$c.xj(this.cxt);throw new Error("wrapper extension component id not set")}Cj(t,s){if(!this.cxt)throw new Error("wrapper extension component id not set");this.$c.Cj(this.cxt,t,s)}Ixt(t){for(const[s,i]of t)this.Cj(s,i)}u6(t,s){if(!this.cxt)throw new Error("wrapper extension component id not set");this.$c.u6(this.cxt,t,s)}l6(t,s){if(this.cxt)return this.$c.l6(this.cxt,t,s);throw new Error("wrapper extension component id not set")}SX(){}_xt(){}Dxt(){this.gj||(this.lZ||(this.lZ=()=>this.SX()),this.$c.Rf().addEventListener("tick",this.lZ),this.gj=!0)}dxt(){this.gj&&(this.$c.Rf().removeEventListener("tick",this.lZ),this.gj=!1)}Nxt(){return this.gj}Ext(){this.Mj||(this.fZ||(this.fZ=()=>this._xt()),this.$c.Rf().addEventListener("tick2",this.fZ),this.Mj=!0)}pxt(){this.Mj&&(this.$c.Rf().removeEventListener("tick2",this.fZ),this.Mj=!1)}Axt(){return this.Mj}Lxt(){return[]}yT(){return null}MT(t){}grt(t){}brt(t,s){}gnt(t,s,i){if(0!==s){const e=this.grt(t);if("number"!=typeof e)throw new Error("expected number");this.brt(t,e+s,i)}}Oxt(t,s,i,e){}Rxt(t,...s){t.call(this,...s)}Pxt(t,...s){return t.call(this,...s)}Qbt(){return null}axt(t,s,i){if(this.Ti.kxt()){const e=this.mxt(),h=sa.ir(sa.Event,t,s);h.yz=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}AS(){return!1}}}{const ia=self.Rs;ia.Fxt=class extends ia.lxt{constructor(t,s){super(t,s),this.pst=t.u4(),this.jxt=null,this.zxt=null}er(){if(this.jxt){const t=this.$c.Rf();t.removeEventListener("renderercontextlost",this.jxt),t.removeEventListener("renderercontextrestored",this.zxt),this.jxt=null,this.zxt=null}this.pst=null,super.er()}Bxt(){this.Uxt()}Wxt(){}Qxt(){}Uxt(){if(!this.jxt){this.jxt=()=>this.SJ(),this.zxt=()=>this.Jxt();const t=this.$c.Rf();t.addEventListener("renderercontextlost",this.jxt),t.addEventListener("renderercontextrestored",this.zxt)}}SJ(){this.Wxt()}Jxt(){this.Qxt()}u4(){return this.pst}hit(){return!1}eit(){if(!this.hit())throw new Error("original size not known");const t=this.Vxt();if(t)return t.im()}nit(){if(!this.hit())throw new Error("original size not known");const t=this.Vxt();if(t)return t.pm()}Vxt(){return null}Yxt(){const t=this.Vxt();if(t){const s=t.xb();if(s)return[s.im(),s.pm()]}return[100,100]}Hxt(){const t=this.Vxt();return t?t.S_():null}qxt(){const t=this.Vxt();return t?t.Zxt():null}Xxt(){const t=this.Vxt();return!!t&&t.Kxt()}USt(t){const s=this.Ti.u4();return[s.hT(),s.oT(),s.Bj()]}oxt(t,s,i){}$xt(t,s){}RH(){return!0}}}{const ea=self.Rs,ha=ea.ir(ea.Rect);ea.tvt=class extends ea.Fxt{constructor(t,s){super(t,s),this.svt=this.pP().ixt(this),this.ivt=!0,this.evt=!1,this.hvt=!1,this.rvt=-.2,this.nvt=ea.ir(ea.Rect,0,0,-1,-1);const i=this.$c.bR();this.ovt=i.CU(),this.avt=i.GU(),this.uvt=-1,this.lvt=-1,this.cvt=!1,this.Dxt()}er(){this.pP().hxt(this.svt),this.fvt("destroy"),this.svt=-1,super.er()}hz(){if(this.$c.GO())throw new Error("not valid in worker mode");return this.dvt("get-element")}fvt(t,s){(s=s||{}).elementId=this.svt,this.bxt(t,s)}dvt(t,s){return(s=s||{}).elementId=this.svt,this.vxt(t,s)}pvt(t,s){return(s=s||{}).elementId=this.svt,this.xxt(t,s)}mvt(t){t=t||{};const s=this.u4();t.elementId=this.svt,t.isVisible=s.Ak(),t.htmlIndex=s.l4().AU(),t.htmlZIndex=s.LU(),Object.assign(t,this.gvt()),this.ivt=!!t.isVisible,this.vxt("create",t),this.yvt(!0)}HTt(t){this.ivt!==(t=!!t)&&(this.ivt=t,this.fvt("set-visible",{isVisible:t}))}SX(){this.yvt(!1)}Mvt(){const t=this.$c.bR().FU();return"Android"===ea.ri.ni&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}yvt(l){if(!this.OB().jU()){let t=this.u4(),s=t.l4(),i=t.Wj(),[e,h]=s.fF(i.yu(),i.Mu()),[r,n]=s.fF(i.wu(),i.Su()),o=this.$c.bR(),a=o.GR(),u=o._R();if(t.Ak()&&s.Ak())if(!this.Mvt()&&(r<=0||n<=0||a<=e||u<=h))this.HTt(!1);else{ha.set(e,h,r,n);const c=o.CU(),f=o.GU(),d=s.AU(),p=t.LU();if(!l&&ha.equals(this.nvt)&&this.ovt===c&&this.avt===f&&this.uvt===d&&this.lvt===p)this.HTt(!0);else{this.nvt.G(ha),this.ovt=c,this.avt=f,this.uvt=d,this.lvt=p,this.HTt(!0);let t=null;this.hvt&&(t=s.zU()+this.rvt),this.fvt("update-position",{left:Math.round(this.nvt.yu()),top:Math.round(this.nvt.Mu()),width:Math.round(this.nvt.width()),height:Math.round(this.nvt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.HTt(!1)}}nz(){this.dvt("focus",{focus:!0})}oz(){this.dvt("focus",{focus:!1})}txt(){this.evt=!0}sxt(){this.evt=!1}$Tt(){return this.evt}uz(t,s){this.fvt("set-css-style",{prop:ea.Oo(t),val:s})}qTt(t,s){this.fvt("set-attribute",{name:t,val:s})}ZTt(t){this.fvt("remove-attribute",{name:t})}wvt(){this.cvt||(this.cvt=!0,Promise.resolve().then(()=>{this.cvt=!1,this.fvt("update-state",this.gvt())}))}gvt(){}Svt(){return this.svt}}}{const ra=self.Rs,na=self.Sz;ra.Tvt=class extends ra.$h{constructor(t){super(),this.$c=t.runtime,this.bvt=ra.ir(ra.tc),this.xvt=ra.ir(ra.tc),this.Lbt=t.Obt,this.zbt=t.Bbt,this.vvt=null}er(){this.xvt.er(),this.bvt.er(),this.$c=null}E4(){return this.$c}Wbt(){}Ewt(){return this.Lbt}Qbt(t=!1){let s=this.zbt;return t&&"function"!=typeof s&&2<=this.Ewt()?globalThis.qU:s}Cvt(t){this.bvt.hc(t)}VZ(){return this.bvt.rc()}wV(t){this.xvt.hc(t)}bV(t){this.xvt.Zl(t)}CP(){return this.xvt.rc()}Vbt(){const t=this.Ewt(),s=(ra.jR.Ybt(this,t),this.Qbt(!0));if(s){if(this.vvt=new s,!(this.vvt instanceof na))throw new TypeError("behavior class must derive from IBehavior")}else this.vvt=new na;ra.jR.Hbt(t)}cz(){return this.vvt}}}{const oa=self.Rs;oa.Gvt=class extends oa.$h{constructor(t){super(),this.$c=t.E4(),this.mMt=t,this.Bct=t.TF(),this.Ivt=t.fz(),this.Ivt.Cvt(this.Bct)}er(){this.$c=null,this.mMt=null,this.Bct=null,this.Ivt=null}Wbt(){}gz(){return this.mMt}TF(){return this.Bct}E4(){return this.$c}fz(){return this.Ivt}}}{const aa=self.Rs;aa._vt=class extends aa.$h{constructor(t,s){super(),this.Dvt=t,this.Zbt=s,this.Ti=t.Mz(),this.$c=t.E4(),this.mMt=t.gz(),this.fxt=this.mMt.ISt(),this.gj=!1,this.Mj=!1,this.o6=!1,this.d0=null}er(){this.dxt(),this.pxt(),this.Nvt(),this.d0&&(this.d0.er(),this.d0=null),this.Dvt=null,this.Ti=null,this.$c=null,this.mMt=null,this.fxt=null}fz(){return this.mMt.fz()}Evt(){return this.Dvt}Mz(){return this.Ti}TF(){return this.Ti.TF()}u4(){return this.Ti.u4()}E4(){return this.$c}gz(){return this.mMt}ISt(){return this.fxt}mxt(){return this.Dvt.mxt()}nj(t){return this.$c.nj(t,this.Ti,this.mMt)}gxt(t){return this.$c.gxt(t,this.Ti,this.mMt)}aj(t){return this.$c.aj(t,this.Ti,this.mMt)}Avt(){}SX(){}_xt(){}Lvt(){}Dxt(){this.gj||(this.$c.s6(this),this.gj=!0)}dxt(){this.gj&&(this.$c.i6(this),this.gj=!1)}Nxt(){return this.gj}Ext(){this.Mj||(this.$c.e6(this),this.Mj=!0)}pxt(){this.Mj&&(this.$c.h6(this),this.Mj=!1)}Axt(){return this.Mj}Ovt(){this.o6||(this.$c.r6(this),this.o6=!0)}Nvt(){this.o6&&(this.$c.n6(this),this.o6=!1)}Rvt(){return this.o6}Lxt(){return[]}Sxt(t,s){this.$c.lj(this.Zbt,t,s)}Pvt(t,s){}yT(){return null}MT(t){}grt(t){}brt(t,s){}gnt(t,s){if(0!==s){const i=this.grt(t);if("number"!=typeof i)throw new Error("expected number");this.brt(t,i+s)}}Oxt(t,s,i,e){}Rxt(t,...s){t.call(this,...s)}Pxt(t,...s){return t.call(this,...s)}Qbt(){return null}axt(t,s,i){if(this.Dvt.kxt()){const e=this.mxt(),h=aa.ir(aa.Event,t,s);h.kvt=e,h.yz=e.yz,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Rs),i=(r.Y9={},r.vat={},r.Ps()),e=[],h=[],n=[],o=null,a=null,t=null,u=null,l=new Map,c=new Map;r.jR=class extends r.$h{constructor(t,s){super(),this.$c=t,this.Fvt=[],this.qyt=null,this.jvt=[],this.zvt=new Map,this.Bvt=null,this.Uvt=null,this.Wvt=new Set(s)}Qvt(t){const s=t[19],i=this.$c.$gt(t[0]);if(!i)throw new Error("missing plugin");r.A2t(t,i,s);const e=2<=s?r.Sbt:i,h=r.ir(e,{runtime:this.$c,BR:t[1],xbt:t[2],YR:t[5],qR:t[8],Gbt:t[9],Dbt:t[13],iP:t[14],JR:t[17],KR:t[18],Obt:s,Bbt:2<=s?i:null});h.Wbt(),this.Fvt.push(h),l.set(i,h)}Jvt(){this.qyt=r.ir(r.Y9.V9,{runtime:this.$c,BR:!0}),this.qyt.Wbt()}Vvt(t){const i=t[1],e=this.$c.$gt(t[0]);if(!e)throw new Error("missing behavior");this.zvt.set(e,()=>{const t=2<=i?r.Tvt:e,s=r.ir(t,{runtime:this.$c,Obt:i,Bbt:2<=i?e:null});s.Wbt(),this.jvt.push(s),c.set(e,s),!this.Bvt&&r.vat.solid&&s instanceof r.vat.solid?this.Bvt=s:!this.Uvt&&r.vat.jumpthru&&s instanceof r.vat.jumpthru&&(this.Uvt=s),s.Vbt()})}Yvt(t){const s=this.zvt.get(t);s&&(s(),this.zvt.delete(t))}static Ybt(t,s=1){if(r.jR.Ybt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Hbt(t=1){if(r.jR.Hbt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static CF(){if(r.jR.CF!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static FR(t){if(r.jR.FR!==u)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static Hvt(t){n.push(t)}static qvt(){n.pop()}static hj(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}Zvt(){for(const t of this.Fvt)t.Vbt()}static rP(t){return l.get(t)||null}static Tz(t){return c.get(t)||null}Zyt(){return this.qyt}Xvt(){return this.Bvt}Kvt(){return this.Uvt}xj(t){return this.Wvt.has(t)}},o=r.jR.Ybt,a=r.jR.Hbt,t=r.jR.CF,u=r.jR.FR}{const ua=self.Rs,la=new Set;ua.$vt=class extends ua.$h{constructor(){super(),this.tCt=0,this.uJ="",this.lJ=0,this.sCt=0,this.iCt=0,this.Um=0,this.Wm=0,this.eCt=!1,this.hCt=!1,this.rCt=null,this.nCt="",this.oI=ua.ir(ua.Rect),this.oCt=ua.ir(ua.Yu),this.aCt="",this.uCt=new self.D4(this),la.add(this)}er(){this.lI(),this.rCt&&0===this.rCt.xJ()&&this.rCt.er(),this.rCt=null,la.delete(this),this.lCt()}static SJ(){for(const t of la)t.nCt="",t.oI.set(0,0,0,0),t.oCt.pl(t.oI)}cCt(t){this.uJ=t[0],this.lJ=t[1],this.sCt=t[2],this.iCt=t[3],this.Um=t[4],this.Wm=t[5],this.eCt=t[6],this.hCt=!0}fCt(t,s){if(this.rCt)throw new Error("already loaded asset");this.uJ=s;const i={};return ua.co(s)&&(i.FQ="remote"),this.N4(t,i),this.rCt.BQ()}dCt(t,s){if(this.rCt)throw new Error("already loaded asset");this.uJ="",this.lJ=s.size,this.rCt=ua.ir(ua.jQ,t.mO(),{blob:s,size:this.lJ,FQ:"local"})}pCt(t){if(t===this)throw new Error("cannot replace with self");this.tCt++,this.lI(),this.uJ=t.uJ,this.lJ=t.lJ,this.sCt=t.sCt,this.iCt=t.iCt,this.Um=t.Um,this.Wm=t.Wm,this.eCt=t.eCt,this.hCt=t.hCt,this.rCt=t.rCt,this.nCt=t.nCt,this.oI=t.oI,this.oCt=t.oCt,this.lCt()}zQ(){return this.uJ}Kl(){return this.lJ}mCt(){return this.sCt}gCt(){return this.iCt}Kxt(){return this.eCt}im(){return this.Um}pm(){return this.Wm}yCt(){return this.rCt.im()}MCt(){return this.rCt.pm()}N4(t,s){if(this.rCt)throw new Error("already got asset");s=Object.assign({},s,{url:this.zQ(),size:this.Kl()}),this.rCt=t.kQ(s)}pJ(){return this.rCt&&this.rCt.pJ()}async MW(t,s){if(!this.rCt)throw new Error("no asset");if(this.nCt)throw new Error("already loaded texture");const i=this.tCt,e=(this.nCt="loading",await this.rCt.MW(t,s));if(this.tCt!==i)return null;if(!e)return this.nCt="",null;this.nCt="loaded",this.hCt||(this.Um=e.im(),this.Wm=e.pm(),this.hCt=!0);const h=this.eCt?this.Wm:this.Um,r=this.eCt?this.Um:this.Wm;return this.oI.set(this.sCt,this.iCt,this.sCt+h,this.iCt+r),this.oI.Gt(e.im(),e.pm()),this.oCt.pl(this.oI),this.eCt&&this.oCt.Sl(),e}lI(){this.nCt&&(this.rCt&&this.rCt.lI(),this.nCt="",this.oI.set(0,0,0,0),this.oCt.pl(this.oI))}xb(){return this.rCt&&"loaded"===this.nCt?this.rCt.xb():null}S_(){return this.oI}Zxt(){return this.oCt}sU(){return this.uCt}wCt(){return this.rCt}async SCt(t){t=t||await this.rCt.vJ();const s=ua.Co(this.Um,this.Wm),i=s.getContext("2d");return this.eCt?(i.rotate(Math.PI/-2),i.translate(-this.Wm,0),i.drawImage(t,this.sCt,this.iCt,this.Wm,this.Um,0,0,this.Wm,this.Um)):i.drawImage(t,this.sCt,this.iCt,this.Um,this.Wm,0,0,this.Um,this.Wm),s}async TCt(t){if(!this.aCt){const s=await this.SCt(t),i=await ua.Go(s);this.aCt=URL.createObjectURL(i)}return this.aCt}lCt(){this.aCt&&(URL.revokeObjectURL(this.aCt),this.aCt="")}}}{const ca=self.Rs;ca.bCt=class extends ca.$h{constructor(t){super(),this.nr=t[0],this.xCt=t[1],this.nwt=!!t[2],this.Vnt=t[3],this.vCt=t[4],this.CCt=!!t[5],this.n8=t[6],this.GCt=t[7].map(t=>ca.ir(ca.ICt,t)),this._Ct=new self.Iz(this)}static DCt(t,s){const i=ca.ir(ca.bCt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.GCt.push(ca.ICt.DCt(t)),i}er(){for(const t of this.GCt)t.er();ca.Ln(this.GCt)}NCt(t){for(const s of this.GCt)s.Qz().N4(t)}ECt(s,i){return Promise.all(this.GCt.map(t=>t.Qz().MW(s,i)))}ACt(){for(const t of this.GCt)t.Qz().lI()}Jc(){return this.nr}zV(){return this.n8}Pz(){return this.GCt.length}Fz(){return this.GCt}LCt(t){if((t=Math.floor(t))<0||t>=this.GCt.length)throw new RangeError("invalid frame");return this.GCt[t]}OCt(t,s){(s=Math.floor(s))<0?this.GCt.unshift(t):s>=this.GCt.length?this.GCt.push(t):this.GCt.splice(s,0,t)}RCt(t){if((t=Math.floor(t))<0||t>=this.GCt.length)throw new RangeError("invalid frame");this.GCt[t].er(),this.GCt.splice(t,1)}PCt(i){for(let t=0,s=this.GCt.length;t<s;++t)if(ca.ph(this.GCt[t].lB(),i))return t;return-1}kCt(t){if("string"!=typeof t)return t;{const s=this.PCt(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}_z(){return this.xCt}Nz(){return this.nwt}Ez(){return this.Vnt}Lz(){return this.vCt}Rz(){return this.CCt}FCt(){return this._Ct}}}{const fa=self.Rs,da=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();fa.ICt=class extends fa.$h{constructor(t){super(),this.jCt=fa.ir(fa.$vt),this.jCt.cCt(t),this.zCt=t[7],this.BCt=fa.ir(fa.Ya,t[8],t[9]),this.UCt=t[10].map(t=>fa.ir(fa.WCt,this,t)),this.QCt=new Map;for(const i of this.UCt)this.QCt.set(i.Jc().toLowerCase(),i);this.JCt=null;const s=t[11];6<=s.length&&(this.JCt=fa.ir(fa.Il,s)),this.Wg=t[12]||"",this.VCt=new self.Wz(this)}static DCt(t){const s=fa.ir(fa.ICt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.jCt.dCt(t,da),s}er(){this.JCt&&(this.JCt.er(),this.JCt=null),this.jCt.er(),this.jCt=null}Qz(){return this.jCt}Jz(){return this.zCt}Yz(){return this.BCt.Ka()}Zz(){return this.BCt.tu()}nB(){return this.JCt}hB(t){return this.QCt.get(t.toLowerCase())||null}eB(t){return(t=Math.floor(t))<0||t>=this.UCt.length?null:this.UCt[t]}$z(){return this.UCt.length}lB(){return this.Wg}jz(){return this.VCt}}}{const pa=self.Rs;pa.WCt=class extends pa.$h{constructor(t,s){super(),this.YCt=t,this.nr=s[0],this.HCt=pa.ir(pa.Ya,s[1],s[2])}er(){}Jc(){return this.nr}hT(){return this.HCt.Ka()}oT(){return this.HCt.tu()}qCt(){return this.HCt}}}{const v=self.Rs,ma=self.C3Debugger,ga=self.fP;v.dut=class extends v.$h{constructor(s,t,i){super();const e=s.$gt(i[1]),[h,r]=(this.$c=s,this.nxt=v.jR.rP(e),this.fxt=null,this.ZCt=e.Instance,this.Ug=t,this.n8=i[11],this.nr=i[0],this.Pyt=this.$c.y1t(i[14]),this.XCt=!!i[9],this.KCt=!!i[2],this.$Ct=!!i[10],this.tGt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],sGt:s.y1t(t[3])})),this.iGt=i[4],this.eGt=i[5],this.bbt=this.nxt.QR(),this.hGt=v.ir(v.Event.Rf),this.U8=null,s.MO().aR());if(this.rGt=v.ir(v.nGt,h,r),this.oGt=!0,this.aGt=null,this.uGt=null,this.lGt=-1,this.cGt=null,this.fGt=null,this.dGt=null,this.pGt=null,this.mGt=null,this.gGt=!1,this.yGt=null,this.MGt=i[8].map(t=>v.wGt.Wb(this,t)),this.SGt=[],this.TGt=new Map,this.bGt=new Map,this.xGt=new Set,this.vGt=new Map,this.CGt=v.ir(v.zct,this),this.GGt=null,this.IGt=0,this._Gt=!1,this.yGt=null,this.jCt=null,this.DGt=null,this.NGt=null,this.EGt=null,this.AGt=0,this.cwt=new Map,this.fwt=new Map,this._J=[],this.LGt=new Map,this.OGt=!0,this.nxt.ZR()&&(this.U8=v.ir(v.W8,this,i[12])),i[6]&&(this.jCt=v.ir(v.$vt),this.jCt.cCt(i[6])),i[7]){this.DGt=i[7].map(t=>v.ir(v.bCt,t)),this.NGt=new Map,this.EGt=new Map;for(const a of this.DGt)this.NGt.set(a.Jc().toLowerCase(),a),this.EGt.set(a.zV(),a)}this.KCt?(this.aGt=[],this.uGt=new Set,this.lGt=this.$c.RGt()):(this.cGt=[],this.fGt=new Set,this.dGt=[],this.pGt=[],this.mGt=[]);const n=this.nxt.Ewt();if(n<2&&(this.fxt=v.ir(e.PGt,this,i[15]),!(this.fxt instanceof v.rxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.kGt=null,this.FGt=null,this.z7=v.ir(v.Event.Rf),v.jR.Ybt(this,n);let o;if(o=2<=n?(o=e.PGt)||globalThis.KB:this.fxt.Qbt()){if(this.kGt=new o(n<2?this:null),n<2&&!(this.kGt instanceof ga))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.kGt instanceof globalThis.KB))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.kGt=new ga;if(v.jR.Hbt(n),i[13]){const u=i[13];if(u){const l=u[0],c=u[1],f=u[2];this.fxt.oxt(l,c,f)}}this.$c.jGt()&&!this.KCt&&!this.$Ct&&this.bbt||this.Wbt(),this.nxt.UR()&&(this.nxt.Jbt(this),this.zGt(i)),this.BGt=null}static Wb(t,s,i){return v.ir(v.dut,t,s,i)}er(){if(this.hGt.er(),this.hGt=null,this.jCt&&(this.jCt.er(),this.jCt=null),this.DGt){for(const t of this.DGt)t.er();v.Ln(this.DGt),this.NGt.clear(),this.EGt.clear()}this.BGt=null,this.CGt.er(),this.CGt=null,this.cwt.clear(),this.fwt.clear(),this.yGt=null,this.$c=null}UGt(i){for(let t=1,s=i.length;t<s;++t){const e=this.$c.aV(i[t]);this.aGt.push(e),this.uGt.add(e),e.cGt.push(this),e.fGt.add(this)}}WGt(t){this.gGt=!0,this.yGt=t}LF(){return this.gGt}f9(){return this.yGt}QGt(){let t=0;if(!this.KCt)for(const s of this.cGt)for(const i of s.JGt()){const e=i.Jc().toLowerCase();this.TGt.set(e,i),this.bGt.set(e,t),this.SGt.push(i),++t}for(const h of this.JGt()){const r=h.Jc().toLowerCase();this.TGt.set(r,h),this.bGt.set(r,t),this.SGt.push(h),++t}for(const n of this.SGt)this.xGt.add(n.fz().constructor);if(!this.KCt&&this.cGt.length){let t=this.$c.VGt(),s=(v.Rn(this.dGt,t,0),v.Rn(this.pGt,t,0),v.Rn(this.mGt,t,0),[]),i=0,e=0,h=0;for(const o of this.cGt){const a=o.dMt(),u=(this.dGt[a]=i,i+=o.YGt(),this.pGt[a]=e,e+=o.HGt(),this.mGt[a]=h,h+=o.qGt(),o.FP());if(u&&this.U8)for(const l of u.jP())s.push(l.ZGt(this.U8))}this.U8&&this.U8.XGt(s)}}zGt(t){const s=this.$c.KGt(),i=v.ir(v.Instance,{runtime:this.$c,SF:this,uid:s});i.$Gt(t[16],[]),this.$c.tIt(s,i),this._J.push(i)}ISt(){return this.fxt}sIt(){return this.$Ct}Rf(){return this.hGt}Wbt(){this.KCt||(this.fxt?this.fxt.Wbt():this.kGt.$B())}iIt(){return 0<this.AGt}async m9(t){this.KCt||(this.AGt++,1===this.AGt&&(this.fxt?await this.fxt.m9(t):await this.kGt.iU(this.$c.bR().eIt())))}T9(){if(!this.KCt){if(this.AGt--,this.AGt<0)throw new Error("released textures too many times");0===this.AGt&&(this.fxt?this.fxt.T9():this.kGt.eU(this.$c.bR().eIt()))}}M9(){if(this.KCt)throw new Error("not applicable to family");this.fxt?this.fxt.M9():this.kGt.hU()}async B9(t){this.KCt||(this.fxt?await this.fxt.B9(t):await this.kGt.rU(this.$c.bR().eIt()))}E4(){return this.$c}pP(){return this.nxt}hIt(){return this.ZCt}Jc(){return this.nr}y1t(){return this.Pyt}cO(){return this.Ug}zV(){return this.n8}AV(){return this.KCt}MV(){return this.XCt}QR(){return this.bbt}dMt(){return this.lGt}JGt(){return this.MGt}HGt(){return this.iGt}rIt(t){return t&&this.xGt.has(t)}YGt(){return this.tGt.length}nIt(){return this.tGt.map(t=>t.sid)}oIt(s){return this.tGt.findIndex(t=>t.sid===s)}Bst(s){return this.tGt.findIndex(t=>t.name===s)}aIt(){return this.tGt.map(t=>t.name)}uIt(){return this.tGt.map(t=>t.sGt)}Wst(t){if((t=Math.floor(t))<0||t>=this.tGt.length)throw new RangeError("invalid instance variable index");return this.tGt[t].type}Ust(t){if((t=Math.floor(t))<0||t>=this.tGt.length)throw new RangeError("invalid instance variable index");return this.tGt[t].name}qGt(){return this.eGt}lIt(){return this.SGt}mht(t){return this.TGt.get(t.toLowerCase())||null}Jst(t){const s=this.bGt.get(t.toLowerCase());return void 0===s?-1:s}FP(){return this.U8}ZR(){return this.nxt.ZR()}cIt(){return this.U8&&this.U8.fIt()}ndt(){return this.CGt}GP(){return this.CGt.GP()}Qz(){return this.jCt}cV(t){this.GGt=t}lV(){return this.GGt}fV(t){this.IGt=t}dIt(){return this.IGt}pIt(){return this.DGt}mIt(){return this.DGt.length}v1t(){return this.cGt}ASt(t){return this.fGt.has(t)}Pmt(){return this.aGt}LV(t){return this.uGt.has(t)}MMt(t){return this.pGt[t]}fMt(t){return this.dGt[t]}Syt(t){this.vGt.set(t.Cyt().toLowerCase(),t)}Tyt(t){return!!this.Eyt(t)}Eyt(t){const s=this.vGt.get(t.toLowerCase());return s&&s.Jl()?s:null}gIt(){return this.DGt}yIt(t){if(this.DGt)return this.NGt.get(t.toLowerCase())||null;throw new Error("no animations")}MIt(t){if(this.DGt)return this.EGt.get(t)||null;throw new Error("no animations")}wIt(t){if(this.yIt(t))throw new Error(`animation name '${t}' already exists`);const s=v.bCt.DCt(this.E4(),t);return this.DGt.push(s),this.NGt.set(s.Jc().toLowerCase(),s),this.EGt.set(s.zV(),s),s}SIt(t){const s=this.yIt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.DGt.length)throw new Error("cannot remove last animation");const i=this.DGt.indexOf(s);this.DGt.splice(i,1),this.NGt.delete(s.Jc().toLowerCase()),this.EGt.delete(s.zV()),s.er()}TIt(){if(this.DGt)return this.DGt[0];throw new Error("no animations")}bIt(){return this.TIt().LCt(0)}xIt(){if(this.DGt){const t=this.bIt().Qz();return[t.im(),t.pm()]}return this.jCt?[this.jCt.im(),this.jCt.pm()]:[100,100]}cP(){if(this.nxt.UR())return this._J[0];throw new Error("not a single-global plugin")}CP(){return this._J}*instances(){yield*this._J}*vP(){yield*this._J,yield*this.$c.RTt(this)}_P(){return this._J.length}wV(t){this._J.push(t)}vIt(){this.OGt=!0}tq(){if(this.OGt&&!this.KCt){let s=this._J,i=0;for(let t=s.length;i<t;++i)s[i].CIt(i);const t=this.$c.GIt();for(const e of t)e.TF()===this&&e.CIt(i++);this.OGt=!1}}IIt(t){const s=this._J;if(t<s.length)return s[t];t-=s.length;const i=this.$c.GIt();for(const e of i)if(e.TF()===this){if(0===t)return e;--t}return null}wTt(t){if(t&&t.LF()&&t.TF()!==this)for(const i of t.OF())if(i.TF()===this)return i;const s=this.GP().CP();return s.length?s[0]:null}xP(t){const s=this.GP().CP();return 0<s.length?s[t.Z9()%s.length]:null}*BTt(t,s){let i=this.GP().CP(),e=i.length,h=s.GP(),r=s.GP().CP(),n=r.length,o=t.Z9(),a=(!s.AV()&&h.$ct()||(o=r.indexOf(t)),Math.ceil(e/n)),u=e%n,l=0,c;c=0==u||o<u?(l=o*a,a):(l=u*a+(o-u)*(a-1),a-1);for(let t=l,s=l+c;t<s;++t)yield i[t]}Wwt(t){this.fxt?.Wwt(t)}Qgt(){if(this.gGt&&!this.KCt){this.tq();const t=this.GP(),s=t.aft(),i=t.$ct(),e=this.$c.o1t(),h=e&&e.HO()&&e.HO().yft();for(const r of this.yGt.X9())if(r!==this){r.tq();const n=r.GP();if(n.oft(i),!i){const o=n.aft();v.Ln(o);for(const a of s)o.push(r.IIt(a.Z9()));if(h){const u=t.uft(),l=n.uft();v.Ln(l);for(const c of u)l.push(r.IIt(c.Z9()))}}}}}Hwt(t,s){for(const i of this.f9().X9()){const e=i.GP();t?v.An(e.uft(),s):v.An(e.aft(),s)}}_It(){return this.rGt}DIt(t){this.oGt=!!t}NIt(){if(this.oGt&&this.bbt){for(const t of this._J)t.u4().EIt();for(const s of this.$c.GIt())s.TF()===this&&s.u4().EIt();this.oGt=!1}}AIt(s,t,i){if(t){const e=this.LGt.get(t);e&&(e.delete(s),0===e.size)&&this.LGt.delete(t)}if(i){let t=this.LGt.get(i);t||(t=new Set,this.LGt.set(i,t)),t.add(s)}}LIt(){if(this.AV()){const t=new Set;for(const s of this.aGt)for(const i of s.LIt())t.add(i);return t.values()}return this.LGt.keys()}kwt(){return this.cwt||(this.cwt=new Map),this.cwt}Fwt(){return this.fwt||(this.fwt=new Map),this.fwt}OIt(){return this.rIt(v.vat.solid)}RIt(){return this.rIt(v.vat.jumpthru)}PIt(){return this.rIt(v.vat.NoSave)}gV(){return this.rIt(v.vat.Persist)}e7(){const t={instances:this._J.map(t=>t.yT())};return this.cwt&&this.cwt.size&&(t.ex=v.Ao(this.cwt)),t}h7(t,e){this.cwt&&(this.cwt.clear(),this.cwt=null);const s=t.ex,h=(s&&(this.cwt=v.Lo(s)),this._J),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].MT(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.$c._F(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.QR()||(s=this.$c.z3().i9(t.w.l))){const n=this.$c.yV(this.GGt||this,s,!1,0,0,!0);n.MT(t),e&&e.add(n)}}this.BGt=r,this.vIt()}kIt(){return this.BGt}FIt(){this.BGt=null}jIt(){for(let t=0,s=this._J;t<s;++t)this._J[t].jIt()}aP(){return this.kGt}FO(){return this.z7}zIt(){return this.FGt}DP(t){this.FGt=t}Cq(t){const s=this.$c,i=s.Gq()&&!s.UO().OP();i&&ma.StartMeasuringScriptTime(),this.z7.dispatchEvent(t),i&&ma.AddScriptTime()}}}{const ya=self.Rs;ya.BIt=class extends ya.$h{constructor(t,s){super(),this.$c=t,this.UIt=s;for(const i of this.UIt)i.WGt(this)}er(){this.$c=null}E4(){return this.$c}c9(){return this.UIt}X9(){return this.UIt}iq(){return this.UIt.some(t=>t.QR())}}}{let w=self.Rs,h=self.C3Debugger,n=w.jR,o=[],a=0,S=new WeakMap,e=new WeakMap;w.Instance=class extends w.$h{constructor(t){if(w.jR!==n)throw new Error("invalid addon manager");super(),this.$c=t.runtime,this.WIt=t.SF,this.pst=null,this.QIt=null,this.JIt=null,this.VIt=0,this.YIt=t.uid,this.HIt=a++,this.Kwt=0,this.qIt=null;const s=w.Hn(t.tags),i=(0<s.length&&(this.qIt=new Set(s)),this.ZIt=o,this.XIt=o,this.WIt.lIt()),e=(0<i.length&&(this.XIt=i.map((t,s)=>w.ir(w.KIt,{runtime:this.$c,pz:t,yz:this,index:s}))),this.$It=this.WIt.LF()?[]:null,this.t_t=-1,this.hGt=null,this.pP());if(e.AS()&&(this.Kwt|=4),e.QR())if(this.pst=w.ir(w.s_t,this,t.Oj),t.i_t)this.pst.e_t(t.i_t);else{this.pst.h_t();const[h,r]=this.WIt.xIt();this.pst.WI(h,r),this.TF().cIt()&&this.pst.Lj().r_t()}t.n_t?this.o_t(t.n_t):this.a_t()}er(){if(this.JIt&&(this.JIt.GF(),this.JIt=null),0<this.XIt.length){for(const i of this.XIt)i.er();w.Ln(this.XIt)}this.QIt&&(this.QIt.er(),this.QIt=null);const t=S.get(this),s=(t&&(t.clear(),S.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.$It&&w.Ln(this.$It),this.hGt&&(this.hGt.er(),this.hGt=null),this.qIt&&this.qIt.clear(),this.qIt=null,this.$c=null,this.WIt=null,0<this.ZIt.length&&w.Ln(this.ZIt),this.pst&&(this.pst.er(),this.pst=null)}o_t(t){0<t.length&&(this.ZIt=[],w.kn(this.ZIt,t))}a_t(){const s=this.WIt.YGt();if(0!==s){this.ZIt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.ZIt.push(i[this.WIt.Wst(t)])}}$Gt(t,i){if(this.QIt)throw new Error("already got sdk instance");for(let t=0,s=this.XIt.length;t<s;++t){const e=this.XIt[t];e.$Gt(i?i[t]:null)}const s=this.pP().Ewt();if(s<2){if(this.QIt=w.ir(this.WIt.hIt(),this,t),!(this.QIt instanceof w.lxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.pP().QR()&&this.WIt.zIt()&&this.r4()}else{const h=this.pP().Qbt();this.u_t(h.Instance,t)}}rz(){return this.QIt??this.JIt}u4(){return this.pst}E4(){return this.$c}S3(){return this.t_t}FF(){const t=this.t_t;return-1===t?this.E4().S3():t}T3(t){((t=+t)<0||!isFinite(t))&&(t=0),this.t_t=t,this.TF().cIt()&&this.$c.l_t(this,!0)}zF(){this.t_t=-1,this.TF().cIt()&&this.$c.l_t(this,!1)}VH(){return this.$c.c_t(this)}Rf(){return this.hGt||(this.hGt=w.ir(w.Event.Rf)),this.hGt}VT(t){this.QIt?this.QIt.VT(t):this.JIt.fU(this.$c.bR().eIt())}Wbt(t){this.QIt.Wbt(t)}f_t(){this.Kwt|=2}d_t(){return 0!=(2&this.Kwt)}p_t(){this.Kwt|=1}jU(){return 0!=(1&this.Kwt)}AS(){return 0!=(4&this.Kwt)||this.QIt.AS()}m_t(){this.Kwt|=32}kH(){return 0!=(32&this.Kwt)}g_t(){return 0!=(8&this.Kwt)}y_t(t){t?this.Kwt|=8:this.Kwt&=-9}M_t(){return 0!=(16&this.Kwt)}w_t(t){t?this.Kwt|=16:this.Kwt&=-17}S_t(){return 0!=(64&this.Kwt)}T_t(t){t?this.Kwt|=64:this.Kwt&=-65}b_t(t,s){t<<=16,s?this.Kwt|=t:this.Kwt&=~t}x_t(t){return 0!=(this.Kwt&t<<16)}Vxt(){return this.QIt.Vxt()}Yxt(){return this.QIt.Yxt()}Hxt(){return this.QIt.Hxt()}qxt(){return this.QIt.qxt()}Xxt(){return this.QIt.Xxt()}USt(t){return this.QIt.USt(t)}TF(){return this.WIt}RH(){return this.QIt.RH()}PTt(t){return t.AV()?t.LV(this.TF()):this.TF()===t}v_t(h,t,s){const i=(t,s)=>{const i=s||t.TF(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.LF())for(const e of this.OF())i(e);if(s)for(const r of this.y5())i(r)}C_t(){if(!this.pP().sP())throw new Error("object does not support scene graph")}b5(){return null!==this.u5()}u5(){const t=this.u4();if(!t)return null;const s=t.u5();return s?s.OB():null}c5(){const t=this.u4();if(!t)return null;const s=t.c5();return s?s.OB():null}*f5(){const t=this.u4();if(t)for(const s of t.f5())yield s.OB()}G_t(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}o7(){const t=this.u4();return!!t&&t.o7()}I_t(t){const s=this.u4();if(!s)return[];const i=t.Jc();return s.lq().map(t=>t.OB()).filter(t=>t.TF().Jc()===i)}lq(){const t=this.u4();return t?t.lq().map(t=>t.OB()):[]}*children(){const t=this.u4();if(t)for(const s of t.children())yield s.OB()}*y5(){const t=this.u4();if(t)for(const s of t.y5())yield s.OB()}p5(){const t=this.u4();return t?t.p5():0}__t(){return[...this.f5()].length}zTt(){const t=this.u4();return t?t.zTt():0}g5(t){const s=this.u4();if(!s)return null;const i=s.g5(t);return i?i.OB():null}D_t(){const t=this.u4();if(!t)return NaN;const s=t.u5();return s?s.N_t(t):NaN}E_t(t){for(const s of this.u4().lq())if(s.OB().RF()===t)return!0;return!1}w5(t,s){this.C_t(),t.C_t(),this.u4().w5(t.u4(),s||{})}S5(t){const s=this.u4();s&&s.S5(t.u4())}B5(){const t=this.u4();return!!t&&t.B5()}F9(){const t=this.u4();if(t){const s=t.A_t();if(s)for(const i of s){const e=this.$c.h4(i[2]);if(e){const h=i[3];this.w5(e,{v5:!!(h>>0&1),G5:!!(h>>1&1),_5:!!(h>>2&1),N5:!!(h>>3&1),A5:!!(h>>4&1),z5:!!(h>>5&1),O5:!!(h>>6&1),P5:!!(h>>7&1),F5:!!(h>>8&1)})}}}}j9(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.w5(h,{v5:!!(r>>0&1),G5:!!(r>>1&1),_5:!!(r>>2&1),N5:!!(r>>3&1),A5:!!(r>>4&1),z5:!!(r>>5&1),O5:!!(r>>6&1),P5:!!(r>>7&1),F5:!!(r>>8&1)})}}}kF(){const t=this.$c.L_t();return t?t.gut(this):""}LF(){return null!==this.$It}K9(t){this.$It.push(t)}EF(){return this.$It}O_t(t){return!!this.R_t(t)}R_t(t){const s=this.OF();if(null===s||0===s.length)return!1;for(const i of s)if(i.TF()===t)return i;return null}OF(){return this.$It}Hpt(){for(const t of this.OF())t.TF().GP().lft(t)}Qwt(){for(const t of this.OF())t.TF().GP().rft(t)}Jwt(t){for(const s of this.OF())s.TF().GP().aft()[t]=s}Ywt(){for(const t of this.OF())t.TF().GP().nft(t)}Vwt(t){for(const s of this.OF())s.TF().GP().uft()[t]=s}pP(){return this.WIt.pP()}CIt(t){this.VIt=t}Z9(){return this.WIt.tq(),this.VIt}RF(){return this.YIt}P_t(){return this.HIt}k_t(t){t?this.QF(new Set(t)):this.qIt=null}QF(t){if(0===t.size)this.qIt=null;else{this.qIt?this.qIt.clear():this.qIt=new Set;for(const s of t)this.qIt.add(s)}}UF(){return this.qIt??new Set}a2t(){return Array.from(this.UF()).join(" ")}c2t(t){t=Math.floor(t);for(const s of this.UF()){if(0===t)return s;--t}return""}pht(){return this.XIt}F_t(t){if(t)for(const s of this.XIt)if(s.fz()instanceof t)return s;return null}Cat(t){if(!t)return null;const s=this.F_t(t);return s?s.rz():null}dht(i){const e=this.XIt;for(let t=0,s=e.length;t<s;++t)if(e[t].gz().zV()===i)return t;return-1}j_t(){return this.ZIt}aIt(){return this.WIt.aIt()}z_t(){return this.ZIt.length}Crt(t){const s=this.ZIt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}lMt(t){return this.ZIt[t]}B_t(t){const s=this.ZIt[t];return 0===this.WIt.Wst(t)?!!s:s}Grt(t,s){const i=this.ZIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.WIt.Wst(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}ynt(t,s){if(0!==s){const i=this.ZIt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}kwt(){let t=S.get(this);return t||(t=new Map,S.set(this,t)),t}Fwt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}U_t(t){const s=this.TF();if(s.FO().zf(t))return!0;for(const i of s.v1t())if(i.FO().zf(t))return!0;return!!this.$c.FO().zf(t)}LP(){const t=new Set,s=(t.add(this),this.u4());if(s&&s.o7())for(const i of this.y5())if(t.add(i),i.LF())for(const e of i.OF())t.add(e);if(this.LF())for(const h of this.OF())t.add(h);for(const r of t.values())r.z9()}W_t(){this.WIt.zIt()&&this.r4();for(const t of this.XIt)t.Avt()}Q_t(){this.W_t()}z9(){if(this.W_t(),this.U_t("instancecreate")){const t=this.TF(),s=new w.Event("instancecreate");s.yz=this.r4(),t.Cq(s);for(const i of t.v1t())i.Cq(s);this.$c.Cq(s)}this.$c.nj(this.pP().Odt().J9.p2t,this,null)}J_t(){this.$c.nj(this.pP().Odt().J9.m2t,this,null)}V_t(t){if(this.JIt){const s=new w.Event("destroy");s.Y_t=t,this.Cq(s)}if(this.U_t("instancedestroy")){const i=this.TF(),e=new w.Event("instancedestroy");e.yz=this.r4(),e.Y_t=t,i.Cq(e);for(const h of i.v1t())h.Cq(e);this.$c.Cq(e)}}H_t(){return this.QIt?this.QIt.Lxt():this.JIt.wj()}yT(t="full",s=null){const i={},e=("full"===t?i.uid=this.RF():i.c3=!0,this.UF());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=S.get(this);if(r&&r.size&&(i.ex=w.Ao(r)),-1!==this.S3()&&(i.mts=this.S3()),0<this.WIt.YGt()){const n={},o=this.WIt.nIt();for(let t=0,s=this.ZIt.length;t<s;++t)n[o[t].toString()]=this.ZIt[t];i.ivs=n}if(this.XIt.length){const a={};for(const u of this.XIt){const l=u.yT(t);l&&(a[u.gz().zV().toString()]=l)}i.behs=a}}this.pst&&(i.w=this.pst.e7(t,s));const h=this.QIt?this.QIt.yT():this.JIt.Sj();return h&&(i.data=h),i}TZ(t="full",s){this.pst&&this.pst.TZ(t)}xZ(t,s="full",i=null){this.pst&&this.pst.xZ(t,s,i)}q_t(t,s="full",i=null){this.pst&&this.pst.q_t(t,s,i)}jIt(){this.pP().QR()&&this.pst.jIt()}MT(s,t="full",i){if("full"===t)this.YIt=s.uid;else if(!s.c3)return;if(this.k_t(s.tags),"visual-state"!==t){let t=S.get(this);t&&(t.clear(),S.delete(this));const h=s.ex,r=(h&&(t=w.Lo(h),S.set(this,t)),this.t_t=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),u=this.WIt.oIt(a);if(!(u<0||u>=this.ZIt.length)){let t=o;null===t&&(t=NaN),this.ZIt[u]=t}}}if(this.pP().QR()){const l=s.w;if(l){const c=l.l;if(this.pst.l4().zV()!==c){const f=this.pst.l4(),d=f.Q3().i9(c);d?(this.pst.m4(d),f.bV(this,!0),d.wV(this,!0),d.g4(this),this.pst.Rj()):"full"===t&&this.$c._F(this)}this.pst.h7(l,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),M=this.dht(y);M<0||M>=this.XIt.length||this.XIt[M].MT(g,t)}}const e=s.data;e&&(this.QIt?this.QIt.MT(e,t):this.JIt.Tj(e))}r4(){return this.JIt||this.u_t()}kxt(){return!!this.JIt}u_t(t,s){const i=this.pst?t?self.nU:self.K5:t?self.HF:self.wF,e=t||this.QIt.Qbt(),h=this.WIt.zIt(),r=h||e||i,n=this.pP().Ewt();if(w.jR.Ybt(this,n),w.jR.Hvt(s),this.JIt=new r,w.jR.qvt(),w.jR.Hbt(n),e&&!(this.JIt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.JIt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.JIt}bF(t){if(0!==this.ZIt.length){const i={},e=this.WIt.uIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.B_t.bind(this,t),set:w.Instance.prototype.Grt.bind(this,t)};const s=Object.create(Object.prototype,i);t.Z_t={value:s,writable:!1}}}xF(t){const s=this.XIt;if(0!==s.length){const i={};for(const h of s)i[h.gz().y1t()]={value:h.mxt(),writable:!1};const e=Object.create(Object.prototype,i);t.Opt={value:e,writable:!1}}}Cq(t){if(this.kxt()){const s=this.r4(),i=(t.yz=s,this.$c),e=i.Gq()&&!i.UO().OP();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ma=self.Rs;Ma.fq=class extends Ma.$h{constructor(e){super(),this.CT=e,this.tmt=null,this.X_t=[],this.K_t=e.im(),this.$_t=e.pm(),this.tDt=1,this.sDt=1,this.iDt=0,this.eDt=1,this.hDt=e.wN(),this.rDt=null,this.nDt=null,this.oDt=NaN,this.aDt=!1,this.l7=NaN,this.c7=NaN,this.uDt=t=>{if(t.yz===this.tmt.OB()){const s=e.E4(),i=(s.Rf().removeEventListener("instancecreate",this.uDt),this.tmt.OB().rz());this.aDt=!!i.hit(),this.l7=this.aDt?i.eit():NaN,this.c7=this.aDt?i.nit():NaN}}}er(){this.tmt=null,this.rDt=null,this.nDt=null,this.oDt=NaN,this.aDt=!1,this.l7=NaN,this.c7=NaN,Ma.Ln(this.X_t)}lDt(t){if(this.eDt=this.CT.wN(),this.hDt=this.eDt,this.tmt=t,this.iDt=t?t.VP():0,this.tmt){const s=this.CT,i=s.E4(),e=this.tmt.OB().pP().Ewt();if(e<2){const h=this.tmt.OB().rz();h?(this.aDt=!!h.hit(),this.l7=this.aDt?h.eit():NaN,this.c7=this.aDt?h.nit():NaN):this.tmt.OB().jU()||i.Rf().addEventListener("instancecreate",this.uDt)}else this.aDt=!1,this.l7=NaN,this.c7=NaN}else this.aDt=!1,this.l7=NaN,this.c7=NaN}u5(){return this.tmt}o7(){return 0<this.X_t.length}lq(){return this.X_t}cDt(){this.o7()&&1!==this.X_t.length&&(this.nDt?this.X_t.sort((t,s)=>{const i=this.nDt.get(t.OB()),e=this.nDt.get(s.OB());return Ma.le(i)&&Ma.le(e)?i-e:0}):this.X_t.sort((t,s)=>{const i=t.Prt().fDt(),e=s.Prt().fDt();return Ma.le(i)&&Ma.le(e)?i-e:0}))}fDt(){return this.oDt}krt(){return this.tDt}dDt(t){this.tDt=t}jrt(){return this.sDt}pDt(t){this.sDt=t}Yrt(){return this.hDt}lTt(){return this.eDt}mDt(t){this.eDt=t}Rrt(){return 0===this.K_t?Number.EPSILON:this.K_t}Frt(){return 0===this.$_t?Number.EPSILON:this.$_t}gDt(){if(this.CT.D5()){let t=this.tmt,s=t.im(),i=t.Prt().Rrt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.aDt?1+s/this.l7:s/i}return 1}yDt(){if(this.CT.E5()){let t=this.tmt,s=t.pm(),i=t.Prt().Frt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.aDt?1+s/this.c7:s/i}return 1}MDt(){return 0}wDt(){return{sw:this.K_t,sh:this.$_t,sx:this.tDt,sy:this.sDt,psa:this.iDt,oo:this.eDt,so:this.hDt,pi:this.CT.OB().D_t()}}e7(t,s=null){const i=this.wDt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.SDt(t),c:this.TDt(t)})}bDt(t){let s="";return t.C5()&&(s+="x"),t.I5()&&(s+="y"),t.D5()&&(s+="w"),t.E5()&&(s+="h"),t.L5()&&(s+="a"),t.R5()&&(s+="z"),t.B5()&&(s+="d"),t.k5()&&(s+="o"),t.j5()&&(s+="v"),s}SDt(t){return this.tmt&&this.tmt.OB()&&!this.tmt.OB().jU()?this.xDt(this.tmt,this.CT,t):null}TDt(s){return this.X_t.map(t=>this.xDt(t,t,s)).filter(t=>t)}xDt(t,s,i){const e=t.OB();if(e&&e.jU())return null;const h={};return h.uid=e.RF(),h.f=this.bDt(s),h.offsets=s.vDt(),h.data=Ma.fq.CDt(e),h.oci=e.TF().cO(),"state"===i?(h.inst=e.yT("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.TF().CP().indexOf(e),h.inst=null),h}h7(t){this.K_t=t.sw,this.$_t=t.sh,this.tDt=t.sx,this.sDt=t.sy,this.iDt=t.psa,this.eDt=t.oo,this.hDt=t.so,this.oDt=Ma.le(t.pi)?t.pi:NaN}GDt(t,s){if(!t&&!s&&this.rDt)for(const i of this.rDt)i.jU()||i.b5()||i.E4()._F(i);this.rDt=t,this.nDt=s}xZ(t,s){const i=this.CT,e=i.E4(),h=new Set;if(t.p&&!this.tmt){const o=t.p.uid,a=e.h4(o);if(s?.v2t,a){const u=a.u4();if(a.G_t(i.OB()))this.tmt=u;else{a.E_t(i.OB().RF())?e._F(i.OB()):a.w5(i.OB(),this.IDt(t.p.f)),h.has(i)||(i._Dt(t.p.offsets),this.DDt(a,t.p,s)),h.add(i);const l=a.u4();l.Prt().cDt()}}else if(Ma.le(t.p.oci)){const c=e.aV(t.p.oci),f=(e.Zyt(),e.NP(c,i.l4(),0,0,!0));if(s?.v2t,f){const d=this.NDt(t.p,e),p=(d&&f.MT(d),f.u4()),m=(p.l4().EP(f),f.w5(i.OB(),this.IDt(t.p.f)),f.u4());m.Prt().cDt()}}}const r=[];for(const g of t.c){const y=g.uid,M=e.h4(y);M&&r.push(M)}let n=0;for(const w of t.c){const S=w.uid,T=e.h4(S);if(s?.v2t,T){if(this.rDt){if(this.rDt.includes(T)){const C=T;if(C.TF()!==T.TF()){n++;continue}if(C.jU()){n++;continue}const G=t.c[n];if(!s?.v2t&&this.EDt(C,r,i)){this.ADt(n,G,i,h,s),n++;continue}if(C.b5()&&C.u5()!==i.OB()){const I=this.LDt(G,s);this.ODt(I,G,h,s),n++;continue}this.ODt(C.u4(),G,h,s,!0),n++;continue}if(this.rDt[n]){const _=this.rDt[n];if(_.TF()!==T.TF()){n++;continue}if(_.jU()){n++;continue}const D=t.c[n];if(!s?.v2t&&this.EDt(_,r,i)){this.ADt(n,D,i,h,s),n++;continue}if(_.b5()&&_.u5()!==i.OB()){const N=this.LDt(D,s);this.ODt(N,D,h,s),n++;continue}this.ODt(_.u4(),D,h,s,!0),n++;continue}}const b=T.TF(),x=this.RDt(r,b),v=i.OB().I_t(b).length;if(x===v){const E=i.OB().g5(n);if(E){const A=E.u4();A&&(h.has(A)||(A._Dt(w.offsets),this.DDt(E,w,s)),h.add(A))}n++;continue}if(T.b5()&&T.u5()!==i.OB()){const L=this.LDt(w,s);this.ODt(L,w,h,s),n++;continue}this.ODt(T.u4(),w,h,s)}else if(this.rDt&&this.rDt[n]){const O=this.rDt[n],P=e.aV(this.PDt(w));if(O.TF()!==P){n++;continue}if(O.jU()){n++;continue}const R=t.c[n];if(!s?.v2t&&this.EDt(O,r,i)){this.ADt(n,R,i,h,s),n++;continue}if(O.b5()&&O.u5()!==i.OB()){const k=this.LDt(R,s);this.ODt(k,R,h,s),n++;continue}this.ODt(O.u4(),R,h,s)}else{const F=this.LDt(w,s);this.ODt(F,w,h,s)}n++}}EDt(t,s,i){const e=t.TF(),h=this.RDt(s,e),r=i.OB().I_t(e).length;return h===r}ADt(t,s,i,e,h){const r=i.OB().g5(t,s);if(r){const n=r.u4();n&&(e.has(n)||(n._Dt(s.offsets),this.DDt(r,s,h)),e.add(n))}}IDt(t){const s={};return s.v5=t.includes("x"),s.G5=t.includes("y"),s._5=t.includes("w"),s.N5=t.includes("h"),s.A5=t.includes("a"),s.O5=t.includes("z"),s.z5=t.includes("d"),s.P5=t.includes("o"),s.F5=t.includes("v"),s}PDt(t){return Ma.le(t.oci)?t.oci:t[1]}LDt(e,h){if(Ma.le(e.oci)){let t=this.CT,s=t.E4(),i;if(e.data)i=s.yV(e.data,t.l4(),!1,0,0,!1,!0);else{const r=s.aV(e.oci);i=s.NP(r,t.l4(),0,0,!0)}if(h?.v2t,i){const n=this.NDt(e,s),o=(n&&i.MT(n),i.u4());return o.l4().EP(i,!0),o}}}ODt(t,s,i,e,h=!0){const r=this.CT,n=r.w5(t,this.IDt(s.f));n&&h&&(i.has(t)||(t._Dt(s.offsets),this.DDt(t.OB(),s,e)),i.add(t)),this.cDt()}DDt(t,s,i){let e=this.NDt(s,this.CT.E4());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.MT(e))}RDt(t,s){return t.filter(t=>t.TF().Jc()===s.Jc()).length}NDt(t,s){if(Ma.le(t.instIndex)){const i=s.aV(t.oci),e=i.kIt();return e?e[t.instIndex]:null}return Ma.Se(t.inst)?JSON.parse(t.inst):t.inst||void 0}static CDt(t){let s=t.u4().l4().dV(t.RF());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.lq()]){const h=e.u4();i.push([h.Q3().zV(),h.l4().cO(),e.RF(),Ma.fq.cq(h),e.TF().LF()?1:0,h.c4(),Ma.fq.CDt(e)])}return Ma.Pe(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ma.fq.kDt(),s[0][14][1]=i,s[0][14][2]=t.u4().c4()),s}static cq(t){let s=0;return(s|=Number(t.j5())<<8)|Number(t.k5())<<7|Number(t.R5())<<6|Number(t.B5())<<5|Number(t.L5())<<4|Number(t.E5())<<3|Number(t.D5())<<2|Number(t.I5())<<1|Number(t.C5())<<0}static kDt(t){let s=0;return s,511}}}{let d=self.Rs,t=self.Ms,r=(t.Gs,d.ir(d.Rect)),n=d.ir(d.Yu),s=d.ir(d.Event,"bboxchange",!1),f=d.ir(d.ko,0,0,0,0),l=d.ir(d.Il),i=d.ir(d.ko,1,1,1,1),o=d.ir(d.Rect,0,0,-1,-1),h=d.ir(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.s_t=class extends d.$h{constructor(t,s){super(),this.Ti=t,this.Bct=t.TF(),this.$c=t.E4(),this.FDt=s,this.Bct.AIt(this,null,s),this.jDt=-1,this.zDt=-1,this.Kwt=196635,this.Bct.pP().HR()&&(this.Kwt|=128),this.Ha=NaN,this.qa=NaN,this.JS=NaN,this.BDt=NaN,this.UDt=NaN,this.eb=NaN,this.Bo=NaN,this.WDt=NaN,this.QDt=NaN,this.JDt=NaN,this.VDt=NaN,this.YDt=d.ir(d.Rect),this.HDt=d.ir(d.Yu),this.qDt=h,this.ZDt=o,this.XDt=null,this.KDt=null,this.$Dt=null,this.QS=i,this.tNt=i,this.sNt=null,this.iNt=null,this.Ti.TF().cIt()&&(this.iNt=d.ir(d.eNt,this.Ti,this)),this.hNt=null,this.rDt=null,this.nDt=null,this.rNt=-1,this.nNt=null}p_t(){this.Kwt|=256}er(){if(this.Bct.AIt(this,this.FDt,null),this.sNt&&(this.$c.IS().HM(this.sNt),this.sNt=null),this.XDt=null,this.KDt&&(this.KDt.oNt.er(),this.KDt=null),this.$Dt&&(this.$Dt.clear(),this.$Dt=null),this.J5(),this.iNt&&this.iNt.er(),this.b5()&&this.u5().S5(this),this.o7()){const t=[...this.lq()];for(const s of t)this.S5(s)}this.aNt(),this.uNt(),g.delete(this),a.delete(this),this.Ti=null,this.Bct=null,this.$c=null,this.FDt=null}e_t(t){if(m=!1,this.Pj(t[0],t[1]),this.lT(t[2]),this.WI(t[3],t[4]),this.eb=0,this.HR()?this.JP(t[6]):this.Bo=0,f.Pa(t[7]),this.lNt(f),this.qrt(t[8]),this.Xrt(t[9]),this.YS(t[10]),this.iNt&&this.iNt.cNt(t[12]),t[14]&&g.set(this,{fNt:t[14][1],dNt:t[14][2]}),t[15]){const s=t[15],e=(this.W5(s[0],s[1]),this.Z5()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.QT(t,i);o.rT(n[0]),o.aT(n[1]),o.lT(n[2]),o.fT(n[3]),o.pT(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],u=!!a,l=!u,c=this.$c.L_t();u&&c&&c.mut(this.OB(),a),l&&c&&c.mut(this.OB(),i)}m=!0,this.pNt()}h_t(){this.Ha=0,this.qa=0,this.JS=0,this.BDt=0,this.UDt=0,this.eb=0,this.Bo=0,this.WDt=0,this.QDt=1,this.JDt=0,this.VDt=0,this.pNt()}E4(){return this.$c}TF(){return this.Bct}OB(){return this.Ti}mNt(){return this.L5()?this.gNt(this.u5().yNt()-this.hNt.MDt()):0}rT(t){if(t=+t,this.C5()){const s=this.hNt,i=t-this.hT(),e=-this.mNt();0==e?this.Ha+=i/s.gDt():(this.Ha+=Math.cos(e)*i/s.gDt(),this.I5()&&(this.qa+=Math.sin(e)*i/s.yDt()))}else this.Ha=t}Ert(t,s=!1){t=+t,!s&&this.C5()?this.rT(this.hT()+t):this.Ha+=t}hT(){if(this.C5()){let t=this.Ha,s=this.hNt,i=this.u5(),e=this.mNt();return 0===e?t*=s.gDt():(t=t*s.gDt()*Math.cos(e),this.I5()&&(t-=this.qa*s.yDt()*Math.sin(e))),i.hT()+t}return this.Ha}aT(t){if(t=+t,this.I5()){const s=this.hNt,i=t-this.oT(),e=-this.mNt();0==e?this.qa+=i/s.yDt():(this.C5()&&(this.Ha-=Math.sin(e)*i/s.gDt()),this.qa+=Math.cos(e)*i/s.yDt())}else this.qa=t}Art(t,s=!1){t=+t,!s&&this.I5()?this.aT(this.oT()+t):this.qa+=t}oT(){if(this.I5()){let t=this.qa,s=this.hNt,i=this.u5(),e=this.mNt();return 0===e?t*=s.yDt():(t=t*s.yDt()*Math.cos(e),this.C5()&&(t+=this.Ha*s.gDt()*Math.sin(e))),i.oT()+t}return this.qa}Pj(t,s){if(t=+t,s=+s,this.MNt()){const i=this.C5(),e=this.I5(),h=this.hNt,r=t-this.hT(),n=s-this.oT(),o=-this.mNt();if(0==o)i?this.Ha+=r/h.gDt():this.Ha=t,e?this.qa+=n/h.yDt():this.qa=s;else{const a=Math.sin(o),u=Math.cos(o);i?this.Ha+=e?(u*r-a*n)/h.gDt():u*r/h.gDt():this.Ha=t,e?this.qa+=i?(a*r+u*n)/h.yDt():u*n/h.yDt():this.qa=s}}else this.Ha=t,this.qa=s}wNt(){return[this.hT(),this.oT()]}jj(t,s){t=+t,s=+s,this.MNt()?this.Pj(this.hT()+t,this.oT()+s):(this.Ha+=t,this.qa+=s)}zSt(t,s){return this.hT()===t&&this.oT()===s}lT(t){if(t=+t,this.R5()&&(t-=this.u5().uT()),this.JS!==t){this.JS=t,this.SNt();const s=this.l4();0!==this.JS&&s.CV(),s.g4(this)}}SNt(){if(this.pNt(),this.o7()){const i=this.lq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.R5()&&e.SNt()}}}Krt(t){this.lT(this.uT()+t)}uT(){return this.R5()?this.u5().uT()+this.JS:this.JS}Bj(){return this.l4().uT()+this.uT()}hit(){const t=this.OB().pP().Ewt();return t<2&&this.OB().rz().hit()}lm(t){if(t=+t,this.D5()){const s=this.im();0===s?this.BDt=Number.EPSILON:this.BDt*=t/s}else this.BDt=t;this.TNt()}Fm(t,s){t=+t,!s&&this.D5()?this.lm(this.im()+t):this.BDt+=t,this.TNt()}im(){if(this.D5()){const t=this.u5(),s=t.im(),i=t.Prt().Rrt();return i===Number.EPSILON?(this.Prt().Rrt()+s)*this.BDt:s*this.BDt}return this.BDt}hm(t){if(t=+t,this.E5()){const s=this.pm();0===s?this.UDt=Number.EPSILON:this.UDt*=t/s}else this.UDt=t;this.TNt()}zrt(t,s){t=+t,!s&&this.E5()?this.hm(this.pm()+t):this.UDt+=t,this.TNt()}pm(){if(this.E5()){const t=this.u5(),s=t.pm(),i=t.Prt().Frt();return i===Number.EPSILON?(this.Prt().Frt()+s)*this.UDt:s*this.UDt}return this.UDt}WI(t,s){if(t=+t,s=+s,this.D5()){const i=this.im();0===i?this.BDt=Number.EPSILON:this.BDt*=t/i}else this.BDt=t;if(this.E5()){const e=this.pm();0===e?this.UDt=Number.EPSILON:this.UDt*=s/e}else this.UDt=s;this.TNt()}Kl(){return[this.im(),this.pm()]}PH(){return this.eb}bNt(t){if(t<0)throw new RangeError("invalid depth");this.eb=t}xNt(){if(this.b5()){const t=this.hNt;return Math.min(t.gDt(),t.yDt())}return 1}HR(){return 0!=(128&this.Kwt)}JP(t){t=+t,this.HR()&&(this.L5()&&(t-=this.u5().VP()),t=d.cr(t),this.Bo!==t)&&(this.Bo=t,this.TNt())}Brt(t){0!=(t=+t)&&this.HR()&&(this.Bo=d.cr(this.Bo+t),this.TNt())}TNt(){if(this.Kwt|=1<<18,this.o7()){const i=this.lq();for(let t=0,s=i.length;t<s;t++)i[t].TNt()}}VP(){return this.L5()&&this.HR()?this.gNt(d.cr(this.u5().yNt()+this.Bo)):this.Bo}yNt(){return this.L5()&&this.HR()?d.cr(this.u5().yNt()+this.Bo):this.Bo}gNt(t){return this.D5()&&this.c5().im()<0&&(t=d.cr(d.Gr(t,this.c5().VP()+Math.PI))),this.E5()&&this.c5().pm()<0?d.Gr(t,this.c5().VP()):t}vNt(){const t=this.u5();return!!(this.D5()&&t.im()<0)||!!(this.E5()&&t.pm()<0)}CNt(){const t=this.u5();return!!(this.D5()&&t.im()<0&&this.E5()&&t.pm()<0)}GNt(){const t=this.Kwt;if(0!=(t&1<<18)){const s=this.VP();this.WDt=Math.sin(s),this.QDt=Math.cos(s),this.Kwt=-262145&t}}JSt(){return this.GNt(),this.WDt}QSt(){return this.GNt(),this.QDt}qrt(t){this.JDt=+t}Hrt(t){this.JDt+=+t}Yz(){return this.JDt}Xrt(t){this.VDt=+t}Zrt(t){this.VDt+=+t}Zz(){return this.VDt}lNt(t){this.QS.equals(t)||(this.QS===i?(this.QS=d.ir(d.ko,t),this.tNt=d.ir(d.ko,t),this.tNt.fa()):t.aa(1,1,1,1)?(this.QS=i,this.tNt=i):(this.QS.set(t),this.tNt.set(t),this.tNt.fa()),this.pNt())}TN(t){if(t=d.lr(+t,0,1),this.k5()){if(this.Prt().lTt()===t)return;this.Prt().mDt(t),t=this.wN()}else if(this.QS.a===t)return;this.INt(t)}_Nt(){if(this.o7()){const i=this.lq();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.INt(e.wN())}}}INt(t){f.Zo(this.QS),f.a=t,this.lNt(f),this._Nt()}Qrt(t){this.k5()?this.TN(this.Prt().lTt()+t):this.TN(this.wN()+t)}wN(){return this.k5()?this.u5().wN()*this.Prt().lTt():this.QS.a}Zj(t){this.QS.na(t)||(f.Zo(t),f.a=this.wN(),this.lNt(f))}xrt(t,s,i){f.Wo(t,s,i),this.Zj(f)}DNt(t,s,i){0===t&&0===s&&0===i||(f.Zo(this.QS),f.r+=t,f.ka+=s,f.b+=i,this.Zj(f))}qj(){return this.QS}J8(){return this.tNt}B5(){return 0!=(512&this.Kwt)}NNt(t){this.ENt(512,t)}C5(){return 0!=(1024&this.Kwt)}ANt(t){this.ENt(1024,t)}I5(){return 0!=(2048&this.Kwt)}MNt(){return 0!=(3072&this.Kwt)}LNt(t){this.ENt(2048,t)}D5(){return 0!=(4096&this.Kwt)}ONt(t){this.ENt(4096,t)}E5(){return 0!=(8192&this.Kwt)}RNt(t){this.ENt(8192,t)}L5(){return 0!=(16384&this.Kwt)}PNt(t){this.ENt(16384,t)}R5(){return 0!=(32768&this.Kwt)}kNt(t){this.ENt(32768,t)}k5(){return 0!=(this.Kwt&1<<22)}FNt(t){this.ENt(1<<22,t)}j5(){return 0!=(this.Kwt&1<<23)}jNt(t){this.ENt(1<<23,t)}zNt(){this.Kwt&=-12647937}w5(t,s){if(t===this)return!1;if(t.b5())return!1;if(this.BNt(t))return!1;if(this.UNt(t))return!1;const i=t.hT(),e=t.oT(),h=t.im(),r=t.pm(),n=t.VP(),o=t.uT(),a=t.wN(),u=(t.WNt(this),t.ANt(s.v5),t.LNt(s.G5),t.ONt(s._5),t.RNt(s.N5),t.PNt(s.A5),t.kNt(s.O5),t.FNt(s.P5),t.jNt(s.F5),t.NNt(s.z5),i-this.hT()),l=e-this.oT(),c=-this.VP(),f=Math.cos(c),d=Math.sin(c);if(s.v5&&(s.A5?t.Ha=u*f-l*d:t.Ha=u,s._5)){const p=this.im()/this.hNt.Rrt();0!=p&&(t.Ha/=p)}if(s.G5&&(s.A5?t.qa=u*d+l*f:t.qa=l,s.N5)){const m=this.pm()/this.hNt.Frt();0!=m&&(t.qa/=m)}if(s._5){const g=this.im();0===g||g===Number.EPSILON?(t.BDt=1,t.hNt.dDt(1)):(t.BDt=h/this.im(),t.hNt.dDt(t.BDt))}if(s.N5){const y=this.pm();0===y||y===Number.EPSILON?(t.UDt=1,t.hNt.pDt(1)):(t.UDt=r/this.pm(),t.hNt.pDt(t.UDt))}return s.A5&&(t.Bo=n-this.VP()),s.O5&&(t.JS=o-this.uT()),s.P5&&t.hNt.mDt(a),s.F5&&t.Nk(this.Ak()),this.QNt(t),this.Rj(),this._Nt(),!0}S5(t){if(t.u5()===this){const s=t.hT(),i=t.oT(),e=t.im(),h=t.pm(),r=t.VP(),n=t.uT(),o=t.wN();t.WNt(null),t.zNt(),t.Pj(s,i),t.WI(e,h),t.JP(r),t.lT(n),t.TN(o),this.JNt(t),this.Rj()}}VNt(){return this.rNt}YNt(){this.HNt();const t=[...this.children()];for(const i of t)this.S5(i);const s=this.u5();s&&s.S5(this),this.zNt()}HNt(){if(this.qNt(),!this.rDt){const s=[...this.children()];s.length&&(this.rDt=[],this.nDt=new WeakMap);let t=0;for(const i of s){const e=i.OB();this.rDt.push(e),this.nDt.set(e,t),t++}}const t=this.u5();t&&t.HNt()}qNt(){if(-1===this.rNt){const t=[...this.f5()];this.rNt=t.length;for(const i of t)i.qNt();const s=[...this.children()];for(const e of s)e.qNt()}}uNt(){this.rDt&&(this.rDt.length=0),this.rDt=null,this.nDt=null;const t=this.u5();t&&t.uNt(),this.rNt=-1}b5(){return null!==this.u5()}u5(){const t=this.hNt;return null!==t?t.u5():null}c5(){let t=this;for(;t.b5();)t=t.u5();return t}*f5(){let t=this.u5();for(;t;)yield t,t=t.u5()}G_t(t){return this.lq().includes(t)}o7(){const t=this.hNt;return null!==t&&t.o7()}lq(){const t=this.hNt;return null!==t?t.lq():e}children(){return this.lq()}*y5(){for(const t of this.children())yield t,yield*t.y5()}p5(){return this.lq().length}zTt(){return[...this.y5()].length}g5(t){const s=this.lq();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}N_t(s){if(s){const i=this.lq();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}ZNt(t){this.hNt||(this.hNt=d.ir(d.fq,this)),t&&this.hNt.lDt(t)}Prt(){return this.hNt}aNt(){this.hNt&&(this.hNt.er(),this.hNt=null)}WNt(t){t?(t.ZNt(null),this.ZNt(t)):(this.hNt&&this.hNt.lDt(null),this.o7()||this.aNt())}UNt(t){if(!this.b5())return!1;const s=this.u5();return s===t||s.UNt(t)}BNt(t){if(this.G_t(t))return!0;for(const s of this.lq())if(s.BNt(t))return!0;return!1}QNt(t){this.hNt.lq().push(t)}JNt(t){const s=this.hNt.lq(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.b5()||this.aNt(),t.o7()||t.aNt()}A_t(){const t=g.get(this);return t?t.fNt:null}XNt(){const t=g.get(this);return t?t.dNt:NaN}n7(){const t=a.get(this);return d.le(t)?t:NaN}KNt(t){a.set(this,t)}$Nt(){this.ENt(1<<19,!0),this.pNt()}pNt(){if(m){const s=this.$c.IS();this.sNt&&s.HM(this.sNt);let t;t=0!=(this.Kwt&1<<19)?s.NM()||"<point>":s.IM()||"<default>",this.sNt=s.QM(t,this.iF(),this.tNt,this.uT())}}WH(){return this.sNt}QV(){return this.QS===i}YS(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.iF()!==t&&(this.Kwt=this.Kwt&~(31<<26)|t<<26,this.pNt())}iF(){return(this.Kwt&31<<26)>>26}m4(t,s){const i=s&&this.FDt!==t;i&&this.xV(),this.Bct.AIt(this,this.FDt,t),this.FDt=t,i&&this.tEt(),0!==this.uT()&&this.FDt.CV()}l4(){return this.FDt}Q3(){return this.l4().Q3()}IV(t){this.jDt=0|t}c4(){return this.FDt.kY(),this.jDt}BY(t){this.zDt=0|t}LU(){return this.FDt.jY(),this.zDt}CJ(){return this.jDt}ENt(t,s){s?this.Kwt|=t:this.Kwt&=~t}Ak(){return 0!=(1&this.Kwt)}Nk(t){if(this.ENt(1,t),this.o7())for(const s of this.lq())s.j5()&&s.Nk(t)}n5(){return 0!=(8&this.Kwt)}o5(t){t=!!t,this.n5()!==t&&(this.ENt(8,t),t?this.Rj():this.sEt())}iEt(t,s){if(this.ENt(32,t),this.$Dt&&this.$Dt.clear(),s.trim()){this.$Dt||(this.$Dt=new Set);for(const i of s.split(" "))i&&this.$Dt.add(i.toLowerCase())}else this.$Dt=null}eEt(t){const s=0!=(32&this.Kwt),i=this.$Dt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}Rj(){if(this.Kwt|=65554,this.Bct.DIt(!0),this.$c.y4(),this.FDt.hV()&&(this.hEt(this.YDt,this.HDt,!0),this.Kwt&=-3,this.tEt()),0!=(4&this.Kwt)&&this.Ti.Rf().dispatchEvent(s),null!==this.hNt){const i=this.hNt.lq();for(let t=0,s=i.length;t<s;++t)i[t].Rj()}}hEt(t,s,i){const e=this.hT(),h=this.oT(),r=this.im(),n=this.pm(),o=this.VP();t.uu(e-this.JDt*r,h-this.VDt*n,r,n),i&&this.q5()&&this.rEt(t),0===o?s.pl(t):(t.offset(-e,-h),s.gl(t,this.JSt(),this.QSt()),s.offset(e,h),s.yl(t)),t.normalize()}nEt(){const t=this.Kwt;0!=(2&t)&&(this.hEt(this.YDt,this.HDt,!0),this.Kwt=-3&t)}Wj(){return this.nEt(),this.YDt}Jj(){return this.nEt(),this.HDt}oEt(t){const s=this.hT(),i=this.oT(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.G(t),n.offset(e,h),n)}aEt(t){this.YDt.G(t),this.HDt.pl(this.YDt),this.Kwt&=-3,this.EIt(),this.tEt()}uEt(t){this.ENt(4,t)}lEt(){return 0!=(4&this.Kwt)}EH(t,s,i){return s&&0!==this.PH()?this.OH(this.l4().LH()):0===this.uT()||i?t.Bu(this.Wj()):this.cEt()}cEt(){const t=this.l4(),s=this.Bj();return!(s>=t.uY())&&(t.nY(s,r),r.Bu(this.Wj()))}OH(t){const s=this.Wj(),i=s.yu(),e=s.wu(),h=s.Mu(),r=s.Su(),n=this.Bj(),o=n+this.PH();return t.ly(i,h,n,e,r,o)}Yj(){const t=this.l4();if(t.TY())return this.OH(t.LH());{const s=t.Q3();return this.EH(t.nF(),s.NH(),s.Tk())}}zH(t){this.ENt(1<<20,t)}jH(t){this.ENt(1<<21,t)}fEt(){return 0!=(this.Kwt&1<<20)}dEt(){return 0!=(this.Kwt&1<<21)}pEt(t){this.XDt=t,this.mEt(),this.q5()&&(this.nNt.gEt=null)}yEt(){return this.XDt}MEt(){return null!==this.XDt||this.q5()}wEt(){return this.SEt(this.im(),this.pm(),this.VP(),this.JSt(),this.QSt())}TEt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.SEt(t,s,i,e,h)}SEt(h,r,t,n,o){let s=this.KDt;null===s&&(s={oNt:d.ir(d.Il),width:NaN,height:NaN,angle:NaN},this.KDt=s);const a=s.oNt;if(s.width!==h||s.height!==r||s.angle!==t){const u=this.XDt;if(this.q5()){let t=this.Yz(),s=this.Zz(),i=this.Z5(),e=this.nNt.gEt;e||(u?(l.G(u),l.offset(t,s)):l.Rl(),e=i.HT(l),this.nNt.gEt=e),i.qT(e,a),a.offset(-t,-s),a.jl(h,r,n,o)}else u?(a.G(u),a.jl(h,r,n,o)):a.Fl(this.Jj(),-this.hT(),-this.oT());s.width=h,s.height=r,s.angle=t}return a}mEt(){this.bEt(!0);const t=this.KDt;null!==t&&(t.width=NaN)}W5(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.OB().pP().eP())throw new Error("object does not support mesh");this.J5(),this.nNt={xEt:d.ir(d.qg.bT,t,s),vEt:d.ir(d.qg.bT,t,s),gEt:null}}q5(){return null!==this.nNt}Z5(){if(this.q5())return this.nNt.xEt;throw new Error("no mesh")}CEt(){if(this.q5())return this.nNt.vEt;throw new Error("no mesh")}GEt(t){this.ENt(65536,t)}IEt(){return 0!=(65536&this.Kwt)}bEt(t){this.ENt(1<<17,t)}_Et(){return 0!=(this.Kwt&1<<17)}rEt(t){const s=this.nNt.xEt,i=Math.min(s.FT(),0),e=Math.min(s.jT(),0),h=Math.max(s.zT(),1),r=Math.max(s.BT(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Iu((h-1)*n),t._u((r-1)*o),this.eb=s.UT()}J5(){this.nNt&&(this.nNt.xEt.er(),this.nNt.vEt.er(),this.nNt=null,this.mEt())}Y5(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.qk,a="number"==typeof i.u?i.u:h?0:-1,u="number"==typeof i.v?i.v:h?0:-1;if(!this.q5())return!1;const l=this.Z5(),c=l.QT(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.uT()!==o&&(c.lT(o),f=!0),h&&(r+=t/(l.LT()-1),n+=s/(l.OT()-1)),a=-1!==a||h?(h&&(a+=t/(l.LT()-1)),d.lr(a,0,1)):c.cT(),u=-1!==u||h?(h&&(u+=s/(l.OT()-1)),d.lr(u,0,1)):c.dT(),c.hT()===r&&c.oT()===n&&c.cT()===a&&c.dT()===u?f:(c.rT(r),c.aT(n),c.fT(a),c.pT(u),this.mEt(),!0)}d_t(){return this.Ti.d_t()}a5(t,s){return!!this.Wj().Wu(t,s)&&!!this.Jj().Wu(t,s)&&(this.d_t()?this.Ti.rz().$xt(t,s):!this.MEt()||this.wEt().Wu(t-this.hT(),s-this.oT()))}DEt(){return 0!=(16&this.Kwt)}EIt(){if(this.DEt()&&this.n5()&&0==(256&this.Kwt)){const t=this.Wj(),s=this.Bct._It(),i=this.qDt;if(r.set(s.UJ(t.yu()),s.WJ(t.Mu()),s.UJ(t.wu()),s.WJ(t.Su())),!i.equals(r)){const e=this.Ti;i===h?(s.QJ(e,null,r),this.qDt=d.ir(d.Rect,r)):(s.QJ(e,i,r),i.G(r)),this.Kwt&=-17}}}NEt(){this.Kwt|=16}sEt(){const t=this.qDt;t!==h&&(this.Bct._It().QJ(this.Ti,t,null),this.qDt=h)}tEt(){const t=this.l4();if(t.hV()&&0==(256&this.Kwt)){const s=t.VV(),i=this.Wj(),e=this.ZDt;if(r.set(s.UJ(i.yu()),s.WJ(i.Mu()),s.UJ(i.wu()),s.WJ(i.Su())),!e.equals(r)){const h=this.Ti;e===o?(s.QJ(h,null,r),this.ZDt=d.ir(d.Rect,r)):(s.QJ(h,e,r),e.G(r)),t.YV()}}}xV(){const t=this.ZDt;t!==o&&(this.l4().VV().QJ(this.Ti,t,null),this.ZDt=o)}FY(){return this.ZDt}Kj(){const t=this.Ti,s=this.FDt,i=s.d4();i.length&&i.at(-1)===t||(s.bV(t,!1),s.wV(t,!1),this.$c.y4())}t5(){const t=this.Ti,s=this.FDt,i=s.d4();i.length&&i[0]===t||(s.bV(t,!1),s.TV(t,!1),this.$c.y4())}i5(t){const s=this.Ti,i=this.FDt;if(i.Q3()!==t.Q3())throw new Error("layer from different layout");t!==i&&(i.bV(s,!0),this.m4(t),t.wV(s,!0),this.$c.y4())}h5(t,s){let i=this.Ti,e=!1,h=this.FDt;if(t.RF()!==i.RF()){const r=t.u4();if(!r)throw new Error("expected world instance");const n=r.l4(),o=(h.cO()!==n.cO()&&(h.bV(i,!0),this.m4(n),n.wV(i,!0),e=!0),n.QY(i,t,!!s));(e||o)&&this.$c.y4()}}Lj(){return this.iNt}EEt(t){this.ENt(64,t)}XY(){return 0!=(64&this.Kwt)}e7(t,s=null){const i={x:this.hT(),y:this.oT(),w:this.im(),h:this.pm(),l:this.l4().zV(),zi:this.c4()},e=(0!==this.uT()&&(i.ze=this.uT()),0!==this.VP()&&(i.a=this.yNt()),this.QV()||(i.c=this.QS.toJSON()),.5!==this.Yz()&&(i.oX=this.Yz()),.5!==this.Zz()&&(i.oY=this.Zz()),0!==this.iF()&&(i.bm=this.iF()),this.Ak()||(i.v=this.Ak()),this.n5()||(i.ce=this.n5()),this.lEt()&&(i.be=this.lEt()),this.iNt&&(i.fx=this.iNt.e7()),0!=(32&this.Kwt));return e&&(i.sfi=e),this.$Dt&&(i.sft=[...this.$Dt].join(" ")),this.hNt&&"visual-state"!==t&&(i.sgi=this.hNt.e7(t,s),g.has(this))&&(i.sgcd=g.get(this).fNt,i.sgzid=g.get(this).dNt),this.q5()&&(i.mesh=this.Z5().yT()),i}vDt(){return{x:this.Ha,y:this.qa,z:this.JS,w:this.BDt,h:this.UDt,a:this.Bo,sgi:this.Prt()?this.Prt().wDt():null}}_Dt(t){t&&(this.Ha=t.x,this.qa=t.y,this.JS=t.z,this.BDt=t.w,this.UDt=t.h,this.Bo=t.a,t.sgi&&this.Prt()&&this.Prt().h7(t.sgi),this.TNt(),this.Rj())}jIt(){this.uNt(),this.YNt(),this.ZNt(null),this.hNt&&this.hNt.GDt(this.rDt,this.nDt)}TZ(t){"visual-state"!==t&&this.YNt()}xZ(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Kwt)&&this.hNt.xZ(t.sgi,i)}q_t(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Kwt)&&(this.hNt.GDt(null,null),this.uNt(),this.Rj())}h7(t,s){if(m=!1,this.rT(t.x),this.aT(t.y),this.lm(t.w),this.hm(t.h),this.IV(t.zi),this.lT(t.hasOwnProperty("ze")?t.ze:0),this.JP(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Pa(t.c):t.hasOwnProperty("o")?(f.Zo(this.QS),f.a=t.o):f.Uo(1,1,1,1),this.lNt(f),this.qrt(t.hasOwnProperty("oX")?t.oX:.5),this.Xrt(t.hasOwnProperty("oY")?t.oY:.5),this.YS(t.hasOwnProperty("bm")?t.bm:0),this.Nk(!t.hasOwnProperty("v")||t.v),this.o5(!t.hasOwnProperty("ce")||t.ce),this.uEt(!!t.hasOwnProperty("be")&&t.be),this.iEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.iNt&&t.hasOwnProperty("fx")&&this.iNt.h7(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.rDt)for(const i of this.rDt)i.jU()||this.$c._F(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.ZNt(null);const e=this.hNt,h=t.sgi;e.h7(h),e.GDt(this.rDt,this.nDt),t.sgcd&&d.le(t.sgzid)&&g.set(this,{fNt:t.sgcd,dNt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.W5(r.cols,r.rows),this.Z5().MT(r)}else this.J5();this.Rj(),m=!0,this.pNt(),"visual-state"!==s&&this.$c.AEt(this.OB(),t)}}}{const wa=self.Rs;wa.wGt=class extends wa.$h{constructor(t,s){super();const i=t.E4(),e=i.$gt(s[1]),h=(i.LEt().Yvt(e),this.$c=i,this.Bct=t,this.Ivt=wa.jR.Tz(e),this.fxt=null,this.OEt=null,this.ZCt=e.Instance,this.n8=s[2],this.nr=s[0],this.Pyt=this.$c.y1t(s[3]),this.Ivt.Ewt());if(h<2&&(this.fxt=wa.ir(e.PGt,this),!(this.fxt instanceof wa.Gvt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(wa.jR.Ybt(this,h),2<=h){const r=e.PGt??globalThis.ZU;if(this.OEt=new r,!(this.OEt instanceof globalThis.ZU))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.OEt=new globalThis.wz;wa.jR.Hbt(h),this.Wbt()}static Wb(t,s){return wa.ir(wa.wGt,t,s)}er(){this.$c=null,this.Ivt=null,this.fxt&&(this.fxt.er(),this.fxt=null),this.ZCt=null}ISt(){return this.fxt}Wbt(){this.fxt?this.fxt.Wbt():this.OEt&&this.OEt.$B()}E4(){return this.$c}TF(){return this.Bct}fz(){return this.Ivt}hIt(){return this.ZCt}Jc(){return this.nr}zV(){return this.n8}mz(){return this.OEt}y1t(){return this.Pyt}}}{const Sa=self.Rs,Ta=self.lz;Sa.KIt=class extends Sa.$h{constructor(t){super(),this.$c=t.runtime,this.mMt=t.pz,this.Ivt=this.mMt.fz(),this.Ti=t.yz,this.Ug=t.index,this.QIt=null,this.JIt=null,this.Ivt.wV(this.Ti)}er(){this.JIt&&(this.JIt.GF(),this.JIt=null),this.Ivt.bV(this.Ti),this.QIt&&(this.QIt.er(),this.QIt=null),this.$c=null,this.mMt=null,this.Ivt=null,this.Ti=null}$Gt(t){if(this.QIt)throw new Error("already got sdk instance");const s=this.fz().Ewt();if(s<2){if(this.QIt=Sa.ir(this.mMt.hIt(),this,t),!(this.QIt instanceof Sa._vt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.fz().Qbt();this.Vbt(i.Instance,t)}}rz(){return this.QIt??this.JIt}Mz(){return this.Ti}E4(){return this.$c}gz(){return this.mMt}fz(){return this.Ivt}urt(){return this.Ug}Avt(){this.QIt?this.QIt.Avt():this.JIt.t6()}Pvt(t,s){this.QIt&&this.QIt.Pvt(t,s)}H_t(){return this.QIt?this.QIt.Lxt():this.JIt.wj()}yT(t="full"){return this.QIt?this.QIt.yT(t):this.JIt.Sj(t)}MT(t,s="full"){if(this.QIt)return this.QIt.MT(t,s);this.JIt.Tj(t,s)}static REt(t,s,i){let e=globalThis.XU,h,r;h=s instanceof e?t.nk(s):s.Evt(),r=i instanceof e?t.nk(i):i.Evt();const n=h.Mz(),o=r.Mz(),a=n.TF().cO(),u=o.TF().cO();if(a!==u)return a-u;const l=n.P_t(),c=o.P_t();return l!==c?l-c:h.urt()-r.urt()}Vbt(t,s){const i=Ta,e=t??this.QIt.Qbt(),h=e||i,r=this.fz().Ewt();if(Sa.jR.Ybt(this,r),Sa.jR.Hvt(s),this.JIt=new h,Sa.jR.qvt(),Sa.jR.Hbt(r),!e||this.JIt instanceof i)return this.JIt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}mxt(){return this.JIt||this.Vbt()}kxt(){return!!this.JIt}}}{const ba=self.Rs;ba.W8=class extends ba.$h{constructor(t,s){super(),this.CT=t,this.PEt=[],this.kEt=[],this.FEt=new Map,this.jEt=[],this.zEt=[],this.BEt=new Set,this.SS=!0;for(const i of s){const e=ba.ir(ba.UEt,this,i,this.PEt.length);this.PEt.push(e),this.FEt.set(e.Jc().toLowerCase(),e),3<=i.length&&this.jEt.push(this.WEt(e,i[2]))}this.E4().QEt(this)}er(){this.E4().JEt(this);for(const t of this.zEt)t.er();ba.Ln(this.zEt),ba.Ln(this.PEt),ba.Ln(this.kEt),this.FEt.clear(),ba.Ln(this.jEt),this.CT=null}VEt(t){this.BEt.add(t)}YEt(t){this.BEt.delete(t)}HEt(t){t.SM()&&(this.zEt=this.PEt.map(t=>{const s=t.Zx();return 0<s.GetCustomParametersByteSize()?ba.ir(ba.qg.WebGPUEffectCustomParamsBuffer,s):null}),this.qEt());for(const s of this.BEt)s.HEt(t)}XGt(t){if(t.length){this.PEt=t.concat(this.PEt);for(const s of t)this.FEt.set(s.Jc().toLowerCase(),s);for(let t=0,s=this.PEt.length;t<s;++t)this.PEt[t].RV(t)}}WEt(t,s){t.ZEt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=ba.ir(ba.ko);h.Pa(e),i[t]=h}}return i}RT(){return this.CT}E4(){return this.CT.E4()}vz(){ba.Ln(this.kEt);let t=!0;for(const s of this.PEt)s.jpt()&&(this.kEt.push(s),s.Zx().LS()||(t=!1));this.SS=t}jP(){return this.PEt}fIt(){return 0<this.PEt.length}yht(t){return this.FEt.get(t.toLowerCase())||null}XEt(t){if((t=Math.floor(+t))<0||t>=this.PEt.length)throw new RangeError("invalid effect type index");return this.PEt[t]}bz(t){return this.XEt(t).jpt()}xz(t,s){this.XEt(t).ZEt(s)}JV(){return this.kEt}XY(){return 0<this.kEt.length}LS(){return this.SS}ght(t){return this.jEt[t]}Y8(t){return(t<this.zEt.length?this.zEt:this.jEt)[t]}Cz(t,s){if(t<0||t>=this.jEt.length)return null;const i=this.jEt[t];return s<0||s>=i.length?null:i[s]}Gz(t,s,i){if(t<0||t>=this.jEt.length)return!1;const e=this.jEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof ba.ko){if(h.na(i))return!1;h.Zo(i)}else{if(h===i)return!1;e[s]=i}return t<this.zEt.length&&this.zEt[t].SetParameterValue(s,i),!0}qEt(){const i=this.jEt,e=this.zEt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static KEt(t){return t&&t instanceof ba.ko?{t:"color",v:t.toJSON()}:t}static $Et(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=ba.ir(ba.ko);return i.Pa(t.v),i}}}static tAt(t){return t.map(ba.W8.KEt)}static sAt(t){return t.map(ba.W8.$Et)}yT(){return this.PEt.map(t=>({name:t.Jc(),active:t.jpt(),params:ba.W8.tAt(this.jEt[t.cO()])}))}MT(t){for(const s of t){const i=this.yht(s.name);i&&(i.ZEt(s.active),this.jEt[i.cO()]=ba.W8.sAt(s.params))}this.vz(),this.qEt()}}}{const xa=self.Rs;xa.UEt=class extends xa.$h{constructor(t,s,i){super(),this.U8=t,this.if=s[0],this.nr=s[1],this.Ug=i,this.BS=null,this.s0=!0}er(){this.U8=null,this.BS=null}ZGt(t){const s=xa.ir(xa.UEt,t,[this.if,this.nr],-1);return s.BS=this.BS,s.s0=this.s0,s}HEt(t){const s=t.GM(this.if);if(!s)throw new Error("failed to find shader program '"+this.if+"'");this.BS=s}FP(){return this.U8}Jc(){return this.nr}RV(t){this.Ug=t}cO(){return this.Ug}RT(){return this.U8.RT()}E4(){return this.U8.E4()}ZEt(t){this.s0=!!t}jpt(){return this.s0}Zx(){return this.BS}iAt(){const i=[];for(let t=0,s=this.BS.Xx();t<s;++t){const e=this.BS.Kx(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(xa.ir(xa.ko,1,1,1,1))}}return i}}}{const va=self.Rs;va.eNt=class extends va.$h{constructor(t,s){super(),this.Ti=t,this.eAt=s,this.U8=t.TF().FP(),this.hAt=!0,this.q8=!0,this.rAt=!1,this.nAt=!1,this.oAt=!1,this.aAt=!1,this.oO=va.ir(va.qg.oA,t.E4().bR().Q8(),{ZE:(t,s)=>{const i=s.$L(),e=i.u4();t.HS(e.J8()),t.cw(e.Bj()),i.VT(t),t.cw(0)},XE:t=>{const s=t.Hxt(),[i,e]=t.Yxt();return{VL:s,YL:i,HL:e}},KE:t=>this.Y8(t)}),this.uAt=[],this.kEt=[],this.SS=!0,this.jEt=[],this.zEt=[],this.HEt(t.E4().IS());for(let t=0,s=this.U8.jP().length;t<s;++t)this.uAt.push(!0);this.vz(),this.U8.VEt(this)}er(){this.U8.YEt(this);for(const t of this.zEt)t&&t.er();va.Ln(this.zEt),this.oO.er(),this.oO=null,va.Ln(this.uAt),va.Ln(this.kEt),va.Ln(this.jEt),this.Ti=null,this.U8=null}HEt(t){t.SM()&&(this.zEt=this.U8.jP().map(t=>{const s=t.Zx();return 0<s.GetCustomParametersByteSize()?va.ir(va.qg.WebGPUEffectCustomParamsBuffer,s):null}))}cNt(t){let s=0;for(const i of t)this.jEt.push(this.WEt(s,i)),++s;this.qEt(),this.vz()}WEt(t,s){this.uAt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=va.ir(va.ko);h.Pa(e),i[t]=h}}return i}r_t(){for(const t of this.U8.jP())this.jEt.push(t.iAt());this.qEt()}RT(){return this.CT}FP(){return this.U8}lO(){return this.WV(),this.oO}E4(){return this.Ti.E4()}vz(){va.Ln(this.kEt);let t=this.eAt,i=this.U8.jP(),e=this.kEt,h=this.uAt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.Zx().LS()||(r=!1)}this.SS=r,t.EEt(!!e.length),this.hAt=!0}WV(){const t=this.Ti,s=this.eAt,i=s.QV(),e=t.pP().$R(),h=0!==s.VP()||0!==s.l4().VP()||s.im()<0||s.pm()<0,r=t.Xxt(),n=t.AS();(this.hAt||i!==this.q8||e!==this.rAt||h!==this.nAt||r!==this.oAt||n!==this.aAt||this.oO.XA())&&(this.oO.KA(this.kEt.map(t=>t.Zx()),{tA:this.kEt.map(t=>t.cO()),sA:!i||n,eA:e,hA:r,rA:h}),this.hAt=!1,this.q8=i,this.rAt=e,this.nAt=h,this.oAt=r,this.aAt=n)}JV(){return this.kEt}ght(t){return this.jEt[t]}Y8(t){return(t<this.zEt.length?this.zEt:this.jEt)[t]}Cz(t,s){if(t<0||t>=this.jEt.length)return null;const i=this.jEt[t];return s<0||s>=i.length?null:i[s]}Gz(t,s,i){if(t<0||t>=this.jEt.length)return!1;const e=this.jEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof va.ko){if(h.na(i))return!1;h.Zo(i)}else{if(h===i)return!1;e[s]=i}return t<this.zEt.length&&this.zEt[t].SetParameterValue(s,i),!0}qEt(){const i=this.jEt,e=this.zEt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}LS(){return this.SS}lAt(){return this.kEt.some(t=>t.Zx().PS())}bz(t){return this.uAt[t]}xz(t,s){this.uAt[t]=!!s}jP(){return this.U8.jP()}e7(){return this.U8.jP().map(t=>({name:t.Jc(),active:this.uAt[t.cO()],params:va.W8.tAt(this.jEt[t.cO()])}))}h7(t){for(const s of t){const i=this.U8.yht(s.name);i&&(this.uAt[i.cO()]=s.active,this.jEt[i.cO()]=va.W8.sAt(s.params))}this.vz(),this.qEt()}}}{let G=self.Rs,r=[],S=[],n=[],T=G.ir(G.Il),M=G.ir(G.Il),b=G.ir(G.Yu),d=G.ir(G.Rect),p=G.ir(G.Rect),m=null,g=null,y=null;G.cAt=class extends G.$h{constructor(t){super(),this.$c=t,this.fAt=0,this.dAt=0,this.pAt=[],this.mAt=0,this.gAt=0,this.yAt=0,this.MAt=0,this.wAt=new self.K4(this)}er(){this.$c=null}E4(){return this.$c}yO(){return this.wAt}SAt(){this.gAt=this.mAt,this.mAt=0,this.MAt=this.yAt,this.yAt=0}TAt(){return this.gAt}bAt(){return this.MAt}xAt(t,s){const i=t.u4(),e=s.u4();i&&e&&i.n5()&&e.n5()&&this.pAt.push([t,s])}NTt(s,i,e){for(const[h,r]of this.pAt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.PTt(i)&&!e.includes(t)&&e.push(t)}}ETt(t,s){if(this.pAt.length)for(const[i,e]of this.pAt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}vAt(){G.Ln(this.pAt)}sR(t,s){if(!t||!s||t===s)return!1;const i=t.u4(),e=s.u4();if(!i.n5()||!e.n5())return!1;this.mAt++;const h=i.l4(),r=e.l4(),n=h.LY(r);return n?this.CAt(i,e):this.GAt(i,e)}CAt(t,s){if(!t.Wj().Bu(s.Wj()))return!1;if(this.yAt++,!t.Jj().wl(s.Jj()))return!1;if(t.d_t()&&s.d_t())return!1;if(t.d_t())return this.IAt(t,s);if(s.d_t())return this.IAt(s,t);if(!t.MEt()&&!s.MEt())return!0;const i=t.wEt(),e=s.wEt();return i.zl(e,s.hT()-t.hT(),s.oT()-t.oT())}GAt(i,e){const t=i.d_t(),s=e.d_t();if(t&&!s)return this._At(i,e);if(s&&!t)return this._At(e,i);if(s||t)return!1;{const h=i.l4(),r=e.l4(),n=(T.G(i.wEt()),M.G(e.wEt()),T.Al());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,u=n[t],l=n[a],[c,f]=h.fF(u+i.hT(),l+i.oT());n[t]=c,n[a]=f}const o=M.Al();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.fF(p+e.hT(),m+e.oT());o[t]=g,o[d]=y}return T.Pl(),M.Pl(),this.yAt++,T.zl(M,0,0)}}_At(t,s){const i=t.l4(),e=s.l4(),h=(m=m||G.ir(G.Il),g=g||G.ir(G.Rect),y=y||G.ir(G.Yu),s.hT()),r=s.oT(),[n,o]=e.fF(h,r),[a,u]=i.aF(n,o),l=a-h,c=u-r;if(g.G(s.Wj()),g.offset(l,c),!t.Wj().Bu(g))return!1;if(y.G(s.Jj()),y.offset(l,c),this.yAt++,!t.Jj().wl(y))return!1;m.G(s.wEt());const f=m.Al();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=l,f[d]+=c}return m.Pl(),this.IAt(t,s,a,u,m,g,y)}IAt(t,e,s,i,h,r,n){const o=void 0!==r?r:e.Wj(),a=t.hT(),u=t.oT(),l=t.OB().rz(),c=void 0!==s?s:e.hT(),f=void 0!==i?i:e.oT(),d=e.MEt(),p=void 0!==n?n:e.Jj(),m=S;l.GetCollisionRectCandidates(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.GetRect();if(this.mAt++,o.Uu(y,a,u)&&(b.pl(y),b.offset(a,u),b.wl(p)))if(d){let t=void 0!==h?h:e.wEt(),s=c,i=f;void 0!==h&&(s=e.hT(),i=e.oT());const M=g.GetPoly();if(M){if(this.yAt++,M.zl(t,s-(a+y.yu()),i-(u+y.Mu())))return G.Ln(m),!0}else if(T.Fl(b,0,0),T.zl(t,s,i))return G.Ln(m),!0}else{const w=g.GetPoly();if(!w)return G.Ln(m),!0;if(T.Fl(p,0,0),w.zl(T,-(a+y.yu()),-(u+y.Mu())))return G.Ln(m),!0}}return G.Ln(m),!1}DAt(t,o,a){const u=t.GP(),s=this.$c.HO();if(!s)throw new Error("cannot call outside event");const l=s.yft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.jk(),i.set(t,s)),s};if(u.$ct()){a||(u.oft(!1),G.Ln(u.aft())),l&&G.Ln(u.uft());for(const e of t.CP()){let h=e.u4(),r=h.l4();if(!(!c(r)||!h.Yj())&&o.some(([t,s])=>{const[i,e]=r.aF(t,s,h.Bj());return h.a5(i,e)})){if(a)return!1;u.rft(e)}else l&&u.nft(e)}}else{let i,e=!1,n=(!l||s.ugt(this.$c.a1t())||this.$c.ESt()&&!u.uft().length&&u.aft().length?i=u.aft():(i=u.uft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.u4(),r=h.l4();if(!(!c(r)||!h.Yj())&&o.some(([t,s])=>{const[i,e]=r.aF(t,s,h.Bj());return h.a5(i,e)})){if(a)return!1;e?u.rft(t):i[n++]=t}else e?i[n++]=t:l&&u.nft(t)}a||(i.length=n)}return t.Qgt(),i.clear(),!!a||u.tft()}NAt(t,s){if(t)for(const i of s.LIt())if(!t.LY(i))return!1;return!0}NSt(t,s,i,e){if(s.AV())for(const h of s.Pmt())this.NAt(t,h)?(h.NIt(),h._It().JJ(i,e)):G.Qh(e,h.CP());else this.NAt(t,s)?(s.NIt(),s._It().JJ(i,e)):G.Qh(e,s.CP())}cR(t,s,i,e){for(const h of s)this.NSt(t,h,i,e)}EAt(t,s,i){const e=this.$c.Xvt();e&&this.cR(t,e.VZ(),s,i)}AAt(t,s,i){const e=this.$c.Kvt();e&&this.cR(t,e.VZ(),s,i)}eEt(t,s){return t.g_t()&&(!s||s.u4().eEt(t.kwt().get("solidTags")))}hR(t){const s=t.u4();this.EAt(s.l4(),s.Wj(),r);for(const i of r)if(this.eEt(i,t)&&this.sR(t,i))return G.Ln(r),i;return G.Ln(r),null}LAt(t,s){this.EAt(null,t,r);for(const i of r)if(this.eEt(i,s)&&this.OAt(t,i))return G.Ln(r),i;return G.Ln(r),null}RAt(t,s){let i=null;s&&(i=n,G.Ln(i));const e=t.u4();this.AAt(e.l4(),e.Wj(),r);for(const h of r)if(h.M_t()&&this.sR(t,h)){if(!s)return G.Ln(r),h;i.push(h)}return G.Ln(r),i}PAt(s,i,e,h,r){h=h||50;const n=s.u4(),o=n.hT(),a=n.oT();for(let t=0;t<h;++t)if(n.Pj(o+i*t,a+e*t),n.Rj(),!this.sR(s,r))return!0;return n.Pj(o,a),n.Rj(),!1}kAt(s,i,e,h,r,n){h=h||50;let o=s.u4(),a=o.hT(),u=o.oT(),l=null,c=null;for(let t=0;t<h;++t)if(o.Pj(a+i*t,u+e*t),o.Rj(),!this.sR(s,l))if(l=this.hR(s))c=l;else if(r&&(l=n?this.sR(s,n)?n:null:this.RAt(s))&&(c=l),!l)return c&&this.FAt(s,i,e,c,16,!0),!0;return o.Pj(a,u),o.Rj(),!1}jAt(i,e,h,t){t=t||50;let r=i.u4(),n=r.hT(),o=r.oT(),a=null,u=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const l=2*t-1;if(r.Pj(n+e*s*l,o+h*s*l),r.Rj(),!this.sR(i,a)){if(!(a=this.hR(i)))return u&&this.FAt(i,e*l,h*l,u,16,!0),!0;u=a}}return r.Pj(n,o),r.Rj(),!1}FAt(t,s,i,e,h,r){let n=2,o=!1,a=!1,u=t.u4(),l=u.hT(),c=u.oT();for(;n<=h;){const f=1/n;n*=2,u.jj(s*f*(o?1:-1),i*f*(o?1:-1)),u.Rj(),this.sR(t,e)||r&&this.hR(t)?(o=!0,a=!0):(o=!1,a=!1,l=u.hT(),c=u.oT())}a&&(u.Pj(l,c),u.Rj())}zAt(i,t=100){let e=0,h=i.u4(),r=h.hT(),n=h.oT(),o=0,a=this.hR(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.Pj(Math.floor(r+t*e),Math.floor(n+s*e)),h.Rj(),!this.sR(i,a)&&!(a=this.hR(i)))return!0}return h.Pj(r,n),h.Rj(),!1}BAt(t,s,i,e){const h=t.u4(),r=h.hT(),n=h.oT(),o=Math.max(10,G.mr(s,i,r,n)),a=G.yr(s,i,r,n),u=e||this.hR(t);if(!u)return G.cr(a+Math.PI);let l=u,c=0,f=0,d=G.dr(5),p;for(p=1;p<36;++p){const v=a-p*d;if(h.Pj(s+Math.cos(v)*o,i+Math.sin(v)*o),h.Rj(),!this.sR(t,l)&&!(l=e?null:this.hR(t))){c=v;break}}for(36===p&&(c=G.cr(a+Math.PI)),l=u,p=1;p<36;++p){const C=a+p*d;if(h.Pj(s+Math.cos(C)*o,i+Math.sin(C)*o),h.Rj(),!this.sR(t,l)&&!(l=e?null:this.hR(t))){f=C;break}}if(36===p&&(f=G.cr(a+Math.PI)),h.Pj(r,n),h.Rj(),f===c)return f;let m=G.Mr(f,c)/2,g;g=G.Tr(f,c)?G.cr(c+m+Math.PI):G.cr(f+m);const y=Math.cos(a),M=Math.sin(a),w=Math.cos(g),S=Math.sin(g),T=y*w+M*S,b=y-2*T*w,x=M-2*T*S;return G.yr(0,0,b,x)}UAt(t,s,i,e,h){if(!h)return!1;const r=h.u4();if(!r.n5())return!1;if(this.mAt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.Wj().Bu(d))return!1;if(h.d_t())return this.WAt(t,s,i,e,h,r);if(this.yAt++,!r.Jj().Ml(t,s,i,e))return!1;if(!r.MEt())return!0;const n=r.wEt();return n.Ml(r.hT(),r.oT(),t,s,i,e)}WAt(i,e,h,r,t,s){const n=s.hT(),o=s.oT(),a=t.rz(),u=S;p.set(i,e,h,r),p.normalize(),a.GetCollisionRectCandidates(p,u);for(let t=0,s=u.length;t<s;++t){const l=u[t],c=l.GetRect();if(this.mAt++,d.Uu(c,n,o)&&(b.pl(c),b.offset(n,o),b.Ml(i,e,h,r))){const f=l.GetPoly();if(!f)return G.Ln(u),!0;if(this.yAt++,f.Ml(n+c.yu(),o+c.Mu(),i,e,h,r))return G.Ln(u),!0}}return G.Ln(u),!1}OAt(t,s){if(!s)return!1;const i=s.u4();if(!i.n5())return!1;if(this.mAt++,!i.Wj().Bu(t))return!1;if(s.d_t())return this.QAt(t,s,i);if(this.yAt++,b.pl(t),!i.Jj().wl(b))return!1;if(!i.MEt())return!0;const e=T,h=(e.pl(t,i.hT(),i.oT()),i.wEt());return e.zl(h,0,0)}QAt(i,t,s){const e=s.hT(),h=s.oT(),r=t.rz(),n=S;r.GetCollisionRectCandidates(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.GetRect();if(this.mAt++,i.Uu(a,e,h)){const u=o.GetPoly();if(!u)return G.Ln(n),!0;if(this.yAt++,T.pl(i,0,0),u.zl(T,-(e+a.yu()),-(h+a.Mu())))return G.Ln(n),!0}}return G.Ln(n),!1}JAt(t,s){if(t){const i=t.u4();i.n5()&&(this.mAt++,i.Wj().Bu(s.rect))&&(t.d_t()?this.VAt(t,i,s):(this.yAt++,i.MEt()?s.YAt(t,i.hT(),i.oT(),i.wEt()):s.HAt(t,i.Jj())))}}VAt(i,e,h){const r=e.hT(),n=e.oT(),o=S;i.rz().GetCollisionRectCandidates(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],u=a.GetRect();if(this.mAt++,h.rect.Uu(u,r,n)){const l=a.GetPoly();this.yAt++,l?h.YAt(i,r+u.yu(),n+u.Mu(),l):h.qAt(i,e.hT(),e.oT(),u)}}G.Ln(o)}nR(t,s){if(t!==this.fAt||s!==this.dAt){this.fAt=t,this.dAt=s;const i=this.$c.EV();for(const e of i)if(e.QR()){for(const h of e.vP())h.u4().sEt();e._It().ZAt(t,s),e.DIt();for(const r of e.vP()){const n=r.u4();n.NEt(),n.EIt()}}}}aR(){return[this.fAt,this.dAt]}XAt(t,s){this.fAt=t,this.dAt=s}}}{const Ca=self.Rs;Ca.nGt=class extends Ca.$h{constructor(t,s){super(),this.FJ=t,this.jJ=s,this.zJ=Ca.ir(Ca.Vl)}er(){this.zJ.er(),this.zJ=null}ZAt(t,s){if(!this.zJ.ql())throw new Error("grid not empty");this.FJ=t,this.jJ=s}BJ(t,s,i){let e=this.zJ.$s(t,s);return e||(i?(e=Ca.ir(Ca.KAt,this,t,s),this.zJ.Set(t,s,e),e):null)}UJ(t){const s=Math.floor(t/this.FJ);return isFinite(s)?s:0}WJ(t){const s=Math.floor(t/this.jJ);return isFinite(s)?s:0}QJ(e,h,r){if(h)for(let i=h.yu(),t=h.wu();i<=t;++i)for(let t=h.Mu(),s=h.Su();t<=s;++t)if(!r||!r.Wu(i,t)){const n=this.BJ(i,t,!1);n&&(n.p0(e),n.ql())&&this.zJ.Zl(i,t)}if(r)for(let i=r.yu(),t=r.wu();i<=t;++i)for(let t=r.Mu(),s=r.Su();t<=s;++t)h&&h.Wu(i,t)||this.BJ(i,t,!0).OJ(e)}JJ(t,s){let i=this.UJ(t.yu()),e=this.WJ(t.Mu()),h=this.UJ(t.wu()),r=this.WJ(t.Su());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.BJ(i,t,!1);n&&n.PJ(s)}}}}{const Ga=self.Rs;Ga.KAt=class extends Ga.$h{constructor(t,s,i){super(),this.IJ=t,this.Ha=s,this.qa=i,this._J=Ga.ir(Ga.tc)}er(){this._J.er(),this._J=null,this.IJ=null}ql(){return this._J.ql()}OJ(t){this._J.hc(t)}p0(t){this._J.Zl(t)}PJ(t){Ga.Qh(t,this._J.rc())}}}{const Ia=self.Rs;Ia.$At=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Ia.Rect,this.tLt=2,this.sLt=null,this.iLt=0,this.eLt=0,this.hLt=0,this.rLt=0,this.nLt=0,this._t=0,this.oLt=1,this.aLt=0,this.uLt=1,this.lLt=0}cLt(){return this.tLt<1+1e-6}i0(){this.tLt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.tLt=2,this.sLt=null,this.iLt=0,this.eLt=0,this.hLt=0,this.rLt=0,this.nLt=0,this._t=0,this.oLt=1,this.aLt=0,this.uLt=1,this.lLt=0,this}fLt(){if(!1!==this.cLt()){const t=this.dx*this.tLt,s=this.dy*this.tLt,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this._t=i-1e-6,this.rLt=this.x1+e*this._t,this.nLt=this.y1+h*this._t,this.iLt=Math.atan2(this.hLt,this.eLt)+Math.PI/2,this.oLt=Math.cos(this.iLt),this.aLt=Math.sin(this.iLt),e*this.oLt+h*this.aLt);if(this.uLt=e-2*this.oLt*r,this.lLt=h-2*this.aLt*r,0<r){const n=Math.PI;this.iLt=Ia.cr(this.iLt+n),this.oLt=-this.oLt,this.aLt=-this.aLt}}}dLt(t,s,i,e,h){const r=Ia.an(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.tLt&&(this.tLt=r,this.sLt=t.RF(),this.eLt=s-e,this.hLt=i-h)}qAt(t,s,i,e){const h=s+e.yu(),r=s+e.wu(),n=i+e.Mu(),o=i+e.Su();this.dLt(t,h,n,r,n),this.dLt(t,r,n,r,o),this.dLt(t,r,o,h,o),this.dLt(t,h,o,h,n)}HAt(t,s){const i=s.Zr(),e=s.Xr(),h=s.Kr(),r=s.$r(),n=s.tn(),o=s.sn(),a=s.hn(),u=s.rn();this.dLt(t,i,e,h,r),this.dLt(t,h,r,n,o),this.dLt(t,n,o,a,u),this.dLt(t,a,u,i,e)}YAt(i,e,h,t){const r=t.Al();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,u=r[n]+e,l=r[1+n]+h;this.dLt(i,o,a,u,l)}}}}{const C=self.Rs,_a=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Da=new Set(["high","low"]),Na=self.Ms,xh=Na.bs,vh=Na.Gs,Ea=xh.create(),Aa=C.ir(C.Yu),I=C.ir(C.Rect);C.pLt=class extends C.$h{constructor(t){super(),this.$c=t,this.mLt=[],this.gLt=!1,this.yLt=null,this.MLt=null,this.wLt=null,this.SLt="high-performance",this.TLt=!1,this.bLt=0,this.xLt=0,this.vLt="",this.CLt=0,this.GLt=0,this.ILt=0,this._Lt=0,this.DLt=0,this.NLt=0,this.xy="normalized",this.ELt=0,this.ALt=1,this.LLt=1e4,this.$y=!0,this.OLt=0,this.AA=0,this.LA=0,this.RLt="letterbox-scale",this.PLt="letterbox-scale",this.kLt=0,this.FLt=0,this.jLt=xh.create(),this.zLt="high",this.BLt=this.zLt,this.ULt=!1,this.WLt=[],this.QLt=new Set,this.JLt=self.C3_Shaders,this.VLt=C.ir(C.qg.PE,{AE:()=>[this.dH(),this.pH()],LE:()=>this.YLt(),OE:t=>this.HLt(t),getTime:()=>this.E4().g3(),RE:()=>this.E4().y4()}),this.qLt=0,this.ZLt=0,this.XLt=NaN,this.KLt=null,this.$Lt=new Map,this.tOt=NaN,this.sOt=new Map,this.iOt="",this.eOt=1,this.hOt=C.ir(C.Rect),this.rOt="",this.nOt=null,this.oOt=null,this.aOt=0,this.uOt=0,this.lOt=-1,this.cOt=0,this.fOt=t=>this.cOt=t.progress,this.dOt=null,this.pOt={mOt:null,gOt:null,yOt:null},this.MOt=0,this.wOt=0,this.SOt=0,this.TOt="fade-in",this.bOt=null,this.xOt=new Promise(t=>this.bOt=t)}vOt(t){this.SLt=t}COt(t){this.gLt=!!t}GOt(t){this.xy=t}IOt(){return this.xy}_Ot(t){this.ELt=t}DOt(t,s){this.ALt=t,this.LLt=s}NOt(t){this.TLt=!!t}async Co(t){let s=t.canvas,i=(this.mLt.push({canvas:s,EOt:null}),this.$c.lj("runtime","window-resize",t=>this.AOt(t)),this.$c.lj("runtime","fullscreenchange",t=>this.LOt(t)),this.$c.lj("runtime","fullscreenerror",t=>this.OOt(t)),s.addEventListener("webglcontextlost",t=>this.ROt(t)),s.addEventListener("webglcontextrestored",t=>this.POt(t)),this.ULt=!!t.isFullscreen,this.vLt=t.cssDisplayMode,navigator.gpu&&this.gLt),e=!1;if(i)try{await this.kOt(!0)}catch(t){this.FOt("WebGPU",t),this.MLt=null}if(!this.IS())try{await this.jOt(!0)}catch(t){this.FOt("WebGL",t),this.yLt=null}if(this.IS()||(e=!0),!this.IS()&&i)try{await this.kOt(!1)}catch(t){this.FOt("WebGPU",t),this.MLt=null}if(!this.IS())try{await this.jOt(!1)}catch(t){this.FOt("WebGL",t),this.yLt=null}const h=this.IS();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.rS(e),this.MLt&&(this.MLt.zOt=()=>this.BOt(),this.MLt.UOt=()=>this.WOt()),"normalized"===this.xy?h.gM():(h.yM(),h.pM(this.ELt)),this.WI(t.windowInnerWidth,t.windowInnerHeight,!0),await this.HEt()}FOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async kOt(t){const s={gy:this.ALt,yy:this.LLt},i={powerPreference:this.SLt,depth:this.$c.SY(),failIfMajorPerformanceCaveat:t,QOt:this.$c.bH(),JOt:this.$c.VOt(),K_:this.$c.YOt()};this.MLt=C.ir(C.qg.WebGPURenderer,s),await this.MLt.Wb(this.mLt[0].canvas,i)}async jOt(t){const s={alpha:!0,powerPreference:this.SLt,X_:"xbox-uwp-webview2"!==this.$c.MR(),depth:this.$c.SY(),K_:this.$c.YOt(),failIfMajorPerformanceCaveat:t,gy:this.ALt,yy:this.LLt};this.TLt&&(s.tD=1),this.yLt=C.ir(C.qg.eD,this.mLt[0].canvas,s),await this.yLt.hM()}async HOt(){if(this.JLt){const t=[];for(const[s,i]of Object.entries(this.JLt)){i.src=i.wgsl;const e=C.qg.WebGPUShaderProgram.wv();t.push(this.MLt.rN(Object.assign({zb:e,name:s},i)))}await Promise.all(t)}}async qOt(){if(this.JLt){const s=[];for(const[i,e]of Object.entries(this.JLt)){let t;if(e.glslWebGL2&&2<=this.yLt.G2())e.src=e.glslWebGL2,t=C.qg.Fb.Sv();else{if(!e.glsl)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.glsl,t=C.qg.Fb.wv()}s.push(this.yLt.rN(Object.assign({zb:t,name:i},e)))}await Promise.all(s),this.yLt.nN(),this.yLt._M()}this.yLt.wE()&&(this.KLt=C.ir(C.qg.B_,this.yLt))}async HEt(){this.MLt?await this.HOt():this.yLt&&await this.qOt();const t=this.IS();t.eS(this.$y),t.wE()&&(this.XLt=0);for(const s of this.$c.ZOt()){for(const i of s.jP())i.HEt(t);s.HEt(t),s.vz()}this.wLt=new self.z6(this.$c,t)}er(){this.$c=null,this.yLt=null,this.mLt.length=0}GO(){return this.$c.GO()}AOt(t){const s=this.$c;if(!s.XOt()){const i=t.devicePixelRatio,e=(this.GO()&&(self.devicePixelRatio=i),s.KOt(i),this.ULt=!!t.isFullscreen,this.vLt=t.cssDisplayMode,this.WI(t.innerWidth,t.innerHeight),s.y4(),new C.Event("window-resize")),h=(e.data=t,s.Rf().Jf(e),new C.Event("resize"));h.$Ot=this.GR(),h.t3t=this._R(),h.s3t=this.NR(),h.i3t=this.AR(),s.Cq(h),s.Gq()&&(s.Z1t()||self.C3Debugger.IsDebuggerPaused())&&s.aL()}}LOt(t){this.ULt=!!t.isFullscreen,this.WI(t.innerWidth,t.innerHeight,!0),this.$c.y4()}OOt(t){this.ULt=!!t.isFullscreen,this.WI(t.innerWidth,t.innerHeight,!0),this.$c.y4()}WI(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.bLt!==t||this.xLt!==s||i){this.bLt=t,this.xLt=s;const e=this.e3t();"letterbox-scale"===e?this.h3t(t,s):"letterbox-integer-scale"===e?this.r3t(t,s):"off"===e?this.n3t(t,s):this.o3t(t,s),this.a3t(e);for(const{canvas:n}of this.mLt)n.width=this.ILt,n.height=this._Lt;this.$c.ef("canvas","update-size",{marginLeft:this.DLt,marginTop:this.NLt,styleWidth:this.CLt,styleHeight:this.GLt,displayScale:this.zU()});const h=this.IS();h.WI(this.ILt,this._Lt,!0);for(const o of this.WLt)h.dE(o);C.Ln(this.WLt),this.u3t();const r=this.$c.W3();r.Hq(),r.qq()}}u3t(){this.IS().wM(this.jLt,this.dH()/this.pH())}mH(){return this.jLt}h3t(t,s){const i=this.$c.LR(),e=this.$c._O(),h=this.$c.NO(),r=e/h,n=t/s;if(r<n){const o=s*r;this.CLt=Math.round(o),this.GLt=s,this.DLt=Math.floor((t-this.CLt)/2),this.NLt=0}else{const a=t/r;this.CLt=t,this.GLt=Math.round(a),this.DLt=0,this.NLt=Math.floor((s-this.GLt)/2)}this.ILt=Math.round(this.CLt*i),this._Lt=Math.round(this.GLt*i),this.$c.l3t(e,h)}r3t(t,s){let i=this.$c.LR(),e=(1!==i&&(t+=1,s+=1),this.$c._O()),h=this.$c.NO(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const u=t/r;o=u*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.ILt=Math.round(e*o),this._Lt=Math.round(h*o),this.CLt=this.ILt/i,this.GLt=this._Lt/i,this.DLt=Math.max(Math.floor((t-this.CLt)/2),0),this.NLt=Math.max(Math.floor((s-this.GLt)/2),0),this.$c.l3t(e,h)}o3t(t,s){const i=this.$c.LR(),e=(this.CLt=t,this.GLt=s,this.ILt=Math.round(this.CLt*i),this._Lt=Math.round(this.GLt*i),this.DLt=0,this.NLt=0,this.zU());this.$c.l3t(this.CLt/e,this.GLt/e)}n3t(t,s){const i=this.$c.LR();this.CLt=this.$c.lY(),this.GLt=this.$c.cY(),this.ILt=Math.round(this.CLt*i),this._Lt=Math.round(this.GLt*i),this.c3t()?(this.DLt=Math.floor((t-this.CLt)/2),this.NLt=Math.floor((s-this.GLt)/2)):(this.DLt=0,this.NLt=0),this.$c.l3t(this.$c.lY(),this.$c.cY())}a3t(i){if("high"===this.zLt)this.AA=this.ILt,this.LA=this._Lt,this.BLt="high";else{let t,s;if(s="off"===this.e3t()?(t=this.$c.lY(),this.$c.cY()):(t=this.$c._O(),this.$c.NO()),this.ILt<t||this._Lt<s)this.AA=this.ILt,this.LA=this._Lt,this.BLt="high";else if(this.AA=t,this.LA=s,this.BLt="low","scale-inner"===i){const e=t/s,h=this.bLt/this.xLt;h<e?this.AA=this.LA*h:e<h&&(this.LA=this.AA/h)}else if("scale-outer"===i){const r=t/s,n=this.bLt/this.xLt;r<n?this.AA=this.LA*n:n<r&&(this.LA=this.AA/n)}}}E4(){return this.$c}f3t(){return this.mLt[0].canvas}Q8(){return this.VLt}c3t(){return this.ULt}d3t(){return this.vLt}p3t(t){if(!_a.has(t))throw new Error("invalid fullscreen mode");this.RLt=t;const s=this.$c.W3();s.Hq(),s.qq()}FU(){return this.RLt}m3t(t){if(!_a.has(t))throw new Error("invalid fullscreen mode");this.PLt=t;const s=this.$c.W3();s.Hq(),s.qq()}g3t(){return this.PLt}e3t(){return this.c3t()?this.g3t():this.FU()}y3t(t){if(!Da.has(t))throw new Error("invalid fullscreen scaling quality");this.zLt=t,this.$c.W3().Hq()}M3t(){return this.zLt}xH(){return this.BLt}static w3t(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}CU(){return this.bLt}GU(){return this.xLt}dH(){return this.AA}pH(){return this.LA}eS(t){this.$y=!!t}S3t(t){this.OLt=t}TJ(){return this.OLt}T3t(){return this.IS().M_()}ROt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.WLt=[],this.QLt.clear(),this.VLt.qS(),this.yLt.qS(),this.$c.x9()}BOt(){console.log("[Construct] WebGPU device lost"),this.WLt=[],this.QLt.clear(),this.VLt.qS(),this.$c.x9()}async POt(t){await this.yLt.ZS(),await this.HEt(),await this.$c.b3t(),console.log("[Construct] WebGL context restored")}async WOt(){await this.HEt(),await this.$c.b3t(),console.log("[Construct] WebGPU device restored")}x3t(){return this.yLt}v3t(){return this.MLt}IS(){return this.MLt||this.yLt}eIt(){return this.wLt}TR(){let t="";return t=this.$c.v3t()?"webgpu":"webgl"+this.$c.x3t().G2(),this.$c.IS().nS()&&(t+="-software"),t}vR(){return this.$c.v3t()?this.$c.v3t().GetAdapterInfoString():this.$c.x3t()._E()}MF(){return"low"===this.BLt?1/this.$c.LR():this.zU()}zU(){const t=this.e3t();if("off"===t||"crop"===t)return 1;const s=this.$c._O(),i=this.$c.NO(),e=s/i,h=this.ILt/this._Lt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.GLt/i:this.CLt/s}YH(){return"low"===this.xH()?1:this.zU()}JH(){return"low"===this.xH()?1:this.$c.LR()}C3t(t,s){this.kLt=t,this.FLt=s}IW(s,i,e,t=!0){i=i||this.AA,e=e||this.LA;const h=i/2+this.kLt,r=e/2+this.FLt;if(t){let t=this.mH();i===this.AA&&e===this.LA||(s.wM(Ea,i/e),t=Ea),s.aN(t)}const n=s.xM(h,r,s.nM(e),h,r,0,e);s.pN(n)}G3t(t,s=!0){const i=this.GR(),e=this._R(),h=i/2,r=e/2,n=(s&&t.aN(this.mH()),t.xM(h,r,t.nM(e),h,r,0,e));t.pN(n)}NR(){return this.ILt}AR(){return this._Lt}GR(){return this.CLt}_R(){return this.GLt}uF(){return this.DLt}lF(){return this.NLt}n9(){return this.mLt.length}I3t(){return"undefined"!=typeof OffscreenCanvas&&this.f3t()instanceof OffscreenCanvas&&("Chromium"!==C.ri.fi||124<=C.ri.ci)}async _9(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.mLt.length!==e){let t=this.$c.W3().z3(),s={count:e,layersDomState:t.jV().filter(t=>t.Pk()).map(t=>t.WY()),immediate:h,marginLeft:this.DLt,marginTop:this.NLt,styleWidth:this.CLt,styleHeight:this.GLt},i;if(i=this.GO()?await this.$c.w4("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.mLt.length)this.mLt.length=e;else for(const r of i.addedCanvases){r.width=this.ILt,r.height=this._Lt;const n=this.I3t()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.mLt.push({canvas:r,EOt:o})}this.$c.y4()}}bq(t){if(!(t>=this.mLt.length)){const s=this.f3t(),i=this.mLt[t].EOt;this.I3t()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}vH(s){s.depth=this.$c.SY();let t=this.WLt,i=t.findIndex(t=>t.Ab(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.IS().aE(s),this.QLt.add(e),e}V8(t){if(!this.QLt.has(t))throw new Error("render target not in use");this.QLt.delete(t),this.WLt.push(t)}YLt(){const t={e2:this.$c.EO()};return"low"===this.xH()&&(t.width=this.dH(),t.height=this.pH()),this.vH(t)}HLt(t){this.V8(t)}*_3t(){for(const t of this.$c.W3().Jq())for(const s of t.ik()){const i=this.$Lt.get(s);i&&(yield i)}}wH(t){if(!this.IS().wE())return null;let s=this.$Lt.get(t);return s||(s={Oj:t,name:t.Jc(),D3t:C.ir(C.qg.B_,this.yLt),N3t:0,E3t:0,A3t:0},this.$Lt.set(t,s)),s.D3t}L3t(){const t=this.IS();if(t.wE()&&0===this.ZLt){this.ZLt=t.sS(),this.tOt=NaN;for(const s of this._3t())s.N3t=NaN}}O3t(){this.yLt&&this.yLt.wE()&&this.R3t(),this.MLt&&this.MLt.wE()&&this.P3t()}R3t(){if(isNaN(this.tOt)&&(this.tOt=this.KLt.H_(this.qLt,this.ZLt),!isNaN(this.tOt))){if(this.$c.Gq())for(const t of this._3t())if(t.N3t=t.D3t.H_(this.qLt,this.ZLt),isNaN(t.N3t))return;if(this.KLt.q_(this.ZLt),this.XLt=Math.min(this.tOt,1),this.$c.Gq()){const i=new Map;for(const h of this._3t())h.D3t.q_(this.ZLt),h.E3t=Math.min(h.N3t,1),i.set(h.Oj,h.E3t);for(const r of this._3t()){const n=r.Oj,o=i.get(n)||0,a=o-n.Gk().reduce((t,s)=>t+(i.get(s)||0),0);r.A3t=C.lr(a,0,1)}const s=this.$c.z3(),e=this.XLt-s.jV().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.lr(e,0,1),this.XLt,[...this._3t()])}this.qLt=this.ZLt,this.ZLt=0}}k3t(){return this.KLt}P3t(){if(0!==this.ZLt){for(let t=this.qLt;t<this.ZLt;++t){const i=this.sOt.get(t);if(i&&!i.N_())return}let t=this.$c.z3(),n=C.Po(t.t9()+1,0),s=0;for(let t=this.qLt;t<this.ZLt;++t){const o=this.sOt.get(t);if(o){let i=o.E_(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const l=i[2*t],c=i[2*t+1],f=(l!==r&&(e===r||l<e)&&(e=l),c>h&&(h=c),c-l),d=Number(f)/1e9;n[t]+=d}const a=h-e,u=Number(a)/1e9;s+=u}}if(this.XLt=C.lr(s,0,1),this.$c.Gq()){const e=t.ik(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,M]of h){const w=[...y._k()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.Jc(),A3t:C.lr(M,0,1),E3t:C.lr(w,0,1)})}const m=this.XLt-t.jV().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(C.lr(m,0,1),this.XLt,r)}for(let t=this.qLt;t<this.ZLt;++t)this.sOt.delete(t);this.qLt=this.ZLt,this.ZLt=0}}F3t(t){this.sOt.set(this.MLt.sS(),t)}_3(){return this.XLt}j3t(t,s,i,e,h,r){return this.iOt=t,this.eOt=s,this.hOt.uu(i,e,h,r),this.nOt||(this.nOt=new Promise(t=>{this.oOt=t})),this.nOt}z3t(){if(this.iOt){let t=this.f3t(),s=this.hOt,i=C.lr(Math.floor(s.yu()),0,t.width),e=C.lr(Math.floor(s.Mu()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:C.lr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:C.lr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=C.Co(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}C.Go(t,this.iOt,this.eOt).then(t=>{this.rOt&&URL.revokeObjectURL(this.rOt),this.rOt=URL.createObjectURL(t),this.nOt=null,this.oOt(this.rOt)}),this.iOt="",this.eOt=1}}B3t(){return this.rOt}U3t(t){t?this.aOt++:this.aOt--}W3t(){return 0<this.aOt}Q3t(t){const s=this.IS();if(2===t)this.dOt=C.ir(C.qg.dS,this.IS()),this.dOt.MI("Arial"),this.dOt.wI(16),this.dOt.LI("center"),this.dOt.RI("center"),this.dOt.WI(300,200);else if(0===t){const i=this.$c.J3t();i&&i.MW(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.V3t("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxNi4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+DQo8c3ZnIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHdpZHRoPSIxNzAwLjc5MDA0cHgiIGhlaWdodD0iMTcwMC43OTAwNHB4IiB2aWV3Qm94PSIyODcgMzE3IDExMjUgMTEyNSINCgkgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAwIDAgMTcwMC43OTAwNCAxNzAwLjc5MDA0IiB4bWw6c3BhY2U9InByZXNlcnZlIj4NCjxnIGlkPSJsb2dvIj4NCgk8Zz4NCgkJPGc+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0ZGRkZGRiIgZD0iTTM1NC45Nzc1NCwxMTk1LjYyMzA1DQoJCQkJYzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NjI5LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOGwtNC45MzI2Miw4LjU0MTk5DQoJCQkJYy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNjU2LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMzMiwwLDUuOTYxOTEtMC40NDMzNiw4LjcyNjU2LTEuMjY4NTVjNi4yOTQ5Mi0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTczOCw2LjUwMDk4bDQuOTMxNjQsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM4NDgsNS43MzQzOGMtOS4wMDM5MSw1LjYwMTU2LTE5LjYzMTg0LDguODM3ODktMzEuMDE2Niw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzI5Ni4xNTgyLDEyMjEuOTU3MDMsMzIyLjQ5MjE5LDExOTUuNjIzMDUsMzU0Ljk3NzU0LDExOTUuNjIzMDUNCgkJCQlMMzU0Ljk3NzU0LDExOTUuNjIzMDV6IE03MDMuMjE0ODQsMTI1OS4xNzU3OGMtMTQuNTU5NTctOS44MTczOC0yMC4yMDMxMy0yMC4wMzIyMy0yMC4yMDMxMy0zMy4wODAwOA0KCQkJCWMwLTE4LjQ4OTI2LDE1LjcxNDg0LTI5Ljc2MzY3LDM4LjI2NjYtMjkuNzYzNjdjOS42NTcyMywwLDE4LjcyMTY4LDIuNTQyOTcsMjYuNTU5NTcsNi45OTQxNA0KCQkJCWMyLjA0OTgsMS4xNjQwNiwyLjc2MTcyLDMuNzgzMiwxLjU4MzAxLDUuODI0MjJsLTMuNDE3OTcsNS45MTk5MmMtMy4yNDcwNyw1LjYyNDAyLTkuOTA4Miw4LjMzMTA1LTE2LjE1MzMyLDYuNTQ4ODMNCgkJCQljLTIuNzIzNjMtMC43NzYzNy01LjU5ODYzLTEuMTkyMzgtOC41NzEyOS0xLjE5MjM4Yy0xMC40OTAyMywwLTExLjU5ODYzLDkuNTc2MTctNC44NTc0MiwxNC4xMjMwNWwyMy42ODY1MiwxNS45NzY1Ng0KCQkJCWM5Ljk5MDIzLDYuNzM4MjgsMTUuODk1NTEsMTcuMDY2NDEsMTUuODk1NTEsMjguNzE4NzVjMCwxOC43ODYxMy0xNS4wMDY4NCwzMy4zMDc2Mi0zOC4yNjc1OCwzMy4zMDc2Mg0KCQkJCWMtOS41MjI0NiwwLTE4LjU4Nzg5LTEuOTU3MDMtMjYuODE1NDMtNS40OTAyM2MtNy43ODEyNS0zLjMzOTg0LTEwLjkzMzU5LTEyLjc4MjIzLTYuNjk3MjctMjAuMTE4MTZsMy40ODczLTYuMDQxOTkNCgkJCQljMS4yMTM4Ny0yLjA5OTYxLDMuOTMxNjQtMi43NTk3Nyw1Ljk3NDYxLTEuNDU2MDVjNi44NTkzOCw0LjM4MjgxLDE2LjQ5MDIzLDcuNTk0NzMsMjQuNzU4NzksNy41OTQ3Mw0KCQkJCWMxMC41NDU5LDAsMTEuMzI4MTMtOS45NTg5OCwzLjc2NzU4LTE1LjA1NzYyTDcwMy4yMTQ4NCwxMjU5LjE3NTc4TDcwMy4yMTQ4NCwxMjU5LjE3NTc4eiBNOTg0LjYzMDg2LDEyMDIuMDAwOTgNCgkJCQljMC0yLjM0NzY2LDEuOTAzMzItNC4yNTE5NSw0LjI1MTk1LTQuMjUxOTVoOS45MjE4OGM3LjgyNzE1LDAsMTQuMTcyODUsNi4zNDU3LDE0LjE3Mjg1LDE0LjE3MzgzdjU3LjQwMTM3DQoJCQkJYzAsOC42MTAzNSw2Ljk4MDQ3LDE1LjU5MDgyLDE1LjU5MDgyLDE1LjU5MDgyczE1LjU5MDgyLTYuOTgwNDcsMTUuNTkwODItMTUuNTkwODJ2LTU3LjQwMTM3DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoOS45MjA5YzIuMzQ4NjMsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2NjcuMzIzMjQNCgkJCQljMCwyNC4yNjU2My0xOS42NzA5LDQzLjkzNzUtNDMuOTM2NTIsNDMuOTM3NXMtNDMuOTM3NS0xOS42NzE4OC00My45Mzc1LTQzLjkzNzVWMTIwMi4wMDA5OEw5ODQuNjMwODYsMTIwMi4wMDA5OHoNCgkJCQkgTTQ2Ni44NjkxNCwxMTk1LjYyMzA1YzMyLjQ4NDM4LDAsNTguODE4MzYsMjYuMzMzOTgsNTguODE4MzYsNTguODE5MzRjMCwzMi40ODQzOC0yNi4zMzM5OCw1OC44MTkzNC01OC44MTgzNiw1OC44MTkzNA0KCQkJCWMtMzIuNDg2MzMsMC01OC44MTkzNC0yNi4zMzQ5Ni01OC44MTkzNC01OC44MTkzNEM0MDguMDQ5OCwxMjIxLjk1NzAzLDQzNC4zODI4MSwxMTk1LjYyMzA1LDQ2Ni44NjkxNCwxMTk1LjYyMzA1DQoJCQkJTDQ2Ni44NjkxNCwxMTk1LjYyMzA1eiBNNDY2Ljg2OTE0LDEyMjUuMDMzMmMtMTYuMjQzMTYsMC0yOS40MTAxNiwxMy4xNjY5OS0yOS40MTAxNiwyOS40MDkxOA0KCQkJCXMxMy4xNjY5OSwyOS40MDgyLDI5LjQxMDE2LDI5LjQwODJjMTYuMjQxMjEsMCwyOS40MDgyLTEzLjE2NjAyLDI5LjQwODItMjkuNDA4MlM0ODMuMTEwMzUsMTIyNS4wMzMyLDQ2Ni44NjkxNCwxMjI1LjAzMzINCgkJCQlMNDY2Ljg2OTE0LDEyMjUuMDMzMnogTTU1Ni43MzI0MiwxMzExLjEzNDc3Yy0yLjM0NzY2LDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtOTQuOTYxOTENCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzM4My0xNC4xNzM4M2gzLjk1ODk4YzQuNjI1LDAsOC45NTg5OCwyLjI1Njg0LDExLjYxMTMzLDYuMDQ1OWw0MS4xMjIwNyw1OC43NDcwN3YtNTAuNjE5MTQNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2g5LjkyMTg4YzIuMzQ3NjYsMCw0LjI1MTk1LDEuOTA0Myw0LjI1MTk1LDQuMjUxOTV2OTQuOTYwOTQNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3MzgzLDE0LjE3Mjg1aC0zLjk1ODk4Yy00LjYyNSwwLTguOTU4OTgtMi4yNTU4Ni0xMS42MTEzMy02LjA0NDkybC00MS4xMjIwNy01OC43NDYwOXY1MC42MTgxNg0KCQkJCWMwLDcuODI5MS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVINTU2LjczMjQyTDU1Ni43MzI0MiwxMzExLjEzNDc3eiBNMTIxNS4wMjA1MSwxMjExLjkyMjg1DQoJCQkJYzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTcyODUtMTQuMTczODNoNTAuMzE1NDNjMi4zNDg2MywwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyDQoJCQkJYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcyODUsMTQuMTcyODVoLTYuMDI0NDF2NzUuMTE4MTZjMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMTg4DQoJCQkJYy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMjM0LTQuMjUxOTUtNC4yNXYtODUuMDQxMDJoLTE1Ljk0NDM0Yy0yLjM0ODYzLDAtNC4yNTE5NS0xLjkwMzMyLTQuMjUxOTUtNC4yNTE5NVYxMjExLjkyMjg1DQoJCQkJTDEyMTUuMDIwNTEsMTIxMS45MjI4NXogTTc3Ni40NDkyMiwxMjExLjkyMjg1YzAtNy44MjgxMyw2LjM0NTctMTQuMTczODMsMTQuMTczODMtMTQuMTczODNoNTAuMzE0NDUNCgkJCQljMi4zNDk2MSwwLDQuMjUxOTUsMS45MDQzLDQuMjUxOTUsNC4yNTE5NXY1LjY2OTkyYzAsNy44MjcxNS02LjM0NTcsMTQuMTcyODUtMTQuMTcxODgsMTQuMTcyODVoLTYuMDI1Mzl2NzUuMTE4MTYNCgkJCQljMCw3LjgyOTEtNi4zNDU3LDE0LjE3Mjg1LTE0LjE3Mjg1LDE0LjE3Mjg1aC05LjkyMDljLTIuMzQ5NjEsMC00LjI1MTk1LTEuOTAyMzQtNC4yNTE5NS00LjI1di04NS4wNDEwMmgtMTUuOTQ1MzENCgkJCQljLTIuMzQ3NjYsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMTEuOTIyODVMNzc2LjQ0OTIyLDEyMTEuOTIyODV6IE05MjkuNjA0NDksMTI3Mi4wMjI0NmwyNi45NTgwMSwzMi4xMjc5Mw0KCQkJCWMyLjMxNDQ1LDIuNzU3ODEsMC4zNDM3NSw2Ljk4NDM4LTMuMjU2ODQsNi45ODQzOGgtMTkuNzA1MDhjLTQuMTg5NDUsMC04LjE2NTA0LTEuODUxNTYtMTAuODU3NDItNS4wNjA1NWwtMjIuNjgxNjQtMjcuMDMxMjUNCgkJCQl2MjcuODQxOGMwLDIuMzQ3NjYtMS45MDMzMiw0LjI1LTQuMjUxOTUsNC4yNWgtOS45MjA5Yy03LjgyNzE1LDAtMTQuMTcyODUtNi4zNDM3NS0xNC4xNzI4NS0xNC4xNzI4NXYtODUuMDM5MDYNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2gyOS43NjM2N2MyMi43MDAyLDAsNDEuMTAyNTQsMTcuMTMzNzksNDEuMTAyNTQsMzguMjY4NTUNCgkJCQlDOTU2Ljc1NDg4LDEyNTIuNTkwODIsOTQ1LjQzNjUyLDEyNjYuNzAyMTUsOTI5LjYwNDQ5LDEyNzIuMDIyNDZMOTI5LjYwNDQ5LDEyNzIuMDIyNDZ6IE05MDAuMDYxNTIsMTIyMS44NDM3NXYzMi41OTg2M2g4LjUwMzkxDQoJCQkJYzEwLjk1ODk4LDAsMTkuODQyNzctNy4yOTc4NSwxOS44NDI3Ny0xNi4yOTg4M2MwLTkuMDAxOTUtOC44ODM3OS0xNi4yOTk4LTE5Ljg0Mjc3LTE2LjI5OThIOTAwLjA2MTUyTDkwMC4wNjE1MiwxMjIxLjg0Mzc1eg0KCQkJCSBNMTE1OC4zNTkzOCwxMTk1LjYyMzA1YzExLjM4NDc3LDAsMjIuMDEyNywzLjIzNzMsMzEuMDE3NTgsOC44Mzc4OWMxLjk0NzI3LDEuMjEwOTQsMi41ODQ5NiwzLjc0OTAyLDEuNDM4NDgsNS43MzQzOA0KCQkJCWwtNC45MzI2Miw4LjU0MTk5Yy0zLjI3ODMyLDUuNjc5NjktMTAuMDMzMiw4LjM3Njk1LTE2LjMxNzM4LDYuNTAwOThjLTIuNzY0NjUtMC44MjUyLTUuNjkzMzYtMS4yNjg1NS04LjcyNTU5LTEuMjY4NTUNCgkJCQljLTE2LjgyOTEsMC0zMC40NzI2NiwxMy42NDM1NS0zMC40NzI2NiwzMC40NzI2NmMwLDE2LjgyODEzLDEzLjY0MzU1LDMwLjQ3MjY2LDMwLjQ3MjY2LDMwLjQ3MjY2DQoJCQkJYzMuMDMyMjMsMCw1Ljk2MDk0LTAuNDQzMzYsOC43MjU1OS0xLjI2ODU1YzYuMjk1OS0xLjg3OTg4LDEzLjAzMzIsMC44MTE1MiwxNi4zMTgzNiw2LjUwMDk4bDQuOTMwNjYsOC41NDE5OQ0KCQkJCWMxLjE0NzQ2LDEuOTg4MjgsMC41MTA3NCw0LjUyMzQ0LTEuNDM3NSw1LjczNDM4Yy05LjAwNDg4LDUuNjAxNTYtMTkuNjMyODEsOC44Mzc4OS0zMS4wMTc1OCw4LjgzNzg5DQoJCQkJYy0zMi40ODUzNSwwLTU4LjgxOTM0LTI2LjMzNDk2LTU4LjgxOTM0LTU4LjgxOTM0QzEwOTkuNTQwMDQsMTIyMS45NTcwMywxMTI1Ljg3NDAyLDExOTUuNjIzMDUsMTE1OC4zNTkzOCwxMTk1LjYyMzA1eiIvPg0KCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiMwMEZGREEiIGQ9Ik0xMzE4LjE5NzI3LDEyMDYuMDMyMjMNCgkJCQljMC03LjgyODEzLDYuMzQ1Ny0xNC4xNzM4MywxNC4xNzI4NS0xNC4xNzM4M2MyMC42NTYyNSwwLDQxLjMxMjUsMCw2MS45Njg3NSwwYzMuNDI5NjksMCw1LjQ1MDIsMy44ODA4NiwzLjQ4MzQsNi42OTA0Mw0KCQkJCWwtMTkuMjk2ODgsMjcuNTY3MzhjMTUuNTQyOTcsOC4zNzU5OCwyNi4xMDY0NSwyNC44MDA3OCwyNi4xMDY0NSw0My42OTUzMWMwLDI3LjM5NzQ2LTIyLjIwODk4LDQ5LjYwNjQ1LTQ5LjYwNjQ1LDQ5LjYwNjQ1DQoJCQkJYy0xNi42ODg0OCwwLTMxLjQ1MTE3LTguMjQwMjMtNDAuNDQzMzYtMjAuODc1OThjLTEuNDUwMi0yLjAzOTA2LTAuODMxMDUtNC44OTk0MSwxLjMzNTk0LTYuMTUyMzRsMTAuOTc3NTQtNi4zMzc4OQ0KCQkJCWM0Ljg4MTg0LTIuODE4MzYsMTAuOTc5NDktMi40NzU1OSwxNS41MTQ2NSwwLjg3MzA1YzMuNTI4MzIsMi42MDU0Nyw3Ljg5MTYsNC4xNDY0OCwxMi42MTUyMyw0LjE0NjQ4DQoJCQkJYzExLjc0MjE5LDAsMjEuMjU5NzctOS41MTg1NSwyMS4yNTk3Ny0yMS4yNTk3N3MtOS41MTc1OC0yMS4yNTk3Ny0yMS4yNTk3Ny0yMS4yNTk3N2gtMTUuMjE3NzcNCgkJCQljLTMuNDI5NjksMC01LjQ1MDItMy44ODA4Ni0zLjQ4NDM4LTYuNjkwNDNsMTguMTM1NzQtMjUuOTA4MmgtMzIuMDA5NzdjLTIuMzQ4NjMsMC00LjI1MTk1LTEuOTAzMzItNC4yNTE5NS00LjI1MTk1VjEyMDYuMDMyMjN6DQoJCQkJIi8+DQoJCTwvZz4NCgkJPGc+DQoJCQk8Zz4NCgkJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iI0RBRThGNyIgZD0iTTg1MC4zOTU1MSw4NTcuNTkxOA0KCQkJCQljLTUwLjM1NjQ1LDAtOTQuMzI1Mi0yNy4zNTY0NS0xMTcuODUyNTQtNjguMDIwNTFsLTgwLjAzMDI3LDQ2LjIwNDFjLTQuNjU1MjcsMi42ODk0NS02LjEzMTg0LDguNzE4NzUtMy4yNDkwMiwxMy4yNTU4Ng0KCQkJCQljNDIuMjM3Myw2Ni40ODYzMywxMTYuNTMzMiwxMTAuNjA3NDIsMjAxLjEzMTg0LDExMC42MDc0MmM4OC4xMjU5OCwwLDE2NS4wNzEyOS00Ny44NzUsMjA2LjI0MzE2LTExOS4wMzYxM2wtODAuNDg3My00Ni40Njk3Mw0KCQkJCQljLTQuMzEzNDgtMi40OTAyMy05LjgwMTc2LTEuMjA1MDgtMTIuNTcwMzEsMi45MzU1NUM5MzkuMTc1NzgsODMzLjU2MjUsODk3LjU5MTgsODU3LjU5MTgsODUwLjM5NTUxLDg1Ny41OTE4DQoJCQkJCUw4NTAuMzk1NTEsODU3LjU5MTh6IE0xMTM2LjcyMTY4LDU1Ni4yMTc3N2M0LjYxNDI2LTIuNjYzMDksNi4xMTAzNS04LjYxOTE0LDMuMzEyNS0xMy4xNTEzNw0KCQkJCQljLTU5LjkxNTA0LTk3LjAzMDI3LTE2Ny4yMjQ2MS0xNjEuNjk0MzQtMjg5LjYzODY3LTE2MS42OTQzNGMtMTI1Ljg5MzU1LDAtMjM1LjgxMzQ4LDY4LjM5MjU4LTI5NC42MzM3OSwxNzAuMDQ5OA0KCQkJCQlsODAuMzc2OTUsNDYuNDA2MjVjNC4zOTc0NiwyLjUzOTA2LDEwLjAwMTk1LDEuMTQ5NDEsMTIuNzEwOTQtMy4xNDU1MQ0KCQkJCQljNDIuMTY0MDYtNjYuODUxNTYsMTE2LjY2ODk1LTExMS4yNjM2NywyMDEuNTQ1OS0xMTEuMjYzNjdjODguMTI1OTgsMCwxNjUuMDcxMjksNDcuODc1OTgsMjA2LjI0MzE2LDExOS4wMzYxMw0KCQkJCQlMMTEzNi43MjE2OCw1NTYuMjE3Nzd6Ii8+DQoJCQkJPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGZpbGw9IiNBNUJBQzgiIGQ9Ik04NTAuMzk1NTEsOTU5LjYzODY3DQoJCQkJCWMtODQuNTk4NjMsMC0xNTguODk0NTMtNDQuMTIxMDktMjAxLjEzMTg0LTExMC42MDc0MmMtMi44NzY5NS00LjUzMDI3LTEuMzk5NDEtMTAuNTcwMzEsMy4yNDkwMi0xMy4yNTU4Nmw4MC4wMzAyNy00Ni4yMDQxDQoJCQkJCWMtMTEuNTgxMDUtMjAuMDE2Ni0xOC4yMDk5Ni00My4yNTQ4OC0xOC4yMDk5Ni02OC4wNDE5OWMwLTc0Ljc4NTE2LDYwLjU1NzYyLTEzNi4wNjI1LDEzNi4wNjI1LTEzNi4wNjI1DQoJCQkJCWM0Ny4xOTYyOSwwLDg4Ljc4MDI3LDI0LjAyOTMsMTEzLjE4NTU1LDYwLjUyMjQ2YzIuNzY0NjUsNC4xMzM3OSw4LjI2MzY3LDUuNDIxODgsMTIuNTcwMzEsMi45MzU1NWw4MC40ODczLTQ2LjQ2OTczDQoJCQkJCWMtNDEuMTcxODgtNzEuMTYwMTYtMTE4LjExNzE5LTExOS4wMzYxMy0yMDYuMjQzMTYtMTE5LjAzNjEzYy04NC44NzY5NSwwLTE1OS4zODE4NCw0NC40MTIxMS0yMDEuNTQ1OSwxMTEuMjYzNjcNCgkJCQkJYy0yLjcwNjA1LDQuMjkxMDItOC4zMTgzNiw1LjY4MTY0LTEyLjcxMDk0LDMuMTQ1NTFsLTgwLjM3Njk1LTQ2LjQwNjI1DQoJCQkJCWMtMjguOTUyMTUsNTAuMDQwMDQtNDUuNTIzNDQsMTA4LjEzOTY1LTQ1LjUyMzQ0LDE3MC4xMDc0MmMwLDE4Ni45NjM4NywxNTEuMzk0NTMsMzQwLjE1NzIzLDM0MC4xNTcyMywzNDAuMTU3MjMNCgkJCQkJYzEyMi40MTQwNiwwLDIyOS43MjM2My02NC42NjQwNiwyODkuNjM4NjctMTYxLjY5NTMxYzIuNzk0OTItNC41MjYzNywxLjI5NDkyLTEwLjQ5MDIzLTMuMzEyNS0xMy4xNTEzN2wtODAuMDgzMDEtNDYuMjM3Mw0KCQkJCQlDMTAxNS40NjY4LDkxMS43NjM2Nyw5MzguNTIxNDgsOTU5LjYzODY3LDg1MC4zOTU1MSw5NTkuNjM4Njd6Ii8+DQoJCQk8L2c+DQoJCQk8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZmlsbD0iIzAwRkZEQSIgZD0iTTExMzcuMTg1NTUsNzU4LjExMzI4di03My4xNjc5N2wtNjMuMzY1MjMsMzYuNTgzOTgNCgkJCQlMMTEzNy4xODU1NSw3NTguMTEzMjhMMTEzNy4xODU1NSw3NTguMTEzMjh6IE0xMDI2LjU3NjE3LDcwNS4xNjQwNmwxMjAuMDU4NTktNjkuMzE2NDENCgkJCQljMTIuNTY4MzYtNy4yNTU4NiwyOC4zNDQ3MywxLjg1MjU0LDI4LjM0NTcsMTYuMzY2MjF2MTM4LjYzMDg2Yy0wLjAwMDk4LDE0LjUxMjctMTUuNzc3MzQsMjMuNjIyMDctMjguMzQ1NywxNi4zNjYyMQ0KCQkJCWwtMTIwLjA1ODU5LTY5LjMxNjQxQzEwMTQuMDI4MzIsNzMwLjY0OTQxLDEwMTQuMDI4MzIsNzEyLjQwOTE4LDEwMjYuNTc2MTcsNzA1LjE2NDA2eiIvPg0KCQk8L2c+DQoJPC9nPg0KPC9nPg0KPC9zdmc+DQo=").then(t=>{"done"===this.TOt?s.yb(t):this.pOt.mOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Y3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAmd137hFVqjO7zCKIRGZ881JRAAAFY0lEQVR42u2aPW/bVhSGn1iiPizZ8D+QgSJBNglFmiboQA0NUKAD1XotYA0BOspAkZnqx24vnTrIQNCpg4QkQMcYKDoW9j9w5y6qLNqWFDlvh3tJUa6ddHBhAuS7SKBIQffhuee851CQKVOmTJkyZcqUKXmqa8O+uyNlABKsFRmdP0o5AOle2gHoWdoBzFrpBHACwPeetJNmAFSlt6kGwGH0LqUAVqRuqgHkpEaqAVRkfvOWr+Dh9Rc4j6VvwnrhPNAbgK2ezj+yx7Z6GjUuASi4Ch4lHQAGwBeRK1rROQAdUx5K0hE4NUkaAdS02ZEuoms2wkCSgvYSgFJfkn6CobkSPG0mEcAOrHnGFOxAToHNjk/MygLgO/PxL0BN9yRdQKlufMQAoCdJGi8BOJYknXTJ269cu9HtdqNb4Ni6oimUbFb0dAZQ1DmULJ+TFtT0qQHwg73mLlCMfFUMQPR5VWrbmttNHICC1KDiSZ+w3pMOwFPDhP4IYFtv4ZX0nIorbUBNmjWAiqdZg5fmNFd6jvPhJQDjAV9LI0r28IpmycsBZalNWfoRWJcuoKY9c7cCkwpOwdcIqNT1BmrSgQkNbQAvpAGOF+aHOIBpCxhKR/TVBNjVOHkAOgrg2N6aoU7sklmVidtD7bNm/fIrjaBmk+Sxea142iBnTyguAfjZZscNXLOdXFM8EgVgXRpDz/6yonTEts6AXdV1APTVoKigFSXEmj3XN0kSV01WFQwAHC8O4Mhagye8NgHS137SALzsS3dxwhtXkQ4oaw64eqomOFKXbc2xJbFLTX8DOHYnsKsJu2Gdu8IIuTqjrMB8eyM5ACIFXQo2S5t7lNMM6AdFTaCgADqahHW8EQIohBk9rzEdE+JXAtjVmHWpDTmplUAA96Ea/bJDnVKSWjgaFTSHqubgmjVDXQchgFy4wBXNcXV6LYC8RjbEypomcCAyBopRShxqAn21yenM8WawqjOoKVbmLYBFndeImsnyVwJY1RR8NW1FTRiA6UNTCsP6fKwLONQBZTXx1WVbT0KbtwygvAxg81oAZU0xe2QYxkmyrDDx2DzWBXTUZFs7dNQwHUEMwN4VAKb47wOQ1wj8Gx0+/Y8A8powVJtt7XOoxn8A8N4IqCrA8cJUmzgAl3JAUWN8tSjqDX0NwI/XbwugGLe178oBK7bBaBesm0gggOUqwLrOHe8c1jV2NAMOw/XFAFRth2dr/burANS1cSc0C8kDsB7zAZvgKCjoLTiaFqwpmvwLQC7e2b3PB4CrZj48KXkAKktOEPr6VqeAr680udzEWACluK0LreJ1ThBe6+w4HkfJAhD1AtbAu3qgPcDVX2oCK9bqxwFQ1+fRsVW7va/uBZpAWaND652TCGBoM1rHHN6VmQlsq6cdE+4mC75oLAC49prKB1zTDd6NukHIKahbIkkEsGrmAQWZbZqXNLClrg04dTP4KnjnCwBfmgkZT7WD45k94C8BmA3MPGBgeqcbfQBxwwDsRMi3N7Iqc3dzsuVhV5ofkevpJOoGKUn6Ax5L92F49USoayZCls08uQDiM0ETCWPb8k7DMmH02SICGC7ayVhnsABwEpsZQkfxUpI4ALGpsFn4xCbHcVjnwgnvAkBh0U6CbzqrXgzA1E6FB9YOJGcacgUAfl36t0Ro/SIDUDEL/D1WBcJr5q0oRoJ2LQZgZJ4LPIu2RCPJAJafDLm2Yr2OHmQ4H0vzBksA2PKl38L3fY0aLAFYejK0ZpJhelVKzkj8dlRNzkj8dpRP0DTkVjTUXroB9PVnqtefS9I05BZU8NOdAyUl5q8RtwUg6KYcwP1Up8CanpMpU6ZMmTLdgP4BRYsi23xEdOAAAAAASUVORK5CYII=").then(t=>{"done"===this.TOt?s.yb(t):this.pOt.gOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.Y3t("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAABABAMAAACekdKMAAAAMFBMVEUAAAByfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYZyfYYgo7vbAAAAD3RSTlMAdxHdu4hmVZnuRMwzqiLYE4y2AAAFw0lEQVR42u2Yy+9LQRTHp6Xq0VIkXkFvwkYslAWJiGJj2a6sJJe/oF3YWGElEQmxkYi4ErFWNpatWFmIx9Lm1sJCLKgqraqv82h726l6hOuRzDf53TtnOr+ZOZ+ZOffca5ycnJycnJycnJycnJycnJz+pi7g2G9osxjvzX8qB8ABcAAcgH8XwDa85dspNOiaRDuAR4U0PnHtDuyy7IJRJS6gvVmL6TywVkp4ZxIhulUxFvlaXQTrgEHbnMDH5XRjlXCdb+uAnc2ojWgFFTYBZ8e9tzcaswAk6v/3K4sPfPNRFj87IXj+KXQUS9m2jXoH1lMuLq2DtEcAtNMBT9PjanFq7ySAhbABVEAaeDaAwkk2D7GRqctAMQJIq2sBauLnB/VxCfqKpWrbRhSC1W5SMQ9RTgBUwKpF1ccmAIQ2gCxE+20Au9nSESvDgeIDkJSBMpA9vgyXdsj0H0GORL3n2fbwPOKoSQS4Q2cBOGzSJbQYAHDbZEI+rEuBcyZRlF71fIP/x0wBuIBOw6xH3xu2GQFAP2cegmvSwHkeqBZjECzB46UXD3bg8UKJCT6QYzgDY9uiU7hC11doERq6MAZ2CPJ7ipEulOrteDcB4KOZBpBG7zrV1JGzATzmIdnrl/go3bRiBJBHlZc+6ItjuQQ+yFLz8Gka2LZFRVTFGdoQJQ0LPodHnXkS8AjlRWkBLwKQswAs0PDzGpcsAAMNuG+5WgdqxwjgEcp8qcBjN5oZdPhEvOfhU/hsbJuVloWV6WWgp2IBLxXQNEwLDfKqoMXrEQBjATiFA3qePlgAZJRl+EStdaAQjfgALOC1zfeX8ALV+7S69JdALWjxHGqztmxyMnTD6OOBWvAdGDkn60c6vrI5H4CPnOJsWQDe8G0hIU0MB8ojFx+AFAeqeitLy5FkL3w0yNNcSOx3oDxjjxaH9XxldZluY5NBfwrAQvQbRjQXAO8UqVq5dh6A7HCgWzgdFwBdgOX4lMZbTndkWWkDN07Bk+zItllLdHm1+FkLwBSADNDf8B0AnGOp5gFYgJEexwcgGQx4iyeD9ybFkWsbDZbv0+2Y8XvGtqMpWsUimpMAzA1AUrj5ALjm2wCoONKB+ACYsEeDlU04MMs4imeJQqljslSuD4xl/zgAsx6ku/8DgDwaO9AwFU56qhzOPiXpKCzCpSSdb8v+CQDmXshb99cARAPFCOA1chWaFXlP55yn2FqEgiFvOSzYtmiJzisKB7MxQPS8iO63YsD3AHDv8QPgjR92eKuf9vts1wdZjvZhN4XajD35FNDiR7ln0LYBaILY+OZT4DsA+BkTP4AUrgXkxSJcDFps+72X7EGlx6mBbU/lAbdQjvKA7hSAlSuHxdw0gORsHrAUnXkAUuj+AQAZdHGRp9bShX2ECz1JRSk4zNhRJqj5SZQJfpgCUNS2eRsAP/usTDAxPxFKA834AZgAOM1z6qGgxxpdmUDQNjP25LtAsojxu0AehSkAF6RLXWR/EkAdVYEevQtswVtpMwuAB1JGh2jbxQcgBKrig/qSxTD6o2Nm7fttSY6uUnErV+jb4CJyaArAI5luJkCDOy5HAPISSB5A3wYbhJERahvtPALAAw2EI9Vzsh2TTuk23qEceN9d4vVVv227hNroe0CRi/o9IKTZTQFIAc/M8jwGEiouG2/042u8u25uAuPvAavRH7XhzqcBpICdRpssRa+aNLFoh2JeyBzU08fih/ht20WZXghW34s+/ZQnAKhzojsSH4CC/sjARPKamLXacOfTAIwfNSkCbROLluG9Tm2gdl3PY178tu2SBIpFQ6fHH//2GAvAogCkjtGDEAFQYPsu6DdBqw11bgFIF8dNHsQGIEFRSDOe0RS9YYJk23JMrw+/Cr9bFX0VXmNsACbhA088qXhBrMYAlq8Gjhh//FX4YNSGO7cASO9n9B99AuHk5OTk5OTk5OTk5OTk5OTk5OT0VX0B7+fX+9cwWYYAAAAASUVORK5CYII=").then(t=>{"done"===this.TOt?s.yb(t):this.pOt.yOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async V3t(t){t=new URL(t,this.$c.H3t()).toString();const s=await C.Mo(t),i=await this.$c.q3t(s,2048,2048);return this.IS().oE(i,{a2:"high"})}async Y3t(t){t=new URL(t,this.$c.H3t()).toString();const s=await C.Mo(t);return this.IS().oE(s,{a2:"high"})}Z3t(){this.$c.ef("runtime","hide-cordova-splash")}X3t(){this.uOt=Date.now(),this.$c.Rf().addEventListener("loadingprogress",this.fOt),this.lOt=requestAnimationFrame(()=>this.K3t());const t=this.$c.$3t();3!==t&&this.Z3t()}async t4t(){const t=this.IS(),s=(this.cOt=1,this.$c.$3t());4===s&&await this.xOt,this.bOt=null,this.xOt=null,-1!==this.lOt&&(cancelAnimationFrame(this.lOt),this.lOt=-1),this.$c.Rf().removeEventListener("loadingprogress",this.fOt),this.fOt=null,this.dOt&&(this.dOt.er(),this.dOt=null),this.$c.s4t(),t.XN(),this.pOt.mOt&&(t.yb(this.pOt.mOt),this.pOt.mOt=null),this.pOt.gOt&&(t.yb(this.pOt.gOt),this.pOt.gOt=null),this.pOt.yOt&&(t.yb(this.pOt.yOt),this.pOt.yOt=null),t.ZN(0,0,0,0),t.$w(),this.TOt="done",this.qLt=t.sS(),3===s&&this.Z3t()}K3t(){if(-1!==this.lOt){const t=this.IS(),s=(t.XN(),this.lOt=-1,this.$c.mO().VQ()),i=this.$c.$3t();if(3!==i&&(this.G3t(t),t.ZN(0,0,0,0),t.bN(),t._M(),t.vN(null)),0===i)this.i4t(s);else if(1===i)this.e4t(s,120,0);else if(2===i)this.h4t(s);else if(3===i)C.Dn();else{if(4!==i)throw new Error("invalid loader style");this.r4t(s)}t.$w(),this.lOt=requestAnimationFrame(()=>this.K3t())}}h4t(t){t?this.dOt.AI(1,0,0):this.dOt.AI(.6,.6,.6),this.dOt.hf(Math.round(100*this.cOt)+"%");const s=this.CLt/2,i=this.GLt/2,e=(Aa.il(s-150,i-100,150+s,100+i),this.IS());e.vN(this.dOt.xb()),e.xw(Aa,this.dOt.S_())}e4t(t,s,i){const e=this.IS(),h=(e.OM(),t?e.SN(1,0,0,1):e.SN(.118,.565,1,1),this.CLt/2),r=this.GLt/2,n=s/2;I.uu(h-n,r-4+i,Math.floor(s*this.cOt),8),e.Rect(I),I.uu(h-n,r-4+i,s,8),I.offset(-.5,-.5),I.Nu(.5,.5),e.SN(0,0,0,1),e.Dw(I),I.Nu(1,1),e.SN(1,1,1,1),e.Dw(I)}i4t(t){const s=this.IS(),i=this.$c.J3t();if(i){const e=i.xb();if(e){const h=e.im(),r=e.pm(),n=this.CLt/2,o=this.GLt/2,a=h/2,u=r/2;Aa.il(n-a,o-u,n+a,o+u),s.vN(e),s.Yu(Aa),this.e4t(t,h,16+u)}else this.e4t(t,120,0)}else this.e4t(t,120,0)}r4t(t){let s=this.IS(),i=this.pOt.mOt,e=this.pOt.gOt,h=this.pOt.yOt,r=Date.now(),n=(0===this.MOt&&(this.uOt=r),this.$c.n4t()||this.$c.o4t()&&!this.$c.a4t()),o=n?0:200,a=n?0:3e3,u=1,l=("fade-in"===this.TOt?u=Math.min((r-this.uOt)/300,1):"fade-out"===this.TOt&&(u=Math.max(1-(r-this.SOt)/300,0)),s.OM(),s.SN(.231*u,.251*u,.271*u,u),I.set(0,0,this.CLt,this.GLt),s.Rect(I),Math.ceil(this.CLt)),c=Math.ceil(this.GLt),f,d;256<this.GLt?(s.SN(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.uu(0,.8*c-d/2,f,d),s.Rect(I),t?s.SN(u,0,0,u):s.SN(.161*u,.953*u,.816*u,u),f=l*this.cOt,I.uu(.5*l-f/2,.8*c-d/2,f,d),s.Rect(I),s.SN(u,u,u,u),s._M(),e&&(f=1.5*C.lr(.22*c,105,.6*l),d=f/8,I.uu(.5*l-f/2,.2*c-d/2,f,d),s.vN(e),s.Rect(I)),i&&(f=Math.min(.395*c,.95*l),d=f,I.uu(.5*l-f/2,.485*c-d/2,f,d),s.vN(i),s.Rect(I)),h&&(f=1.5*C.lr(.22*c,105,.6*l),d=f/8,I.uu(.5*l-f/2,.868*c-d/2,f,d),s.vN(h),s.Rect(I))):(s.SN(.302*u,.334*u,.365*u,u),f=l,d=Math.max(.005*c,2),I.uu(0,.85*c-d/2,f,d),s.Rect(I),t?s.SN(u,0,0,u):s.SN(.161*u,.953*u,.816*u,u),f=l*this.cOt,I.uu(.5*l-f/2,.85*c-d/2,f,d),s.Rect(I),s.SN(u,u,u,u),s._M(),i&&(f=.55*c,d=f,I.uu(.5*l-f/2,.45*c-d/2,f,d),s.vN(i),s.Rect(I))),this.MOt++,"fade-in"===this.TOt&&300<=r-this.uOt&&2<=this.MOt&&(this.TOt="wait",this.wOt=r),"wait"===this.TOt&&r-this.wOt>=a&&1<=this.cOt&&(this.TOt="fade-out",this.SOt=r),("fade-out"===this.TOt&&r-this.SOt>=300+o||n&&1<=this.cOt&&r-this.uOt<500)&&this.bOt()}}}{let U=self.Rs,W=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;U.u4t=class extends U.$h{constructor(t){t=Object.assign({},i,t),super(),this.l4t=t.messagePort,this.c4t=t.runtimeBaseUrl,this.f4t=t.previewUrl,this.d4t=!!t.headless,this.p4t=!!t.hasDom,this.m4t=!!t.isInWorker,n=t.ife,this.g4t=!!t.useAudio,this.y4t=t.exportType,this.M4t=t.isNWjs,this.qW=!!t.isiOSCordova,this.w4t=!!t.isiOSWebView,this.S4t=!!t.isWindowsWebView2,this.T4t=!!t.isAnyWebView2Wrapper,this.b4t=!!t.isFBInstantAvailable,this.x4t=!("preview"!==this.y4t||!t.isDebug),this.v4t=this.x4t,this.C4t=this.x4t,this.G4t=0,this.I4t=[],this._4t=[],this.D4t=!1,this.N4t="",this.E4t="",this.A4t="",this.L4t="",this.O4t=0,this.R4t=0,this.BA=self.devicePixelRatio,this.P4t=0,this.k4t=0,this.F4t=0,this.j4t=0,this.z4t=0,this.B4t=!1,this.Eg=!0,this.U4t=!1,this.W4t=!1,this.Q4t=!1,this.J4t=null,this.aJ=U.ir(U.JW,this,t),this.u7=U.ir(U.Dq,this),this.wft=U.ir(U.g0t,this),this.V4t=U.ir(U.jR,this,t.wrapperComponentIds),this.Y4t=U.ir(U.cAt,this),this.a$=U.ir(U.Zq,this),this.H4t=U.ir(U.nut,this),this.q4t=U.ir(U.aut,this),this.xut=U.ir(U.yut,this),this.Gg=U.ir(U.pg,{yg:t=>this.Z4t(t),wg:t=>this.X4t(t)}),this.K4t=new Map,this.$4t=[],this.tRt=new Map,this.sRt=new Map,this.iRt=0,this.eRt=[],this.hRt=new Set,this.rRt=[],this.nRt=[],this.oRt=new Map,this.aRt=!1,this.uRt=!1,this.lRt=0,this.cRt=0,this.fRt=new Map,this.dRt=new Set,this.pRt=new Set,this.mRt=[],this.gRt=[],this.yRt=null,this.MRt=!1,this.wRt="vsync",this.g2="trilinear",this.SRt=!1,this.TRt=!0,this.bRt=!1,this.xRt=!1,this.vRt=null,this.CRt={GRt:t=>{this.lOt=-1,this.IRt=-1,this.SX(t)},_Rt:t=>{this.IRt=-1,this.SX(t,!1,"skip-render")},DRt:()=>{this.lOt=-1,this.aL()}},this.lOt=-1,this.IRt=-1,this.NRt=0,this.ERt=0,this.ARt=!1,this.LRt=!1,this.ORt=!1,this.RRt=!0,this.PRt=!0,this.kRt=!1,this.FRt=0,this.jRt=new U.n1(1),this.zRt=()=>Math.random(),this.BRt=0,this.URt=0,this.WRt=0,this.QRt=0,this.JRt=0,this.t_t=1,this.VRt=1/30,this.YRt=0,this.HRt=U.ir(U.g0),this.qRt=U.ir(U.g0),this.ZRt=U.ir(U.g0),this.XRt=new Map,this.KRt=-1,this.$Rt=0,this.tPt=0,this.sPt=-1,this.iPt=0,this.ePt=0,this.hPt=0,this.rPt=!1,this.nPt="",this.oPt=!1,this.aPt="",this.Tj=null,this.uPt="",this.lPt=null,this.cPt=null,this.hGt=U.ir(U.Event.Rf),this.fPt=new Map,this.dPt=new Map,this.pPt=0,this.mPt=!1,this.gPt=!1,this.yPt=!1,this.MPt=[],this.wPt={pretick:U.ir(U.Event,"pretick",!1),tick:U.ir(U.Event,"tick",!1),tick2:U.ir(U.Event,"tick2",!1),instancecreate:U.ir(U.Event,"instancecreate",!1),instancedestroy:U.ir(U.Event,"instancedestroy",!1),beforelayoutchange:U.ir(U.Event,"beforelayoutchange",!1),layoutchange:U.ir(U.Event,"layoutchange",!1)},this.wPt.instancecreate.yz=null,this.wPt.instancedestroy.yz=null,this.z7=U.ir(U.Event.Rf),this.SPt=null;const s=(t,s)=>U.KIt.REt(this,t,s);this.TPt=U.ir(U.C0,s),this.bPt=U.ir(U.C0,s),this.xPt=U.ir(U.C0,s),this.vPt=U.ir(U.CPt,this,t.jobScheduler),t.canvas&&(this.yRt=U.ir(U.pLt,this)),this.l4t.onmessage=t=>this._OnMessageFromDOM(t.data),this.lj("runtime","visibilitychange",t=>this.GPt(t)),this.lj("runtime","wrapper-extension-message",t=>this.IPt(t)),this.lj("runtime","opus-decode",t=>this.J4(t.arrayBuffer)),this.lj("runtime","get-remote-preview-status-info",()=>this._Pt()),this.lj("runtime","js-invoke-function",t=>this.Q0t(t)),this.lj("runtime","go-to-last-error-script",self.goToLastErrorScript),this.lj("runtime","offline-audio-render-completed",t=>this.DPt(t)),this.hGt.addEventListener("window-blur",t=>this.NPt(t)),this.hGt.addEventListener("window-focus",()=>this.EPt()),this.a$.DZ(),this.q4t.DZ(),this.APt=null,this.LPt=new WeakMap,this.OPt={keyboard:null,X3:null,K3:null,t4:null},this.RPt=new WeakMap,this.PPt=[]}static Wb(t){return U.ir(U.u4t,t)}er(){U.Ln(this.$4t),this.tRt.clear(),this.sRt.clear(),this.u7.er(),this.u7=null,this.wft.er(),this.wft=null,this.V4t.er(),this.V4t=null,this.aJ.er(),this.aJ=null,this.Y4t.er(),this.Y4t=null,this.a$.er(),this.a$=null,this.H4t.er(),this.H4t=null,this.q4t.er(),this.q4t=null,this.xut.er(),this.xut=null,this.Gg.er(),this.Gg=null,this.yRt&&(this.yRt.er(),this.yRt=null),this.hGt.er(),this.hGt=null,this.kPt=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.FPt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.jPt(t)}}FPt(t){if(this.yPt){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const u=new U.Event(i);u.data=e,this.hGt.Jf(u)}if(n){const l=new U.Event(i,!0);for(const[c,f]of Object.entries(e))l[c]=f;this.Cq(l)}}const a=this.fPt.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.zPt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.zPt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.zPt(o,!1,""+t)}):this.zPt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.MPt.push(t)}zPt(t,s,i){this.l4t.postMessage({type:"result",responseId:t,isOk:s,result:i})}jPt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.dPt.get(s);i?h.resolve(e):h.reject(e),this.dPt.delete(s)}lj(t,s,i){let e=this.fPt.get(t);if(e||(e=new Map,this.fPt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}ef(t,s,i,e){this.l4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}w4(t,s,i,e){const h=this.pPt++,r=new Promise((t,s)=>{this.dPt.set(h,{resolve:t,reject:s})});return this.l4t.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}u6(t,s,i,e=-1){this.ef("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}l6(t,s,i){const e=this.pPt++,h=new Promise((t,s)=>{this.dPt.set(e,{resolve:t,reject:s})});return this.u6(t,s,i,e),h}IPt(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.dPt.get(s);i.resolve(t.params),this.dPt.delete(s)}else this.FPt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Cj(t,s,i){this.lj("wrapper-extension:"+t,s,i)}xj(t){return this.V4t.xj(t)}BPt(t){if(!this.Gq())throw new Error("not in debug mode");this.ef("runtime","post-to-debugger",t)}async e_t(t){U.LSt(this),this.Gq()?await W.e_t(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.aJ.yo("data.json"),this.UPt(),this.vPt.e_t()]);if(await this.WPt(s),await this.QPt(t),this.n4t()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.x3t()){const i=this.x3t();console.info(`[C3 runtime] Hosted in ${this.GO()?"worker":"DOM"}, rendering with WebGL ${i.G2()} [${i._E()}]`)}else this.v3t()&&console.info(`[C3 runtime] Hosted in ${this.GO()?"worker":"DOM"}, rendering with WebGPU [${this.v3t().GetAdapterInfoString()}]`);this.IS().nS()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.yPt=!0;for(const e of this.MPt)this.FPt(e);U.Ln(this.MPt),this.yRt&&this.yRt.X3t();for(const h of t.runOnStartupFunctions)this.I4t.push(this.JPt(h));if(await Promise.all([this.aJ.QQ(),...this.I4t]),U.Ln(this.I4t),!this.aJ.VQ())return this.yRt&&await this.yRt.t4t(),await this.hGt.Wf(new U.Event("beforeruntimestart")),await this.XN(),this.l4t.postMessage({type:"runtime-ready"}),this;this.yRt&&this.yRt.Z3t()}async JPt(t){try{await t(this.APt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async WPt(t){const s=t.project,i=(this.N4t=s[0],this.E4t=s[16],this.A4t=s[31],this.L4t=s[38],s[39]||"loading-logo.png"),e=(this.SRt=!!s[9],this.O4t=this.F4t=s[10],this.R4t=this.j4t=s[11],this.Y4t.XAt(this.O4t,this.R4t),this.P4t=this.O4t/2,this.k4t=this.R4t/2,this.wRt=s[37],this.MRt=!!s[40],this.g2=s[14],this.U4t=s[15],this.W4t=s[42],this.Q4t=s[17],this.B4t=!!s[18],this.z4t=s[19],this.cRt=s[21],this.bRt=s[22],this.aJ);if(e.TQ(s[45]),e.XQ(s[7],s[25]),e.xQ(s[8]),e.vQ(s[32]),e.GQ(s[28]),e.HQ(s[29]),0===this.z4t){let t;(t="flat"===e.z4()?e.IQ()+i:i)&&(this.J4t=e.kQ({url:t}))}this.yRt&&(this.yRt.p3t(U.pLt.w3t(s[12])),this.yRt.y3t(s[23]?"high":"low"),this.yRt.eS(0!==s[24]),this.yRt.vOt(s[34]),this.yRt.S3t(s[41]),this.yRt.COt(s[13]),this.yRt.GOt(s[30]),this.yRt.DOt(s[46],s[47]),this.yRt._Ot(s[26]),this.yRt.NOt(s[48]));const h=s[43],r=(h&&await this.VPt(h),this.YPt(),this.V4t.Jvt(),this.mRt=self.HPt(),s[2]);for(const u of r[1])this.V4t.Vvt(u);for(const l of r[0])this.V4t.Qvt(l);this.mRt=self.HPt(),this.qPt(),this.V4t.Zvt();for(const c of s[3]){const f=U.dut.Wb(this,this.$4t.length,c);this.$4t.push(f),this.tRt.set(f.Jc().toLowerCase(),f),this.sRt.set(f.zV(),f)}for(const d of s[4]){const p=this.$4t[d[0]];p.UGt(d)}for(const m of s[27]){const g=m.map(t=>this.$4t[t]);this.eRt.push(U.ir(U.BIt,this,g))}this.ZPt();for(const y of this.$4t)y.QGt();for(const M of s[5])this.u7.Wb(M);const n=s[1];if(n){const w=this.u7.zq(n);w&&this.u7.Fq(w)}for(const S of s[35])this.H4t.Wb(S);for(const T of s[33])this.a$.Wb(T);for(const b of s[44])this.q4t.Wb(b);this.q4t.cut()||(this.q4t.er(),this.q4t=null);for(const x of s[49])this.xut.Wb(x);this.xut.Tut()||(this.xut.er(),this.xut=null);for(const v of s[6])this.wft.Wb(v);this.wft.Y0t(),this.XPt(),U.Ln(this.mRt),this.PP();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.ef("runtime","set-target-orientation",{targetOrientation:o})}async VPt(t){const s=t.format;"image-sequence"===s?this.vRt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.vRt=new self.C3ExportToGIF(this,t):"webm"===s?this.vRt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.vRt=new self.C3ExportToMP4Video(this,t)),this.wRt="unlimited-frame",this.yRt.p3t("off"),this.BA=1,self.devicePixelRatio=1,await this.w4("runtime","set-exporting-to-video",{message:this.vRt.GetExportingMessageForPercent(0),duration:this.vRt.Jz()})}$3t(){return this.z4t}XOt(){return null!==this.vRt}KPt(){return this.vRt.Jz()}$Pt(){return this.vRt.GetFramerate()}tkt(){return this.vRt.e_t({width:this.yRt.NR(),height:this.yRt.AR()})}skt(){const t=this.NRt/this.$Pt();return this.vRt.AddFrame(this.yRt.f3t(),t)}ikt(){this.vRt&&this.vRt.yit()}DPt(t){this.vRt.OnOfflineAudioRenderCompleted(t)}ekt(){return this.vRt.$w()}o4t(){return this.b4t}Pg(){return this.Eg}x4(t){this.I4t.push(t)}N9(t){this.D4t=!!t}hkt(t){this.D4t&&this._4t.push(t)}P9(){return this._4t}RGt(){return this.iRt++}VGt(){return this.iRt}QEt(t){this.hRt.add(t)}JEt(t){this.hRt.delete(t)}ZOt(){return this.hRt}async QPt(t){this.yRt&&(await this.yRt.Co(t),this.yRt.Q3t(this.z4t))}async UPt(){const h=this.aJ;if(!h.G4("audio/webm; codecs=opus")){let t=null,s=h.bQ(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.rkt()&&h._Q()?await h.NQ(e):await h.wo(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.nkt(t,"opus-decoder-wasm"),await this.okt([i])}}async J4(t){const s=await this.akt("OpusDecode",{arrayBuffer:t},[t]);return s}async XN(){this.ARt=!0,this.BRt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.B4t){for(const h of this.$4t)h.AV()||h.sIt()||!h.QR()||h.Wbt();(async()=>{await this.aJ.QQ(),await t,this.Eg=!1,this.ukt()})()}else this.Eg=!1;this.aJ.JQ(),this.Gq()&&W.RuntimeInit(n);for(const r of this.u7.V3())r.sq();this.XOt()&&await this.tkt();const i=this.u7.jq(),e=(await i.p9(null,this.IS()),await i.v9(!0),this.$Rt=performance.now(),s(),this.B4t||this.ukt(),await this.w4("runtime","before-start-ticking"));e.isSuspended&&!this.XOt()?(this.FRt++,this.kRt=!0):this.SX()}ukt(){this.nj(U.Y9.V9.J9.lkt,null,null),this.ef("runtime","register-sw")}$gt(t){t=Math.floor(t);const s=this.mRt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}qPt(){for(const t of self.ckt){const s=U.first(Object.keys(t));this.gRt.push(s)}}y1t(t){t=Math.floor(t);const s=this.gRt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}fkt(){return this.p4t}dkt(){return this.d4t}GO(){return this.m4t}H3t(){return this.c4t}pkt(){return this.f4t}UO(){return this.wft}s3(){return this.wft.s3()}o1t(){return this.wft.o1t()}HO(){return this.wft.HO()}a1t(){return this.wft.a1t()}ESt(){return 0===this.o1t().Fft()}l1t(){return this.wft.l1t()}LEt(){return this.V4t}Zyt(){return this.V4t.Zyt()}aV(t){if((t=Math.floor(t))<0||t>=this.$4t.length)throw new RangeError("invalid index");return this.$4t[t]}mkt(t){return this.tRt.get(t.toLowerCase())||null}w6(t){return this.sRt.get(t)||null}Pht(t){const s=U.jR.rP(t);return s?s.uP():null}EV(){return this.$4t}*gkt(){for(const t of this.$4t)t.AV()||(yield*t.instances())}Rf(){return this.hGt}FO(){return this.z7}Cq(t){t.runtime=this.zR();const s=this.Gq()&&!this.wft.OP();s&&W.StartMeasuringScriptTime(),this.z7.dispatchEvent(t),s&&W.AddScriptTime()}U9(t){return t.runtime=this.zR(),this.z7.Wf(t)}_O(){return this.O4t}NO(){return this.R4t}ykt(t,s){if(this.O4t!==t||this.R4t!==s){this.O4t=t,this.R4t=s;const i=this.W3();i.Hq(),i.qq()}}lY(){return this.F4t}cY(){return this.j4t}l3t(t,s){if(this.F4t!==t||this.j4t!==s){this.F4t=t,this.j4t=s;const i=this.W3();i.Hq(),i.qq()}}KOt(t){this.XOt()||(this.BA=t)}LR(){return this.BA}nH(){return this.P4t}oH(){return this.k4t}bR(){return this.yRt}dH(){return this.yRt?this.yRt.dH():this.F4t}pH(){return this.yRt?this.yRt.pH():this.j4t}MF(){return this.yRt?this.yRt.MF():1}zU(){return this.yRt?this.yRt.zU():1}YH(){return this.yRt?this.yRt.YH():1}JH(){return this.yRt?this.yRt.JH():1}uF(){return this.yRt?this.yRt.uF():0}lF(){return this.yRt?this.yRt.lF():0}Mkt(){return this.yRt?this.yRt.GR():0}wkt(){return this.yRt?this.yRt._R():0}FU(){return this.yRt?this.yRt.FU():"off"}vH(t){return this.yRt?this.yRt.vH(t):null}V8(t){this.yRt&&this.yRt.V8(t)}bH(){return this.U4t}VOt(){return this.W4t}YOt(){return this.Q4t}_3(){return this.yRt?this.yRt._3():NaN}Cb(){return"nearest"!==this.EO()}N3(){return this.wRt}E3(t){this.wRt!==t&&(this.wRt=t,-1!==this.lOt||-1!==this.IRt)&&(this.Skt(),this.Tkt())}EO(){return this.g2}jGt(){return this.B4t}J3t(){return this.J4t}s4t(){this.J4t&&(this.J4t.lI(),this.J4t.er(),this.J4t=null)}W3(){return this.u7}z3(){return this.u7.z3()}V$(){return this.a$}bkt(){return this.H4t}L_t(){return this.q4t}Qut(){return this.xut}mO(){return this.aJ}kQ(t){return this.aJ.kQ(t)}NP(t,s,i,e,h,r){if(r&&this.q4t){if(t instanceof U.dut&&t.AV()){const o=t.Pmt(),a=Math.floor(this.j3()*o.length);return this.NP(o[a],s,i,e,h,r)}const n=this.q4t.fut(t,r);if(n){const u=this.yV(n,s,!1,i,e,!1,h,void 0,h);return this.q4t.mut(u,r),u}}return this.yV(t,s,!1,i,e,!1,h,void 0,h)}yV(t,s,i,e,h,r,n,o,a){let u=null,l=null;if(t instanceof U.dut){if((l=t).AV()){const S=l.Pmt(),T=Math.floor(this.j3()*S.length);l=S[T]}u=l.lV()}else u=t,l=this.aV(u[1]);const c=l.pP().QR();if(this.Eg&&c&&!l.sIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&u&&!this.fRt.has(u[2])?u[2]:this.cRt++;const p=u?u[0]:null,m=U.ir(U.Instance,{runtime:this,SF:l,Oj:s,i_t:p,n_t:u?u[3]:null,uid:d,tags:u?u[6]:null});this.fRt.set(d,m);let g=null,y=(c&&(g=m.u4(),void 0!==e&&void 0!==h&&(g.rT(e),g.aT(h)),l.DIt(!0)),s&&(a||s.wV(m,!0),s.Q3().g9(l)),this.lRt++,!0);if(o){const b=o.TF();if(b.LF()&&l.LF()){const x=l.f9(),v=b.f9();x===v&&(y=!1)}}if(l.LF()&&!i&&!r&&y){const C=new Set;for(const G of l.f9().X9())if(G!==l){const I=this.xkt(G,g,C);if(I){const _=this.yV(I,f,!1,g?g.hT():e,g?g.oT():h,!0,!1,void 0,a);m.K9(_)}else{const F=this.yV(G,f,!1,g?g.hT():e,g?g.oT():h,!0,!1,void 0,a);m.K9(F)}}for(const D of m.OF()){D.K9(m);for(const N of m.OF())D!==N&&D.K9(N)}}if(c&&!i&&n&&this.vkt(m,p,g,s,e,h,a),l.LF()&&!i&&!r&&n)for(const E of m.OF()){const A=E.u4();if(A){const j=E.pP(),L=E.TF().lV()[0];j.QR()?this.vkt(E,L,A,s,A.hT(),A.oT(),a):this.vkt(E,L,A,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.c5(),z=e-g.hT()+O.hT(),B=h-g.oT()+O.oT();O.Pj(z,B)}l.vIt();const P=u?U.Jn(u[5]):null,k=u?u[4].map(t=>U.Jn(t)):null,M=c&&p&&p[13];if(M&&m.f_t(),m.$Gt(P,k),M){const R=p[13];m.rz().oxt(R[2],R[0],R[1])}this.nRt.push(m),this.aRt=!0,this.Gq()&&W.InstanceCreated(m);const w=this.wPt.instancecreate;return w.yz=m,this.hGt.dispatchEvent(w),m}NDt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.u7.Bq(s),n=r.l4(i);return n.dV(e)}xkt(t,s,i){const e=s?.A_t()??[];for(const h of e){const r=this.NDt(h),n=!!h[4],o=this.aV(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}vkt(a,t,s,u,l,c,f){const i=s.XNt(),e=s.A_t();if(a.u4().KNt(i),e){void 0===l&&(l=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const S=this.u7.Bq(t),T=S.l4(s);o=T.dV(i)}const y=this.aV(o[1]),M=a.O_t(y),w=d.has(y);if(M&&!w&&h){const b=a.R_t(y),x=(b.u4().e_t(o[0]),l+o[0][0]-p),v=c+o[0][1]-m;b.u4().Pj(x,v),b.u4().KNt(r),a.w5(b,{v5:!!(e>>0&1),G5:!!(e>>1&1),_5:!!(e>>2&1),N5:!!(e>>3&1),A5:!!(e>>4&1),z5:!!(e>>5&1),O5:!!(e>>6&1),P5:!!(e>>7&1),F5:!!(e>>8&1)}),d.add(y)}else{const C=l+o[0][0]-p,G=c+o[0][1]-m,I=this.yV(o,u,!1,C,G,!1,!0,a,f);I.u4().KNt(r),a.w5(I,{v5:!!(e>>0&1),G5:!!(e>>1&1),_5:!!(e>>2&1),N5:!!(e>>3&1),A5:!!(e>>4&1),z5:!!(e>>5&1),O5:!!(e>>6&1),P5:!!(e>>7&1),F5:!!(e>>8&1)})}}}}_F(i){if(!this.dRt.has(i)){let t=i.TF(),s=this.oRt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.oRt.set(t,s);if(this.Gq()&&W.InstanceDestroyed(i),i.p_t(),this.aRt=!0,i.LF())for(const e of i.OF())this._F(e);for(const h of i.children())h.B5()&&this._F(h);if(!this.u7.RP()&&!this.rPt){const r=this.UO();r.AP(!0),i.J_t(),r.AP(!1)}i.V_t(this.u7.RP())}}PP(){this.aRt&&(this.uRt=!0,this.Ckt(),this.Gkt(),this.uRt=!1,this.aRt=!1,this.y4())}Ckt(){for(const t of this.nRt){const s=t.TF();s.wV(t);for(const i of s.v1t())i.wV(t),i.vIt()}U.Ln(this.nRt)}Gkt(){this.hGt._f(!0);for(const[t,s]of this.oRt.entries())this.Ikt(t,s),s.clear();this.oRt.clear(),this.hGt._f(!1)}Ikt(t,s){for(const i of s){const e=this.wPt.instancedestroy,h=(e.yz=i,this.hGt.dispatchEvent(e),this.fRt.delete(i.RF()),this.XRt.delete(i),i.u4());h&&(h.sEt(),h.xV(),h.p_t()),this.dRt.add(i),this.lRt--}U.Un(t.CP(),s),t.vIt(),this.pRt.add(t);for(const r of t.v1t())U.Un(r.CP(),s),r.vIt(),this.pRt.add(r);if(t.pP().QR()){const n=new Set([...s].map(t=>t.u4().l4()));for(const o of n)o.PY(s)}}GIt(){return this.nRt}*RTt(t){for(const s of this.GIt())t.AV()?s.TF().ASt(t)&&(yield s):s.TF()===t&&(yield s)}KGt(){return this.cRt++}tIt(t,s){this.fRt.set(t,s)}p6(t){this.PRt!==(t=!!t)&&(this.PRt=!!t,this.PRt)&&this.kRt&&(this.y6(!1),this.kRt=!1)}m6(){return this.PRt}x9(){this.hGt.dispatchEvent(U.ir(U.Event,"renderercontextlost")),this.y6(!0);for(const s of this.$4t)!s.AV()&&s.iIt()&&s.T9();const t=this.z3();t&&t.x9(),U.$vt.SJ(),U.jQ.SJ()}async b3t(){await this.z3().p9(null,this.IS()),this.hGt.dispatchEvent(U.ir(U.Event,"renderercontextrestored")),this.y6(!1),this.y4()}GPt(t){if(this.PRt){const s=t.hidden;this.y6(s),(this.kRt=s)||this.y4()}}NPt(t){this.n4t()&&this.bRt&&!U.ri.gi&&!t.data.parentHasFocus&&(this.y6(!0),this.xRt=!0)}EPt(){this.xRt&&(this.y6(!1),this.xRt=!1)}Tkt(){const t=this.CRt;"vsync"===this.wRt?-1===this.lOt&&(this.lOt=self.requestAnimationFrame(t.GRt)):"unlimited-tick"===this.wRt?(-1===this.IRt&&(this.IRt=U.ho(t._Rt)),-1===this.lOt&&(this.lOt=self.requestAnimationFrame(t.DRt))):-1===this.IRt&&(this.IRt=U.ho(t.GRt))}Skt(){-1!==this.lOt&&(self.cancelAnimationFrame(this.lOt),this.lOt=-1),-1!==this.IRt&&(U.ro(this.IRt),this.IRt=-1)}a3(){return 0<this.FRt}y6(t){if(!this.XOt()){const s=this.a3(),i=(this.FRt+=t?1:-1,this.FRt<0&&(this.FRt=0),this.a3());if(!s&&i)console.log("[Construct] Suspending"),this.Skt(),this.hGt.dispatchEvent(U.ir(U.Event,"suspend")),this.nj(U.Y9.V9.J9._kt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.URt=e,this.$Rt=e,this.KRt=0,this.tPt=0,this.sPt=0,this.iPt=0,this.hPt=0,this.ePt=0,this.hGt.dispatchEvent(U.ir(U.Event,"resume")),this.nj(U.Y9.V9.J9.Dkt,null,null),this.Z1t()||this.SX(e)}}}s6(t){this.TPt.hc(t)}r6(t){this.bPt.hc(t)}e6(t){this.xPt.hc(t)}i6(t){this.TPt.p0(t)}n6(t){this.bPt.p0(t)}h6(t){this.xPt.p0(t)}Nkt(){const t=globalThis.XU;this.TPt.e1(!0);for(const s of this.TPt)s instanceof t?s.mj():s.SX();this.TPt.e1(!1)}Ekt(){const t=globalThis.XU;this.bPt.e1(!0);for(const s of this.bPt)s instanceof t?s.a6():s.Lvt();this.bPt.e1(!1)}Akt(){const t=globalThis.XU;this.xPt.e1(!0);for(const s of this.xPt)s instanceof t?s.yj():s._xt();this.xPt.e1(!1)}*Lkt(){const s=globalThis.XU;this.TPt.e1(!0);for(const i of this.TPt){let t;t=i instanceof s?i.mj():i.SX(),U.Ro(t)&&(yield*t)}this.TPt.e1(!1)}*Okt(){const s=globalThis.XU;this.bPt.e1(!0);for(const i of this.bPt){let t;t=i instanceof s?i.a6():i.Lvt(),U.Ro(t)&&(yield*t)}this.bPt.e1(!1)}*Rkt(){const s=globalThis.XU;this.xPt.e1(!0);for(const i of this.xPt){let t;t=i instanceof s?i.yj():i._xt(),U.Ro(t)&&(yield*t)}this.xPt.e1(!1)}async SX(a,t,s){this.ORt=!0;const u="background-wake"===s,l="background-wake"!==s&&"skip-render"!==s,c=this.W3(),f=this.bR();if(this.ARt&&(!this.a3()||t||u)){let t=performance.now(),s=(this.LRt=!0,this.Pkt(a||0),this.sPt++,this.kkt(),this.Fkt()),i=(this.DTt()&&await s,this.hGt.Qf(this.wPt.pretick)),e=(i instanceof Promise&&await i,this.jkt()),h=(this.DTt()&&await e,this.zkt()&&await this.Bkt(),c.H3()&&await this.Ukt(),this.Wkt()),r=(this.DTt()&&await h,c.z3()),n=r.o9(),o=!1;if(-1!==n&&(r.a9(),f.n9()!==n)){const d=this.bR()._9(n);this.GO()&&(o=!0,await d)}this.ef("canvas","update-html-layer-dom-state",{layersDomState:r.jV().filter(t=>t.Pk()).map(t=>t.WY())}),l&&this.aL(),o&&this.ef("canvas","cleanup-html-layers"),this.XOt()&&(await this.skt(),this.g3()>=this.KPt())?this.ekt():(this.a3()||u||this.Tkt(),this.NRt++,this.ERt++,this.LRt=!1,this.ePt+=performance.now()-t)}}async Fkt(){const t=this.wft,s=this.Gq();this.PP(),t.AP(!0),this.F1t(this.z3()),s&&W.StartMeasuringTime(),this.DTt()?await t.ydt():t.fdt(),s&&W.AddEventsTime(),this.j1t(),t.AP(!1),this.PP(),t.AP(!0)}async jkt(){const t=this.Gq(),s=this.DTt(),i=this.hGt,e=this.wPt,h=this.SPt;t&&W.StartMeasuringTime(),s?await this.Qkt(this.Lkt()):this.Nkt(),s?await this.Qkt(this.Okt()):this.Ekt(),t&&W.AddBehaviorTickTime(),t&&W.StartMeasuringTime(),s?await this.Jkt(e.tick):i.dispatchEvent(e.tick),t&&W.AddPluginTickTime(),this.wft.AP(!1),this.Cq(h.tick)}async Wkt(){const t=this.wft,s=this.hGt,i=this.wPt,e=this.Gq(),h=this.DTt();e&&W.StartMeasuringTime(),h?await t.z1t(this.u7):t.k1t(this.u7),e&&W.AddEventsTime(),this.Y4t.vAt(),this.kkt(),this.RRt=!1,t.AP(!0),e&&W.StartMeasuringTime(),h?await this.Qkt(this.Rkt()):this.Akt(),e&&W.AddBehaviorTickTime(),e&&W.StartMeasuringTime(),h?await this.Jkt(i.tick2):s.dispatchEvent(i.tick2),e&&W.AddPluginTickTime(),t.AP(!1),h&&await t.X1t()}kkt(){if(0!==this.dRt.size){const t=this.hGt;t._f(!0);for(const s of this.pRt)s.ndt().Hct(this.dRt);this.pRt.clear(),this.wft.wdt(this.dRt);for(const i of this.dRt)i.er();this.dRt.clear(),t._f(!1)}}async Ukt(){let t=this.W3(),s=0;for(;t.H3()&&s++<10;)await this.Vkt(t.Yq())}Pkt(t){let s=0;if(this.XOt())s=1/this.$Pt(),this.WRt=s,this.QRt=s;else if(0!==this.URt){const i=Math.max(t-this.URt,0);.5<(s=i/1e3)&&(s=0),this.WRt=s,this.QRt=U.lr(s,this.YRt,this.VRt)}this.URt=t,this.JRt=this.QRt*this.t_t,this.HRt.hc(this.JRt),this.qRt.hc(s*this.t_t),this.ZRt.hc(this.QRt);for(const[e,h]of this.XRt)h.hc(this.QRt*e.S3());this.yRt&&this.yRt.O3t(),1e3<=t-this.$Rt&&(this.$Rt+=1e3,1e3<=t-this.$Rt&&(this.$Rt=t),this.tPt=this.KRt,this.KRt=0,this.iPt=this.sPt,this.sPt=0,this.hPt=Math.min(this.ePt/1e3,1),this.ePt=0,this.yRt&&this.yRt.L3t(),this.Y4t.SAt(),this.Gq())&&W.Update1sPerfStats()}l_t(t,s){if(s){if(!this.XRt.has(t)){const i=U.ir(U.g0);i.T0(this.HRt),this.XRt.set(t,i)}}else this.XRt.delete(t)}c_t(t){const s=this.XRt.get(t);return s?s.$s():this.g3()}async Vkt(t){const s=this.hGt,i=this.W3(),e=i.z3();await e.eq(),e.b9(t,this.IS()),e===t&&this.wft.nq(),this.Y4t.vAt(),this.kkt(),s.dispatchEvent(this.wPt.beforelayoutchange),U.Nf.Yf(!0),await t.p9(e,this.IS()),U.Nf.Yf(!1),await t.v9(!1),s.dispatchEvent(this.wPt.layoutchange),this.y4(),this.RRt=!0,this.PP(),this.ikt()}y4(){this.TRt=!0}x3t(){return this.yRt?this.yRt.x3t():null}v3t(){return this.yRt?this.yRt.v3t():null}IS(){return this.yRt?this.yRt.IS():null}aL(){const i=this.yRt;if(i&&!i.T3t()){const e=this.IS(),t=e.wE(),h=t&&e.oS(),r=t&&e.SM();if(h&&e.rE(),this.TRt||this.XOt()){const n=this.u7.z3(),o=(this.KRt++,e.XN(),this.Gq());o&&W.StartMeasuringTime(),this.TRt=!1;let t=null,s=(h&&(t=i.k3t().V_(),e.ME(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.t9())),e.StartMeasuringRenderPassTime(0,1)),this.SY()&&"low"===i.xH()?e.lN(i.dH(),i.pH()):e.cN(),this.Ykt(this.IS(),n),t&&e.SE(t),r&&(e.StopMeasuringRenderPassTime(),this.yRt.F3t(s)),e.$w(),o&&(W.AddDrawCallsTime(),W.UpdateInspectHighlight()),i&&i.z3t()}else e.iS()}}yq(t){return"low"===this.bR().xH()||t.oS()&&(this.bH()||this.SY())}Ykt(s,i){s._M(),s._N(),s.SN(1,1,1,1),s.uE(null),s.vN(null),s.$N(this.SY()),this.yq(s)&&i.mq(s);const e=i.n9();for(let t=1;t<e;++t)i.Tq(s,t),s.SM()&&s.Restart();this.yq(s)||i.mq(s),i.Sq(s)}nj(t,s,i){if(!this.ARt)return!1;let e=!this.LRt&&!this.wft.sdt(),h=0;e&&(h=performance.now());const r=this.Gq(),n=(r&&this.E6(!1),this.wft.Q1t(this.u7,t,s,i));if(e){const o=performance.now()-h;this.ePt+=o,r&&W.AddTriggersTime(o)}return r&&this.E6(!0),n}gxt(t,s,i){if(!this.DTt())return this.nj(t,s,i);if(this.Z1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.LRt||this.wft.sdt())return this.wft.Y1t(this.u7,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async aj(t,s,i){if(!this.DTt())return this.nj(t,s,i);if(!this.ARt)return!1;if(this.Z1t())return this.wft.H1t(t,s,i);if(!this.z3())return this.wft.J1t(t,s,i);let e=performance.now(),h=this.wft.Y1t(this.u7,t,s,i),r=h.next();for(;!r.done;)await this.U1t(r.value),r=h.next();return this.a3()||this.wft.sdt()||(await this.wft.X1t(),this.ORt&&!this.LRt&&this.Tkt()),this.ePt+=performance.now()-e,r.value}yxt(t,s,i){const e=this.Gq(),h=(e&&this.E6(!1),this.wft.K1t(this.u7,t,s,i));return e&&this.E6(!0),h}Mxt(t,s,i){return this.wft.$1t(this.u7,t,s,i)}wxt(t){return this.jRt.hc(t)}F1t(t){this.rRt.push(t)}j1t(){if(!this.rRt.length)throw new Error("layout stack empty");this.rRt.pop()}o4(){return this.rRt.length?this.rRt.at(-1):this.z3()}l3(t){return t&&-1!==t.S3()?this.QRt*t.S3():this.JRt}MX(){return this.JRt}wX(){return this.QRt}d3(){return this.WRt}S3(){return this.t_t}T3(t){(isNaN(t)||t<0)&&(t=0),this.t_t=t}O3(t){this.YRt=Math.max(t,0)}L3(){return this.YRt}F3(t){this.VRt=Math.max(t,0)}P3(){return this.VRt}b3(){return this.tPt}v3(){return this.iPt}G3(){return this.hPt}Hkt(){return this.BRt}g3(){return this.HRt.$s()}qkt(){return this.qRt.$s()}M3(){return this.ZRt.$s()}mtt(){return this.NRt}Zkt(){return this.ERt}Xkt(){return this.lRt}bO(){return this.N4t}vO(){return this.E4t}Kkt(){return this.A4t}$kt(){return this.L4t}h4(t){if(this.rPt)throw new Error("cannot call while loading state - wait until afterload event");return this.fRt.get(t)||null}q9(){this.fRt.clear();for(const t of this.$4t)if(!t.AV())for(const s of t.CP())this.fRt.set(s.RF(),s)}n4t(){return"preview"===this.y4t}Gq(){return this.x4t}MR(){return this.y4t}wR(){return"nwjs"===this.MR()||this.M4t}a4t(){return"cordova"===this.y4t}tFt(){return"Android"===U.ri.ni&&("cordova"===this.y4t||"playable-ad-single-file"===this.y4t||"playable-ad-zip"===this.y4t||"instant-games"===this.y4t)}rkt(){return this.qW}sFt(){return this.w4t}SR(){return this.S4t}iFt(){return this.T4t}MO(){return this.Y4t}Xvt(){return this.V4t.Xvt()}Kvt(){return this.V4t.Kvt()}SY(){return this.MRt}eFt(){return this.IS().uM(this.cY())}nM(t){return this.IS().nM(t||this.cY())}hFt(){return this.RRt}rFt(t){this.SRt!==(t=!!t)&&(this.SRt=t,this.W3().qq(),this.y4())}LO(){return this.SRt}nFt(t){if(!this.K4t.has(t)){const i=()=>this.oFt(t);this.K4t.set(t,i),t.Rf().addEventListener("animationframeimagechange",i)}const s=this.Gg.Sg(t);return s.Rg()||s.kg().then(()=>this.y4()),s}oFt(t){this.Gg.vg(t)}Z4t(t){const s=[];for(const i of t.pIt())for(const e of i.Fz()){const h=e.Qz();s.push({source:e,width:h.im(),height:h.pm(),tag:e.lB()})}return{Lg:s}}async X4t(t){const s=U.ir(U.n1),i=[],h=new Map;for(const n of t.pIt())for(const o of n.Fz()){const a=o.Qz().wCt();h.has(a)||(h.set(a,null),i.push(s.hc(async()=>{const t=await a.vJ();h.set(a,t)})))}await Promise.all(i);const e=[];for(const u of t.pIt())for(const l of u.Fz())e.push(s.hc(async()=>{const t=l.Qz(),s=h.get(t.wCt()),i=await t.SCt(s),e=await createImageBitmap(i);return{jg:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{Lg:r}}aFt(t){this.nPt=t,this.oPt=!1}uFt(){this.nPt="",this.oPt=!0}lFt(t){this.aPt=t}T2t(t){this.Tj=t}cFt(){return this.uPt}zkt(){return!!(this.nPt||this.oPt||this.aPt||null!==this.Tj)}async Bkt(){if(this.nPt&&(this.PP(),await this.fFt(this.nPt),this.dFt()),this.aPt&&(await this.pFt(this.aPt),this.dFt(),this.Gq())&&W.StepIfPausedInDebugger(),this.oPt){const t=await this.mFt();this.uPt=t,await this.aj(U.Y9.V9.J9.gFt,null),this.uPt="",this.dFt()}if(null!==this.Tj){this.PP();try{await this.yFt(this.Tj),this.uPt=this.Tj,await this.aj(U.Y9.V9.J9.MFt,null),this.uPt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.aj(U.Y9.V9.J9.wFt,null)}this.dFt()}}dFt(){this.nPt="",this.oPt=!1,this.aPt="",this.Tj=null}RR(){return this.lPt||(this.lPt=localforage.Li({name:"c3-localstorage-"+this.Kkt(),description:this.bO()})),this.lPt}SFt(){return this.cPt||(this.cPt=localforage.Li({name:"c3-savegames-"+this.Kkt(),description:this.bO()})),this.cPt}async fFt(t){const s=await this.mFt();try{await this.SFt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.uPt=s,await this.aj(U.Y9.V9.J9.gFt,null),this.uPt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.aj(U.Y9.V9.J9.TFt,null)}}async pFt(t){try{const s=await this.SFt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.yFt(s),this.uPt=s,await this.aj(U.Y9.V9.J9.MFt,null),this.uPt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.aj(U.Y9.V9.J9.wFt,null)}}async mFt(){const t={c3save:!0,version:1,rt:{time:this.g3(),timeRaw:this.qkt(),walltime:this.M3(),timescale:this.S3(),tickcount:this.mtt(),next_uid:this.cRt,running_layout:this.z3().zV(),start_time_offset:Date.now()-this.BRt},types:{},layouts:{},events:this.wft.e7(),timelines:this.a$.e7(),user_script_data:null};for(const i of this.$4t)i.AV()||i.PIt()||(t.types[i.zV().toString()]=i.e7());for(const e of this.u7.V3())t.layouts[e.zV().toString()]=e.e7();const s=this.bFt("save");return s.saveData=null,await this.U9(s),t.user_script_data=s.saveData,JSON.stringify(t)}k9(){return this.rPt}async yFt(t){const s=this.W3(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.b2t(),this.hGt.dispatchEvent(U.ir(U.Event,"beforeload"));for(const a of this.gkt()){const u=a.TF();u.PIt()||a.TZ()}let e=i.rt,h=(this.HRt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.qRt.Set(e.timeRaw),this.ZRt.Set(e.walltime),this.t_t=e.timescale,this.NRt=e.tickcount,this.BRt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.rPt=!0);if(h!==this.z3().zV()){const l=s.Bq(h);if(!l)return;await this.Vkt(l),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.Bq(d);p&&p.h7(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),M=this.w6(y);!M||M.AV()||M.PIt()||M.h7(g,n)}for(const w of this.u7.V3())for(const S of w.ek())S.r7();if(this.PP(),this.q9(),this.rPt=!1,r){for(const T of this.gkt())T.F9();for(const[b,x]of Object.entries(i.types)){const v=parseInt(b,10),C=this.w6(v);!C||C.AV()||C.PIt()||C.jIt(x)}}this.cRt=e.next_uid,this.wft.h7(i.events);for(const G of this.$4t)if(!G.AV()&&G.LF())for(const I of G.CP()){const _=I.Z9();for(const D of G.f9().X9())if(D!==G){const N=D.CP();if(_<0||_>=N.length)throw new Error("missing sibling instance");I.K9(N[_])}}this.a$.h7(i.timelines),s.Hq(),s.qq();for(const E of n)E.Q_t();this.x2t(),this.hGt.dispatchEvent(U.ir(U.Event,"afterload")),this.Cq(this.bFt("afterload"));for(const[A,L]of Object.entries(i.types)){const O=parseInt(A,10),R=this.w6(O);R&&R.FIt()}const o=this.bFt("load");o.saveData=i.user_script_data,await this.U9(o),this.y4()}xFt(t,s){return t.u4().VNt()-s.u4().VNt()}AEt(t,s){t.u4()&&!this.RPt.has(t)&&(this.RPt.set(t,s),this.PPt.push(t))}b2t(){this.RPt=new WeakMap,U.Ln(this.PPt)}x2t(t="full",s=null){this.PPt.sort(this.xFt);for(const i of this.PPt)i.xZ(this.RPt.get(i),t,s);for(const e of this.PPt)e.q_t(this.RPt.get(e),t,s);this.b2t()}async okt(t){const s=await Promise.all(t.map(async t=>{const s=this.a4t()&&this.aJ._Q();if(s||"playable-ad-single-file"===this.MR()){const i=await this.aJ.Mo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.vPt.vFt(s)}CFt(t,s){this.vPt.GFt(t,s)}nkt(t,s){this.vPt.IFt(t,s)}akt(t,s,i,e){return this.vPt.akt(t,s,i,null,null,e)}_Ft(t,s,i,e){return this.vPt._Ft(t,s,i,e)}DFt(){return this.vPt.NFt()}i4(t,s){this.ef("runtime","invoke-download",{url:t,filename:s})}async q3t(t,s,i,e,h,r){if(e=e||s,h=h||i,this.GO()){const n=await this.w4("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async EFt(t){return this.GO()?this.w4("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}AFt(){this.mPt||(this.mPt=!0,this.ef("runtime","enable-device-orientation"))}LFt(){this.gPt||(this.gPt=!0,this.ef("runtime","enable-device-motion"))}j3(){return this.zRt()}OFt(t){this.zRt=t}_Pt(){const t=this.IS();return{fps:this.b3(),tps:this.v3(),cpu:this.G3(),gpu:this._3(),layout:this.z3()?this.z3().Jc():"",renderer:t.oS()?t._E():t.GetAdapterInfoString()}}Z1t(){return!!this.Gq()&&W.Z1t()}U1t(t){return this.DTt()?W.U1t(t):Promise.resolve()}vgt(){return!!this.DTt()&&W.BreakNext()}RFt(t){this.v4t=!!t,this.PFt()}kFt(){return this.v4t}DTt(){return this.C4t}E6(t){t?this.G4t--:this.G4t++,this.PFt()}PFt(){this.C4t=this.Gq()&&this.v4t&&0===this.G4t}Upt(){return this.Gq()&&W.Upt()}MH(){return this.Gq()&&this.IS().wE()&&W.MH()}async Qkt(t){if(t)for(const s of t)await this.U1t(s)}Jkt(t){return this.Qkt(this.hGt.Vf(t))}Q0t(t){return this.wft.Q0t(t.name,t.params)}T4(t){if(this.GO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}zR(){return this.APt}bFt(t){const s=U.ir(U.Event,t,!1);return s.runtime=this.APt,s}YPt(){this.APt=new self.fO(this),this.SPt={tick:this.bFt("tick")}}ZPt(){const t={};for(const s of this.$4t)t[s.y1t()]={value:s.aP(),enumerable:!0,writable:!1};this.APt.jO(t)}XPt(){const t={};for(const s of this.UO().C1t())t[s.y1t()]=s.M1t();this.APt.zO(t)}Z3(){return this.OPt}mP(t,s){this.LPt.set(t,s)}nk(t){return this.LPt.get(t)}lR(t){if(!(t instanceof self.fP))throw new TypeError("expected IObjectClass");const s=this.nk(t);if(s&&s instanceof U.dut)return s;throw new Error("invalid IObjectClass")}bP(t){if(!(t instanceof self.wF))throw new TypeError("expected IInstance");const s=this.nk(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}a4(t){if(!(t instanceof self.K5))throw new TypeError("expected IWorldInstance");const s=this.nk(t);if(s&&s instanceof U.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=U.u4t.Wb,self.C3_InitRuntime=(t,s)=>t.e_t(s)}{const La=self.Rs;La.CPt=class extends La.$h{constructor(t,s){super(),this.$c=t,this.FFt=new Map,this.jFt=0,this.zFt=s.inputPort,s.outputPort.onmessage=t=>this.BFt(t),this.UFt=s.maxNumWorkers,this.WFt=1,this.QFt=!1,this.JFt=!1}async e_t(){}NFt(){return this.UFt}vFt(t){this.zFt.postMessage({type:"_import_scripts",scripts:t})}GFt(t,s){this.zFt.postMessage({type:"_send_blob",blob:t,id:s})}IFt(t,s){this.zFt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}akt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.jFt++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.FFt.set(n,{resolve:t,progress:e,reject:s,VFt:!1,maxWorkerNum:r})});return h&&h.f0(()=>this.YFt(n)),this.zFt.postMessage(o,i),this.HFt(),a}_Ft(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.jFt++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.zFt.postMessage(r,i)}YFt(t){const s=this.FFt.get(t);s&&(s.VFt=!0,s.resolve=null,s.progress=null,s.reject=null,this.zFt.postMessage({type:"_cancel",jobId:t}))}BFt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.qFt(e,s.result);break;case"progress":this.ZFt(e,s.progress);break;case"error":this.XFt(e,s.error);break;case"ready":this.KFt();break;default:throw new Error(`unknown message from worker '${i}'`)}}qFt(t,s){const i=this.FFt.get(t);if(!i)throw new Error("invalid job ID");i.VFt||i.resolve(s),this.FFt.delete(t)}ZFt(t,s){const i=this.FFt.get(t);if(!i)throw new Error("invalid job ID");!i.VFt&&i.progress&&i.progress(s)}XFt(t,s){const i=this.FFt.get(t);if(!i)throw new Error("invalid job ID");i.VFt||i.reject(s),this.FFt.delete(t)}KFt(){this.QFt&&(this.QFt=!1,this.WFt++,this.WFt<this.UFt?this.HFt():this.zFt.postMessage({type:"_no_more_workers"}))}$Ft(){let t=0,s=[...this.FFt.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async HFt(){if(!(this.WFt>=this.UFt||this.QFt||this.JFt||this.$Ft()<=this.WFt))try{this.QFt=!0;const t=await this.$c.w4("runtime","create-job-worker");t.outputPort.onmessage=t=>this.BFt(t)}catch(t){this.JFt=!0,this.QFt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.WFt} so far)`,t)}}}}self.C3_Shaders={};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},S=(w,self.Rs),i=null,e="",h="",r=[],n="",o="",a="",T=S.ir(S.m0t);S.Y9.V9=class extends S.Sbt{constructor(t){super(t),this.l0t=this.$c.UO().D6(),this.qct=this.$c.UO().s3(),this.tjt=0,this.sjt=0,this.ijt=new Map}er(){super.er()}y4(){this.$c.y4()}nj(t){this.$c.nj(t,null,null)}ejt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}hjt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.ejt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async rjt(t,s){if(s.length){this.tjt+=s.length;const i=[];for(const e of s)i.push(t.g9(e));await S.$n(i,()=>{this.sjt++}),this.sjt++,this.sjt===this.tjt&&(this.sjt=0,this.tjt=0,this.$c.nj(S.Y9.V9.J9.njt,null,null))}}ojt(t,s){for(const i of s)0===i._P()&&t.S9(i)}ajt(){return T}ujt(s){const i=this.$c.UO(),t=i.s3(),e=t.I6(),h=e.HO(),r=h.G6(),n=e.Zft(),o=t._6(h),a=i.D6(),u=a._6();if(u.d0t(s),n)for(let t=0;t<s&&!u.F6();++t)i.L6(r),u.P6(t),h.O6(e,o),i.R6(r);else for(let t=0;t<s&&!u.F6();++t)u.P6(t),h.O6(e,o);return t.j6(),a.j6(),!1}*ljt(s){const i=this.$c.UO(),t=i.s3(),e=t.I6(),h=e.HO(),r=h.G6(),n=e.Zft(),o=t._6(h),a=i.D6(),u=a._6();if(u.d0t(s),n)for(let t=0;t<s&&!u.F6();++t)i.L6(r),u.P6(t),yield*h.Rgt(e,o),i.R6(r);else for(let t=0;t<s&&!u.F6();++t)u.P6(t),yield*h.Rgt(e,o);return t.j6(),a.j6(),!1}cjt(){const s=this.$c.UO(),t=s.s3(),i=t.I6(),e=i.HO(),h=e.G6(),r=i.Zft(),n=t._6(e),o=s.D6(),a=o._6();if(r)for(let t=0;!a.F6();++t)s.L6(h),a.P6(t),e.O6(i,n)||a.dB(),s.R6(h);else for(let t=0;!a.F6();++t)a.P6(t),e.O6(i,n)||a.dB();return t.j6(),o.j6(),!1}*fjt(){const s=this.$c.UO(),t=s.s3(),i=t.I6(),e=i.HO(),h=e.G6(),r=i.Zft(),n=t._6(e),o=s.D6(),a=o._6();if(r)for(let t=0;!a.F6();++t){s.L6(h),a.P6(t);const u=yield*e.Rgt(i,n);u||a.dB(),s.R6(h)}else for(let t=0;!a.F6();++t){a.P6(t);const l=yield*e.Rgt(i,n);l||a.dB()}return t.j6(),o.j6(),!1}djt(t,s,i){const e=this.$c.UO(),h=e.s3(),r=h.I6(),n=r.HO(),o=n.G6(),a=r.Zft(),u=h._6(n),l=e.D6(),c=l._6();if(c.N6(t),c.d0t(i),i<s)if(a)for(let t=s;t>=i&&!c.F6();--t)e.L6(o),c.P6(t),n.O6(r,u),e.R6(o);else for(let t=s;t>=i&&!c.F6();--t)c.P6(t),n.O6(r,u);else if(a)for(let t=s;t<=i&&!c.F6();++t)e.L6(o),c.P6(t),n.O6(r,u),e.R6(o);else for(let t=s;t<=i&&!c.F6();++t)c.P6(t),n.O6(r,u);return h.j6(),l.j6(),!1}*pjt(t,s,i){const e=this.$c.UO(),h=e.s3(),r=h.I6(),n=r.HO(),o=n.G6(),a=r.Zft(),u=h._6(n),l=e.D6(),c=l._6();if(c.N6(t),c.d0t(i),i<s)if(a)for(let t=s;t>=i&&!c.F6();--t)e.L6(o),c.P6(t),yield*n.Rgt(r,u),e.R6(o);else for(let t=s;t>=i&&!c.F6();--t)c.P6(t),yield*n.Rgt(r,u);else if(a)for(let t=s;t<=i&&!c.F6();++t)e.L6(o),c.P6(t),yield*n.Rgt(r,u),e.R6(o);else for(let t=s;t<=i&&!c.F6();++t)c.P6(t),yield*n.Rgt(r,u);return h.j6(),l.j6(),!1}mjt(i){const t=i.GP(),s=t.CP();if(0!==s.length){const e=this.$c.UO(),h=e.s3(),r=h.I6(),n=r.HO(),o=n.G6(),a=r.Zft(),u=h._6(n),l=e.D6(),c=l._6(),f=i.LF(),d=T._6();if(S.kn(d,s),c.d0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.F6();++t){e.L6(o);const p=d[t];i.GP().lft(p),f&&p.Hpt(),c.P6(t),n.O6(r,u),e.R6(o)}else{t.oft(!1);const m=t.aft();S.Ln(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.F6();++t){const g=d[t];m[0]=g,f&&g.Hpt(),c.P6(t),n.O6(r,u)}}h.j6(),l.j6(),S.Ln(d),T.j6()}return!1}*gjt(i){const t=i.GP(),s=t.CP();if(0!==s.length){const e=this.$c.UO(),h=e.s3(),r=h.I6(),n=r.HO(),o=n.G6(),a=r.Zft(),u=h._6(n),l=e.D6(),c=l._6(),f=i.LF(),d=T._6();if(S.kn(d,s),c.d0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.F6();++t){e.L6(o);const p=d[t];i.GP().lft(p),f&&p.Hpt(),c.P6(t),yield*n.Rgt(r,u),e.R6(o)}else{t.oft(!1);const m=t.aft();S.Ln(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.F6();++t){const g=d[t];m[0]=g,f&&g.Hpt(),c.P6(t),yield*n.Rgt(r,u)}}h.j6(),l.j6(),S.Ln(d),T.j6()}return!1}yjt(i,t){const s=i.GP(),e=s.CP();if(0!==e.length){const h=this.$c.UO(),r=h.s3(),n=h.a1t(),o=r.I6(),a=o.HO(),u=a.G6(),l=o.Zft(),c=r._6(a),f=h.D6(),d=f._6(),p=i.LF(),m=T._6();S.Ln(m),d.d0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Zwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.F6();++t){h.L6(u);const g=m[t][0];i.GP().lft(g),p&&g.Hpt(),d.P6(t),a.O6(o,c),h.R6(u)}else{s.oft(!1);const y=s.aft();S.Ln(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.F6();++t){const M=m[t][0];y[0]=M,p&&M.Hpt(),d.P6(t),a.O6(o,c)}}r.j6(),f.j6(),S.Ln(m),T.j6()}return!1}*Mjt(i,t){const s=i.GP(),e=s.CP();if(0!==e.length){const h=this.$c.UO(),r=h.s3(),n=h.a1t(),o=r.I6(),a=o.HO(),u=a.G6(),l=o.Zft(),c=r._6(a),f=h.D6(),d=f._6(),p=i.LF(),m=T._6();S.Ln(m),d.d0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Zwt(1,t)]);if(m.sort(w),1===t&&m.reverse(),l)for(let t=0,s=m.length;t<s&&!d.F6();++t){h.L6(u);const g=m[t][0];i.GP().lft(g),p&&g.Hpt(),d.P6(t),yield*a.Rgt(o,c),h.R6(u)}else{s.oft(!1);const y=s.aft();S.Ln(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.F6();++t){const M=m[t][0];y[0]=M,p&&M.Hpt(),d.P6(t),yield*a.Rgt(o,c)}}r.j6(),f.j6(),S.Ln(m),T.j6()}return!1}wjt(t,s){let i=this.ijt.get(t);if(!i){if(!s)return null;i={Sjt:null,Tjt:new Map},this.ijt.set(t,i)}return i}bjt(t,s,i,e,h){s.VO().Xgt(i,s.XO()),e&&t.R6(h)}*xjt(t,s,i,e,h){yield*s.VO().Kgt(i,s.XO()),e&&t.R6(h)}}}{const Oa=self.Rs;Oa.Y9.V9.PGt=class extends Oa.$h{constructor(t){super(),this.Bct=t,this.$c=t.E4(),this.nxt=t.pP()}Wbt(){}er(){this.Bct=null,this.$c=null,this.nxt=null}}}{const Ra=self.Rs;Ra.Y9.V9.Instance=class extends Ra.$h{constructor(t,s){super(),this.Ti=t,this.Bct=this.Ti.TF(),this.fxt=this.Bct.ISt(),this.$c=this.Ti.E4()}er(){this.Ti=null,this.Bct=null,this.fxt=null,this.$c=null}}}{const _=self.Rs,Pa=[];_.Y9.V9.J9={vjt(){return!0},Q9(){return!0},hq(){return!0},_kt(){return!0},Dkt(){return!0},a3(){return this.$c.a3()},Amt(){const t=this.$c.o1t();return!t.Jft()&&!t.Wft()},Cjt(){let t=this.$c.a1t(),s=t.kwt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.$c.mtt();return s.set("TriggerOnce_lastTick",e),this.$c.hFt()||i!==e-1},Gjt(t){const s=this.$c.a1t(),i=s.kwt(),e=i.get("Every_lastTime")||0,h=this.$c.g3(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Hdt(t){const s=this.$c.UO().D1t(t);return s&&s.Hdt()},n4t(){return this.$c.n4t()},gi(){return _.ri.gi},lkt(){return!0},Ijt(){return!0},_jt(){return!0},gFt(){return!0},TFt(){return!0},MFt(){return!0},wFt(){return!0},Djt(t){return!!this.$c.h4(t)},Njt(t){switch(t){case 0:return"browser"===_.ri.di;case 1:return"iOS"===_.ri.ni;case 2:return"Android"===_.ri.ni;case 8:return"cordova"===_.ri.di;case 9:return"scirra-arcade"===this.$c.MR();case 10:return"nwjs"===_.ri.di;case 13:return"windows-uwp"===this.$c.MR();default:return!1}},Ejt(t,s,i){const e=this.ejt(s,i);return e.test(t)},Ajt(t,s,i){return _.compare(t,s,i)},Ljt(t,s,i){return s<=t&&t<=i},Ojt(t,s,i){return _.compare(t.oet(),s,i)},Rjt(t){return!!t.oet()},Pjt(t,s){const i=this.$c.g3();if(0!==t)return _.compare(i,t,s);{const e=this.$c.a1t(),h=e.kwt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},kjt(t){return isNaN(t)},W2t(t,s,i){return _.Mr(_.dr(t),_.dr(i))<=_.dr(s)},Q2t(t,s){return _.Tr(_.dr(t),_.dr(s))},eTt(t,s,i){let e=_.dr(t),h=_.dr(s),r=_.dr(i),n=!_.Tr(r,h);return n?!(!_.Tr(e,h)&&_.Tr(e,r)):_.Tr(e,h)&&!_.Tr(e,r)},Fjt(t,s){return"number"==typeof t?0===s:1===s},jjt(t){return!!t},Gdt(t){return t.toLowerCase()===this.$c.UO().Ndt()},zjt(t,i,e,h){if(!t)return!1;let s=this.ajt(),r=s._6(),n=t.GP(),o=(_.kn(r,n.CP()),n.$ct()&&_.Ln(n.uft()),this.$c.a1t()),a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t];r[a]=l,i=o.Zwt(1,t),h=o.Zwt(3,t),_.compare(i,e,h)?++a:n.nft(l)}_.An(r,a),n.cft(r);const u=!!r.length;return _.Ln(r),s.j6(),t.Qgt(),u},Bjt(t,s){if(!t)return!1;let i=this.ajt(),e=i._6(),h=t.GP(),r=(_.kn(e,h.CP()),h.$ct()&&_.Ln(h.uft()),this.$c.a1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.Zwt(1,t)?++n:h.nft(a)}_.An(e,n),h.cft(e);const o=!!e.length;return _.Ln(e),i.j6(),t.Qgt(),o},Ujt(t,i,e){if(!t)return!1;const s=t.GP(),h=s.CP();if(0===h.length)return!1;let r=this.$c.a1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.Zwt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.gft(n),t.Qgt(),!0},Wjt(t,s){if(!t)return!1;const i=t.GP(),e=i.CP();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.gft(h),t.Qgt(),!0},Qjt(t){if(!t)return!1;const s=t.GP(),i=s.CP(),e=Math.floor(this.$c.j3()*i.length);if(e>=i.length)return!1;const h=i[e];return s.gft(h),t.Qgt(),!0},Jjt(t){if(!t)return!1;if(!t._P())return!1;const s=t.GP();return s.oft(!0),t.Qgt(),!0},Vjt(t,i,e){if(!t)return!1;const h=t.GP(),s=h.CP(),r=this.$c.HO(),n=r.yft(),o=this.$c.a1t().Awt();h.$ct()?(_.kn(Pa,s),h.Kct(),h.oft(!1)):n?(_.kn(Pa,h.uft()),_.Ln(h.uft())):(_.kn(Pa,h.aft()),_.Ln(h.aft()));for(let t=0,s=Pa.length;t<s;++t){const a=Pa[t];_.xor(a.u4().a5(i,e),o)?h.rft(a):h.nft(a)}return t.Qgt(),_.xor(!!h.aft().length,o)},Yjt(s){if(!s)return!1;let i=s.AV(),e=null,h=this.$c.GIt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.TF().ASt(s)){e=r;break}}else if(r.TF()===s){e=r;break}}if(!e){const n=s.CP();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.GP();return t.gft(e),s.Qgt(),!0},Hjt(t){return this.$c.DTt()?this.ljt(t):this.ujt(t)},qjt(){return this.$c.DTt()?this.fjt():this.cjt()},Zjt(t,s,i){return this.$c.DTt()?this.pjt(t,s,i):this.djt(t,s,i)},h1(t){return this.$c.DTt()?this.gjt(t):this.mjt(t)},Xjt(t,s,i){return this.$c.DTt()?this.Mjt(t,i):this.yjt(t,i)},Kjt(t){return!!t&&t.Ak()},$jt(t){return!!t&&t.jk()},t5t(t){return!!t&&t.Pk()},s5t(t){return!!t&&!t._P()},i5t(t,s,i){return!!t&&_.compare(100*t.wN(),s,i)},e5t(t){const s=this.$c.z3();return!!s&&s.s9(t)},njt(){return!0},h5t(){return 0<this.tjt},r5t(t,s){const i=this.$c.L_t();return!!i&&!!s&&!!i.fut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const ka=self.Rs,Fa=[],ja=[],za=ka.ir(ka.Rect),Ba=ka.ir(ka.ko),Ua=[];ka.Y9.V9.kht={n5t(t,s){t.Jet(s)},o5t(t,s){t.ue()&&"number"!=typeof s&&(s=parseFloat(s)),t.Jet(t.oet()+s)},a5t(t,s){t.ue()&&t.Jet(t.oet()-s)},u5t(t,s){t.Jet(!!s)},l5t(t){t.Jet(!t.oet())},c5t(t){t.Jet(t.n1t())},f5t(t){this.$c.UO().I1t(t)},d5t(t,s,i,e,h,r){if(t&&s){const n=this.$c.NP(t,s,i,e,h,r);if(n){h&&s.EP(n);const o=this.$c.UO(),a=(o.AP(!0),n.LP(),o.AP(!1),new Map);n.v_t(a,t,h);for(const[u,l]of a)u.GP().fft(l)}}},p5t(t,s,i,e,h,r){if(t&&s){const n=this.$c.mkt(t);n&&ka.Y9.V9.kht.d5t.call(this,n,s,i,e,h,r)}},NV(h,r,n,o,a,t,u,l,c,f,d){if(h){let s=this.$c.o4(),i=s;if(t){const p=this.$c.W3().zq(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof u||0<=u)||(e=i.l4(u))){let t=null;if(!("number"!=typeof l||0<=l)||(t=s.l4(l))){za.set(r,n,o,a);const m=i.NV(h,za,e,t,c,f,d);h.GP().cft(m),h.Qgt()}}}},m5t(){const t=this.l0t;t.n0t()&&t.h0t().dB()},qdt(t,s){const i=this.$c.UO().D1t(t);i&&(0===s?i.qdt(!1):1===s?i.qdt(!0):i.qdt(!i.Hdt()))},g5t(t){this.$c.T3(t)},y5t(t,s){if(s<0&&(s=0),t){const i=t.GP(),e=i.CP();for(const h of e)h.T3(s)}},M5t(t){if(t){const s=t.GP(),i=s.CP();for(const e of i)e.zF()}},In(t){if(!(t<0))return this.$c.UO().udt().dbt(t),!0},n3(t){return this.$c.UO().udt().pbt(t),!0},w5t(){const t=this.$c.UO();return t.udt().mbt(t.Cdt()),!0},h3(t){this.$c.UO().h3(t)},async j3t(t,s,i,e,h,r){const n=this.$c.bR();n&&(this.y4(),await n.j3t(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.$c.aj(ka.Y9.V9.J9.Ijt,null))},S5t(t,s){if(!(t<=0||s<=0)){this.$c.l3t(t,s),this.$c.o4().qH();const i=this.$c.bR();i&&("off"!==i.e3t()&&this.$c.ykt(t,s),i.WI(i.CU(),i.GU(),!0),this.$c.y4())}},T5t(t){const s=this.$c.bR();s&&"off"!==s.e3t()&&(s.y3t(0!==t?"high":"low"),s.WI(s.CU(),s.GU(),!0))},vit(t){this.$c.aFt(t)},b5t(){this.$c.uFt()},x5t(t){this.$c.lFt(t)},v5t(t){this.$c.T2t(t)},C5t(t){},G5t(){for(const t of this.$c.W3().V3())t.pq()},I5t(t){this.$c.rFt(0!==t)},_5t(t,s){this.$c.F3(1/t),this.$c.O3(1/s)},D5t(t,s){this.$c.O3(t),this.$c.F3(s)},N5t(t){this.$c.E3(["vsync","unlimited-tick","unlimited-frame"][t])},E5t(t,i){if(t){const s=t.GP(),e=s.CP(),h=Fa,r=ja,n=this.$c.o4(),o=t.AV(),a=t.dMt();for(let t=0,s=e.length;t<s;++t){const u=e[t],l=u.u4();if(l){let t;t=o?u.Crt(i+u.TF().fMt(a)):u.Crt(i),h.push([l.l4().cO(),l.c4()]),r.push([u,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.f4(h[t][0]),d=h[t][1],p=f.d4();p[d]!==c&&((p[d]=c).u4().m4(f,!0),f.g4(c),i=!0)}i&&this.$c.y4(),ka.Ln(Fa),ka.Ln(ja)}}},nR(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.$c.MO().nR(t,s)},A5t(t){if(!this.$c.Pg()){const s=this.$c.W3();s.H3()||s.q3(t)}},L5t(t){if(!this.$c.Pg()){const s=this.$c.W3();if(!s.H3()){const i=s.zq(t);i&&s.q3(i)}}},O5t(t){if(!this.$c.Pg()){const s=this.$c.W3();if(!s.H3()){const i=s.V3(),e=i.indexOf(s.z3());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.q3(h)}}}},R5t(){if(!this.$c.Pg()){const t=this.$c.W3();t.H3()||(t.q3(t.z3()),this.$c.UO().L1t())}},P5t(t,s){t&&t.Nk(s)},k5t(t,s){t&&t.Ok(s)},F5t(t,s){t&&t.kk(s)},j5t(t,s){t&&t.TN(s/100)},z5t(t,s){t&&t.zk(s)},B5t(t,s){t&&t.Uk(s)},U5t(t,s){t&&t.JP(ka.dr(+s))},W5t(t,s,i){t&&(t.hF(!0),t.YP(s),t.qP(i))},Q5t(t){t&&t.hF(!1)},J5t(t,s,i){t&&t.fY(s/100,i/100)},V5t(t,s){t&&t.lT(+s)},Y5t(t,s){if(t){Ba.ga(s),Ba.lr();const i=t.eF();i.na(Ba)||(i.Zo(Ba),this.y4())}},H5t(t,s){t&&t.Xk(s)},q5t(t,s){t&&t.YS(s)},Z5t(t,s,i){if(t){const e=t.FP(),h=e.yht(i);if(h){const r=1===s;h.jpt()!==r&&(h.ZEt(r),t.vz(),this.$c.y4())}}},X5t(t,s,i,e){if(t){const h=t.FP(),r=h.yht(s);if(r){i=Math.floor(i);const n=r.Zx().Kx(i);if(n){"color"===n?(Ba.ga(e),e=Ba):"percent"===n&&(e/=100);const o=h.Gz(r.cO(),i,e);o&&r.jpt()&&this.$c.y4()}}}},K5t(t,s){t&&t.tF(s)},$5t(t){this.$c.o4().WP(+t)},tzt(t){this.$c.o4().JP(ka.dr(+t))},szt(t,s){const i=this.$c.o4(),e=i.FP(),h=e.yht(s);if(h){const r=1===t;h.jpt()!==r&&(h.ZEt(r),i.vz(),this.$c.y4())}},izt(t,s,i){const e=this.$c.o4(),h=e.FP(),r=h.yht(t);if(r){s=Math.floor(s);const n=r.Zx().Kx(s);if(n){"color"===n?(Ba.ga(i),i=Ba):"percent"===n&&(i/=100);const o=h.Gz(r.cO(),s,i);o&&r.jpt()&&this.$c.y4()}}},ezt(t,s){const i=this.$c.o4();i.gk(t/100,s/100)},hzt(t){const s=this.$c.o4();0===t?s.wk():s.Sk()},rzt(t){const s=this.$c.o4();s.YP(t)},nzt(t){const s=this.$c.o4();s.qP(t)},ozt(t,s){const i=this.$c.o4();i.YP(t),i.qP(s)},azt(t){if(t){const s=t.wTt();if(s){const i=s.u4();if(i){const e=this.$c.o4();e.YP(i.hT()),e.qP(i.oT())}}}},ak(t,s,i){const e=this.$c.o4();try{e.ak(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},lk(t,s,i){if(t){const e=this.$c.o4();try{e.lk(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},fk(t){if(t){const s=this.$c.o4();s.fk(t)}},pk(){this.$c.o4().pk()},async uzt(t){const s=this.$c.z3();if(s&&t&&!this.$c.Pg()){const i=t.AV()?t.Pmt():[t];await this.rjt(s,i)}},async lzt(t){await ka.Y9.V9.kht.uzt.call(this,this.$c.mkt(t))},czt(t){const s=this.$c.z3();if(s&&t){const i=t.AV()?t.Pmt():[t];this.ojt(s,i)}},fzt(t){ka.Y9.V9.kht.czt.call(this,this.$c.mkt(t))},dzt(){const t=this.$c.z3();if(t){const s=t.d9();this.ojt(t,s)}},async pzt(t){const s=this.$c.z3();t&&s&&!this.$c.Pg()&&await this.rjt(s,t.l9())},async mzt(t){const s=this.$c.z3(),i=this.$c.W3().zq(t);i&&s&&!this.$c.Pg()&&await this.rjt(s,i.l9())},e3(t){const s=this.qct.t3();if(s)switch(s.i3()){case 1:"number"==typeof t&&s.e3(t);break;case 2:"string"==typeof t&&s.e3(t);break;case 3:s.e3(t)}},gzt(t,s,i){const e=this.wjt(t.toLowerCase(),!0),h=e.Tjt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ka.first(h.values())||e.Sjt);if(n){const o=0!==n.KO(),a=0!==i.KO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},yzt(t,s){const i=this.wjt(t.toLowerCase(),!0),e=(i.Sjt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ka.first(i.Tjt.values())||i.Sjt);if(e){const h=0!==e.KO(),r=0!==s.KO();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.Sjt=s},Mzt(t,s,i){const e=this.$c,h=e.DTt()?Ua:null,r=(i=Math.floor(i),this.wjt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.Tjt.get(s.toLowerCase());if(!n){if(!r.Sjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.Sjt,i=0}if(!n.Jl())return h;if(0!==n.KO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.UO(),a=o.HO(),u=a.YO(),l=0<u.length,c=(l&&(n.XO()?o.L6(u):o.odt(u)),[]),f=o.spt(a);if(f){const p=f.ept();for(let t=i,s=p.length;t<s;++t)c.push(p[t].oet())}const d=n.ept();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].n1t());return e.DTt()?this.xjt(o,n,c,l,u):this.bjt(o,n,c,l,u)}}}{const D=self.Rs;D.Y9.V9.Fht={wzt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},R(t){return t.toString()},Qt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.$c.j3()*t:this.$c.j3()*(s-t)+t},Xyt(...t){const s=Math.floor(this.$c.j3()*t.length);return t[s]},Szt(t,...s){return"number"!=typeof t&&(t=0),s[t=D.lr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},Tzt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},bzt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(D.dr(t))},cos(t){return Math.cos(D.dr(t))},tan(t){return Math.tan(D.dr(t))},asin(t){return D.pr(Math.asin(t))},acos(t){return D.pr(Math.acos(t))},atan(t){return D.pr(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},lr(t,s,i){return D.lr(t,s,i)},_t(t,s,i,e){return D.mr(t,s,i,e)},angle(t,s,i,e){return D.pr(D.yr(t,s,i,e))},Ot(t,s,i){return D.Ot(t,s,i)},Ir(t,s,i){return D.Ir(t,s,i)},Dr(t,s,i,e){return D.Dr(t,s,i,e)},Nr(t,s,i,e,h){return D.Nr(t,s,i,e,h)},Er(t,s,i){return D.Er(t,s,i)},xzt(t,s){return D.pr(D.Mr(D.dr(t),D.dr(s)))},vzt(t,s,i){return D.pr(D.br(D.dr(t),D.dr(s),i))},Czt(t,s,i){return D.pr(D.Sr(D.dr(t),D.dr(s),D.dr(i)))},Gzt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},Izt(t,s){return(t|=0)^1<<(0|s)},_zt(t,s){return(t|=0)&1<<(0|s)?1:0},Dzt(){return"\n"},Nzt(t){return"string"==typeof t?t.toUpperCase():""},Ezt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},Azt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},Lzt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(D.ne(s),"i")):-1},Ozt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(D.ne(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(D.ne(s),"gi"),i):"string"==typeof t?t:""},Rzt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},Pzt(t,s,i){const e=this.ejt(s,i);return t?t.search(e):-1},kzt(t,s,i,e){const h=this.ejt(s,i);return t?t.replace(h,e):""},Fzt(t,s,i){const e=this.hjt(t.toString(),s,i);return e?e.length:0},jzt(t,s,i,e){e=Math.floor(e);const h=this.hjt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},zzt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},Bzt(t){return encodeURIComponent(t)},Uzt(t){return decodeURIComponent(t)},u3(){return this.$c.MX()},timescale(){return this.$c.S3()},Wzt(){return(Date.now()-this.$c.Hkt())/1e3},Qzt(){return Date.now()},time(){return this.$c.g3()},tickcount(){return this.$c.mtt()},Jzt(){return this.$c.Xkt()},fps(){return this.$c.b3()},Vzt(){return this.$c.G3()},Yzt(){return this.$c._3()},Hzt(){return this.$c.bR().NR()},qzt(){return this.$c.bR().AR()},Zzt(){return this.$c._O()},Xzt(){return this.$c.NO()},Kzt(){return this.$c._O()},$zt(){return this.$c.NO()},tBt(){return this.$c.o4().HP()},sBt(){return this.$c.o4().ZP()},iBt(){return this.$c.o4().Jc()},eBt(){return this.$c.o4().QP()},hBt(){return D.pr(this.$c.o4().VP())},rBt(){return this.$c.o4().im()},nBt(){return this.$c.o4().pm()},oBt(){return 100*this.$c.o4().hY()},aBt(){return 100*this.$c.o4().rY()},uBt(t){const s=this.$c.o4().l4(t);return s?s.eY().yu():0},lBt(t){const s=this.$c.o4().l4(t);return s?s.eY().Mu():0},cBt(t){const s=this.$c.o4().l4(t);return s?s.eY().wu():0},fBt(t){const s=this.$c.o4().l4(t);return s?s.eY().Su():0},dBt(t){const s=this.$c.o4().l4(t);return s?s.eY().width():0},pBt(t){const s=this.$c.o4().l4(t);return s?s.eY().height():0},mBt(t){const s=this.$c.o4().l4(t);if(s){const i=s.eY();return(i.yu()+i.wu())/2}return 0},gBt(t){const s=this.$c.o4().l4(t);if(s){const i=s.eY();return(i.Mu()+i.Su())/2}return 0},yBt(t,s,i){const e=this.$c.o4().l4(t);return e?e.aF(s,i)[0]:0},MBt(t,s,i){const e=this.$c.o4().l4(t);return e?e.aF(s,i)[1]:0},wBt(t,s,i){const e=this.$c.o4().l4(t);return e?e.fF(s,i)[0]:0},SBt(t,s,i){const e=this.$c.o4().l4(t);return e?e.fF(s,i)[1]:0},TBt(t,s,i,e){const h=this.$c.o4(),r=h.l4(t),n=h.l4(s);if(!r||!n||r===n)return i;const[o,a]=r.fF(i,e);return n.aF(o,a)[0]},bBt(t,s,i,e){const h=this.$c.o4(),r=h.l4(t),n=h.l4(s);if(!r||!n||r===n)return e;const[o,a]=r.fF(i,e);return n.aF(o,a)[1]},xBt(t){const s=this.$c.o4().l4(t);return s?s.Bk():0},vBt(t){const s=this.$c.o4().l4(t);return s?D.pr(s.Qk()):0},CBt(t){const s=this.$c.o4().l4(t);return s?100*s.wN():0},GBt(t){const s=this.$c.o4().l4(t);return s?s.Wk():0},IBt(t){const s=this.$c.o4().l4(t);return s?s.HP():0},_Bt(t){const s=this.$c.o4().l4(t);return s?s.ZP():0},DBt(t){const s=this.$c.o4().l4(t);return s?100*s.Vk():0},NBt(t){const s=this.$c.o4().l4(t);return s?100*s.Hk():0},EBt(t){const s=this.$c.o4().l4(t);return s?s.uT():0},ABt(t){const s=this.$c.o4().l4(t);return s?s.cO():-1},LBt(){const t=this.$c.bR();return t?t.B3t():""},OBt(t){const s=this.l0t;if(!s.n0t())return 0;if(t){const i=s.a0t(t);return i?i.cO():0}return s.h0t().cO()},RBt(){return this.$c.cFt()},PBt(t,s,...i){const e=this.wjt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.Tjt.get(s.toLowerCase());if(!h){if(!e.Sjt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.Sjt}const r=h.KO(),n=h.QO();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.Jl())return n;const o=this.$c,a=o.UO(),u=a.HO(),l=u.YO(),c=0<l.length,f=(c&&(h.XO()?a.L6(l):a.odt(l)),h.ept());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].n1t());const d=h.VO(),p=d.ZO(d.YO(),h.XO(),r,n,...i);return c&&a.R6(l),p},kBt(){return this.$c.mO().YQ()},FBt(){return 0===this.tjt?1:this.sjt/this.tjt},renderer(){return this.$c.v3t()?"webgpu":"webgl"},jBt(){return this.$c.v3t()?this.$c.v3t().GetAdapterInfoString():this.$c.x3t()._E()},zBt(){let t=this.$c.IS().lS();return Math.round(100*t/1048576)/100},BBt(t,s,i){return D.Fr(t,s,i)},UBt(t,s,i){return D.zr(t/100,s/100,i/100)},WBt(t,s,i,e){return D.jr(t/100,s/100,i/100,e/100)},QBt(t,s,i){return D.zr(t/255,s/255,i/255)},JBt(t,s,i,e){return D.jr(t/255,s/255,i/255,e/255)},VBt(){return this.$c.bO()},YBt(){return this.$c.vO()},HBt(){return this.$c.HO().K7().Jc()},qBt(){return this.$c.HO().tgt()}}}{const Wa=self.Rs;Wa.Y9.Text=class extends Wa.Sbt{constructor(t){super(t)}er(){super.er()}}}{const Qa=self.Rs;Qa.Y9.Text.PGt=class extends Qa.rxt{constructor(t){super(t)}er(){super.er()}Wbt(){}m9(t){}T9(){}}}{const Ja=self.Rs,Va=self.Js,Ya=[0,0,0],Ha=["left","center","right"],qa=["top","center","bottom"],Za=["ltr","rtl"],Xa=["word","cjk","character"],Ka=new Ja.Rect,$a=new Ja.Yu,tu=new Ja.ko,su=Ja.ir(Ja.Ya),iu=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["iconoffsety",null]]),N=(Ja.Y9.Text.Instance=class extends Ja.Fxt{constructor(t,s){if(super(t),this.tf="",this.ZBt=!0,this.XBt="Arial",this.KBt=12,this.$Bt=0,this.GG=!1,this.IG=!1,this.QS=Ja.ir(Ja.ko),this.LG=0,this.OG=0,this.FG="word",this.jG=0,this.tUt="auto",this.sUt=1,this.iUt=null,this.eUt="",this.hUt=!1,this.rUt=!1,this.nUt=null,this.oUt=-1,this.aUt=-1,this.uUt=0,this.lUt=Ja.ir(Ja.qg.dS,this.$c.IS(),{timeout:5}),this.lUt.fI=()=>this.$c.y4(),this.cUt=()=>this.fUt(),this.dUt=!1,s){this.tf=s[0],this.ZBt=!!s[1],this.XBt=s[2],this.KBt=s[3],this.$Bt=s[4],this.GG=!!s[5],this.IG=!!s[6],this.LG=s[8],this.OG=s[9],this.FG=Xa[s[10]],this.jG=s[11],this.pUt(this.$c.w6(s[12]));const i=s[7];this.QS.Wo(i[0],i[1],i[2]),this.u4().Nk(s[13]),this.rUt=!!s[15]}this.mUt(),this.gUt()}er(){this.pUt(null),this.yUt(),this.nUt&&(this.nUt.er(),this.nUt=null),this.lUt.er(),this.lUt=null,super.er()}mUt(){const t=this.lUt;t.hf(this.tf),t.gI(this.ZBt),this.lUt.wG()&&this.iUt?this.lUt.$p(this.E4().nFt(this.iUt)):this.lUt.$p(null),t.yI("nearest"!==this.$c.EO()),t.MI(this.XBt),t.bI(this.$Bt),t.vI(this.GG),t.GI(this.IG),t.HS(this.QS),t.LI(Ha[this.LG]),t.RI(qa[this.OG]),t.FI(this.FG),t.zI(Za[this.jG])}MUt(){let t=this.u4(),s=(this.lUt.wI(this.KBt),this.lUt.TI(t.xNt()),t.l4()),i;"auto"===this.tUt?i=s.tH(t.Bj()):"fixed"===this.tUt&&(i=this.sUt),t.q5()&&i!==this.lUt.QI()&&t.GEt(!0),this.lUt.WI(t.im(),t.pm(),i)}pUt(t){t&&(t.AV()||t.pP().constructor!==Ja.Y9.Sht)||t!==this.iUt&&(this.iUt&&this.iUt.Rf().removeEventListener("animationframeimagechange",this.cUt),this.iUt=t,this.iUt&&this.iUt.Rf().addEventListener("animationframeimagechange",this.cUt),this.mUt(),this.hUt=!1,this.$c.y4())}fUt(){this.$c.oFt(this.iUt),this.$c.y4(),this.dUt=!0}gUt(){if(this.rUt){let t=this.tf;this.ZBt&&(t=Ja._h.Yp(t)),this.nUt?this.nUt.hf(t):this.nUt=Ja.ir(Ja.Kc,this.$c,t)}else this.nUt&&(this.nUt.er(),this.nUt=null)}VT(t){const s=this.u4(),i=(this.MUt(),this.dUt&&(this.dUt=!1,this.lUt.wG())&&this.iUt&&this.lUt.$p(this.E4().nFt(this.iUt)),this.lUt.xb());if(i){const e=s.l4();if(0===s.VP()&&0===e.VP()&&0===s.Bj()&&!s.q5()&&e.wY()){const h=s.Jj(),[r,n]=e.gF(h.Zr(),h.Xr()),[o,a]=e.gF(h.tn(),h.sn()),u=r-Math.round(r),l=n-Math.round(n),[c,f]=(Ka.set(r,n,o,a),Ka.offset(-u,-l),$a.pl(Ka),t.FN(t.eE()));this.$c.bR().IW(t,c,f),t.vN(i),t.xw($a,this.lUt.S_()),e.DW(t)}else t.vN(i),s.q5()?this.wUt(s,t):this.SUt(s,t)}}SUt(t,s){let i=t.Jj();this.$c.LO()&&(i=this.TUt(i)),s.xw(i,this.lUt.S_())}wUt(s,t){const i=s.CEt();if(s.IEt()){s.hEt(Ka,$a,!1);let t=$a;this.$c.LO()&&(t=this.TUt(t)),i.JT(s.Z5(),t,this.lUt.S_()),s.GEt(!1)}i.VT(t)}TUt(t){const s=t.Zr()-Math.round(t.Zr()),i=t.Xr()-Math.round(t.Xr());return 0==s&&0==i?t:($a.G(t),$a.offset(-s,-i),$a)}Yxt(){const t=this.lUt.xb();return t?[t.im(),t.pm()]:[100,100]}Hxt(){return this.lUt.S_()}Xxt(){return!1}yT(){const t={t:this.tf,c:this.QS.toJSON(),fn:this.XBt,ps:this.KBt};return this.ZBt&&(t.bbc=this.ZBt),0!==this.LG&&(t.ha=this.LG),0!==this.OG&&(t.va=this.OG),"word"!==this.FG&&(t.wr=this.FG),0!==this.$Bt&&(t.lho=this.$Bt),this.GG&&(t.b=this.GG),this.IG&&(t.i=this.IG),-1!==this.aUt&&(t.tw={st:this.oUt,en:this.aUt,l:this.uUt}),this.iUt&&(t.ioc=this.iUt.zV()),"fixed"===this.tUt&&(t.fs=this.sUt),t}MT(t){if(this.yUt(),this.tf=t.t,this.QS.Pa(t.c),this.XBt=t.fn,this.KBt=t.ps,this.ZBt=!!t.hasOwnProperty("bbc")&&t.bbc,this.LG=t.hasOwnProperty("ha")?t.ha:0,this.OG=t.hasOwnProperty("va")?t.va:0,t.hasOwnProperty("wr")){const s=t.wr;this.FG="boolean"==typeof s?s?"word":"character":s}else this.FG="word";if(this.$Bt=t.hasOwnProperty("lho")?t.lho:0,this.GG=!!t.hasOwnProperty("b")&&t.b,this.IG=!!t.hasOwnProperty("i")&&t.i,t.hasOwnProperty("tw")){const i=t.tw;this.oUt=i.st,this.aUt=i.en,this.uUt=i.l}if(t.hasOwnProperty("ioc")){const e=this.E4().w6(t.ioc);e&&this.pUt(e)}else this.pUt(null);t.hasOwnProperty("fs")?(this.tUt="fixed",this.sUt=t.fs):this.tUt="auto",this.mUt(),this.gUt(),this.hUt=!1,-1!==this.aUt&&this.Dxt()}grt(t){switch(t){case 0:return this.UI();case 1:return this.ZBt;case 2:return this.bUt();case 3:return this.xUt();case 4:return this.vUt();case 5:return this.CUt();case 6:return this.GUt();case 7:return Ya[0]=this.QS.Xo(),Ya[1]=this.QS.Ko(),Ya[2]=this.QS.$o(),Ya;case 8:return this.IUt();case 9:return this._Ut();case 10:return this.DUt();case 15:return this.NUt()}}brt(t,s){switch(t){case 0:this.EUt(s);break;case 1:this.ZBt!==!!s&&(this.ZBt=!!s,this.mUt());break;case 2:this.AUt(s);break;case 3:this.LUt(s);break;case 4:this.OUt(s);break;case 5:this.RUt(s);break;case 6:this.PUt(s);break;case 7:const i=this.QS,e=s;i.Xo()===e[0]&&i.Ko()===e[1]&&i.$o()===e[2]||(this.QS.Wo(e[0],e[1],e[2]),this.mUt());break;case 8:this.kUt(s);break;case 9:this.FUt(s);break;case 10:this.jUt(s)}}Oxt(t,s,i,e){0===s&&0===i&&0===e||7===t&&(this.QS.Qo(s,i,e),this.mUt())}EUt(t){this.tf!==t&&(this.tf=t,this.lUt.hf(t),this.gUt(),this.hUt=!1,this.$c.y4())}UI(){return this.tf}zUt(t,s){this.MUt(),this.EUt(t),this.oUt=this.$c.M3(),this.aUt=this.oUt+s/this.OB().FF(),this.uUt=this.lUt.HI(),this.lUt._I(0),this.Dxt()}yUt(){this.oUt=-1,this.aUt=-1,this.uUt=0,this.lUt._I(-1),this.dxt()}BUt(){-1!==this.aUt&&(this.yUt(),this.nj(Ja.Y9.Text.J9.UUt),this.$c.y4())}AUt(t){this.XBt!==t&&(this.XBt=t,this.lUt.MI(t),this.$c.y4())}bUt(){return this.XBt}RUt(t){this.GG!==(t=!!t)&&(this.GG=t,this.lUt.vI(t),this.$c.y4())}CUt(){return this.GG}PUt(t){this.IG!==(t=!!t)&&(this.IG=t,this.lUt.GI(t),this.$c.y4())}GUt(){return this.IG}LUt(t){this.KBt!==t&&(this.KBt=t,this.$c.y4())}xUt(){return this.KBt}WUt(t){this.QS.na(t)||(this.QS.Zo(t),this.lUt.HS(this.QS),this.$c.y4())}QUt(){return this.QS}OUt(t){this.$Bt!==t&&(this.$Bt=t,this.mUt(),this.$c.y4())}vUt(){return this.$Bt}kUt(t){this.LG!==t&&(this.LG=t,this.mUt(),this.$c.y4())}IUt(){return this.LG}FUt(t){this.OG!==t&&(this.OG=t,this.mUt(),this.$c.y4())}_Ut(){return this.OG}JUt(t){this.jUt(Xa[t])}jUt(t){this.FG!==t&&(this.FG=t,this.mUt(),this.$c.y4())}DUt(){return this.FG}VUt(t){this.jG!==t&&(this.jG=t,this.mUt(),this.$c.y4())}YUt(){return this.jG}HUt(t){this.rUt=!!t,this.gUt()}NUt(){return this.rUt}qUt(t){this.tUt!==t&&(this.tUt=t,this.$c.y4())}ZUt(){return this.tUt}XUt(t){this.sUt!==t&&(this.sUt=t,"fixed"===this.tUt)&&this.$c.y4()}KUt(){return this.sUt}$Ut(){return this.MUt(),this.lUt.JI()}t6t(){return this.MUt(),this.lUt.YI()}s6t(t,s){this.MUt();const i=this.u4(),e=(su.set(t-i.hT(),s-i.oT()),su.rotate(-i.VP()),su.offset(i.im()*i.Yz(),i.pm()*i.Zz()),su.Gt(i.im(),i.pm()),su.scale(this.lUt.im(),this.lUt.pm()),this.lUt.ZI(su.Ka(),su.tu()));if(e){const h=e.eg("tag");if(h)return h.Bp}return""}i6t(t,s,i){const e=this.s6t(s,i);return e&&Ja.ph(t,e)}e6t(t,s){this.MUt(),s=Math.floor(s);const i=this.lUt.KI(t,s);if(!i)return null;const e=this.u4(),h=this.lUt.EI(),r=i.Km(),n=i.tg()-(i.pm()-i.ym())*h,o=i.im()*h/this.lUt.im()*e.im(),a=i.pm()*h/this.lUt.pm()*e.pm();return su.set(r,n),su.Gt(this.lUt.im(),this.lUt.pm()),su.scale(e.im(),e.pm()),su.offset(-e.im()*e.Yz(),-e.pm()*e.Zz()),su.rotate(e.VP()),su.offset(e.hT(),e.oT()),{x:su.Ka(),y:su.tu(),width:o,height:a}}h6t(t){return this.MUt(),this.lUt.$I(t)}r6t(t){let s=iu.get(t);return null===s?"":`</${s||"span"||"span"}>`}n6t(t,s){let i=iu.get(t);if(null===i)return"";switch(i=i||"span",t){case"color":return`<${i} style="color: ${s}">`;case"font":return`<${i} style="font-family: '${s}'">`;case"opacity":return`<${i} style="opacity: ${s}%">`;case"size":return`<${i} style="font-size: ${s}pt">`;case"background":return`<${i} style="background-color: ${s}">`;case"hide":return`<${i} style="visibility: hidden">`;case"class":return`<${i} class="${s}">`;case"tag":return`<${i} data-tag="${s}">`;default:return`<${i}>`}}async o6t(){if(!this.hUt){let t=new Ja._h(this.tf,{_p:!0}).jp(),s=new Map,h='<span class="c3-text"',i=[],r=(i.push(`font-family: '${this.bUt()}';`),this.CUt()&&i.push("font-weight: bold;"),this.GUt()&&i.push("font-style: italic;"),"character"===this.DUt()&&i.push("word-break: break-all;"),h+=` style="${i.join(" ")}">`,this.iUt?this.E4().nFt(this.iUt):null);if(this.iUt){const o=Ja.ir(Ja.n1),a=[],u=new Map;for(const c of t)if(c.fm()){const f=c.ug(r);if(f){const d=f.Jg(),p=d.Qz().wCt();u.has(p)||(u.set(p,null),a.push(o.hc(async()=>{const t=await p.vJ();u.set(p,t)})))}}await Promise.all(a);const l=[];for(const m of t)if(m.fm()){const g=m.ug(r);if(g){const y=g.Jg(),M=y.Qz().wCt();l.push(o.hc(async()=>{const t=await y.Qz().TCt(u.get(M));s.set(g,t)}))}}await Promise.all(l);for(const w of u.values())w instanceof ImageBitmap&&w.close&&w.close()}const n=new Map;for(const S of t){let e=S.rg(),t=[...n.keys()];t.reverse();for(const T of t)e.has(T)&&e.get(T)===n.get(T)||(n.delete(T),h+=this.r6t(T));for(const[b,x]of e)n.has(b)||(n.set(b,x),h+=this.n6t(b,x));if(S.um()&&(h+=Ja.Yd(Ja.Jd(S.Nm().join("")),"\n","<br>")),S.fm()&&r){const v=S.ug(r);if(v){const C=s.get(v);if(C){let t=[],s="0.2em",i=e.get("iconoffsety");if(i){let t=i.trim();s=t.endsWith("%")?parseFloat(t)/100+"em":t+"px"}t.push("top: "+s),"nearest"===this.$c.EO()&&t.push("image-rendering: pixelated"),h+=`<img class="c3-text-icon" data-icon="${S.ag()}" width="${v.im()}" height="${v.pm()}" style="${t.join(";")}" src="${C}">`}}}}const e=[...n.keys()];e.reverse();for(const G of e)h+=this.r6t(G);h+="</span>",this.eUt=h,this.hUt=!0}return this.eUt}SX(){const s=this.$c.M3();if(s>=this.aUt)this.yUt(),this.nj(Ja.Y9.Text.J9.UUt),this.$c.y4();else{let t=Ja._r(this.oUt,this.aUt,s,0,this.uUt);(t=Math.floor(t))!==this.lUt.DI()&&(this.lUt._I(t),this.$c.y4())}}Lxt(){const t="plugins.text";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.UI(),a6t:t=>this.EUt(t)},{name:t+".properties.font.name",value:this.bUt(),a6t:t=>this.AUt(t)},{name:t+".properties.size.name",value:this.xUt(),a6t:t=>this.LUt(t)},{name:t+".properties.line-height.name",value:this.vUt(),a6t:t=>this.OUt(t)},{name:t+".properties.bold.name",value:this.CUt(),a6t:t=>this.RUt(t)},{name:t+".properties.italic.name",value:this.GUt(),a6t:t=>this.PUt(t)}]}]}Qbt(){return self.u6t}},new WeakMap),eu=new Map([["left",0],["center",1],["right",2]]),hu=new Map([["top",0],["center",1],["bottom",2]]),ru=["ltr","rtl"];new Set(["auto","fixed"]);self.u6t=class extends self.K5{constructor(){super(),N.set(this,self.wF.vF().rz())}get text(){return N.get(this).UI()}set text(t){Va.Te(t);const s=N.get(this);s.yUt(),s.EUt(t)}l6t(t,s){Va.Te(t),Va.ye(s);const i=N.get(this);i.yUt(),i.zUt(t,s)}c6t(){N.get(this).BUt()}set AW(t){Va.Te(t),N.get(this).AUt(t)}get AW(){return N.get(this).bUt()}set OW(t){N.get(this).RUt(t)}get OW(){return N.get(this).CUt()}set RW(t){N.get(this).PUt(t)}get RW(){return N.get(this).GUt()}set LW(t){Va.ye(t),N.get(this).LUt(t)}get LW(){return N.get(this).xUt()}set f6t(t){if(Va.ke(t),t.length<3)throw new Error("expected 3 elements");tu.Wo(t[0],t[1],t[2]),N.get(this).WUt(tu)}get f6t(){const t=N.get(this).QUt();return[t.Xo(),t.Ko(),t.$o()]}set lineHeight(t){Va.ye(t),N.get(this).OUt(t)}get lineHeight(){return N.get(this).vUt()}set FW(t){Va.Te(t);const s=eu.get(t);if(void 0===s)throw new Error("invalid mode");N.get(this).kUt(s)}get FW(){return Ha[N.get(this).IUt()]}set verticalAlign(t){Va.Te(t);const s=hu.get(t);if(void 0===s)throw new Error("invalid mode");N.get(this).FUt(s)}get verticalAlign(){return qa[N.get(this)._Ut()]}set jW(t){if(!Xa.includes(t))throw new Error("invalid mode");N.get(this).jUt(t)}get jW(){return N.get(this).DUt()}set zW(t){Va.Te(t);const s=ru.indexOf(t);if(-1===s)throw new Error("invalid text direction");N.get(this).VUt(s)}get zW(){return ru[N.get(this).YUt()]}set d6t(t){N.get(this).HUt(!!t)}get d6t(){return N.get(this).NUt()}p6t(t){Va.ye(t);const s=N.get(this);s.qUt("fixed"),s.XUt(t)}m6t(){N.get(this).qUt("auto")}get WW(){return N.get(this).$Ut()}get QW(){return N.get(this).t6t()}g6t(){const t=N.get(this);return[t.$Ut(),t.t6t()]}y6t(t,s,i){return Va.Te(t),Va.ye(s),Va.ye(i),N.get(this).i6t(t,s,i)}M6t(t,s){return Va.ye(t),Va.ye(s),N.get(this).s6t(t,s)}w6t(t,s=0){return Va.Te(t),Va.ye(s),N.get(this).e6t(t,s)}S6t(t){return Va.Te(t),N.get(this).h6t(t)}T6t(t){const s=N.get(this),i=s.E4().lR(t);s.pUt(i)}b6t(){return N.get(this).o6t()}}}{const nu=self.Rs;nu.Y9.Text.J9={x6t(t,s){return s?this.tf===t:nu.ph(this.tf,t)},v6t(){return-1!==this.aUt},UUt(){return!0},C6t(t,s,i){return this.i6t(t,s,i)}}}{const ou=self.Rs,au=ou.ir(ou.ko);ou.Y9.Text.kht={hf(t){this.yUt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.EUt(t.toString())},G6t(t){this.yUt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.EUt(this.tf+t)},I6t(t,s){this.yUt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.zUt(t.toString(),s)},_6t(t,s){let i=!1,e=!1;switch(s){case 1:i=!0;break;case 2:e=!0;break;case 3:i=!0,e=!0}t===this.XBt&&i===this.GG&&e===this.IG||(this.AUt(t),this.RUt(i),this.PUt(e))},wI(t){this.LUt(t)},D6t(t){au.ga(t),au.lr(),this.WUt(au)},N6t(t,s){console.warn("[Text] 'Set web font' action is deprecated and no longer has any effect")},E6t(t){this.u4().YS(t),this.$c.y4()},A6t(){this.BUt()},bI(t){this.OUt(t)},L6t(t){this.kUt(t)},O6t(t){this.FUt(t)},R6t(t){this.JUt(t)},zI(t){this.VUt(t)},P6t(t){this.pUt(t)},k6t(){return this.o6t()},F6t(t){this.HUt(t)},j6t(t,s){this.qUt(["auto","fixed"][t]),this.XUt(s)}}}{const uu=self.Rs;uu.Y9.Text.Fht={Text(){return this.tf},z6t(){return this.ZBt?uu._h.Yp(this.tf):this.tf},B6t(){return this.XBt},U6t(){return this.KBt},W6t(){return this.$Ut()},Q6t(){return this.t6t()},J6t(){return this.$Bt},V6t(t,s){return this.s6t(t,s)},Y6t(t){return this.h6t(t)},H6t(t,s){const i=this.e6t(t,s);return i?i.x:0},q6t(t,s){const i=this.e6t(t,s);return i?i.y:0},Z6t(t,s){const i=this.e6t(t,s);return i?i.width:0},X6t(t,s){const i=this.e6t(t,s);return i?i.height:0},K6t(){return this.eUt}}}{const lu=self.Rs;lu.Y9.Sht=class extends lu.Sbt{constructor(t){super(t)}er(){super.er()}}}{const cu=self.Rs,fu=self.Js,du=[],pu=(cu.Y9.Sht.PGt=class extends cu.rxt{constructor(t){super(t),this.DGt=t.pIt()}er(){cu.Ln(this.DGt),super.er()}Wbt(){for(const t of this.DGt)t.NCt(this.$c)}m9(s){const i={e2:this.$c.EO()};return Promise.all(this.DGt.map(t=>t.ECt(s,i)))}T9(){for(const t of this.DGt)t.ACt()}M9(){this.$6t()}$6t(){for(const t of this.Bct.vP())t.rz().tWt()}Wwt(t){cu.Y9.Sht.tbt(this,t)}_St(t){du.push({uxt:null,sWt:!1,instances:[]})}iWt(t,s,i){const e=du.at(-1);e.uxt=t,e.sWt=i,e.instances.push(s)}DSt(t){const s=du.pop(),i=s.uxt,e=s.sWt;if(i){const h=new Map;for(const r of s.instances)r.v_t(h,i,e);for(const[n,o]of h)n.GP().fft(o)}}eWt(t){const s=this.TF().wIt(t),i=this.E4(),e=s.LCt(0);return e.Qz().MW(i.IS(),{e2:i.EO()}).then(()=>this.$6t()),s}hWt(t){for(const s of this.Bct.vP())s.rz().rWt(t);this.TF().SIt(t)}nWt(t,s){const i=this.Bct.yIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.kCt(s);e<0&&(e+=i.Pz()+1);const h=cu.ICt.DCt(this.E4()),r=(i.OCt(h,e),this.E4());h.Qz().MW(r.IS(),{e2:r.EO()}).then(()=>this.$6t());for(const n of this.Bct.vP())n.rz().oWt();return h}aWt(t,s){const i=this.Bct.yIt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.Pz())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.kCt(s);e<0&&(e+=i.Pz()),i.RCt(e);for(const h of this.Bct.vP())h.rz().oWt()}Qbt(){return self.uWt}},new WeakMap);self.uWt=class extends self.fP{constructor(t){super(t),pu.set(this,t.ISt())}lWt(t){fu.Te(t);const s=pu.get(this).TF().yIt(t);return s?s.FCt():null}cWt(){return pu.get(this).TF().gIt().map(t=>t.FCt())}fWt(t){return fu.Te(t),pu.get(this).eWt(t).FCt()}dWt(t){fu.Te(t),pu.get(this).hWt(t)}pWt(t,s){if(fu.Te(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return pu.get(this).nWt(t,s).jz()}mWt(t,s){if(fu.Te(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");pu.get(this).aWt(t,s)}}}{const E=self.Rs,mu=self.Js,gu=E.ir(E.Rect),yu=E.ir(E.Yu),Mu=E.ir(E.Ya),A=(E.Y9.Sht.Instance=class extends E.Fxt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.gWt=this.Bct.yIt(e)||this.Bct.pIt()[0],this.yWt=E.lr(h,0,this.gWt.Pz()-1),this.MWt=this.gWt.LCt(this.yWt);const n=this.MWt.Qz(),o=(this.wWt=n.xb(),this.SWt=n.S_(),this.TWt=n.Zxt(),this.Uxt(),t.b_t(2,!0),t.b_t(1,0<=this.gWt._z()),this.bWt=Math.abs(this.gWt._z()),this.xWt=this.gWt.Lz(),this.vWt=E.ir(E.g0),this.CWt=0,this.GWt=0,this.IWt="",this._Wt=-1,this.DWt="",this.NWt=0,this.u4());this.EWt=o.Jj(),o.Nk(i),o.o5(r),o.qrt(this.MWt.Yz()),o.Xrt(this.MWt.Zz()),o.pEt(this.MWt.nB()),o.Rj(),1===this.Bct.mIt()&&1===this.Bct.pIt()[0].Pz()||0===this.bWt||this.Dxt()}er(){this.gWt=null,this.MWt=null,this.wWt=null,this.vWt=null,super.er()}Vxt(){return this.MWt.Qz()}hit(){return!0}SJ(){this.wWt=null}Jxt(){this.tWt()}VT(t){const s=this.wWt;if(null!==s){t.vN(s);const i=this.u4();i.q5()?this.wUt(i,t):this.SUt(i,t)}}SUt(t,s){let i=this.EWt;this.$c.LO()&&(i=t.oEt(i)),s.ON(i,this.TWt)}wUt(s,t){const i=s.CEt();if(s.IEt()){s.hEt(gu,yu,!1);let t=yu;this.$c.LO()&&(t=s.oEt(t)),i.JT(s.Z5(),t,this.TWt),s.GEt(!1)}i.VT(t)}AWt(){return this.vWt.$s()}LWt(){return this.Ti.x_t(2)}OWt(t){this.Ti.b_t(2,t)}RWt(){return this.Ti.x_t(1)}PWt(t){this.Ti.b_t(1,t)}kWt(){return this.Ti.x_t(4)}FWt(t){this.Ti.b_t(4,t)}SX(){this.DWt&&this.jWt(),0<=this._Wt&&this.zWt();const t=this.bWt;if(this.LWt()&&0!==t){const s=this.$c.l3(this.Ti),i=(this.vWt.hc(s),this.AWt()),e=this.MWt,h=e.Jz()/t;if(!(i<this.CWt+h)){const r=this.gWt,n=this.xWt,o=r.Pz(),a=r.Ez(),u=r.Nz(),l=r.Rz(),c=(this.RWt()?this.yWt++:this.yWt--,this.CWt+=h,this.yWt>=o&&(l?(this.PWt(!1),this.yWt=o-2):!u&&(this.GWt++,this.GWt>=a)?this.BWt(!1):this.yWt=n),this.yWt<0&&(l?(this.yWt=1,this.PWt(!0),u||(this.GWt++,this.GWt>=a&&this.BWt(!0))):!u&&(this.GWt++,this.GWt>=a)?this.BWt(!0):this.yWt=n),this.yWt=E.lr(this.yWt,0,o-1),r.LCt(this.yWt));i>this.CWt+c.Jz()/t&&(this.CWt=i),this.UWt(e,c)}}else this.dxt()}BWt(t){this.yWt=t?0:this.gWt.Pz()-1,this.OWt(!1),this.IWt=this.gWt.Jc(),this.FWt(!0),this.axt("animationend",!1,{animationName:this.IWt}),this.nj(E.Y9.Sht.J9.WWt),this.nj(E.Y9.Sht.J9.QWt),this.FWt(!1),this.GWt=0}UWt(i,e,t){if(i!==e){const s=this.u4(),h=i.Qz(),r=e.Qz(),n=h.im(),o=h.pm(),a=r.im(),u=r.pm(),l=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,u):(n!==a&&s.lm(s.im()*(a/n)),o!==u&&s.hm(s.pm()*(u/o))),s.qrt(e.Yz()),s.Xrt(e.Zz()),s.pEt(e.nB()),s.Rj(),this.MWt=e,this.wWt=r.xb(),this.SWt=r.S_(),this.TWt=r.Zxt(),this.OB().pht());for(let t=0,s=l.length;t<s;++t)l[t].Pvt(i,e);this.axt("framechange",!1,{animationName:this.gWt.Jc(),JWt:this.yWt}),this.nj(E.Y9.Sht.J9.VWt),this.$c.y4()}}YWt(t){this.OWt(!0),this.CWt=this.AWt(),1===t&&0!==this.yWt&&(this._Wt=0,this.kWt()||this.zWt()),this.Dxt()}HWt(t,s,i){this.DWt=t,this.NWt=s,this.Dxt(),!i&&this.kWt()||this.jWt()}qWt(){return this.gWt}ZWt(){return this.DWt||this.gWt.Jc()}rWt(t){E.ph(t,this.ZWt())&&this.HWt(this.Bct.TIt().Jc(),1,!0)}XWt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Bct.yIt(this.ZWt());if(!s)return;if(-1===(t=s.PCt(t)))return}isFinite(t)&&(this._Wt=t,this.kWt()||this.zWt())}oWt(){if(!this.DWt&&-1===this._Wt){const t=this.MWt,s=this.gWt.LCt(E.lr(this.yWt,0,this.gWt.Pz()-1));t!==s&&this.UWt(t,s),1<this.gWt.Pz()&&0<this.bWt&&this.Dxt()}}KWt(){return this.yWt}$Wt(){return this.MWt.lB()}tQt(t){this.bWt=Math.abs(t),this.PWt(0<=t),0<this.bWt&&this.Dxt()}sQt(){return this.RWt()?this.bWt:-this.bWt}iQt(t){"string"==typeof t&&-1===(t=this.gWt.PCt(t))||(t=E.lr(Math.floor(t),0,this.gWt.Pz()-1),this.xWt=t)}eQt(){return this.xWt}jWt(t){const s=this.MWt,i=this.Bct.yIt(this.DWt);if(this.DWt="",i&&(i!==this.gWt||!this.LWt())){this.gWt=i,this.PWt(0<=i._z()),this.bWt=Math.abs(i._z()),this.xWt=i.Lz(),this.yWt=E.lr(this.yWt,0,this.gWt.Pz()-1),1===this.NWt&&(this.yWt=0),this.OWt(!0),this.CWt=this.AWt();const e=this.gWt.LCt(this.yWt);this.UWt(s,e,t)}}zWt(t){const s=this.MWt,i=this.yWt;if(this.yWt=E.lr(Math.floor(this._Wt),0,this.gWt.Pz()-1),this._Wt=-1,t||i!==this.yWt){const e=this.gWt.LCt(this.yWt);this.UWt(s,e),this.CWt=this.AWt()}}tWt(){const t=this.MWt.Qz();this.wWt=t.xb(),this.SWt=t.S_(),this.TWt=t.Zxt(),this.u4().GEt(!0)}xb(){return this.wWt}S_(){return this.SWt}Zxt(){return this.TWt}$z(){return this.MWt.$z()}USt(t){let s=this.MWt,i=this.u4(),e=null;if("string"==typeof t)e=s.hB(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.eB(t-1)}let h=i.Bj();if(!e)return[i.hT(),i.oT(),h];if(Mu.G(e.qCt()),i.q5()){const[r,n,o]=i.Z5().KT(Mu.Ka(),Mu.tu());Mu.set(r,n),h+=o}return Mu.offset(-s.Yz(),-s.Zz()),Mu.scale(i.im(),i.pm()),Mu.rotate(i.VP()),Mu.offset(i.hT(),i.oT()),[Mu.Ka(),Mu.tu(),h]}hQt(){return this.u4().wEt().Ll()}rQt(t){t=Math.floor(t);const s=this.u4(),i=s.wEt(),e=i.Ll();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Al();return[h[2*t+0]+s.hT(),h[2*t+1]+s.oT()]}Lxt(){const s=E.Y9.Sht.kht,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.gWt.Jc(),a6t:t=>this.Rxt(s.nQt,t,0)},{name:t+".current-frame",value:this.yWt,a6t:t=>this.Rxt(s.oQt,t)},{name:t+".is-playing",value:this.LWt(),a6t:t=>t?this.Rxt(s.aQt,0):this.Rxt(s.uQt)},{name:t+".speed",value:this.bWt,a6t:t=>this.Rxt(s.lQt,t)},{name:t+".repeats",value:this.GWt,a6t:t=>this.GWt=t}]}]}yT(){const t={a:this.gWt.zV()},s=(0!==this.CWt&&(t.fs=this.CWt),this.AWt()),i=(0!==s&&(t.at=s),0!==this.yWt&&(t.f=this.yWt),0!==this.bWt&&(t.cas=this.bWt),1!==this.GWt&&(t.ar=this.GWt),0!==this.xWt&&(t.rt=this.xWt),this.LWt()||(t.ap=this.LWt()),this.RWt()||(t.af=this.RWt()),this.u4());return i.n5()&&(t.ce=i.n5()),t}MT(t){const s=this.TF().MIt(t.a),i=(s&&(this.gWt=s),this.CWt=t.hasOwnProperty("fs")?t.fs:0,this.vWt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.yWt=E.lr(i,0,this.gWt.Pz()-1),this.bWt=t.hasOwnProperty("cas")?t.cas:0,this.GWt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.xWt=E.lr(e,0,this.gWt.Pz()-1),this.OWt(!t.hasOwnProperty("ap")||!!t.ap),this.PWt(!t.hasOwnProperty("af")||!!t.af),this.gWt.LCt(this.yWt)),r=(this.MWt=h,this.tWt(),this.u4());r.qrt(h.Yz()),r.Xrt(h.Zz()),r.pEt(h.nB()),r.o5(!!t.ce),this.LWt()&&this.Dxt()}grt(t){const s=this.u4();switch(t){case 3:return s.n5();case 2:return E.lr(this.yWt,0,this.gWt.Pz()-1);case 1:return this.gWt.Jc()}}brt(t,s,i){const e=this.u4();switch(t){case 3:e.o5(!!s);break;case 2:{this.OWt(!1);const h=this.gWt.Pz()-1,r=s=E.lr(s,0,h),n=this.gWt.LCt(this.yWt),o=this.gWt.LCt(r);this.UWt(n,o,i),this.yWt=E.lr(r,0,h);break}case 1:{this.DWt=s,this.jWt(i);const a=this.gWt.Pz();1<a&&0<this.gWt._z()?this.Dxt():this.dxt();break}}}Qbt(){return self.cQt}},new WeakMap),wu=new Map([["current-frame",0],["beginning",1]]);self.cQt=class extends self.K5{constructor(){super(),A.set(this,self.wF.vF().rz())}Kz(){return A.get(this).$z()}tB(t){return this.sB(t)[0]}iB(t){return this.sB(t)[1]}fQt(t){return this.sB(t)[2]}sB(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return A.get(this).USt(t)}rB(){return A.get(this).hQt()}oB(t){return mu.ye(t),A.get(this).rQt(t)[0]}uB(t){return mu.ye(t),A.get(this).rQt(t)[1]}aB(t){return mu.ye(t),A.get(this).rQt(t)}dQt(){A.get(this).OWt(!1)}pQt(t="current-frame"){mu.Te(t);const s=wu.get(t);if(void 0===s)throw new Error("invalid mode");A.get(this).YWt(s)}mQt(t,s="beginning"){mu.Te(t),mu.Te(s);const i=wu.get(s);if(void 0===i)throw new Error("invalid mode");const e=A.get(this);if(!e.TF().yIt(t))throw new Error(`animation name "${t}" does not exist`);e.HWt(t,i)}lWt(t){mu.Te(t);const s=A.get(this).TF().yIt(t);return s?s.FCt():null}get animation(){return A.get(this).qWt().FCt()}get animationName(){return A.get(this).ZWt()}set JWt(t){mu.ye(t),A.get(this).XWt(t)}get JWt(){return A.get(this).KWt()}set gQt(t){mu.Te(t),A.get(this).XWt(t)}get gQt(){return A.get(this).$Wt()}set yQt(t){mu.ye(t),A.get(this).tQt(t)}get yQt(){return A.get(this).sQt()}set MQt(t){mu.ye(t),A.get(this).iQt(t)}get MQt(){return A.get(this).eQt()}get imageWidth(){return A.get(this).Vxt().im()}get imageHeight(){return A.get(this).Vxt().pm()}wQt(){const t=A.get(this).Vxt();return[t.im(),t.pm()]}async SQt(t){mu.Ke(t,Blob);const s=A.get(this),i=s.E4(),e=s.Vxt(),h=E.ir(E.$vt);if(h.dCt(i,t),await h.MW(i.IS(),{e2:i.EO()}),s.hr())h.er();else{e.pCt(h);const r=s.ISt();r.$6t(),r.TF().Rf().dispatchEvent(new E.Event("animationframeimagechange")),i.y4()}}TQt(t,s){mu.Te(s),A.get(this).u4().iEt(!!t,s)}}}{const Su=self.Rs;Su.Y9.Sht.J9={bQt(t){return Su.ph(this.ZWt(),t)},xQt(t,s){return Su.compare(this.yWt,t,s)},vQt(t,s){if("string"!=typeof s)return!1;const i=this.MWt.lB();return Su.compare(i.toLowerCase(),t,s.toLowerCase())},CQt(t,s){return Su.compare(this.sQt(),t,s)},QWt(t){return Su.ph(this.IWt,t)},WWt(){return!0},VWt(){return!0},GQt(){return this.u4().im()<0},IQt(){return this.u4().pm()<0},_Qt(){return!0},DQt(){return!0},n5(){return this.u4().n5()}}}{const Tu=self.Rs;Tu.Y9.Sht.kht={NQt(t,s,i,e,h){if(t&&s){const[r,n]=this.USt(i),o=this.$c.NP(t,s,r,n,e,h);if(o){if(e&&s.EP(o),t.pP().HR()){const u=o.u4();u.JP(this.u4().VP()),u.Rj()}const a=this.$c.UO();a.AP(!0),o.LP(),a.AP(!1),t!==this.$c.l1t().TF()&&this.fxt.iWt(t,o,e)}}},uQt(){this.OWt(!1)},aQt(t){this.YWt(t)},nQt(t,s){this.HWt(t,s)},oQt(t){this.XWt(t)},lQt(t){this.tQt(t)},EQt(t){this.iQt(t)},AQt(s,t){try{0===s?this.ISt().eWt(t):this.ISt().hWt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},LQt(s,t,i){try{0===s?this.ISt().nWt(t,i):this.ISt().aWt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},OQt(t){const s=this.u4(),i=s.im(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.lm(e),s.Rj())},RQt(t){const s=this.u4(),i=s.pm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hm(e),s.Rj())},WP(t){const s=this.MWt,i=s.Qz(),e=this.u4(),h=e.im()<0?-1:1,r=e.pm()<0?-1:1,n=i.im()*t*h,o=i.pm()*t*r;e.im()===n&&e.pm()===o||(e.WI(n,o),e.Rj())},async PQt(t,s,i){const e=this.MWt,h=e.Qz(),r=this.u4(),n=this.$c,o=this.fxt;if(h.zQ()===t)0===s&&(r.WI(h.im(),h.pm()),r.Rj()),this.nj(Tu.Y9.Sht.J9._Qt);else{const a=Tu.ir(Tu.$vt);try{if(await a.fCt(n,t),!a.pJ())throw new Error("image failed to load");if(this.hr())return void a.er();await a.MW(n.IS(),{e2:n.EO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.hr()||this.nj(Tu.Y9.Sht.J9.DQt))}this.hr()?a.er():(h.pCt(a),o.$6t(),o.TF().Rf().dispatchEvent(new Tu.Event("animationframeimagechange")),n.y4(),0===s&&(r.WI(h.im(),h.pm()),r.Rj()),await this.aj(Tu.Y9.Sht.J9._Qt))}},kQt(t){this.u4().o5(t)},iEt(t,s){this.u4().iEt(0===t,s)},E6t(t){this.u4().YS(t),this.$c.y4()}}}{const bu=self.Rs;bu.Y9.Sht.Fht={FQt(){return this.KWt()},jQt(){return this.$Wt()},zQt(){return this.gWt.Pz()},BQt(){return this.gWt.Jc()},UQt(){return this.sQt()},WQt(){return this.gWt._z()},QQt(t){return this.USt(t)[0]},JQt(t){return this.USt(t)[1]},VQt(t){return this.USt(t)[2]},YQt(){return this.$z()},HQt(){return this.Vxt().im()},qQt(){return this.Vxt().pm()},ZQt(t){return this.rQt(t)[0]},XQt(t){return this.rQt(t)[1]},KQt(){return this.hQt()}}}{const xu=self.Rs;xu.Y9.Touch=class extends xu.Sbt{constructor(t){super(t)}er(){super.er()}}}{let i=function(){return s.cP().rz()};i;const vu=self.Rs,Cu=self.Js;vu.Y9.Touch.PGt=class extends vu.rxt{constructor(t){super(t)}er(){super.er()}Wbt(){}Qbt(){return self.$Qt}};let s=null;self.$Qt=class extends self.fP{constructor(t){super(t),(s=t).E4().Z3().K3=this}requestPermission(t){Cu.Te(t);const s=i();if("orientation"===t)return s.tJt(0);if("motion"===t)return s.tJt(1);throw new Error("invalid type")}}}{const L=self.Rs;L.Y9.Touch.Instance=class extends L.lxt{constructor(t,s){super(t,"touch"),this.sJt=new Map,this.iJt=!1,this.eJt=!1,this.hJt=0,this.rJt=0,this.nJt=0,this.oJt=0,this.aJt=0,this.uJt=0,this.lJt=0,this.cJt=0,this.fJt=0,this.dJt=0,this.pJt=0,this.mJt=0,this.gJt=0,this.yJt=0,this.MJt=0,this.wJt=0,this.SJt=0,this.TJt=[],s&&(this.iJt=s[0]),this.Sxt("permission-result",t=>this.bJt(t));const i=this.E4().Rf();this.d0=new L.l0(L.h0.u0(i,"pointerdown",t=>this.xJt(t.data)),L.h0.u0(i,"pointermove",t=>this.vJt(t.data)),L.h0.u0(i,"pointerup",t=>this.CJt(t.data,!1)),L.h0.u0(i,"pointercancel",t=>this.CJt(t.data,!0)),L.h0.u0(i,"deviceorientation",t=>this.GJt(t.data)),L.h0.u0(i,"deviceorientationabsolute",t=>this.IJt(t.data)),L.h0.u0(i,"devicemotion",t=>this._Jt(t.data)),L.h0.u0(i,"tick2",t=>this.dZ()))}er(){this.sJt.clear(),super.er()}xJt(t){if("mouse"===t.pointerType){if(!this.iJt)return;this.eJt=!0}const s=t.pointerId;if(!this.sJt.has(s)){const i=t.pageX-this.$c.uF(),e=t.pageY-this.$c.lF(),h=performance.now(),r=this.sJt.size,n=(this.pJt=r,this.mJt=s,L.ir(L.Y9.Touch.DJt));n.e_t(h,i,e,s,r),this.sJt.set(s,n),this.nj(L.Y9.Touch.J9.NJt),this.nj(L.Y9.Touch.J9.EJt),this.yJt=i,this.MJt=e,this.SJt=0,this.nj(L.Y9.Touch.J9.AJt)}}vJt(t){if("mouse"!==t.pointerType||this.eJt){const s=this.sJt.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.HE()<2)){const e=t.pageX-this.$c.uF(),h=t.pageY-this.$c.lF();s.QJ(i,e,h,t.width,t.height,t.pressure)}}}}CJt(t,s){if("mouse"===t.pointerType){if(!this.eJt)return;this.eJt=!1}const i=performance.now(),e=t.pointerId,h=this.sJt.get(e);if(h){if(this.pJt=h.LJt(),this.mJt=h.jB(),!s){const r=t.pageX-this.$c.uF(),n=t.pageY-this.$c.lF();this.yJt=r,this.MJt=n,this.SJt=1,this.nj(L.Y9.Touch.J9.AJt)}if(this.nj(L.Y9.Touch.J9.OJt),this.nj(L.Y9.Touch.J9.RJt),!s){const o=h.PJt(i);"single-tap"===o?(this.nj(L.Y9.Touch.J9.kJt),this.yJt=h.hT(),this.MJt=h.oT(),this.nj(L.Y9.Touch.J9.FJt)):"double-tap"===o&&(this.nj(L.Y9.Touch.J9.jJt),this.yJt=h.hT(),this.MJt=h.oT(),this.nj(L.Y9.Touch.J9.zJt))}h.er(),this.sJt.delete(e)}}tJt(i){return this.vxt("request-permission",{type:i}),new Promise((t,s)=>{this.TJt.push({type:i,resolve:t,reject:s})})}bJt(t){const s=t.result,i=t.type,e=(this.gJt=i,this.TJt.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.TJt=this.TJt.filter(t=>t.type!==i),s?(this.nj(L.Y9.Touch.J9.BJt),0===i?this.$c.AFt():this.$c.LFt()):this.nj(L.Y9.Touch.J9.UJt)}GJt(t){"number"==typeof t.webkitCompassHeading?this.hJt=t.webkitCompassHeading:t.absolute&&(this.hJt=t.alpha),this.rJt=t.alpha,this.nJt=t.beta,this.oJt=t.gamma}IJt(t){this.hJt=t.alpha}_Jt(t){const s=t.acceleration,i=(s&&(this.aJt=s.x,this.uJt=s.y,this.lJt=s.z),t.accelerationIncludingGravity);i&&(this.cJt=i.x,this.fJt=i.y,this.dJt=i.z)}dZ(){let t=performance.now(),s=0;for(const i of this.sJt.values())i.HE()<=t-50&&i.WJt(t),i.QJt(t)&&(this.pJt=i.LJt(),this.mJt=i.jB(),this.wJt=s,this.nj(L.Y9.Touch.J9.JJt),this.yJt=i.hT(),this.MJt=i.oT(),this.nj(L.Y9.Touch.J9.VJt),this.wJt=0),++s}YJt(t){t=Math.floor(t);for(const s of this.sJt.values()){if(0===t)return s;--t}return null}HJt(t,s){return 0<=t&&0<=s&&t<this.$c.Mkt()&&s<this.$c.wkt()}Lxt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.sJt.values()].map(t=>({name:"$"+t.jB(),value:t.hT()+", "+t.oT()}))}]}}}{const Gu=self.Rs;Gu.Y9.Touch.J9={EJt(){return!0},RJt(){return!0},qJt(){return 0<this.sJt.size},AJt(t,s){return!!t&&s===this.SJt&&!!this.HJt(this.yJt,this.MJt)&&this.$c.MO().DAt(t,[[this.yJt,this.MJt]],!1)},ZJt(t){if(!t)return!1;const s=this.$c.a1t(),i=s.Awt(),e=[...this.sJt.values()].filter(t=>this.HJt(t.hT(),t.oT())).map(t=>[t.hT(),t.oT()]);return Gu.xor(this.$c.MO().DAt(t,e,i),i)},XJt(t,s,i){const e=this.YJt(t);return!!e&&Gu.compare(e._z(),s,i)},KJt(){return!0},$Jt(){return!0},t8t(t,s,i){this.$c.AFt();let e;return e=0===t?this.rJt:1===t?this.nJt:this.oJt,Gu.compare(e,s,i)},s8t(t,s,i){this.$c.LFt();let e;return e=0===t?this.cJt:1===t?this.fJt:2===t?this.dJt:3===t?this.aJt:4===t?this.uJt:this.lJt,Gu.compare(e,s,i)},NJt(t){return(t=Math.floor(t))===this.pJt},OJt(t){return(t=Math.floor(t))===this.pJt},i8t(t){return t=Math.floor(t),this.sJt.size>=t+1},JJt(){return!0},kJt(){return!0},jJt(){return!0},VJt(t){return!!t&&!!this.HJt(this.yJt,this.MJt)&&this.$c.MO().DAt(t,[[this.yJt,this.MJt]],!1)},FJt(t){return!!t&&!!this.HJt(this.yJt,this.MJt)&&this.$c.MO().DAt(t,[[this.yJt,this.MJt]],!1)},zJt(t){return!!t&&!!this.HJt(this.yJt,this.MJt)&&this.$c.MO().DAt(t,[[this.yJt,this.MJt]],!1)},BJt(t){return this.gJt===t},UJt(t){return this.gJt===t}}}{const Iu=self.Rs;Iu.Y9.Touch.kht={e8t(t){this.tJt(t)}}}{const _u=self.Rs;_u.Y9.Touch.Fht={h8t(){return this.sJt.size},L2t(t){const s=this.YJt(this.wJt);return s?s.r8t(this.$c.o4(),t,!0):0},O2t(t){const s=this.YJt(this.wJt);return s?s.r8t(this.$c.o4(),t,!1):0},n8t(t,s){const i=this.YJt(t);return i?i.r8t(this.$c.o4(),s,!0):0},o8t(t,s){const i=this.YJt(t);return i?i.r8t(this.$c.o4(),s,!1):0},a8t(t,s){const i=this.sJt.get(t);return i?i.r8t(this.$c.o4(),s,!0):0},u8t(t,s){const i=this.sJt.get(t);return i?i.r8t(this.$c.o4(),s,!1):0},l8t(){const t=this.YJt(0);return t?t.hT():0},c8t(){const t=this.YJt(0);return t?t.oT():0},f8t(t){const s=this.YJt(t);return s?s.hT():0},d8t(t){const s=this.YJt(t);return s?s.oT():0},p8t(t){const s=this.sJt.get(t);return s?s.hT():0},m8t(t){const s=this.sJt.get(t);return s?s.oT():0},g8t(t){const s=this.YJt(t);return s?s._z():0},y8t(t){const s=this.sJt.get(t);return s?s._z():0},M8t(t){const s=this.YJt(t);return s?_u.pr(s.VP()):0},w8t(t){const s=this.sJt.get(t);return s?_u.pr(s.VP()):0},S8t(){return this.$c.AFt(),this.hJt},T8t(){return this.$c.AFt(),this.rJt},b8t(){return this.$c.AFt(),this.nJt},x8t(){return this.$c.AFt(),this.oJt},v8t(){return this.$c.LFt(),this.cJt},C8t(){return this.$c.LFt(),this.fJt},G8t(){return this.$c.LFt(),this.dJt},I8t(){return this.$c.LFt(),this.aJt},_8t(){return this.$c.LFt(),this.uJt},D8t(){return this.$c.LFt(),this.lJt},N8t(){return this.pJt},E8t(){return this.mJt},A8t(t){const s=this.sJt.get(t);return s?s.im():0},L8t(t){const s=this.sJt.get(t);return s?s.pm():0},O8t(t){const s=this.sJt.get(t);return s?s.R8t():0}}}{let n=self.Rs,s=-1e3,i=-1e3,e=-1e4;n.Y9.Touch.DJt=class extends n.$h{constructor(){super(),this.P8t=0,this.eC=0,this.BRt=0,this.QA=0,this.k8t=0,this.F8t=0,this.j8t=0,this.Ha=0,this.qa=0,this.z8t=0,this.B8t=0,this.Um=0,this.Wm=0,this.U8t=0,this.W8t=!1,this.Q8t=!1}er(){}e_t(t,s,i,e,h){this.P8t=e,this.eC=h,this.QA=t,this.k8t=t,this.BRt=t,this.F8t=s,this.j8t=i,this.Ha=s,this.qa=i,this.z8t=s,this.B8t=i}QJ(t,s,i,e,h,r){this.k8t=this.QA,this.QA=t,this.z8t=this.Ha,this.B8t=this.qa,this.Ha=s,this.qa=i,this.Um=e,this.Wm=h,this.U8t=r,!this.Q8t&&15<=n.mr(this.F8t,this.j8t,this.Ha,this.qa)&&(this.Q8t=!0)}jB(){return this.P8t}LJt(){return this.eC}HE(){return this.QA}WJt(t){this.k8t=t}hT(){return this.Ha}oT(){return this.qa}_z(){const t=n.mr(this.Ha,this.qa,this.z8t,this.B8t),s=(this.QA-this.k8t)/1e3;return 0<s?t/s:0}VP(){return n.yr(this.z8t,this.B8t,this.Ha,this.qa)}im(){return this.Um}pm(){return this.Wm}R8t(){return this.U8t}QJt(t){return!this.W8t&&500<=t-this.BRt&&!this.Q8t&&n.mr(this.F8t,this.j8t,this.Ha,this.qa)<15&&(this.W8t=!0)}PJt(t){return!this.W8t&&t-this.BRt<=333&&!this.Q8t&&n.mr(this.F8t,this.j8t,this.Ha,this.qa)<15?t-e<=666&&n.mr(s,i,this.Ha,this.qa)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.Ha,i=this.qa,e=t,"single-tap"):""}r8t(t,s,i){if(void 0===s){const e=t.f4(0);return e.KH(this.Ha,this.qa)[i?0:1]}{const h=t.l4(s);return h?h.aF(this.Ha,this.qa)[i?0:1]:0}}}}{const Du=self.Rs;Du.Y9.J8t=class extends Du.Sbt{constructor(t){super(t)}er(){super.er()}}}{const Nu=self.Rs;Nu.Y9.J8t.PGt=class extends Nu.rxt{constructor(t){super(t)}er(){super.er()}Wbt(){}}}{let r=function(s,i,e){if(i<s.length)Eu.An(s,i);else if(i>s.length)if("function"==typeof e)for(let t=s.length;t<i;++t)s.push(e());else for(let t=s.length;t<i;++t)s.push(e)};r;const Eu=self.Rs,Au=self.Js,Lu=self.wF,Ou=(Eu.Y9.J8t.Instance=class extends Eu.lxt{constructor(t,s){super(t),this.V8t=10,this.Y8t=1,this.H8t=1,this.ic=null,this.q8t=[],this.Z8t=[],this.X8t=[],this.K8t=-1,s&&(this.V8t=s[0],this.Y8t=s[1],this.H8t=s[2]),this.ic=Eu.Po(this.V8t,()=>Eu.Po(this.Y8t,()=>Eu.Po(this.H8t,0)))}er(){this.ic=null,super.er()}$8t(t,s,i){return t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),0<=t&&t<this.V8t&&0<=s&&s<this.Y8t&&0<=i&&i<this.H8t?this.ic[t][s][i]:0}Set(t,s,i,e){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),0<=t&&t<this.V8t&&0<=s&&s<this.Y8t&&0<=i&&i<this.H8t&&(this.ic[t][s][i]=e)}WI(t,i,e){if(t=Math.floor(t),i=Math.floor(i),e=Math.floor(e),i<0&&(i=0),e<0&&(e=0),this.V8t!==(t=t<0?0:t)||this.Y8t!==i||this.H8t!==e){this.V8t=t,this.Y8t=i,this.H8t=e;const h=this.ic;r(h,t,()=>Eu.Po(i,()=>Eu.Po(e,0)));for(let s=0;s<t;++s){r(h[s],i,()=>Eu.Po(e,0));for(let t=0;t<i;++t)r(h[s][t],e,0)}}}im(){return this.V8t}pm(){return this.Y8t}PH(){return this.H8t}tVt(t,s,i,e,h){for(;0<s;){const r=Math.floor(this.$c.j3()*s);if(--s,0===t){const n=this.$8t(s,e,h),o=this.$8t(r,e,h);this.Set(s,e,h,o),this.Set(r,e,h,n)}else if(1===t){const a=this.$8t(i,s,h),u=this.$8t(i,r,h);this.Set(i,s,h,u),this.Set(i,r,h,a)}else if(2===t){const l=this.$8t(i,e,s),c=this.$8t(i,e,r);this.Set(i,e,s,c),this.Set(i,e,r,l)}}}Lxt(){const t="plugins.arr.debugger",s="plugins.arr.properties",i=[{title:t+".array-properties.title",properties:[{name:s+".width.name",value:this.V8t,a6t:t=>this.WI(t,this.Y8t,this.H8t)},{name:s+".height.name",value:this.Y8t,a6t:t=>this.WI(this.V8t,t,this.H8t)},{name:s+".depth.name",value:this.H8t,a6t:t=>this.WI(this.V8t,this.Y8t,t)},{name:s+".elements.name",value:this.V8t*this.Y8t*this.H8t}]}],e=[];if(1===this.Y8t&&1===this.H8t)for(let s=0;s<this.V8t;++s)e.push({name:"$"+s,value:this.ic[s][0][0],a6t:t=>this.ic[s][0][0]=t});else for(let t=0;t<this.V8t;++t)e.push({name:"$"+t,value:this.ic[t].toString()});return e.length&&i.push({title:t+".array-data.title",properties:e}),i}sVt(){return JSON.stringify({c2array:!0,size:[this.V8t,this.Y8t,this.H8t],data:this.ic})}yT(){return{size:[this.V8t,this.Y8t,this.H8t],data:this.ic}}MT(t){const s=t.size;this.V8t=s[0],this.Y8t=s[1],this.H8t=s[2],this.ic=t.data}iVt(){return 0<=this.K8t&&this.K8t<this.q8t.length?this.q8t[this.K8t]:0}eVt(){return 0<=this.K8t&&this.K8t<this.Z8t.length?this.Z8t[this.K8t]:0}hVt(){return 0<=this.K8t&&this.K8t<this.X8t.length?this.X8t[this.K8t]:0}Qbt(){return self.rVt}},new WeakMap);self.rVt=class extends Lu{constructor(){super(),Ou.set(this,Lu.vF().rz())}get width(){return Ou.get(this).im()}get height(){return Ou.get(this).pm()}get depth(){return Ou.get(this).PH()}UP(t,s=1,i=1){Au.ye(t),Au.ye(s),Au.ye(i),Ou.get(this).WI(t,s,i)}nVt(t,s=0,i=0){return Au.ye(t),Au.ye(s),Au.ye(i),Ou.get(this).$8t(t,s,i)}oVt(t,s,i=0,e=0){if(Au.ye(s),Au.ye(i),Au.ye(e),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid type");Ou.get(this).Set(s,i,e,t)}}}{let m=function(t,s,i,e,h,r){t.L6(i);const n=r.TF().GP();n.gft(r.OB()),s.O6(e,h),t.R6(i)};m;const Ru=self.Rs;Ru.Y9.J8t.J9={OSt(t,s,i){return Ru.compare(this.$8t(t,0,0),s,i)},aVt(t,s,i,e){return Ru.compare(this.$8t(t,s,0),i,e)},uVt(t,s,i,e,h){return Ru.compare(this.$8t(t,s,i),e,h)},lVt(t){const s=this.$c,e=s.UO(),h=s.HO(),r=h.G6(),i=s.s3(),n=i.I6(),o=i._6(h),a=++this.K8t,u=this.q8t,l=this.Z8t,c=this.X8t,f=this.V8t,d=this.Y8t,p=this.H8t;if(a===this.q8t.length?(u.push(0),l.push(0),c.push(0)):(u[a]=0,l[a]=0,c[a]=0),s.E6(!1),0===t)for(let i=0;i<f;++i)for(let s=0;s<d;++s)for(let t=0;t<p;++t)u[a]=i,l[a]=s,c[a]=t,m(e,h,r,n,o,this);else if(1===t)for(let s=0;s<f;++s)for(let t=0;t<d;++t)u[a]=s,l[a]=t,m(e,h,r,n,o,this);else for(let t=0;t<f;++t)u[a]=t,m(e,h,r,n,o,this);return s.E6(!0),this.K8t--,i.j6(),!1},cVt(t,s){return Ru.compare(this.$8t(this.iVt(),this.eVt(),this.hVt()),t,s)},fVt(e){const t=this.V8t,h=this.Y8t,r=this.H8t,n=this.ic;for(let i=0;i<t;++i)for(let s=0;s<h;++s)for(let t=0;t<r;++t)if(n[i][s][t]===e)return!0;return!1},ql(){return 0===this.V8t||0===this.Y8t||0===this.H8t},dVt(t,s,i){let e=0;switch(t){case 0:e=this.V8t;break;case 1:e=this.Y8t;break;case 2:e=this.H8t}return Ru.compare(e,s,i)}}}{let r=function(t,s){if("number"==typeof t&&"number"==typeof s)return t-s;{const i=t.toString(),e=s.toString();return i<e?-1:e<i?1:0}};r;const Pu=self.Rs;Pu.Y9.J8t.kht={Hl(e){const t=this.V8t,h=this.Y8t,r=this.H8t,n=this.ic;for(let i=0;i<t;++i)for(let s=0;s<h;++s)for(let t=0;t<r;++t)n[i][s][t]=e},WI(t,s,i){this.WI(t,s,i)},rT(t,s){this.Set(t,0,0,s)},Pj(t,s,i){this.Set(t,s,0,i)},pVt(t,s,i,e){this.Set(t,s,i,e)},_6(i,e,t){const h=this.V8t,r=this.Y8t,s=this.H8t,n=this.ic;if(0===t){const o=Pu.Po(r,()=>Pu.Po(s,e));0===i?n.push(o):n.unshift(o),this.V8t++}else if(1===t){for(let t=0;t<h;++t){const a=Pu.Po(s,e);0===i?n[t].push(a):n[t].unshift(a)}this.Y8t++}else{for(let s=0;s<h;++s)for(let t=0;t<r;++t)0===i?n[s][t].push(e):n[s][t].unshift(e);this.H8t++}},j6(i,t){const e=this.V8t,h=this.Y8t,s=this.H8t,r=this.ic;if(0===t)0!==e&&(0===i?r.pop():r.shift(),this.V8t--);else if(1===t){if(0!==h){for(let t=0;t<e;++t)0===i?r[t].pop():r[t].shift();this.Y8t--}}else if(0!==s){for(let s=0;s<e;++s)for(let t=0;t<h;++t)0===i?r[s][t].pop():r[s][t].shift();this.H8t--}},mVt(t){const i=this.V8t,e=this.Y8t,s=this.H8t,h=this.ic;if(0!==i&&0!==e&&0!==s)if(0===t)h.reverse();else if(1===t)for(let t=0;t<i;++t)h[t].reverse();else for(let s=0;s<i;++s)for(let t=0;t<e;++t)h[s][t].reverse()},gVt(t){const i=this.V8t,e=this.Y8t,s=this.H8t,h=this.ic;if(0!==i&&0!==e&&0!==s)if(0===t)h.sort((t,s)=>r(t[0][0],s[0][0]));else if(1===t)for(let t=0;t<i;++t)h[t].sort((t,s)=>r(t[0],s[0]));else for(let s=0;s<i;++s)for(let t=0;t<e;++t)h[s][t].sort(r)},yVt(i){const e=this.V8t,h=this.Y8t,r=this.H8t;if(0!==e&&0!==h&&0!==r)if(0===i)for(let s=0;s<h;++s)for(let t=0;t<r;++t)this.tVt(i,e,0,s,t);else if(1===i)for(let s=0;s<e;++s)for(let t=0;t<r;++t)this.tVt(i,h,s,0,t);else for(let s=0;s<e;++s)for(let t=0;t<h;++t)this.tVt(i,r,s,t,0)},Zl(i,t){if(!((i=Math.floor(i))<0)){const e=this.V8t,h=this.Y8t,s=this.H8t,r=this.ic;if(0===t)e<=i||(r.splice(i,1),this.V8t--);else if(1===t){if(!(h<=i)){for(let t=0;t<e;++t)r[t].splice(i,1);this.Y8t--}}else if(!(s<=i)){for(let s=0;s<e;++s)for(let t=0;t<h;++t)r[s][t].splice(i,1);this.H8t--}}},OJ(i,e,t){if(!((e=Math.floor(e))<0)){const h=this.V8t,r=this.Y8t,s=this.H8t,n=this.ic;if(0===t)h<e||(n.splice(e,0,Pu.Po(r,()=>Pu.Po(s,i))),this.V8t++);else if(1===t){if(!(r<e)){for(let t=0;t<h;++t)n[t].splice(e,0,Pu.Po(s,i));this.Y8t++}}else if(!(e>s)){for(let s=0;s<h;++s)for(let t=0;t<r;++t)n[s][t].splice(e,0,i);this.H8t++}}},MVt(t,s,i){const e=t.split(s);this.WI(e.length,1,1);for(let s=0,t=e.length;s<t;++s){let t=e[s];0===i?String(Number(t))===t&&(t=Number(t)):2===i&&(t=Number(t)),this.Set(s,0,0,t)}},wVt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse JSON: ",t)}if(s.c2array){const i=s.size;this.V8t=i[0],this.Y8t=i[1],this.H8t=i[2],this.ic=s.data}},SVt(t){const s=URL.createObjectURL(new Blob([this.sVt()],{type:"application/json"}));this.$c.i4(s,t)}}}{const ku=self.Rs;ku.Y9.J8t.Fht={$8t(t,s,i){return this.$8t(t,s||0,i||0)},R2t(){return this.V8t},P2t(){return this.Y8t},TVt(){return this.H8t},bVt(){return this.iVt()},xVt(){return this.eVt()},vVt(){return this.hVt()},CVt(){return this.$8t(this.iVt(),this.eVt(),this.hVt())},s1(){return this.$8t(0,0,0)},GVt(){return this.$8t(this.V8t-1,0,0)},IVt(i){const e=this.ic;for(let t=0,s=this.V8t;t<s;++t)if(e[t][0][0]===i)return t;return-1},_Vt(s){const i=this.ic;for(let t=this.V8t-1;0<=t;--t)if(i[t][0][0]===s)return t;return-1},DVt(t){let s=[];for(let t=0;t<this.V8t;++t)s.push(this.$8t(t,0,0));return s.join(t)},C2t(){return this.sVt()}}}{const Fu=self.Rs;Fu.Y9.Keyboard=class extends Fu.Sbt{constructor(t){super(t)}er(){super.er()}}}{let i=function(){return s.cP().rz()};i;const ju=self.Rs;ju.Y9.Keyboard.PGt=class extends ju.rxt{constructor(t){super(t)}er(){super.er()}Wbt(){}Qbt(){return self.NVt}};let s=null;self.NVt=class extends self.fP{constructor(t){super(t),(s=t).E4().Z3().keyboard=this}EVt(t){const s=i();if("string"==typeof t)return s.AVt(t);if("number"==typeof t)return s.LVt(t);throw new TypeError("expected string or number")}}}{const zu=self.Rs;zu.Y9.Keyboard.Instance=class extends zu.lxt{constructor(t,s){super(t),this.OVt=new Set,this.RVt=new Set,this.PVt=0,this.kVt="",this.FVt="";const i=this.E4().Rf();this.d0=new zu.l0(zu.h0.u0(i,"keydown",t=>this.jVt(t.data)),zu.h0.u0(i,"keyup",t=>this.zVt(t.data)),zu.h0.u0(i,"window-blur",()=>this.BVt()),zu.h0.u0(i,"keyboard-blur",()=>this.BVt()))}er(){super.er()}jVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.OVt.has(i)||(this.OVt.add(i),this.RVt.add(s),this.kVt=i,this.PVt=s,this.FVt=e,this.nj(zu.Y9.Keyboard.J9.UVt),this.nj(zu.Y9.Keyboard.J9.WVt),this.nj(zu.Y9.Keyboard.J9.QVt),this.nj(zu.Y9.Keyboard.J9.JVt))}zVt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.OVt.delete(i),this.RVt.delete(s),this.kVt=i,this.PVt=s,this.FVt=e,this.nj(zu.Y9.Keyboard.J9.VVt),this.nj(zu.Y9.Keyboard.J9.YVt),this.nj(zu.Y9.Keyboard.J9.HVt),this.nj(zu.Y9.Keyboard.J9.qVt)}BVt(){for(const t of this.RVt)this.RVt.delete(t),this.PVt=t,this.nj(zu.Y9.Keyboard.J9.VVt),this.nj(zu.Y9.Keyboard.J9.YVt),this.nj(zu.Y9.Keyboard.J9.qVt);this.OVt.clear()}AVt(t){return this.OVt.has(t)}LVt(t){return this.RVt.has(t)}yT(){return{tk:this.PVt,tkk:this.FVt}}MT(t){this.PVt=t.tk,t.hasOwnProperty("tkk")&&(this.FVt=t.tkk)}Lxt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.PVt},{name:t+".debugger.last-key-string",value:zu.Y9.Keyboard.Fht.ZVt(this.PVt)},{name:t+".debugger.last-typed-key",value:this.FVt}]}]}}}{const Bu=self.Rs,Uu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];Bu.Y9.Keyboard.J9={AVt(t){return this.RVt.has(t)},WVt(t){return this.PVt===t},UVt(){return!0},VVt(){return!0},YVt(t){return this.PVt===t},LVt(t){return t=Math.floor(t),this.RVt.has(t)},JVt(t){return this.PVt===t},qVt(t){return this.PVt===t},QVt(t){const s=Uu[t];return this.kVt===s},HVt(t){const s=Uu[t];return this.kVt===s},XVt(t){const s=Uu[t];return this.OVt.has(s)}}}{const Wu=self.Rs;Wu.Y9.Keyboard.kht={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Qu=self.Rs;Qu.Y9.Keyboard.Fht={KVt(){return this.PVt},ZVt(t){return s(t)},$Vt(){return this.FVt}}}{const Ju=self.Rs;Ju.vat.tYt=class extends Ju.Tvt{constructor(t){super(t)}er(){super.er()}}}{const Vu=self.Rs;Vu.vat.tYt.PGt=class extends Vu.Gvt{constructor(t){super(t)}er(){super.er()}Wbt(){}}}{const Yu=self.Rs;Yu.vat.tYt.Instance=class extends Yu._vt{constructor(t,s){super(t),this.sYt=null,this.iYt=-1,this.eYt="",this.hYt=new Set,this.rYt=0,this.nYt=0,this.oYt=0,this.aYt=0,this.uYt=0,this.lYt=0,this.cYt=0,this.fYt=0,this.dYt=0,this.pYt=0,this.mYt=!1,s&&(this.mYt=s[0]);const i=this.$c.Rf();this.d0=new Yu.l0(Yu.h0.u0(i,"instancedestroy",t=>this.gYt(t.yz)),Yu.h0.u0(i,"afterload",t=>this.xZ()))}er(){this.sYt=null,super.er()}yYt(t){t?(this.sYt=t,this.Ext()):(this.sYt=null,this.pxt())}MYt(t,s,i){if(t){const e=t.wTt(this.Ti);if(e){this.eYt=s,this.yYt(e);const h=this.Ti.u4(),r=e.u4();if("properties"===this.eYt){const n=this.hYt;n.clear();for(const o of i)n.add(o);this.aYt=h.hT()-r.hT(),this.uYt=h.oT()-r.oT(),this.fYt=h.VP()-r.VP(),this.pYt=h.VP(),this.dYt=h.uT()-r.uT(),n.has("x")&&n.has("y")&&(this.nYt=Yu.yr(r.hT(),r.oT(),h.hT(),h.oT())-r.VP(),this.rYt=Yu.mr(r.hT(),r.oT(),h.hT(),h.oT())),n.has("width-abs")?this.lYt=h.im()-r.im():n.has("width-scale")&&(this.lYt=h.im()/r.im()),n.has("height-abs")?this.cYt=h.pm()-r.pm():n.has("height-scale")&&(this.cYt=h.pm()/r.pm())}else this.rYt=Yu.mr(r.hT(),r.oT(),h.hT(),h.oT())}}}yT(){const t=this.hYt,s=this.eYt,i={uid:this.sYt&&!this.sYt.jU()?this.sYt.RF():-1,m:s,d:this.mYt};return"rope"===s||"bar"===s?i.pd=this.rYt:"properties"===s&&(i.ps=[...this.hYt],t.has("imagepoint")?i.ip=this.oYt:t.has("x")&&t.has("y")?(i.pa=this.nYt,i.pd=this.rYt):(t.has("x")&&(i.dx=this.aYt),t.has("y")&&(i.dy=this.uYt)),t.has("angle")&&(i.da=this.fYt,i.lka=this.pYt),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.lYt),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.cYt),t.has("z"))&&(i.dz=this.dYt),i}MT(t){const s=t.m,i=this.hYt;if(i.clear(),this.iYt=t.uid,"number"==typeof s)this.wYt(t);else if(this.eYt=s,t.hasOwnProperty("d")&&(this.mYt=!!t.d),"rope"===s||"bar"===s)this.rYt=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.oYt=t.ip:i.has("x")&&i.has("y")?(this.nYt=t.pa,this.rYt=t.pd):(i.has("x")&&(this.aYt=t.dx),i.has("y")&&(this.uYt=t.dy)),i.has("angle")&&(this.fYt=t.da,this.pYt=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.lYt=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.cYt=t.dh),i.has("z")&&(this.dYt=t.dz)}}wYt(t){const s=this.hYt,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.eYt="properties",s.add("x").add("y").add("angle"),this.nYt=h,this.rYt=r,this.fYt=i-e,this.pYt=t.lka;break;case 1:this.eYt="properties",s.add("x").add("y"),this.nYt=h,this.rYt=r;break;case 2:this.eYt="properties",s.add("angle"),this.fYt=i-e,this.pYt=t.lka;break;case 3:this.eYt="rope",this.rYt=t.pd;break;case 4:this.eYt="bar",this.rYt=t.pd}}xZ(){-1===this.iYt?this.yYt(null):(this.yYt(this.$c.h4(this.iYt)),this.iYt=-1)}gYt(t){this.sYt===t&&(this.yYt(null),this.mYt)&&this.$c._F(this.Ti)}_xt(){const r=this.sYt;if(r&&!r.jU()){let i=r.u4(),t=this.Ti,e=t.u4(),s=this.eYt,h=!1;if("rope"===s||"bar"===s){const n=Yu.mr(e.hT(),e.oT(),i.hT(),i.oT());if(n>this.rYt||"bar"===s&&n<this.rYt){const o=Yu.yr(i.hT(),i.oT(),e.hT(),e.oT());e.Pj(i.hT()+Math.cos(o)*this.rYt,i.oT()+Math.sin(o)*this.rYt),h=!0}}else{let t=this.hYt,s=0;if(t.has("imagepoint")){const[a,u]=r.USt(this.oYt);e.zSt(a,u)||(e.Pj(a,u),h=!0)}else if(t.has("x")&&t.has("y")){const l=i.hT()+Math.cos(i.VP()+this.nYt)*this.rYt,c=i.oT()+Math.sin(i.VP()+this.nYt)*this.rYt;e.zSt(l,c)||(e.Pj(l,c),h=!0)}else s=i.hT()+this.aYt,t.has("x")&&s!==e.hT()&&(e.rT(s),h=!0),s=i.oT()+this.uYt,t.has("y")&&s!==e.oT()&&(e.aT(s),h=!0);t.has("angle")&&(this.pYt!==e.VP()&&(this.fYt=Yu.cr(this.fYt+(e.VP()-this.pYt))),(s=Yu.cr(i.VP()+this.fYt))!==e.VP()&&(e.JP(s),h=!0),this.pYt=e.VP()),t.has("width-abs")&&(s=i.im()+this.lYt)!==e.im()&&(e.lm(s),h=!0),t.has("width-scale")&&(s=i.im()*this.lYt)!==e.im()&&(e.lm(s),h=!0),t.has("height-abs")&&(s=i.pm()+this.cYt)!==e.pm()&&(e.hm(s),h=!0),t.has("height-scale")&&(s=i.pm()*this.cYt)!==e.pm()&&(e.hm(s),h=!0),t.has("z")&&(s=i.uT()+this.dYt)!==e.uT()&&(e.lT(s),this.$c.y4())}h&&e.Rj()}}Lxt(){const t="behaviors.pin.debugger";return[{title:"$"+this.gz().Jc(),properties:[{name:t+".is-pinned",value:!!this.sYt},{name:t+".pinned-uid",value:this.sYt?this.sYt.RF():0}]}]}}}{const Hu=self.Rs;Hu.vat.tYt.J9={SYt(){return!!this.sYt},TYt(){return this.mYt}}}{const qu=self.Rs;qu.vat.tYt.kht={bYt(t,s){this.MYt(t,0===s?"rope":"bar")},xYt(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.MYt(t,"properties",o)},vYt(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.oYt=s,this.MYt(t,"properties",n)},CYt(t){"rope"!==this.eYt&&"bar"!==this.eYt||(this.rYt=Math.max(t,0))},GYt(t){this.mYt=t},IYt(){this.yYt(null),this.eYt="",this.hYt.clear(),this.oYt=""},tYt(t,s){switch(s){case 0:this.MYt(t,"properties",["x","y","angle"]);break;case 1:this.MYt(t,"properties",["x","y"]);break;case 2:this.MYt(t,"properties",["angle"]);break;case 3:this.MYt(t,"rope");break;case 4:this.MYt(t,"bar")}}}}{const Zu=self.Rs;Zu.vat.tYt.Fht={_Yt(){return this.sYt?this.sYt.RF():-1}}}{const Xu=self.Rs;Xu.vat.DYt=class extends Xu.Tvt{constructor(t){super(t);const s=this.$c.Rf();this.d0=new Xu.l0(Xu.h0.u0(s,"pointerdown",t=>this.xJt(t.data)),Xu.h0.u0(s,"pointermove",t=>this.vJt(t.data)),Xu.h0.u0(s,"pointerup",t=>this.CJt(t.data,!1)),Xu.h0.u0(s,"pointercancel",t=>this.CJt(t.data,!0)))}er(){this.d0.er(),this.d0=null,super.er()}xJt(t){"mouse"===t.pointerType&&0!==t.button||this.NYt(t.pointerId.toString(),t.pageX-this.$c.uF(),t.pageY-this.$c.lF())}vJt(t){0!=(1&t.lastButtons)&&0==(1&t.buttons)?this.EYt(t.pointerId.toString()):this.AYt(t.pointerId.toString(),t.pageX-this.$c.uF(),t.pageY-this.$c.lF())}CJt(t,s){"mouse"===t.pointerType&&0!==t.button||this.EYt(t.pointerId.toString())}async NYt(t,s,i){let e=this.CP(),h=null,r=null,n=0,o=0;for(const a of e){const u=a.Cat(Xu.vat.DYt);if(u.Jl()&&!u.LYt()&&!a.jU()){const l=a.u4(),c=l.l4(),[f,d]=c.aF(s,i,l.Bj());if(c.jk()&&l.a5(f,d))if(h){const p=h.u4();(c.cO()>p.l4().cO()||c.cO()===p.l4().cO()&&l.c4()>p.c4())&&(h=a,r=u,n=f,o=d)}else h=a,r=u,n=f,o=d}}h&&await r.OYt(t,n,o)}AYt(t,s,i){const e=this.CP();for(const h of e){const r=h.Cat(Xu.vat.DYt);if(r.Jl()&&r.LYt()&&(!r.LYt()||r.RYt()===t)){const n=h.u4(),o=n.l4(),[a,u]=o.aF(s,i,n.Bj());r.PYt(a,u)}}}async EYt(t){const s=this.CP();for(const i of s){const e=i.Cat(Xu.vat.DYt);e.LYt()&&e.RYt()===t&&await e.kYt()}}}}{const Ku=self.Rs;Ku.vat.DYt.PGt=class extends Ku.Gvt{constructor(t){super(t)}er(){super.er()}Wbt(){}}}{const $u=self.Rs,tl=self.lz,sl=($u.vat.DYt.Instance=class extends $u._vt{constructor(t,s){super(t),this.FYt=!1,this.aYt=0,this.uYt=0,this.jYt="<none>",this.zYt=0,this.ayt=!0,s&&(this.zYt=s[0],this.ayt=s[1])}er(){super.er()}yT(){return{a:this.zYt,e:this.ayt}}MT(t){this.zYt=t.a,this.ayt=t.e,this.FYt=!1}s2t(t){this.ayt=!!t,this.ayt||(this.FYt=!1)}Jl(){return this.ayt}BYt(t){this.zYt=t}UYt(){return this.zYt}WYt(){this.FYt&&this.kYt()}LYt(){return this.FYt}RYt(){return this.jYt}async OYt(t,s,i){const e=this.u4();this.aYt=s-e.hT(),this.uYt=i-e.oT(),this.FYt=!0,this.jYt=t,this.axt("dragstart"),await this.aj($u.vat.DYt.J9.QYt)}PYt(t,s){const i=this.u4(),e=t-this.aYt,h=s-this.uYt;0===this.zYt?i.hT()===e&&i.oT()===h||(i.Pj(e,h),i.Rj()):1===this.zYt?i.hT()!==e&&(i.rT(e),i.Rj()):2===this.zYt&&i.oT()!==h&&(i.aT(h),i.Rj())}async kYt(){this.FYt=!1,this.axt("drop"),await this.aj($u.vat.DYt.J9.JYt)}grt(t){switch(t){case 0:return this.UYt();case 1:return this.Jl()}}brt(t,s){switch(t){case 0:this.BYt(s);break;case 1:this.s2t(!!s)}}Lxt(){let t="behaviors.dragndrop",s=t+".properties.axes",i="";return 0===this.zYt?i=s+".items.both":1===this.zYt?i=s+".items.horizontal-only":2===this.zYt&&(i=s+".items.vertical-only"),[{title:"$"+this.gz().Jc(),properties:[{name:t+".debugger.is-dragging",value:this.LYt()},{name:s+".name",value:[i]},{name:t+".properties.enabled.name",value:this.Jl(),a6t:t=>this.s2t(t)}]}]}Qbt(){return self.VYt}},new WeakMap),il=["both","horizontal","vertical"];self.VYt=class extends tl{constructor(){super(),sl.set(this,tl.vF().rz())}set axes(t){const s=il.indexOf(t);if(-1===s)throw new Error("invalid axes");sl.get(this).BYt(s)}get axes(){return il[sl.get(this).UYt()]}YYt(){sl.get(this).WYt()}get HYt(){return sl.get(this).LYt()}get isEnabled(){return sl.get(this).Jl()}set isEnabled(t){sl.get(this).s2t(t)}}}{const el=self.Rs;el.vat.DYt.J9={LYt(){return this.LYt()},QYt(){return!0},JYt(){return!0},Jl(){return this.Jl()}}}{const hl=self.Rs;hl.vat.DYt.kht={$2t(t){this.s2t(!!t)},qYt(t){this.BYt(t)},ZYt(){this.WYt()}}}{const rl=self.Rs;rl.vat.DYt.Fht={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},e=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,e,0;const nl=self.Rs;self.xMt=[()=>"UI",t=>{const s=t.LMt(0);return()=>s.rMt()},()=>"",t=>{const s=t.LMt(0);return()=>s.rMt()-2},()=>-1023,()=>"Type",t=>{const s=t.LMt(0).$yt(),i=t.LMt(1),e=t.LMt(2);return()=>s(i.uMt()+e.rMt(),5)},()=>"Toggle",t=>{const s=t.LMt(0).$yt();return()=>s(192,192,192)},t=>{const s=t.LMt(0).$yt();return()=>s(64,64,64)},t=>{const s=t.LMt(0).$yt(),i=t.LMt(1).$yt();return()=>s(i())},()=>1,t=>{const s=t.LMt(0).$yt();return()=>s()},()=>50,()=>.1,()=>100,t=>{const s=t.LMt(0).$yt(),i=t.LMt(1);return()=>s(i.uMt()+" ",5)},t=>{const s=t.LMt(0).$yt(),i=t.LMt(1),e=t.LMt(2).$yt(),h=t.LMt(3);return()=>s(i.uMt(),e(h.uMt())-1)},()=>0,t=>{const s=t.LMt(0).$yt(),i=t.LMt(1).$yt(),e=t.LMt(2);return()=>s(i(e.uMt()," ","_")+"_____",5)},()=>4,t=>{const s=t.LMt(0).$yt(),i=t.LMt(1),e=t.LMt(2).$yt();return()=>s(i.uMt(),e(),1)},()=>" ",t=>{const s=t.LMt(0).$yt(),i=t.LMt(1);return()=>s(i.uMt())},t=>{const s=t.LMt(0).$yt();return()=>s()+1},t=>{const s=t.LMt(0).bMt(),i=t.LMt(1).bMt();return()=>e(s.oet(),i.oet())},t=>{const s=t.LMt(0).bMt(),i=t.LMt(1).$yt(),e=t.LMt(2),h=t.LMt(3).$yt();return()=>s.oet()+i(e.uMt(),h(),1)},()=>"outer",t=>{const s=t.LMt(0);return()=>s.rMt()-1},t=>{const s=t.LMt(0).$yt(),i=t.LMt(1).bMt();return()=>s(i.oet(),"1")},()=>-1,()=>"inner",t=>{const s=t.LMt(0),i=t.LMt(1).$yt();return()=>s.rMt()+84*i("outer")},t=>{const s=t.LMt(0),i=t.LMt(1).$yt();return()=>s.rMt()+24*i("inner")},t=>{const s=t.LMt(0).$yt(),i=t.LMt(1).$yt(),e=t.LMt(2).bMt(),h=t.LMt(3),r=t.LMt(4).$yt(),n=t.LMt(5),o=t.LMt(6).$yt();return()=>s(i(e.oet(),"0",h.rMt(r("outer"))),"1",n.rMt(o("inner")))},t=>{const s=t.LMt(0),i=t.LMt(1).$yt();return()=>s.rMt()+24*i("outer")},t=>{const s=t.LMt(0).$yt(),i=t.LMt(1).bMt(),e=t.LMt(2),h=t.LMt(3).$yt();return()=>s(i.oet(),"0",e.rMt(h("outer")))},t=>{const s=t.LMt(0);return()=>84*s.rMt()},t=>{const s=t.LMt(0);return()=>nl.lr(24*s.rMt(),492,1e4)},t=>{const s=t.LMt(0),i=t.LMt(1),e=t.LMt(2).$yt();return()=>nl.lr(s.rMt(),-(i.rMt()-e()),0)},t=>{const s=t.LMt(0),i=t.LMt(1);return()=>nl.lr(s.rMt(),-(i.rMt()-492),0)},()=>"Typing",()=>"Toggling"]}var t=self.Rs;self.HPt=function(){return[t.Y9.Text,t.Y9.Sht,t.Y9.Touch,t.vat.tYt,t.vat.DYt,t.Y9.J8t,t.Y9.Keyboard,t.Y9.V9.J9.Q9,t.Y9.V9.J9.h1,t.Y9.V9.kht.d5t,t.Y9.Text.Fht.L2t,t.Y9.Text.Fht.O2t,t.Y9.Sht.kht.WI,t.Y9.Text.Fht.R2t,t.Y9.Text.Fht.P2t,t.Y9.Sht.kht.MTt,t.Y9.Text.kht.D6t,t.Y9.Sht.kht.g2t,t.Y9.Text.Fht.ibt,t.Y9.Touch.J9.FJt,t.Y9.Touch.J9.zJt,t.Y9.V9.J9.Ojt,t.Y9.Text.kht.g2t,t.Y9.V9.Fht.left,t.Y9.Text.Fht.Text,t.Y9.Sht.J9.e2t,t.Y9.Text.kht.S2t,t.Y9.Sht.kht.cTt,t.Y9.V9.Fht.QBt,t.Y9.Text.J9.h2t,t.Y9.Keyboard.J9.UVt,t.Y9.V9.J9.Ajt,t.Y9.V9.Fht.Qt,t.Y9.Keyboard.Fht.$Vt,t.Y9.Text.J9.x6t,t.Y9.V9.Fht.Nzt,t.Y9.Sht.kht.TN,t.Y9.V9.kht.In,t.Y9.Keyboard.J9.WVt,t.Y9.Text.kht.hf,t.Y9.V9.Fht.replace,t.Y9.Text.kht.d2t,t.Y9.J8t.kht.WI,t.Y9.V9.J9.Zjt,t.Y9.V9.Fht.mid,t.Y9.V9.Fht.OBt,t.Y9.V9.kht.n5t,t.Y9.V9.kht.o5t,t.Y9.V9.J9.Amt,t.Y9.J8t.kht._6,t.Y9.J8t.Fht.R2t,t.Y9.V9.Fht.find,t.Y9.Sht.Fht.L2t,t.Y9.Sht.Fht.O2t,t.Y9.J8t.Fht.$8t,t.vat.tYt.kht.xYt,t.vat.DYt.J9.LYt,t.vat.DYt.J9.JYt,t.Y9.Sht.kht.jSt,t.Y9.Sht.Fht.R2t,t.Y9.V9.Fht.rBt,t.Y9.Sht.Fht.P2t,t.Y9.Touch.J9.EJt,t.Y9.Touch.J9.ZJt,t.Y9.Touch.J9.RJt]},self.ckt=[{Option:0},{Key:0},{XYt:0},{KYt:0},{$Yt:0},{tHt:0},{Touch:0},{sHt:0},{tYt:0},{iHt:0},{eHt:0},{Array:0},{hHt:0},{Keyboard:0},{rHt:0},{nHt:0},{oHt:0},{aHt:0},{uHt:0},{lHt:0}],self.cHt={Key:class extends self.u6t{},KYt:class extends self.cQt{},tHt:class extends self.u6t{},Touch:class extends self.wF{},sHt:class extends self.u6t{},Option:class extends self.u6t{},eHt:class extends self.cQt{},Array:class extends self.rVt{},hHt:class extends self.u6t{},Keyboard:class extends self.wF{},rHt:class extends self.u6t{},nHt:class extends self.cQt{}};